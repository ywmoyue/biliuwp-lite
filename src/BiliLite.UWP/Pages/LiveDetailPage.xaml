
<local:BasePage
    x:Class="BiliLite.Pages.LiveDetailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Player="using:BiliLite.Models.Common.Player"
    xmlns:canvas="using:Microsoft.Graphics.Canvas.UI.Xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:danmaku="using:NSDanmaku.Controls"
    xmlns:fa="using:FontAwesome5"
    xmlns:live="using:BiliLite.Models.Common.Live"
    xmlns:live1="using:BiliLite.ViewModels.Live"
    xmlns:local="using:BiliLite.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model_live="using:BiliLite.Modules.Live"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Controls"
    Margin="{x:Bind m_viewModel.Margin, Mode=OneWay}"
    Background="Transparent"
    mc:Ignorable="d">
    <Page.Resources>
        <SolidColorBrush x:Key="GridViewItemBackgroundSelected" Color="{ThemeResource SystemAccentColor}" />
        <SolidColorBrush x:Key="GridViewItemForegroundSelected" Color="{ThemeResource SystemAccentColor}" />
        <DataTemplate
            x:Key="chat"
            x:Name="chat"
            x:DataType="live:DanmuMsgModel">
            <toolkit:WrapPanel HorizontalAlignment="{x:Bind CardHorizontalAlignment}" Orientation="Horizontal">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Grid
                        Grid.Column="0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Visibility="{x:Bind ShowUserFace}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <!--  头像  -->
                        <HyperlinkButton
                            Grid.Row="0"
                            Margin="0,10,4,2"
                            Padding="4"
                            Click="BtnOpenDanmuSpace_Click"
                            CornerRadius="50">
                            <Ellipse
                                Width="32"
                                Height="32"
                                Stroke="{ThemeResource TextColor}"
                                StrokeThickness="1">
                                <Ellipse.Fill>
                                    <ImageBrush ImageSource="{x:Bind Path=Face, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128h', Mode=OneWay}" Stretch="UniformToFill" />
                                </Ellipse.Fill>
                            </Ellipse>
                        </HyperlinkButton>
                        <!--  房管图标  -->
                        <Border
                            Grid.Row="1"
                            Padding="2,0"
                            HorizontalAlignment="Center"
                            Background="DarkOrange"
                            BorderBrush="DarkOrange"
                            BorderThickness="1"
                            CornerRadius="{StaticResource ControlCornerRadius}"
                            Visibility="{x:Bind ShowAdmin}">
                            <TextBlock
                                HorizontalAlignment="Center"
                                FontSize="10"
                                Foreground="White"
                                Text="{x:Bind Role, Mode=OneWay}" />
                        </Border>
                    </Grid>

                    <Grid Grid.Column="1" Margin="0,0,4,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid
                            Grid.Row="0"
                            Height="28"
                            Visibility="{x:Bind ShowUserName}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <!--  粉丝牌  -->
                            <Grid Grid.Column="0">
                                <Border
                                    Grid.Column="0"
                                    Margin="1,0,4,0"
                                    VerticalAlignment="Center"
                                    BorderBrush="{x:Bind Path=MedalColor, Converter={StaticResource ColorConvert}}"
                                    BorderThickness="1"
                                    CornerRadius="{StaticResource ControlCornerRadius}"
                                    Visibility="{x:Bind ShowMedal}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <Grid Padding="2,0" Background="{x:Bind Path=MedalColor, Converter={StaticResource ColorConvert}}">
                                            <TextBlock
                                                FontSize="12"
                                                Foreground="White"
                                                Text="{x:Bind MedalName}" />
                                        </Grid>
                                        <Grid
                                            Grid.Column="1"
                                            Padding="4,0"
                                            Background="White">
                                            <TextBlock
                                                FontSize="12"
                                                Foreground="{x:Bind Path=MedalColor, Converter={StaticResource ColorConvert}}"
                                                Text="{x:Bind MedalLevel}" />
                                        </Grid>
                                    </Grid>
                                </Border>
                            </Grid>

                            <!--  用户名  -->
                            <Grid Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock
                                    Margin="2,0,0,0"
                                    FontWeight="{x:Bind Path=UserNameFontWeight}"
                                    Foreground="{x:Bind Path=UserNameColor, Converter={StaticResource ColorConvert}}"
                                    IsTextSelectionEnabled="True"
                                    Text="{x:Bind UserName}" />
                            </Grid>

                            <!--  舰长图标  -->
                            <Image
                                Grid.Column="2"
                                Height="24"
                                Margin="4,0,0,0"
                                VerticalAlignment="Center"
                                Visibility="{x:Bind ShowCaptain}">
                                <Image.Source>
                                    <BitmapImage UriSource="{Binding UserCaptainImage}" />
                                </Image.Source>
                            </Image>
                        </Grid>

                        <!--  富文本  -->
                        <Border
                            Grid.Row="1"
                            Padding="{x:Bind CardPadding}"
                            HorizontalAlignment="Left"
                            Background="{x:Bind CardColor}"
                            BorderThickness="1"
                            CornerRadius="{StaticResource OverlayCornerRadius}"
                            Visibility="{x:Bind ShowRichText}">
                            <Grid>
                                <StackPanel Orientation="Vertical">
                                    <ContentControl Content="{Binding Path=RichText, Mode=OneWay}" Visibility="{x:Bind ShowBigSticker, Converter={StaticResource DisplayConvert}}" />
                                    <Image
                                        Width="{x:Bind BigSticker.Width}"
                                        Height="{x:Bind BigSticker.Height}"
                                        Visibility="{x:Bind ShowBigSticker}">
                                        <Image.Source>
                                            <BitmapImage UriSource="{x:Bind BigSticker.Url}" />
                                        </Image.Source>
                                    </Image>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </toolkit:WrapPanel>
        </DataTemplate>
        <Flyout x:Name="EmojiFlyout">
            <Grid Width="340">
                <Pivot ItemsSource="{x:Bind Path=m_liveRoomViewModel.EmoticonsPackages, Mode=OneWay}">
                    <Pivot.Resources>
                        <Style TargetType="PivotItem">
                            <Setter Property="Margin" Value="0" />
                        </Style>
                    </Pivot.Resources>
                    <Pivot.HeaderTemplate>
                        <DataTemplate x:DataType="live:LiveRoomEmoticonPackage">
                            <StackPanel
                                Height="36"
                                Padding="0,-4"
                                Orientation="Horizontal">
                                <Image
                                    Height="34"
                                    Margin="0,4"
                                    VerticalAlignment="Center"
                                    Source="{x:Bind Cover, Mode=OneWay}" />
                                <TextBlock
                                    Margin="2,0,0,0"
                                    VerticalAlignment="Center"
                                    FontSize="16"
                                    Text="{x:Bind Path=Name, Mode=OneWay}" />
                            </StackPanel>
                        </DataTemplate>
                    </Pivot.HeaderTemplate>
                    <Pivot.ItemTemplate>
                        <DataTemplate x:DataType="live:LiveRoomEmoticonPackage">
                            <GridView
                                Width="320"
                                MaxHeight="300"
                                IsItemClickEnabled="True"
                                ItemClick="EmojiItem_Click"
                                ItemsSource="{x:Bind Path=Emoticons, Mode=OneWay}"
                                SelectionMode="None">
                                <GridView.ItemTemplate>
                                    <DataTemplate x:DataType="live:LiveRoomEmoticon">
                                        <StackPanel Width="64" Margin="4,0">
                                            <Grid MinHeight="56">
                                                <FontIcon
                                                    HorizontalAlignment="Stretch"
                                                    FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets"
                                                    FontSize="36"
                                                    Glyph="&#xE72E;"
                                                    Visibility="{x:Bind LockIconVisibility, Mode=OneWay}" />
                                                <Image
                                                    MinHeight="56"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Center"
                                                    Opacity="{x:Bind Opacity, Mode=OneWay}"
                                                    Source="{x:Bind Url, Mode=OneWay}" />
                                            </Grid>
                                            <TextBlock
                                                HorizontalAlignment="Center"
                                                FontSize="12"
                                                Text="{x:Bind ShowText, Mode=OneWay}"
                                                TextAlignment="Center" />
                                        </StackPanel>
                                    </DataTemplate>
                                </GridView.ItemTemplate>
                            </GridView>
                        </DataTemplate>
                    </Pivot.ItemTemplate>
                </Pivot>
            </Grid>
        </Flyout>
    </Page.Resources>
    <Grid PointerEntered="RootGrid_PointerEntered" PointerExited="RootGrid_PointerExited">
        <Button
            x:Name="BtnFoucs"
            Width="0"
            Height="0"
            Margin="-8,-8,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Background="Transparent"
            BorderThickness="0" />
        <Grid x:Name="detail">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition x:Name="RightInfo" Width="{x:Bind m_viewModel.RightInfoWidth, Mode=OneWay}" />
            </Grid.ColumnDefinitions>
            <Grid Background="{ThemeResource NavigationViewTopPaneBackground}" DoubleTapped="Grid_DoubleTapped">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition x:Name="BottomInfo" Height="{x:Bind m_viewModel.BottomInfoHeight, Mode=OneWay}" />
                </Grid.RowDefinitions>
                <Grid.ContextFlyout>
                    <Flyout>
                        <TextBlock
                            x:Name="txtInfo"
                            MaxWidth="400"
                            IsTextSelectionEnabled="True"
                            TextAlignment="Justify"
                            TextWrapping="Wrap" />
                    </Flyout>
                </Grid.ContextFlyout>
                <Grid
                    x:Name="PlayerView"
                    Background="Black"
                    ManipulationCompleted="Grid_ManipulationCompleted"
                    ManipulationDelta="Grid_ManipulationDelta"
                    ManipulationMode="TranslateY,TranslateRailsY"
                    ManipulationStarted="Grid_ManipulationStarted"
                    PointerEntered="Grid_PointerEntered"
                    PointerExited="Grid_PointerExited"
                    PointerMoved="Grid_PointerMoved"
                    SizeChanged="Player_SizeChanged">
                    <MediaPlayerElement x:Name="playerElement" />

                    <!--  弹幕  -->
                    <Grid Tapped="Grid_Tapped">
                        <danmaku:Danmaku x:Name="DanmuControl" />
                    </Grid>
                    <Grid>
                        <canvas:CanvasAnimatedControl x:Name="DanmakuCanvas" />
                    </Grid>
                    <!--  亮度  -->
                    <Grid
                        x:Name="BrightnessShield"
                        Background="#99000000"
                        Opacity="0"
                        Tapped="Grid_Tapped" />
                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="24"
                        Foreground="Gray"
                        Visibility="{x:Bind Path=m_viewModel.Living, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                        主播正在换女装
                    </TextBlock>
                    <StackPanel
                        x:Name="PlayerLoading"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Visibility="{x:Bind m_viewModel.ShowLoading, Mode=OneWay}">
                        <muxc:ProgressRing
                            Width="56"
                            Height="56"
                            IsActive="True" />
                        <TextBlock
                            x:Name="PlayerLoadText"
                            Margin="0,8"
                            Foreground="Gray"
                            Text="{x:Bind m_viewModel.LoadText, Mode=OneWay}"
                            TextAlignment="Center" />
                    </StackPanel>
                    <Border
                        x:Name="ToolTip"
                        Padding="16"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="#CCFFFFFF"
                        CornerRadius="{StaticResource OverlayCornerRadius}"
                        Visibility="Collapsed">
                        <TextBlock
                            x:Name="TxtToolTip"
                            FontSize="20"
                            Foreground="Black"
                            Text="" />
                    </Border>
                    <Grid x:Name="control">
                        <Grid x:Name="StandardControl">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid>
                                <Grid.Background>
                                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                        <GradientStop Color="#C8000000" />
                                        <GradientStop Offset="1" Color="#00000000" />
                                    </LinearGradientBrush>
                                </Grid.Background>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    x:Name="TopTitle"
                                    Margin="12,0"
                                    VerticalAlignment="Center"
                                    FontSize="18"
                                    Foreground="White"
                                    Text="{x:Bind Path=m_liveRoomViewModel.RoomTitle, Mode=OneWay}"
                                    TextTrimming="CharacterEllipsis" />
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Button
                                        x:Name="TopBtnShare"
                                        Width="48"
                                        Height="48"
                                        Padding="0"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Foreground="White">
                                        <FontIcon
                                            FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets"
                                            FontSize="28"
                                            Glyph="&#xE72D;" />
                                        <Button.Flyout>
                                            <MenuFlyout>
                                                <MenuFlyoutItem
                                                    Click="btnShareCopyUrl_Click"
                                                    Icon="Copy"
                                                    Text="复制链接" />
                                                <MenuFlyoutItem
                                                    Click="btnShareCopy_Click"
                                                    Icon="Copy"
                                                    Text="复制标题链接" />
                                                <MenuFlyoutItem
                                                    Click="btnShare_Click"
                                                    Icon="Share"
                                                    Text="分享到..." />
                                            </MenuFlyout>
                                        </Button.Flyout>
                                    </Button>
                                    <Button
                                        x:Name="TopBtnScreenshot"
                                        Width="48"
                                        Height="48"
                                        Margin="8,0,0,0"
                                        Padding="0"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Click="TopBtnScreenshot_Click">
                                        <Button.KeyboardAccelerators>
                                            <KeyboardAccelerator Key="F10" />
                                        </Button.KeyboardAccelerators>
                                        <Image
                                            Width="28"
                                            Height="28"
                                            Source="/Assets/Icon/icon_screenshot.png" />
                                    </Button>

                                    <Button
                                        x:Name="TopBtnSetting"
                                        Width="48"
                                        Height="48"
                                        Margin="8,0,0,0"
                                        Padding="0"
                                        Background="Transparent"
                                        BorderThickness="0">
                                        <Image
                                            Width="32"
                                            Height="32"
                                            Source="/Assets/Icon/icon_settings.png" />
                                        <Button.Flyout>
                                            <Flyout>
                                                <Pivot Width="325">
                                                    <PivotItem>
                                                        <PivotItem.Header>
                                                            <TextBlock FontSize="18">设置</TextBlock>
                                                        </PivotItem.Header>
                                                        <StackPanel HorizontalAlignment="Left">
                                                            <!--<TextBlock >弹幕接收延迟(毫秒) <Run Text="{x:Bind Path=LiveSettingDelay.Value,Mode=OneWay,Converter={StaticResource NumberToStringConvert}}"/></TextBlock>
                                                            <Slider x:Name="LiveSettingDelay" Width="240" Minimum="10" Maximum="5000" StepFrequency="1"></Slider>-->
                                                            <TextBlock>
                                                                互动区自动清理条数<Run Text="{x:Bind Path=LiveSettingCount.Value, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                            <Slider
                                                                x:Name="LiveSettingCount"
                                                                Width="240"
                                                                Maximum="1000"
                                                                Minimum="50"
                                                                StepFrequency="1" />
                                                            <ToggleSwitch
                                                                x:Name="LiveSettingAutoOpenBox"
                                                                Margin="0,8,0,0"
                                                                Header="自动开启宝箱"
                                                                Visibility="Collapsed" />
                                                            <ToggleSwitch
                                                                x:Name="LiveSettingHardwareDecode"
                                                                Margin="0,8,0,0"
                                                                Header="开启硬解" />
                                                            <StackPanel Margin="0,8,0,0">
                                                                <TextBlock Margin="0,4,0,0">播放器默认模式</TextBlock>
                                                                <ComboBox
                                                                    x:Name="PlayerModeComboBox"
                                                                    MinWidth="200"
                                                                    Margin="0,4,0,0"
                                                                    DisplayMemberPath="Name"
                                                                    ItemsSource="{x:Bind Player:DefaultPlayerModeOptions.DefaultLivePlayerModeOption}"
                                                                    SelectedValue="{x:Bind m_viewModel.LivePlayerMode, Mode=TwoWay}"
                                                                    SelectedValuePath="Value"
                                                                    SelectionChanged="PlayerModeComboBox_OnSelectionChanged" />
                                                            </StackPanel>
                                                            <StackPanel Margin="0,8,0,0">
                                                                <TextBlock Margin="0,4,0,0">直播流默认来源</TextBlock>
                                                                <ComboBox
                                                                    x:Name="PlayUrlSourceComboBox"
                                                                    MinWidth="200"
                                                                    Margin="0,4,0,0"
                                                                    DisplayMemberPath="Name"
                                                                    ItemsSource="{x:Bind live:DefaultPlayUrlSourceOptions.DefaultLivePlayUrlSourceOption}"
                                                                    SelectedValue="{x:Bind m_viewModel.LivePlayUrlSource, Mode=TwoWay}"
                                                                    SelectedValuePath="Value"
                                                                    SelectionChanged="PlayUrlSourceComboBox_OnSelectionChanged" />
                                                            </StackPanel>
                                                        </StackPanel>
                                                    </PivotItem>
                                                    <PivotItem>
                                                        <PivotItem.Header>
                                                            <TextBlock FontSize="18">屏蔽</TextBlock>
                                                        </PivotItem.Header>
                                                        <StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <ToggleSwitch
                                                                    x:Name="LiveSettingDotReceiveGiftMsg"
                                                                    Margin="0,8,0,0"
                                                                    Header="屏蔽礼物信息" />
                                                                <ToggleSwitch
                                                                    x:Name="LiveSettingDotReceiveWelcomeMsg"
                                                                    Margin="0,8,0,0"
                                                                    Header="屏蔽进场信息" />
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <ToggleSwitch
                                                                    x:Name="LiveSettingDotReceiveLotteryMsg"
                                                                    Margin="0,8,0,0"
                                                                    Header="屏蔽天选/红包抽奖" />
                                                                <ToggleSwitch
                                                                    x:Name="LiveSettingDotShowLotteryDanmu"
                                                                    Margin="0,8,0,0"
                                                                    Header="屏蔽抽奖弹幕" />
                                                            </StackPanel>
                                                            <TextBlock Margin="0,8">关键词屏蔽</TextBlock>
                                                            <TextBlock
                                                                Margin="0,-4,0,8"
                                                                FontSize="12"
                                                                Foreground="Gray"
                                                                IsColorFontEnabled="False">
                                                                💡点击灰色按钮即可删除对应的关键词
                                                            </TextBlock>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition MaxWidth="160" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBox x:Name="DanmuSettingTxtWord" PlaceholderText="输入关键词.." />
                                                                <Button
                                                                    x:Name="DanmuSettingAddWord"
                                                                    Grid.Column="1"
                                                                    Margin="8,0,0,0"
                                                                    Click="btnAddShieldWord_Click">
                                                                    添加
                                                                </Button>
                                                                <Button
                                                                    x:Name="DanmuSettingSyncWords"
                                                                    Grid.Column="2"
                                                                    Margin="8,0,0,0"
                                                                    Visibility="Collapsed">
                                                                    同步
                                                                </Button>
                                                            </Grid>
                                                            <ItemsControl
                                                                x:Name="DanmuSettingWords"
                                                                Margin="0,8,0,0"
                                                                ItemsSource="{x:Bind Path=m_liveSettingsControlViewModel.LiveShieldWords, Mode=OneWay}">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <toolkit:WrapPanel VerticalSpacing="4" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <HyperlinkButton Margin="0,0,8,0" Click="btnRemoveShieldWord_Click">
                                                                            <Border
                                                                                Padding="8,4"
                                                                                Background="Gray"
                                                                                CornerRadius="{StaticResource ControlCornerRadius}">
                                                                                <TextBlock
                                                                                    FontSize="12"
                                                                                    Foreground="white"
                                                                                    Text="{Binding}" />
                                                                            </Border>
                                                                        </HyperlinkButton>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                            </ItemsControl>
                                                        </StackPanel>
                                                    </PivotItem>
                                                    <PivotItem>
                                                        <PivotItem.Header>
                                                            <TextBlock FontSize="18">低延迟(实验性)</TextBlock>
                                                        </PivotItem.Header>
                                                        <StackPanel>
                                                            <ToggleSwitch
                                                                x:Name="LowDelayMode"
                                                                Margin="0,8,0,0"
                                                                Header="⚡低延迟模式"
                                                                Toggled="LowDelaySwitch_Toggled" />
                                                            <TextBlock
                                                                Margin="0,6,0,0"
                                                                FontSize="12"
                                                                Foreground="Gray"
                                                                IsColorFontEnabled="False"
                                                                TextAlignment="Justify"
                                                                TextWrapping="Wrap">
                                                                💡开启后请关闭再打开当前直播界面
                                                            </TextBlock>
                                                            <StackPanel x:Name="LowDelayModeBlock" Visibility="Collapsed">
                                                                <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                                                                    <TextBlock
                                                                        VerticalAlignment="Center"
                                                                        TextAlignment="Justify"
                                                                        TextWrapping="Wrap">
                                                                        <Run>🎞 已储存视频流:</Run>
                                                                        <Run x:Name="LowDelayHaveStorageUrl">否</Run>
                                                                    </TextBlock>
                                                                    <Button
                                                                        Margin="8,0,0,0"
                                                                        Padding="4"
                                                                        VerticalAlignment="Center"
                                                                        Click="btnManualPlayUrlCopy_Click">
                                                                        📜复制视频流
                                                                    </Button>
                                                                </StackPanel>
                                                                <TextBlock
                                                                    Margin="0,6,0,0"
                                                                    FontSize="12"
                                                                    Foreground="Gray"
                                                                    IsColorFontEnabled="False"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap">
                                                                    ⚠️一般来说, 开播时获取的原始流有效期为1小时
                                                                </TextBlock>
                                                                <StackPanel Margin="0,16,0,0" Orientation="Horizontal">
                                                                    <TextBox
                                                                        x:Name="LowDelayManualPlayUrlTextBox"
                                                                        Width="120"
                                                                        Padding="4"
                                                                        VerticalAlignment="Center"
                                                                        PlaceholderText="✏️输入视频流..." />
                                                                    <Button
                                                                        Margin="8,0,0,0"
                                                                        Padding="4"
                                                                        VerticalAlignment="Center"
                                                                        Click="btnRefreshPlayUrl_Click">
                                                                        🔄更新视频流
                                                                    </Button>
                                                                </StackPanel>
                                                                <TextBlock
                                                                    Margin="0,6,0,0"
                                                                    FontSize="12"
                                                                    Foreground="Gray"
                                                                    IsColorFontEnabled="False"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap">
                                                                    ⚠️如果输入为空并更新, 则会清除储存的视频流
                                                                </TextBlock>
                                                                <Button
                                                                    Margin="0,12,0,0"
                                                                    Padding="5"
                                                                    Click="btnPlayForward_Click">
                                                                    ⏩前进一秒
                                                                </Button>
                                                                <TextBlock
                                                                    Margin="0,6,0,0"
                                                                    FontSize="12"
                                                                    Foreground="Gray"
                                                                    IsColorFontEnabled="False"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap">
                                                                    💡使用此按钮来手动向前缩小延迟
                                                                </TextBlock>
                                                            </StackPanel>
                                                        </StackPanel>
                                                    </PivotItem>
                                                </Pivot>
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </Grid>
                            <Grid Grid.Row="2">
                                <Grid.Background>
                                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                        <GradientStop Color="#00000000" />
                                        <GradientStop Offset="1" Color="#C8000000" />
                                    </LinearGradientBrush>
                                </Grid.Background>

                                <Grid Padding="4,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Orientation="Horizontal">
                                        <HyperlinkButton
                                            x:Name="BottomBtnPause"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnPause_Click"
                                            Foreground="White"
                                            Visibility="{x:Bind m_viewModel.ShowPauseBtn, Mode=OneWay}">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Pause" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnPlay"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnPlay_Click"
                                            Foreground="White"
                                            Visibility="{x:Bind m_viewModel.ShowResumeBtn, Mode=OneWay}">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Play" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnRefresh"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnRefresh_Click"
                                            Foreground="White">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_SyncAlt" />
                                            <HyperlinkButton.KeyboardAccelerators>
                                                <KeyboardAccelerator Key="F5" />
                                            </HyperlinkButton.KeyboardAccelerators>
                                        </HyperlinkButton>
                                        <TextBlock
                                            x:Name="BottomTextPostion"
                                            Margin="8,0,8,2"
                                            VerticalAlignment="Center"
                                            FontSize="18"
                                            Foreground="White"
                                            Text="{x:Bind Path=m_liveRoomViewModel.LiveTime, Mode=OneWay}" />

                                        <Button
                                            x:Name="TopBtnOpenDanmaku"
                                            Width="48"
                                            Height="48"
                                            Padding="0"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Click="TopBtnOpenDanmaku_Click"
                                            Visibility="{x:Bind Path=m_danmakuController.DanmakuViewModel.IsHide, Mode=OneWay}">
                                            <Image
                                                Width="28"
                                                Height="28"
                                                Source="/Assets/Icon/icon_danmaku_open.png" />
                                        </Button>
                                        <Button
                                            x:Name="TopBtnCloseDanmaku"
                                            Width="48"
                                            Height="48"
                                            Padding="0"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Click="TopBtnCloseDanmaku_Click"
                                            Visibility="{x:Bind Path=m_danmakuController.DanmakuViewModel.IsHide, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                            <Image
                                                Width="28"
                                                Height="28"
                                                Source="/Assets/Icon/icon_danmaku_close.png" />
                                        </Button>
                                        <Button
                                            x:Name="TopBtnSettingDanmaku"
                                            Width="48"
                                            Height="48"
                                            Padding="0"
                                            Background="Transparent"
                                            BorderThickness="0">
                                            <Image
                                                Width="28"
                                                Height="28"
                                                Source="/Assets/Icon/icon_danmaku_setting.png" />
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel>
                                                        <TextBlock Margin="0,4,0,0">
                                                            弹幕顶部距离<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.MarginTop, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                        <Slider
                                                            x:Name="DanmuTopMargin"
                                                            Minimum="0"
                                                            StepFrequency="4"
                                                            Value="0" />
                                                        <TextBlock Margin="0,4,0,0" Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowAreaControl}">
                                                            弹幕显示区域<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.Area, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                        <Slider
                                                            x:Name="DanmuSettingArea"
                                                            Maximum="1"
                                                            Minimum="0.1"
                                                            StepFrequency="0.1"
                                                            Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowAreaControl}"
                                                            Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.Area, Mode=OneWay}" />
                                                        <TextBlock Margin="0,4,0,0">
                                                            弹幕缩放<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.SizeZoom, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                        <Slider
                                                            x:Name="DanmuSettingFontZoom"
                                                            Maximum="2"
                                                            Minimum="0.1"
                                                            StepFrequency="0.05"
                                                            Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.SizeZoom, Mode=OneWay}" />
                                                        <TextBlock Margin="0,4,0,0">
                                                            弹幕速度<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.Speed, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                        <Slider
                                                            x:Name="DanmuSettingSpeed"
                                                            Maximum="25"
                                                            Minimum="1"
                                                            StepFrequency="1"
                                                            Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.Speed, Mode=OneWay}" />
                                                        <TextBlock Margin="0,4,0,0">
                                                            弹幕透明度<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.Opacity, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                        <Slider
                                                            x:Name="DanmuSettingOpacity"
                                                            Maximum="1"
                                                            Minimum="0.1"
                                                            StepFrequency="0.1"
                                                            Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.Opacity, Mode=OneWay}" />

                                                        <TextBlock Margin="0,4,0,0">
                                                            弹幕字体
                                                        </TextBlock>
                                                        <AutoSuggestBox x:Name="DanmuSettingFont" QueryIcon="Accept" />

                                                        <StackPanel Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowBoldStyleControl}">
                                                            <TextBlock Margin="0,4">弹幕样式</TextBlock>
                                                            <ComboBox x:Name="DanmuSettingStyle" SelectedIndex="{x:Bind Path=m_danmakuController.DanmakuViewModel.BolderStyle, Converter={StaticResource DanmakuStyleConvert}, Mode=TwoWay}">
                                                                <ComboBox.Items>
                                                                    <ComboBoxItem>重叠</ComboBoxItem>
                                                                    <ComboBoxItem>无边</ComboBoxItem>
                                                                    <ComboBoxItem>阴影</ComboBoxItem>
                                                                    <ComboBoxItem>描边</ComboBoxItem>
                                                                </ComboBox.Items>
                                                            </ComboBox>
                                                        </StackPanel>

                                                        <ToggleSwitch
                                                            x:Name="DanmuSettingBold"
                                                            Margin="0,8,0,0"
                                                            IsOn="{x:Bind Path=m_danmakuController.DanmakuViewModel.Bold, Mode=TwoWay}"
                                                            Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowBoldControl}">
                                                            <ToggleSwitch.Header>
                                                                <TextBlock>字体加粗</TextBlock>
                                                            </ToggleSwitch.Header>
                                                        </ToggleSwitch>

                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>
                                        <!--<HyperlinkButton x:Name="BottomBtnSendDanmaku" Foreground="White" Padding="8" Width="48" Height="48">
                                    <fa:FontAwesome Icon="Solid_Comments" FontSize="20"></fa:FontAwesome>
                                </HyperlinkButton>-->
                                    </StackPanel>
                                    <Grid
                                        x:Name="BottomBtnSendDanmakuWide"
                                        Grid.Column="1"
                                        MaxWidth="400"
                                        Margin="12,0"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <AutoSuggestBox
                                            x:Name="DanmuTextWide"
                                            Margin="0,0,5,0"
                                            Padding="8,8,56,8"
                                            VerticalAlignment="Center"
                                            BorderThickness="0"
                                            PlaceholderText="说点什么吧~"
                                            QueryIcon="Send"
                                            QuerySubmitted="DanmuText_QuerySubmitted"
                                            Text="{x:Bind m_viewModel.DanmakuInput, Mode=TwoWay}" />
                                        <Button
                                            Grid.Column="1"
                                            Width="32"
                                            Height="32"
                                            Padding="0"
                                            VerticalAlignment="Center"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Click="EmojiButton_Click">
                                            <FontIcon
                                                FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets"
                                                FontSize="14"
                                                Glyph="&#xED54;" />
                                        </Button>
                                    </Grid>


                                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                                        <HyperlinkButton
                                            x:Name="BottomBtnGiftRow"
                                            Width="48"
                                            Height="48"
                                            Margin="0,0,10,0"
                                            Padding="8"
                                            Click="BottomBtnSwitchGiftBar_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="开关礼物栏">
                                            <fa:FontAwesome FontSize="22" Icon="Solid_Gift" />
                                        </HyperlinkButton>

                                        <Button
                                            x:Name="BottomBtnVolume"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Foreground="White"
                                            ToolTipService.ToolTip="音量">
                                            <fa:FontAwesome
                                                x:Name="BottomBtnVolumeIcon"
                                                FontSize="20"
                                                Icon="Solid_VolumeUp" />
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Margin="0,0,10,8" VerticalAlignment="Bottom">0</TextBlock>
                                                        <StackPanel>
                                                            <TextBlock HorizontalAlignment="Center">音量</TextBlock>
                                                            <Slider
                                                                x:Name="SliderVolume"
                                                                Width="200"
                                                                Maximum="1"
                                                                Minimum="0"
                                                                StepFrequency="0.1"
                                                                Value="1" />
                                                        </StackPanel>
                                                        <TextBlock Margin="10,0,0,8" VerticalAlignment="Bottom">1</TextBlock>
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>

                                        <Button
                                            x:Name="BottomBtnQuality"
                                            Height="48"
                                            Padding="8,4,8,8"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            FontSize="18"
                                            Foreground="White"
                                            ToolTipService.ToolTip="清晰度"
                                            Visibility="{x:Bind Path=m_viewModel.Living, Mode=OneWay}">
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock
                                                            x:Name="MinQuality"
                                                            Margin="0,0,10,8"
                                                            VerticalAlignment="Bottom"
                                                            Text="{x:Bind m_liveRoomViewModel.Qualites.Count}" />
                                                        <StackPanel>
                                                            <TextBlock Margin="0,0,0,10" HorizontalAlignment="Center">清晰度</TextBlock>
                                                            <Slider
                                                                x:Name="SliderQuality"
                                                                Width="200"
                                                                Minimum="0"
                                                                StepFrequency="1"
                                                                TickFrequency="1"
                                                                TickPlacement="Outside"
                                                                ValueChanged="SliderQuality_ValueChanged" />
                                                        </StackPanel>
                                                        <TextBlock
                                                            x:Name="MaxQuality"
                                                            Margin="10,0,0,8"
                                                            VerticalAlignment="Bottom" />
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>

                                        <Button
                                            x:Name="BottomBtnLine"
                                            Height="48"
                                            Padding="8,4,8,8"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            FontSize="18"
                                            Foreground="White"
                                            ToolTipService.ToolTip="线路"
                                            Visibility="{x:Bind Path=m_viewModel.Living, Mode=OneWay}">
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock
                                                            x:Name="MinLine"
                                                            Margin="0,0,10,8"
                                                            VerticalAlignment="Bottom" />
                                                        <StackPanel>
                                                            <TextBlock Margin="0,0,0,10" HorizontalAlignment="Center">线路</TextBlock>
                                                            <Slider
                                                                x:Name="SliderLine"
                                                                Width="200"
                                                                Minimum="0"
                                                                StepFrequency="1"
                                                                TickFrequency="1"
                                                                TickPlacement="Outside"
                                                                ValueChanged="SliderLine_ValueChanged" />
                                                        </StackPanel>
                                                        <TextBlock
                                                            x:Name="MaxLine"
                                                            Margin="10,0,0,8"
                                                            VerticalAlignment="Bottom" />
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>

                                        <HyperlinkButton
                                            x:Name="BottomBtnMiniWindows"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnMiniWindows_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="小窗置顶">
                                            <fa:FontAwesome FontSize="20" Icon="Regular_WindowRestore" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnFullWindows"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnFullWindows_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="铺满窗口"
                                            Visibility="{x:Bind m_viewModel.ShowFullWindowBtn, Mode=OneWay}">
                                            <fa:FontAwesome FontSize="20" Icon="Regular_WindowMaximize" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnExitFullWindows"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnExitFullWindows_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="取消铺满窗口"
                                            Visibility="{x:Bind m_viewModel.ShowExitFullWindowBtn, Mode=OneWay}">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Columns" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnFull"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnFull_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="全屏"
                                            Visibility="{x:Bind m_viewModel.ShowFullscreenBtn, Mode=OneWay}">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Expand" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnExitFull"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnExitFull_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="退出全屏"
                                            Visibility="{x:Bind m_viewModel.ShowExitFullscreenBtn, Mode=OneWay}">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Compress" />
                                        </HyperlinkButton>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </Grid>
                        <Grid
                            x:Name="MiniControl"
                            VerticalAlignment="Bottom"
                            Visibility="Collapsed">
                            <Grid.Background>
                                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                    <GradientStop Color="#00000000" />
                                    <GradientStop Offset="1" Color="#C8000000" />
                                </LinearGradientBrush>
                            </Grid.Background>
                            <StackPanel VerticalAlignment="Bottom" Orientation="Horizontal">
                                <HyperlinkButton
                                    Width="48"
                                    Height="48"
                                    Padding="8"
                                    Click="BottomBtnPause_Click"
                                    Foreground="White"
                                    Visibility="{Binding ElementName=BottomBtnPause, Path=Visibility, Mode=OneWay}">
                                    <fa:FontAwesome FontSize="20" Icon="Solid_Pause" />
                                </HyperlinkButton>
                                <HyperlinkButton
                                    Width="48"
                                    Height="48"
                                    Padding="8"
                                    Click="BottomBtnPlay_Click"
                                    Foreground="White"
                                    Visibility="{Binding ElementName=BottomBtnPlay, Path=Visibility, Mode=OneWay}">
                                    <fa:FontAwesome FontSize="20" Icon="Solid_Play" />
                                </HyperlinkButton>
                                <Button
                                    Width="48"
                                    Height="48"
                                    Padding="0"
                                    Background="Transparent"
                                    Click="TopBtnOpenDanmaku_Click"
                                    Visibility="{x:Bind Path=m_danmakuController.DanmakuViewModel.IsHide, Mode=OneWay}">
                                    <Image
                                        Width="28"
                                        Height="28"
                                        Source="/Assets/Icon/icon_danmaku_open.png" />
                                </Button>
                                <Button
                                    Width="48"
                                    Height="48"
                                    Padding="0"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Click="TopBtnCloseDanmaku_Click"
                                    Visibility="{x:Bind Path=m_danmakuController.DanmakuViewModel.IsHide, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                    <Image
                                        Width="28"
                                        Height="28"
                                        Source="/Assets/Icon/icon_danmaku_close.png" />
                                </Button>
                                <HyperlinkButton
                                    x:Name="BottomBtnExitMiniWindows"
                                    Width="48"
                                    Height="48"
                                    Padding="8"
                                    VerticalAlignment="Bottom"
                                    Click="BottomBtnExitMiniWindows_Click"
                                    Foreground="White"
                                    ToolTipService.ToolTip="退出小窗置顶">
                                    <fa:FontAwesome FontSize="20" Icon="Regular_WindowMaximize" />
                                </HyperlinkButton>
                            </StackPanel>

                        </Grid>
                    </Grid>
                </Grid>
                <Grid
                    x:Name="BottomGiftBar"
                    Grid.Row="1"
                    Visibility="{x:Bind m_viewModel.ShowBottomGiftBar, Mode=OneWay}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Orientation="Horizontal">
                        <Button
                            Margin="4"
                            Background="Transparent"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.ShowBox, Mode=OneWay}">
                            <StackPanel>
                                <Image
                                    Width="32"
                                    Height="32"
                                    Source="ms-appx:///Assets/Icon/ic_live_precious_box_closed.png" />
                                <TextBlock
                                    Margin="0,4,0,0"
                                    FontSize="12"
                                    Text="{x:Bind Path=m_liveRoomViewModel.BoxTime, Mode=OneWay}"
                                    TextAlignment="Center" />
                            </StackPanel>
                        </Button>
                        <Button
                            Margin="4"
                            Background="Transparent"
                            Click="BtnOpenBox_Click"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.OpenBox, Mode=OneWay}">
                            <StackPanel>
                                <Image
                                    Width="32"
                                    Height="32"
                                    Source="ms-appx:///Assets/Icon/ic_live_precious_box_open.png" />
                                <TextBlock
                                    Margin="0,4,0,0"
                                    FontSize="12"
                                    TextAlignment="Center">
                                    可领取
                                </TextBlock>
                            </StackPanel>
                        </Button>
                        <Button
                            Margin="4"
                            Background="Transparent"
                            Click="BtnOpenBox_Click"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryShow, Mode=OneWay}">
                            <StackPanel>
                                <Image
                                    Width="32"
                                    Height="32"
                                    Source="ms-appx:///Assets/Live/lottery.png" />
                                <TextBlock
                                    Margin="0,4,0,0"
                                    FontSize="12"
                                    Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryDownTime, Mode=OneWay}"
                                    TextAlignment="Center" />
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout x:Name="FlyoutLottery">
                                    <StackPanel Width="Auto" MinWidth="180">
                                        <Grid Margin="0,0,0,8">
                                            <StackPanel Orientation="Horizontal">
                                                <Image
                                                    Width="32"
                                                    Height="32"
                                                    Margin="2,-2,2,0"
                                                    Source="ms-appx:///Assets/Live/lottery.png" />
                                                <TextBlock FontSize="20">天选时刻</TextBlock>
                                            </StackPanel>
                                            <TextBlock
                                                HorizontalAlignment="Right"
                                                FontSize="20"
                                                Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryDownTime, Mode=OneWay}" />
                                        </Grid>

                                        <Grid Margin="0,0,0,4">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="奖品信息："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <RichTextBlock
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center">
                                                <Paragraph>
                                                    <!--<InlineUIContainer>
                                                        <Image Source="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.AwardImage,Mode=OneWay}" Margin="2 2 2 -6" Width="24" Height="24"/>
                                                    </InlineUIContainer>-->
                                                    <Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.AwardName, Mode=OneWay}" />
                                                    <Run Text="×" />
                                                    <Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.AwardNum, Mode=OneWay}" />
                                                </Paragraph>
                                            </RichTextBlock>
                                        </Grid>

                                        <Grid Margin="0,0,0,4" Visibility="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.ShowGift, Mode=OneWay}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="需要送出："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center"
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap">
                                                <Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.GiftName, Mode=OneWay}" />
                                                <Run Text="×" />
                                                <Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.GiftNum, Mode=OneWay}" />
                                            </TextBlock>
                                        </Grid>

                                        <Grid Margin="0,0,0,4" Visibility="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.ShowDanmu, Mode=OneWay}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="弹幕口令："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center"
                                                Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.Danmu, Mode=OneWay}"
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                        </Grid>

                                        <Grid Margin="0,0,0,4">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="限制条件："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center"
                                                Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.RequireText, Mode=OneWay}"
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                        </Grid>

                                        <Grid Margin="0,0,0,4" Visibility="{x:Bind Path=m_liveRoomViewModel.ShowAnchorLotteryWinnerList, Mode=OneWay}">
                                            <!--<Grid Margin="0 0 0 4" Visibility="Visible">-->
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="中奖名单："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <ContentControl
                                                x:Name="AnchorLotteryWinnerList"
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center" />
                                        </Grid>

                                        <!--<TextBlock Margin="0 4" TextWrapping="Wrap" TextAlignment="Justify"><Run Foreground="Gray">奖品名称：</Run><Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.AwardName,Mode=OneWay}"/></TextBlock>
                                        <TextBlock Margin="0 4" TextWrapping="Wrap" TextAlignment="Justify"><Run Foreground="Gray">中奖人数：</Run><Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.AwardNum,Mode=OneWay}"/>人</TextBlock>
                                        <TextBlock Margin="0 4" TextWrapping="Wrap" TextAlignment="Justify"><Run Foreground="Gray">弹幕口令：</Run><Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.Danmu,Mode=OneWay}"/></TextBlock>
                                        <TextBlock Margin="0 4" TextWrapping="Wrap" TextAlignment="Justify" Visibility="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.ShowGift,Mode=OneWay}"><Run Foreground="Gray">赠送礼物：</Run><Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.GiftName,Mode=OneWay}"/>x<Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.GiftNum,Mode=OneWay}"/></TextBlock>
                                        <TextBlock Margin="0 4" TextWrapping="Wrap" TextAlignment="Justify"><Run Foreground="Gray">限制条件：</Run><Run Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.AnchorLotteryInfo.RequireText,Mode=OneWay}"/></TextBlock>-->
                                        <Button
                                            x:Name="BtnSendLotteryDanmu"
                                            Margin="0,4,0,0"
                                            HorizontalAlignment="Stretch"
                                            Click="BtnSendAnchorLotteryDanmu_Click"
                                            Visibility="{x:Bind Path=m_liveRoomViewModel.ShowAnchorLotteryWinnerList, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                            一键参与
                                        </Button>
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>

                        <Button
                            Margin="4"
                            Background="Transparent"
                            Click="BtnOpenBox_Click"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.RedPocketLotteryShow, Mode=OneWay}">
                            <StackPanel>
                                <Image
                                    Width="32"
                                    Height="32"
                                    Source="ms-appx:///Assets/Live/RedPocket.png" />
                                <TextBlock
                                    Margin="0,4,0,0"
                                    FontSize="12"
                                    Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.RedPocketLotteryDownTime, Mode=OneWay}"
                                    TextAlignment="Center" />
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout x:Name="FlyoutRedPocketLottery">
                                    <StackPanel Width="Auto" MinWidth="180">
                                        <Grid Margin="0,0,0,8">
                                            <StackPanel Orientation="Horizontal">
                                                <Image
                                                    Width="32"
                                                    Height="32"
                                                    Margin="2,-2,2,0"
                                                    Source="ms-appx:///Assets/Live/RedPocket.png" />
                                                <TextBlock FontSize="20">人气红包</TextBlock>
                                            </StackPanel>
                                            <TextBlock
                                                HorizontalAlignment="Right"
                                                FontSize="20"
                                                Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.RedPocketLotteryDownTime, Mode=OneWay}" />
                                        </Grid>

                                        <Grid Margin="0,0,0,4">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="发送来源："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <StackPanel
                                                Grid.Column="1"
                                                HorizontalAlignment="Center"
                                                Orientation="Horizontal">
                                                <Ellipse Width="36" Height="36">
                                                    <Ellipse.Fill>
                                                        <ImageBrush ImageSource="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.RedPocketLotteryInfo.SenderFace, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128h', Mode=OneWay}" Stretch="UniformToFill" />
                                                    </Ellipse.Fill>
                                                </Ellipse>
                                                <TextBlock
                                                    Margin="4,0"
                                                    VerticalAlignment="Center"
                                                    Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.RedPocketLotteryInfo.SenderName, Mode=OneWay}"
                                                    TextAlignment="Justify"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </Grid>

                                        <Grid Margin="0,2,0,4">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="奖品列表："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <ContentControl
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center"
                                                Content="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.RedPocketLotteryInfo.AwardsList, Mode=OneWay}" />
                                        </Grid>

                                        <!--<Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0" Margin="0 4" TextWrapping="Wrap" TextAlignment="Justify" Foreground="Gray" Text="总价值："></TextBlock>
                                            <RichTextBlock Grid.Column="1" Margin="0 4" HorizontalAlignment="Center">
                                                <Paragraph>
                                                    <InlineUIContainer>
                                                        <Image Width="16" Margin="2 2 2 -2" Source="ms-appx:///Assets/Icon/ic_live_center_gold_recharge.png"></Image>
                                                    </InlineUIContainer>
                                                    <Run Text="8888"></Run>
                                                </Paragraph>
                                            </RichTextBlock>
                                        </Grid>-->

                                        <Grid Margin="0,0,0,4">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="弹幕口令："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center"
                                                Text="{x:Bind Path=m_liveRoomViewModel.LotteryViewModel.RedPocketLotteryInfo.Danmu, Mode=OneWay}"
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                        </Grid>

                                        <Grid Margin="0,0,0,4" Visibility="{x:Bind Path=m_liveRoomViewModel.Attention, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="限制条件："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center"
                                                Text="关注主播"
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                        </Grid>

                                        <Grid Margin="0,0,0,4" Visibility="{x:Bind Path=m_liveRoomViewModel.ShowRedPocketLotteryWinnerList, Mode=OneWay}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                Margin="0,4"
                                                Foreground="Gray"
                                                Text="中奖名单："
                                                TextAlignment="Justify"
                                                TextWrapping="Wrap" />
                                            <ContentControl
                                                x:Name="redPocketWinnerList"
                                                Grid.Column="1"
                                                Margin="0,4"
                                                HorizontalAlignment="Center" />
                                        </Grid>

                                        <Button
                                            Margin="0,0,0,4"
                                            HorizontalAlignment="Stretch"
                                            Click="BtnSendRedPocketLotteryDanmu_Click"
                                            Visibility="{x:Bind Path=m_liveRoomViewModel.ShowRedPocketLotteryWinnerList, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                            <TextBlock Text="{x:Bind Path=m_liveRoomViewModel.RedPocketSendDanmuBtnText, Mode=OneWay}" />
                                        </Button>
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                    </StackPanel>
                    <Grid
                        Grid.Column="1"
                        Margin="10,0,0,0"
                        HorizontalAlignment="Right">
                        <Grid.Resources>
                            <SolidColorBrush x:Key="ButtonForegroundPointerOver" Color="{ThemeResource SystemAccentColor}" />
                            <SolidColorBrush
                                x:Key="ButtonForegroundPressed"
                                Opacity="0.5"
                                Color="{ThemeResource SystemAccentColor}" />
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel
                            Grid.Column="0"
                            Margin="4"
                            VerticalAlignment="Center"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.Logined, Mode=OneWay}">
                            <StackPanel Orientation="Horizontal">
                                <Image Width="16" Source="ms-appx:///Assets/Icon/ic_live_center_silver_recharge.png" />
                                <TextBlock
                                    Margin="8,0"
                                    VerticalAlignment="Center"
                                    FontSize="12"
                                    Text="{x:Bind Path=m_liveRoomViewModel.WalletInfo.Silver, Converter={StaticResource NumberToStringConvert}, Mode=OneWay}" />
                            </StackPanel>
                            <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                                <Image Width="16" Source="ms-appx:///Assets/Icon/ic_live_center_gold_recharge.png" />
                                <TextBlock
                                    Margin="8,0"
                                    VerticalAlignment="Center"
                                    FontSize="12"
                                    Text="{x:Bind Path=m_liveRoomViewModel.WalletInfo.Gold, Converter={StaticResource NumberToStringConvert}, Mode=OneWay}" />
                            </StackPanel>

                        </StackPanel>
                        <Button
                            Grid.Column="2"
                            Margin="4"
                            Command="{x:Bind Path=m_liveRoomViewModel.RefreshBagCommand}"
                            Style="{StaticResource TransparentButtonStyle}"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.ShowBag, Mode=OneWay}">
                            <StackPanel>
                                <Grid Width="32" Height="32">
                                    <fa:FontAwesome Icon="Solid_Sync" />
                                </Grid>
                                <TextBlock
                                    Margin="0,4,0,0"
                                    FontSize="12"
                                    Text="刷新"
                                    TextAlignment="Center" />
                            </StackPanel>
                        </Button>
                        <Button
                            Grid.Column="3"
                            Margin="4"
                            Command="{x:Bind Path=m_liveRoomViewModel.ShowBagCommand}"
                            Style="{StaticResource TransparentButtonStyle}">
                            <Grid>
                                <StackPanel>
                                    <Grid Width="32" Height="32">
                                        <fa:FontAwesome Foreground="OrangeRed" Icon="Solid_Gift" />
                                    </Grid>

                                    <TextBlock
                                        Margin="0,4,0,0"
                                        FontSize="12"
                                        Text="我的礼物"
                                        TextAlignment="Center"
                                        Visibility="{x:Bind Path=m_liveRoomViewModel.ShowBag, Mode=OneWay, Converter={StaticResource DisplayConvert}}" />
                                    <TextBlock
                                        Margin="0,4,0,0"
                                        FontSize="12"
                                        Text="礼物列表"
                                        TextAlignment="Center"
                                        Visibility="{x:Bind Path=m_liveRoomViewModel.ShowBag, Mode=OneWay}" />
                                </StackPanel>

                            </Grid>
                        </Button>

                        <ScrollViewer
                            Grid.Column="1"
                            HorizontalScrollBarVisibility="Auto"
                            HorizontalScrollMode="Enabled"
                            VerticalScrollBarVisibility="Disabled"
                            VerticalScrollMode="Disabled"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.ShowBag, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                            <ItemsControl ItemsSource="{x:Bind Path=m_liveRoomViewModel.Gifts, Mode=OneWay}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <ItemsStackPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="live:LiveGiftItem">
                                        <Button Margin="4">
                                            <Grid>
                                                <StackPanel>
                                                    <Image
                                                        Width="32"
                                                        Height="32"
                                                        Source="{x:Bind Path=ImgBasic, Converter={StaticResource ImageSourceConvert}, ConverterParameter='48h.png'}" />

                                                    <TextBlock
                                                        Margin="0,4,0,0"
                                                        FontSize="12"
                                                        Text="{x:Bind Path=Name}"
                                                        TextAlignment="Center" />
                                                </StackPanel>

                                            </Grid>
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Image
                                                                Width="56"
                                                                Height="56"
                                                                Source="{x:Bind Gif}" />
                                                            <StackPanel Margin="8,0,0,0" VerticalAlignment="Center">
                                                                <StackPanel Orientation="Horizontal">
                                                                    <TextBlock MaxWidth="200" Text="{x:Bind Name}" />
                                                                    <Image
                                                                        Width="16"
                                                                        Margin="8,0,0,0"
                                                                        Source="ms-appx:///Assets/Icon/ic_live_center_gold_recharge.png"
                                                                        Visibility="{x:Bind Path=IsGold}" />
                                                                    <Image
                                                                        Width="16"
                                                                        Margin="8,0,0,0"
                                                                        Source="ms-appx:///Assets/Icon/ic_live_center_silver_recharge.png"
                                                                        Visibility="{x:Bind Path=IsGold, Converter={StaticResource DisplayConvert}}" />
                                                                    <TextBlock
                                                                        Margin="4,0,0,0"
                                                                        Foreground="Gray"
                                                                        Text="{x:Bind Price}" />
                                                                </StackPanel>

                                                                <TextBlock
                                                                    MaxWidth="200"
                                                                    Margin="0,4,0,0"
                                                                    FontSize="12"
                                                                    Foreground="Gray"
                                                                    Text="{x:Bind Desc}"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap" />
                                                                <TextBlock
                                                                    MaxWidth="200"
                                                                    Margin="0,4,0,0"
                                                                    FontSize="12"
                                                                    Foreground="Gray"
                                                                    Text="{x:Bind Rights}"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap" />
                                                            </StackPanel>

                                                        </StackPanel>
                                                        <StackPanel
                                                            Margin="0,8,0,0"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center"
                                                            Orientation="Horizontal">
                                                            <muxc:NumberBox
                                                                MinWidth="200"
                                                                Minimum="1"
                                                                SmallChange="1"
                                                                SpinButtonPlacementMode="Inline"
                                                                Value="{x:Bind Path=Num, Mode=TwoWay}" />
                                                            <Button
                                                                Margin="8,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Click="btnSendGift_Click">
                                                                赠送
                                                            </Button>
                                                        </StackPanel>
                                                    </StackPanel>

                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                        <ScrollViewer
                            Grid.Column="1"
                            HorizontalScrollBarVisibility="Auto"
                            HorizontalScrollMode="Enabled"
                            Visibility="{x:Bind Path=m_liveRoomViewModel.ShowBag, Mode=OneWay}">
                            <ItemsControl ItemsSource="{x:Bind Path=m_liveRoomViewModel.BagGifts, Mode=OneWay}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <ItemsStackPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="live:LiveGiftItem">
                                        <Button Margin="4" Background="Transparent">
                                            <Grid>
                                                <StackPanel>
                                                    <Image
                                                        Width="32"
                                                        Height="32"
                                                        Source="{x:Bind Path=ImgBasic, Converter={StaticResource ImageSourceConvert}, ConverterParameter='48h.png'}" />

                                                    <TextBlock
                                                        Margin="0,4,0,0"
                                                        FontSize="12"
                                                        TextAlignment="Center"><Run Text="{x:Bind Path=Name}" />
                                                        (<Run Text="{x:Bind Path=GiftNum, Mode=OneWay}" />
                                                        )</TextBlock>
                                                </StackPanel>

                                            </Grid>
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Image
                                                                Width="56"
                                                                Height="56"
                                                                Source="{x:Bind Gif}" />
                                                            <StackPanel Margin="8,0,0,0" VerticalAlignment="Center">
                                                                <StackPanel Orientation="Horizontal">
                                                                    <TextBlock MaxWidth="200" Text="{x:Bind Name}" />

                                                                    <TextBlock Margin="4,0,0,0" Foreground="Gray">
                                                                        拥有数量:<Run Text="{x:Bind GiftNum}" />
                                                                    </TextBlock>
                                                                </StackPanel>

                                                                <TextBlock
                                                                    MaxWidth="200"
                                                                    Margin="0,4,0,0"
                                                                    FontSize="12"
                                                                    Foreground="Gray"
                                                                    Text="{x:Bind Desc}"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap" />
                                                                <TextBlock
                                                                    MaxWidth="200"
                                                                    Margin="0,4,0,0"
                                                                    FontSize="12"
                                                                    Foreground="Gray"
                                                                    Text="{x:Bind Rights}"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap" />
                                                            </StackPanel>

                                                        </StackPanel>
                                                        <StackPanel
                                                            Margin="0,8,0,0"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Center"
                                                            Orientation="Horizontal">
                                                            <muxc:NumberBox
                                                                Maximum="{x:Bind Path=GiftNum}"
                                                                Minimum="1"
                                                                SmallChange="1"
                                                                SpinButtonPlacementMode="Inline"
                                                                Value="{x:Bind Path=Num, Mode=TwoWay}" />
                                                            <Button
                                                                Margin="8,4,0,0"
                                                                VerticalAlignment="Center"
                                                                Click="btnSendBagGift_Click">
                                                                赠送
                                                            </Button>
                                                        </StackPanel>
                                                    </StackPanel>

                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>

                    </Grid>
                </Grid>

            </Grid>
            <Grid Grid.Column="1" Background="Transparent">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid
                    Padding="8"
                    BorderBrush="#33808080"
                    BorderThickness="0,0,0,1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <HyperlinkButton
                        Margin="-4,0,0,0"
                        Padding="4"
                        Click="BtnOpenUser_Click"
                        CornerRadius="50">
                        <Ellipse Width="48" Height="48">
                            <Ellipse.Fill>
                                <ImageBrush ImageSource="{x:Bind Path=m_liveRoomViewModel.LiveInfo.AnchorInfo.BaseInfo.Face, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128h', Mode=OneWay}" Stretch="UniformToFill" />
                            </Ellipse.Fill>
                        </Ellipse>
                    </HyperlinkButton>
                    <StackPanel
                        Grid.Column="1"
                        Margin="8,0"
                        VerticalAlignment="Center">
                        <TextBlock Text="{x:Bind Path=m_liveRoomViewModel.LiveInfo.AnchorInfo.BaseInfo.Uname, Mode=OneWay}" />
                        <TextBlock
                            Margin="0,4,0,0"
                            FontSize="12"
                            Foreground="Gray"><Run Text="{x:Bind Path=m_liveRoomViewModel.ViewerNumCount, Mode=OneWay}" />
                            粉丝:<Run Text="{x:Bind Path=m_liveRoomViewModel.LiveInfo.AnchorInfo.RelationInfo.Attention, Converter={StaticResource NumberToStringConvert}, Mode=OneWay}" /></TextBlock>
                    </StackPanel>
                    <Button
                        x:Name="BtnAttention"
                        Grid.Column="2"
                        Click="BtnAttention_Click"
                        FontSize="12"
                        Style="{StaticResource AccentButtonStyle}"
                        Visibility="{x:Bind Path=m_liveRoomViewModel.Attention, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                        关注
                    </Button>
                    <Button
                        x:Name="BtnCacnelAttention"
                        Grid.Column="2"
                        Click="BtnCacnelAttention_Click"
                        FontSize="12"
                        Visibility="{x:Bind Path=m_liveRoomViewModel.Attention, Mode=OneWay}">
                        已关注
                    </Button>
                </Grid>
                <Pivot
                    x:Name="pivot"
                    Grid.Row="1"
                    SelectionChanged="pivot_SelectionChanged">
                    <PivotItem Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="16" Text="互动" />
                        </PivotItem.Header>
                        <Grid PointerEntered="ChatList_PointerEntered" PointerExited="ChatList_PointerExited">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <ScrollViewer
                                Padding="0,0,0,8"
                                VerticalAlignment="Top"
                                HorizontalScrollBarVisibility="Auto"
                                HorizontalScrollMode="Auto"
                                VerticalScrollBarVisibility="Disabled">
                                <ItemsControl ItemsSource="{x:Bind Path=m_liveRoomViewModel.SuperChats, Mode=OneWay}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <ItemsStackPanel Orientation="Horizontal" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="live1:SuperChatMsgViewModel">
                                            <Button
                                                Margin="8,0,0,0"
                                                Padding="4"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                CornerRadius="22">
                                                <Border
                                                    Height="36"
                                                    Background="{x:Bind Path=BackgroundColor, Mode=OneWay, Converter={StaticResource ColorConvert}}"
                                                    BorderThickness="0"
                                                    CornerRadius="18">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <muxc:ProgressBar
                                                            Grid.ColumnSpan="2"
                                                            MinHeight="50"
                                                            Background="Transparent"
                                                            Foreground="{x:Bind Path=BackgroundBottomColor, Mode=OneWay, Converter={StaticResource ColorConvert}}"
                                                            Maximum="{x:Bind Path=MaxTime, Mode=OneWay}"
                                                            Opacity="0.9"
                                                            Value="{x:Bind Path=Time, Mode=OneWay}" />

                                                        <Ellipse
                                                            Width="32"
                                                            Height="32"
                                                            Margin="2,0,0,0"
                                                            Stroke="Gray"
                                                            StrokeThickness="1">
                                                            <Ellipse.Fill>
                                                                <ImageBrush ImageSource="{x:Bind Path=Face, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128w'}" />
                                                            </Ellipse.Fill>
                                                        </Ellipse>

                                                        <TextBlock
                                                            Grid.Column="1"
                                                            Margin="8,0"
                                                            VerticalAlignment="Center"
                                                            Foreground="White">
                                                            ￥<Run Text="{x:Bind Path=Price}" /></TextBlock>
                                                    </Grid>
                                                </Border>
                                                <Button.Flyout>
                                                    <Flyout>
                                                        <StackPanel
                                                            Width="280"
                                                            Margin="-12"
                                                            CornerRadius="{StaticResource OverlayCornerRadius}">
                                                            <Grid Height="56" Background="{x:Bind Path=BackgroundColor, Mode=OneWay, Converter={StaticResource ColorConvert}}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <Image
                                                                    Grid.ColumnSpan="3"
                                                                    Margin="0,0,-36,0"
                                                                    HorizontalAlignment="Right"
                                                                    Source="{x:Bind Path=BackgroundImage}" />
                                                                <Grid Margin="12,4">
                                                                    <Ellipse
                                                                        Width="36"
                                                                        Height="36"
                                                                        Stroke="Gray"
                                                                        StrokeThickness="1">
                                                                        <Ellipse.Fill>
                                                                            <ImageBrush ImageSource="{x:Bind Path=Face, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128w'}" />
                                                                        </Ellipse.Fill>
                                                                    </Ellipse>
                                                                    <Image Source="{x:Bind Path=FaceFrame}" />
                                                                </Grid>

                                                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                                    <TextBlock
                                                                        Foreground="Black"
                                                                        IsTextSelectionEnabled="True"
                                                                        Text="{Binding Username}" />
                                                                    <TextBlock Foreground="Black" IsTextSelectionEnabled="True">
                                                                        ￥<Run Text="{x:Bind Path=Price}" />
                                                                        <Run
                                                                            FontSize="12"
                                                                            Foreground="Gray"
                                                                            Text="(" />
                                                                        <Run
                                                                            FontSize="12"
                                                                            Foreground="Gray"
                                                                            Text="{x:Bind Path=PriceGold, Converter={StaticResource NumberToStringConvert}}" /><Run
                                                                            FontSize="12"
                                                                            Foreground="Gray"
                                                                            Text="金瓜子)" />
                                                                    </TextBlock>
                                                                </StackPanel>
                                                            </Grid>
                                                            <Grid Padding="12" Background="{x:Bind Path=BackgroundBottomColor, Mode=OneWay, Converter={StaticResource ColorConvert}}">
                                                                <TextBlock
                                                                    FontSize="14"
                                                                    Foreground="white"
                                                                    IsTextSelectionEnabled="True"
                                                                    Text="{x:Bind Path=Message}"
                                                                    TextAlignment="Justify"
                                                                    TextWrapping="Wrap" />
                                                            </Grid>
                                                        </StackPanel>
                                                    </Flyout>
                                                </Button.Flyout>
                                            </Button>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>


                                </ItemsControl>
                            </ScrollViewer>

                            <ListView
                                x:Name="list_chat"
                                Grid.Row="1"
                                IsItemClickEnabled="False"
                                ItemTemplate="{StaticResource chat}"
                                ItemsSource="{x:Bind Path=m_liveRoomViewModel.Messages, Mode=OneWay}"
                                SelectionMode="None">
                                <ListView.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <ItemsStackPanel ItemsUpdatingScrollMode="KeepLastItemInView" />
                                    </ItemsPanelTemplate>
                                </ListView.ItemsPanel>
                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                        <Setter Property="MinHeight" Value="0" />
                                        <Setter Property="Margin" Value="0" />
                                        <Setter Property="Padding" Value="8,2" />
                                    </Style>
                                </ListView.ItemContainerStyle>
                            </ListView>


                            <ListView
                                Grid.Row="2"
                                IsItemClickEnabled="False"
                                ItemsSource="{x:Bind Path=m_liveRoomViewModel.GiftMessage, Mode=OneWay}"
                                SelectionMode="None"
                                Visibility="{x:Bind Path=m_liveRoomViewModel.ShowGiftMessage, Mode=OneWay}">
                                <ListView.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <ItemsStackPanel VerticalAlignment="Bottom" ItemsUpdatingScrollMode="KeepLastItemInView" />
                                    </ItemsPanelTemplate>
                                </ListView.ItemsPanel>
                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="live:GiftMsgModel">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                Foreground="{ThemeResource SystemAccentColor}"
                                                Text="{x:Bind Path=UserName}" />
                                            <TextBlock Margin="4,0" VerticalAlignment="Center">赠送</TextBlock>
                                            <TextBlock VerticalAlignment="Center" Text="{x:Bind Path=GiftName}" />
                                            <Image Width="24" Source="{x:Bind Path=Gif}" />
                                            <TextBlock Margin="4,0" VerticalAlignment="Center">
                                                x<Run Text="{x:Bind Number}" /></TextBlock>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListView.ItemTemplate>

                            </ListView>
                            <Grid
                                Grid.Row="3"
                                Padding="8"
                                Background="{ThemeResource NavigationViewTopPaneBackground}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <AutoSuggestBox
                                    x:Name="DanmuText"
                                    PlaceholderText="说点什么吧"
                                    QueryIcon="Send"
                                    QuerySubmitted="DanmuText_QuerySubmitted"
                                    Text="{x:Bind m_viewModel.DanmakuInput, Mode=TwoWay}" />
                                <Button
                                    Grid.Column="1"
                                    Width="32"
                                    Height="32"
                                    Margin="5,0,0,0"
                                    Padding="0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Click="EmojiButton_Click">
                                    <FontIcon
                                        FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets"
                                        FontSize="14"
                                        Glyph="&#xED54;" />
                                </Button>
                            </Grid>
                        </Grid>
                    </PivotItem>
                    <PivotItem Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="16" Text="主播" />
                        </PivotItem.Header>
                        <ScrollViewer Padding="8" VerticalScrollBarVisibility="Auto">
                            <StackPanel>
                                <Grid HorizontalAlignment="Center">
                                    <Ellipse Width="56" Height="56">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{x:Bind Path=m_liveRoomViewModel.Profile.Face, Mode=OneWay, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128h'}" Stretch="UniformToFill" />
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <Image
                                        Width="24"
                                        Height="24"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Source="{x:Bind Path=m_liveRoomViewModel.Profile.Verify, Mode=OneWay}" />
                                </Grid>

                                <TextBlock Text="{x:Bind Path=m_liveRoomViewModel.Profile.Uname, Mode=OneWay}" TextAlignment="Center" />
                                <TextBlock
                                    FontSize="12"
                                    Foreground="Gray"
                                    Text="{x:Bind Path=m_liveRoomViewModel.Profile.Desc, Mode=OneWay}"
                                    TextAlignment="Center" />

                                <TextBlock Margin="4">分区</TextBlock>
                                <TextBlock
                                    Margin="4"
                                    Foreground="Gray"
                                    Text="{x:Bind Path=m_liveRoomViewModel.Profile.AreaName, Mode=OneWay}" />
                                <TextBlock Margin="4,16">荣誉</TextBlock>
                                <GridView
                                    HorizontalAlignment="Center"
                                    IsItemClickEnabled="False"
                                    ItemsSource="{x:Bind Path=m_liveRoomViewModel.Profile.GloryInfo, Mode=OneWay}"
                                    ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                    ScrollViewer.VerticalScrollMode="Disabled"
                                    SelectionMode="None">
                                    <GridView.ItemTemplate>
                                        <DataTemplate x:DataType="live:LiveAnchorProfileGloryInfo">
                                            <HyperlinkButton
                                                Margin="0"
                                                Padding="10"
                                                NavigateUri="{x:Bind JumpUrl}">
                                                <StackPanel>
                                                    <Image
                                                        Width="56"
                                                        Height="56"
                                                        HorizontalAlignment="Center"
                                                        Source="{x:Bind PicUrl}" />
                                                    <TextBlock
                                                        HorizontalAlignment="Center"
                                                        FontSize="12"
                                                        Text="{x:Bind Name}"
                                                        TextTrimming="CharacterEllipsis" />
                                                    <TextBlock
                                                        HorizontalAlignment="Center"
                                                        FontSize="10"
                                                        Foreground="Gray"
                                                        Text="{x:Bind ActivityName}"
                                                        TextTrimming="CharacterEllipsis" />
                                                    <TextBlock
                                                        HorizontalAlignment="Center"
                                                        FontSize="10"
                                                        Foreground="Gray"
                                                        Text="{x:Bind ActivityDate}"
                                                        TextTrimming="CharacterEllipsis" />
                                                </StackPanel>
                                            </HyperlinkButton>
                                        </DataTemplate>
                                    </GridView.ItemTemplate>
                                </GridView>
                            </StackPanel>
                        </ScrollViewer>
                    </PivotItem>
                    <PivotItem Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="16" Text="榜单" />
                        </PivotItem.Header>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <ComboBox
                                x:Name="cb_Rank"
                                Margin="8,4"
                                HorizontalAlignment="Stretch"
                                DisplayMemberPath="Title"
                                ItemsSource="{x:Bind Path=m_liveRoomViewModel.Ranks, Mode=OneWay}"
                                SelectedItem="{x:Bind Path=m_liveRoomViewModel.SelectRank, Mode=TwoWay}"
                                SelectionChanged="cb_Rank_SelectionChanged" />
                            <Grid Grid.Row="1">
                                <ScrollViewer Padding="8,0" VerticalScrollBarVisibility="Auto">
                                    <StackPanel>
                                        <ListView
                                            Margin="0,8"
                                            IsItemClickEnabled="True"
                                            ItemClick="ListView_ItemClick"
                                            ItemsSource="{x:Bind Path=m_liveRoomViewModel.SelectRank.Items, Mode=OneWay}"
                                            SelectionMode="None">
                                            <ListView.ItemTemplate>
                                                <DataTemplate x:DataType="live:LiveRoomRankItemModel">
                                                    <Grid>
                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock
                                                                Width="20"
                                                                VerticalAlignment="Center"
                                                                FontWeight="Bold"
                                                                Text="{x:Bind Rank}"
                                                                TextAlignment="Center" />
                                                            <Border
                                                                Margin="8,0,0,0"
                                                                VerticalAlignment="Center"
                                                                BorderBrush="{x:Bind Path=Color, Converter={StaticResource ColorConvert}}"
                                                                BorderThickness="1"
                                                                CornerRadius="{StaticResource ControlCornerRadius}"
                                                                Visibility="{x:Bind ShowMedal}">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition />
                                                                        <ColumnDefinition />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Padding="2,0" Background="{x:Bind Path=Color, Converter={StaticResource ColorConvert}}">
                                                                        <TextBlock
                                                                            FontSize="12"
                                                                            Foreground="White"
                                                                            Text="{x:Bind MedalName}" />
                                                                    </Grid>
                                                                    <Grid
                                                                        Grid.Column="1"
                                                                        Padding="4,0"
                                                                        Background="White">
                                                                        <TextBlock
                                                                            FontSize="12"
                                                                            Foreground="{x:Bind Path=Color, Converter={StaticResource ColorConvert}}"
                                                                            Text="{x:Bind Level}" />
                                                                    </Grid>
                                                                </Grid>
                                                            </Border>
                                                            <Ellipse
                                                                Width="30"
                                                                Height="30"
                                                                Margin="8,0,0,0">
                                                                <Ellipse.Fill>
                                                                    <ImageBrush ImageSource="{x:Bind Path=Face, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128h'}" />
                                                                </Ellipse.Fill>
                                                            </Ellipse>
                                                            <TextBlock
                                                                Margin="4,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="{x:Bind Uname}" />
                                                        </StackPanel>
                                                        <StackPanel
                                                            HorizontalAlignment="Right"
                                                            Orientation="Horizontal"
                                                            Visibility="{x:Bind Path=ShowRight}">
                                                            <Image Height="16" Source="{x:Bind Path=Icon}" />
                                                            <TextBlock
                                                                Margin="4,0,0,0"
                                                                VerticalAlignment="Center"
                                                                Text="{x:Bind Score}" />
                                                        </StackPanel>
                                                    </Grid>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                        <HyperlinkButton
                                            HorizontalAlignment="Center"
                                            Command="{x:Bind Path=m_liveRoomViewModel.SelectRank.LoadMoreCommand, Mode=OneWay}"
                                            Foreground="Gray"
                                            Visibility="{x:Bind Path=m_liveRoomViewModel.SelectRank.CanLoadMore, Mode=OneWay}">
                                            <TextBlock>加载更多</TextBlock>
                                        </HyperlinkButton>
                                        <muxc:ProgressRing
                                            HorizontalAlignment="Center"
                                            IsActive="True"
                                            Visibility="{x:Bind Path=m_liveRoomViewModel.SelectRank.Loading, Mode=OneWay}" />
                                    </StackPanel>
                                </ScrollViewer>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Gray"
                                    Visibility="{x:Bind Path=m_liveRoomViewModel.SelectRank.Items.Count, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=0}">
                                    好像还没有榜单啊
                                </TextBlock>
                            </Grid>
                        </Grid>
                    </PivotItem>
                    <PivotItem x:Name="pivot_Guard" Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="16" Text="大航海 ">
                                <Run FontSize="13" Text="{x:Bind Path=m_liveRoomViewModel.GuardNum, Mode=OneWay}" /></TextBlock>
                        </PivotItem.Header>
                        <Grid>
                            <ScrollViewer Padding="8,0" VerticalScrollBarVisibility="Auto">
                                <StackPanel>
                                    <ListView
                                        x:Name="list_Guard"
                                        Margin="0,8"
                                        IsItemClickEnabled="True"
                                        ItemClick="list_Guard_ItemClick"
                                        ItemsSource="{x:Bind Path=m_liveRoomViewModel.Guards, Mode=OneWay}"
                                        SelectionMode="None">
                                        <ListView.ItemTemplate>
                                            <DataTemplate x:DataType="live:LiveGuardRankItem">
                                                <StackPanel Orientation="Horizontal">
                                                    <Image
                                                        Width="24"
                                                        Height="24"
                                                        Margin="4,0">
                                                        <Image.Source>
                                                            <BitmapImage
                                                                DecodePixelHeight="24"
                                                                DecodePixelWidth="24"
                                                                UriSource="{x:Bind RankImg}" />
                                                        </Image.Source>
                                                    </Image>
                                                    <Ellipse
                                                        Width="30"
                                                        Height="30"
                                                        Margin="4,0">
                                                        <Ellipse.Fill>
                                                            <ImageBrush ImageSource="{x:Bind Face, Converter={StaticResource ImageSourceConvert}, ConverterParameter='128h', Mode=OneWay}" Stretch="UniformToFill" />
                                                        </Ellipse.Fill>
                                                    </Ellipse>
                                                    <TextBlock
                                                        Margin="4,0"
                                                        VerticalAlignment="Center"
                                                        Text="{x:Bind Username}" />
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>
                                    </ListView>
                                    <HyperlinkButton
                                        HorizontalAlignment="Center"
                                        Command="{x:Bind Path=m_liveRoomViewModel.LoadMoreGuardCommand}"
                                        Foreground="Gray"
                                        Visibility="{x:Bind Path=m_liveRoomViewModel.LoadingGuard, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                        <TextBlock>加载更多</TextBlock>
                                    </HyperlinkButton>
                                    <muxc:ProgressRing
                                        HorizontalAlignment="Center"
                                        IsActive="True"
                                        Visibility="{x:Bind Path=m_liveRoomViewModel.LoadingGuard, Mode=OneWay}" />
                                </StackPanel>
                            </ScrollViewer>
                            <TextBlock
                                x:Name="noGuardRank"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=m_liveRoomViewModel.Guards.Count, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=0}">
                                好像没有人上船啊
                            </TextBlock>
                        </Grid>

                    </PivotItem>
                </Pivot>
            </Grid>
            <toolkit:GridSplitter
                x:Name="RightInfoGridSplitter"
                Grid.Column="1"
                Width="16"
                HorizontalAlignment="Left"
                CursorBehavior="ChangeOnSplitterHover"
                GripperCursor="Default"
                IsEnabled="True"
                ResizeBehavior="BasedOnAlignment"
                ResizeDirection="Auto">
                <toolkit:GridSplitter.Background>
                    <SolidColorBrush Opacity="0" />
                </toolkit:GridSplitter.Background>
                <toolkit:GridSplitter.GripperForeground>
                    <SolidColorBrush Opacity="0" />
                </toolkit:GridSplitter.GripperForeground>
                <toolkit:GridSplitter.RenderTransform>
                    <TranslateTransform X="-8" />
                </toolkit:GridSplitter.RenderTransform>
            </toolkit:GridSplitter>
        </Grid>
        <muxc:ProgressRing
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            IsActive="True"
            Visibility="{x:Bind Path=m_liveRoomViewModel.Loading, Mode=OneWay}" />
    </Grid>
</local:BasePage>
