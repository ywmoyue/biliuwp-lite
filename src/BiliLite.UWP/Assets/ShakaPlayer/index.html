<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="./favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
    <script type="module" crossorigin>var e3=Object.defineProperty;var t3=(l,d,m)=>d in l?e3(l,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[d]=m;var lE=(l,d,m)=>t3(l,typeof d!="symbol"?d+"":d,m);(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))w(S);new MutationObserver(S=>{for(const C of S)if(C.type==="childList")for(const R of C.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&w(R)}).observe(document,{childList:!0,subtree:!0});function m(S){const C={};return S.integrity&&(C.integrity=S.integrity),S.referrerPolicy&&(C.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?C.credentials="include":S.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function w(S){if(S.ep)return;S.ep=!0;const C=m(S);fetch(S.href,C)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ry(l){const d=Object.create(null);for(const m of l.split(","))d[m]=1;return m=>m in d}const Yt={},bu=[],Ai=()=>{},n3=()=>!1,_d=l=>l.charCodeAt(0)===111&&l.charCodeAt(1)===110&&(l.charCodeAt(2)>122||l.charCodeAt(2)<97),iy=l=>l.startsWith("onUpdate:"),Yn=Object.assign,oy=(l,d)=>{const m=l.indexOf(d);m>-1&&l.splice(m,1)},r3=Object.prototype.hasOwnProperty,Ft=(l,d)=>r3.call(l,d),ct=Array.isArray,Tl=l=>Nd(l)==="[object Map]",i3=l=>Nd(l)==="[object Set]",dt=l=>typeof l=="function",kn=l=>typeof l=="string",Gu=l=>typeof l=="symbol",dn=l=>l!==null&&typeof l=="object",nA=l=>(dn(l)||dt(l))&&dt(l.then)&&dt(l.catch),o3=Object.prototype.toString,Nd=l=>o3.call(l),s3=l=>Nd(l).slice(8,-1),u3=l=>Nd(l)==="[object Object]",sy=l=>kn(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,wl=ry(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jd=l=>{const d=Object.create(null);return m=>d[m]||(d[m]=l(m))},a3=/-(\w)/g,bo=jd(l=>l.replace(a3,(d,m)=>m?m.toUpperCase():"")),l3=/\B([A-Z])/g,Ms=jd(l=>l.replace(l3,"-$1").toLowerCase()),rA=jd(l=>l.charAt(0).toUpperCase()+l.slice(1)),km=jd(l=>l?`on${rA(l)}`:""),Oo=(l,d)=>!Object.is(l,d),Dm=(l,...d)=>{for(let m=0;m<l.length;m++)l[m](...d)},iA=(l,d,m,w=!1)=>{Object.defineProperty(l,d,{configurable:!0,enumerable:!1,writable:w,value:m})},c3=l=>{const d=parseFloat(l);return isNaN(d)?l:d};let cE;const Od=()=>cE||(cE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function uy(l){if(ct(l)){const d={};for(let m=0;m<l.length;m++){const w=l[m],S=kn(w)?p3(w):uy(w);if(S)for(const C in S)d[C]=S[C]}return d}else if(kn(l)||dn(l))return l}const f3=/;(?![^(]*\))/g,d3=/:([^]+)/,h3=/\/\*[^]*?\*\//g;function p3(l){const d={};return l.replace(h3,"").split(f3).forEach(m=>{if(m){const w=m.split(d3);w.length>1&&(d[w[0].trim()]=w[1].trim())}}),d}function ay(l){let d="";if(kn(l))d=l;else if(ct(l))for(let m=0;m<l.length;m++){const w=ay(l[m]);w&&(d+=w+" ")}else if(dn(l))for(const m in l)l[m]&&(d+=m+" ");return d.trim()}const g3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",m3=ry(g3);function oA(l){return!!l||l===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let br;class y3{constructor(d=!1){this.detached=d,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=br,!d&&br&&(this.index=(br.scopes||(br.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let d,m;if(this.scopes)for(d=0,m=this.scopes.length;d<m;d++)this.scopes[d].pause();for(d=0,m=this.effects.length;d<m;d++)this.effects[d].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let d,m;if(this.scopes)for(d=0,m=this.scopes.length;d<m;d++)this.scopes[d].resume();for(d=0,m=this.effects.length;d<m;d++)this.effects[d].resume()}}run(d){if(this._active){const m=br;try{return br=this,d()}finally{br=m}}}on(){br=this}off(){br=this.parent}stop(d){if(this._active){this._active=!1;let m,w;for(m=0,w=this.effects.length;m<w;m++)this.effects[m].stop();for(this.effects.length=0,m=0,w=this.cleanups.length;m<w;m++)this.cleanups[m]();if(this.cleanups.length=0,this.scopes){for(m=0,w=this.scopes.length;m<w;m++)this.scopes[m].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!d){const S=this.parent.scopes.pop();S&&S!==this&&(this.parent.scopes[this.index]=S,S.index=this.index)}this.parent=void 0}}}function v3(){return br}let qt;const Rm=new WeakSet;class sA{constructor(d){this.fn=d,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,br&&br.active&&br.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rm.has(this)&&(Rm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||aA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fE(this),lA(this);const d=qt,m=ui;qt=this,ui=!0;try{return this.fn()}finally{cA(this),qt=d,ui=m,this.flags&=-3}}stop(){if(this.flags&1){for(let d=this.deps;d;d=d.nextDep)fy(d);this.deps=this.depsTail=void 0,fE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hm(this)&&this.run()}get dirty(){return Hm(this)}}let uA=0,xl,El;function aA(l,d=!1){if(l.flags|=8,d){l.next=El,El=l;return}l.next=xl,xl=l}function ly(){uA++}function cy(){if(--uA>0)return;if(El){let d=El;for(El=void 0;d;){const m=d.next;d.next=void 0,d.flags&=-9,d=m}}let l;for(;xl;){let d=xl;for(xl=void 0;d;){const m=d.next;if(d.next=void 0,d.flags&=-9,d.flags&1)try{d.trigger()}catch(w){l||(l=w)}d=m}}if(l)throw l}function lA(l){for(let d=l.deps;d;d=d.nextDep)d.version=-1,d.prevActiveLink=d.dep.activeLink,d.dep.activeLink=d}function cA(l){let d,m=l.depsTail,w=m;for(;w;){const S=w.prevDep;w.version===-1?(w===m&&(m=S),fy(w),S3(w)):d=w,w.dep.activeLink=w.prevActiveLink,w.prevActiveLink=void 0,w=S}l.deps=d,l.depsTail=m}function Hm(l){for(let d=l.deps;d;d=d.nextDep)if(d.dep.version!==d.version||d.dep.computed&&(fA(d.dep.computed)||d.dep.version!==d.version))return!0;return!!l._dirty}function fA(l){if(l.flags&4&&!(l.flags&16)||(l.flags&=-17,l.globalVersion===Rl))return;l.globalVersion=Rl;const d=l.dep;if(l.flags|=2,d.version>0&&!l.isSSR&&l.deps&&!Hm(l)){l.flags&=-3;return}const m=qt,w=ui;qt=l,ui=!0;try{lA(l);const S=l.fn(l._value);(d.version===0||Oo(S,l._value))&&(l._value=S,d.version++)}catch(S){throw d.version++,S}finally{qt=m,ui=w,cA(l),l.flags&=-3}}function fy(l,d=!1){const{dep:m,prevSub:w,nextSub:S}=l;if(w&&(w.nextSub=S,l.prevSub=void 0),S&&(S.prevSub=w,l.nextSub=void 0),m.subs===l&&(m.subs=w,!w&&m.computed)){m.computed.flags&=-5;for(let C=m.computed.deps;C;C=C.nextDep)fy(C,!0)}!d&&!--m.sc&&m.map&&m.map.delete(m.key)}function S3(l){const{prevDep:d,nextDep:m}=l;d&&(d.nextDep=m,l.prevDep=void 0),m&&(m.prevDep=d,l.nextDep=void 0)}let ui=!0;const dA=[];function Uo(){dA.push(ui),ui=!1}function Fo(){const l=dA.pop();ui=l===void 0?!0:l}function fE(l){const{cleanup:d}=l;if(l.cleanup=void 0,d){const m=qt;qt=void 0;try{d()}finally{qt=m}}}let Rl=0;class T3{constructor(d,m){this.sub=d,this.dep=m,this.version=m.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class dy{constructor(d){this.computed=d,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(d){if(!qt||!ui||qt===this.computed)return;let m=this.activeLink;if(m===void 0||m.sub!==qt)m=this.activeLink=new T3(qt,this),qt.deps?(m.prevDep=qt.depsTail,qt.depsTail.nextDep=m,qt.depsTail=m):qt.deps=qt.depsTail=m,hA(m);else if(m.version===-1&&(m.version=this.version,m.nextDep)){const w=m.nextDep;w.prevDep=m.prevDep,m.prevDep&&(m.prevDep.nextDep=w),m.prevDep=qt.depsTail,m.nextDep=void 0,qt.depsTail.nextDep=m,qt.depsTail=m,qt.deps===m&&(qt.deps=w)}return m}trigger(d){this.version++,Rl++,this.notify(d)}notify(d){ly();try{for(let m=this.subs;m;m=m.prevSub)m.sub.notify()&&m.sub.dep.notify()}finally{cy()}}}function hA(l){if(l.dep.sc++,l.sub.flags&4){const d=l.dep.computed;if(d&&!l.dep.subs){d.flags|=20;for(let w=d.deps;w;w=w.nextDep)hA(w)}const m=l.dep.subs;m!==l&&(l.prevSub=m,m&&(m.nextSub=l)),l.dep.subs=l}}const Gm=new WeakMap,Es=Symbol(""),Km=Symbol(""),Pl=Symbol("");function zn(l,d,m){if(ui&&qt){let w=Gm.get(l);w||Gm.set(l,w=new Map);let S=w.get(m);S||(w.set(m,S=new dy),S.map=w,S.key=m),S.track()}}function ro(l,d,m,w,S,C){const R=Gm.get(l);if(!R){Rl++;return}const p=N=>{N&&N.trigger()};if(ly(),d==="clear")R.forEach(p);else{const N=ct(l),z=N&&sy(m);if(N&&m==="length"){const H=Number(w);R.forEach((G,$)=>{($==="length"||$===Pl||!Gu($)&&$>=H)&&p(G)})}else switch((m!==void 0||R.has(void 0))&&p(R.get(m)),z&&p(R.get(Pl)),d){case"add":N?z&&p(R.get("length")):(p(R.get(Es)),Tl(l)&&p(R.get(Km)));break;case"delete":N||(p(R.get(Es)),Tl(l)&&p(R.get(Km)));break;case"set":Tl(l)&&p(R.get(Es));break}}cy()}function Nu(l){const d=Ut(l);return d===l?d:(zn(d,"iterate",Pl),ai(l)?d:d.map(ur))}function hy(l){return zn(l=Ut(l),"iterate",Pl),l}const w3={__proto__:null,[Symbol.iterator](){return Pm(this,Symbol.iterator,ur)},concat(...l){return Nu(this).concat(...l.map(d=>ct(d)?Nu(d):d))},entries(){return Pm(this,"entries",l=>(l[1]=ur(l[1]),l))},every(l,d){return eo(this,"every",l,d,void 0,arguments)},filter(l,d){return eo(this,"filter",l,d,m=>m.map(ur),arguments)},find(l,d){return eo(this,"find",l,d,ur,arguments)},findIndex(l,d){return eo(this,"findIndex",l,d,void 0,arguments)},findLast(l,d){return eo(this,"findLast",l,d,ur,arguments)},findLastIndex(l,d){return eo(this,"findLastIndex",l,d,void 0,arguments)},forEach(l,d){return eo(this,"forEach",l,d,void 0,arguments)},includes(...l){return Lm(this,"includes",l)},indexOf(...l){return Lm(this,"indexOf",l)},join(l){return Nu(this).join(l)},lastIndexOf(...l){return Lm(this,"lastIndexOf",l)},map(l,d){return eo(this,"map",l,d,void 0,arguments)},pop(){return gl(this,"pop")},push(...l){return gl(this,"push",l)},reduce(l,...d){return dE(this,"reduce",l,d)},reduceRight(l,...d){return dE(this,"reduceRight",l,d)},shift(){return gl(this,"shift")},some(l,d){return eo(this,"some",l,d,void 0,arguments)},splice(...l){return gl(this,"splice",l)},toReversed(){return Nu(this).toReversed()},toSorted(l){return Nu(this).toSorted(l)},toSpliced(...l){return Nu(this).toSpliced(...l)},unshift(...l){return gl(this,"unshift",l)},values(){return Pm(this,"values",ur)}};function Pm(l,d,m){const w=hy(l),S=w[d]();return w!==l&&!ai(l)&&(S._next=S.next,S.next=()=>{const C=S._next();return C.value&&(C.value=m(C.value)),C}),S}const x3=Array.prototype;function eo(l,d,m,w,S,C){const R=hy(l),p=R!==l&&!ai(l),N=R[d];if(N!==x3[d]){const G=N.apply(l,C);return p?ur(G):G}let z=m;R!==l&&(p?z=function(G,$){return m.call(this,ur(G),$,l)}:m.length>2&&(z=function(G,$){return m.call(this,G,$,l)}));const H=N.call(R,z,w);return p&&S?S(H):H}function dE(l,d,m,w){const S=hy(l);let C=m;return S!==l&&(ai(l)?m.length>3&&(C=function(R,p,N){return m.call(this,R,p,N,l)}):C=function(R,p,N){return m.call(this,R,ur(p),N,l)}),S[d](C,...w)}function Lm(l,d,m){const w=Ut(l);zn(w,"iterate",Pl);const S=w[d](...m);return(S===-1||S===!1)&&my(m[0])?(m[0]=Ut(m[0]),w[d](...m)):S}function gl(l,d,m=[]){Uo(),ly();const w=Ut(l)[d].apply(l,m);return cy(),Fo(),w}const E3=ry("__proto__,__v_isRef,__isVue"),pA=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(Gu));function A3(l){Gu(l)||(l=String(l));const d=Ut(this);return zn(d,"has",l),d.hasOwnProperty(l)}class gA{constructor(d=!1,m=!1){this._isReadonly=d,this._isShallow=m}get(d,m,w){if(m==="__v_skip")return d.__v_skip;const S=this._isReadonly,C=this._isShallow;if(m==="__v_isReactive")return!S;if(m==="__v_isReadonly")return S;if(m==="__v_isShallow")return C;if(m==="__v_raw")return w===(S?C?N3:SA:C?vA:yA).get(d)||Object.getPrototypeOf(d)===Object.getPrototypeOf(w)?d:void 0;const R=ct(d);if(!S){let N;if(R&&(N=w3[m]))return N;if(m==="hasOwnProperty")return A3}const p=Reflect.get(d,m,qn(d)?d:w);return(Gu(m)?pA.has(m):E3(m))||(S||zn(d,"get",m),C)?p:qn(p)?R&&sy(m)?p:p.value:dn(p)?S?wA(p):bd(p):p}}class mA extends gA{constructor(d=!1){super(!1,d)}set(d,m,w,S){let C=d[m];if(!this._isShallow){const N=Is(C);if(!ai(w)&&!Is(w)&&(C=Ut(C),w=Ut(w)),!ct(d)&&qn(C)&&!qn(w))return N?!1:(C.value=w,!0)}const R=ct(d)&&sy(m)?Number(m)<d.length:Ft(d,m),p=Reflect.set(d,m,w,qn(d)?d:S);return d===Ut(S)&&(R?Oo(w,C)&&ro(d,"set",m,w):ro(d,"add",m,w)),p}deleteProperty(d,m){const w=Ft(d,m);d[m];const S=Reflect.deleteProperty(d,m);return S&&w&&ro(d,"delete",m,void 0),S}has(d,m){const w=Reflect.has(d,m);return(!Gu(m)||!pA.has(m))&&zn(d,"has",m),w}ownKeys(d){return zn(d,"iterate",ct(d)?"length":Es),Reflect.ownKeys(d)}}class I3 extends gA{constructor(d=!1){super(!0,d)}set(d,m){return!0}deleteProperty(d,m){return!0}}const M3=new mA,C3=new I3,k3=new mA(!0);const Wm=l=>l,yd=l=>Reflect.getPrototypeOf(l);function D3(l,d,m){return function(...w){const S=this.__v_raw,C=Ut(S),R=Tl(C),p=l==="entries"||l===Symbol.iterator&&R,N=l==="keys"&&R,z=S[l](...w),H=m?Wm:d?Xm:ur;return!d&&zn(C,"iterate",N?Km:Es),{next(){const{value:G,done:$}=z.next();return $?{value:G,done:$}:{value:p?[H(G[0]),H(G[1])]:H(G),done:$}},[Symbol.iterator](){return this}}}}function vd(l){return function(...d){return l==="delete"?!1:l==="clear"?void 0:this}}function R3(l,d){const m={get(S){const C=this.__v_raw,R=Ut(C),p=Ut(S);l||(Oo(S,p)&&zn(R,"get",S),zn(R,"get",p));const{has:N}=yd(R),z=d?Wm:l?Xm:ur;if(N.call(R,S))return z(C.get(S));if(N.call(R,p))return z(C.get(p));C!==R&&C.get(S)},get size(){const S=this.__v_raw;return!l&&zn(Ut(S),"iterate",Es),Reflect.get(S,"size",S)},has(S){const C=this.__v_raw,R=Ut(C),p=Ut(S);return l||(Oo(S,p)&&zn(R,"has",S),zn(R,"has",p)),S===p?C.has(S):C.has(S)||C.has(p)},forEach(S,C){const R=this,p=R.__v_raw,N=Ut(p),z=d?Wm:l?Xm:ur;return!l&&zn(N,"iterate",Es),p.forEach((H,G)=>S.call(C,z(H),z(G),R))}};return Yn(m,l?{add:vd("add"),set:vd("set"),delete:vd("delete"),clear:vd("clear")}:{add(S){!d&&!ai(S)&&!Is(S)&&(S=Ut(S));const C=Ut(this);return yd(C).has.call(C,S)||(C.add(S),ro(C,"add",S,S)),this},set(S,C){!d&&!ai(C)&&!Is(C)&&(C=Ut(C));const R=Ut(this),{has:p,get:N}=yd(R);let z=p.call(R,S);z||(S=Ut(S),z=p.call(R,S));const H=N.call(R,S);return R.set(S,C),z?Oo(C,H)&&ro(R,"set",S,C):ro(R,"add",S,C),this},delete(S){const C=Ut(this),{has:R,get:p}=yd(C);let N=R.call(C,S);N||(S=Ut(S),N=R.call(C,S)),p&&p.call(C,S);const z=C.delete(S);return N&&ro(C,"delete",S,void 0),z},clear(){const S=Ut(this),C=S.size!==0,R=S.clear();return C&&ro(S,"clear",void 0,void 0),R}}),["keys","values","entries",Symbol.iterator].forEach(S=>{m[S]=D3(S,l,d)}),m}function py(l,d){const m=R3(l,d);return(w,S,C)=>S==="__v_isReactive"?!l:S==="__v_isReadonly"?l:S==="__v_raw"?w:Reflect.get(Ft(m,S)&&S in w?m:w,S,C)}const P3={get:py(!1,!1)},L3={get:py(!1,!0)},_3={get:py(!0,!1)};const yA=new WeakMap,vA=new WeakMap,SA=new WeakMap,N3=new WeakMap;function j3(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function O3(l){return l.__v_skip||!Object.isExtensible(l)?0:j3(s3(l))}function bd(l){return Is(l)?l:gy(l,!1,M3,P3,yA)}function TA(l){return gy(l,!1,k3,L3,vA)}function wA(l){return gy(l,!0,C3,_3,SA)}function gy(l,d,m,w,S){if(!dn(l)||l.__v_raw&&!(d&&l.__v_isReactive))return l;const C=S.get(l);if(C)return C;const R=O3(l);if(R===0)return l;const p=new Proxy(l,R===2?w:m);return S.set(l,p),p}function Al(l){return Is(l)?Al(l.__v_raw):!!(l&&l.__v_isReactive)}function Is(l){return!!(l&&l.__v_isReadonly)}function ai(l){return!!(l&&l.__v_isShallow)}function my(l){return l?!!l.__v_raw:!1}function Ut(l){const d=l&&l.__v_raw;return d?Ut(d):l}function b3(l){return!Ft(l,"__v_skip")&&Object.isExtensible(l)&&iA(l,"__v_skip",!0),l}const ur=l=>dn(l)?bd(l):l,Xm=l=>dn(l)?wA(l):l;function qn(l){return l?l.__v_isRef===!0:!1}function zm(l){return xA(l,!1)}function U3(l){return xA(l,!0)}function xA(l,d){return qn(l)?l:new F3(l,d)}class F3{constructor(d,m){this.dep=new dy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=m?d:Ut(d),this._value=m?d:ur(d),this.__v_isShallow=m}get value(){return this.dep.track(),this._value}set value(d){const m=this._rawValue,w=this.__v_isShallow||ai(d)||Is(d);d=w?d:Ut(d),Oo(d,m)&&(this._rawValue=d,this._value=w?d:ur(d),this.dep.trigger())}}function As(l){return qn(l)?l.value:l}const B3={get:(l,d,m)=>d==="__v_raw"?l:As(Reflect.get(l,d,m)),set:(l,d,m,w)=>{const S=l[d];return qn(S)&&!qn(m)?(S.value=m,!0):Reflect.set(l,d,m,w)}};function EA(l){return Al(l)?l:new Proxy(l,B3)}class V3{constructor(d,m,w){this.fn=d,this.setter=m,this._value=void 0,this.dep=new dy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Rl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!m,this.isSSR=w}notify(){if(this.flags|=16,!(this.flags&8)&&qt!==this)return aA(this,!0),!0}get value(){const d=this.dep.track();return fA(this),d&&(d.version=this.dep.version),this._value}set value(d){this.setter&&this.setter(d)}}function H3(l,d,m=!1){let w,S;return dt(l)?w=l:(w=l.get,S=l.set),new V3(w,S,m)}const Sd={},Id=new WeakMap;let xs;function G3(l,d=!1,m=xs){if(m){let w=Id.get(m);w||Id.set(m,w=[]),w.push(l)}}function K3(l,d,m=Yt){const{immediate:w,deep:S,once:C,scheduler:R,augmentJob:p,call:N}=m,z=Be=>S?Be:ai(Be)||S===!1||S===0?jo(Be,1):jo(Be);let H,G,$,te,v=!1,J=!1;if(qn(l)?(G=()=>l.value,v=ai(l)):Al(l)?(G=()=>z(l),v=!0):ct(l)?(J=!0,v=l.some(Be=>Al(Be)||ai(Be)),G=()=>l.map(Be=>{if(qn(Be))return Be.value;if(Al(Be))return z(Be);if(dt(Be))return N?N(Be,2):Be()})):dt(l)?d?G=N?()=>N(l,2):l:G=()=>{if($){Uo();try{$()}finally{Fo()}}const Be=xs;xs=H;try{return N?N(l,3,[te]):l(te)}finally{xs=Be}}:G=Ai,d&&S){const Be=G,Nt=S===!0?1/0:S;G=()=>jo(Be(),Nt)}const nt=v3(),je=()=>{H.stop(),nt&&nt.active&&oy(nt.effects,H)};if(C&&d){const Be=d;d=(...Nt)=>{Be(...Nt),je()}}let Ue=J?new Array(l.length).fill(Sd):Sd;const Qe=Be=>{if(!(!(H.flags&1)||!H.dirty&&!Be))if(d){const Nt=H.run();if(S||v||(J?Nt.some((St,Gt)=>Oo(St,Ue[Gt])):Oo(Nt,Ue))){$&&$();const St=xs;xs=H;try{const Gt=[Nt,Ue===Sd?void 0:J&&Ue[0]===Sd?[]:Ue,te];N?N(d,3,Gt):d(...Gt),Ue=Nt}finally{xs=St}}}else H.run()};return p&&p(Qe),H=new sA(G),H.scheduler=R?()=>R(Qe,!1):Qe,te=Be=>G3(Be,!1,H),$=H.onStop=()=>{const Be=Id.get(H);if(Be){if(N)N(Be,4);else for(const Nt of Be)Nt();Id.delete(H)}},d?w?Qe(!0):Ue=H.run():R?R(Qe.bind(null,!0),!0):H.run(),je.pause=H.pause.bind(H),je.resume=H.resume.bind(H),je.stop=je,je}function jo(l,d=1/0,m){if(d<=0||!dn(l)||l.__v_skip||(m=m||new Set,m.has(l)))return l;if(m.add(l),d--,qn(l))jo(l.value,d,m);else if(ct(l))for(let w=0;w<l.length;w++)jo(l[w],d,m);else if(i3(l)||Tl(l))l.forEach(w=>{jo(w,d,m)});else if(u3(l)){for(const w in l)jo(l[w],d,m);for(const w of Object.getOwnPropertySymbols(l))Object.prototype.propertyIsEnumerable.call(l,w)&&jo(l[w],d,m)}return l}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ul(l,d,m,w){try{return w?l(...w):l()}catch(S){Ud(S,d,m)}}function Ii(l,d,m,w){if(dt(l)){const S=Ul(l,d,m,w);return S&&nA(S)&&S.catch(C=>{Ud(C,d,m)}),S}if(ct(l)){const S=[];for(let C=0;C<l.length;C++)S.push(Ii(l[C],d,m,w));return S}}function Ud(l,d,m,w=!0){const S=d?d.vnode:null,{errorHandler:C,throwUnhandledErrorInProduction:R}=d&&d.appContext.config||Yt;if(d){let p=d.parent;const N=d.proxy,z=`https://vuejs.org/error-reference/#runtime-${m}`;for(;p;){const H=p.ec;if(H){for(let G=0;G<H.length;G++)if(H[G](l,N,z)===!1)return}p=p.parent}if(C){Uo(),Ul(C,null,10,[l,N,z]),Fo();return}}W3(l,m,S,w,R)}function W3(l,d,m,w=!0,S=!1){if(S)throw l;console.error(l)}const ar=[];let Ti=-1;const Uu=[];let Lo=null,ju=0;const AA=Promise.resolve();let Md=null;function IA(l){const d=Md||AA;return l?d.then(this?l.bind(this):l):d}function X3(l){let d=Ti+1,m=ar.length;for(;d<m;){const w=d+m>>>1,S=ar[w],C=Ll(S);C<l||C===l&&S.flags&2?d=w+1:m=w}return d}function yy(l){if(!(l.flags&1)){const d=Ll(l),m=ar[ar.length-1];!m||!(l.flags&2)&&d>=Ll(m)?ar.push(l):ar.splice(X3(d),0,l),l.flags|=1,MA()}}function MA(){Md||(Md=AA.then(kA))}function z3(l){ct(l)?Uu.push(...l):Lo&&l.id===-1?Lo.splice(ju+1,0,l):l.flags&1||(Uu.push(l),l.flags|=1),MA()}function hE(l,d,m=Ti+1){for(;m<ar.length;m++){const w=ar[m];if(w&&w.flags&2){if(l&&w.id!==l.uid)continue;ar.splice(m,1),m--,w.flags&4&&(w.flags&=-2),w(),w.flags&4||(w.flags&=-2)}}}function CA(l){if(Uu.length){const d=[...new Set(Uu)].sort((m,w)=>Ll(m)-Ll(w));if(Uu.length=0,Lo){Lo.push(...d);return}for(Lo=d,ju=0;ju<Lo.length;ju++){const m=Lo[ju];m.flags&4&&(m.flags&=-2),m.flags&8||m(),m.flags&=-2}Lo=null,ju=0}}const Ll=l=>l.id==null?l.flags&2?-1:1/0:l.id;function kA(l){try{for(Ti=0;Ti<ar.length;Ti++){const d=ar[Ti];d&&!(d.flags&8)&&(d.flags&4&&(d.flags&=-2),Ul(d,d.i,d.i?15:14),d.flags&4||(d.flags&=-2))}}finally{for(;Ti<ar.length;Ti++){const d=ar[Ti];d&&(d.flags&=-2)}Ti=-1,ar.length=0,CA(),Md=null,(ar.length||Uu.length)&&kA()}}let Ei=null,DA=null;function Cd(l){const d=Ei;return Ei=l,DA=l&&l.type.__scopeId||null,d}function q3(l,d=Ei,m){if(!d||l._n)return l;const w=(...S)=>{w._d&&xE(-1);const C=Cd(d);let R;try{R=l(...S)}finally{Cd(C),w._d&&xE(1)}return R};return w._n=!0,w._c=!0,w._d=!0,w}function Ts(l,d,m,w){const S=l.dirs,C=d&&d.dirs;for(let R=0;R<S.length;R++){const p=S[R];C&&(p.oldValue=C[R].value);let N=p.dir[w];N&&(Uo(),Ii(N,m,8,[l.el,p,l,d]),Fo())}}const Y3=Symbol("_vte"),$3=l=>l.__isTeleport;function vy(l,d){l.shapeFlag&6&&l.component?(l.transition=d,vy(l.component.subTree,d)):l.shapeFlag&128?(l.ssContent.transition=d.clone(l.ssContent),l.ssFallback.transition=d.clone(l.ssFallback)):l.transition=d}/*! #__NO_SIDE_EFFECTS__ */function RA(l,d){return dt(l)?Yn({name:l.name},d,{setup:l}):l}function PA(l){l.ids=[l.ids[0]+l.ids[2]+++"-",0,0]}function kd(l,d,m,w,S=!1){if(ct(l)){l.forEach((v,J)=>kd(v,d&&(ct(d)?d[J]:d),m,w,S));return}if(Il(w)&&!S){w.shapeFlag&512&&w.type.__asyncResolved&&w.component.subTree.component&&kd(l,d,m,w.component.subTree);return}const C=w.shapeFlag&4?wy(w.component):w.el,R=S?null:C,{i:p,r:N}=l,z=d&&d.r,H=p.refs===Yt?p.refs={}:p.refs,G=p.setupState,$=Ut(G),te=G===Yt?()=>!1:v=>Ft($,v);if(z!=null&&z!==N&&(kn(z)?(H[z]=null,te(z)&&(G[z]=null)):qn(z)&&(z.value=null)),dt(N))Ul(N,p,12,[R,H]);else{const v=kn(N),J=qn(N);if(v||J){const nt=()=>{if(l.f){const je=v?te(N)?G[N]:H[N]:N.value;S?ct(je)&&oy(je,C):ct(je)?je.includes(C)||je.push(C):v?(H[N]=[C],te(N)&&(G[N]=H[N])):(N.value=[C],l.k&&(H[l.k]=N.value))}else v?(H[N]=R,te(N)&&(G[N]=R)):J&&(N.value=R,l.k&&(H[l.k]=R))};R?(nt.id=-1,Or(nt,m)):nt()}}}Od().requestIdleCallback;Od().cancelIdleCallback;const Il=l=>!!l.type.__asyncLoader,LA=l=>l.type.__isKeepAlive;function Q3(l,d){_A(l,"a",d)}function J3(l,d){_A(l,"da",d)}function _A(l,d,m=lr){const w=l.__wdc||(l.__wdc=()=>{let S=m;for(;S;){if(S.isDeactivated)return;S=S.parent}return l()});if(Fd(d,w,m),m){let S=m.parent;for(;S&&S.parent;)LA(S.parent.vnode)&&Z3(w,d,m,S),S=S.parent}}function Z3(l,d,m,w){const S=Fd(d,l,w,!0);jA(()=>{oy(w[d],S)},m)}function Fd(l,d,m=lr,w=!1){if(m){const S=m[l]||(m[l]=[]),C=d.__weh||(d.__weh=(...R)=>{Uo();const p=Fl(m),N=Ii(d,m,l,R);return p(),Fo(),N});return w?S.unshift(C):S.push(C),C}}const oo=l=>(d,m=lr)=>{(!jl||l==="sp")&&Fd(l,(...w)=>d(...w),m)},eL=oo("bm"),NA=oo("m"),tL=oo("bu"),nL=oo("u"),rL=oo("bum"),jA=oo("um"),iL=oo("sp"),oL=oo("rtg"),sL=oo("rtc");function uL(l,d=lr){Fd("ec",l,d)}const aL=Symbol.for("v-ndc"),qm=l=>l?rI(l)?wy(l):qm(l.parent):null,Ml=Yn(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>qm(l.parent),$root:l=>qm(l.root),$host:l=>l.ce,$emit:l=>l.emit,$options:l=>bA(l),$forceUpdate:l=>l.f||(l.f=()=>{yy(l.update)}),$nextTick:l=>l.n||(l.n=IA.bind(l.proxy)),$watch:l=>DL.bind(l)}),_m=(l,d)=>l!==Yt&&!l.__isScriptSetup&&Ft(l,d),lL={get({_:l},d){if(d==="__v_skip")return!0;const{ctx:m,setupState:w,data:S,props:C,accessCache:R,type:p,appContext:N}=l;let z;if(d[0]!=="$"){const te=R[d];if(te!==void 0)switch(te){case 1:return w[d];case 2:return S[d];case 4:return m[d];case 3:return C[d]}else{if(_m(w,d))return R[d]=1,w[d];if(S!==Yt&&Ft(S,d))return R[d]=2,S[d];if((z=l.propsOptions[0])&&Ft(z,d))return R[d]=3,C[d];if(m!==Yt&&Ft(m,d))return R[d]=4,m[d];Ym&&(R[d]=0)}}const H=Ml[d];let G,$;if(H)return d==="$attrs"&&zn(l.attrs,"get",""),H(l);if((G=p.__cssModules)&&(G=G[d]))return G;if(m!==Yt&&Ft(m,d))return R[d]=4,m[d];if($=N.config.globalProperties,Ft($,d))return $[d]},set({_:l},d,m){const{data:w,setupState:S,ctx:C}=l;return _m(S,d)?(S[d]=m,!0):w!==Yt&&Ft(w,d)?(w[d]=m,!0):Ft(l.props,d)||d[0]==="$"&&d.slice(1)in l?!1:(C[d]=m,!0)},has({_:{data:l,setupState:d,accessCache:m,ctx:w,appContext:S,propsOptions:C}},R){let p;return!!m[R]||l!==Yt&&Ft(l,R)||_m(d,R)||(p=C[0])&&Ft(p,R)||Ft(w,R)||Ft(Ml,R)||Ft(S.config.globalProperties,R)},defineProperty(l,d,m){return m.get!=null?l._.accessCache[d]=0:Ft(m,"value")&&this.set(l,d,m.value,null),Reflect.defineProperty(l,d,m)}};function pE(l){return ct(l)?l.reduce((d,m)=>(d[m]=null,d),{}):l}let Ym=!0;function cL(l){const d=bA(l),m=l.proxy,w=l.ctx;Ym=!1,d.beforeCreate&&gE(d.beforeCreate,l,"bc");const{data:S,computed:C,methods:R,watch:p,provide:N,inject:z,created:H,beforeMount:G,mounted:$,beforeUpdate:te,updated:v,activated:J,deactivated:nt,beforeDestroy:je,beforeUnmount:Ue,destroyed:Qe,unmounted:Be,render:Nt,renderTracked:St,renderTriggered:Gt,errorCaptured:cr,serverPrefetch:Fr,expose:I,inheritAttrs:ae,components:ye,directives:hn,filters:Oe}=d;if(z&&fL(z,w,null),R)for(const ut in R){const kt=R[ut];dt(kt)&&(w[ut]=kt.bind(m))}if(S){const ut=S.call(m,m);dn(ut)&&(l.data=bd(ut))}if(Ym=!0,C)for(const ut in C){const kt=C[ut],Qr=dt(kt)?kt.bind(m,m):dt(kt.get)?kt.get.bind(m,m):Ai,Br=!dt(kt)&&dt(kt.set)?kt.set.bind(m):Ai,jn=si({get:Qr,set:Br});Object.defineProperty(w,ut,{enumerable:!0,configurable:!0,get:()=>jn.value,set:On=>jn.value=On})}if(p)for(const ut in p)OA(p[ut],w,m,ut);if(N){const ut=dt(N)?N.call(m):N;Reflect.ownKeys(ut).forEach(kt=>{wd(kt,ut[kt])})}H&&gE(H,l,"c");function Ct(ut,kt){ct(kt)?kt.forEach(Qr=>ut(Qr.bind(m))):kt&&ut(kt.bind(m))}if(Ct(eL,G),Ct(NA,$),Ct(tL,te),Ct(nL,v),Ct(Q3,J),Ct(J3,nt),Ct(uL,cr),Ct(sL,St),Ct(oL,Gt),Ct(rL,Ue),Ct(jA,Be),Ct(iL,Fr),ct(I))if(I.length){const ut=l.exposed||(l.exposed={});I.forEach(kt=>{Object.defineProperty(ut,kt,{get:()=>m[kt],set:Qr=>m[kt]=Qr})})}else l.exposed||(l.exposed={});Nt&&l.render===Ai&&(l.render=Nt),ae!=null&&(l.inheritAttrs=ae),ye&&(l.components=ye),hn&&(l.directives=hn),Fr&&PA(l)}function fL(l,d,m=Ai){ct(l)&&(l=$m(l));for(const w in l){const S=l[w];let C;dn(S)?"default"in S?C=io(S.from||w,S.default,!0):C=io(S.from||w):C=io(S),qn(C)?Object.defineProperty(d,w,{enumerable:!0,configurable:!0,get:()=>C.value,set:R=>C.value=R}):d[w]=C}}function gE(l,d,m){Ii(ct(l)?l.map(w=>w.bind(d.proxy)):l.bind(d.proxy),d,m)}function OA(l,d,m,w){let S=w.includes(".")?QA(m,w):()=>m[w];if(kn(l)){const C=d[l];dt(C)&&xd(S,C)}else if(dt(l))xd(S,l.bind(m));else if(dn(l))if(ct(l))l.forEach(C=>OA(C,d,m,w));else{const C=dt(l.handler)?l.handler.bind(m):d[l.handler];dt(C)&&xd(S,C,l)}}function bA(l){const d=l.type,{mixins:m,extends:w}=d,{mixins:S,optionsCache:C,config:{optionMergeStrategies:R}}=l.appContext,p=C.get(d);let N;return p?N=p:!S.length&&!m&&!w?N=d:(N={},S.length&&S.forEach(z=>Dd(N,z,R,!0)),Dd(N,d,R)),dn(d)&&C.set(d,N),N}function Dd(l,d,m,w=!1){const{mixins:S,extends:C}=d;C&&Dd(l,C,m,!0),S&&S.forEach(R=>Dd(l,R,m,!0));for(const R in d)if(!(w&&R==="expose")){const p=dL[R]||m&&m[R];l[R]=p?p(l[R],d[R]):d[R]}return l}const dL={data:mE,props:yE,emits:yE,methods:Sl,computed:Sl,beforeCreate:sr,created:sr,beforeMount:sr,mounted:sr,beforeUpdate:sr,updated:sr,beforeDestroy:sr,beforeUnmount:sr,destroyed:sr,unmounted:sr,activated:sr,deactivated:sr,errorCaptured:sr,serverPrefetch:sr,components:Sl,directives:Sl,watch:pL,provide:mE,inject:hL};function mE(l,d){return d?l?function(){return Yn(dt(l)?l.call(this,this):l,dt(d)?d.call(this,this):d)}:d:l}function hL(l,d){return Sl($m(l),$m(d))}function $m(l){if(ct(l)){const d={};for(let m=0;m<l.length;m++)d[l[m]]=l[m];return d}return l}function sr(l,d){return l?[...new Set([].concat(l,d))]:d}function Sl(l,d){return l?Yn(Object.create(null),l,d):d}function yE(l,d){return l?ct(l)&&ct(d)?[...new Set([...l,...d])]:Yn(Object.create(null),pE(l),pE(d??{})):d}function pL(l,d){if(!l)return d;if(!d)return l;const m=Yn(Object.create(null),l);for(const w in d)m[w]=sr(l[w],d[w]);return m}function UA(){return{app:null,config:{isNativeTag:n3,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gL=0;function mL(l,d){return function(w,S=null){dt(w)||(w=Yn({},w)),S!=null&&!dn(S)&&(S=null);const C=UA(),R=new WeakSet,p=[];let N=!1;const z=C.app={_uid:gL++,_component:w,_props:S,_container:null,_context:C,_instance:null,version:JL,get config(){return C.config},set config(H){},use(H,...G){return R.has(H)||(H&&dt(H.install)?(R.add(H),H.install(z,...G)):dt(H)&&(R.add(H),H(z,...G))),z},mixin(H){return C.mixins.includes(H)||C.mixins.push(H),z},component(H,G){return G?(C.components[H]=G,z):C.components[H]},directive(H,G){return G?(C.directives[H]=G,z):C.directives[H]},mount(H,G,$){if(!N){const te=z._ceVNode||$r(w,S);return te.appContext=C,$===!0?$="svg":$===!1&&($=void 0),l(te,H,$),N=!0,z._container=H,H.__vue_app__=z,wy(te.component)}},onUnmount(H){p.push(H)},unmount(){N&&(Ii(p,z._instance,16),l(null,z._container),delete z._container.__vue_app__)},provide(H,G){return C.provides[H]=G,z},runWithContext(H){const G=Fu;Fu=z;try{return H()}finally{Fu=G}}};return z}}let Fu=null;function wd(l,d){if(lr){let m=lr.provides;const w=lr.parent&&lr.parent.provides;w===m&&(m=lr.provides=Object.create(w)),m[l]=d}}function io(l,d,m=!1){const w=lr||Ei;if(w||Fu){const S=Fu?Fu._context.provides:w?w.parent==null?w.vnode.appContext&&w.vnode.appContext.provides:w.parent.provides:void 0;if(S&&l in S)return S[l];if(arguments.length>1)return m&&dt(d)?d.call(w&&w.proxy):d}}const FA={},BA=()=>Object.create(FA),VA=l=>Object.getPrototypeOf(l)===FA;function yL(l,d,m,w=!1){const S={},C=BA();l.propsDefaults=Object.create(null),HA(l,d,S,C);for(const R in l.propsOptions[0])R in S||(S[R]=void 0);m?l.props=w?S:TA(S):l.type.props?l.props=S:l.props=C,l.attrs=C}function vL(l,d,m,w){const{props:S,attrs:C,vnode:{patchFlag:R}}=l,p=Ut(S),[N]=l.propsOptions;let z=!1;if((w||R>0)&&!(R&16)){if(R&8){const H=l.vnode.dynamicProps;for(let G=0;G<H.length;G++){let $=H[G];if(Bd(l.emitsOptions,$))continue;const te=d[$];if(N)if(Ft(C,$))te!==C[$]&&(C[$]=te,z=!0);else{const v=bo($);S[v]=Qm(N,p,v,te,l,!1)}else te!==C[$]&&(C[$]=te,z=!0)}}}else{HA(l,d,S,C)&&(z=!0);let H;for(const G in p)(!d||!Ft(d,G)&&((H=Ms(G))===G||!Ft(d,H)))&&(N?m&&(m[G]!==void 0||m[H]!==void 0)&&(S[G]=Qm(N,p,G,void 0,l,!0)):delete S[G]);if(C!==p)for(const G in C)(!d||!Ft(d,G))&&(delete C[G],z=!0)}z&&ro(l.attrs,"set","")}function HA(l,d,m,w){const[S,C]=l.propsOptions;let R=!1,p;if(d)for(let N in d){if(wl(N))continue;const z=d[N];let H;S&&Ft(S,H=bo(N))?!C||!C.includes(H)?m[H]=z:(p||(p={}))[H]=z:Bd(l.emitsOptions,N)||(!(N in w)||z!==w[N])&&(w[N]=z,R=!0)}if(C){const N=Ut(m),z=p||Yt;for(let H=0;H<C.length;H++){const G=C[H];m[G]=Qm(S,N,G,z[G],l,!Ft(z,G))}}return R}function Qm(l,d,m,w,S,C){const R=l[m];if(R!=null){const p=Ft(R,"default");if(p&&w===void 0){const N=R.default;if(R.type!==Function&&!R.skipFactory&&dt(N)){const{propsDefaults:z}=S;if(m in z)w=z[m];else{const H=Fl(S);w=z[m]=N.call(null,d),H()}}else w=N;S.ce&&S.ce._setProp(m,w)}R[0]&&(C&&!p?w=!1:R[1]&&(w===""||w===Ms(m))&&(w=!0))}return w}const SL=new WeakMap;function GA(l,d,m=!1){const w=m?SL:d.propsCache,S=w.get(l);if(S)return S;const C=l.props,R={},p=[];let N=!1;if(!dt(l)){const H=G=>{N=!0;const[$,te]=GA(G,d,!0);Yn(R,$),te&&p.push(...te)};!m&&d.mixins.length&&d.mixins.forEach(H),l.extends&&H(l.extends),l.mixins&&l.mixins.forEach(H)}if(!C&&!N)return dn(l)&&w.set(l,bu),bu;if(ct(C))for(let H=0;H<C.length;H++){const G=bo(C[H]);vE(G)&&(R[G]=Yt)}else if(C)for(const H in C){const G=bo(H);if(vE(G)){const $=C[H],te=R[G]=ct($)||dt($)?{type:$}:Yn({},$),v=te.type;let J=!1,nt=!0;if(ct(v))for(let je=0;je<v.length;++je){const Ue=v[je],Qe=dt(Ue)&&Ue.name;if(Qe==="Boolean"){J=!0;break}else Qe==="String"&&(nt=!1)}else J=dt(v)&&v.name==="Boolean";te[0]=J,te[1]=nt,(J||Ft(te,"default"))&&p.push(G)}}const z=[R,p];return dn(l)&&w.set(l,z),z}function vE(l){return l[0]!=="$"&&!wl(l)}const KA=l=>l[0]==="_"||l==="$stable",Sy=l=>ct(l)?l.map(xi):[xi(l)],TL=(l,d,m)=>{if(d._n)return d;const w=q3((...S)=>Sy(d(...S)),m);return w._c=!1,w},WA=(l,d,m)=>{const w=l._ctx;for(const S in l){if(KA(S))continue;const C=l[S];if(dt(C))d[S]=TL(S,C,w);else if(C!=null){const R=Sy(C);d[S]=()=>R}}},XA=(l,d)=>{const m=Sy(d);l.slots.default=()=>m},zA=(l,d,m)=>{for(const w in d)(m||w!=="_")&&(l[w]=d[w])},wL=(l,d,m)=>{const w=l.slots=BA();if(l.vnode.shapeFlag&32){const S=d._;S?(zA(w,d,m),m&&iA(w,"_",S,!0)):WA(d,w)}else d&&XA(l,d)},xL=(l,d,m)=>{const{vnode:w,slots:S}=l;let C=!0,R=Yt;if(w.shapeFlag&32){const p=d._;p?m&&p===1?C=!1:zA(S,d,m):(C=!d.$stable,WA(d,S)),R=d}else d&&(XA(l,d),R={default:1});if(C)for(const p in S)!KA(p)&&R[p]==null&&delete S[p]},Or=OL;function EL(l){return AL(l)}function AL(l,d){const m=Od();m.__VUE__=!0;const{insert:w,remove:S,patchProp:C,createElement:R,createText:p,createComment:N,setText:z,setElementText:H,parentNode:G,nextSibling:$,setScopeId:te=Ai,insertStaticContent:v}=l,J=(D,V,Z,ie=null,le=null,se=null,Te=void 0,he=null,re=!!V.dynamicChildren)=>{if(D===V)return;D&&!ml(D,V)&&(ie=oe(D),On(D,le,se,!0),D=null),V.patchFlag===-2&&(re=!1,V.dynamicChildren=null);const{type:fe,ref:Ze,shapeFlag:Pe}=V;switch(fe){case Vd:nt(D,V,Z,ie);break;case _l:je(D,V,Z,ie);break;case jm:D==null&&Ue(V,Z,ie,Te);break;case wi:ye(D,V,Z,ie,le,se,Te,he,re);break;default:Pe&1?Nt(D,V,Z,ie,le,se,Te,he,re):Pe&6?hn(D,V,Z,ie,le,se,Te,he,re):(Pe&64||Pe&128)&&fe.process(D,V,Z,ie,le,se,Te,he,re,Ge)}Ze!=null&&le&&kd(Ze,D&&D.ref,se,V||D,!V)},nt=(D,V,Z,ie)=>{if(D==null)w(V.el=p(V.children),Z,ie);else{const le=V.el=D.el;V.children!==D.children&&z(le,V.children)}},je=(D,V,Z,ie)=>{D==null?w(V.el=N(V.children||""),Z,ie):V.el=D.el},Ue=(D,V,Z,ie)=>{[D.el,D.anchor]=v(D.children,V,Z,ie,D.el,D.anchor)},Qe=({el:D,anchor:V},Z,ie)=>{let le;for(;D&&D!==V;)le=$(D),w(D,Z,ie),D=le;w(V,Z,ie)},Be=({el:D,anchor:V})=>{let Z;for(;D&&D!==V;)Z=$(D),S(D),D=Z;S(V)},Nt=(D,V,Z,ie,le,se,Te,he,re)=>{V.type==="svg"?Te="svg":V.type==="math"&&(Te="mathml"),D==null?St(V,Z,ie,le,se,Te,he,re):Fr(D,V,le,se,Te,he,re)},St=(D,V,Z,ie,le,se,Te,he)=>{let re,fe;const{props:Ze,shapeFlag:Pe,transition:Ye,dirs:rt}=D;if(re=D.el=R(D.type,se,Ze&&Ze.is,Ze),Pe&8?H(re,D.children):Pe&16&&cr(D.children,re,null,ie,le,Nm(D,se),Te,he),rt&&Ts(D,null,ie,"created"),Gt(re,D,D.scopeId,Te,ie),Ze){for(const _e in Ze)_e!=="value"&&!wl(_e)&&C(re,_e,null,Ze[_e],se,ie);"value"in Ze&&C(re,"value",null,Ze.value,se),(fe=Ze.onVnodeBeforeMount)&&Si(fe,ie,D)}rt&&Ts(D,null,ie,"beforeMount");const ht=IL(le,Ye);ht&&Ye.beforeEnter(re),w(re,V,Z),((fe=Ze&&Ze.onVnodeMounted)||ht||rt)&&Or(()=>{fe&&Si(fe,ie,D),ht&&Ye.enter(re),rt&&Ts(D,null,ie,"mounted")},le)},Gt=(D,V,Z,ie,le)=>{if(Z&&te(D,Z),ie)for(let se=0;se<ie.length;se++)te(D,ie[se]);if(le){let se=le.subTree;if(V===se||ZA(se.type)&&(se.ssContent===V||se.ssFallback===V)){const Te=le.vnode;Gt(D,Te,Te.scopeId,Te.slotScopeIds,le.parent)}}},cr=(D,V,Z,ie,le,se,Te,he,re=0)=>{for(let fe=re;fe<D.length;fe++){const Ze=D[fe]=he?_o(D[fe]):xi(D[fe]);J(null,Ze,V,Z,ie,le,se,Te,he)}},Fr=(D,V,Z,ie,le,se,Te)=>{const he=V.el=D.el;let{patchFlag:re,dynamicChildren:fe,dirs:Ze}=V;re|=D.patchFlag&16;const Pe=D.props||Yt,Ye=V.props||Yt;let rt;if(Z&&ws(Z,!1),(rt=Ye.onVnodeBeforeUpdate)&&Si(rt,Z,V,D),Ze&&Ts(V,D,Z,"beforeUpdate"),Z&&ws(Z,!0),(Pe.innerHTML&&Ye.innerHTML==null||Pe.textContent&&Ye.textContent==null)&&H(he,""),fe?I(D.dynamicChildren,fe,he,Z,ie,Nm(V,le),se):Te||kt(D,V,he,null,Z,ie,Nm(V,le),se,!1),re>0){if(re&16)ae(he,Pe,Ye,Z,le);else if(re&2&&Pe.class!==Ye.class&&C(he,"class",null,Ye.class,le),re&4&&C(he,"style",Pe.style,Ye.style,le),re&8){const ht=V.dynamicProps;for(let _e=0;_e<ht.length;_e++){const Dt=ht[_e],$n=Pe[Dt],bn=Ye[Dt];(bn!==$n||Dt==="value")&&C(he,Dt,$n,bn,le,Z)}}re&1&&D.children!==V.children&&H(he,V.children)}else!Te&&fe==null&&ae(he,Pe,Ye,Z,le);((rt=Ye.onVnodeUpdated)||Ze)&&Or(()=>{rt&&Si(rt,Z,V,D),Ze&&Ts(V,D,Z,"updated")},ie)},I=(D,V,Z,ie,le,se,Te)=>{for(let he=0;he<V.length;he++){const re=D[he],fe=V[he],Ze=re.el&&(re.type===wi||!ml(re,fe)||re.shapeFlag&70)?G(re.el):Z;J(re,fe,Ze,null,ie,le,se,Te,!0)}},ae=(D,V,Z,ie,le)=>{if(V!==Z){if(V!==Yt)for(const se in V)!wl(se)&&!(se in Z)&&C(D,se,V[se],null,le,ie);for(const se in Z){if(wl(se))continue;const Te=Z[se],he=V[se];Te!==he&&se!=="value"&&C(D,se,he,Te,le,ie)}"value"in Z&&C(D,"value",V.value,Z.value,le)}},ye=(D,V,Z,ie,le,se,Te,he,re)=>{const fe=V.el=D?D.el:p(""),Ze=V.anchor=D?D.anchor:p("");let{patchFlag:Pe,dynamicChildren:Ye,slotScopeIds:rt}=V;rt&&(he=he?he.concat(rt):rt),D==null?(w(fe,Z,ie),w(Ze,Z,ie),cr(V.children||[],Z,Ze,le,se,Te,he,re)):Pe>0&&Pe&64&&Ye&&D.dynamicChildren?(I(D.dynamicChildren,Ye,Z,le,se,Te,he),(V.key!=null||le&&V===le.subTree)&&qA(D,V,!0)):kt(D,V,Z,Ze,le,se,Te,he,re)},hn=(D,V,Z,ie,le,se,Te,he,re)=>{V.slotScopeIds=he,D==null?V.shapeFlag&512?le.ctx.activate(V,Z,ie,Te,re):Oe(V,Z,ie,le,se,Te,re):ve(D,V,re)},Oe=(D,V,Z,ie,le,se,Te)=>{const he=D.component=XL(D,ie,le);if(LA(D)&&(he.ctx.renderer=Ge),zL(he,!1,Te),he.asyncDep){if(le&&le.registerDep(he,Ct,Te),!D.el){const re=he.subTree=$r(_l);je(null,re,V,Z)}}else Ct(he,D,V,Z,le,se,Te)},ve=(D,V,Z)=>{const ie=V.component=D.component;if(NL(D,V,Z))if(ie.asyncDep&&!ie.asyncResolved){ut(ie,V,Z);return}else ie.next=V,ie.update();else V.el=D.el,ie.vnode=V},Ct=(D,V,Z,ie,le,se,Te)=>{const he=()=>{if(D.isMounted){let{next:Pe,bu:Ye,u:rt,parent:ht,vnode:_e}=D;{const fr=YA(D);if(fr){Pe&&(Pe.el=_e.el,ut(D,Pe,Te)),fr.asyncDep.then(()=>{D.isUnmounted||he()});return}}let Dt=Pe,$n;ws(D,!1),Pe?(Pe.el=_e.el,ut(D,Pe,Te)):Pe=_e,Ye&&Dm(Ye),($n=Pe.props&&Pe.props.onVnodeBeforeUpdate)&&Si($n,ht,Pe,_e),ws(D,!0);const bn=TE(D),xr=D.subTree;D.subTree=bn,J(xr,bn,G(xr.el),oe(xr),D,le,se),Pe.el=bn.el,Dt===null&&jL(D,bn.el),rt&&Or(rt,le),($n=Pe.props&&Pe.props.onVnodeUpdated)&&Or(()=>Si($n,ht,Pe,_e),le)}else{let Pe;const{el:Ye,props:rt}=V,{bm:ht,m:_e,parent:Dt,root:$n,type:bn}=D,xr=Il(V);ws(D,!1),ht&&Dm(ht),!xr&&(Pe=rt&&rt.onVnodeBeforeMount)&&Si(Pe,Dt,V),ws(D,!0);{$n.ce&&$n.ce._injectChildStyle(bn);const fr=D.subTree=TE(D);J(null,fr,Z,ie,D,le,se),V.el=fr.el}if(_e&&Or(_e,le),!xr&&(Pe=rt&&rt.onVnodeMounted)){const fr=V;Or(()=>Si(Pe,Dt,fr),le)}(V.shapeFlag&256||Dt&&Il(Dt.vnode)&&Dt.vnode.shapeFlag&256)&&D.a&&Or(D.a,le),D.isMounted=!0,V=Z=ie=null}};D.scope.on();const re=D.effect=new sA(he);D.scope.off();const fe=D.update=re.run.bind(re),Ze=D.job=re.runIfDirty.bind(re);Ze.i=D,Ze.id=D.uid,re.scheduler=()=>yy(Ze),ws(D,!0),fe()},ut=(D,V,Z)=>{V.component=D;const ie=D.vnode.props;D.vnode=V,D.next=null,vL(D,V.props,ie,Z),xL(D,V.children,Z),Uo(),hE(D),Fo()},kt=(D,V,Z,ie,le,se,Te,he,re=!1)=>{const fe=D&&D.children,Ze=D?D.shapeFlag:0,Pe=V.children,{patchFlag:Ye,shapeFlag:rt}=V;if(Ye>0){if(Ye&128){Br(fe,Pe,Z,ie,le,se,Te,he,re);return}else if(Ye&256){Qr(fe,Pe,Z,ie,le,se,Te,he,re);return}}rt&8?(Ze&16&&tn(fe,le,se),Pe!==fe&&H(Z,Pe)):Ze&16?rt&16?Br(fe,Pe,Z,ie,le,se,Te,he,re):tn(fe,le,se,!0):(Ze&8&&H(Z,""),rt&16&&cr(Pe,Z,ie,le,se,Te,he,re))},Qr=(D,V,Z,ie,le,se,Te,he,re)=>{D=D||bu,V=V||bu;const fe=D.length,Ze=V.length,Pe=Math.min(fe,Ze);let Ye;for(Ye=0;Ye<Pe;Ye++){const rt=V[Ye]=re?_o(V[Ye]):xi(V[Ye]);J(D[Ye],rt,Z,null,le,se,Te,he,re)}fe>Ze?tn(D,le,se,!0,!1,Pe):cr(V,Z,ie,le,se,Te,he,re,Pe)},Br=(D,V,Z,ie,le,se,Te,he,re)=>{let fe=0;const Ze=V.length;let Pe=D.length-1,Ye=Ze-1;for(;fe<=Pe&&fe<=Ye;){const rt=D[fe],ht=V[fe]=re?_o(V[fe]):xi(V[fe]);if(ml(rt,ht))J(rt,ht,Z,null,le,se,Te,he,re);else break;fe++}for(;fe<=Pe&&fe<=Ye;){const rt=D[Pe],ht=V[Ye]=re?_o(V[Ye]):xi(V[Ye]);if(ml(rt,ht))J(rt,ht,Z,null,le,se,Te,he,re);else break;Pe--,Ye--}if(fe>Pe){if(fe<=Ye){const rt=Ye+1,ht=rt<Ze?V[rt].el:ie;for(;fe<=Ye;)J(null,V[fe]=re?_o(V[fe]):xi(V[fe]),Z,ht,le,se,Te,he,re),fe++}}else if(fe>Ye)for(;fe<=Pe;)On(D[fe],le,se,!0),fe++;else{const rt=fe,ht=fe,_e=new Map;for(fe=ht;fe<=Ye;fe++){const Qn=V[fe]=re?_o(V[fe]):xi(V[fe]);Qn.key!=null&&_e.set(Qn.key,fe)}let Dt,$n=0;const bn=Ye-ht+1;let xr=!1,fr=0;const tt=new Array(bn);for(fe=0;fe<bn;fe++)tt[fe]=0;for(fe=rt;fe<=Pe;fe++){const Qn=D[fe];if($n>=bn){On(Qn,le,se,!0);continue}let Er;if(Qn.key!=null)Er=_e.get(Qn.key);else for(Dt=ht;Dt<=Ye;Dt++)if(tt[Dt-ht]===0&&ml(Qn,V[Dt])){Er=Dt;break}Er===void 0?On(Qn,le,se,!0):(tt[Er-ht]=fe+1,Er>=fr?fr=Er:xr=!0,J(Qn,V[Er],Z,null,le,se,Te,he,re),$n++)}const Bl=xr?ML(tt):bu;for(Dt=Bl.length-1,fe=bn-1;fe>=0;fe--){const Qn=ht+fe,Er=V[Qn],Vl=Qn+1<Ze?V[Qn+1].el:ie;tt[fe]===0?J(null,Er,Z,Vl,le,se,Te,he,re):xr&&(Dt<0||fe!==Bl[Dt]?jn(Er,Z,Vl,2):Dt--)}}},jn=(D,V,Z,ie,le=null)=>{const{el:se,type:Te,transition:he,children:re,shapeFlag:fe}=D;if(fe&6){jn(D.component.subTree,V,Z,ie);return}if(fe&128){D.suspense.move(V,Z,ie);return}if(fe&64){Te.move(D,V,Z,Ge);return}if(Te===wi){w(se,V,Z);for(let Pe=0;Pe<re.length;Pe++)jn(re[Pe],V,Z,ie);w(D.anchor,V,Z);return}if(Te===jm){Qe(D,V,Z);return}if(ie!==2&&fe&1&&he)if(ie===0)he.beforeEnter(se),w(se,V,Z),Or(()=>he.enter(se),le);else{const{leave:Pe,delayLeave:Ye,afterLeave:rt}=he,ht=()=>w(se,V,Z),_e=()=>{Pe(se,()=>{ht(),rt&&rt()})};Ye?Ye(se,ht,_e):_e()}else w(se,V,Z)},On=(D,V,Z,ie=!1,le=!1)=>{const{type:se,props:Te,ref:he,children:re,dynamicChildren:fe,shapeFlag:Ze,patchFlag:Pe,dirs:Ye,cacheIndex:rt}=D;if(Pe===-2&&(le=!1),he!=null&&kd(he,null,Z,D,!0),rt!=null&&(V.renderCache[rt]=void 0),Ze&256){V.ctx.deactivate(D);return}const ht=Ze&1&&Ye,_e=!Il(D);let Dt;if(_e&&(Dt=Te&&Te.onVnodeBeforeUnmount)&&Si(Dt,V,D),Ze&6)en(D.component,Z,ie);else{if(Ze&128){D.suspense.unmount(Z,ie);return}ht&&Ts(D,null,V,"beforeUnmount"),Ze&64?D.type.remove(D,V,Z,Ge,ie):fe&&!fe.hasOnce&&(se!==wi||Pe>0&&Pe&64)?tn(fe,V,Z,!1,!0):(se===wi&&Pe&384||!le&&Ze&16)&&tn(re,V,Z),ie&&so(D)}(_e&&(Dt=Te&&Te.onVnodeUnmounted)||ht)&&Or(()=>{Dt&&Si(Dt,V,D),ht&&Ts(D,null,V,"unmounted")},Z)},so=D=>{const{type:V,el:Z,anchor:ie,transition:le}=D;if(V===wi){b(Z,ie);return}if(V===jm){Be(D);return}const se=()=>{S(Z),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(D.shapeFlag&1&&le&&!le.persisted){const{leave:Te,delayLeave:he}=le,re=()=>Te(Z,se);he?he(D.el,se,re):re()}else se()},b=(D,V)=>{let Z;for(;D!==V;)Z=$(D),S(D),D=Z;S(V)},en=(D,V,Z)=>{const{bum:ie,scope:le,job:se,subTree:Te,um:he,m:re,a:fe}=D;SE(re),SE(fe),ie&&Dm(ie),le.stop(),se&&(se.flags|=8,On(Te,D,V,Z)),he&&Or(he,V),Or(()=>{D.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},tn=(D,V,Z,ie=!1,le=!1,se=0)=>{for(let Te=se;Te<D.length;Te++)On(D[Te],V,Z,ie,le)},oe=D=>{if(D.shapeFlag&6)return oe(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const V=$(D.anchor||D.el),Z=V&&V[Y3];return Z?$(Z):V};let Ie=!1;const Se=(D,V,Z)=>{D==null?V._vnode&&On(V._vnode,null,null,!0):J(V._vnode||null,D,V,null,null,null,Z),V._vnode=D,Ie||(Ie=!0,hE(),CA(),Ie=!1)},Ge={p:J,um:On,m:jn,r:so,mt:Oe,mc:cr,pc:kt,pbc:I,n:oe,o:l};return{render:Se,hydrate:void 0,createApp:mL(Se)}}function Nm({type:l,props:d},m){return m==="svg"&&l==="foreignObject"||m==="mathml"&&l==="annotation-xml"&&d&&d.encoding&&d.encoding.includes("html")?void 0:m}function ws({effect:l,job:d},m){m?(l.flags|=32,d.flags|=4):(l.flags&=-33,d.flags&=-5)}function IL(l,d){return(!l||l&&!l.pendingBranch)&&d&&!d.persisted}function qA(l,d,m=!1){const w=l.children,S=d.children;if(ct(w)&&ct(S))for(let C=0;C<w.length;C++){const R=w[C];let p=S[C];p.shapeFlag&1&&!p.dynamicChildren&&((p.patchFlag<=0||p.patchFlag===32)&&(p=S[C]=_o(S[C]),p.el=R.el),!m&&p.patchFlag!==-2&&qA(R,p)),p.type===Vd&&(p.el=R.el)}}function ML(l){const d=l.slice(),m=[0];let w,S,C,R,p;const N=l.length;for(w=0;w<N;w++){const z=l[w];if(z!==0){if(S=m[m.length-1],l[S]<z){d[w]=S,m.push(w);continue}for(C=0,R=m.length-1;C<R;)p=C+R>>1,l[m[p]]<z?C=p+1:R=p;z<l[m[C]]&&(C>0&&(d[w]=m[C-1]),m[C]=w)}}for(C=m.length,R=m[C-1];C-- >0;)m[C]=R,R=d[R];return m}function YA(l){const d=l.subTree.component;if(d)return d.asyncDep&&!d.asyncResolved?d:YA(d)}function SE(l){if(l)for(let d=0;d<l.length;d++)l[d].flags|=8}const CL=Symbol.for("v-scx"),kL=()=>io(CL);function xd(l,d,m){return $A(l,d,m)}function $A(l,d,m=Yt){const{immediate:w,deep:S,flush:C,once:R}=m,p=Yn({},m),N=d&&w||!d&&C!=="post";let z;if(jl){if(C==="sync"){const te=kL();z=te.__watcherHandles||(te.__watcherHandles=[])}else if(!N){const te=()=>{};return te.stop=Ai,te.resume=Ai,te.pause=Ai,te}}const H=lr;p.call=(te,v,J)=>Ii(te,H,v,J);let G=!1;C==="post"?p.scheduler=te=>{Or(te,H&&H.suspense)}:C!=="sync"&&(G=!0,p.scheduler=(te,v)=>{v?te():yy(te)}),p.augmentJob=te=>{d&&(te.flags|=4),G&&(te.flags|=2,H&&(te.id=H.uid,te.i=H))};const $=K3(l,d,p);return jl&&(z?z.push($):N&&$()),$}function DL(l,d,m){const w=this.proxy,S=kn(l)?l.includes(".")?QA(w,l):()=>w[l]:l.bind(w,w);let C;dt(d)?C=d:(C=d.handler,m=d);const R=Fl(this),p=$A(S,C.bind(w),m);return R(),p}function QA(l,d){const m=d.split(".");return()=>{let w=l;for(let S=0;S<m.length&&w;S++)w=w[m[S]];return w}}const RL=(l,d)=>d==="modelValue"||d==="model-value"?l.modelModifiers:l[`${d}Modifiers`]||l[`${bo(d)}Modifiers`]||l[`${Ms(d)}Modifiers`];function PL(l,d,...m){if(l.isUnmounted)return;const w=l.vnode.props||Yt;let S=m;const C=d.startsWith("update:"),R=C&&RL(w,d.slice(7));R&&(R.trim&&(S=m.map(H=>kn(H)?H.trim():H)),R.number&&(S=m.map(c3)));let p,N=w[p=km(d)]||w[p=km(bo(d))];!N&&C&&(N=w[p=km(Ms(d))]),N&&Ii(N,l,6,S);const z=w[p+"Once"];if(z){if(!l.emitted)l.emitted={};else if(l.emitted[p])return;l.emitted[p]=!0,Ii(z,l,6,S)}}function JA(l,d,m=!1){const w=d.emitsCache,S=w.get(l);if(S!==void 0)return S;const C=l.emits;let R={},p=!1;if(!dt(l)){const N=z=>{const H=JA(z,d,!0);H&&(p=!0,Yn(R,H))};!m&&d.mixins.length&&d.mixins.forEach(N),l.extends&&N(l.extends),l.mixins&&l.mixins.forEach(N)}return!C&&!p?(dn(l)&&w.set(l,null),null):(ct(C)?C.forEach(N=>R[N]=null):Yn(R,C),dn(l)&&w.set(l,R),R)}function Bd(l,d){return!l||!_d(d)?!1:(d=d.slice(2).replace(/Once$/,""),Ft(l,d[0].toLowerCase()+d.slice(1))||Ft(l,Ms(d))||Ft(l,d))}function TE(l){const{type:d,vnode:m,proxy:w,withProxy:S,propsOptions:[C],slots:R,attrs:p,emit:N,render:z,renderCache:H,props:G,data:$,setupState:te,ctx:v,inheritAttrs:J}=l,nt=Cd(l);let je,Ue;try{if(m.shapeFlag&4){const Be=S||w,Nt=Be;je=xi(z.call(Nt,Be,H,G,te,$,v)),Ue=p}else{const Be=d;je=xi(Be.length>1?Be(G,{attrs:p,slots:R,emit:N}):Be(G,null)),Ue=d.props?p:LL(p)}}catch(Be){Cl.length=0,Ud(Be,l,1),je=$r(_l)}let Qe=je;if(Ue&&J!==!1){const Be=Object.keys(Ue),{shapeFlag:Nt}=Qe;Be.length&&Nt&7&&(C&&Be.some(iy)&&(Ue=_L(Ue,C)),Qe=Bu(Qe,Ue,!1,!0))}return m.dirs&&(Qe=Bu(Qe,null,!1,!0),Qe.dirs=Qe.dirs?Qe.dirs.concat(m.dirs):m.dirs),m.transition&&vy(Qe,m.transition),je=Qe,Cd(nt),je}const LL=l=>{let d;for(const m in l)(m==="class"||m==="style"||_d(m))&&((d||(d={}))[m]=l[m]);return d},_L=(l,d)=>{const m={};for(const w in l)(!iy(w)||!(w.slice(9)in d))&&(m[w]=l[w]);return m};function NL(l,d,m){const{props:w,children:S,component:C}=l,{props:R,children:p,patchFlag:N}=d,z=C.emitsOptions;if(d.dirs||d.transition)return!0;if(m&&N>=0){if(N&1024)return!0;if(N&16)return w?wE(w,R,z):!!R;if(N&8){const H=d.dynamicProps;for(let G=0;G<H.length;G++){const $=H[G];if(R[$]!==w[$]&&!Bd(z,$))return!0}}}else return(S||p)&&(!p||!p.$stable)?!0:w===R?!1:w?R?wE(w,R,z):!0:!!R;return!1}function wE(l,d,m){const w=Object.keys(d);if(w.length!==Object.keys(l).length)return!0;for(let S=0;S<w.length;S++){const C=w[S];if(d[C]!==l[C]&&!Bd(m,C))return!0}return!1}function jL({vnode:l,parent:d},m){for(;d;){const w=d.subTree;if(w.suspense&&w.suspense.activeBranch===l&&(w.el=l.el),w===l)(l=d.vnode).el=m,d=d.parent;else break}}const ZA=l=>l.__isSuspense;function OL(l,d){d&&d.pendingBranch?ct(l)?d.effects.push(...l):d.effects.push(l):z3(l)}const wi=Symbol.for("v-fgt"),Vd=Symbol.for("v-txt"),_l=Symbol.for("v-cmt"),jm=Symbol.for("v-stc"),Cl=[];let Ur=null;function eI(l=!1){Cl.push(Ur=l?null:[])}function bL(){Cl.pop(),Ur=Cl[Cl.length-1]||null}let Nl=1;function xE(l,d=!1){Nl+=l,l<0&&Ur&&d&&(Ur.hasOnce=!0)}function tI(l){return l.dynamicChildren=Nl>0?Ur||bu:null,bL(),Nl>0&&Ur&&Ur.push(l),l}function UL(l,d,m,w,S,C){return tI(Pd(l,d,m,w,S,C,!0))}function FL(l,d,m,w,S){return tI($r(l,d,m,w,S,!0))}function Rd(l){return l?l.__v_isVNode===!0:!1}function ml(l,d){return l.type===d.type&&l.key===d.key}const nI=({key:l})=>l??null,Ed=({ref:l,ref_key:d,ref_for:m})=>(typeof l=="number"&&(l=""+l),l!=null?kn(l)||qn(l)||dt(l)?{i:Ei,r:l,k:d,f:!!m}:l:null);function Pd(l,d=null,m=null,w=0,S=null,C=l===wi?0:1,R=!1,p=!1){const N={__v_isVNode:!0,__v_skip:!0,type:l,props:d,key:d&&nI(d),ref:d&&Ed(d),scopeId:DA,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:C,patchFlag:w,dynamicProps:S,dynamicChildren:null,appContext:null,ctx:Ei};return p?(Ty(N,m),C&128&&l.normalize(N)):m&&(N.shapeFlag|=kn(m)?8:16),Nl>0&&!R&&Ur&&(N.patchFlag>0||C&6)&&N.patchFlag!==32&&Ur.push(N),N}const $r=BL;function BL(l,d=null,m=null,w=0,S=null,C=!1){if((!l||l===aL)&&(l=_l),Rd(l)){const p=Bu(l,d,!0);return m&&Ty(p,m),Nl>0&&!C&&Ur&&(p.shapeFlag&6?Ur[Ur.indexOf(l)]=p:Ur.push(p)),p.patchFlag=-2,p}if(QL(l)&&(l=l.__vccOpts),d){d=VL(d);let{class:p,style:N}=d;p&&!kn(p)&&(d.class=ay(p)),dn(N)&&(my(N)&&!ct(N)&&(N=Yn({},N)),d.style=uy(N))}const R=kn(l)?1:ZA(l)?128:$3(l)?64:dn(l)?4:dt(l)?2:0;return Pd(l,d,m,w,S,R,C,!0)}function VL(l){return l?my(l)||VA(l)?Yn({},l):l:null}function Bu(l,d,m=!1,w=!1){const{props:S,ref:C,patchFlag:R,children:p,transition:N}=l,z=d?GL(S||{},d):S,H={__v_isVNode:!0,__v_skip:!0,type:l.type,props:z,key:z&&nI(z),ref:d&&d.ref?m&&C?ct(C)?C.concat(Ed(d)):[C,Ed(d)]:Ed(d):C,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:p,target:l.target,targetStart:l.targetStart,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:d&&l.type!==wi?R===-1?16:R|16:R,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:N,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Bu(l.ssContent),ssFallback:l.ssFallback&&Bu(l.ssFallback),el:l.el,anchor:l.anchor,ctx:l.ctx,ce:l.ce};return N&&w&&vy(H,N.clone(H)),H}function HL(l=" ",d=0){return $r(Vd,null,l,d)}function xi(l){return l==null||typeof l=="boolean"?$r(_l):ct(l)?$r(wi,null,l.slice()):Rd(l)?_o(l):$r(Vd,null,String(l))}function _o(l){return l.el===null&&l.patchFlag!==-1||l.memo?l:Bu(l)}function Ty(l,d){let m=0;const{shapeFlag:w}=l;if(d==null)d=null;else if(ct(d))m=16;else if(typeof d=="object")if(w&65){const S=d.default;S&&(S._c&&(S._d=!1),Ty(l,S()),S._c&&(S._d=!0));return}else{m=32;const S=d._;!S&&!VA(d)?d._ctx=Ei:S===3&&Ei&&(Ei.slots._===1?d._=1:(d._=2,l.patchFlag|=1024))}else dt(d)?(d={default:d,_ctx:Ei},m=32):(d=String(d),w&64?(m=16,d=[HL(d)]):m=8);l.children=d,l.shapeFlag|=m}function GL(...l){const d={};for(let m=0;m<l.length;m++){const w=l[m];for(const S in w)if(S==="class")d.class!==w.class&&(d.class=ay([d.class,w.class]));else if(S==="style")d.style=uy([d.style,w.style]);else if(_d(S)){const C=d[S],R=w[S];R&&C!==R&&!(ct(C)&&C.includes(R))&&(d[S]=C?[].concat(C,R):R)}else S!==""&&(d[S]=w[S])}return d}function Si(l,d,m,w=null){Ii(l,d,7,[m,w])}const KL=UA();let WL=0;function XL(l,d,m){const w=l.type,S=(d?d.appContext:l.appContext)||KL,C={uid:WL++,vnode:l,type:w,parent:d,appContext:S,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new y3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:d?d.provides:Object.create(S.provides),ids:d?d.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:GA(w,S),emitsOptions:JA(w,S),emit:null,emitted:null,propsDefaults:Yt,inheritAttrs:w.inheritAttrs,ctx:Yt,data:Yt,props:Yt,attrs:Yt,slots:Yt,refs:Yt,setupState:Yt,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return C.ctx={_:C},C.root=d?d.root:C,C.emit=PL.bind(null,C),l.ce&&l.ce(C),C}let lr=null,Ld,Jm;{const l=Od(),d=(m,w)=>{let S;return(S=l[m])||(S=l[m]=[]),S.push(w),C=>{S.length>1?S.forEach(R=>R(C)):S[0](C)}};Ld=d("__VUE_INSTANCE_SETTERS__",m=>lr=m),Jm=d("__VUE_SSR_SETTERS__",m=>jl=m)}const Fl=l=>{const d=lr;return Ld(l),l.scope.on(),()=>{l.scope.off(),Ld(d)}},EE=()=>{lr&&lr.scope.off(),Ld(null)};function rI(l){return l.vnode.shapeFlag&4}let jl=!1;function zL(l,d=!1,m=!1){d&&Jm(d);const{props:w,children:S}=l.vnode,C=rI(l);yL(l,w,C,d),wL(l,S,m);const R=C?qL(l,d):void 0;return d&&Jm(!1),R}function qL(l,d){const m=l.type;l.accessCache=Object.create(null),l.proxy=new Proxy(l.ctx,lL);const{setup:w}=m;if(w){Uo();const S=l.setupContext=w.length>1?$L(l):null,C=Fl(l),R=Ul(w,l,0,[l.props,S]),p=nA(R);if(Fo(),C(),(p||l.sp)&&!Il(l)&&PA(l),p){if(R.then(EE,EE),d)return R.then(N=>{AE(l,N)}).catch(N=>{Ud(N,l,0)});l.asyncDep=R}else AE(l,R)}else iI(l)}function AE(l,d,m){dt(d)?l.type.__ssrInlineRender?l.ssrRender=d:l.render=d:dn(d)&&(l.setupState=EA(d)),iI(l)}function iI(l,d,m){const w=l.type;l.render||(l.render=w.render||Ai);{const S=Fl(l);Uo();try{cL(l)}finally{Fo(),S()}}}const YL={get(l,d){return zn(l,"get",""),l[d]}};function $L(l){const d=m=>{l.exposed=m||{}};return{attrs:new Proxy(l.attrs,YL),slots:l.slots,emit:l.emit,expose:d}}function wy(l){return l.exposed?l.exposeProxy||(l.exposeProxy=new Proxy(EA(b3(l.exposed)),{get(d,m){if(m in d)return d[m];if(m in Ml)return Ml[m](l)},has(d,m){return m in d||m in Ml}})):l.proxy}function QL(l){return dt(l)&&"__vccOpts"in l}const si=(l,d)=>H3(l,d,jl);function oI(l,d,m){const w=arguments.length;return w===2?dn(d)&&!ct(d)?Rd(d)?$r(l,null,[d]):$r(l,d):$r(l,null,d):(w>3?m=Array.prototype.slice.call(arguments,2):w===3&&Rd(m)&&(m=[m]),$r(l,d,m))}const JL="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zm;const IE=typeof window<"u"&&window.trustedTypes;if(IE)try{Zm=IE.createPolicy("vue",{createHTML:l=>l})}catch{}const sI=Zm?l=>Zm.createHTML(l):l=>l,ZL="http://www.w3.org/2000/svg",e_="http://www.w3.org/1998/Math/MathML",no=typeof document<"u"?document:null,ME=no&&no.createElement("template"),t_={insert:(l,d,m)=>{d.insertBefore(l,m||null)},remove:l=>{const d=l.parentNode;d&&d.removeChild(l)},createElement:(l,d,m,w)=>{const S=d==="svg"?no.createElementNS(ZL,l):d==="mathml"?no.createElementNS(e_,l):m?no.createElement(l,{is:m}):no.createElement(l);return l==="select"&&w&&w.multiple!=null&&S.setAttribute("multiple",w.multiple),S},createText:l=>no.createTextNode(l),createComment:l=>no.createComment(l),setText:(l,d)=>{l.nodeValue=d},setElementText:(l,d)=>{l.textContent=d},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>no.querySelector(l),setScopeId(l,d){l.setAttribute(d,"")},insertStaticContent(l,d,m,w,S,C){const R=m?m.previousSibling:d.lastChild;if(S&&(S===C||S.nextSibling))for(;d.insertBefore(S.cloneNode(!0),m),!(S===C||!(S=S.nextSibling)););else{ME.innerHTML=sI(w==="svg"?`<svg>${l}</svg>`:w==="mathml"?`<math>${l}</math>`:l);const p=ME.content;if(w==="svg"||w==="mathml"){const N=p.firstChild;for(;N.firstChild;)p.appendChild(N.firstChild);p.removeChild(N)}d.insertBefore(p,m)}return[R?R.nextSibling:d.firstChild,m?m.previousSibling:d.lastChild]}},n_=Symbol("_vtc");function r_(l,d,m){const w=l[n_];w&&(d=(d?[d,...w]:[...w]).join(" ")),d==null?l.removeAttribute("class"):m?l.setAttribute("class",d):l.className=d}const CE=Symbol("_vod"),i_=Symbol("_vsh"),o_=Symbol(""),s_=/(^|;)\s*display\s*:/;function u_(l,d,m){const w=l.style,S=kn(m);let C=!1;if(m&&!S){if(d)if(kn(d))for(const R of d.split(";")){const p=R.slice(0,R.indexOf(":")).trim();m[p]==null&&Ad(w,p,"")}else for(const R in d)m[R]==null&&Ad(w,R,"");for(const R in m)R==="display"&&(C=!0),Ad(w,R,m[R])}else if(S){if(d!==m){const R=w[o_];R&&(m+=";"+R),w.cssText=m,C=s_.test(m)}}else d&&l.removeAttribute("style");CE in l&&(l[CE]=C?w.display:"",l[i_]&&(w.display="none"))}const kE=/\s*!important$/;function Ad(l,d,m){if(ct(m))m.forEach(w=>Ad(l,d,w));else if(m==null&&(m=""),d.startsWith("--"))l.setProperty(d,m);else{const w=a_(l,d);kE.test(m)?l.setProperty(Ms(w),m.replace(kE,""),"important"):l[w]=m}}const DE=["Webkit","Moz","ms"],Om={};function a_(l,d){const m=Om[d];if(m)return m;let w=bo(d);if(w!=="filter"&&w in l)return Om[d]=w;w=rA(w);for(let S=0;S<DE.length;S++){const C=DE[S]+w;if(C in l)return Om[d]=C}return d}const RE="http://www.w3.org/1999/xlink";function PE(l,d,m,w,S,C=m3(d)){w&&d.startsWith("xlink:")?m==null?l.removeAttributeNS(RE,d.slice(6,d.length)):l.setAttributeNS(RE,d,m):m==null||C&&!oA(m)?l.removeAttribute(d):l.setAttribute(d,C?"":Gu(m)?String(m):m)}function LE(l,d,m,w,S){if(d==="innerHTML"||d==="textContent"){m!=null&&(l[d]=d==="innerHTML"?sI(m):m);return}const C=l.tagName;if(d==="value"&&C!=="PROGRESS"&&!C.includes("-")){const p=C==="OPTION"?l.getAttribute("value")||"":l.value,N=m==null?l.type==="checkbox"?"on":"":String(m);(p!==N||!("_value"in l))&&(l.value=N),m==null&&l.removeAttribute(d),l._value=m;return}let R=!1;if(m===""||m==null){const p=typeof l[d];p==="boolean"?m=oA(m):m==null&&p==="string"?(m="",R=!0):p==="number"&&(m=0,R=!0)}try{l[d]=m}catch{}R&&l.removeAttribute(S||d)}function l_(l,d,m,w){l.addEventListener(d,m,w)}function c_(l,d,m,w){l.removeEventListener(d,m,w)}const _E=Symbol("_vei");function f_(l,d,m,w,S=null){const C=l[_E]||(l[_E]={}),R=C[d];if(w&&R)R.value=w;else{const[p,N]=d_(d);if(w){const z=C[d]=g_(w,S);l_(l,p,z,N)}else R&&(c_(l,p,R,N),C[d]=void 0)}}const NE=/(?:Once|Passive|Capture)$/;function d_(l){let d;if(NE.test(l)){d={};let w;for(;w=l.match(NE);)l=l.slice(0,l.length-w[0].length),d[w[0].toLowerCase()]=!0}return[l[2]===":"?l.slice(3):Ms(l.slice(2)),d]}let bm=0;const h_=Promise.resolve(),p_=()=>bm||(h_.then(()=>bm=0),bm=Date.now());function g_(l,d){const m=w=>{if(!w._vts)w._vts=Date.now();else if(w._vts<=m.attached)return;Ii(m_(w,m.value),d,5,[w])};return m.value=l,m.attached=p_(),m}function m_(l,d){if(ct(d)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},d.map(w=>S=>!S._stopped&&w&&w(S))}else return d}const jE=l=>l.charCodeAt(0)===111&&l.charCodeAt(1)===110&&l.charCodeAt(2)>96&&l.charCodeAt(2)<123,y_=(l,d,m,w,S,C)=>{const R=S==="svg";d==="class"?r_(l,w,R):d==="style"?u_(l,m,w):_d(d)?iy(d)||f_(l,d,m,w,C):(d[0]==="."?(d=d.slice(1),!0):d[0]==="^"?(d=d.slice(1),!1):v_(l,d,w,R))?(LE(l,d,w),!l.tagName.includes("-")&&(d==="value"||d==="checked"||d==="selected")&&PE(l,d,w,R,C,d!=="value")):l._isVueCE&&(/[A-Z]/.test(d)||!kn(w))?LE(l,bo(d),w,C,d):(d==="true-value"?l._trueValue=w:d==="false-value"&&(l._falseValue=w),PE(l,d,w,R))};function v_(l,d,m,w){if(w)return!!(d==="innerHTML"||d==="textContent"||d in l&&jE(d)&&dt(m));if(d==="spellcheck"||d==="draggable"||d==="translate"||d==="form"||d==="list"&&l.tagName==="INPUT"||d==="type"&&l.tagName==="TEXTAREA")return!1;if(d==="width"||d==="height"){const S=l.tagName;if(S==="IMG"||S==="VIDEO"||S==="CANVAS"||S==="SOURCE")return!1}return jE(d)&&kn(m)?!1:d in l}const S_=Yn({patchProp:y_},t_);let OE;function T_(){return OE||(OE=EL(S_))}const w_=(...l)=>{const d=T_().createApp(...l),{mount:m}=d;return d.mount=w=>{const S=E_(w);if(!S)return;const C=d._component;!dt(C)&&!C.render&&!C.template&&(C.template=S.innerHTML),S.nodeType===1&&(S.textContent="");const R=m(S,!1,x_(S));return S instanceof Element&&(S.removeAttribute("v-cloak"),S.setAttribute("data-v-app","")),R},d};function x_(l){if(l instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&l instanceof MathMLElement)return"mathml"}function E_(l){return kn(l)?document.querySelector(l):l}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ou=typeof document<"u";function uI(l){return typeof l=="object"||"displayName"in l||"props"in l||"__vccOpts"in l}function A_(l){return l.__esModule||l[Symbol.toStringTag]==="Module"||l.default&&uI(l.default)}const bt=Object.assign;function Um(l,d){const m={};for(const w in d){const S=d[w];m[w]=li(S)?S.map(l):l(S)}return m}const kl=()=>{},li=Array.isArray,aI=/#/g,I_=/&/g,M_=/\//g,C_=/=/g,k_=/\?/g,lI=/\+/g,D_=/%5B/g,R_=/%5D/g,cI=/%5E/g,P_=/%60/g,fI=/%7B/g,L_=/%7C/g,dI=/%7D/g,__=/%20/g;function xy(l){return encodeURI(""+l).replace(L_,"|").replace(D_,"[").replace(R_,"]")}function N_(l){return xy(l).replace(fI,"{").replace(dI,"}").replace(cI,"^")}function ey(l){return xy(l).replace(lI,"%2B").replace(__,"+").replace(aI,"%23").replace(I_,"%26").replace(P_,"`").replace(fI,"{").replace(dI,"}").replace(cI,"^")}function j_(l){return ey(l).replace(C_,"%3D")}function O_(l){return xy(l).replace(aI,"%23").replace(k_,"%3F")}function b_(l){return l==null?"":O_(l).replace(M_,"%2F")}function Ol(l){try{return decodeURIComponent(""+l)}catch{}return""+l}const U_=/\/$/,F_=l=>l.replace(U_,"");function Fm(l,d,m="/"){let w,S={},C="",R="";const p=d.indexOf("#");let N=d.indexOf("?");return p<N&&p>=0&&(N=-1),N>-1&&(w=d.slice(0,N),C=d.slice(N+1,p>-1?p:d.length),S=l(C)),p>-1&&(w=w||d.slice(0,p),R=d.slice(p,d.length)),w=G_(w??d,m),{fullPath:w+(C&&"?")+C+R,path:w,query:S,hash:Ol(R)}}function B_(l,d){const m=d.query?l(d.query):"";return d.path+(m&&"?")+m+(d.hash||"")}function bE(l,d){return!d||!l.toLowerCase().startsWith(d.toLowerCase())?l:l.slice(d.length)||"/"}function V_(l,d,m){const w=d.matched.length-1,S=m.matched.length-1;return w>-1&&w===S&&Vu(d.matched[w],m.matched[S])&&hI(d.params,m.params)&&l(d.query)===l(m.query)&&d.hash===m.hash}function Vu(l,d){return(l.aliasOf||l)===(d.aliasOf||d)}function hI(l,d){if(Object.keys(l).length!==Object.keys(d).length)return!1;for(const m in l)if(!H_(l[m],d[m]))return!1;return!0}function H_(l,d){return li(l)?UE(l,d):li(d)?UE(d,l):l===d}function UE(l,d){return li(d)?l.length===d.length&&l.every((m,w)=>m===d[w]):l.length===1&&l[0]===d}function G_(l,d){if(l.startsWith("/"))return l;if(!l)return d;const m=d.split("/"),w=l.split("/"),S=w[w.length-1];(S===".."||S===".")&&w.push("");let C=m.length-1,R,p;for(R=0;R<w.length;R++)if(p=w[R],p!==".")if(p==="..")C>1&&C--;else break;return m.slice(0,C).join("/")+"/"+w.slice(R).join("/")}const Po={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var bl;(function(l){l.pop="pop",l.push="push"})(bl||(bl={}));var Dl;(function(l){l.back="back",l.forward="forward",l.unknown=""})(Dl||(Dl={}));function K_(l){if(!l)if(Ou){const d=document.querySelector("base");l=d&&d.getAttribute("href")||"/",l=l.replace(/^\w+:\/\/[^\/]+/,"")}else l="/";return l[0]!=="/"&&l[0]!=="#"&&(l="/"+l),F_(l)}const W_=/^[^#]+#/;function X_(l,d){return l.replace(W_,"#")+d}function z_(l,d){const m=document.documentElement.getBoundingClientRect(),w=l.getBoundingClientRect();return{behavior:d.behavior,left:w.left-m.left-(d.left||0),top:w.top-m.top-(d.top||0)}}const Hd=()=>({left:window.scrollX,top:window.scrollY});function q_(l){let d;if("el"in l){const m=l.el,w=typeof m=="string"&&m.startsWith("#"),S=typeof m=="string"?w?document.getElementById(m.slice(1)):document.querySelector(m):m;if(!S)return;d=z_(S,l)}else d=l;"scrollBehavior"in document.documentElement.style?window.scrollTo(d):window.scrollTo(d.left!=null?d.left:window.scrollX,d.top!=null?d.top:window.scrollY)}function FE(l,d){return(history.state?history.state.position-d:-1)+l}const ty=new Map;function Y_(l,d){ty.set(l,d)}function $_(l){const d=ty.get(l);return ty.delete(l),d}let Q_=()=>location.protocol+"//"+location.host;function pI(l,d){const{pathname:m,search:w,hash:S}=d,C=l.indexOf("#");if(C>-1){let p=S.includes(l.slice(C))?l.slice(C).length:1,N=S.slice(p);return N[0]!=="/"&&(N="/"+N),bE(N,"")}return bE(m,l)+w+S}function J_(l,d,m,w){let S=[],C=[],R=null;const p=({state:$})=>{const te=pI(l,location),v=m.value,J=d.value;let nt=0;if($){if(m.value=te,d.value=$,R&&R===v){R=null;return}nt=J?$.position-J.position:0}else w(te);S.forEach(je=>{je(m.value,v,{delta:nt,type:bl.pop,direction:nt?nt>0?Dl.forward:Dl.back:Dl.unknown})})};function N(){R=m.value}function z($){S.push($);const te=()=>{const v=S.indexOf($);v>-1&&S.splice(v,1)};return C.push(te),te}function H(){const{history:$}=window;$.state&&$.replaceState(bt({},$.state,{scroll:Hd()}),"")}function G(){for(const $ of C)$();C=[],window.removeEventListener("popstate",p),window.removeEventListener("beforeunload",H)}return window.addEventListener("popstate",p),window.addEventListener("beforeunload",H,{passive:!0}),{pauseListeners:N,listen:z,destroy:G}}function BE(l,d,m,w=!1,S=!1){return{back:l,current:d,forward:m,replaced:w,position:window.history.length,scroll:S?Hd():null}}function Z_(l){const{history:d,location:m}=window,w={value:pI(l,m)},S={value:d.state};S.value||C(w.value,{back:null,current:w.value,forward:null,position:d.length-1,replaced:!0,scroll:null},!0);function C(N,z,H){const G=l.indexOf("#"),$=G>-1?(m.host&&document.querySelector("base")?l:l.slice(G))+N:Q_()+l+N;try{d[H?"replaceState":"pushState"](z,"",$),S.value=z}catch(te){console.error(te),m[H?"replace":"assign"]($)}}function R(N,z){const H=bt({},d.state,BE(S.value.back,N,S.value.forward,!0),z,{position:S.value.position});C(N,H,!0),w.value=N}function p(N,z){const H=bt({},S.value,d.state,{forward:N,scroll:Hd()});C(H.current,H,!0);const G=bt({},BE(w.value,N,null),{position:H.position+1},z);C(N,G,!1),w.value=N}return{location:w,state:S,push:p,replace:R}}function eN(l){l=K_(l);const d=Z_(l),m=J_(l,d.state,d.location,d.replace);function w(C,R=!0){R||m.pauseListeners(),history.go(C)}const S=bt({location:"",base:l,go:w,createHref:X_.bind(null,l)},d,m);return Object.defineProperty(S,"location",{enumerable:!0,get:()=>d.location.value}),Object.defineProperty(S,"state",{enumerable:!0,get:()=>d.state.value}),S}function tN(l){return typeof l=="string"||l&&typeof l=="object"}function gI(l){return typeof l=="string"||typeof l=="symbol"}const mI=Symbol("");var VE;(function(l){l[l.aborted=4]="aborted",l[l.cancelled=8]="cancelled",l[l.duplicated=16]="duplicated"})(VE||(VE={}));function Hu(l,d){return bt(new Error,{type:l,[mI]:!0},d)}function to(l,d){return l instanceof Error&&mI in l&&(d==null||!!(l.type&d))}const HE="[^/]+?",nN={sensitive:!1,strict:!1,start:!0,end:!0},rN=/[.+*?^${}()[\]/\\]/g;function iN(l,d){const m=bt({},nN,d),w=[];let S=m.start?"^":"";const C=[];for(const z of l){const H=z.length?[]:[90];m.strict&&!z.length&&(S+="/");for(let G=0;G<z.length;G++){const $=z[G];let te=40+(m.sensitive?.25:0);if($.type===0)G||(S+="/"),S+=$.value.replace(rN,"\\$&"),te+=40;else if($.type===1){const{value:v,repeatable:J,optional:nt,regexp:je}=$;C.push({name:v,repeatable:J,optional:nt});const Ue=je||HE;if(Ue!==HE){te+=10;try{new RegExp(`(${Ue})`)}catch(Be){throw new Error(`Invalid custom RegExp for param "${v}" (${Ue}): `+Be.message)}}let Qe=J?`((?:${Ue})(?:/(?:${Ue}))*)`:`(${Ue})`;G||(Qe=nt&&z.length<2?`(?:/${Qe})`:"/"+Qe),nt&&(Qe+="?"),S+=Qe,te+=20,nt&&(te+=-8),J&&(te+=-20),Ue===".*"&&(te+=-50)}H.push(te)}w.push(H)}if(m.strict&&m.end){const z=w.length-1;w[z][w[z].length-1]+=.7000000000000001}m.strict||(S+="/?"),m.end?S+="$":m.strict&&!S.endsWith("/")&&(S+="(?:/|$)");const R=new RegExp(S,m.sensitive?"":"i");function p(z){const H=z.match(R),G={};if(!H)return null;for(let $=1;$<H.length;$++){const te=H[$]||"",v=C[$-1];G[v.name]=te&&v.repeatable?te.split("/"):te}return G}function N(z){let H="",G=!1;for(const $ of l){(!G||!H.endsWith("/"))&&(H+="/"),G=!1;for(const te of $)if(te.type===0)H+=te.value;else if(te.type===1){const{value:v,repeatable:J,optional:nt}=te,je=v in z?z[v]:"";if(li(je)&&!J)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const Ue=li(je)?je.join("/"):je;if(!Ue)if(nt)$.length<2&&(H.endsWith("/")?H=H.slice(0,-1):G=!0);else throw new Error(`Missing required param "${v}"`);H+=Ue}}return H||"/"}return{re:R,score:w,keys:C,parse:p,stringify:N}}function oN(l,d){let m=0;for(;m<l.length&&m<d.length;){const w=d[m]-l[m];if(w)return w;m++}return l.length<d.length?l.length===1&&l[0]===80?-1:1:l.length>d.length?d.length===1&&d[0]===80?1:-1:0}function yI(l,d){let m=0;const w=l.score,S=d.score;for(;m<w.length&&m<S.length;){const C=oN(w[m],S[m]);if(C)return C;m++}if(Math.abs(S.length-w.length)===1){if(GE(w))return 1;if(GE(S))return-1}return S.length-w.length}function GE(l){const d=l[l.length-1];return l.length>0&&d[d.length-1]<0}const sN={type:0,value:""},uN=/[a-zA-Z0-9_]/;function aN(l){if(!l)return[[]];if(l==="/")return[[sN]];if(!l.startsWith("/"))throw new Error(`Invalid path "${l}"`);function d(te){throw new Error(`ERR (${m})/"${z}": ${te}`)}let m=0,w=m;const S=[];let C;function R(){C&&S.push(C),C=[]}let p=0,N,z="",H="";function G(){z&&(m===0?C.push({type:0,value:z}):m===1||m===2||m===3?(C.length>1&&(N==="*"||N==="+")&&d(`A repeatable param (${z}) must be alone in its segment. eg: '/:ids+.`),C.push({type:1,value:z,regexp:H,repeatable:N==="*"||N==="+",optional:N==="*"||N==="?"})):d("Invalid state to consume buffer"),z="")}function $(){z+=N}for(;p<l.length;){if(N=l[p++],N==="\\"&&m!==2){w=m,m=4;continue}switch(m){case 0:N==="/"?(z&&G(),R()):N===":"?(G(),m=1):$();break;case 4:$(),m=w;break;case 1:N==="("?m=2:uN.test(N)?$():(G(),m=0,N!=="*"&&N!=="?"&&N!=="+"&&p--);break;case 2:N===")"?H[H.length-1]=="\\"?H=H.slice(0,-1)+N:m=3:H+=N;break;case 3:G(),m=0,N!=="*"&&N!=="?"&&N!=="+"&&p--,H="";break;default:d("Unknown state");break}}return m===2&&d(`Unfinished custom RegExp for param "${z}"`),G(),R(),S}function lN(l,d,m){const w=iN(aN(l.path),m),S=bt(w,{record:l,parent:d,children:[],alias:[]});return d&&!S.record.aliasOf==!d.record.aliasOf&&d.children.push(S),S}function cN(l,d){const m=[],w=new Map;d=zE({strict:!1,end:!0,sensitive:!1},d);function S(G){return w.get(G)}function C(G,$,te){const v=!te,J=WE(G);J.aliasOf=te&&te.record;const nt=zE(d,G),je=[J];if("alias"in G){const Be=typeof G.alias=="string"?[G.alias]:G.alias;for(const Nt of Be)je.push(WE(bt({},J,{components:te?te.record.components:J.components,path:Nt,aliasOf:te?te.record:J})))}let Ue,Qe;for(const Be of je){const{path:Nt}=Be;if($&&Nt[0]!=="/"){const St=$.record.path,Gt=St[St.length-1]==="/"?"":"/";Be.path=$.record.path+(Nt&&Gt+Nt)}if(Ue=lN(Be,$,nt),te?te.alias.push(Ue):(Qe=Qe||Ue,Qe!==Ue&&Qe.alias.push(Ue),v&&G.name&&!XE(Ue)&&R(G.name)),vI(Ue)&&N(Ue),J.children){const St=J.children;for(let Gt=0;Gt<St.length;Gt++)C(St[Gt],Ue,te&&te.children[Gt])}te=te||Ue}return Qe?()=>{R(Qe)}:kl}function R(G){if(gI(G)){const $=w.get(G);$&&(w.delete(G),m.splice(m.indexOf($),1),$.children.forEach(R),$.alias.forEach(R))}else{const $=m.indexOf(G);$>-1&&(m.splice($,1),G.record.name&&w.delete(G.record.name),G.children.forEach(R),G.alias.forEach(R))}}function p(){return m}function N(G){const $=hN(G,m);m.splice($,0,G),G.record.name&&!XE(G)&&w.set(G.record.name,G)}function z(G,$){let te,v={},J,nt;if("name"in G&&G.name){if(te=w.get(G.name),!te)throw Hu(1,{location:G});nt=te.record.name,v=bt(KE($.params,te.keys.filter(Qe=>!Qe.optional).concat(te.parent?te.parent.keys.filter(Qe=>Qe.optional):[]).map(Qe=>Qe.name)),G.params&&KE(G.params,te.keys.map(Qe=>Qe.name))),J=te.stringify(v)}else if(G.path!=null)J=G.path,te=m.find(Qe=>Qe.re.test(J)),te&&(v=te.parse(J),nt=te.record.name);else{if(te=$.name?w.get($.name):m.find(Qe=>Qe.re.test($.path)),!te)throw Hu(1,{location:G,currentLocation:$});nt=te.record.name,v=bt({},$.params,G.params),J=te.stringify(v)}const je=[];let Ue=te;for(;Ue;)je.unshift(Ue.record),Ue=Ue.parent;return{name:nt,path:J,params:v,matched:je,meta:dN(je)}}l.forEach(G=>C(G));function H(){m.length=0,w.clear()}return{addRoute:C,resolve:z,removeRoute:R,clearRoutes:H,getRoutes:p,getRecordMatcher:S}}function KE(l,d){const m={};for(const w of d)w in l&&(m[w]=l[w]);return m}function WE(l){const d={path:l.path,redirect:l.redirect,name:l.name,meta:l.meta||{},aliasOf:l.aliasOf,beforeEnter:l.beforeEnter,props:fN(l),children:l.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in l?l.components||null:l.component&&{default:l.component}};return Object.defineProperty(d,"mods",{value:{}}),d}function fN(l){const d={},m=l.props||!1;if("component"in l)d.default=m;else for(const w in l.components)d[w]=typeof m=="object"?m[w]:m;return d}function XE(l){for(;l;){if(l.record.aliasOf)return!0;l=l.parent}return!1}function dN(l){return l.reduce((d,m)=>bt(d,m.meta),{})}function zE(l,d){const m={};for(const w in l)m[w]=w in d?d[w]:l[w];return m}function hN(l,d){let m=0,w=d.length;for(;m!==w;){const C=m+w>>1;yI(l,d[C])<0?w=C:m=C+1}const S=pN(l);return S&&(w=d.lastIndexOf(S,w-1)),w}function pN(l){let d=l;for(;d=d.parent;)if(vI(d)&&yI(l,d)===0)return d}function vI({record:l}){return!!(l.name||l.components&&Object.keys(l.components).length||l.redirect)}function gN(l){const d={};if(l===""||l==="?")return d;const w=(l[0]==="?"?l.slice(1):l).split("&");for(let S=0;S<w.length;++S){const C=w[S].replace(lI," "),R=C.indexOf("="),p=Ol(R<0?C:C.slice(0,R)),N=R<0?null:Ol(C.slice(R+1));if(p in d){let z=d[p];li(z)||(z=d[p]=[z]),z.push(N)}else d[p]=N}return d}function qE(l){let d="";for(let m in l){const w=l[m];if(m=j_(m),w==null){w!==void 0&&(d+=(d.length?"&":"")+m);continue}(li(w)?w.map(C=>C&&ey(C)):[w&&ey(w)]).forEach(C=>{C!==void 0&&(d+=(d.length?"&":"")+m,C!=null&&(d+="="+C))})}return d}function mN(l){const d={};for(const m in l){const w=l[m];w!==void 0&&(d[m]=li(w)?w.map(S=>S==null?null:""+S):w==null?w:""+w)}return d}const yN=Symbol(""),YE=Symbol(""),Ey=Symbol(""),SI=Symbol(""),ny=Symbol("");function yl(){let l=[];function d(w){return l.push(w),()=>{const S=l.indexOf(w);S>-1&&l.splice(S,1)}}function m(){l=[]}return{add:d,list:()=>l.slice(),reset:m}}function No(l,d,m,w,S,C=R=>R()){const R=w&&(w.enterCallbacks[S]=w.enterCallbacks[S]||[]);return()=>new Promise((p,N)=>{const z=$=>{$===!1?N(Hu(4,{from:m,to:d})):$ instanceof Error?N($):tN($)?N(Hu(2,{from:d,to:$})):(R&&w.enterCallbacks[S]===R&&typeof $=="function"&&R.push($),p())},H=C(()=>l.call(w&&w.instances[S],d,m,z));let G=Promise.resolve(H);l.length<3&&(G=G.then(z)),G.catch($=>N($))})}function Bm(l,d,m,w,S=C=>C()){const C=[];for(const R of l)for(const p in R.components){let N=R.components[p];if(!(d!=="beforeRouteEnter"&&!R.instances[p]))if(uI(N)){const H=(N.__vccOpts||N)[d];H&&C.push(No(H,m,w,R,p,S))}else{let z=N();C.push(()=>z.then(H=>{if(!H)throw new Error(`Couldn't resolve component "${p}" at "${R.path}"`);const G=A_(H)?H.default:H;R.mods[p]=H,R.components[p]=G;const te=(G.__vccOpts||G)[d];return te&&No(te,m,w,R,p,S)()}))}}return C}function $E(l){const d=io(Ey),m=io(SI),w=si(()=>{const N=As(l.to);return d.resolve(N)}),S=si(()=>{const{matched:N}=w.value,{length:z}=N,H=N[z-1],G=m.matched;if(!H||!G.length)return-1;const $=G.findIndex(Vu.bind(null,H));if($>-1)return $;const te=QE(N[z-2]);return z>1&&QE(H)===te&&G[G.length-1].path!==te?G.findIndex(Vu.bind(null,N[z-2])):$}),C=si(()=>S.value>-1&&xN(m.params,w.value.params)),R=si(()=>S.value>-1&&S.value===m.matched.length-1&&hI(m.params,w.value.params));function p(N={}){if(wN(N)){const z=d[As(l.replace)?"replace":"push"](As(l.to)).catch(kl);return l.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>z),z}return Promise.resolve()}return{route:w,href:si(()=>w.value.href),isActive:C,isExactActive:R,navigate:p}}function vN(l){return l.length===1?l[0]:l}const SN=RA({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:$E,setup(l,{slots:d}){const m=bd($E(l)),{options:w}=io(Ey),S=si(()=>({[JE(l.activeClass,w.linkActiveClass,"router-link-active")]:m.isActive,[JE(l.exactActiveClass,w.linkExactActiveClass,"router-link-exact-active")]:m.isExactActive}));return()=>{const C=d.default&&vN(d.default(m));return l.custom?C:oI("a",{"aria-current":m.isExactActive?l.ariaCurrentValue:null,href:m.href,onClick:m.navigate,class:S.value},C)}}}),TN=SN;function wN(l){if(!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)&&!l.defaultPrevented&&!(l.button!==void 0&&l.button!==0)){if(l.currentTarget&&l.currentTarget.getAttribute){const d=l.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(d))return}return l.preventDefault&&l.preventDefault(),!0}}function xN(l,d){for(const m in d){const w=d[m],S=l[m];if(typeof w=="string"){if(w!==S)return!1}else if(!li(S)||S.length!==w.length||w.some((C,R)=>C!==S[R]))return!1}return!0}function QE(l){return l?l.aliasOf?l.aliasOf.path:l.path:""}const JE=(l,d,m)=>l??d??m,EN=RA({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(l,{attrs:d,slots:m}){const w=io(ny),S=si(()=>l.route||w.value),C=io(YE,0),R=si(()=>{let z=As(C);const{matched:H}=S.value;let G;for(;(G=H[z])&&!G.components;)z++;return z}),p=si(()=>S.value.matched[R.value]);wd(YE,si(()=>R.value+1)),wd(yN,p),wd(ny,S);const N=zm();return xd(()=>[N.value,p.value,l.name],([z,H,G],[$,te,v])=>{H&&(H.instances[G]=z,te&&te!==H&&z&&z===$&&(H.leaveGuards.size||(H.leaveGuards=te.leaveGuards),H.updateGuards.size||(H.updateGuards=te.updateGuards))),z&&H&&(!te||!Vu(H,te)||!$)&&(H.enterCallbacks[G]||[]).forEach(J=>J(z))},{flush:"post"}),()=>{const z=S.value,H=l.name,G=p.value,$=G&&G.components[H];if(!$)return ZE(m.default,{Component:$,route:z});const te=G.props[H],v=te?te===!0?z.params:typeof te=="function"?te(z):te:null,nt=oI($,bt({},v,d,{onVnodeUnmounted:je=>{je.component.isUnmounted&&(G.instances[H]=null)},ref:N}));return ZE(m.default,{Component:nt,route:z})||nt}}});function ZE(l,d){if(!l)return null;const m=l(d);return m.length===1?m[0]:m}const TI=EN;function AN(l){const d=cN(l.routes,l),m=l.parseQuery||gN,w=l.stringifyQuery||qE,S=l.history,C=yl(),R=yl(),p=yl(),N=U3(Po);let z=Po;Ou&&l.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const H=Um.bind(null,oe=>""+oe),G=Um.bind(null,b_),$=Um.bind(null,Ol);function te(oe,Ie){let Se,Ge;return gI(oe)?(Se=d.getRecordMatcher(oe),Ge=Ie):Ge=oe,d.addRoute(Ge,Se)}function v(oe){const Ie=d.getRecordMatcher(oe);Ie&&d.removeRoute(Ie)}function J(){return d.getRoutes().map(oe=>oe.record)}function nt(oe){return!!d.getRecordMatcher(oe)}function je(oe,Ie){if(Ie=bt({},Ie||N.value),typeof oe=="string"){const Z=Fm(m,oe,Ie.path),ie=d.resolve({path:Z.path},Ie),le=S.createHref(Z.fullPath);return bt(Z,ie,{params:$(ie.params),hash:Ol(Z.hash),redirectedFrom:void 0,href:le})}let Se;if(oe.path!=null)Se=bt({},oe,{path:Fm(m,oe.path,Ie.path).path});else{const Z=bt({},oe.params);for(const ie in Z)Z[ie]==null&&delete Z[ie];Se=bt({},oe,{params:G(Z)}),Ie.params=G(Ie.params)}const Ge=d.resolve(Se,Ie),Bt=oe.hash||"";Ge.params=H($(Ge.params));const D=B_(w,bt({},oe,{hash:N_(Bt),path:Ge.path})),V=S.createHref(D);return bt({fullPath:D,hash:Bt,query:w===qE?mN(oe.query):oe.query||{}},Ge,{redirectedFrom:void 0,href:V})}function Ue(oe){return typeof oe=="string"?Fm(m,oe,N.value.path):bt({},oe)}function Qe(oe,Ie){if(z!==oe)return Hu(8,{from:Ie,to:oe})}function Be(oe){return Gt(oe)}function Nt(oe){return Be(bt(Ue(oe),{replace:!0}))}function St(oe){const Ie=oe.matched[oe.matched.length-1];if(Ie&&Ie.redirect){const{redirect:Se}=Ie;let Ge=typeof Se=="function"?Se(oe):Se;return typeof Ge=="string"&&(Ge=Ge.includes("?")||Ge.includes("#")?Ge=Ue(Ge):{path:Ge},Ge.params={}),bt({query:oe.query,hash:oe.hash,params:Ge.path!=null?{}:oe.params},Ge)}}function Gt(oe,Ie){const Se=z=je(oe),Ge=N.value,Bt=oe.state,D=oe.force,V=oe.replace===!0,Z=St(Se);if(Z)return Gt(bt(Ue(Z),{state:typeof Z=="object"?bt({},Bt,Z.state):Bt,force:D,replace:V}),Ie||Se);const ie=Se;ie.redirectedFrom=Ie;let le;return!D&&V_(w,Ge,Se)&&(le=Hu(16,{to:ie,from:Ge}),jn(Ge,Ge,!0,!1)),(le?Promise.resolve(le):I(ie,Ge)).catch(se=>to(se)?to(se,2)?se:Br(se):kt(se,ie,Ge)).then(se=>{if(se){if(to(se,2))return Gt(bt({replace:V},Ue(se.to),{state:typeof se.to=="object"?bt({},Bt,se.to.state):Bt,force:D}),Ie||ie)}else se=ye(ie,Ge,!0,V,Bt);return ae(ie,Ge,se),se})}function cr(oe,Ie){const Se=Qe(oe,Ie);return Se?Promise.reject(Se):Promise.resolve()}function Fr(oe){const Ie=b.values().next().value;return Ie&&typeof Ie.runWithContext=="function"?Ie.runWithContext(oe):oe()}function I(oe,Ie){let Se;const[Ge,Bt,D]=IN(oe,Ie);Se=Bm(Ge.reverse(),"beforeRouteLeave",oe,Ie);for(const Z of Ge)Z.leaveGuards.forEach(ie=>{Se.push(No(ie,oe,Ie))});const V=cr.bind(null,oe,Ie);return Se.push(V),tn(Se).then(()=>{Se=[];for(const Z of C.list())Se.push(No(Z,oe,Ie));return Se.push(V),tn(Se)}).then(()=>{Se=Bm(Bt,"beforeRouteUpdate",oe,Ie);for(const Z of Bt)Z.updateGuards.forEach(ie=>{Se.push(No(ie,oe,Ie))});return Se.push(V),tn(Se)}).then(()=>{Se=[];for(const Z of D)if(Z.beforeEnter)if(li(Z.beforeEnter))for(const ie of Z.beforeEnter)Se.push(No(ie,oe,Ie));else Se.push(No(Z.beforeEnter,oe,Ie));return Se.push(V),tn(Se)}).then(()=>(oe.matched.forEach(Z=>Z.enterCallbacks={}),Se=Bm(D,"beforeRouteEnter",oe,Ie,Fr),Se.push(V),tn(Se))).then(()=>{Se=[];for(const Z of R.list())Se.push(No(Z,oe,Ie));return Se.push(V),tn(Se)}).catch(Z=>to(Z,8)?Z:Promise.reject(Z))}function ae(oe,Ie,Se){p.list().forEach(Ge=>Fr(()=>Ge(oe,Ie,Se)))}function ye(oe,Ie,Se,Ge,Bt){const D=Qe(oe,Ie);if(D)return D;const V=Ie===Po,Z=Ou?history.state:{};Se&&(Ge||V?S.replace(oe.fullPath,bt({scroll:V&&Z&&Z.scroll},Bt)):S.push(oe.fullPath,Bt)),N.value=oe,jn(oe,Ie,Se,V),Br()}let hn;function Oe(){hn||(hn=S.listen((oe,Ie,Se)=>{if(!en.listening)return;const Ge=je(oe),Bt=St(Ge);if(Bt){Gt(bt(Bt,{replace:!0,force:!0}),Ge).catch(kl);return}z=Ge;const D=N.value;Ou&&Y_(FE(D.fullPath,Se.delta),Hd()),I(Ge,D).catch(V=>to(V,12)?V:to(V,2)?(Gt(bt(Ue(V.to),{force:!0}),Ge).then(Z=>{to(Z,20)&&!Se.delta&&Se.type===bl.pop&&S.go(-1,!1)}).catch(kl),Promise.reject()):(Se.delta&&S.go(-Se.delta,!1),kt(V,Ge,D))).then(V=>{V=V||ye(Ge,D,!1),V&&(Se.delta&&!to(V,8)?S.go(-Se.delta,!1):Se.type===bl.pop&&to(V,20)&&S.go(-1,!1)),ae(Ge,D,V)}).catch(kl)}))}let ve=yl(),Ct=yl(),ut;function kt(oe,Ie,Se){Br(oe);const Ge=Ct.list();return Ge.length?Ge.forEach(Bt=>Bt(oe,Ie,Se)):console.error(oe),Promise.reject(oe)}function Qr(){return ut&&N.value!==Po?Promise.resolve():new Promise((oe,Ie)=>{ve.add([oe,Ie])})}function Br(oe){return ut||(ut=!oe,Oe(),ve.list().forEach(([Ie,Se])=>oe?Se(oe):Ie()),ve.reset()),oe}function jn(oe,Ie,Se,Ge){const{scrollBehavior:Bt}=l;if(!Ou||!Bt)return Promise.resolve();const D=!Se&&$_(FE(oe.fullPath,0))||(Ge||!Se)&&history.state&&history.state.scroll||null;return IA().then(()=>Bt(oe,Ie,D)).then(V=>V&&q_(V)).catch(V=>kt(V,oe,Ie))}const On=oe=>S.go(oe);let so;const b=new Set,en={currentRoute:N,listening:!0,addRoute:te,removeRoute:v,clearRoutes:d.clearRoutes,hasRoute:nt,getRoutes:J,resolve:je,options:l,push:Be,replace:Nt,go:On,back:()=>On(-1),forward:()=>On(1),beforeEach:C.add,beforeResolve:R.add,afterEach:p.add,onError:Ct.add,isReady:Qr,install(oe){const Ie=this;oe.component("RouterLink",TN),oe.component("RouterView",TI),oe.config.globalProperties.$router=Ie,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>As(N)}),Ou&&!so&&N.value===Po&&(so=!0,Be(S.location).catch(Bt=>{}));const Se={};for(const Bt in Po)Object.defineProperty(Se,Bt,{get:()=>N.value[Bt],enumerable:!0});oe.provide(Ey,Ie),oe.provide(SI,TA(Se)),oe.provide(ny,N);const Ge=oe.unmount;b.add(oe),oe.unmount=function(){b.delete(oe),b.size<1&&(z=Po,hn&&hn(),hn=null,N.value=Po,so=!1,ut=!1),Ge()}}};function tn(oe){return oe.reduce((Ie,Se)=>Ie.then(()=>Fr(Se)),Promise.resolve())}return en}function IN(l,d){const m=[],w=[],S=[],C=Math.max(d.matched.length,l.matched.length);for(let R=0;R<C;R++){const p=d.matched[R];p&&(l.matched.find(z=>Vu(z,p))?w.push(p):m.push(p));const N=l.matched[R];N&&(d.matched.find(z=>Vu(z,N))||S.push(N))}return[m,w,S]}const MN={__name:"App",setup(l){return(d,m)=>(eI(),FL(As(TI)))}};var CN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kN(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Vm={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var eA;function DN(){return eA||(eA=1,function(l){(function(){var d=typeof window<"u"?window:CN,m={};(function(S,C,R){var p;function N(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var z=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function H(e){e=[typeof globalThis=="object"&&globalThis,e,typeof S=="object"&&S,typeof self=="object"&&self,typeof C=="object"&&C];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var G=H(this);function $(e,t){if(t)e:{var n=G;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&z(n,e,{configurable:!0,writable:!0,value:t})}}$("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(o||"")+"_"+i++,o)}function n(o,s){this.g=o,z(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return t}),$("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=G[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&z(r.prototype,e,{configurable:!0,writable:!0,value:function(){return te(N(this))}})}return e});function te(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function v(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:N(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function J(e){if(!(e instanceof Array)){e=v(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var nt=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},je;if(typeof Object.setPrototypeOf=="function")je=Object.setPrototypeOf;else{var Ue;e:{var Qe={a:!0},Be={};try{Be.__proto__=Qe,Ue=Be.a;break e}catch{}Ue=!1}je=Ue?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Nt=je;function St(e,t){if(e.prototype=nt(t.prototype),e.prototype.constructor=e,Nt)Nt(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Vk=t.prototype}function Gt(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function cr(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}Gt.prototype.u=function(e){this.h=e};function Fr(e,t){e.i={Pg:t,$g:!0},e.g=e.m||e.j}Gt.prototype.return=function(e){this.i={return:e},this.g=this.j};function I(e,t,n){return e.g=n,{value:t}}Gt.prototype.s=function(e){this.g=e};function ae(e){e.g=0}function ye(e,t,n){e.m=t,n!=null&&(e.j=n)}function hn(e,t){e.m=0,e.j=t||0}function Oe(e,t,n){e.g=t,e.m=n||0}function ve(e,t){return e.m=t||0,t=e.i.Pg,e.i=null,t}function Ct(e){e.A=[e.i],e.m=0,e.j=0}function ut(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.$g?e.g=e.m||e.j:n.s!=null&&e.j<n.s?(e.g=n.s,e.i=null):e.g=e.j:e.g=t}function kt(e){this.g=new Gt,this.h=e}function Qr(e,t){cr(e.g);var n=e.g.l;return n?Br(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),jn(e))}function Br(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var o=i.value}catch(s){return e.g.l=null,Fr(e.g,s),jn(e)}return e.g.l=null,r.call(e.g,o),jn(e)}function jn(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Fr(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.$g)throw t.Pg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function On(e){this.next=function(t){return cr(e.g),e.g.l?t=Br(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=jn(e)),t},this.throw=function(t){return cr(e.g),e.g.l?t=Br(e,e.g.l.throw,t,e.g.u):(Fr(e.g,t),t=jn(e)),t},this.return=function(t){return Qr(e,t)},this[Symbol.iterator]=function(){return this}}function so(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,i){function o(s){s.done?r(s.value):Promise.resolve(s.value).then(t,n).then(o,i)}o(e.next())})}function b(e){return so(new On(new kt(e)))}function en(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}$("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.o=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function r(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var i=G.setTimeout;n.prototype.i=function(s){i(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(c){this.j(c)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(c){return function(f){a||(a=!0,c.call(u,f))}}var u=this,a=!1;return{resolve:s(this.F),reject:s(this.l)}},t.prototype.F=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.H(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.C(s):this.m(s)}},t.prototype.C=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.I(u,s):this.m(s)},t.prototype.l=function(s){this.u(2,s)},t.prototype.m=function(s){this.u(1,s)},t.prototype.u=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var s=this;i(function(){if(s.B()){var u=G.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var s=G.CustomEvent,u=G.Event,a=G.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=G.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.A=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.H=function(s){var u=this.j();s.Vd(u.resolve,u.reject)},t.prototype.I=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(c){a.reject(c)}},t.prototype.then=function(s,u){function a(g,y){return typeof g=="function"?function(T){try{c(g(T))}catch(E){f(E)}}:y}var c,f,h=new t(function(g,y){c=g,f=y});return this.Vd(a(s,c),a(u,f)),h},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Vd=function(s,u){function a(){switch(c.h){case 1:s(c.i);break;case 2:u(c.i);break;default:throw Error("Unexpected state: "+c.h)}}var c=this;this.g==null?o.h(a):this.g.push(a),this.o=!0},t.resolve=r,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var c=v(s),f=c.next();!f.done;f=c.next())r(f.value).Vd(u,a)})},t.all=function(s){var u=v(s),a=u.next();return a.done?r([]):new t(function(c,f){function h(T){return function(E){g[T]=E,y--,y==0&&c(g)}}var g=[],y=0;do g.push(void 0),y++,r(a.value).Vd(h(g.length-1),f),a=u.next();while(!a.done)})},t});function tn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}$("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=v(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}function n(){}function r(a){var c=typeof a;return c==="object"&&a!==null||c==="function"}function i(a){if(!tn(a,s)){var c=new n;z(a,s,{value:c})}}function o(a){var c=Object[a];c&&(Object[a]=function(f){return f instanceof n?f:(Object.isExtensible(f)&&i(f),c(f))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),f=new e([[a,2],[c,3]]);return f.get(a)!=2||f.get(c)!=3?!1:(f.delete(a),f.set(c,4),!f.has(a)&&f.get(c)==4)}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,c){if(!r(a))throw Error("Invalid WeakMap key");if(i(a),!tn(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=c,this},t.prototype.get=function(a){return r(a)&&tn(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return r(a)&&tn(a,s)&&tn(a[s],this.g)},t.prototype.delete=function(a){return r(a)&&tn(a,s)&&tn(a[s],this.g)?delete a[s][this.g]:!1},t}),$("Map",function(e){function t(){var u={};return u.Yb=u.next=u.head=u}function n(u,a){var c=u[1];return te(function(){if(c){for(;c.head!=u[1];)c=c.Yb;for(;c.next!=c.head;)return c=c.next,{done:!1,value:a(c)};c=null}return{done:!0,value:void 0}})}function r(u,a){var c=a&&typeof a;c=="object"||c=="function"?o.has(a)?c=o.get(a):(c=""+ ++s,o.set(a,c)):c="p_"+a;var f=u[0][c];if(f&&tn(u[0],c))for(u=0;u<f.length;u++){var h=f[u];if(a!==a&&h.key!==h.key||a===h.key)return{id:c,list:f,index:u,entry:h}}return{id:c,list:f,index:-1,entry:void 0}}function i(u){if(this[0]={},this[1]=t(),this.size=0,u){u=v(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(v([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var c=a.entries(),f=c.next();return f.done||f.value[0]!=u||f.value[1]!="s"?!1:(f=c.next(),!(f.done||f.value[0].x!=4||f.value[1]!="t"||!c.next().done))}catch{return!1}}())return e;var o=new WeakMap;i.prototype.set=function(u,a){u=u===0?0:u;var c=r(this,u);return c.list||(c.list=this[0][c.id]=[]),c.entry?c.entry.value=a:(c.entry={next:this[1],Yb:this[1].Yb,head:this[1],key:u,value:a},c.list.push(c.entry),this[1].Yb.next=c.entry,this[1].Yb=c.entry,this.size++),this},i.prototype.delete=function(u){return u=r(this,u),u.entry&&u.list?(u.list.splice(u.index,1),u.list.length||delete this[0][u.id],u.entry.Yb.next=u.entry.next,u.entry.next.Yb=u.entry.Yb,u.entry.head=null,this.size--,!0):!1},i.prototype.clear=function(){this[0]={},this[1]=this[1].Yb=t(),this.size=0},i.prototype.has=function(u){return!!r(this,u).entry},i.prototype.get=function(u){return(u=r(this,u).entry)&&u.value},i.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},i.prototype.keys=function(){return n(this,function(u){return u.key})},i.prototype.values=function(){return n(this,function(u){return u.value})},i.prototype.forEach=function(u,a){for(var c=this.entries(),f;!(f=c.next()).done;)f=f.value,u.call(a,f[1],f[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),$("Set",function(e){function t(n){if(this.g=new Map,n){n=v(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(v([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var i=r.entries(),o=i.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=i.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:i.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var i=this;this.g.forEach(function(o){return n.call(r,o,o,i)})},t)});function oe(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}$("Array.prototype.values",function(e){return e||function(){return oe(this,function(t,n){return n})}}),$("Array.from",function(e){return e||function(t,n,r){n=n??function(u){return u};var i=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)i.push(n.call(r,o.value,s++))}else for(o=t.length,s=0;s<o;s++)i.push(n.call(r,t[s],s));return i}}),$("Array.prototype.keys",function(e){return e||function(){return oe(this,function(t){return t})}}),$("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),$("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var i=r.length;for(n=n||0,0>n&&(n=Math.max(n+i,0));n<i;n++){var o=r[n];if(o===t||Object.is(o,t))return!0}return!1}});function Ie(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}$("String.prototype.includes",function(e){return e||function(t,n){return Ie(this,t,"includes").indexOf(t,n||0)!==-1}}),$("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var i=Number(arguments[r]);if(0>i||1114111<i||i!==Math.floor(i))throw new RangeError("invalid_code_point "+i);65535>=i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(i>>>10&1023|55296),n+=String.fromCharCode(i&1023|56320))}return n}});function Se(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{Yg:i,v:o}}return{Yg:-1,v:void 0}}$("Array.prototype.findIndex",function(e){return e||function(t,n){return Se(this,t,n).Yg}}),$("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=v(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),i=new e([n]);return!i.has(n)||i.has(r)?!1:(i.delete(n),i.add(r),!i.has(n)&&i.has(r))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),$("Array.prototype.find",function(e){return e||function(t,n){return Se(this,t,n).v}}),$("String.prototype.startsWith",function(e){return e||function(t,n){var r=Ie(this,t,"startsWith"),i=r.length,o=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var s=0;s<o&&n<i;)if(r[n++]!=t[s++])return!1;return s>=o}}),$("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)tn(t,r)&&n.push([r,t[r]]);return n}});var Ge=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)tn(r,i)&&(e[i]=r[i])}return e};$("Object.assign",function(e){return e||Ge}),$("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),$("Array.prototype.entries",function(e){return e||function(){return oe(this,function(t,n){return[t,n]})}}),$("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),$("String.prototype.repeat",function(e){return e||function(t){var n=Ie(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),$("Number.EPSILON",function(){return Math.pow(2,-52)}),$("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),$("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),$("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)tn(t,r)&&n.push(t[r]);return n}}),$("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),$("String.prototype.endsWith",function(e){return e||function(t,n){var r=Ie(this,t,"endsWith");n===void 0&&(n=r.length),n=Math.max(0,Math.min(n|0,r.length));for(var i=t.length;0<i&&0<n;)if(r[--n]!=t[--i])return!1;return 0>=i}}),$("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var Bt=this||self;function D(e,t){e=e.split(".");var n=Bt;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function V(){}function Z(){}function ie(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}ie.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function le(e){return e.h/(1-Math.pow(e.g,e.i))}function se(){this.h=new ie(2),this.j=new ie(5),this.g=0,this.i=128e3,this.l=16e3}se.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},se.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},se.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(le(this.h),le(this.j))};function Te(){}function he(){}function re(){}function fe(e){var t=en.apply(1,arguments);rt.has(e)||(rt.add(e),re.apply(Te,J(t)))}function Ze(){}function Pe(){}function Ye(){}var rt=new Set;S.console&&(new Map().set(1,function(){return console.error.apply(console,J(en.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,J(en.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,J(en.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,J(en.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,J(en.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,J(en.apply(0,arguments)))}),re=function(){return console.warn.apply(console,J(en.apply(0,arguments)))},he=function(){console.error.apply(console,J(en.apply(0,arguments)))});function ht(){this.g=new Map}p=ht.prototype,p.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},p.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},p.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(r){return r!=t});this.g.set(e,n),n.length||this.g.delete(e)}},p.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},p.size=function(){return this.g.size},p.keys=function(){return Array.from(this.g.keys())};function _e(){this.g=new ht}p=_e.prototype,p.release=function(){this.Ra(),this.g=null},p.D=function(e,t,n,r){this.g&&(e=new Dt(e,t,n,r),this.g.push(t,e))},p.qa=function(e,t,n,r){function i(s){o.Ka(e,t,i),n(s)}var o=this;this.D(e,t,i,r)},p.Ka=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=v(r);for(var i=r.next();!i.done;i=r.next())i=i.value,i.target!=e||n!=i.listener&&n||(i.Ka(),this.g.remove(t,i))}},p.Ra=function(){if(this.g){for(var e=[],t=v(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,J(n.value));for(e=v(e),t=e.next();!t.done;t=e.next())t.value.Ka();this.g.g.clear()}},D("shaka.util.EventManager",_e),_e.prototype.removeAll=_e.prototype.Ra,_e.prototype.unlisten=_e.prototype.Ka,_e.prototype.listenOnce=_e.prototype.qa,_e.prototype.listen=_e.prototype.D,_e.prototype.release=_e.prototype.release;function Dt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=$n(e,r),this.target.addEventListener(t,n,this.g)}Dt.prototype.Ka=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function $n(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),bn(e)?t:t.capture||!1}function bn(e){var t=xr;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch{t=!1}xr=t}return t||!1}var xr=void 0;D("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function fr(e,t){this.g=e,this.h=t}fr.prototype.toString=function(){return"v"+this.g+"."+this.h};function tt(e,t){var n=new fr(5,0),r=Er,i=r.g,o=n.h-i.h;(0<(n.g-i.g||o)?r.i:r.h)(r.g,n,e,t)}function Bl(e,t,n,r){re([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Qn(e,t,n,r){he([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Er=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Vl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Vt(e){var t;e instanceof Vt?(Hl(this,e.Kb),this.Hc=e.Hc,Gl(this,e.nb),Gd(this,e.$c),this.ab=e.ab,Bo(this,e.g.clone()),this.qc=e.qc):e&&(t=String(e).match(Vl))?(Hl(this,t[1]||"",!0),this.Hc=Cs(t[2]||""),Gl(this,t[3]||"",!0),Gd(this,t[4]),this.ab=Cs(t[5]||"",!0),Bo(this,t[6]||"",!0),this.qc=Cs(t[7]||"")):this.g=new ks(null)}p=Vt.prototype,p.Kb="",p.Hc="",p.nb="",p.$c=null,p.ab="",p.qc="",p.toString=function(){var e=[],t=this.Kb;if(t&&e.push(Ku(t,Ay,!0),":"),t=this.nb){e.push("//");var n=this.Hc;n&&e.push(Ku(n,Ay,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.$c,t!=null&&e.push(":",String(t))}return(t=this.ab)&&(this.nb&&t.charAt(0)!="/"&&e.push("/"),e.push(Ku(t,t.charAt(0)=="/"?AI:EI,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.qc)&&e.push("#",Ku(t,MI)),e.join("")},p.resolve=function(e){var t=this.clone();t.Kb==="data"&&(t=new Vt);var n=!!e.Kb;n?Hl(t,e.Kb):n=!!e.Hc,n?t.Hc=e.Hc:n=!!e.nb,n?Gl(t,e.nb):n=e.$c!=null;var r=e.ab;if(n)Gd(t,e.$c);else if(n=!!e.ab){if(r.charAt(0)!="/")if(this.nb&&!this.ab)r="/"+r;else{var i=t.ab.lastIndexOf("/");i!=-1&&(r=t.ab.substr(0,i+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){i=r.lastIndexOf("/",0)==0,r=r.split("/");for(var o=[],s=0;s<r.length;){var u=r[s++];u=="."?i&&s==r.length&&o.push(""):u==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),i&&s==r.length&&o.push("")):(o.push(u),i=!0)}r=o.join("/")}}return n?t.ab=r:n=e.g.toString()!=="",n?Bo(t,e.g.clone()):n=!!e.qc,n&&(t.qc=e.qc),t},p.clone=function(){return new Vt(this)};function Hl(e,t,n){e.Kb=n?Cs(t,!0):t,e.Kb&&(e.Kb=e.Kb.replace(/:$/,""))}function Gl(e,t,n){e.nb=n?Cs(t,!0):t}function Gd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.$c=t}else e.$c=null}function Bo(e,t,n){t instanceof ks?e.g=t:(n||(t=Ku(t,II)),e.g=new ks(t))}function Cs(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Ku(e,t,n){return e!=null?(e=encodeURI(e).replace(t,xI),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xI(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Ay=/[#\/\?@]/g,EI=/[#\?:]/g,AI=/[#\?]/g,II=/[#\?@]/g,MI=/#/g;function ks(e){this.g=e||null}function Kl(e){if(!e.Va&&(e.Va=new Map,e.kd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),i=i||"",e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}p=ks.prototype,p.Va=null,p.kd=null;function Iy(e){return Kl(e),e.kd}p.add=function(e,t){Kl(this),this.g=null;var n=this.Va.has(e)?this.Va.get(e):null;return n||this.Va.set(e,n=[]),n.push(t),this.kd++,this},p.set=function(e,t){return Kl(this),this.g=null,this.Va.has(e)?this.Va.set(e,[t]):this.add(e,t),this},p.get=function(e){return Kl(this),this.Va.get(e)||[]},p.toString=function(){if(this.g)return this.g;if(!this.Va||!this.Va.size)return"";for(var e=[],t=v(this.Va.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=encodeURIComponent(r),r=this.Va.get(r);for(var i=0;i<r.length;i++){var o=n;r[i]!==""&&(o+="="+encodeURIComponent(r[i])),e.push(o)}}return this.g=e.join("&")},p.clone=function(){var e=new ks;if(e.g=this.g,this.Va){for(var t=new Map,n=v(this.Va),r=n.next();!r.done;r=n.next()){var i=v(r.value);r=i.next().value,i=i.next().value,t.set(r,i.concat())}e.Va=t,e.kd=this.kd}return e};function Ds(){}function Mi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Le(e);t=Le(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Ar(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function Le(e,t,n){return n=n===void 0?1/0:n,Kd(e,t===void 0?0:t,n,Uint8Array)}function My(e,t,n){return n=n===void 0?1/0:n,Kd(e,t===void 0?0:t,n,Uint16Array)}function Un(e,t,n){return n=n===void 0?1/0:n,Kd(e,t===void 0?0:t,n,DataView)}function Kd(e,t,n,r){var i=ArrayBuffer.isView(e)?e.buffer:e,o=1;"BYTES_PER_ELEMENT"in r&&(o=r.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,s))),new r(i,e,Math.floor(Math.min(e+Math.max(n,0),s))-e)}D("shaka.util.BufferUtils",Ds),Ds.toDataView=Un,Ds.toUint16=My,Ds.toUint8=Le,Ds.toArrayBuffer=Ar,Ds.equal=Mi;function j(e,t,n){var r=en.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(i){this.stack=i.stack}}j.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},D("shaka.util.Error",j),j.Severity={RECOVERABLE:1,CRITICAL:2},j.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},j.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function Wu(e){this.h=e,this.g=void 0}Wu.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function Cy(e,t){return e.length&&t.length&&e!==t?0<Wd(e,t).length:!0}function Wd(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=v(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i=v(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.keySystem==o.keySystem){i=new Map;for(var s=v((r.initData||[]).concat(o.initData||[])),u=s.next();!u.done;u=s.next())u=u.value,i.set(u.keyId,u);i=Array.from(i.values()),s=r.keyIds&&o.keyIds?new Set([].concat(J(r.keyIds),J(o.keyIds))):r.keyIds||o.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,serverCertificateUri:r.serverCertificateUri||o.serverCertificateUri,initData:i,keyIds:s});break}}return n}function Xd(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Wl(e){return e?!!e.match(/^com\.apple\.fps/):!1}var Xl=new Wu(function(){return Ar(new Uint8Array([0]))}),Rs=new Map;function Xu(e){this.h=e,this.g=null}Xu.prototype.da=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){S.clearTimeout(r),n=!1},r=S.setTimeout(function(){n&&t.h()},1e3*e),this},Xu.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ze(e){this.h=e,this.g=null}ze.prototype.sb=function(){return this.stop(),this.h(),this},ze.prototype.da=function(e){var t=this;return this.stop(),this.g=new Xu(function(){t.h()}).da(e),this},ze.prototype.ua=function(e){var t=this;return this.stop(),this.g=new Xu(function(){t.g.da(e),t.h()}).da(e),this},ze.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},D("shaka.util.Timer",ze),ze.prototype.stop=ze.prototype.stop,ze.prototype.tickEvery=ze.prototype.ua,ze.prototype.tickAfter=ze.prototype.da,ze.prototype.tickNow=ze.prototype.sb;function ci(){var e=S.ManagedMediaSource||S.MediaSource;return!!(e&&e.isTypeSupported)}function zu(e){return Ry().canPlayType(e)!=""}function Ps(){return!!navigator.userAgent.match(/Edge?\//)}function Jr(){return Xt("Xbox One")}function fi(){return Xt("Tizen")}function Ci(){return Xt("Tizen 3")}function ki(){return Xt("Web0S")}function zl(){return ki()&&ky()===38}function Vr(){return Xt("CrKey")&&!Xt("VIZIO SmartCast")}function ky(){if(!Xt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function pn(){return _s()&&((navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="macos":navigator.platform?navigator.platform.toLowerCase().includes("mac"):!1)||(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?!0:_s()&&1<navigator.maxTouchPoints))}function Ls(){return Xt("PlayStation 5")}function Zr(){return Xt("PlayStation 4")}function ql(){return Xt("Hisense")||Xt("VIDAA")}function Dy(){if(!pn()&&(!_s()||pn()))return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yl(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}function uo(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":Xt("Android")}function zd(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="fuchsia":Xt("Fuchsia")}function qd(){return!!(fi()||ki()||Jr()||Zr()||Ls()||Vr()||ql()||Xt("VIZIO SmartCast")||_s()&&!pn())}function Xt(e){return(navigator.userAgent||"").includes(e)}function _s(){return(navigator.vendor||"").includes("Apple")}function Ry(){return Ns||(Yd||(Yd=new ze(function(){Ns=null})),(Ns=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ns=document.createElement("video")),Yd.da(1),Ns)}function CI(){if(Ci()||Xt("Tizen 2")||zl()||Zr()||Ls())return!1;var e=Dy();return!(_s()&&!pn()&&e!=null&&15>e)}function Py(){var e,t,n,r,i,o,s,u,a,c,f,h,g,y,T,E,x;return b(function(A){switch(A.g){case 1:if(e={width:1/0,height:1/0},Vr()){if(y=S.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,ye(A,14),!(T=y)){A.s(16);break}return I(A,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),17)}if(fi()){t=S.devicePixelRatio,e.width=1920<S.screen.width*t?3840:1920,e.height=1080<S.screen.height*t?2160:1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(n=webapis.systeminfo.getMaxVideoResolution(),e.width=n.width,e.height=n.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{re("Tizen: Error detecting screen size, default screen size 1920x1080.")}A.s(3);break}if(ki()){try{r=JSON.parse(S.PalmSystem.deviceInfo),e.width=Math.max(1920,r.screenWidth),e.height=Math.max(1080,r.screenHeight)}catch{re("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}A.s(3);break}if(ql()){if(i=null,S.Hisense_Get4KSupportState)try{i=S.Hisense_Get4KSupportState()}catch{}i==null&&(i=Xt("UHD")),i?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),A.s(3);break}if(!Zr()&&!Ls()){o=void 0;try{o=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}if(o){e.width=1920,e.height=1080;try{s=new o.Media.Protection.ProtectionCapabilities,u=o.Media.Protection.ProtectionCapabilityResult,a=null;do a=s.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(a===u.maybe);a===u.probably&&(e.width=3840,e.height=2160)}catch{re("Xbox: Error detecting screen size, default screen size 1920x1080.")}}else Jr()&&(e.width=1920,e.height=1080,re("Xbox: Error detecting screen size, default screen size 1920x1080."));A.s(3);break}return c=!1,ye(A,8),I(A,S.msdk.device.getDisplayInfo(),10);case 10:f=A.h,c=f.resolution==="4K",Oe(A,9);break;case 8:return ve(A),ye(A,11),I(A,S.msdk.device.getDisplayInfoImmediate(),13);case 13:h=A.h,c=h.resolution==="4K",Oe(A,9);break;case 11:g=ve(A),re("PlayStation: Failed to get the display info:",g);case 9:c?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),A.s(3);break;case 17:T=A.h;case 16:if(T){e.width=3840,e.height=2160,A.s(18);break}if(!(E=y)){A.s(19);break}return I(A,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),20);case 20:E=A.h;case 19:E&&(e.width=1920,e.height=1080);case 18:Oe(A,3);break;case 14:x=ve(A),he("Failed to check canDisplayType:",x);case 3:return A.return(e)}})}function Ly(e){return S.matchMedia!==void 0&&S.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"}var Yd=null,Ns=null;function Vo(){}function Rt(e){if(!e)return"";if(e=Le(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),S.TextDecoder&&!Zr())return e=new TextDecoder().decode(e),e.includes("")&&he('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if((e[n]&128)==0?r=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),65535>=r)t+=String.fromCharCode(r);else{r-=65536;var i=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+i)}}return t}function ao(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new j(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=Un(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return Qd(r)}function di(e){function t(r){return n.byteLength<=r||9<=n[r]&&126>=n[r]}if(!e)return"";var n=Le(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Rt(n);if(n[0]==254&&n[1]==255)return ao(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return ao(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return ao(e,!1);if(n[1]==0&&n[3]==0)return ao(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Rt(e);throw new j(2,2,2003)}function Hr(e){if(S.TextEncoder&&!Zr()){var t=new TextEncoder;return Ar(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ar(t)}function $d(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}function Qd(e){return _y.value()(e)}function Fn(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(i){return i[1]=="#"?(i=i[2]=="x"||i[2]=="X"?parseInt(i.substring(3),16):parseInt(i.substring(2),10),0<=i&&1114111>=i?String.fromCodePoint(i):""):t[i]||"'"}):e||""}D("shaka.util.StringUtils",Vo),Vo.resetFromCharCode=function(){_y.g=void 0},Vo.toUTF16=$d,Vo.toUTF8=Hr,Vo.fromBytesAutoDetect=di,Vo.fromUTF16=ao,Vo.fromUTF8=Rt;var _y=new Wu(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch{return!1}}for(var t={jc:65536};0<t.jc;t={jc:t.jc},t.jc/=2)if(e(t.jc))return function(n){return function(r){for(var i="",o=0;o<r.length;o+=n.jc)i+=String.fromCharCode.apply(null,r.subarray(o,o+n.jc));return i}}(t);return null});function yn(){}function $l(e){return e=Qd(Le(e)),btoa(e)}function Di(e,t){return t=t??!0,e=$l(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ir(e){e=S.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Ho(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=S.parseInt(e.substr(2*r,2),16);return n}function Ri(e){var t=Le(e);e="",t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function Ht(){for(var e=en.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var i=e[r];ArrayBuffer.isView(i)&&i.BYTES_PER_ELEMENT===1?t.set(i,n):t.set(Le(i),n),n+=i.byteLength}return t}D("shaka.util.Uint8ArrayUtils",yn),yn.concat=Ht,yn.toHex=Ri,yn.fromHex=Ho,yn.fromBase64=Ir,yn.toBase64=Di,yn.toStandardBase64=$l;function un(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var r=new Vt(e[0]);return t=new Vt(t[0]),t=r.resolve(t),n&&Bo(t,n),[t.toString()]}t=t.map(function(u){return new Vt(u)}),r=[],e=v(e);for(var i=e.next();!i.done;i=e.next()){i=new Vt(i.value);for(var o=v(t),s=o.next();!s.done;s=o.next())s=i.resolve(s.value),n&&Bo(s,n),r.push(s.toString())}return r}function lo(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function Ny(e,t){t=t===void 0?"cenc":t;var n=[],r=[],i=[];e.forEach(function(s,u){var a=u;a.length!=22&&(a=Di(Ho(u),!1));var c=s;c.length!=22&&(c=Di(Ho(s),!1)),s={kty:"oct",kid:a,k:c},n.push(s),r.push(s.kid),i.push(u)}),e=JSON.stringify({keys:n});var o=JSON.stringify({kids:r});return o=[{initData:Le(Hr(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+S.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(i)}}function js(e,t){if(t.length==1)return t[0];if(e=Bn(e,t),e!=null)return e;throw new j(2,4,4025,t)}function Bn(e,t){var n=jy.get(e);n=v(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;for(var i=v(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.test(o.trim()))return o.trim()}return e==Xe?"":null}function Jd(e,t){var n=[];e=jy.get(e),e=v(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i=v(t),o=i.next();!o.done;o=i.next())o=o.value,r.test(o.trim())&&n.push(o.trim())}return n}var Xe="text",$t={la:"video",V:"audio",va:Xe,bf:"image",Oj:"application"},kI=1/15,jy=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function qu(e,t,n,r){this.g=null,this.l=e,this.i=t,this.m=n,this.o=r,this.j=!1;e:{if(typeof libDPIModule>"u"&&re("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,tt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{re("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(re("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||re(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zd(e,t,n,r){r.type!=="video"||e.o&&!r.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",r.id,-n,!e.o)}function Oy(e){e.g&&e.i.classList.add("shaka-hidden")}qu.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function by(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}D("shaka.lcevc.Dec",qu),qu.prototype.release=qu.prototype.release;function gn(e){if(eh.has(e))return eh.get(e);var t=S.ManagedMediaSource||S.MediaSource;return t?(t=t.isTypeSupported(e),eh.set(e,t),t):!1}function Go(){var e=S.ManagedSourceBuffer||S.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType}function Uy(){var e=S.ManagedMediaSource||S.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var eh=new Map;function Yu(){}Yu.prototype.extract=function(){},Yu.prototype.decode=function(){return[]},Yu.prototype.clear=function(){},Yu.prototype.getStreams=function(){return[]};function th(){}th.prototype.init=function(){},th.prototype.parse=function(){return[]};function $u(){}$u.prototype.init=function(){},$u.prototype.i=function(){},$u.prototype.g=function(){},$u.prototype.j=function(){},D("shaka.media.IClosedCaptionParser",$u);function dr(e){this.l=new th,(e=Fy(e.toLowerCase()))&&(this.l=e()),this.h=new Yu,(e=Os)&&(this.h=e())}dr.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},dr.prototype.i=function(e){e=this.l.parse(e),e=v(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Le(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},dr.prototype.g=function(){this.h.clear()},dr.prototype.j=function(){return this.h.getStreams()};function nh(e,t){rh.set(e,t)}function Fy(e){return rh.get(e)}D("shaka.media.ClosedCaptionParser",dr),dr.findDecoder=function(){return Os},dr.unregisterDecoder=function(){Os=null},dr.registerDecoder=function(e){Os=e},dr.findParser=Fy,dr.unregisterParser=function(e){rh.delete(e)},dr.registerParser=nh;var rh=new Map,Os=null;function Ko(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Jn,this.scroll=By}D("shaka.text.CueRegion",Ko);var Jn=1;Ko.units={PX:0,PERCENTAGE:Jn,LINES:2};var By="";Ko.scrollMode={NONE:By,UP:"up"};function Vy(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Gr(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function ih(e,t,n){if(n||(n=Vy),e.length!=t.length)return!1;t=t.slice(),e=v(e);for(var r=e.next(),i={};!r.done;i={bh:void 0},r=e.next()){if(i.bh=r.value,r=t.findIndex(function(o){return function(s){return n(o.bh,s)}}(i)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function bs(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Vy),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Us(e){this.h=e||"",this.g=0}function Fs(e){Wo(e,/[ \t]+/gm)}function Wo(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Xo(e){return e.g==e.h.length?null:(e=Wo(e,/[^ \t\n]*/gm))?e[0]:null}function Qu(e){if(e=Wo(e,DI),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Bs(e){return e?Qu(new Us(e)):null}var DI=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function ei(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||ArrayBuffer.isView(r))return r;if(n.has(r))return null;var i=r.constructor==Array;if(r.constructor!=Object&&!i)return null;n.add(r);var o=i?[]:{},s;for(s in r)o[s]=t(r[s]);return i&&(o.length=r.length),o}}var n=new WeakSet;return t(e)}function zo(e){var t={},n;for(n in e)t[n]=e[n];return t}function oh(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=n.toString(),i=e[n];i!==void 0&&(i=oh(i))&&t.push(r+":"+i)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=v(n),r=n.next();!r.done;r=n.next())i=r.value,r=JSON.stringify(i),i=e[i],i!==void 0&&(i=oh(i))&&t.push(r+":"+i);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}function Ju(e,t){var n=n===void 0?!1:n;return e=di(e),qo(e,t,n)}function qo(e,t,n){return e=RI(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(r){return t.split(",").includes(r.tagName)}))?e:null}function sh(e){return ah.has(e)?ah.get(e):""}function RI(e,t){function n(o,s){s=s===void 0?!1:s;for(var u=[];e[i];)if(e.charCodeAt(i)==60){if(e.charCodeAt(i+1)===47){s=i+2,i=e.indexOf(">",i),s=e.substring(s,i);var a=s.indexOf(o);if(a==-1){var c=o.indexOf(".");0<c&&(a=s.indexOf(o.substring(0,c)))}if(a==-1)throw o=e.substring(0,i).split(`
`),Error(`Unexpected close tag
Line: `+(o.length-1)+`
Column: `+(o[o.length-1].length+1)+`
Char: `+e[i]);i+1&&(i+=1);break}else if(e.charCodeAt(i+1)===33){if(e.charCodeAt(i+2)==45){for(;i!==-1&&(e.charCodeAt(i)!==62||e.charCodeAt(i-1)!=45||e.charCodeAt(i-2)!=45||i==-1);)i=e.indexOf(">",i+1);i===-1&&(i=e.length)}else if(e.charCodeAt(i+2)===91&&e.charCodeAt(i+8)===91&&e.substr(i+3,5).toLowerCase()==="cdata"){a=e.indexOf("]]>",i),a==-1?(u.push(e.substr(i+9)),i=e.length):(u.push(e.substring(i+9,a)),i=a+3);continue}i++;continue}e:{c=s,i++;var f=r(),h={};for(a=[];e.charCodeAt(i)!==62&&e[i];){var g=e.charCodeAt(i);if(64<g&&91>g||96<g&&123>g){g=r();for(var y=e.charCodeAt(i);y&&y!==39&&y!==34&&!(64<y&&91>y||96<y&&123>y)&&y!==62;)i++,y=e.charCodeAt(i);var T=i+1;if(i=e.indexOf(e[i],T),T=e.slice(T,i),y===39||y===34){if(i===-1){if(c={tagName:f,attributes:h,children:a,parent:null},t)for(f=0;f<a.length;f++)typeof a[f]!="string"&&(a[f].parent=c);a=c;break e}}else T=null,i--;if(g.startsWith("xmlns:")){y=T;var E=g.split(":")[1];ah.set(y,E),lh.set(E,y)}f==="tt"&&g==="xml:space"&&T==="preserve"&&(c=!0),h[g]=T}i++}for(e.charCodeAt(i-1)!==47?(i++,a=n(f,c)):i++,c={tagName:f,attributes:h,children:a,parent:null},f=a.length,h=0;h<f;h++)g=a[h],typeof g!="string"?t&&(g.parent=c):h==f-1&&g==`
`&&a.pop();a=c}if(u.push(a),typeof a=="string")break;a.tagName[0]==="?"&&a.children&&(u.push.apply(u,J(a.children)),a.children=[])}else a=i,i=e.indexOf("<",i)-1,i===-2&&(i=e.length),a=e.slice(a,i+1),s?0<a.length&&u.push(a):(u.length&&a.length==1&&a[0]==`
`||0<a.trim().length)&&u.push(a),i++;return u}function r(){for(var o=i;`\r
	>/= `.indexOf(e[i])===-1&&e[i];)i++;return e.slice(o,i)}var i=0;return n("")}function Ql(e){return typeof e=="string"}function Hy(e){var t=[];if(!e.children)return[];e=v(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function lt(e,t){var n=[];if(!e.children)return[];e=v(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Qt(e){return typeof e=="string"?Fn(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Fn(e))}function hr(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Qt(e))&&(e=e.trim()),e):null}function ti(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=v(e.children);for(var r=e.next();!r.done;r=e.next())ti(r.value,t,n)}return n}function zt(e,t){return e=lt(e,t),e.length!=1?null:e[0]}function Kr(e,t,n){return e=Gy(e,t,n),e.length!=1?null:e[0]}function be(e,t,n,r){r=r===void 0?null:r;var i=null;return e=e.attributes[t],e!=null&&(i=n(e)),i??r}function Pi(e,t,n){return t=sh(t),e.attributes[t+":"+n]||null}function Gy(e,t,n){var r=sh(t);if(t=[],e.children)for(n=r?r+":"+n:n,e=v(e.children),r=e.next();!r.done;r=e.next())(r=r.value)&&r.tagName===n&&t.push(r);return t}function hi(e,t,n){t=v(t);for(var r=t.next();!r.done;r=t.next())if(r=Pi(e,r.value,n))return r;return null}function co(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function pi(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Jl(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Dn(e){return e=Number(e),e%1===0?e:null}function Li(e){return e=Number(e),e%1===0&&0<e?e:null}function An(e){return e=Number(e),e%1===0&&0<=e?e:null}function Zu(e){return e=Number(e),isNaN(e)?null:e}function Zl(e){return e?e.toLowerCase()==="true":!1}function PI(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ec(e){var t=[];e=Fn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=v(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var i=n.match(/(@id='(.*?)')/),o=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),u=n.match(/\[(\d+)\]/);t.push({name:r[0],id:i?i[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:u?Number(u[1])-1:null,ac:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].ac=n.slice(1))}return t}function Ky(e,t){var n=ec(t.attributes.sel||"");if(n.length){var r=n[n.length-1],i=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=Wy(e,"t",r.t)),r.n!==null&&(n=Wy(e,"n",r.n))),n===null?n=i==="prepend"?0:e.length:i==="prepend"?--n:i==="after"&&++n,i=t.tagName,(r=r.ac)&&e[n]?Xy(e[n],i,r,hr(t)||""):(i!=="remove"&&i!=="replace"||e.splice(n,1),i!=="add"&&i!=="replace"||e.splice.apply(e,[n,0].concat(J(t.children))))}}function Wy(e,t,n){var r=0;e=v(e);for(var i=e.next();!i.done;i=e.next()){if(Number(i.value.attributes[t])===n)return r;r++}return null}function Xy(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function zy(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=lh.has(t)?lh.get(t):""),t=document.createElementNS(t,e.tagName);for(var r in e.attributes)t.setAttribute(r,e.attributes[r]);for(e=v(e.children),r=e.next();!r.done;r=e.next())r=r.value,n=void 0,typeof r=="string"?n=new Text(r):n=zy(r),t.appendChild(n);return t}function uh(e){if(!e)return null;var t={tagName:e.tagName,attributes:zo(e.attributes),children:[],parent:null};e=v(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=uh(n),n.parent=t),t.children.push(n);return t}var ah=new Map,lh=new Map;function Et(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ko,this.position=null,this.positionAlign=rc,this.size=0,this.textAlign=gi,this.direction=na,this.writingMode=Yo,this.lineInterpretation=ra,this.line=null,this.lineHeight="",this.lineAlign=$o,this.displayAlign=ta,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ev,this.fontStyle=dh,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={oc:32,rows:15}}function qy(e,t){return e=new Et(e,t,""),e.lineBreak=!0,e}Et.prototype.clone=function(){var e=new Et(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function tc(e,t){if(e.payload!=t.payload||!(.001>Math.abs(e.startTime-t.startTime)&&.001>Math.abs(e.endTime-t.endTime)))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!bs(e.nestedCues,t.nestedCues,tc))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!bs(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function nc(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Yy(t);var r=n;n=[];for(var i=-1,o=0;o<r.length;o++)r[o]==="<"?i=o+1:r[o]===">"&&0<i&&(i=r.substr(i,o-i),i.match(_I)&&n.push(i),i=-1);for(n=v(n),o=n.next();!o.done;o=n.next())o=o.value,r=r.replace("<"+o+">",'<div time="'+o+'">'),r+="</div>";e:{o=r,i=[];var s=-1;n="",r=!1;for(var u=0;u<o.length;u++)if(o[u]==="/"){var a=o.indexOf(">",u);if(a===-1){n=o;break e}if((a=o.substring(u+1,a))&&a=="v"){r=!0;var c=null;if(i.length&&(c=i[i.length-1]),c){if(c===a)n+="/"+a+">";else{if(!c.startsWith("v")){n+=o[u];continue}n+="/"+c+">"}u+=a.length+1}else n+=o[u]}else n+=o[u]}else o[u]==="<"?(s=u+1,o[s]!="v"&&(s=-1)):o[u]===">"&&0<s&&(i.push(o.substr(s,u-s)),s=-1),n+=o[u];for(o=v(i),i=o.next();!i.done;i=o.next())i=i.value,s=i.replace(" ",".voice-"),n=n.replace("<"+i+">","<"+s+">"),n=n.replace("</"+i+">","</"+s+">"),r||(n+="</"+s+">")}n=LI(n),e.payload="";try{var f=qo("<span>"+n+"</span>","span")}catch{}if(f)if(f=f.children,f.length!=1||f[0].tagName)for(f=v(f),n=f.next();!n.done;n=f.next())$y(n.value,e,t);else e.payload=Fn(n);else e.payload=Fn(n)}else e.payload=Fn(n)}function Yy(e){for(var t=v(Object.entries(Jy)),n=t.next();!n.done;n=t.next()){var r=v(n.value);n=r.next().value,r=r.next().value;var i=new Et(0,0,"");i.color=r,e.set("."+n,i)}for(t=v(Object.entries(Zy)),n=t.next();!n.done;n=t.next())r=v(n.value),n=r.next().value,r=r.next().value,i=new Et(0,0,""),i.backgroundColor=r,e.set("."+n,i)}function LI(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(i){return t[i]||""}):e||""}function $y(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Ko,r.position=null,r.size=0,r.textAlign=gi,e.tagName)for(var i=v(e.tagName.split(/(?=[ .])+/g)),o=i.next();!o.done;o=i.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(u=r,s=n.get(s))&&(u.backgroundColor=ea(s.backgroundColor,u.backgroundColor),u.color=ea(s.color,u.color),u.fontFamily=ea(s.fontFamily,u.fontFamily),u.fontSize=ea(s.fontSize,u.fontSize),u.textShadow=ea(s.textShadow,u.textShadow),u.fontWeight=s.fontWeight,u.fontStyle=s.fontStyle,u.opacity=s.opacity,u.rubyTag=s.rubyTag,u.textCombineUpright=s.textCombineUpright,u.wrapLine=s.wrapLine),o){case"br":r=qy(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=Vs;break;case"i":r.fontStyle=Hs;break;case"u":r.textDecoration.push(_i);break;case"font":(o=e.attributes.color)&&(r.color=o);break;case"div":if(o=e.attributes.time,!o)break;(o=Bs(o))&&(r.startTime=o);break;case"ruby":case"rp":case"rt":r.rubyTag=o}}if(i=e.children,Ql(e)||i.length==1&&Ql(i[0]))for(n=Qt(e).split(`
`),e=!0,n=v(n),i=n.next();!i.done;i=n.next())i=i.value,e||(e=qy(r.startTime,r.endTime),t.nestedCues.push(e)),0<i.length&&(e=r.clone(),e.payload=Fn(i),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=v(i),e=t.next();!e.done;e=t.next())$y(e.value,r,n)}function ea(e,t){return e&&0<e.length?e:t}D("shaka.text.Cue",Et),Et.parseCuePayload=nc,Et.equal=tc,Et.prototype.clone=Et.prototype.clone;var rc="auto";Et.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:rc};var gi="center",ch={LEFT:"left",RIGHT:"right",CENTER:gi,START:"start",END:"end"};Et.textAlign=ch;var ta="after",Qy={BEFORE:"before",CENTER:"center",AFTER:ta};Et.displayAlign=Qy;var na="ltr";Et.direction={HORIZONTAL_LEFT_TO_RIGHT:na,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Yo="horizontal-tb";Et.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Yo,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ra=0;Et.lineInterpretation={LINE_NUMBER:ra,PERCENTAGE:1};var $o="start",fh={CENTER:"center",START:$o,END:"end"};Et.lineAlign=fh;var Jy={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Et.defaultTextColor=Jy;var Zy={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Et.defaultTextBackgroundColor=Zy;var ev=400,Vs=700;Et.fontWeight={NORMAL:ev,BOLD:Vs};var dh="normal",Hs="italic",tv={NORMAL:dh,ITALIC:Hs,OBLIQUE:"oblique"};Et.fontStyle=tv;var _i="underline";Et.textDecoration={UNDERLINE:_i,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var _I=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function fo(){}fo.prototype.destroy=function(){};function Ni(e,t,n){hh.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,we:t})}function ho(e,t){for(var n=e.toLowerCase().split(";")[0],r=v([nv,gh,ph,po]),i=r.next();!i.done;i=r.next())if(i=hh.get(n+"-"+i.value)){var o=i.we(),s=o.isSupported(e,t);if(o.destroy(),s)return i.we}return null}D("shaka.transmuxer.TransmuxerEngine",fo),fo.findTransmuxer=ho,fo.unregisterTransmuxer=function(e,t){hh.delete(e.toLowerCase().split(";")[0]+"-"+t)},fo.registerTransmuxer=Ni,fo.prototype.destroy=fo.prototype.destroy;var hh=new Map,po=1,ph=2,gh=3,nv=4;fo.PluginPriority={FALLBACK:po,PREFERRED_SECONDARY:ph,PREFERRED:gh,APPLICATION:nv};function mh(){}function Kt(e,t){var n=e;return t&&!ji.includes(e)&&(n+='; codecs="'+t+'"'),n}function Gs(e,t){return t&&(e+='; codecs="'+t+'"'),e}function yh(e,t,n){var r=Kt(e,t);return t=Gs(e,t),ho(t)?(e=ho(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function NI(e,t,n){var r=[t];return jI.forEach(function(i,o){var s=e[o];o=="codecs"?ji.includes(e.mimeType)||r.push('codecs="'+n+'"'):s&&r.push(i+'="'+s+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function ic(e){return e.split(";")[0].split("/")[1]}function vn(e){var t=rv(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function go(e){var t=[];e=v(e.split(","));for(var n=e.next();!n.done;n=e.next())n=rv(n.value),t.push(n[0]);return t.sort().join(",")}function Zn(e){return e.split(";")[0]}function er(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function vh(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function rv(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}D("shaka.util.MimeUtils",mh),mh.getFullTypeWithAllCodecs=Gs,mh.getFullType=Kt;var jI=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),ji=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Oi(e){this.i=null,this.j=e,this.B=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function mn(e,t){oa.set(e,t)}function ia(e){return oa.get(e)}function Ks(e){return oa.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!Os:!1}Oi.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function OI(e,t,n,r,i){var o,s,u,a,c,f,h;return b(function(g){if(g.g==1)return I(g,Promise.resolve(),2);if(!e.i||!e.j)return g.return();if(n==null||r==null)return e.i.parseInit(Le(t)),g.return();for(o=e.B?n:e.u,s={periodStart:e.u,segmentStart:n,segmentEnd:r,vttOffset:o},u=e.i.parseMedia(Le(t),s,i,[]),a=v(u),c=a.next();!c.done;c=a.next())f=c.value,e.A(f,i||null,s);h=u.filter(function(y){return y.startTime>=e.l&&y.startTime<e.m}),e.j.append(h),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),ae(g)})}Oi.prototype.remove=function(e,t){var n=this;return b(function(r){if(r.g==1)return I(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),ae(r)})};function bI(e,t,n){e.l=t,e.m=n}function iv(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=v(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter(function(o){return o.endTime<=n}))&&e.j.append(i)}function ov(e,t,n){t.startTime+=n,t.endTime+=n,t=v(t.nestedCues);for(var r=t.next();!r.done;r=t.next())ov(e,r.value,n)}function UI(e,t,n,r,i){var o=n+" "+r,s=new Map;t=v(t);for(var u=t.next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),ov(e,a,i),a.startTime>=e.l&&a.startTime<e.m&&(s.get(u).get(o).push(a),u==e.C&&e.j.append([a]))}for(i=v(s.keys()),o=i.next();!o.done;o=i.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=v(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.o.get(o).set(u,a);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}D("shaka.text.TextEngine",Oi),Oi.prototype.destroy=Oi.prototype.destroy,Oi.findParser=ia,Oi.unregisterParser=function(e){oa.delete(e)},Oi.registerParser=mn;var oa=new Map;function FI(e,t){return e.concat(t)}function BI(){}function mo(e){return e!=null}function sa(e,t){return Promise.race([t,new Promise(function(n,r){new ze(r).da(e)})])}function Wr(){}function Ws(e,t){return e=yt(e),t=yt(t),e.split("-")[0]==t.split("-")[0]}function ua(e,t){return e=yt(e),t=yt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Sh(e,t){return e=yt(e),t=yt(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function yt(e){e=v(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=v(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=sv.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Qo(e,t){return e=yt(e),t=yt(t),t==e?4:ua(t,e)?3:Sh(t,e)?2:ua(e,t)?1:0}function Th(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=sv.get(e)||e}function wh(e){return e.language?yt(e.language):e.audio&&e.audio.language?yt(e.audio.language):e.video&&e.video.language?yt(e.video.language):"und"}function oc(e,t){e=yt(e);var n=new Set;t=v(t);for(var r=t.next();!r.done;r=t.next())n.add(yt(r.value));for(t=v(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=v(n),r=t.next();!r.done;r=t.next())if(r=r.value,ua(r,e))return r;for(t=v(n),r=t.next();!r.done;r=t.next())if(r=r.value,Sh(r,e))return r;for(n=v(n),t=n.next();!t.done;t=n.next())if(t=t.value,ua(e,t))return t;return null}D("shaka.util.LanguageUtils",Wr),Wr.findClosestLocale=oc,Wr.getLocaleForVariant=wh,Wr.getLocaleForText=function(e){return yt(e.language||"und")},Wr.getBase=Th,Wr.relatedness=Qo,Wr.areSiblings=function(e,t){var n=Th(e),r=Th(t);return e!=n&&t!=r&&n==r},Wr.normalize=yt,Wr.isSiblingOf=Sh,Wr.isParentOf=ua,Wr.areLanguageCompatible=Ws,Wr.areLocaleCompatible=function(e,t){return e=yt(e),t=yt(t),e==t};var sv=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function uv(){}function av(e,t,n,r,i){function o(A){var M=String(A.width||"")+String(A.height||"")+String(Math.round(A.frameRate||0))+(A.hdr||"")+A.fastSwitching;return A.dependencyStream&&(M+=A.dependencyStream.baseOriginalId||""),M}function s(A){var M=A.language+(A.channelsCount||0)+(A.audioSamplingRate||0)+A.roles.join(",")+A.label+A.groupId+A.fastSwitching;return A.dependencyStream&&(M+=A.dependencyStream.baseOriginalId||""),M}if(i.length){var u=e.textStreams;i=v(i);for(var a=i.next(),c={};!a.done;c={ug:void 0},a=i.next())if(c.ug=a.value,a=u.filter(function(A){return function(M){return!!(M.codecs.startsWith(A.ug)||M.mimeType.startsWith(A.ug))}}(c)),a.length){u=a;break}e.textStreams=u}if(u=e.variants,(t.length||n.length)&&(u=VI(u,t,n)),r.length){for(t=new ht,n=v(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var f=[];t.forEach(function(A,M){A=0;var L=[];M=v(M);for(var _=M.next(),F={};!_.done;F={Se:void 0},_=M.next())F.Se=_.value,_=r.filter(function(P){return function(k){return P.Se.decodingInfos[0][k]}}(F)).length,_>A?(A=_,L=[F.Se]):_==A&&L.push(F.Se);f.push.apply(f,J(L))}),u=f}for(n=new Set,t=new Set,u=v(u),i=u.next();!i.done;i=u.next())i=i.value,i.audio&&n.add(i.audio),i.video&&t.add(i.video);u=Array.from(n).sort(function(A,M){return A.bandwidth-M.bandwidth});var h=[];for(n=new Map,u=v(u),i=u.next();!i.done;i=u.next()){if(i=i.value,a=s(i),c=n.get(a)||[],c.length){var g=c[c.length-1],y=vn(g.codecs),T=vn(i.codecs);y!=T||i.bandwidth&&g.bandwidth&&!(i.bandwidth>g.bandwidth)||(c.push(i),h.push(i.id))}else c.push(i),h.push(i.id);n.set(a,c)}var E={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};u=Array.from(t).sort(function(A,M){if(!A.bandwidth||!M.bandwidth||A.bandwidth==M.bandwidth){if(A.codecs&&M.codecs&&A.codecs!=M.codecs&&A.width==M.width){var L=vn(A.codecs),_=vn(M.codecs);if(L!=_)return(E[L]||1)-(E[_]||1)}return A.width-M.width}return A.bandwidth-M.bandwidth}),t=Go();var x=[];for(n=new Map,u=v(u),i=u.next();!i.done;i=u.next()){if(i=i.value,a=o(i),c=n.get(a)||[],c.length){if(g=c[c.length-1],!t&&(y=vn(g.codecs),T=vn(i.codecs),y!==T))continue;y=vn(g.codecs),T=vn(i.codecs),y!=T||i.bandwidth&&g.bandwidth&&!(i.bandwidth>g.bandwidth)||(c.push(i),x.push(i.id))}else c.push(i),x.push(i.id);n.set(a,c)}e.variants=e.variants.filter(function(A){var M=A.audio;return A=A.video,!(M&&!h.includes(M.id)||A&&!x.includes(A.id))})}function VI(e,t,n){t=v(t);for(var r=t.next(),i={};!r.done;i={Mh:void 0},r=t.next())if(i.Mh=r.value,r=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.Mh)}}(i)),r.length){e=r;break}for(n=v(n),t=n.next(),r={};!t.done;r={Eg:void 0},t=n.next())if(r.Eg=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.Eg)}}(r)),t.length){e=t;break}return e}function HI(e,t,n){e.variants=e.variants.filter(function(r){return sc(r,t,n)})}function sc(e,t,n){function r(u,a,c){return u>=a&&u<=c}var i=e.video;if(i&&i.width&&i.height){var o=i.width,s=i.height;if(s>o&&(s=v([s,o]),o=s.next().value,s=s.next().value),!r(o,t.minWidth,Math.min(t.maxWidth,n.width))||!r(s,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function GI(e,t,n,r){return n=n===void 0?[]:n,r=r===void 0?{}:r,b(function(i){return i.g==1?I(i,lv(e,t,0<t.offlineSessionIds.length,n,r),2):(zI(t),I(i,qI(t),0))})}function lv(e,t,n,r,i){var o,s;return b(function(u){if(u.g==1)return Jr()&&KI(t.variants),I(u,fv(t.variants,n,!1,r),2);o=null,e&&(s=e.h)&&(o=s.keySystem),t.variants=t.variants.filter(function(a){var c=WI(a,o,i);if(!c){var f=[];a.audio&&f.push(mv(a.audio)),a.video&&f.push(mv(a.video))}return c}),ae(u)})}function KI(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=v(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=v(n),e=n.next();!e.done;e=n.next()){e=e.value,r=v(t);for(var i=r.next();!i.done;i=r.next()){var o=v(i.value);if(i=o.next().value,o=o.next().value,e.codecs.includes(i)){e.codecs=e.codecs.replace(i,o);break}}}}function WI(e,t,n){if(!e.decodingInfos.some(function(a){return!(!a.supported||t&&(a=a.keySystemAccess)&&(n[a.keySystem]||a.keySystem)!=t)}))return!1;var r=Jr(),i=Xt("Firefox")&&uo(),o=e.video,s=o&&o.width||0,u=o&&o.height||0;return r&&o&&(1920<s||1080<u)&&(o.codecs.includes("avc1.")||o.codecs.includes("avc3."))||(r=o&&o.dependencyStream)&&!by(r)?!1:(e=e.audio,!(i&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function cv(e,t){var n,r,i,o,s,u,a;return b(function(c){if(c.g==1){for(n=function(f,h){if(f){var g=zo(f);return g.supported=f.supported&&h.supported,g.powerEfficient=f.powerEfficient&&h.powerEfficient,g.smooth=f.smooth&&h.smooth,h.keySystemAccess&&!g.keySystemAccess&&(g.keySystemAccess=h.keySystemAccess),g}return h},r=null,i=[],o=v(t),s=o.next(),u={};!s.done;u={cache:void 0,Ud:void 0},s=o.next())a=s.value,u.Ud=oh(a),u.cache=ac,u.cache.has(u.Ud)?r=n(r,u.cache.get(u.Ud)):i.push(XI(a).then(function(f){return function(h){var g=null;h=v(h||[]);for(var y=h.next();!y.done;y=h.next())g=n(g,y.value);g&&(f.cache.set(f.Ud,g),r=n(r,g))}}(u)));return I(c,Promise.all(i),2)}r&&e.decodingInfos.push(r),ae(c)})}function XI(e){var t=[""];e.video&&(t=er(e.video.contentType).split(","));var n=[""];e.audio&&(n=er(e.audio.contentType).split(","));var r=[];t=v(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var o=v(n),s=o.next(),u={};!s.done;u={pc:void 0},s=o.next())s=s.value,u.pc=ei(e),e.video&&(u.pc.video.contentType=Kt(Zn(u.pc.video.contentType),i)),e.audio&&(u.pc.audio.contentType=Kt(Zn(u.pc.audio.contentType),s)),r.push(new Promise(function(a){return function(c,f){(uo()?sa(5,navigator.mediaCapabilities.decodingInfo(a.pc)):navigator.mediaCapabilities.decodingInfo(a.pc)).then(function(h){c(h)}).catch(f)}}(u)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function fv(e,t,n,r){var i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F;return b(function(P){switch(P.g){case 1:if(e.some(function(k){return k.decodingInfos.length}))return P.return();i=v(r),o=i.next(),s={};case 2:if(o.done){P.s(4);break}s.nh=o.value,u=!1,a=v(e),c=a.next();case 5:if(c.done){P.s(7);break}f=c.value,h=dv(f,t,n).filter(function(k){return function(O){return O=O[0],(O.keySystemConfiguration&&O.keySystemConfiguration.keySystem)===k.nh}}(s)),g=v(h),y=g.next();case 8:if(y.done){P.s(10);break}return T=y.value,I(P,cv(f,T),9);case 9:y=g.next(),P.s(8);break;case 10:f.decodingInfos.length&&(u=!0),c=a.next(),P.s(5);break;case 7:if(u)return P.return();s={nh:void 0},o=i.next(),P.s(2);break;case 4:E=v(e),x=E.next();case 12:if(x.done){P.s(0);break}A=x.value,M=dv(A,t,n).filter(function(k){return k=k[0],k=k.keySystemConfiguration&&k.keySystemConfiguration.keySystem,!k||!r.includes(k)}),L=v(M),_=L.next();case 15:if(_.done){x=E.next(),P.s(12);break}return F=_.value,I(P,cv(A,F),16);case 16:_=L.next(),P.s(15)}})}function dv(e,t,n){var r=e.audio,i=e.video,o=[],s=[];if(i)for(var u=v(i.fullMimeTypes),a=u.next();!a.done;a=u.next()){a=a.value;var c=er(a);if(c.includes(",")&&!r){var f=c.split(","),h=Zn(a);c=js("video",f),f=js("audio",f),f=aa(f,h),h=yh(h,f,"audio"),s.push({contentType:h,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(c=xh(c),a={contentType:yh(Zn(a),c,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":a.transferFunction="srgb";break;case"PQ":a.transferFunction="pq";break;case"HLG":a.transferFunction="hlg"}i.colorGamut&&(a.colorGamut=i.colorGamut),o.push(a)}if(r)for(u=v(r.fullMimeTypes),a=u.next();!a.done;a=u.next())c=a.value,a=Zn(c),c=aa(er(c),a),a=yh(a,c,"audio"),s.push({contentType:a,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(u=[],o.length==0&&o.push(null),s.length==0&&s.push(null),o=v(o),a=o.next();!a.done;a=o.next())for(a=a.value,c=v(s),h=c.next();!h.done;h=c.next())h=h.value,f={type:n?"file":"media-source"},a&&(f.video=a),h&&(f.audio=h),u.push(f);if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];for(e=[],n=new Map,s=v(s),o=s.next();!o.done;o=s.next())o=o.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=v(n.keys()),a=o.next();!a.done;a=o.next()){for(a=a.value,h=n.get(a),c=new Map,h=v(h),f=h.next();!f.done;f=h.next()){f=f.value;var g=f.videoRobustness+","+f.audioRobustness;c.get(g)||c.set(g,[]),c.get(g).push(f)}for(c=v(c.values()),h=c.next();!h.done;h=c.next()){h=h.value,f=[],g=v(u);for(var y=g.next();!y.done;y=g.next()){y=Object.assign({},y.value);for(var T={keySystem:a,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},E=v(h),x=E.next();!x.done;x=E.next()){if(x=x.value,x.initData&&x.initData.length){for(var A=new Set,M=v(x.initData),L=M.next();!L.done;L=M.next())A.add(L.value.initDataType);T.initDataType=x.initData[0].initDataType}x.distinctiveIdentifierRequired&&(T.distinctiveIdentifier="required"),x.persistentStateRequired&&(T.persistentState="required"),x.sessionType&&(T.sessionTypes=[x.sessionType]),r&&(T.audio?(x.encryptionScheme&&(T.audio.encryptionScheme=T.audio.encryptionScheme||x.encryptionScheme),T.audio.robustness=T.audio.robustness||x.audioRobustness):(T.audio={robustness:x.audioRobustness},x.encryptionScheme&&(T.audio.encryptionScheme=x.encryptionScheme)),T.audio.robustness==""&&delete T.audio.robustness),i&&(T.video?(x.encryptionScheme&&(T.video.encryptionScheme=T.video.encryptionScheme||x.encryptionScheme),T.video.robustness=T.video.robustness||x.videoRobustness):(T.video={robustness:x.videoRobustness},x.encryptionScheme&&(T.video.encryptionScheme=x.encryptionScheme)),T.video.robustness==""&&delete T.video.robustness)}y.keySystemConfiguration=T,f.push(y)}e.push(f)}}return e}function aa(e,t){return e.toLowerCase()=="flac"?pn()?"fLaC":"flac":e.toLowerCase()==="opus"?pn()&&ic(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&Ci()?"ec-3":e}function xh(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function zI(e){e.textStreams=e.textStreams.filter(function(t){return t=Kt(t.mimeType,t.codecs),Ks(t)})}function qI(e){var t,n,r,i,o,s,u;return b(function(a){switch(a.g){case 1:t=[],n=v(e.imageStreams),r=n.next();case 2:if(r.done){a.s(4);break}if(i=r.value,o=i.mimeType,o=="application/mp4"&&i.codecs=="mjpg"&&(o="image/jpg"),lc.has(o)){a.s(5);break}if(s=QI.get(o),!s){lc.set(o,!1),a.s(5);break}return I(a,YI(s),7);case 7:u=a.h,lc.set(o,u);case 5:lc.get(o)&&t.push(i),r=n.next(),a.s(2);break;case 4:e.imageStreams=t,ae(a)}})}function YI(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Jo(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=t?t.groupId:null,a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var c=[];t&&c.push(t.kind),n&&c.push(n.kind),c=c[0]||null;var f=new Set;if(t)for(var h=v(t.roles),g=h.next();!g.done;g=h.next())f.add(g.value);if(n)for(h=v(n.roles),g=h.next();!g.done;g=h.next())f.add(g.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:a,audioMimeType:r,videoMimeType:i,codecs:"",audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(f),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:u,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,(r=n.dependencyStream)&&(e.width=r.width||e.width,e.height=r.height||e.height,e.videoCodec=r.codecs||e.videoCodec),s.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=i,n=s.split(",");try{e.videoCodec=js("video",n),e.audioCodec=js("audio",n)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Zo(e){return{id:e.id,active:!1,type:Xe,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Eh(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=ri(e.segmentIndex));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&t!=null&&(t/=Number(i.split("x")[0])),i&&n!=null&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Ah(e){return e.__shaka_id||(e.__shaka_id=$I++),e.__shaka_id}function Ih(e){var t=hv(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function hv(e){var t=e.language;return{id:Ah(e),active:!1,type:"",bandwidth:0,language:yt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function la(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function uc(e){return e.filter(function(t){return la(t)})}function Xs(e,t,n,r){var i=e,o=e.filter(function(a){return a.primary});o.length&&(i=o);var s=i.length?i[0].language:"";if(i=i.filter(function(a){return a.language==s}),t){var u=oc(yt(t),e.map(function(a){return a.language}));u&&(i=e.filter(function(a){return yt(a.language)==u}))}if(i=i.filter(function(a){return a.forced==r}),n){if(e=pv(i,n),e.length)return e}else if(e=i.filter(function(a){return a.roles.length==0}),e.length)return e;return e=i.map(function(a){return a.roles}).reduce(FI,[]),e.length?pv(i,e[0]):i}function pv(e,t){return e.filter(function(n){return n.roles.includes(t)})}function gv(e,t){t.length&&(t=t.filter(function(n){return vn(e.codecs)==vn(n.codecs)}).sort(function(n,r){return n.bandwidth&&r.bandwidth&&n.bandwidth!=r.bandwidth?n.bandwidth-r.bandwidth:(n.width||0)-(r.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function mv(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function yv(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var r=yt(n.preferredTextLanguage);return t=yt(t.language),n.autoShowText==2?Ws(t,r):n.autoShowText==3?e?(e=yt(e.language),Ws(t,r)&&!Ws(e,t)):!1:(re("Invalid autoShowText setting!"),!1)}D("shaka.util.StreamUtils",uv),uv.meetsRestrictions=sc;var ac=new Map,$I=0,lc=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),QI=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Lt(){var e=this;this.G=null,this.o=!1,this.m=new se,this.j=new _e,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.m=new se,e.g&&e.m.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.l=this.g=this.u=null,this.A=new ze(function(){if(e.o&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.B=S,"documentPictureInPicture"in S&&this.j.D(S.documentPictureInPicture,"enter",function(){e.B=S.documentPictureInPicture.window,e.A&&e.A.sb(),e.j.qa(e.B,"pagehide",function(){e.B=S,e.A&&e.A.sb()})}),this.C=this.i=null}p=Lt.prototype,p.stop=function(){this.G=null,this.o=!1,this.F=[],this.H=1,this.l=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.A.stop(),this.C=this.i=null},p.release=function(){this.j.release(),this.A=null},p.init=function(e){this.G=e},p.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;e=this.B.screen.height*n,t=this.B.screen.width*n}if(this.h&&this.g.restrictToElementSize){n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;var r=this.l.clientHeight,i=this.l.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.l&&(r=this.i.height,i=this.i.width),e=Math.min(e,r*n),t=Math.min(t,i*n)}if(n=this.F.filter(function(c){return c&&!(c.audio&&c.audio.fastSwitching||c.video&&c.video.fastSwitching)}),n.length||(n=this.F),r=n,n.length!=this.F.length&&(r=this.F.filter(function(c){return c&&!!(c.audio&&c.audio.fastSwitching||c.video&&c.video.fastSwitching)})),n=Mh(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){for(n=JI(n),n=v(n),i=n.next();!i.done;i=n.next())if(i=i.value,i.height>=e&&i.width>=t){e=i.height,t=i.width;break}n=Mh(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=Mh(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){i=n[r];for(var o=isNaN(this.H)?1:Math.abs(this.H),s=o*i.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},a=r+1;a<n.length;a++)if(i.bandwidth!=n[a].bandwidth){u=n[a];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,e>=s&&e<=o&&(t.bandwidth!=i.bandwidth||t.bandwidth==i.bandwidth&&t.video&&i.video&&(t.video.width<i.video.width||t.video.height<i.video.height))&&(t=i)}return this.u=Date.now(),t},p.enable=function(){this.o=!0},p.disable=function(){this.o=!1},p.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.m.sample(e,t),n&&this.u!=null&&this.o&&vv(this))},p.trySuggestStreams=function(){this.u!=null&&this.o&&vv(this)},p.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.m.getBandwidthEstimate(e),this.C?this.C.getBandwidthEstimate(e):e)},p.setVariants=function(e){this.F=e},p.playbackRateChanged=function(e){this.H=e},p.setMediaElement=function(e){function t(){n.A.da(ZI)}var n=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in S&&(this.h=new ResizeObserver(t),this.h.observe(this.l)),this.j.D(e,"enterpictureinpicture",function(r){r.pictureInPictureWindow&&(n.i=r.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ka(n.i,"resize",t),n.i=null})},p.setCmsdManager=function(e){this.C=e},p.configure=function(e){this.g=e,this.m&&this.g&&this.m.configure(this.g.advanced)};function vv(e){if(!e.I){var t=e.m;if(!(t.g>=t.i))return;e.I=!0,e.u-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.u<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Mh(e,t,n,r,i){if(e.C){var o=e.C.Vg();o&&(n=n.filter(function(s){return s.bandwidth&&o?s.bandwidth<=o:!0}))}return t&&(n=n.filter(function(s){return sc(s,t,{width:i,height:r})})),n.sort(function(s,u){return s.bandwidth-u.bandwidth})}function JI(e){var t=[];e=v(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,i){return r.width-i.width})}D("shaka.abr.SimpleAbrManager",Lt),Lt.prototype.configure=Lt.prototype.configure,Lt.prototype.setCmsdManager=Lt.prototype.setCmsdManager,Lt.prototype.setMediaElement=Lt.prototype.setMediaElement,Lt.prototype.playbackRateChanged=Lt.prototype.playbackRateChanged,Lt.prototype.setVariants=Lt.prototype.setVariants,Lt.prototype.getBandwidthEstimate=Lt.prototype.getBandwidthEstimate,Lt.prototype.trySuggestStreams=Lt.prototype.trySuggestStreams,Lt.prototype.segmentDownloaded=Lt.prototype.segmentDownloaded,Lt.prototype.disable=Lt.prototype.disable,Lt.prototype.enable=Lt.prototype.enable,Lt.prototype.chooseVariant=Lt.prototype.chooseVariant,Lt.prototype.init=Lt.prototype.init,Lt.prototype.release=Lt.prototype.release,Lt.prototype.stop=Lt.prototype.stop;var ZI=1;D("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function Sv(e,t){var n=ni();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Tv(e){var t,n;return b(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new j(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),I(r,new Promise(function(i){new ze(i).da(n/1e3)}),2))}e.h*=e.m,ae(r)})}function ni(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function pt(){var e,t,n=new Promise(function(r,i){e=r,t=i});return n.resolve=e,n.reject=t,n}pt.prototype.resolve=function(){},pt.prototype.reject=function(){};function Wt(e,t){this.promise=e,this.i=t,this.g=null}function es(e){return new Wt(Promise.reject(e),function(){return Promise.resolve()})}function Ch(){var e=Promise.reject(new j(2,7,7001));return e.catch(function(){}),new Wt(e,function(){return Promise.resolve()})}function zs(e){return new Wt(Promise.resolve(e),function(){return Promise.resolve()})}function wv(e){return new Wt(e,function(){return e.catch(function(){})})}Wt.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function xv(e){return new Wt(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Wt.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Wt.prototype.Ha=function(e,t){function n(u){return function(a){if(i.g&&u)o.reject(s);else{var c=u?e:t;c?r=e2(c,a,o):(u?o.resolve:o.reject)(a)}}}function r(){return o.reject(s),i.abort()}var i=this,o=new pt;o.catch(function(){});var s=new j(2,7,7001);return this.promise.then(n(!0),n(!1)),new Wt(o,function(){return r()})};function e2(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}G.Object.defineProperties(Wt.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),D("shaka.util.AbortableOperation",Wt),Wt.prototype.chain=Wt.prototype.Ha,Wt.prototype.finally=Wt.prototype.finally,Wt.all=xv,Wt.prototype.abort=Wt.prototype.abort,Wt.notAbortable=wv,Wt.completed=zs,Wt.aborted=Ch,Wt.failed=es;function ce(e,t){if(t)if(t instanceof Map)for(var n=v(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=S.performance&&S.performance.now?S.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Ev(e){var t=new ce(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}ce.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ce.prototype.stopImmediatePropagation=function(){this.g=!0},ce.prototype.stopPropagation=function(){},D("shaka.util.FakeEvent",ce);var cc={Qj:"abrstatuschanged",Rj:"adaptation",Sj:"audiotrackchanged",Tj:"audiotrackschanged",Uj:"boundarycrossed",Vj:"buffering",Wj:"complete",Xj:"downloadcompleted",Yj:"downloadfailed",Zj:"downloadheadersreceived",$j:"drmsessionupdate",bk:"emsg",wk:"prft",Error:"error",ck:"expirationupdated",dk:"firstquartile",ek:"gapjumped",hk:"keystatuschanged",lk:"loaded",mk:"loading",pk:"manifestparsed",qk:"manifestupdated",rk:"mediaqualitychanged",sk:"mediasourcerecovered",Metadata:"metadata",tk:"midpoint",uk:"nospatialvideoinfo",vk:"onstatechange",xk:"ratechange",zk:"segmentappended",Ak:"sessiondata",Bk:"spatialvideoinfo",Ck:"stalldetected",Dk:"started",Ek:"statechanged",Fk:"streaming",Gk:"textchanged",Hk:"texttrackvisibility",Ik:"thirdquartile",Jk:"timelineregionadded",Kk:"timelineregionenter",Lk:"timelineregionexit",Mk:"trackschanged",Ok:"unloading",Qk:"variantchanged"};function gt(){this.Ea=new ht,this.Te=this}gt.prototype.addEventListener=function(e,t){this.Ea&&this.Ea.push(e,t)},gt.prototype.removeEventListener=function(e,t){this.Ea&&this.Ea.remove(e,t)},gt.prototype.dispatchEvent=function(e){if(!this.Ea)return!0;var t=this.Ea.get(e.type)||[],n=this.Ea.get("All");for(n&&(t=t.concat(n)),t=v(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Te,e.currentTarget=this.Te;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},gt.prototype.release=function(){this.Ea=null};function qs(){this.g=[]}function ts(e,t){e.g.push(t.finally(function(){Gr(e.g,t)}))}qs.prototype.destroy=function(){for(var e=[],t=v(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function wt(e,t,n,r,i,o,s){gt.call(this),this.i=!1,this.u=new qs,this.g=new Set,this.h=new Set,this.m=e||null,this.l=t||null,this.C=n||null,this.F=r||null,this.G=i||null,this.I=o||null,this.H=s||null,this.A=this.B=!1,this.o=16e3,this.j=new Map}St(wt,gt),p=wt.prototype,p.mg=function(e){this.B=e},p.ng=function(e){this.A=e};function bi(e,t,n,r){r=r===void 0?!1:r,n=n||kv;var i=dc.get(e);(!i||n>=i.priority)&&dc.set(e,{priority:n,we:t,kj:r})}function Av(e,t){for(var n=v(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=v(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}p.nj=function(e){this.g.add(e)},p.Jj=function(e){this.g.delete(e)},p.ai=function(){this.g.clear()},p.oj=function(e){this.h.add(e)},p.Kj=function(e){this.h.delete(e)},p.bi=function(){this.h.clear()},p.Jg=function(){this.j.clear()};function nn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}p.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),this.j.clear(),gt.prototype.release.call(this),this.u.destroy()},p.request=function(e,t,n){var r=this,i=new Cv;if(this.i){var o=Promise.reject(new j(2,7,7001));return o.catch(function(){}),new fc(o,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?ei(t.retryParameters):ni(),t.uris=ei(t.uris),o=t2(this,e,t,n);var s=o.Ha(function(){return Iv(r,e,t,n,new Sv(t.retryParameters,!1),0,null,i)}),u=s.Ha(function(g){return n2(r,e,g,n)}),a=Date.now(),c=0;o.promise.then(function(){c=Date.now()-a},function(){});var f=0;s.promise.then(function(){f=Date.now()},function(){});var h=u.Ha(function(g){var y=Date.now()-f,T=g.response;return T.timeMs+=c,T.timeMs+=y,g.Qi||!r.m||T.fromCache||t.method=="HEAD"||e!=Xr||r.m(T.timeMs,T.data.byteLength,Mv(n)),r.H&&r.H(e,T,n),T},function(g){throw g&&(g.severity=2),g});return o=new fc(h.promise,function(){return h.abort()},i),ts(this.u,o),o};function t2(e,t,n,r){function i(u){o=o.Ha(function(){return n.body&&(n.body=Ar(n.body)),u(t,n,r)})}var o=zs(void 0);e.G&&i(e.G),e=v(e.g);for(var s=e.next();!s.done;s=e.next())i(s.value);return o.Ha(void 0,function(u){throw u instanceof j&&u.code==7001?u:new j(2,1,1006,u)})}function Iv(e,t,n,r,i,o,s,u){e.B&&(n.uris[o]=n.uris[o].replace("https://","http://")),e.A&&(n.uris[o]=n.uris[o].replace("http://","https://")),0<o&&e.I&&e.I(t,r,n.uris[o],n.uris[o-1]);var a=new Vt(n.uris[o]),c=a.Kb,f=!1;c||(c=location.protocol,c=c.slice(0,-1),Hl(a,c),n.uris[o]=a.toString()),c=c.toLowerCase();var h=(c=dc.get(c))?c.we:null;if(!h)return es(new j(2,1,1e3,a));var g=c.kj;(a=e.j.get(a.nb))&&(n.headers["common-access-token"]=a);var y=null,T=null,E=!1,x=!1,A;return wv(Tv(i)).Ha(function(){if(e.i)return Ch();A=Date.now();var M=0;n.requestStartTime=Date.now();var L=h(n.uris[o],n,t,function(P,k,O){y&&y.stop(),T&&T.da(F/1e3),e.m&&t==Xr&&(M++,n.packetNumber=M,e.m(P,k,Mv(r),n),f=!0,u.g=O)},function(P){x=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.l&&e.l(P,n,t)},{minBytesForProgressEvents:e.o});if(!g)return L;var _=n.retryParameters.connectionTimeout;_&&(y=new ze(function(){E=!0,L.abort()}),y.da(_/1e3));var F=n.retryParameters.stallTimeout;return F&&(T=new ze(function(){E=!0,L.abort()})),L}).Ha(function(M){y&&y.stop(),T&&T.stop(),M.timeMs==null&&(M.timeMs=Date.now()-A);var L=M.headers["common-access-token"];if(L){var _=new Vt(M.uri);e.j.set(_.nb,L)}return L={response:M,Qi:f},!x&&e.l&&e.l(M.headers,n,t),e.C&&e.C(n,M),L},function(M){if(y&&y.stop(),T&&T.stop(),e.F){var L=null,_=0;M instanceof j&&(L=M,M.code==1001&&(_=M.data[1])),e.F(n,L,_,E)}if(e.i)return Ch();if(E&&(M=new j(1,1,1003,n.uris[o],t)),M instanceof j){if(M.code==7001)throw M;if(M.code==1010)throw s;if(M.severity==1){if(L=new Map().set("error",M),L=new ce("retry",L),L.cancelable=!0,e.dispatchEvent(L),L.defaultPrevented)throw M;return o=(o+1)%n.uris.length,Iv(e,t,n,r,i,o,M,u)}}throw M})}function n2(e,t,n,r){var i=zs(void 0);e=v(e.h);for(var o=e.next(),s={};!o.done;s={qh:void 0},o=e.next())s.qh=o.value,i=i.Ha(function(u){return function(){var a=n.response;return a.data&&(a.data=Ar(a.data)),(0,u.qh)(t,a,r)}}(s));return i.Ha(function(){return n},function(u){var a=2;if(u instanceof j){if(u.code==7001)throw u;a=u.severity}throw new j(a,1,1007,u)})}function Mv(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.o)return!1}return!0}D("shaka.net.NetworkingEngine",wt),wt.prototype.request=wt.prototype.request,wt.prototype.destroy=wt.prototype.destroy,wt.makeRequest=nn,wt.defaultRetryParameters=function(){return ni()},wt.prototype.clearCommonAccessTokenMap=wt.prototype.Jg,wt.prototype.clearAllResponseFilters=wt.prototype.bi,wt.prototype.unregisterResponseFilter=wt.prototype.Kj,wt.prototype.registerResponseFilter=wt.prototype.oj,wt.prototype.clearAllRequestFilters=wt.prototype.ai,wt.prototype.unregisterRequestFilter=wt.prototype.Jj,wt.prototype.registerRequestFilter=wt.prototype.nj,wt.unregisterScheme=function(e){dc.delete(e)},wt.registerScheme=bi,wt.prototype.setForceHTTPS=wt.prototype.ng,wt.prototype.setForceHTTP=wt.prototype.mg;function Cv(){this.g=0}wt.NumBytesRemainingClass=Cv;function fc(e,t,n){Wt.call(this,e,t),this.h=n}St(fc,Wt),wt.PendingRequest=fc;var Xr=1;wt.RequestType={MANIFEST:0,SEGMENT:Xr,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},wt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var kv=3;wt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:kv};var dc=new Map;function Ys(e){this.g=!1,this.h=new pt,this.i=e}Ys.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Tt(e,t){if(e.g)throw t instanceof j&&t.code==7003?t:new j(2,7,7003,t)}function kh(e,t){var n=[];e=v(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function r2(e,t){e=v(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function ns(e){for(var t=new Map,n=v(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Dh(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function At(e,t){this.h=Un(e),this.i=t==Dv,this.g=0}p=At.prototype,p.ta=function(){return this.g<this.h.byteLength},p.Ba=function(){return this.g},p.getLength=function(){return this.h.byteLength},p.X=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Ui()}},p.ma=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Ui()}},p.S=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Ui()}},p.bg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Ui()}},p.bd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Ui()}if(2097151<t)throw new j(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},p.Db=function(e){if(this.g+e>this.h.byteLength)throw Ui();var t=Le(this.h,this.g,e);return this.g+=e,t},p.skip=function(e){if(this.g+e>this.h.byteLength)throw Ui();this.g+=e},p.rh=function(e){if(this.g<e)throw Ui();this.g-=e},p.seek=function(e){if(0>e||e>this.h.byteLength)throw Ui();this.g=e},p.Cc=function(){for(var e=this.g;this.ta()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Le(this.h,e,this.g-e),this.g+=1,Rt(e)};function Ui(){return new j(2,3,3e3)}D("shaka.util.DataViewReader",At),At.prototype.readTerminatedString=At.prototype.Cc,At.prototype.seek=At.prototype.seek,At.prototype.rewind=At.prototype.rh,At.prototype.skip=At.prototype.skip,At.prototype.readBytes=At.prototype.Db,At.prototype.readUint64=At.prototype.bd,At.prototype.readInt32=At.prototype.bg,At.prototype.readUint32=At.prototype.S,At.prototype.readUint16=At.prototype.ma,At.prototype.readUint8=At.prototype.X,At.prototype.getLength=At.prototype.getLength,At.prototype.getPosition=At.prototype.Ba,At.prototype.hasMoreData=At.prototype.ta;var Dv=1;At.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Dv};function mt(){this.i=new Map,this.h=new Map,this.g=!1}p=mt.prototype,p.box=function(e,t){return e=Rv(e),this.i.set(e,i2),this.h.set(e,t),this},p.R=function(e,t){return e=Rv(e),this.i.set(e,Pv),this.h.set(e,t),this},p.stop=function(){this.g=!0},p.parse=function(e,t,n){for(e=new At(e,0),this.g=!1;e.ta()&&!this.g;)this.Yc(0,e,t,n)},p.Yc=function(e,t,n,r){var i=t.Ba();if(r&&i+8>t.getLength())this.g=!0;else{var o=t.S(),s=t.S(),u=pc(s),a=!1;switch(o){case 0:o=t.getLength()-i;break;case 1:if(r&&t.Ba()+8>t.getLength()){this.g=!0;return}o=t.bd(),a=!0}var c=this.h.get(s);if(c){var f=null,h=null;if(this.i.get(s)==Pv){if(r&&t.Ba()+4>t.getLength()){this.g=!0;return}h=t.S(),f=h>>>24,h&=16777215}s=i+o,n&&s>t.getLength()&&(s=t.getLength()),r&&s>t.getLength()?this.g=!0:(r=s-t.Ba(),t=0<r?t.Db(r):new Uint8Array(0),t=new At(t,0),c({name:u,parser:this,partialOkay:n||!1,version:f,flags:h,reader:t,size:o,start:i+e,has64BitSize:a}))}else t.skip(Math.min(i+o-t.Ba(),t.getLength()-t.Ba()))}};function Fe(e){for(var t=yo(e);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function Fi(e){for(var t=yo(e),n=e.reader.S(),r=0;r<n&&(e.parser.Yc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function tr(e){var t=yo(e);for(e.reader.skip(78);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function hc(e){var t=yo(e);e.reader.skip(8);var n=e.reader.ma();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function $s(e){return function(t){e(t.reader.Db(t.reader.getLength()-t.reader.Ba()))}}function Rv(e){var t=0;e=v(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function pc(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function yo(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}D("shaka.util.Mp4Parser",mt),mt.headerSize=yo,mt.typeToString=pc,mt.allData=$s,mt.audioSampleEntry=hc,mt.visualSampleEntry=tr,mt.sampleDescription=Fi,mt.children=Fe,mt.prototype.parseNext=mt.prototype.Yc,mt.prototype.parse=mt.prototype.parse,mt.prototype.stop=mt.prototype.stop,mt.prototype.fullBox=mt.prototype.R,mt.prototype.box=mt.prototype.box;var i2=0,Pv=1;function Rh(e){var t=this;this.g=[],this.h=[],this.data=[],new mt().box("moov",Fe).box("moof",Fe).R("pssh",function(n){if(!(1<n.version)){var r=Le(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Ri(n.reader.Db(16))),0<n.version){r=n.reader.S();for(var i=0;i<r;i++){var o=Ri(n.reader.Db(16));t.h.push(o)}}}}).parse(e)}function gc(e,t,n,r){var i=e.length,o=t.length+16+i;0<r&&(o+=4+16*n.size);var s=new Uint8Array(o),u=Un(s),a=0;if(u.setUint32(a,o),a+=4,u.setUint32(a,1886614376),a+=4,1>r?u.setUint32(a,0):u.setUint32(a,16777216),a+=4,s.set(t,a),a+=t.length,0<r)for(u.setUint32(a,n.size),a+=4,t=v(n),n=t.next();!n.done;n=t.next())n=Ho(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,i),s.set(e,a+4),s}function mc(e){var t=this;this.C=e,this.j=this.A=null,this.ka=this.ea=!1,this.H=0,this.h=null,this.o=new _e,this.i=new Map,this.T=[],this.B=new Map,this.K=!1,this.m=new pt,this.g=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.Z=new Map,this.fa=new Map,this.L=new ze(function(){return g2(t)}),this.O=!1,this.M=[],this.W=!1,this.I=new ze(function(){y2(t)}),this.m.catch(function(){}),this.l=new Ys(function(){return o2(t)}),this.$=!1,this.F=this.G=null,this.P=function(){return!1}}p=mc.prototype,p.destroy=function(){return this.l.destroy()};function o2(e){return b(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.I.stop(),e.I=null,e.L.stop(),e.L=null,I(t,fa(e),2);case 2:if(!e.j){t.s(3);break}return ye(t,4),I(t,e.j.setMediaKeys(null),6);case 6:Oe(t,5);break;case 4:ve(t);case 5:e.j=null;case 3:e.h=null,e.A=null,e.B=new Map,e.g=null,e.u=function(){},e.C=null,e.$=!1,e.G=null,ae(t)}})}p.configure=function(e,t){this.g=e,t&&(this.P=t),this.I&&this.I.ua(this.g.updateExpirationTime)};function s2(e,t,n){return e.ka=!0,e.B=new Map,e.O=n,_v(e,t,!1)}function Lv(e,t,n,r){r=r===void 0?!0:r,e.B=new Map,n=v(n);for(var i=n.next();!i.done;i=n.next())e.B.set(i.value,{initData:null,initDataType:null});for(n=v(e.g.persistentSessionsMetadata),i=n.next();!i.done;i=n.next())i=i.value,e.B.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.O=0<e.B.size,_v(e,t,r)}function u2(e,t,n,r,i,o){var s=new Map;return i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},i.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,i),bv(e,s,[])}function _v(e,t,n){var r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P;return b(function(k){if(k.g==1){for(Kv(e.g.clearKeys,t),r=t.some(function(O){return!!(O.video&&O.video.drmInfos.length||O.audio&&O.audio.drmInfos.length)}),!r&&n&&(i=ns(e.g.servers),S2(t,i)),o=new Set,s=v(t),u=s.next();!u.done;u=s.next())for(a=u.value,c=Hv(a),f=v(c),h=f.next();!h.done;h=f.next())g=h.value,o.add(g);for(y=v(o),T=y.next();!T.done;T=y.next())E=T.value,T2(E,ns(e.g.servers),ns(e.g.advanced||{}),e.g.keySystemsMapping);for(x=function(O,U){var W=[];O=v(O);for(var B=O.next();!B.done;B=O.next()){B=B.value;var K=B[U]||e.g.advanced&&e.g.advanced[B.keySystem]&&e.g.advanced[B.keySystem][U]||"",X;if((X=K=="")&&(X=(X=B.keySystem)?!!X.match(/^com\.widevine\.alpha/):!1),X&&(U=="audioRobustness"?K=[e.g.defaultAudioRobustnessForWidevine]:U=="videoRobustness"&&(K=[e.g.defaultVideoRobustnessForWidevine])),typeof K=="string")W.push(B);else if(Array.isArray(K))for(K.length===0&&(K=[""]),K=v(K),X=K.next();!X.done;X=K.next()){var q={};W.push(Object.assign({},B,(q[U]=X.value,q)))}}return W},A=new Set,M=v(t),L=M.next();!L.done;L=M.next())_=L.value,_.video&&!A.has(_.video)&&(_.video.drmInfos=x(_.video.drmInfos,"videoRobustness"),_.video.drmInfos=x(_.video.drmInfos,"audioRobustness"),A.add(_.video)),_.audio&&!A.has(_.audio)&&(_.audio.drmInfos=x(_.audio.drmInfos,"videoRobustness"),_.audio.drmInfos=x(_.audio.drmInfos,"audioRobustness"),A.add(_.audio));return A.clear(),I(k,fv(t,e.O,e.$,e.g.preferredKeySystems),2)}return Tt(e.l),F=r||Object.keys(e.g.servers).length,F?(P=bv(e,void 0,t),k.return(r?P:P.catch(function(){}))):(e.ea=!0,k.return(Promise.resolve()))})}function Nv(e){var t;return b(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.G){n.s(2);break}return I(n,e.G,3);case 3:return Tt(e.l),n.return();case 2:return ye(n,4),e.G=e.j.setMediaKeys(e.A),I(n,e.G,6);case 6:Oe(n,5);break;case 4:t=ve(n),e.u(new j(2,6,6003,t.message));case 5:Tt(e.l),ae(n)}})}function a2(e,t){return b(function(n){if(n.g==1)return I(n,Nv(e),2);ca(e,t.initDataType,Le(t.initData)),ae(n)})}p.Lb=function(e){var t=this,n;return b(function(r){if(r.g==1)return t.j===e?r.return():t.A?(t.j=e,t.o.qa(t.j,"play",function(){for(var i=v(t.M),o=i.next();!o.done;o=i.next())Lh(t,o.value);t.W=!0,t.M=[]}),t.j.remote?(t.o.D(t.j.remote,"connect",function(){return fa(t)}),t.o.D(t.j.remote,"connecting",function(){return fa(t)}),t.o.D(t.j.remote,"disconnect",function(){return fa(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.j&&t.o.D(t.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return fa(t)}),t.F=t.h&&t.h.initData.find(function(i){return 0<i.initData.length})||null,n=t.h.keySystem,n.startsWith("com.microsoft.playready.recommendation")||n=="com.apple.fps"||!(t.F||t.B.size||t.g.parseInbandPsshEnabled)?(t.o.D(t.j,"encrypted",function(i){return a2(t,i)}),r.s(2)):I(r,Nv(t),2)):(t.o.qa(e,"encrypted",function(){t.u(new j(2,6,6010))}),r.return());jv(t).catch(function(){}),ae(r)})};function l2(e){var t,n,r,i,o;return b(function(s){switch(s.g){case 1:if(!e.A||!e.h)return s.return();if(!e.h.serverCertificateUri||e.h.serverCertificate&&e.h.serverCertificate.length){s.s(2);break}return t=nn([e.h.serverCertificateUri],e.g.retryParameters),ye(s,3),n=e.C.Xb.request(5,t,{isPreload:e.P()}),I(s,n.promise,5);case 5:r=s.h,e.h.serverCertificate=Le(r.data),Oe(s,4);break;case 3:throw i=ve(s),new j(2,6,6017,i);case 4:if(e.l.g)return s.return();case 2:return!e.h.serverCertificate||!e.h.serverCertificate.length?s.return():(ye(s,6),I(s,e.A.setServerCertificate(e.h.serverCertificate),8));case 8:Oe(s,0);break;case 6:throw o=ve(s),new j(2,6,6004,o.message)}})}function c2(e,t){var n,r,i;return b(function(o){if(o.g==1)return I(o,Fv(e,t,{initData:null,initDataType:null}),2);if(o.g!=3)return n=o.h,n?(r=[],(i=e.i.get(n))&&(i.ub=new pt,r.push(i.ub)),r.push(n.remove()),I(o,Promise.all(r),3)):o.return();e.i.delete(n),ae(o)})}function jv(e){var t,n,r,i,o;return b(function(s){if(s.g==1)return e.B.size?(e.B.forEach(function(u,a){Fv(e,a,u)}),I(s,e.m,3)):s.s(2);if(s.g!=2){if(t=e.h&&e.h.keyIds||new Set([]),0<t.size&&v2(e))return s.return(e.m);e.K=!1,e.m=new pt,e.m.catch(function(){})}for(n=(e.h?e.h.initData:[])||[],r=v(n),i=r.next();!i.done;i=r.next())o=i.value,ca(e,o.initDataType,o.initData);return da(e)&&e.m.resolve(),s.return(e.m)})}function ca(e,t,n){if(n.length){if(e.g.ignoreDuplicateInitData){var r=e.i.values();r=v(r);for(var i=r.next();!i.done;i=r.next())if(Mi(n,i.value.initData))return;var o=!1;if(e.B.forEach(function(s){!o&&Mi(n,s.initData)&&(o=!0)}),o)return}e.K=!0,0<e.i.size&&da(e)&&(e.m.resolve(),e.K=!1,e.m=new pt,e.m.catch(function(){})),h2(e,t,n,e.h.sessionType)}}function Ov(e){return e=e.i.keys(),e=kh(e,function(t){return t.sessionId}),Array.from(e)}p.If=function(){var e=this,t=this.i.keys();return t=kh(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},p.pd=function(){var e=1/0,t=this.i.keys();t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},p.be=function(){return Dh(this.fa)};function bv(e,t,n){var r,i,o,s,u,a,c,f;return b(function(h){switch(h.g){case 1:if(r=new Map,n.length){i=f2(e,n,r),h.s(2);break}return I(h,d2(e,t),3);case 3:i=h.h;case 2:if(o=i,!o)throw navigator.requestMediaKeySystemAccess?new j(2,6,6001):new j(2,6,6020);if(Tt(e.l),ye(h,4),o.getConfiguration(),s=e.g.keySystemsMapping[o.keySystem]||o.keySystem,n.length){var g=s,y=r.get(s),T=[],E=[],x=[],A=[],M=[],L=new Set,_=new Set;Gv(y,T,E,A,x,M,L,_);var F=e.O?"persistent-license":"temporary";for(g={keySystem:g,encryptionScheme:T[0],licenseServerUri:E[0],distinctiveIdentifierRequired:y[0].distinctiveIdentifierRequired,persistentStateRequired:y[0].persistentStateRequired,sessionType:y[0].sessionType||F,audioRobustness:y[0].audioRobustness||"",videoRobustness:y[0].videoRobustness||"",serverCertificate:A[0],serverCertificateUri:x[0],initData:M,keyIds:L},0<_.size&&(g.keySystemUris=_),y=v(y),_=y.next();!_.done;_=y.next())_=_.value,_.distinctiveIdentifierRequired&&(g.distinctiveIdentifierRequired=_.distinctiveIdentifierRequired),_.persistentStateRequired&&(g.persistentStateRequired=_.persistentStateRequired);y=g}else y=s,_=t.get(s),g=[],T=[],E=[],x=[],A=[],M=new Set,Gv(_.drmInfos,g,T,x,E,A,M),y={keySystem:y,encryptionScheme:g[0],licenseServerUri:T[0],distinctiveIdentifierRequired:_.distinctiveIdentifier=="required",persistentStateRequired:_.persistentState=="required",sessionType:_.sessionTypes[0]||"temporary",audioRobustness:(_.audioCapabilities?_.audioCapabilities[0].robustness:"")||"",videoRobustness:(_.videoCapabilities?_.videoCapabilities[0].robustness:"")||"",serverCertificate:x[0],serverCertificateUri:E[0],initData:A,keyIds:M};if(e.h=y,!e.h.licenseServerUri)throw new j(2,6,6012,e.h.keySystem);return I(h,o.createMediaKeys(),6);case 6:if(u=h.h,Tt(e.l),e.A=u,!(e.g.minHdcpVersion!=""&&"getStatusForPolicy"in e.A)){h.s(7);break}return ye(h,8),I(h,e.A.getStatusForPolicy({minHdcpVersion:e.g.minHdcpVersion}),10);case 10:if(a=h.h,a!="usable")throw new j(2,6,6018);Tt(e.l),Oe(h,7,4);break;case 8:throw c=ve(h,4),c instanceof j?c:new j(2,6,6019,c.message);case 7:return e.ea=!0,I(h,l2(e),11);case 11:Tt(e.l),Oe(h,0);break;case 4:throw f=ve(h),Tt(e.l,f),e.h=null,f instanceof j?f:new j(2,6,6002,f.message)}})}function f2(e,t,n){for(var r=v(t),i=r.next();!i.done;i=r.next()){i=v(Hv(i.value));for(var o=i.next();!o.done;o=i.next())o=o.value,n.has(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o)}if(n.size==1&&n.has(""))throw new j(2,6,6e3);r=e.g.preferredKeySystems,r.length||(i=ns(e.g.servers),i.size==1&&(r=Array.from(i.keys()))),i=v(r);var s=i.next();for(o={};!s.done;o={oh:void 0},s=i.next()){o.oh=s.value,s=v(t);for(var u=s.next();!u.done;u=s.next())if(u=u.value.decodingInfos.find(function(h){return function(g){return g.supported&&g.keySystemAccess!=null&&g.keySystemAccess.keySystem==h.oh}}(o)))return u.keySystemAccess}for(i=v([!0,!1]),o=i.next();!o.done;o=i.next())for(o=o.value,s=v(t),u=s.next();!u.done;u=s.next()){u=v(u.value.decodingInfos);for(var a=u.next();!a.done;a=u.next())if(a=a.value,a.supported&&a.keySystemAccess){var c=a.keySystemAccess.keySystem;if(!r.includes(c)){var f=n.get(c);for(!f&&e.g.keySystemsMapping[c]&&(f=n.get(e.g.keySystemsMapping[c])),c=v(f),f=c.next();!f.done;f=c.next())if(!!f.value.licenseServerUri==o)return a.keySystemAccess}}}return null}function d2(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A;return b(function(M){switch(M.g){case 1:if(t.size==1&&t.has(""))throw new j(2,6,6e3);for(r=v(t.values()),i=r.next();!i.done;i=r.next())o=i.value,o.audioCapabilities.length==0&&delete o.audioCapabilities,o.videoCapabilities.length==0&&delete o.videoCapabilities;s=v(e.g.preferredKeySystems),u=s.next();case 2:if(u.done){M.s(4);break}if(a=u.value,!t.has(a)){M.s(3);break}return c=t.get(a),ye(M,6),I(M,navigator.requestMediaKeySystemAccess(a,[c]),8);case 8:return n=M.h,M.return(n);case 6:ve(M);case 7:Tt(e.l);case 3:u=s.next(),M.s(2);break;case 4:f=v([!0,!1]),h=f.next();case 9:if(h.done){M.s(11);break}g=h.value,y=v(t.keys()),T=y.next();case 12:if(T.done){h=f.next(),M.s(9);break}if(E=T.value,x=t.get(E),A=x.drmInfos.some(function(L){return!!L.licenseServerUri}),A!=g){M.s(13);break}return ye(M,15),I(M,navigator.requestMediaKeySystemAccess(E,[x]),17);case 17:return n=M.h,M.return(n);case 15:ve(M);case 16:Tt(e.l);case 13:T=y.next(),M.s(12);break;case 11:return M.return(n)}})}function Ph(e){da(e)&&e.m.resolve()}function Uv(e,t){new ze(function(){t.loaded=!0,Ph(e)}).da(x2)}function Fv(e,t,n){var r,i,o,s,u,a,c;return b(function(f){switch(f.g){case 1:try{r=e.A.createSession("persistent-license")}catch(h){return i=new j(2,6,6005,h.message),e.u(i),f.return(Promise.reject(i))}return e.o.D(r,"message",function(h){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(h):Lh(e,h)}),e.o.D(r,"keystatuseschange",function(h){return Bv(e,h)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Xf:1/0,ub:null,type:"persistent-license"},e.i.set(r,o),ye(f,2),I(f,r.load(t),4);case 4:return s=f.h,Tt(e.l),s||(e.i.delete(r),u=e.g.persistentSessionOnlinePlayback?1:2,e.u(new j(u,6,6013)),o.loaded=!0),Uv(e,o),Ph(e),f.return(r);case 2:a=ve(f),Tt(e.l,a),e.i.delete(r),c=e.g.persistentSessionOnlinePlayback?1:2,e.u(new j(c,6,6005,a.message)),o.loaded=!0,Ph(e);case 3:return f.return(Promise.resolve())}})}function h2(e,t,n,r){try{var i=e.A.createSession(r)}catch(o){e.u(new j(2,6,6005,o.message));return}e.o.D(i,"message",function(o){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(o):Lh(e,o)}),e.o.D(i,"keystatuseschange",function(o){return Bv(e,o)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Xf:1/0,ub:null,type:r});try{n=e.g.initDataTransform(n,t,e.h)}catch(o){t=o,o instanceof j||(t=new j(2,6,6016,o)),e.u(t);return}e.g.logLicenseExchange&&Di(n),i.generateRequest(t,n).catch(function(o){if(!e.l.g){e.i.delete(i);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.u(new j(2,6,6006,o.message,o,u))}})}function p2(e){return b(function(t){return t.g==1?e.K?I(t,e.m,3):t.s(0):I(t,Promise.all(e.T.map(function(n){return n.promise})),0)})}function Lh(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E;b(function(x){switch(x.g){case 1:if(n=t.target,e.g.logLicenseExchange&&Di(t.message),r=e.i.get(n),i=e.h.licenseServerUri,o=e.g.advanced[e.h.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(i=o.individualizationServer),s=nn([i],e.g.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.h,r&&(s.initData=r.initData,s.initDataType=r.initDataType),o&&o.headers)for(u in o.headers)s.headers[u]=o.headers[u];if(e.h.keySystem==="org.w3.clearkey"){var A=s,M=e.h;try{var L=di(A.body);if(L){var _=JSON.parse(L);_.type||(_.type=M.sessionType,A.body=Hr(JSON.stringify(_)))}}catch{}}if(Xd(e.h.keySystem))if(A=ao(s.body,!0,!0),A.includes("PlayReadyKeyMessage")){for(A=qo(A,"PlayReadyKeyMessage"),M=ti(A,"HttpHeader"),M=v(M),L=M.next();!L.done;L=M.next())_=L.value,L=ti(_,"name")[0],_=ti(_,"value")[0],s.headers[Qt(L)]=Qt(_);A=ti(A,"Challenge")[0],s.body=Ir(Qt(A))}else s.headers["Content-Type"]="text/xml; charset=utf-8";return a=Date.now(),ye(x,2),f=e.C.Xb.request(2,s,{isPreload:e.P()}),e.T.push(f),I(x,f.promise,4);case 4:c=x.h,Gr(e.T,f),Oe(x,3);break;case 2:return h=ve(x),e.l.g||(g=new j(2,6,6007,h),e.i.size==1?(e.u(g),r&&r.ub&&r.ub.reject(g)):(r&&r.ub&&r.ub.reject(g),e.i.delete(n),da(e)&&(e.m.resolve(),e.L.da(.1)))),x.return();case 3:return e.l.g?x.return():(e.H+=(Date.now()-a)/1e3,e.g.logLicenseExchange&&Di(c.data),ye(x,5),I(x,n.update(c.data),7));case 7:Oe(x,6);break;case 5:return y=ve(x),T=new j(2,6,6008,y.message),e.u(T),r&&r.ub&&r.ub.reject(T),x.return();case 6:if(e.l.g)return x.return();E=new ce("drmsessionupdate"),e.C.onEvent(E),r&&(r.ub&&r.ub.resolve(),Uv(e,r)),ae(x)}})}function Bv(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(o,s){if(typeof s=="string"){var u=s;s=o,o=u}if(Xd(e.h.keySystem)&&s.byteLength==16&&(Ps()||Zr())){u=Un(s);var a=u.getUint32(0,!0),c=u.getUint16(4,!0),f=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,c,!1),u.setUint16(6,f,!1)}o!="status-pending"&&(n.loaded=!0),o=="expired"&&(r=!0),s=Ri(s).slice(0,32),e.Z.set(s,o)});var i=t.expiration-Date.now();(0>i||r&&1e3>i)&&n&&!n.ub&&(e.i.delete(t),Vv(t)),da(e)&&(e.m.resolve(),e.L.da(E2))}function g2(e){var t=e.Z,n=e.fa;n.clear(),t.forEach(function(r,i){return n.set(i,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.u(new j(2,6,6014)),e.C.te(Dh(n))}function m2(){var e,t,n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne;return b(function(ue){if(ue.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(S.MediaKeys&&S.navigator&&S.navigator.requestMediaKeySystemAccess&&S.MediaKeySystemAccess&&S.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=v(e),r=n.next();!r.done;r=n.next())i=r.value,t[i]=null;return ue.return(t)}for(o="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],u=["150","2000","3000"],a={"com.widevine.alpha":s,"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":u},c=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],f=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],h={videoCapabilities:c,audioCapabilities:f,initDataTypes:["cenc","sinf","skd","keyids"]},g=[null,"cenc","cbcs","cbcs-1-9"],y=new Map,T=function(Re,ge){var st,qe,Ke,We,ot,Ve,$e,Ne,He,vt,sn,_t,Ot;return b(function(Zt){switch(Zt.g){case 1:return ye(Zt,2),I(Zt,ge.createMediaKeys(),5);case 5:st=Zt.h;case 4:Oe(Zt,3);break;case 2:return ve(Zt),Zt.return();case 3:if(Ke=(qe=ge.getConfiguration().sessionTypes)?qe.includes("persistent-license"):!1,Ci()&&(Ke=!1),We=ge.getConfiguration().videoCapabilities,ot=ge.getConfiguration().audioCapabilities,Ve={persistentState:Ke,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},y.has(Re)&&y.get(Re)?Ve=y.get(Re):y.set(Re,Ve),($e=We[0].encryptionScheme)&&!Ve.encryptionSchemes.includes($e)&&Ve.encryptionSchemes.push($e),(Ne=We[0].robustness)&&!Ve.videoRobustnessLevels.includes(Ne)&&Ve.videoRobustnessLevels.push(Ne),(He=ot[0].robustness)&&!Ve.audioRobustnessLevels.includes(He)&&Ve.audioRobustnessLevels.push(He),"getStatusForPolicy"in st){for(vt=[],sn=v(o),_t=sn.next(),Ot={};!_t.done;Ot={td:void 0},_t=sn.next())Ot.td=_t.value,Ve.minHdcpVersions.includes(Ot.td)||vt.push(st.getStatusForPolicy({minHdcpVersion:Ot.td}).then(function(ln){return function(vs){vs!="usable"||Ve.minHdcpVersions.includes(ln.td)||Ve.minHdcpVersions.push(ln.td)}}(Ot)));return I(Zt,Promise.all(vt),0)}Zt.s(0)}})},E=function(Re,ge,st,qe){var Ke,We,ot,Ve,$e,Ne,He,vt,sn,_t;return b(function(Ot){switch(Ot.g){case 1:for(ye(Ot,2),Ke=ei(h),We=v(Ke.videoCapabilities),ot=We.next();!ot.done;ot=We.next())Ve=ot.value,Ve.encryptionScheme=ge,Ve.robustness=st;for($e=v(Ke.audioCapabilities),Ne=$e.next();!Ne.done;Ne=$e.next())He=Ne.value,He.encryptionScheme=ge,He.robustness=qe;return vt=ei(Ke),vt.persistentState="required",vt.sessionTypes=["persistent-license"],sn=[vt,Ke],uo()?I(Ot,sa(5,navigator.requestMediaKeySystemAccess(Re,sn)),7):I(Ot,navigator.requestMediaKeySystemAccess(Re,sn),6);case 6:_t=Ot.h,Ot.s(5);break;case 7:_t=Ot.h;case 5:return I(Ot,T(Re,_t),8);case 8:Oe(Ot,0);break;case 2:ve(Ot),ae(Ot)}})},x=function(Re,ge,st,qe){var Ke,We,ot;return b(function(Ve){switch(Ve.g){case 1:return ye(Ve,2),Ke={type:"media-source",video:{contentType:c[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:f[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:Re,video:{encryptionScheme:ge,robustness:st},audio:{encryptionScheme:ge,robustness:qe}}},uo()?I(Ve,sa(5,navigator.mediaCapabilities.decodingInfo(Ke)),7):I(Ve,navigator.mediaCapabilities.decodingInfo(Ke),6);case 6:We=Ve.h,Ve.s(5);break;case 7:We=Ve.h;case 5:return ot=We.keySystemAccess,I(Ve,T(Re,ot),8);case 8:Oe(Ve,0);break;case 2:ve(Ve),ae(Ve)}})},A=v(e),M=A.next();!M.done;M=A.next())L=M.value,y.set(L,null);for(_=function(Re){return!(Re==="org.w3.clearkey"&&pn())},F=[],P=v(g),k=P.next();!k.done;k=P.next())for(O=k.value,U=v(e),W=U.next();!W.done;W=U.next())B=W.value,_(B)&&(F.push(E(B,O,"","")),F.push(x(B,O,"","")));for(K=v(e),X=K.next();!X.done;X=K.next())for(q=X.value,Q=v(a[q]||[]),Y=Q.next();!Y.done;Y=Q.next())ne=Y.value,_(q)&&(F.push(E(q,null,ne,"")),F.push(E(q,null,"",ne)),F.push(x(q,null,ne,"")),F.push(x(q,null,"",ne)));return I(ue,Promise.all(F),2)}return ue.return(Dh(y))})}function Vv(e){return b(function(t){if(t.g==1)return ye(t,2),I(t,sa(w2,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return Oe(t,0);ve(t),ae(t)})}function fa(e){var t;return b(function(n){return t=Array.from(e.i.entries()),e.i.clear(),I(n,Promise.all(t.map(function(r){r=v(r);var i=r.next().value,o=r.next().value;return b(function(s){if(s.g==1)return ye(s,2),e.ka||e.B.has(i.sessionId)||o.type!=="persistent-license"||e.g.persistentSessionOnlinePlayback?I(s,Vv(i),5):I(s,i.remove(),5);if(s.g!=2)return Oe(s,0);ve(s),ae(s)})})),0)})}function Hv(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function y2(e){e.i.forEach(function(t,n){var r=t.Xf,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.C.onExpirationUpdated(n.sessionId,i),t.Xf=i)})}function da(e){return e=e.i.values(),r2(e,function(t){return t.loaded})}function v2(e){for(var t=v(e.h&&e.h.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function S2(e,t){var n=[];for(t.forEach(function(r,i){n.push({keySystem:i,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=v(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Gv(e,t,n,r,i,o,s,u){var a=[];e=v(e);for(var c=e.next(),f={};!c.done;f={wa:void 0},c=e.next()){if(f.wa=c.value,t.includes(f.wa.encryptionScheme)||t.push(f.wa.encryptionScheme),f.wa.keySystem=="org.w3.clearkey"&&f.wa.licenseServerUri.startsWith("data:application/json;base64,")?a.includes(f.wa.licenseServerUri)||a.push(f.wa.licenseServerUri):n.includes(f.wa.licenseServerUri)||n.push(f.wa.licenseServerUri),i.includes(f.wa.serverCertificateUri)||i.push(f.wa.serverCertificateUri),f.wa.serverCertificate&&(r.some(function(y){return function(T){return Mi(T,y.wa.serverCertificate)}}(f))||r.push(f.wa.serverCertificate)),f.wa.initData){c=v(f.wa.initData);for(var h=c.next(),g={};!h.done;g={Of:void 0},h=c.next())g.Of=h.value,o.some(function(y){return function(T){var E=y.Of;return T.keyId&&T.keyId==E.keyId?!0:T.initDataType==E.initDataType&&Mi(T.initData,E.initData)}}(g))||o.push(g.Of)}if(f.wa.keyIds)for(c=v(f.wa.keyIds),h=c.next();!h.done;h=c.next())s.add(h.value);if(f.wa.keySystemUris&&u)for(f=v(f.wa.keySystemUris),c=f.next();!c.done;c=f.next())u.add(c.value)}if(a.length==1)n.push(a[0]);else if(0<a.length){for(t=[],a=v(a),r=a.next();!r.done;r=a.next())r=S.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,J(r.keys));a=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+S.btoa(a))}}function T2(e,t,n,r){var i=e.keySystem;i&&(i!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(i)&&(t=t.get(i),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(i))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[i]&&(e.keySystem=r[i]),S.cast&&S.cast.__platform__&&i=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function Kv(e,t){if(e=ns(e),e.size!=0){e=Ny(e),t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var w2=1,x2=5,E2=.5;function yc(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=v(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}yc.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var r;if(!(r=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(r=n.audio&&e.audio)){r=n.audio;var i=e.audio;r=!(!((!r.channelsCount||!i.channelsCount||2<r.channelsCount||2<i.channelsCount)&&r.channelsCount!=i.channelsCount||r.spatialAudio!==i.spatialAudio||t&&!Wv(r,i))&&Xv(r.roles,i.roles)&&r.groupId===i.groupId)}return!r&&(r=n.video&&e.video)&&(n=n.video,r=e.video,r=!((!t||Wv(n,r))&&Xv(n.roles,r.roles))),r?!1:(this.g.add(e),!0)},yc.prototype.values=function(){return this.g.values()};function Wv(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return go(r)}),t=t.codecs.split(",").map(function(r){return go(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Xv(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=v(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}D("shaka.media.AdaptationSet",yc),D("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function _h(){}_h.prototype.create=function(){},_h.prototype.configure=function(){},D("shaka.media.AdaptationSetCriteria",_h);function A2(){this.g=ha,this.i=new Map().set(ha,2).set(Qs,1),this.h=0}var Qs=0,ha=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Nh(e,t,n){this.g=e,this.i=t,this.h=n}function zv(e,t){return b(function(n){if(n.g==1)return I(n,GI(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||av(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(la))throw new j(2,4,4032);return n.return(Yv(e,t))})}function qv(e,t){var n=e.g.restrictions;e=e.i;var r=!1;t=v(t.variants);for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=i.allowedByApplication;i.allowedByApplication=sc(i,n,e),o!=i.allowedByApplication&&(r=!0)}return r}function Yv(e,t){var n=qv(e,t);if(t){var r=e.h?e.h.h:null;if(r&&e.h.A){for(var i=new Set,o=v(t.variants),s=o.next();!s.done;s=o.next())s=s.value,s.audio&&i.add(s.audio),s.video&&i.add(s.video);for(i=v(i),o=i.next();!o.done;o=i.next())$v(e,r.keySystem,o.value)}Qv(e,t)}return n}function $v(e,t,n){n=v(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=v(r.initData||[]);for(var i=r.next();!i.done;i=r.next())i=i.value,ca(e.h,i.initDataType,i.initData)}}function Qv(e,t){e=e.h?e.h.be():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,i=!1,o=new Set,s=new Set,u=new Set;t=v(t.variants);for(var a=t.next();!a.done;a=t.next())a=a.value,a.audio&&u.add(a.audio),a.video&&u.add(a.video),a.allowedByApplication?a.allowedByKeySystem&&(r=!0):i=!0;for(u=v(u),t=u.next();!t.done;t=u.next())if(t=t.value,t.keyIds.size)for(t=v(t.keyIds),a=t.next();!a.done;a=t.next()){a=a.value;var c=e[n?"00":a];c?jh.includes(c)&&s.add(c):o.add(a)}if(!r)throw e={hasAppRestrictions:i,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new j(2,4,4012,e)}var jh=["output-restricted","internal-error"];function pa(){}function rs(e,t){Js.set(e,t)}function I2(){var e={};if(ci())for(var t=v(Js.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=v(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=ci()?Js.has(n):zu(n);return e}function Jv(e,t){if(t){var n=Js.get(t.toLowerCase());if(n)return n}throw new j(2,4,4e3,e,t)}D("shaka.media.ManifestParser",pa),pa.unregisterParserByMime=function(e){Js.delete(e)},pa.registerParserByMime=rs,pa.registerParserByExtension=function(){tt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},pa.AccessibilityPurpose={Pk:"visually impaired",fk:"hard of hearing"};var Js=new Map;function vc(e,t){var n=null,r=null,i=null,o=null,s=e.S();return t&1&&(i=e.bd()),t&2&&(o=e.S()),t&8&&(n=e.S()),t&16&&(r=e.S()),{trackId:s,ld:n,md:r,Xh:i,sh:o}}function Sc(e,t){return t==1?(t=e.S(),e=e.S(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.S()}}function Tc(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.S(),e.skip(4),e=e.ma(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function wc(e,t,n){var r=e.S(),i=[],o=null;n&1&&(o=e.bg()),n&4&&e.skip(4);for(var s=0;s<r;s++){var u={ig:null,sampleSize:null,Be:null};n&256&&(u.ig=e.S()),n&512&&(u.sampleSize=e.S()),n&1024&&e.skip(4),n&2048&&(u.Be=t==0?e.S():e.bg()),i.push(u)}return{Uk:r,hg:i,qf:o}}function Zv(e){e.skip(6),e.skip(2),e.skip(8);var t=e.ma();return e.skip(2),e.skip(2),e.skip(2),e=e.ma()+e.ma()/65536,{channelCount:t,sampleRate:e}}function Oh(e){return e=e.S(),{codec:pc(e)}}function M2(e){var t=null,n=null,r=e.Db(4),i=String.fromCharCode(r[0]);if(i+=String.fromCharCode(r[1]),i+=String.fromCharCode(r[2]),i+=String.fromCharCode(r[3]),i==="nclx"){switch(e.ma()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.ma(),e.ma(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,Od:n}}function ga(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function nr(e){return(10>e?"0":"")+e}function is(e){if(!i0){i0=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);xc=et("ftyp",t,r,t,n),t=et("dref",b2),bh=et("dinf",t)}this.g=e}function Zs(e){for(var t=[],n=v(e.g),r=n.next();!r.done;r=n.next()){var i=t,o=i.push,s=r.value;r=et;var u=s.id+1,a=s.stream.width||0,c=s.stream.height||0;s.type=="audio"&&(c=a=0);var f=s.duration*s.timescale,h=Math.floor(f/(vo+1));switch(f=Math.floor(f%(vo+1)),u=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(J(Pt(u,4)),[0,0,0,0],J(Pt(h,4)),J(Pt(f,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],J(Pt(a,2)),[0,0],J(Pt(c,2)),[0,0])),u=et("tkhd",u),a=et,h=s.duration*s.timescale,c=Math.floor(h/(vo+1)),h=Math.floor(h%(vo+1)),f=s.stream.language,f=f.charCodeAt(0)-96<<10|f.charCodeAt(1)-96<<5|f.charCodeAt(2)-96,c=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(J(Pt(s.timescale,4)),J(Pt(c,4)),J(Pt(h,4)),J(Pt(f,2)),[0,0])),c=et("mdhd",c),h=s,f=new Uint8Array([]),h.type){case"video":f=k2;break;case"audio":f=D2}h=et("hdlr",f);e:{switch(s.type){case"video":s=et("minf",et("vmhd",N2),bh,e0(s));break e;case"audio":s=et("minf",et("smhd",j2),bh,e0(s));break e}s=new Uint8Array([])}s=a("mdia",c,h,s),r=r("trak",u,s),o.call(i,r)}for(t=Ht.apply(yn,J(t)),o=e.g[0],n=et,r=o.duration*o.timescale,i=Math.floor(r/(vo+1)),r=Math.floor(r%(vo+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(J(Pt(o.timescale,4)),J(Pt(i,4)),J(Pt(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),i=et("mvhd",i),r=[],e=v(e.g),a=e.next();!a.done;a=e.next())s=r,u=s.push,a=new Uint8Array([0,0,0,0].concat(J(Pt(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=et("trex",a),u.call(s,a);if(e=Ht.apply(yn,J(r)),e=et("mvex",e),r=[],o.encrypted){for(o=v(o.stream.drmInfos),s=o.next();!s.done;s=o.next())if(s=s.value,s.initData)for(s=v(s.initData),u=s.next();!u.done;u=s.next())r.push(u.value.initData);o=Ht.apply(yn,J(r))}else o=new Uint8Array([]);return e=n("moov",i,t,e,o),t=new Uint8Array(xc.byteLength+e.byteLength),t.set(xc),t.set(e,xc.byteLength),t}function e0(e){var t=et,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=Ci()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var r=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,r=e.stream.height||0,0<e.Ca.byteLength)var i=et("avcC",e.Ca);else{i=et;for(var o=7,s=[],u=[],a=0,c=0,f=0,h=0;h<e.lb.length;h++){var g=n0(e.lb[h]);switch(g[0]&31){case 7:s.push(g),o+=g.length+2;break;case 8:u.push(g),o+=g.length+2}}for(0<s.length&&(a=s[0][1],f=s[0][2],c=s[0][3]),o=new Uint8Array(o),h=0,o[h++]=1,o[h++]=a,o[h++]=f,o[h++]=c,o[h++]=255,o[h++]=224|s.length,a=0;a<s.length;a++)o[h++]=(s[a].length&65280)>>8,o[h++]=s[a].length&255,o.set(s[a],h),h+=s[a].length;for(o[h++]=u.length,s=0;s<u.length;s++)o[h++]=(u[s].length&65280)>>8,o[h++]=u[s].length&255,o.set(u[s],h),h+=u[s].length;i=i("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(J(Pt(n,2)),J(Pt(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",u=t0(e),s=new Uint8Array([]),e.encrypted&&(s=os(0,e.stream,e.codecs),r="encv"),r=et(r,n,i,u,s)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),0<e.Ca.byteLength&&(n=et("hvcC",e.Ca)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(J(Pt(r,2)),J(Pt(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",u=t0(e),s=new Uint8Array([]),e.encrypted&&(s=os(0,e.stream,e.codecs),i="encv"),r=et(i,r,n,u,s));break;case"audio":n=="mp3"?e=et(".mp3",ma(e)):n=="ac-3"?(n=et("dac3",e.ra),r="ac-3",i=new Uint8Array([]),e.encrypted&&(i=os(0,e.stream,e.codecs),r="enca"),e=et(r,ma(e),n,i)):n=="ec-3"?(n=et("dec3",e.ra),r="ec-3",i=new Uint8Array([]),e.encrypted&&(i=os(0,e.stream,e.codecs),r="enca"),e=et(r,ma(e),n,i)):n=="opus"?(n=et("dOps",e.ra),r="Opus",i=new Uint8Array([]),e.encrypted&&(i=os(0,e.stream,e.codecs),r="enca"),e=et(r,ma(e),n,i)):(0<e.ra.byteLength?n=et("esds",e.ra):(n=et,r=e.id+1,i=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=js("audio",e.codecs.split(",")),c={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=c[s],(a==="mp4a.40.5"||a==="mp4a.40.29")&&(u=c[2*s]),s=parseInt(a.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(J(Pt(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|i<<3,6,1,2])),n=n("esds",r)),r="mp4a",i=new Uint8Array([]),e.encrypted&&(i=os(0,e.stream,e.codecs),r="enca"),e=et(r,ma(e),n,i)),r=e}return e=et("stsd",O2,r),t("stbl",e,et("stts",R2),et("stsc",P2),et("stsz",_2),et("stco",L2))}function t0(e){if(!e.Ia&&!e.La)return new Uint8Array([]);var t=e.La;return e=new Uint8Array([].concat(J(Pt(e.Ia,4)),J(Pt(t,4)))),et("pasp",e)}function ma(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(J(Pt(e.stream.audioSamplingRate||44100,2)),[0,0]))}function os(e,t,n){e=et,n=new Uint8Array([].concat(J(Pt(r0(n.split(".")[0]),4)))),n=et("frma",n);var r="cenc",i=t.drmInfos[0];i&&i.encryptionScheme&&(r=i.encryptionScheme),r=new Uint8Array([0,0,0,0].concat(J(Pt(r0(r),4)),[0,1,0,0])),r=et("schm",r),i=et;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t=v(t.drmInfos);for(var s=t.next();!s.done;s=t.next())if((s=s.value)&&s.keyIds&&s.keyIds.size){s=v(s.keyIds);for(var u=s.next();!u.done;u=s.next())o=n0(u.value)}return t=new Uint8Array([0,0,0,0,0,0,1,8]),t=et("tenc",t,o),e("sinf",n,r,i("schi",t))}function ya(e){var t=[];e=v(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,i=r.apply,o=et,s=new Uint8Array([0,0,0,0].concat(J(Pt(n.data?n.data.Eb:0,4))));s=et("mfhd",s);var u,a=n.data?n.data.jb:[],c=new Uint8Array(4+a.length);for(u=0;u<a.length;u++){var f=a[u].flags;c[u+4]=f.Ya<<4|f.$a<<2|f.Za}a=et("sdtp",c);var h=a.length+92;c=et,u=new Uint8Array([0,0,0,58].concat(J(Pt(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=et("tfhd",u),f=n.data?n.data.baseMediaDecodeTime:0;var g=Math.floor(f%(vo+1));f=new Uint8Array([1,0,0,0].concat(J(Pt(Math.floor(f/(vo+1)),4)),J(Pt(g,4)))),f=et("tfdt",f);var y=h;h=n.data?n.data.jb:[],g=h.length;var T=12+16*g,E=new Uint8Array(T);for(y+=8+T,E.set([n.type==="video"?1:0,0,15,1].concat(J(Pt(g,4)),J(Pt(y,4))),0),y=0;y<g;y++){var x=h[y];T=Pt(x.duration,4);var A=Pt(x.size,4),M=x.flags;x=Pt(x.eb,4),E.set([].concat(J(T),J(A),[M.hb<<2|M.Ya,M.$a<<6|M.Za<<4|M.ib,M.Xa&61440,M.Xa&15],J(x)),12+16*y)}h=et("trun",E),a=c("traf",u,f,h,a),o=o("moof",s,a),i.call(r,t,[o,C2(n)])}return Ht.apply(yn,J(t))}function C2(e){return e=(e.data?e.data.jb:[]).map(function(t){return t.data}),e=Ht.apply(yn,J(e)),et("mdat",e)}function Pt(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function n0(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function r0(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function et(e){var t=en.apply(1,arguments),n=o0.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],o0.set(e,n));for(var r=8,i=t.length-1;0<=i;i--)r+=t[i].byteLength;for(i=new Uint8Array(r),i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=r&255,i.set(n,4),n=0,r=8;n<t.length;n++)i.set(t[n],r),r+=t[n].byteLength;return i}var i0=!1,vo=Math.pow(2,32)-1,o0=new Map,k2=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),D2=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),R2=new Uint8Array([0,0,0,0,0,0,0,0]),P2=new Uint8Array([0,0,0,0,0,0,0,0]),L2=new Uint8Array([0,0,0,0,0,0,0,0]),_2=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N2=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),j2=new Uint8Array([0,0,0,0,0,0,0,0]),O2=new Uint8Array([0,0,0,0,0,0,0,1]),xc=new Uint8Array([]),b2=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),bh=new Uint8Array([]);function U2(e){e=Le(e);var t=null;return new mt().box("moov",Fe).box("trak",Fe).box("mdia",Fe).box("minf",Fe).box("stbl",Fe).R("stsd",Fi).box("enca",function(n){return t=n.reader.h,hc(n)}).box("sinf",Fe).box("frma",function(n){n.parser.stop(),Oh(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function F2(e,t,n){function r(y){h.push({box:y,ih:1701733217})}function i(y){h.push({box:y,ih:1701733238})}function o(y){a=!0,y.parser.stop()}function s(y){f.push(y),Fe(y)}var u=t=Le(t),a=!1,c,f=[],h=[];if(new mt().box("moov",s).box("trak",s).box("mdia",s).box("minf",s).box("stbl",s).R("stsd",function(y){c=y,f.push(y),Fi(y)}).R("encv",o).R("enca",o).R("dvav",i).R("dva1",i).R("dvh1",i).R("dvhe",i).R("dvc1",i).R("dvi1",i).R("hev1",i).R("hvc1",i).R("avc1",i).R("avc3",i).R("ac-3",r).R("ec-3",r).R("ac-4",r).R("Opus",r).R("fLaC",r).R("mp4a",r).parse(t),a)return t;if(h.length==0||!c)throw Ri(t),new j(2,3,3019,n);h.reverse(),n=v(h);for(var g=n.next();!g.done;g=n.next())g=g.value,u=H2(e,u,c,g.box,f,g.ih);return Ps()&&Yl()&&!Jr()?(e=new Uint8Array(t.byteLength+u.byteLength),e.set(u),e.set(t,u.byteLength),e):u}function B2(e){e=Le(e);var t=[];new mt().box("mdat",function(s){t.push(s)}).parse(e);for(var n=[],r=0;r<t.length;r++){var i=t[r-1],o=t[r];n.push(V2(e.subarray(i?i.start+i.size:0,o.start+o.size)))}return Ht.apply(yn,J(n))}function V2(e){function t(h){s.push(h),Fe(h)}var n,r,i,o,s=[];if(new mt().box("moof",t).box("traf",t).R("tfhd",function(h){n=h,i=vc(h.reader,h.flags)}).R("trun",function(h){r=h,o=wc(h.reader,h.version,h.flags)}).parse(e),i&&i.sh!==2){var u=n.start+yo(n)+4+(i.Xh!==null?8:0),a=Un(e);if(i.sh!==null)a.setUint32(u,2);else{Ec(e,n.start,n.size+4);var c=a.getUint32(n.start+8);a.setUint32(n.start+8,c|2),o&&o.qf!==null&&a.setInt32(r.start+yo(r)+4,o.qf+4),c=e.subarray(0,u),a=e.subarray(u),e=new Uint8Array(e.byteLength+4),e.set(c),c=[];for(var f=3;0<=f;f--)c.push(2>>8*f&255);for(e.set(new Uint8Array(c),u),e.set(a,u+4),u=v(s),a=u.next();!a.done;a=u.next())a=a.value,Ec(e,a.start,a.size+4)}}return e}function H2(e,t,n,r,i,o){var s=os(new is([]),e,r.name),u=t.subarray(r.start,r.start+r.size);for(e=new Uint8Array(r.size+s.byteLength),e.set(u,0),Un(e).setUint32(4,o),e.set(s,r.size),Ec(e,0,e.byteLength),o=new Uint8Array(t.byteLength+e.byteLength),r=pn()||Jr()||Ps()?r.start:r.start+r.size,s=t.subarray(r),o.set(t.subarray(0,r)),o.set(e,r),o.set(s,r+e.byteLength),t=v(i),i=t.next();!i.done;i=t.next())i=i.value,Ec(o,i.start,i.size+e.byteLength);return e=Un(o,n.start),n=yo(n),t=e.getUint32(n),e.setUint32(n,t+1),o}function Ec(e,t,n){e=Un(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function G2(e){function t(i){r.push({start:i.start,size:i.size}),Fe(i)}var n=Le(e),r=[];return new mt().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(i){r.push({start:i.start,size:i.size});for(var o=Un(n,i.start),s=0;s<i.size-3;s++){var u=o.getUint32(s);u==1633889587?o.setUint32(s,1700998451):u==1684103987&&o.setUint32(s,1684366131)}}).parse(n),n}function Vn(e,t,n,r,i,o,s,u){this.N=e,this.Sa=t,this.xa=n,this.Wc=r===void 0?null:r,this.timescale=i===void 0?null:i,this.h=o===void 0?null:o,this.aesKey=s===void 0?null:s,this.g=this.mimeType=this.codecs=null,this.encrypted=u===void 0?!1:u}Vn.prototype.uc=function(){return this.Sa},Vn.prototype.tc=function(){return this.xa},Vn.prototype.Ld=function(e){this.h=e},Vn.prototype.Ib=function(){return this.h};function Ac(e,t){return e===t?!0:e&&t?e.uc()==t.uc()&&e.tc()==t.tc()&&bs(e.N().sort(),t.N().sort())&&Mi(e.Ib(),t.Ib()):e==t}D("shaka.media.InitSegmentReference",Vn),Vn.prototype.getEndByte=Vn.prototype.tc,Vn.prototype.getStartByte=Vn.prototype.uc;function xe(e,t,n,r,i,o,s,u,a,c,f,h,g,y,T,E){for(c=c===void 0?[]:c,y=y===void 0?Bi:y,this.startTime=e,this.j=this.endTime=t,this.C=n,this.Sa=r,this.xa=i,this.Y=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.g=c,this.tilesLayout=f===void 0?"":f,this.B=h===void 0?null:h,this.h=g===void 0?null:g,this.status=y,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=T===void 0?null:T,this.thumbnailSprite=null,this.i=-1,this.A=E===void 0?!1:E,this.F=this.o=!1,e=v(this.g),t=e.next();!t.done;t=e.next())t.value.gh();this.A&&this.g.length&&this.g[this.g.length-1].fh(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}p=xe.prototype,p.N=function(){return this.C()},p.getStartTime=function(){return this.startTime},p.oi=function(){return this.endTime},p.uc=function(){return this.Sa},p.tc=function(){return this.xa},p.Li=function(){return this.tilesLayout},p.Ki=function(){return this.B},p.dc=function(){return this.status},p.cj=function(){this.status=u0},p.Uf=function(){this.preload=!0},p.isPreload=function(){return this.preload},p.Vc=function(){this.l=!1},p.Vi=function(){return this.l},p.gh=function(){this.o=!0},p.Xi=function(){return this.o},p.fh=function(){this.F=!0},p.Wi=function(){return this.F},p.eh=function(){this.m=!0},p.Ri=function(){return this.m},p.Ge=function(e){this.thumbnailSprite=e},p.Ii=function(){return this.thumbnailSprite},p.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=v(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},p.sg=function(e){this.h==null?he("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},p.Ld=function(e,t){this.u=e,this.G=t===void 0?!1:t},p.Ib=function(e){var t=this.u;return(e===void 0||e)&&this.G&&(this.u=null),t};function s0(e,t){e.Y=t,e=v(e.g);for(var n=e.next();!n.done;n=e.next())s0(n.value,t)}D("shaka.media.SegmentReference",xe),xe.prototype.getSegmentData=xe.prototype.Ib,xe.prototype.setSegmentData=xe.prototype.Ld,xe.prototype.syncAgainst=xe.prototype.sg,xe.prototype.offset=xe.prototype.offset,xe.prototype.getThumbnailSprite=xe.prototype.Ii,xe.prototype.setThumbnailSprite=xe.prototype.Ge,xe.prototype.hasByterangeOptimization=xe.prototype.Ri,xe.prototype.markAsByterangeOptimization=xe.prototype.eh,xe.prototype.isLastPartial=xe.prototype.Wi,xe.prototype.markAsLastPartial=xe.prototype.fh,xe.prototype.isPartial=xe.prototype.Xi,xe.prototype.markAsPartial=xe.prototype.gh,xe.prototype.isIndependent=xe.prototype.Vi,xe.prototype.markAsNonIndependent=xe.prototype.Vc,xe.prototype.isPreload=xe.prototype.isPreload,xe.prototype.markAsPreload=xe.prototype.Uf,xe.prototype.markAsUnavailable=xe.prototype.cj,xe.prototype.getStatus=xe.prototype.dc,xe.prototype.getTileDuration=xe.prototype.Ki,xe.prototype.getTilesLayout=xe.prototype.Li,xe.prototype.getEndByte=xe.prototype.tc,xe.prototype.getStartByte=xe.prototype.uc,xe.prototype.getEndTime=xe.prototype.oi,xe.prototype.getStartTime=xe.prototype.getStartTime,xe.prototype.getUris=xe.prototype.N;var Bi=0,u0=1;xe.Status={Pj:Bi,Nk:u0,nk:2};function va(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Uh(e){return!e||va(e)?null:e.length?e.end(e.length-1):null}function Fh(e,t){return!e||!e.length||va(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function a0(e,t){if(!e||!e.length||va(e))return 0;var n=0;e=v(Vi(e));for(var r=e.next();!r.done;r=e.next()){var i=r.value;r=i.start,i=i.end,i>t&&(n+=i-Math.max(r,t))}return n}function K2(e,t,n){return!e||!e.length||va(e)?null:(e=Vi(e).findIndex(function(r,i,o){return r.start>t&&(i==0||o[i-1].end-t<=n)}),0<=e?e:null)}function Vi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function l0(){}function c0(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function So(e){for(;e.firstChild;)e.removeChild(e.firstChild)}D("shaka.util.Dom",l0),l0.removeAllChildren=So;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Bh(){}function f0(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function d0(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Vh(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function W2(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Rt(Le(e.data,1,n)),i=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return null;var s=Rt(Le(e.data,3+n,o)),u;return r==="-->"?u=Rt(Le(e.data,4+n+o)):u=Ar(e.data.subarray(4+n+o)),t.mimeType=r,t.pictureType=i,t.description=s,t.data=u,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Rt(Le(e.data,1,r)),e=Rt(Le(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Rt(Le(e.data,1,r)),e=Rt(Le(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Rt(Le(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ar(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Rt(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Rt(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ar(e.data),t):null}function ss(e){for(var t=0,n=[];f0(e,t);){var r=Vh(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var i=e.subarray(t),o=Vh(i,4);i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:o,data:i.subarray(10,10+o)},(o=W2(i))&&n.push(o),t+=i.size+10}d0(e,t)&&(t+=10)}return n}function eu(e,t){for(var n=t=t===void 0?0:t,r=0;f0(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Vh(e,t+6),d0(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}D("shaka.util.Id3Utils",Bh),Bh.getID3Data=eu,Bh.getID3Frames=ss;function Hi(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Le(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Hh(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new At(n,0).S(),e.g=8*r,e.i-=r)}function rr(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Hh(e)}e.h<<=t,e.g-=t}function Je(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Hh(e),n=t-n,0<n?r<<n|Je(e,n):r}function Gh(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return Hh(e),t+Gh(e)}function Hn(e){rr(e,1+Gh(e))}function de(e){var t=Gh(e);return Je(e,t+1)-1}function tu(e){return e=de(e),1&e?1+e>>>1:-1*(e>>>1)}function we(e){return Je(e,1)===1}function at(e){return Je(e,8)}function Ic(e,t){for(var n=8,r=8,i=0;i<t;i++)r!==0&&(r=tu(e),r=(n+r+256)%256),n=r===0?n:r}function X2(e){return at(e),de(e),de(e)}D("shaka.util.ExpGolomb",Hi);function It(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.u=null}p=It.prototype,p.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},p.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Wh(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(e[i]==71){var o=!!(e[i+1]&64),s=((e[i+1]&31)<<8)+e[i+2];if(1<(e[i+3]&48)>>4){var u=i+5+e[i+4];if(u==i+188)continue}else u=i+4;switch(s){case 0:o&&(u+=e[u]+1),this.G=(e[u+10]&31)<<8|e[u+11];break;case 17:case 8191:break;case this.G:o&&(u+=e[u]+1),o=e,s={audio:-1,video:-1,ge:-1,audioCodec:"",videoCodec:""};var a=u+3+((o[u+1]&15)<<8|o[u+2])-4;for(u+=12+((o[u+10]&15)<<8|o[u+11]);u<a;){var c=(o[u+1]&31)<<8|o[u+2],f=(o[u+3]&15)<<8|o[u+4];switch(o[u]){case 6:if(0<f)for(var h=u+5,g=f;2<g;){var y=o[h+1]+2;switch(o[h]){case 5:var T=Qd(o.subarray(h+2,h+y));s.audio==-1&&T==="Opus"?(s.audio=c,s.audioCodec="opus"):s.video==-1&&T==="AV01"&&(s.video=c,s.videoCodec="av1");break;case 106:s.audio==-1&&(s.audio=c,s.audioCodec="ac3");break;case 122:s.audio==-1&&(s.audio=c,s.audioCodec="ec3");break;case 124:s.audio==-1&&(s.audio=c,s.audioCodec="aac");break;case 127:s.audioCodec=="opus"&&(T=null,o[h+2]===128&&(T=o[h+3]),T!=null&&(this.F={channelCount:(T&15)===0?2:T&15,$h:T,sampleRate:48e3}))}h+=y,g-=y}break;case 15:s.audio==-1&&(s.audio=c,s.audioCodec="aac");break;case 17:s.audio==-1&&(s.audio=c,s.audioCodec="aac-loas");break;case 21:s.ge==-1&&(s.ge=c);break;case 27:s.video==-1&&(s.video=c,s.videoCodec="avc");break;case 3:case 4:s.audio==-1&&(s.audio=c,s.audioCodec="mp3");break;case 36:s.video==-1&&(s.video=c,s.videoCodec="hvc");break;case 129:s.audio==-1&&(s.audio=c,s.audioCodec="ac3");break;case 132:case 135:s.audio==-1&&(s.audio=c,s.audioCodec="ec3")}u+=f+5}o=s,o.video!=-1&&(this.I=o.video,this.m=o.videoCodec),o.audio!=-1&&(this.B=o.audio,this.A=o.audioCodec),o.ge!=-1&&(this.C=o.ge),r&&!this.H&&(r=!1,i=t-188),this.H=!0;break;case this.I:u=e.subarray(u,i+188),o?this.j.push([u]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(u);break;case this.B:u=e.subarray(u,i+188),o?this.i.push([u]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(u);break;case this.C:u=e.subarray(u,i+188),o?this.l.push([u]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(u);break;default:r=!0}}return this};function Kh(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var i=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.u==null&&(e.u=i),n.pts=p0(i,e.u),e.u=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=p0(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}p.jj=function(e){return tt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Zf(e,{Dd:null,state:null})},p.Zf=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var r=e.byteLength,i=1;this.m=="hvc"&&(i=2);var o=t.state||0,s=o,u=0,a=[],c=-1,f=0;for(o==-1&&(c=0,f=this.m=="hvc"?e[0]>>1&63:e[0]&31,o=0,u=1);u<r;){var h=e[u++];o?o===1?o=h?0:2:h?h==1?(h=u-o-1,0<=c?a.push({data:e.subarray(c+i,h),fullData:e.subarray(c,h),type:f,time:n,state:null}):(o=a.length?a[a.length-1]:t.Dd)&&(s&&u<=4-s&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-s),o.fullData=o.fullData.subarray(0,o.fullData.byteLength-s)),0<h&&(h=e.subarray(0,h),o.data=Ht(o.data,h),o.fullData=Ht(o.fullData,h),o.state=0)),u<r?(f=this.m=="hvc"?e[u]>>1&63:e[u]&31,c=u,o=0):o=-1):o=0:o=3:o=h?0:1}return 0<=c&&0<=o&&a.push({data:e.subarray(c+i,r),fullData:e.subarray(c,r),type:f,time:n,state:o}),!a.length&&t.Dd&&(n=a.length?a[a.length-1]:t.Dd)&&(n.data=Ht(n.data,e),n.fullData=Ht(n.fullData,e)),t.state=o,a},p.getMetadata=function(){for(var e=[],t=v(this.l),n=t.next();!n.done;n=t.next())n=Ht.apply(yn,J(n.value)),(n=Kh(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:ss(n.data),dts:n.dts,pts:n.pts});return e},p.fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=v(this.i),n=t.next();!n.done;n=t.next()){var r=Ht.apply(yn,J(n.value)),i=Kh(this,r);n=this.h.length?this.h[this.h.length-1]:null,i&&i.pts!=null&&i.dts!=null&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?(this.h.length&&i.dts<(n.dts||0)&&(e=!0),this.h.push(i)):this.h.length&&(r=i?i.data:r)&&(n=this.h.pop(),n.data=Ht(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(o,s){var u=(o.pts||0)-(s.pts||0);return(o.dts||0)-(s.dts||0)||u}))}return this.h},p.wc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=v(this.j),r=n.next();!r.done;r=n.next()){var i=Ht.apply(yn,J(r.value)),o=Kh(this,i);r=this.g.length?this.g[this.g.length-1]:null,o&&o.pts!=null&&o.dts!=null&&(!r||r.pts!=o.pts&&r.dts!=o.dts)?(this.g.length&&o.dts<(r.dts||0)&&(t=!0),this.g.push(o)):this.g.length&&(i=o?o.data:i)&&(r=this.g.pop(),r.data=Ht(r.data,i),this.g.push(r))}if(e){for(n={Dd:null,state:null},r=[],i=v(this.g),o=i.next();!o.done;o=i.next())o=o.value,o.nalus=this.Zf(o,n),o.nalus.length&&(r.push(o),n.Dd=o.nalus[o.nalus.length-1]);this.g=r}t&&(this.g=this.g.sort(function(s,u){var a=(s.pts||0)-(u.pts||0);return(s.dts||0)-(u.dts||0)||a}))}return e?this.g:(e=this.g,this.g=[],e)},p.getStartTime=function(e){if(e=="audio"){e=null;var t=this.fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.wc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},p.od=function(){return{audio:this.A,video:this.m}},p.fe=function(){for(var e=[],t=v(this.wc()),n=t.next();!n.done;n=t.next())e.push.apply(e,J(n.value.nalus));return e},p.Oi=function(){tt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Mf();return{height:e.height,width:e.width}},p.Mf=function(){return this.m=="hvc"?q2(this):z2(this)};function h0(e){var t=e.wc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function z2(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.fe();if(!n.length||(n=n.find(function(y){return y.type==7}),!n))return t;n=new Hi(n.data);var r=at(n),i=at(n),o=at(n);if(Hn(n),Y2.includes(r)){var s=de(n);if(s===3&&rr(n,1),Hn(n),Hn(n),rr(n,1),we(n)){s=s!==3?8:12;for(var u=0;u<s;u++)we(n)&&(6>u?Ic(n,16):Ic(n,64))}}if(Hn(n),s=de(n),s===0)de(n);else if(s===1)for(rr(n,1),Hn(n),Hn(n),s=de(n),u=0;u<s;u++)Hn(n);Hn(n),rr(n,1),s=de(n),u=de(n);var a=Je(n,1);a===0&&rr(n,1),rr(n,1);var c=0,f=0,h=0,g=0;return we(n)&&(c=de(n),f=de(n),h=de(n),g=de(n)),t.height=String((2-a)*(u+1)*16-2*h-2*g),t.width=String(16*(s+1)-2*c-2*f),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2),t.frameRate=h0(e),t}function q2(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.fe();if(!n.length||(n=n.find(function(F){return F.type==33}),!n))return t;var r=new Hi(n.fullData,!0);at(r),at(r),Je(r,4);var i=Je(r,3);we(r);var o=Je(r,2),s=Je(r,1),u=Je(r,5),a=Je(r,32);n=at(r);for(var c=at(r),f=at(r),h=at(r),g=at(r),y=at(r),T=at(r),E=[],x=[],A=0;A<i;A++)E.push(we(r)),x.push(we(r));if(0<i)for(A=i;8>A;A++)Je(r,2);for(A=0;A<i;A++)E[A]&&Je(r,88),x[A]&&at(r);de(r),i=de(r),i==3&&Je(r,1),E=de(r),x=de(r);var M=A=0,L=0,_=0;return we(r)&&(A+=de(r),M+=de(r),L+=de(r),_+=de(r)),t.width=String(E-(A+M)*(i===1||i===2?2:1)),t.height=String(x-(L+_)*(i===1?2:1)),r=function(F){for(var P=0,k=0;32>k;k++)P|=(F>>k&1)<<31-k;return P>>>0}(a),s=s==1?"H":"L",o="hvc1"+("."+["","A","B","C"][o]+u),o+="."+r.toString(16).toUpperCase(),o+="."+s+T,y&&(o+="."+y.toString(16).toUpperCase()),g&&(o+="."+g.toString(16).toUpperCase()),h&&(o+="."+h.toString(16).toUpperCase()),f&&(o+="."+f.toString(16).toUpperCase()),c&&(o+="."+c.toString(16).toUpperCase()),n&&(o+="."+n.toString(16).toUpperCase()),t.codec=o,t.frameRate=h0(e),t}function p0(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function nu(e){return!(0>Wh(e))}function Wh(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}D("shaka.util.TsParser",It),It.syncOffset=Wh,It.probe=nu,It.prototype.getVideoInfo=It.prototype.Mf,It.prototype.getVideoResolution=It.prototype.Oi,It.prototype.getVideoNalus=It.prototype.fe,It.prototype.getCodecs=It.prototype.od,It.prototype.getStartTime=It.prototype.getStartTime,It.prototype.getVideoData=It.prototype.wc,It.prototype.getAudioData=It.prototype.fb,It.prototype.getMetadata=It.prototype.getMetadata,It.prototype.parseNalus=It.prototype.Zf,It.prototype.parseAvcNalus=It.prototype.jj,It.prototype.parse=It.prototype.parse,It.prototype.clearData=It.prototype.clearData,It.Timescale=9e4;var Y2=[100,110,122,244,44,83,86,118,128,138,139,134];function g0(e,t,n,r){var i=this;this.g=e,this.L=n,this.A=null,this.ea=t,this.l=new Map,this.B=new Map,this.Aa=new Map,this.h=null,this.Ea=!1,this.K=r||null,this.u=new Map,this.o=new _e,this.j=new Map,this.O=null,this.H=new pt,this.Ga="",this.Oa=!1,this.sa=!0,this.M=!1,this.C=this.P=null,this.i=Xh(this,this.H),this.za=this.G=!1,this.I=new Ys(function(){return Z2(i)}),this.F=!1,this.T="UNKNOWN",this.Ma=this.Na=!1,this.Fa=new pt,this.m=!1,this.oa=null,this.$=new Map,this.ka=this.W=this.na=this.Z=null,this.fa=new pt,this.g.remote&&(this.M=this.g.remote.state!="disconnected",this.o.D(this.g.remote,"connect",function(){i.M=i.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"connecting",function(){i.M=i.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"disconnect",function(){i.M=i.g.remote.state!="disconnected"}))}function Xh(e,t){if(e.sa=!0,S.ManagedMediaSource){e.C||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.o.D(n,"startstreaming",function(){e.sa=!0}),e.o.D(n,"endstreaming",function(){e.sa=!1})}else n=new MediaSource;return e.o.qa(n,"sourceopen",function(){URL.revokeObjectURL(e.Ga),t.resolve()}),e.o.qa(e.g,"playing",function(){e.Oa=!0}),e.Ga=$h(n),e.g.removeAttribute("src"),e.P&&e.g.removeChild(e.P),e.C&&e.g.removeChild(e.C),e.P=c0(e.Ga),e.g.appendChild(e.P),e.C&&e.g.appendChild(e.C),e.g.load(),n}function $2(e,t,n){e.g&&S.ManagedMediaSource&&e.i&&(e.C&&e.g.removeChild(e.C),e.C=c0(t,n),e.g.appendChild(e.C),e.g.disableRemotePlayback=!1)}function Q2(e,t){var n,r,i,o,s,u,a,c,f,h,g;return b(function(y){if(y.g==1)return e.createSegmentIndex?I(y,e.createSegmentIndex(),2):y.s(2);if(!e.segmentIndex)return y.return(!1);if(e.segmentIndex.getNumReferences()==0)return y.return(!0);for(n=$t,r=new Set,i=v(e.segmentIndex),o=i.next();!o.done;o=i.next())if(s=o.value,u=s.mimeType||e.mimeType||"",a=s.codecs||e.codecs||"",(u!=e.mimeType||a!=e.codecs)&&(c=u+":"+a,!r.has(c))){if(r.add(c),t==n.va){if(f=Kt(u,a),!Ks(f))return y.return(!1)}else if(t==n.la?a=xh(a):t==n.V&&(a=aa(a,u)),h=NI(e,u,a),g=Gs(u,a),!gn(h)&&!ho(g))return y.return(!1)}return y.return(!0)})}function J2(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(J(ji)),t={};e=v(e);for(var n=e.next();!n.done;n=e.next()){n=n.value,Ks(n)?t[n]=!0:t[n]=ci()?gn(n)||!!ho(n):zu(n);var r=n.split(";")[0];t[r]=t[r]||t[n]}return t}p=g0.prototype,p.destroy=function(){return this.I.destroy()};function Z2(e){var t,n,r,i,o,s,u,a,c,f,h,g,y,T,E;return b(function(x){if(x.g==1){for(t=[],n=v(e.u),r=n.next();!r.done;r=n.next())for(i=r.value,o=v(i),s=o.next().value,u=o.next().value,a=u[0],c=s,e.u.set(c,u.slice(0,1)),a&&t.push(a.p.catch(BI)),f=v(u.slice(1)),h=f.next();!h.done;h=f.next())g=h.value,g.p.reject(new j(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),I(x,Promise.all(t),2)}for(y=v(e.j.values()),T=y.next();!T.done;T=y.next())E=T.value,E.destroy();e.o&&(e.o.release(),e.o=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.P&&(e.g.removeChild(e.P),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.P=null,e.C=null,e.A=null,e.i=null,e.h=null,e.ea=null,e.l.clear(),e.Aa.clear(),e.j.clear(),e.O=null,e.u.clear(),e.K=null,e.$.clear(),e.L=null,ae(x)})}p.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var i=this,o,s,u,a,c,f;return b(function(h){switch(h.g){case 1:return o=$t,I(h,i.H,2);case 2:if(!us(i)&&!ru(i)){h.s(3);break}return he("Expected MediaSource to be open during init(); reopening the media source."),i.H=new pt,i.i=Xh(i,i.H),I(h,i.H,3);case 3:i.F=t,i.T=n,i.Na=r,i.Ma=!i.F&&i.T=="HLS"&&!i.Na,i.$.clear(),i.Z=null,i.na=null,i.W=null,i.ka=null,i.fa=new pt,s=v(e.keys()),u=s.next();case 5:if(u.done){h.s(7);break}return a=u.value,c=e.get(a),I(h,Mc(i,a,c,c.codecs),8);case 8:i.m?(i.u.set(o.V,[]),i.u.set(o.la,[])):i.u.set(a,[]),u=s.next(),h.s(5);break;case 7:(f=e.get(o.V))&&f.isAudioMuxedInVideo&&(i.m=!0),ae(h)}})};function Mc(e,t,n,r){var i,o,s,u,a,c,f,h,g,y,T,E;return b(function(x){switch(x.g){case 1:return i=$t,o=V,s=Z,I(x,Q2(n,t),2);case 2:if(s.call(o,x.h,"Type negotiation should happen before MediaSourceEngine.init!"),t==i.V&&r&&(r=aa(r,n.mimeType)),u=Kt(n.mimeType,r),t==i.va){Cc(e,u,e.F,n.external),x.s(0);break}if(a=e.A.forceTransmux,(!gn(u)||!e.F&&ji.includes(u))&&(a=!0),c=Gs(n.mimeType,r),!a){x.s(4);break}if(f=Bn(i.V,(r||"").split(",")),h=Bn(i.la,(r||"").split(",")),!f||!h){x.s(5);break}return e.m=!0,I(x,Mc(e,i.V,n,f),6);case 6:return I(x,Mc(e,i.la,n,h),7);case 7:return x.return();case 5:(g=ho(c))&&(y=g(),e.j.set(t,y),u=y.convertCodecs(t,c));case 4:T=u+e.A.addExtraFeaturesToSourceBuffer(u),Tt(e.I);try{E=e.i.addSourceBuffer(T)}catch(A){throw new j(2,3,3015,A,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.F&&(E.mode=dM),e.o.D(E,"error",function(){var A=e.u.get(t)[0];A.p.reject(new j(2,3,3014,e.g.error?e.g.error.code:0,A.uri))}),e.o.D(E,"updateend",function(){return Gi(e,t)}),e.l.set(t,E),e.B.set(t,u),e.Aa.set(t,!!n.drmInfos.length),ae(x)}})}p.configure=function(e){this.A=e,this.h&&(this.h.A=e.modifyCueCallback)};function m0(e){return e.sa&&!e.M&&!e.G}function Cc(e,t,n,r){e.h||(e.h=new Oi(e.ea),e.h&&(e.h.A=e.A.modifyCueCallback));var i=e.h;r=r||e.Ea,e=e.T,t=="application/cea-608"||t=="application/cea-708"?i.i=null:(i.i=oa.get(t)(),i.i.setSequenceMode?i.i.setSequenceMode(n):tt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):tt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),i.B=r)}function us(e){return e.G?!1:e.i?e.i.readyState=="ended":!0}function ru(e){return e.G?!1:e.i?e.i.readyState=="closed":!0}function zh(e,t){return e.l.size?t==Xe?e=e.h.g:(e=iu(e,t),e=!e||va(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null):e=null,e}function as(e,t){return e.l.size?t==Xe?e.h.h:Uh(iu(e,t)):null}function eM(e,t,n){return t==Xe?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=iu(e,t),a0(e,n))}p.Fb=function(){var e={total:this.G?[]:Vi(this.g.buffered),audio:Vi(iu(this,"audio")),video:Vi(iu(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function iu(e,t){if(e.G||e.M)return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function tM(e,t,n,r,i,o){var s=null,u=[],a=Le(n);if(ji.includes(o))t=ss(a),t.length&&r&&((n=t.find(function(y){return y.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=Math.round(n.data)/1e3),e.L.onMetadata([{cueTime:r.startTime,data:a,frames:t,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(o.includes("/mp4")&&r&&r.Y&&r.Y.timescale){var c=r.Y.timescale;if(!isNaN(c)){var f=i.emsgSchemeIdUris!=null&&0<i.emsgSchemeIdUris.length||e.A.dispatchAllEmsgBoxes,h=0,g=!1;a=new mt,f&&a.R("emsg",function(y){var T=i.emsgSchemeIdUris;if(y.version===0)var E=y.reader.Cc(),x=y.reader.Cc(),A=y.reader.S(),M=y.reader.S(),L=y.reader.S(),_=y.reader.S(),F=r.startTime+M/A;else A=y.reader.S(),F=y.reader.bd()/A+r.timestampOffset,M=F-r.startTime,L=y.reader.S(),_=y.reader.S(),E=y.reader.Cc(),x=y.reader.Cc();y=y.reader.Db(y.reader.getLength()-y.reader.Ba()),(T&&T.includes(E)||e.A.dispatchAllEmsgBoxes)&&(E=="urn:mpeg:dash:event:2012"?e.L.ij():(T=F+L/A,A={startTime:F,endTime:T,schemeIdUri:E,value:x,timescale:A,presentationTimeDelta:M,eventDuration:L,id:_,messageData:y},_=new Map().set("detail",A),new ce("emsg",_).cancelable=!0,e.L.gj(A),(E=="https://aomedia.org/emsg/ID3"||E=="https://developer.apple.com/streaming/emsg-id3")&&(E=ss(y),E.length&&e.L.onMetadata([{cueTime:F,data:y,frames:E,dts:F,pts:F}],0,T))))}),a.R("prft",function(y){var T=y.reader,E=y.version;T.S(),y=T.S();var x=T.S();y=1e3*y+x/Math.pow(2,32)*1e3,E===0?T=T.S():(E=T.S(),T=T.S(),T=E*Math.pow(2,32)+T),y=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+y).getTime(),T=new Map().set("detail",{wallClockTime:y,programStartDate:new Date(y-T/c*1e3)}),T=new ce("prft",T),e.L.onEvent(T)}).box("moof",Fe).box("traf",Fe).R("tfdt",function(y){g||(h=Sc(y.reader,y.version).baseMediaDecodeTime/c,g=!0,f||y.parser.stop())}).parse(n,!0),g&&r.timestampOffset==0&&(s=h)}}else o.includes("/mp4")||o.includes("/webm")||!nu(a)||(e.$.has(t)?e.$.get(t).clearData():e.$.set(t,new It),u=e.$.get(t).parse(a),a=u.getStartTime(t),a!=null&&(s=a),u=u.getMetadata());return{timestamp:s,metadata:u}}function kc(e,t,n,r,i,o,s,u,a,c){s=s===void 0?!1:s,u=u===void 0?!1:u,a=a===void 0?!1:a,c=c===void 0?!1:c;var f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W;return b(function(B){switch(B.g){case 1:if(f=$t,t!=f.va){B.s(2);break}if(e.T!="HLS"){B.s(3);break}return I(B,e.Fa,4);case 4:h=B.h,e.h.u=h;case 3:return I(B,OI(e.h,n,r?r.startTime:null,r?r.endTime:null,r?r.N()[0]:null),5);case 5:return B.return();case 2:if(c||!e.m){B.s(6);break}return I(B,kc(e,f.V,n,r,i,o,s,u,a,!0),7);case 7:return I(B,kc(e,f.la,n,r,i,o,s,u,a,!0),8);case 8:return B.return();case 6:if(!e.l.has(t))return B.return();if(g=e.l.get(t).timestampOffset,y=e.B.get(t),e.j.has(t)&&(y=e.j.get(t).getOriginalMimeType()),r&&(T=tM(e,t,n,r,i,y),E=T.timestamp,x=T.metadata,E!=null&&(e.Z==null&&t==f.la&&(e.Z=E,e.na=r.startTime,e.W!=null&&(A=0,e.na==e.ka&&(A=e.Z-e.W),e.fa.resolve(A))),e.W==null&&t==f.V&&(e.W=E,e.ka=r.startTime,e.Z!=null&&(M=0,e.na==e.ka&&(M=e.Z-e.W),e.fa.resolve(M))),L=E,_=ji,!e.F&&_.includes(e.B.get(t))&&(L=0),F=r.startTime-L,P=Math.abs(g-F),(.001<=P||s||u)&&(!a||0<F||!g)&&(g=F,e.Ma&&(an(e,t,function(){return ou(e,t)},null),an(e,t,function(){return su(e,t,g)},null))),(t==f.la||!e.l.has(f.la))&&e.Fa.resolve(g)),x.length)&&e.L.onMetadata(x,g,r?r.endTime:null),o&&t==f.la&&(e.h||Cc(e,"application/cea-608",e.F,!1),e.O||(k=y.split(";",1)[0],e.O=new dr(k)),r?(O=e.O.i(n),O.length&&UI(e.h,O,r.startTime,r.endTime,g)):e.O.init(n,u)),!e.j.has(t)){B.s(9);break}return I(B,e.j.get(t).transmux(n,i,r,e.i.duration,t),10);case 10:n=B.h;case 9:if(n=uM(e,i,n,r,t),!r||!e.F||t==f.va){B.s(11);break}if(!s&&!u){B.s(11);break}if(U=r.startTime,e.T!="HLS"||e.m||t!=f.V||!e.l.has(f.la)){B.s(13);break}return I(B,e.fa,14);case 14:W=B.h,.15<Math.abs(W)&&(U-=W);case 13:an(e,t,function(){return ou(e,t)},null),an(e,t,function(){return su(e,t,U)},null);case 11:return I(B,an(e,t,function(){var K=n;e.K&&Zd(e.K,K,g,i),e.l.get(t).appendBuffer(K)},r?r.N()[0]:null),15);case 15:ae(B)}})}function nM(e,t){var n=as(e,"video")||0;iv(e.h,t,n)}function rM(e){e.h&&iv(e.h,"",0)}p.remove=function(e,t,n){var r=this,i;return b(function(o){return o.g==1?(i=$t,e==i.va?I(o,r.h.remove(t,n),0):n>t?I(o,an(r,e,function(){return Dc(r,e,t,n)},null),5):o.s(0)):r.m?I(o,an(r,i.V,function(){return Dc(r,i.V,t,n)},null),0):o.s(0)})};function y0(e,t){var n;return b(function(r){return r.g==1?(n=$t,t==n.va?e.h?I(r,e.h.remove(0,1/0),0):r.return():I(r,an(e,t,function(){return Dc(e,t,0,e.i.duration)},null),4)):e.m?I(r,an(e,n.V,function(){return Dc(e,n.V,0,e.i.duration)},null),0):r.s(0)})}p.flush=function(e){var t=this,n;return b(function(r){return r.g==1?(n=$t,e==n.va?r.return():I(r,an(t,e,function(){t.g.currentTime-=.001,Gi(t,e)},null),2)):t.m?I(r,an(t,n.V,function(){var i=n.V;t.g.currentTime-=.001,Gi(t,i)},null),0):r.s(0)})};function iM(e,t,n,r,i,o,s,u,a){var c,f,h;return b(function(g){return g.g==1?(c=$t,t==c.va?(o||(e.h.u=n),bI(e.h,r,i),g.return()):(f=[],I(g,cM(e,t,s,u,a),2))):(h=g.h,h||(f.push(an(e,t,function(){return ou(e,t)},null)),e.m&&f.push(an(e,c.V,function(){return ou(e,c.V)},null))),o||(f.push(an(e,t,function(){return su(e,t,n)},null)),e.m&&f.push(an(e,c.V,function(){return su(e,c.V,n)},null))),(r!=0||i!=1/0)&&(f.push(an(e,t,function(){var y=e.l.get(t);y.appendWindowStart=0,y.appendWindowEnd=i,y.appendWindowStart=r,Gi(e,t)},null)),e.m&&f.push(an(e,c.V,function(){var y=c.V,T=e.l.get(y);T.appendWindowStart=0,T.appendWindowEnd=i,T.appendWindowStart=r,Gi(e,y)},null))),f.length?I(g,Promise.all(f),0):g.s(0))})}function oM(e,t,n){var r,i;return b(function(o){return o.g==1?(r=$t,t==r.va||(t==r.la&&(e.Fa=new pt),!e.F||(i=as(e,t))&&.1>Math.abs(i-n))?o.return():(an(e,t,function(){return ou(e,t)},null),e.m&&an(e,r.V,function(){return ou(e,r.V)},null),I(o,an(e,t,function(){return su(e,t,n)},null),2))):e.m?I(o,an(e,r.V,function(){return su(e,r.V,n)},null),0):o.s(0)})}p.endOfStream=function(e){var t=this;return b(function(n){return I(n,Sa(t,function(){us(t)||ru(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},p.bb=function(e){var t=this;return b(function(n){return I(n,Sa(t,function(){if(e<t.i.duration)for(var r=v(t.l.keys()),i=r.next();!i.done;i=r.next()){i=i.value;var o={start:function(){},p:new pt,uri:null};t.u.get(i).unshift(o)}t.i.duration=e,t.oa=e}),0)})},p.getDuration=function(){return this.i.duration};function sM(e,t,n){b(function(r){return e.I.g||e.M||e.G||us(e)||ru(e)?r.return():I(r,Sa(e,function(){us(e)||ru(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function qh(e){b(function(t){return e.I.g||e.M||e.G||us(e)||ru(e)?t.return():I(t,Sa(e,function(){us(e)||ru(e)||e.i.clearLiveSeekableRange()}),0)})}function Dc(e,t,n,r){r<=n?Gi(e,t):e.l.get(t).remove(n,r)}function ou(e,t){var n=e.l.get(t),r=n.appendWindowStart,i=n.appendWindowEnd;n.abort(),n.appendWindowStart=r,n.appendWindowEnd=i,Gi(e,t)}function su(e,t,n){0>n&&(n+=.001);var r=!0;e.T=="HLS"&&(r=as(e,t),r=!r||.15<Math.abs(r-n)),r&&(e.l.get(t).timestampOffset=n),Gi(e,t)}function Gi(e,t){if(!e.G){var n=e.u.get(t)[0];n&&(n.p.resolve(),Yh(e,t))}}function an(e,t,n,r){return Tt(e.I),n={start:n,p:new pt,uri:r},e.u.get(t).push(n),e.u.get(t).length==1&&v0(e,t),n.p}function Sa(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T;return b(function(E){switch(E.g){case 1:for(Tt(e.I),n=[],r=Array.from(e.l.keys()),i=v(r),o=i.next(),s={};!o.done;s={ready:void 0},o=i.next())u=o.value,s.ready=new pt,a={start:function(x){return function(){return x.ready.resolve()}}(s),p:s.ready,uri:null},c=e.u.get(u),c.push(a),n.push(s.ready),c.length==1&&a.start();return ye(E,2),I(E,Promise.all(n),4);case 4:Oe(E,3);break;case 2:throw f=ve(E),f;case 3:return ye(E,5,6),I(E,t(),6);case 6:for(Ct(E),h=v(r),g=h.next();!g.done;g=h.next())y=g.value,Yh(e,y);ut(E,0);break;case 5:throw T=ve(E),new j(2,3,3015,T,e.g.error||"No error in the media element",null)}})}function Yh(e,t){e.u.get(t).shift(),v0(e,t)}function v0(e,t){var n=e.u.get(t)[0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new j(2,3,3017,t)):m0(e)?n.p.reject(new j(2,3,3015,r,e.g.error||"No error in the media element",n.uri)):n.p.reject(new j(2,3,3024,t)),Yh(e,t)}}function uM(e,t,n,r,i){if(ic(e.B.get(i))!="mp4")return n;var o=r===null,s=e.Aa.get(i),u=e.L.ui(),a=!1;return r&&r.Y&&(a=r.Y.encrypted),r=r?r.N()[0]:null,e.A.correctEc3Enca&&o&&i==="audio"&&(n=U2(n)),(e=e.A.insertFakeEncryptionInInit&&s)&&(u=Xd(u),e=pn()&&i==="audio"||fi()||Jr()||Xt("SOPOpenBrowser")||Ps()&&Yl()&&u),e&&(o?n=F2(t,n,r):((t=!a)&&(t=pn()&&i==="audio"),t&&(n=B2(n)))),o&&Ci()&&(n=G2(n)),n}function aM(e,t,n,r){return an(e,t,function(){if(t!==Xe){if(e.B.get(t),Go()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),r&&e.j.set(t,r);var i=n+e.A.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(i),e.B.set(t,n)}Gi(e,t)}},null)}function lM(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F;return b(function(P){switch(P.g){case 1:if(e.G)return P.return();for(n=$t,e.G=!0,e.m=!1,r=e.g.currentTime,i=e.g.autoplay,e.g.paused||(e.za=!0),e.Oa&&(e.g.autoplay=!1),hn(P,2),e.o.Ra(),o=v(e.j.values()),s=o.next();!s.done;s=o.next())u=s.value,u.destroy();for(a=v(e.l.values()),c=a.next();!c.done;c=a.next()){f=c.value;try{e.i.removeSourceBuffer(f)}catch{}}return e.j.clear(),e.l.clear(),h=e.i.duration,e.H=new pt,e.i=Xh(e,e.H),I(P,e.H,4);case 4:!isNaN(h)&&h?e.i.duration=h:!isNaN(e.oa)&&e.oa&&(e.i.duration=e.oa),g=new pt,y=e.i.sourceBuffers,T=t.size,E=0,x=function(){E++,E===T&&(g.resolve(),e.o.Ka(y,"addsourcebuffer",x))},e.o.D(y,"addsourcebuffer",x),A=v(t.keys()),M=A.next();case 5:return M.done?((F=t.get(n.V))&&F.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.u.has(n.V)&&e.u.set(n.V,[]),e.g.currentTime=r,I(P,g,2)):(L=M.value,_=t.get(L),I(P,Mc(e,L,_,_.codecs),6));case 6:M=A.next(),P.s(5);break;case 2:Ct(P),e.G=!1,Tt(e.I),e.o.qa(e.g,"canplaythrough",function(){e.I.g||(e.g.autoplay=i,e.za&&(e.za=!1,e.g.play()))}),ut(P,0)}})}function S0(e,t){return Sa(e,function(){return lM(e,t)})}function T0(e,t,n,r){var i=!1,o=Bn("audio",(r||"").split(",")),s=Bn("video",(r||"").split(",")),u=s;t=="audio"&&(u=o),u||(u=r),r=Kt(n,u);var a=e.A.forceTransmux;if((!gn(r)||!e.F&&ji.includes(r))&&(a=!0),a&&(e=Gs(n,u),n=ho(e))){var c=n();o&&s&&(i=!0),r=c.convertCodecs(t,e)}return t=vn(er(r)),{wg:c,Hj:i,Gg:Zn(r),codec:t,mimeType:r}}function cM(e,t,n,r,i){var o,s,u,a,c,f,h,g,y,T,E,x,A,M;return b(function(L){return L.g==1?(o=$t,t==o.va?L.return(!1):(s=vn(er(e.B.get(t))),u=Zn(e.B.get(t)),a=T0(e,t,n,r),c=a.wg,f=a.Hj,h=a.Gg,g=a.codec,y=a.mimeType,T=!0,f&&e.B.has(o.V)&&(E=T0(e,o.V,n,r),x=vn(er(e.B.get(o.V))),A=Zn(e.B.get(o.V)),T=x==E.codec&&A==E.Gg,E.wg&&E.wg.destroy()),s===g&&u===h&&T?(e.j.has(t)&&!c?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&c?e.j.set(t,c):c&&(e.j.has(t)&&e.j.get(t).transmux!=c.transmux?(e.j.get(t).destroy(),e.j.delete(t),e.j.set(t,c)):c.destroy()),L.return(!1)):(M=!0,(e.m||f&&c&&!e.j.has(t))&&(M=!1),M&&e.A.codecSwitchingStrategy==="smooth"&&Go()?I(L,aM(e,t,y,c),3):(c&&c.destroy(),I(L,S0(e,i),3))))):L.return(!0)})}function fM(e,t,n,r){if(t==Xe)var i=!1;else{i=vn(er(e.B.get(t)));var o=Zn(e.B.get(t)),s=Kt(n,r),u=e.A.forceTransmux;(!gn(s)||!e.F&&ji.includes(s))&&(u=!0),n=Gs(n,r),u&&(u=ho(n))&&(u=u(),s=u.convertCodecs(t,n),u.destroy()),t=vn(er(s)),s=Zn(s),i=i!==t||o!==s}return i?e.A.codecSwitchingStrategy!=="smooth"||!Go()||e.m:!1}var $h=S.URL.createObjectURL,dM="sequence";function Ee(e,t,n){this.i=e,this.C=t,this.o=this.l=1/0,this.h=1,this.g=this.j=null,this.A=0,this.B=!0,this.I=!1,this.H=0,this.F=n===void 0?!0:n,this.G=0,this.u=!1,this.m=e}p=Ee.prototype,p.getDuration=function(){return this.l},p.xi=function(){return this.h},p.zh=function(e){this.i=e},p.bb=function(e){this.l=e},p.Di=function(){return this.i},p.xh=function(e){this.A=e},p.Gc=function(e){e&&!this.B&&(this.I=!0),this.B=e},p.Fe=function(e){this.o=e},p.ee=function(){return this.o},p.lg=function(e){this.C=e},p.ni=function(){return this.C},p.lh=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(i){return i.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.re(e[0].start+t),this.h=e.reduce(function(i,o){return Math.max(i,o.end-o.start)},this.h),this.g=Math.max(this.g,r),this.i!=null&&this.F&&!this.u&&(this.i=n-this.g-this.h)}}},p.Ed=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=v(e);for(var i=e.next();!i.done;i=e.next())i=i.value,r<i.startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.h=Math.max(this.h,i.endTime-i.startTime));this.re(t),this.g=Math.max(this.g,n),this.i!=null&&this.F&&!this.u&&(this.i=r-this.g-this.h)}},p.kh=function(e,t){this.re(e),t==1/0||this.U()||(this.g=Math.max(this.g,t))},p.yi=function(){return this.g},p.me=function(){this.u=!0},p.Yi=function(){return this.u},p.yh=function(e){this.m=e},p.ti=function(){return this.m},p.re=function(e){this.j==null?this.j=e:this.I||(this.j=Math.min(this.j,e))},p.Vf=function(e){this.h=Math.max(this.h,e)},p.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},p.U=function(){return this.l==1/0&&!this.B},p.yc=function(){return this.l!=1/0&&!this.B},p.pb=function(){return Math.max(this.H,this.cc()-this.o)},p.Ch=function(e){this.H=e},p.cc=function(){return this.U()||this.yc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},p.qd=function(e){var t=Math.max(this.j,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.cc()-this.o+e,this.ob()))},p.Hb=function(){return this.qd(0)},p.ob=function(){return Math.max(0,this.cc()-(this.U()||this.yc()?this.C:0))},p.Lh=function(){return!(this.i==null||this.g!=null&&this.F)},p.wh=function(e){this.G=e},p.ji=function(){return this.G},D("shaka.media.PresentationTimeline",Ee),Ee.prototype.getAvailabilityTimeOffset=Ee.prototype.ji,Ee.prototype.setAvailabilityTimeOffset=Ee.prototype.wh,Ee.prototype.usingPresentationStartTime=Ee.prototype.Lh,Ee.prototype.getSeekRangeEnd=Ee.prototype.ob,Ee.prototype.getSeekRangeStart=Ee.prototype.Hb,Ee.prototype.getSafeSeekRangeStart=Ee.prototype.qd,Ee.prototype.getSegmentAvailabilityEnd=Ee.prototype.cc,Ee.prototype.setUserSeekStart=Ee.prototype.Ch,Ee.prototype.getSegmentAvailabilityStart=Ee.prototype.pb,Ee.prototype.isInProgress=Ee.prototype.yc,Ee.prototype.isLive=Ee.prototype.U,Ee.prototype.offset=Ee.prototype.offset,Ee.prototype.notifyMaxSegmentDuration=Ee.prototype.Vf,Ee.prototype.notifyMinSegmentStartTime=Ee.prototype.re,Ee.prototype.getInitialProgramDateTime=Ee.prototype.ti,Ee.prototype.setInitialProgramDateTime=Ee.prototype.yh,Ee.prototype.isStartTimeLocked=Ee.prototype.Yi,Ee.prototype.lockStartTime=Ee.prototype.me,Ee.prototype.getMaxSegmentEndTime=Ee.prototype.yi,Ee.prototype.notifyPeriodDuration=Ee.prototype.kh,Ee.prototype.notifySegments=Ee.prototype.Ed,Ee.prototype.notifyTimeRange=Ee.prototype.lh,Ee.prototype.getDelay=Ee.prototype.ni,Ee.prototype.setDelay=Ee.prototype.lg,Ee.prototype.getSegmentAvailabilityDuration=Ee.prototype.ee,Ee.prototype.setSegmentAvailabilityDuration=Ee.prototype.Fe,Ee.prototype.setStatic=Ee.prototype.Gc,Ee.prototype.setClockOffset=Ee.prototype.xh,Ee.prototype.getPresentationStartTime=Ee.prototype.Di,Ee.prototype.setDuration=Ee.prototype.bb,Ee.prototype.setPresentationStartTime=Ee.prototype.zh,Ee.prototype.getMaxSegmentDuration=Ee.prototype.xi,Ee.prototype.getDuration=Ee.prototype.getDuration;function Qh(e,t,n,r){var i=this;this.u=r,this.g=e,this.B=t,this.h=n,this.o=new _e,this.l=!1,this.F=e.readyState,this.G=this.C=this.j=0,this.m=hM(this),this.A=!1,this.o.D(e,"waiting",function(){return Ta(i)}),this.i=new ze(function(){Ta(i)}).ua(this.h.gapJumpTimerTime)}Qh.prototype.release=function(){this.o&&(this.o.release(),this.o=null),this.i!=null&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.B=this.u=null},Qh.prototype.ue=function(){this.A=!0,this.i&&this.i.ua(this.h.gapJumpTimerTime),Ta(this)};function Ta(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.m)){t=e.m;var n=t.j,r=x0(n),i=n.g.currentTime,o=Date.now()/1e3;(t.g!=i||t.m!=r)&&(t.l=o,t.g=i,t.m=r,t.h=!1),i=o-t.l,(r=i>=t.o&&r&&!t.h)&&(t.i&&t.i(t.g,i),t.h=!0,t.g=n.g.currentTime),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=K2(n,t,e.h.gapDetectionThreshold),r==null||r==0&&!e.A||(i=n.start(r),(o=e.h.gapPadding)&&(i=Math.ceil(100*(i+o))/100),i>=e.B.ob()||.001>i-t||(r!=0&&n.end(r-1),e.g.currentTime=i,t==e.j&&(e.j=i),e.C++,e.u(new ce("gapjumped")))))}}}function hM(e){if(!e.h.stallEnabled)return null;var t=e.h.stallSkip;return new w0(new pM(e.g),e.h.stallThreshold,function(){var n;return b(function(r){if(r.g==1)return n=Vi(e.g.buffered),n.length?t?(e.g.currentTime+=t,r.s(2)):I(r,e.g.play(),3):r.return();if(r.g!=2){if(!e.g)return r.return();e.g.pause(),e.g.play()}e.G++,e.u(new ce("stalldetected")),ae(r)})})}function w0(e,t,n){this.j=e,this.m=x0(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.o=t,this.i=n}w0.prototype.release=function(){this.i=this.j=null};function pM(e){this.g=e}function x0(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=v(Vi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function uu(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=gM.value().get(t),n.qa(e,t,r))}var gM=new Wu(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function E0(e,t,n,r){var i=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return i.l==null&&(i.l=r()),i.l},this.o=!1,this.h=new _e,this.i=new C0(e),uu(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){I0(i,i.j())})}E0.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Jh(e){return e.o?e.g.currentTime:e.j()}function A0(e,t){0<e.g.readyState?k0(e.i,t):uu(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){I0(e,e.j())})}function I0(e,t){.001>Math.abs(e.g.currentTime-t)?M0(e):(e.h.qa(e.g,"seeking",function(){M0(e)}),k0(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function M0(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function C0(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new ze(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}C0.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function k0(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.ua(.1)}function D0(e){this.h=e,this.j=!1,this.g=null,this.i=new _e}p=D0.prototype,p.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.qa(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;uu(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},p.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},p.cf=function(e){this.g=this.j?this.g:e},p.Rd=function(){return(this.j?this.h.currentTime:this.g)||0},p.Cg=function(){return 0},p.Bg=function(){return 0},p.jh=function(){};function R0(e,t,n,r,i,o){var s=this;this.i=e,this.g=t.presentationTimeline,this.l=n,this.u=i,this.o=null,this.j=new Qh(e,t.presentationTimeline,n,o),this.h=new E0(e,function(){e:{var u=s.j;u.l=!0,u.A=!1,u.i&&u.i.ua(u.h.gapJumpTimerTime),Ta(u);var a=Jh(s.h);if(u=L0(s,a),!Uy()&&.001<Math.abs(u-a)){if(a=!1,!Vr()||Vr()&&uo())a=!0;else{var c=Date.now()/1e3,f=Vr()&&zd()?3:1;(!s.o||s.o<c-f)&&(s.o=c,a=!0)}if(a){A0(s.h,u),u=void 0;break e}}s.u(),u=void 0}return u},function(u){var a=s.j;a.g.seeking&&!a.l&&(a.l=!0,a.j=u),a.i&&a.i.ua(a.h.gapJumpTimerTime),Ta(a)},function(){var u=r;return u==null?u=1/0>s.g.getDuration()?s.g.Hb():s.g.ob():0>u&&(u=s.g.ob()+u),P0(s,_0(s,u))}),this.m=new ze(function(){if(s.i.readyState!=0&&!s.i.paused){var u=Jh(s.h),a=s.g.Hb(),c=s.g.ob();3>c-a&&(a=c-3),u<a&&(u=L0(s,u),s.i.currentTime=u)}})}p=R0.prototype,p.ready=function(){this.m.ua(.25)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},p.cf=function(e){A0(this.h,e)},p.Rd=function(){var e=Jh(this.h);return 0<this.i.readyState&&!this.i.paused?_0(this,e):e},p.Cg=function(){return this.j.G},p.Bg=function(){return this.j.C},p.jh=function(){this.j.ue()};function P0(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function L0(e,t){var n=e.l.rebufferingGoal,r=e.l.safeSeekOffset,i=e.g.Hb(),o=e.g.ob(),s=e.g.getDuration();3>o-i&&(i=o-3);var u=e.g.qd(n),a=e.g.qd(r);return n=e.g.qd(n+r),t>=s?P0(e,t):t>o?o-e.l.safeSeekEndOffset:t<i?Fh(e.i.buffered,a)?a:n:t>=u||Fh(e.i.buffered,t)?t:n}function _0(e,t){var n=e.g.Hb();return t<n?n:(e=e.g.ob(),t>e?e:t)}function it(e){this.g=e,this.m=null,this.i=0,this.o=!1}p=it.prototype,p.getNumReferences=function(){return this.g.length},p.getNumEvicted=function(){return this.i},p.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},p.dj=function(){this.o=!0},p.xb=function(e){for(var t=v(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function ri(e){return e.g[0]||null}p.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},p.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},p.offset=function(e){if(!this.o)for(var t=v(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},p.oe=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,J(e))}},p.Bd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.oe(e),this.Pa(t)},p.Pa=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},p.Oc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new xe(e.startTime,t,e.C,e.Sa,e.xa,e.Y,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},p.Le=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new ze(function(){var r=t();r?n.g.push.apply(n.g,J(r)):(n.m.stop(),n.m=null)}),this.m.ua(e))},it.prototype[Symbol.iterator]=function(){return this.Gb(0)},it.prototype.Gb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var i=this.get(r);n?r++:r--;var o=-1;if(i&&0<i.g.length)for(var s=i.g.length-1;0<=s;--s){var u=i.g[s];if(e>=u.startTime&&e<u.endTime){if(!t){for(;s&&!u.l;)s--,u=i.g[s];if(!u.l)return he("No independent partial segment found!"),null}n?r--:r++,o=s-1;break}}return new Mr(this,r,o,n)};function Rc(e,t,n){return e=new xe(e,e+t,function(){return n},0,null,null,e,e,e+t),new it([e])}D("shaka.media.SegmentIndex",it),it.forSingleSegment=Rc,it.prototype.getIteratorForTime=it.prototype.Gb,it.prototype.updateEvery=it.prototype.Le,it.prototype.fit=it.prototype.Oc,it.prototype.evict=it.prototype.Pa,it.prototype.mergeAndEvict=it.prototype.Bd,it.prototype.offset=it.prototype.offset,it.prototype.get=it.prototype.get,it.prototype.find=it.prototype.find,it.prototype.markImmutable=it.prototype.dj,it.prototype.release=it.prototype.release,it.prototype.getNumEvicted=it.prototype.getNumEvicted,it.prototype.getNumReferences=it.prototype.getNumReferences;function Mr(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}p=Mr.prototype,p.ed=function(e){this.reverse=e},p.ei=function(){return this.h},p.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.A&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},p.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.A&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},p.fg=function(){var e=this.current();if(e.o&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var t=e.g[this.g];t.l&&!(0>=this.g);)this.g--,t=e.g[this.g]},D("shaka.media.SegmentIterator",Mr),Mr.prototype.resetToLastIndependent=Mr.prototype.fg,Mr.prototype.next=Mr.prototype.next,Mr.prototype.current=Mr.prototype.current,Mr.prototype.currentPosition=Mr.prototype.ei,Mr.prototype.setReverse=Mr.prototype.ed;function jt(){it.call(this,[]),this.h=[]}St(jt,it),p=jt.prototype,p.clone=function(){var e=new jt;return e.h=this.h.slice(),e.i=this.i,e},p.release=function(){for(var e=v(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},p.xb=function(e){for(var t=v(this.h),n=t.next();!n.done;n=t.next())n.value.xb(e)},p.find=function(e){for(var t=this.i,n=v(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.find(e);if(i!=null)return i+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},p.get=function(e){for(var t=this.i,n=v(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.get(e-t);if(i)return i;i=r.getNumReferences(),t+=r.getNumEvicted()+i}return null},p.offset=function(){},p.oe=function(){},p.Pa=function(e){for(var t=v(this.h),n=t.next();!n.done;n=t.next())n.value.Pa(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},p.Bd=function(){},p.Oc=function(){},p.Le=function(){},D("shaka.media.MetaSegmentIndex",jt),jt.prototype.updateEvery=jt.prototype.Le,jt.prototype.fit=jt.prototype.Oc,jt.prototype.mergeAndEvict=jt.prototype.Bd,jt.prototype.evict=jt.prototype.Pa,jt.prototype.merge=jt.prototype.oe,jt.prototype.offset=jt.prototype.offset,jt.prototype.get=jt.prototype.get,jt.prototype.find=jt.prototype.find,jt.prototype.forEachTopLevelReference=jt.prototype.xb,jt.prototype.release=jt.prototype.release;function wa(e){var t=this;this.g=e,this.j=!1,this.i=this.g.de(),this.h=new ze(function(){t.g.hh(.25*t.i)})}wa.prototype.release=function(){this.set(this.sc()),this.h&&(this.h.stop(),this.h=null),this.g=null},wa.prototype.set=function(e){this.i=e,Zh(this)},wa.prototype.sc=function(){return this.g.sc()};function Zh(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.de()!=t&&e.g.og(t);return}catch{}e.h.ua(.25),e.g.de()!=0&&e.g.og(0)}function ep(e){var t=this;this.j=e,this.h=new _e,this.g=new Set,this.i=new ze(function(){N0(t,!1)}).sb(),e.paused||this.i.ua(.25),this.h.D(e,"playing",function(){t.i.sb().ua(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}ep.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=v(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function N0(e,t){var n=e.j.currentTime;e=v(e.g);for(var r=e.next();!r.done;r=e.next())r.value.j(n,t)}function Pc(e){gt.call(this),this.g=new Map,this.h=e}St(Pc,gt),Pc.prototype.release=function(){this.g.clear(),gt.prototype.release.call(this)};function mM(e,t){var n=e.g.get(t);return n||(n={Kd:[],pf:null,contentType:t},e.g.set(t,n)),n}function yM(e,t,n){var r=mM(e,t.contentType);vM(e,r),e={Wc:t,position:n},r=r.Kd,t=r.findIndex(function(i){return i.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Pc.prototype.j=function(e){for(var t=v(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.pf;e:{for(var i=n.Kd,o=i.length-1;0<=o;o--){var s=i[o];if(s.position<=e){i=s.Wc;break e}}i=null}o=i&&!(r===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width),s=i&&r&&i.label&&r.label&&r.label!==i.label;var u=i&&r&&i.language&&r.language&&r.language!==i.language;r=i&&r&&i.roles&&r.roles&&!bs(r.roles,i.roles),(s||u||r)&&j0(this,e,i.contentType)&&(n.pf=i,r=new ce("audiotrackchange",new Map([["quality",i],["position",e]])),this.dispatchEvent(r)),o&&j0(this,e,i.contentType)&&(n.pf=i,JSON.stringify(i),n=new ce("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}};function j0(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function vM(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,i=t.Kd;t.Kd=i.filter(function(o,s){return!(o.position<=n&&s+1<i.length&&i[s+1].position<=n||o.position>=r)})}else t.Kd=[]}function Lc(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function xa(e){gt.call(this),this.h=new Map,this.i=e,this.g=null}St(xa,gt),xa.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),gt.prototype.release.call(this)};function tp(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new ce("regionadd",new Map([["region",t]])),e.dispatchEvent(t),SM(e))}function SM(e){e.g||(e.g=new ze(function(){for(var t=e.i(),n=v(e.h),r=n.next();!r.done;r=n.next()){var i=v(r.value);r=i.next().value,i=i.next().value,i.endTime<t.start&&(e.h.delete(r),r=new ce("regionremove",new Map([["region",i]])),e.dispatchEvent(r))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).ua(2))}function _c(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function TM(e,t){e.l=t,e=v(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Ea(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.g||(e.g=e.i.segmentIndex.Gb(t,!0,e.o)),!e.g))return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value,!!n);){var r=!0;n.isPreload()&&n.xa!=null&&(r=!1),n.dc()==2&&(r=!1),n.Ib(!1)&&(r=!1),r&&n.Y&&t.push(O0(e,n.Y)),r&&!e.h.has(n)&&(r=new rp(e.l),t.push(F0(r,n,e.i)),e.h.set(n,r))}return np(e),Promise.all(t)}function O0(e,t){if(!e.i.segmentIndex||t.Ib()||Array.from(e.j.keys()).some(function(i){return Ac(i,t)}))return Promise.resolve();var n=new rp(e.l),r=F0(n,t,e.i);return e.j.set(t,n),r}function b0(e,t){t=v(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Aa(e,n)}function ii(e){b0(e,e.h),b0(e,e.j),e.g=null}_c.prototype.Pa=function(e,t){t=t===void 0?!1:t;for(var n=v(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&Aa(this,r);t&&np(this)},_c.prototype.ed=function(e){this.o=e,this.g&&this.g.ed(e)};function np(e){for(var t=Array.from(e.h.keys()),n=v(e.j.keys()),r=n.next(),i={};!r.done;i={Pf:void 0},r=n.next())i.Pf=r.value,t.some(function(o){return function(s){return Ac(s.Y,o.Pf)}}(i))||Aa(e,i.Pf)}function U0(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&Aa(e,r)}np(e)}function wM(e,t){t&&t!==e.i&&(ii(e),e.i=t)}function Aa(e,t){var n=e.h;t instanceof Vn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function rp(e){this.g=e,this.Gd=this.rg=null}function F0(e,t,n){var r=new Uint8Array(0);return e.Gd=e.g(t,n,function(i){return b(function(o){if(o.g==1)return 0<r.byteLength?r=Ht(r,i):r=i,e.rg?I(o,e.rg(r),3):o.s(0);r=new Uint8Array(0),ae(o)})}),e.Gd.promise.catch(function(i){return i instanceof j&&i.code==7001?Promise.resolve():Promise.reject(i)})}rp.prototype.abort=function(){this.Gd&&this.Gd.abort()};function ip(e){var t=Zn(e),n=t.split("/")[0];return e=er(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Od:null,colorGamut:null,frameRate:null}}function xM(e,t,n){function r(k){A=k.name;var O=k.reader;O.skip(24);var U=O.ma(),W=O.ma();O.skip(50),g=String(U),h=String(W),k.reader.ta()&&Fe(k)}function i(k){var O=Zv(k.reader);y=O.channelCount,T=O.sampleRate,o(k.name)}function o(k){switch(k=k.toLowerCase(),k){case"avc1":case"avc3":u.push(k+".42E01E"),c=!0;break;case"hev1":case"hvc1":u.push(k+".1.6.L93.90"),c=!0;break;case"dvh1":case"dvhe":u.push(k+".05.04"),c=!0;break;case"vp09":u.push(k+".00.10.08"),c=!0;break;case"av01":u.push(k+".0.01M.08"),c=!0;break;case"mp4a":s.push("mp4a.40.2"),a=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(k),a=!0}}var s=[],u=[],a=!1,c=!1,f=null,h=null,g=null,y=null,T=null,E=null,x=null,A;if(new mt().box("moov",Fe).box("trak",Fe).box("mdia",Fe).R("mdhd",function(k){f=Tc(k.reader,k.version).language}).box("minf",Fe).box("stbl",Fe).R("stsd",Fi).box("mp4a",function(k){var O=Zv(k.reader);y=O.channelCount,T=O.sampleRate,k.reader.ta()?Fe(k):o(k.name)}).box("esds",function(k){k=k.reader;for(var O="mp4a",U,W;k.ta();){U=k.X();for(var B=k.X();B&128;)B=k.X();if(U==3)k.ma(),B=k.X(),B&128&&k.ma(),B&64&&k.skip(k.X()),B&32&&k.ma();else if(U==4)W=k.X(),k.skip(12);else if(U==5)break}W&&(O+="."+ga(W),U==5&&k.ta()&&(U=k.X(),W=(U&248)>>3,W===31&&k.ta()&&(W=32+((U&7)<<3)+((k.X()&224)>>5)),O+="."+W)),s.push(O),a=!0}).box("ac-3",i).box("ec-3",i).box("ac-4",i).box("Opus",i).box("fLaC",i).box("avc1",r).box("avc3",r).box("hev1",r).box("hvc1",r).box("dva1",r).box("dvav",r).box("dvh1",r).box("dvhe",r).box("vp09",r).box("av01",r).box("avcC",function(k){var O=A||"";switch(A){case"dvav":O="avc3";break;case"dva1":O="avc1"}k=k.reader,k.skip(1),k=O+"."+ga(k.X())+ga(k.X())+ga(k.X()),u.push(k),c=!0}).box("hvcC",function(k){var O=A||"";switch(A){case"dvh1":O="hvc1";break;case"dvhe":O="hev1"}var U=k.reader;U.skip(1),k=U.X();var W=["","A","B","C"][k>>6],B=k&31,K=U.S(),X=(k&32)>>5?"H":"L";k=[U.X(),U.X(),U.X(),U.X(),U.X(),U.X()],U=U.X();for(var q=0,Q=0;32>Q&&(q|=K&1,Q!=31);Q++)q<<=1,K>>=1;for(O=O+("."+W+B)+("."+ga(q,!0)),O+="."+X+U,W="",B=k.length;B--;)((X=k[B])||W)&&(W="."+X.toString(16).toUpperCase()+W);O+=W,u.push(O),c=!0}).box("dvcC",function(k){var O=A||"";switch(A){case"hvc1":O="dvh1";break;case"hev1":O="dvhe";break;case"avc1":O="dva1";break;case"avc3":O="dvav";break;case"av01":O="dav1"}var U=k.reader;U.skip(2),k=U.X(),U=U.X(),u.push(O+"."+nr(k>>1&127)+"."+nr(k<<5&32|U>>3&31)),c=!0}).box("dvvC",function(k){var O=A||"";switch(A){case"hvc1":O="dvh1";break;case"hev1":O="dvhe";break;case"avc1":O="dva1";break;case"avc3":O="dvav";break;case"av01":O="dav1"}var U=k.reader;U.skip(2),k=U.X(),U=U.X(),u.push(O+"."+nr(k>>1&127)+"."+nr(k<<5&32|U>>3&31)),c=!0}).R("vpcC",function(k){var O=A||"",U=k.reader;k=U.X();var W=U.X();U=U.X()>>4&15,u.push(O+"."+nr(k)+"."+nr(W)+"."+nr(U)),c=!0}).box("av1C",function(k){var O=A||"";switch(A){case"dav1":O="av01"}var U=k.reader;U.skip(1),k=U.X(),U=U.X();var W=k>>>5,B=(U&64)>>6;u.push(O+"."+W+"."+nr(k&31)+(U>>>7?"H":"M")+"."+nr(W===2&&B?(U&32)>>5?12:10:B?10:8)+"."+((U&16)>>4)+"."+((U&8)>>3)+((U&4)>>2)+(U&3)+"."+nr(1)+"."+nr(1)+"."+nr(1)+".0"),c=!0}).box("enca",hc).box("encv",tr).box("sinf",Fe).box("frma",function(k){k=Oh(k.reader).codec,o(k)}).box("colr",function(k){u=u.map(function(W){if(W.startsWith("av01.")){var B=k.reader,K=B.Ba(),X=B.Db(4),q=String.fromCharCode(X[0]);if(q+=String.fromCharCode(X[1]),q+=String.fromCharCode(X[2]),q+=String.fromCharCode(X[3]),q==="nclx"){X=B.ma(),q=B.ma();var Q=B.ma(),Y=B.X()>>7,ne=W.split(".");ne.length==10&&(ne[6]=nr(X),ne[7]=nr(q),ne[8]=nr(Q),ne[9]=String(Y),W=ne.join("."))}B.seek(K)}return W});var O=M2(k.reader),U=O.colorGamut;E=O.Od,x=U}).parse(e||t,!0),!s.length&&!u.length)return null;var M=a&&!c,L=new Map;if(c&&!n){n=new dr("video/mp4"),e&&n.init(e);try{n.i(t);for(var _=v(n.j()),F=_.next();!F.done;F=_.next()){var P=F.value;L.set(P,P)}}catch{}n.g()}return{type:M?"audio":"video",mimeType:M?"audio/mp4":"video/mp4",codecs:op(s.concat(u)).join(", "),language:f,height:h,width:g,channelCount:y,sampleRate:T,closedCaptions:L,Od:E,colorGamut:x,frameRate:null}}function op(e){var t=new Set,n=[];e=v(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=go(r);t.has(i)||(n.push(r),t.add(i))}return t=Jd("audio",n),r=Jd("video",n),e=Jd(Xe,n),r=EM(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function EM(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?gn('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function AM(e){var t=null;return new mt().box("moov",Fe).box("trak",Fe).box("mdia",Fe).box("minf",Fe).box("stbl",Fe).R("stsd",Fi).box("encv",tr).box("enca",hc).box("sinf",Fe).box("schi",Fe).R("tenc",function(n){n=n.reader,n.X(),n.X(),n.X(),n.X(),t=Ri(n.Db(16))}).parse(e,!0),t}function sp(e,t,n){var r,i,o,s,u;return b(function(a){if(a.g==1)return r=t,r.cryptoKey?a.s(2):I(a,r.fetchKey(),3);if(i=r.iv,!i)for(i=Le(new ArrayBuffer(16)),o=r.firstMediaSequenceNumber+n,s=i.byteLength-1;0<=s;s--)i[s]=o&255,o>>=8;return t.blockCipherMode=="CBC"?u={name:"AES-CBC",iv:i}:u={name:"AES-CTR",counter:i,length:64},a.return(S.crypto.subtle.decrypt(u,r.cryptoKey,e))})}function Ia(e,t,n,r,i){return e=nn(e,r,i),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function B0(e,t){var n=this;this.g=t,this.j=e,this.h=null,this.K=new Map,this.C=1,this.u=this.l=null,this.O=0,this.i=new Map,this.I=!1,this.P=null,this.B=!1,this.m=new Ys(function(){return IM(n)}),this.L=Date.now()/1e3,this.o=new Map,this.M={projection:null,hfov:null},this.W=0,this.T=1/0,this.F=null,this.A=new ze(function(){if(n.j&&n.g)if(n.j.presentationTimeline.U()){var r=n.j.presentationTimeline.Hb(),i=n.j.presentationTimeline.ob();1<i-r?sM(n.g.aa,r,i):qh(n.g.aa)}else qh(n.g.aa),n.A&&n.A.stop()}),this.G=null,this.H=new ze(function(){var r=n.g.video;!r.ended&&n.G&&(r.currentTime=n.G,n.G=null)})}p=B0.prototype,p.destroy=function(){return this.m.destroy()};function IM(e){var t,n,r,i,o,s,u;return b(function(a){if(a.g==1){for(t=[],n=v(e.i.values()),r=n.next();!r.done;r=n.next())i=r.value,lu(i),t.push(Ca(i)),i.ba&&(ii(i.ba),i.ba=null);for(o=v(e.o.values()),s=o.next();!s.done;s=o.next())u=s.value,ii(u);return I(a,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.j=null,e.h=null,e.A&&e.A.stop(),e.A=null,e.H&&e.H.stop(),e.H=null,e.G=null,ae(a)})}p.configure=function(e){if(this.h=e,this.P=new Sv({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.ba&&(ii(t.ba),t.ba=null),t=v(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,ii(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(Xe))&&t.ba&&(ii(t.ba),t.ba=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.ba&&(ii(t.ba),t.ba=null),t=v(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.ba?(U0(n.ba,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(ii(n.ba),n.ba=null)):0<e.segmentPrefetchLimit&&(n.ba=ap(this,n.stream));e.disableAudioPrefetch||LM(this)};function MM(e,t,n){e.j.presentationTimeline.U()||(e.W=t,e.T=n)}p.start=function(e){var t=this;return b(function(n){if(n.g==1)return I(n,PM(t,e||new Map),2);Tt(t.m),t.I=!0,ae(n)})};function CM(e,t){var n,r,i,o,s,u;b(function(a){switch(a.g){case 1:return n=$t,e.O++,r=e.O,ye(a,2),I(a,y0(e.g.aa,n.va),4);case 4:Oe(a,3);break;case 2:i=ve(a),e.g&&e.g.onError(i);case 3:o=Kt(t.mimeType,t.codecs),Cc(e.g.aa,o,e.j.sequenceMode,t.external),s=e.g.aa.ea,(s.isTextVisible()||e.h.alwaysStreamText)&&e.O==r&&(u=Oc(e,t),e.i.set(n.va,u),Rn(e,u,0)),ae(a)}})}function kM(e){var t=e.i.get(Xe);t&&(lu(t),Ca(t).catch(function(){}),e.F=e.i.get(Xe),e.i.delete(Xe)),e.u=null}function up(e,t){for(var n=0>e.g.gb(),r=v(e.i.values()),i=r.next();!i.done;i=r.next())i=i.value,i.ja&&i.ja.ed(n),i.ba&&i.ba.ed(n);for(r=v(e.o.values()),i=r.next();!i.done;i=r.next())i.value.ed(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.fc&&(au(e,t,!1,0,!1),n.fc=r):(t=n.fc)&&(n.fc=null,au(e,t,!0,0,!1)))}function V0(e,t,n,r,i,o){n=n===void 0?!1:n,r=r===void 0?0:r,i=i===void 0?!1:i,o=o===void 0?!1:o,e.l=t,e.I&&(t.video&&au(e,t.video,n,r,i,o),t.audio&&au(e,t.audio,n,r,i,o))}function Nc(e,t){b(function(n){if(n.g==1)return e.F=null,e.u=t,e.I?t.segmentIndex?n.s(2):I(n,t.createSegmentIndex(),2):n.return();au(e,t,!0,0,!1),ae(n)})}function DM(e,t){for(var n=v(e.K.entries()),r=n.next();!r.done;r=n.next()){var i=v(r.value);r=i.next().value,i=i.next().value,r.includes(t.type)&&(i(),e.K.delete(r))}}function au(e,t,n,r,i,o){var s=e.i.get(t.type);s||t.type!=Xe?s&&(s.fc&&(t.trickModeVideo?(s.fc=t,t=t.trickModeVideo):s.fc=null),s.stream!=t||i)&&(e.o.has(t)?s.ba=e.o.get(t):s.ba&&wM(s.ba,t),t.type==Xe&&(i=Kt(t.mimeType,t.codecs),Cc(e.g.aa,i,e.j.sequenceMode,t.external)),!e.o.has(s.stream)&&s.stream.closeSegmentIndex&&(s.Da?(i="("+s.type+":"+s.stream.id+")",e.K.has(i)||e.K.set(i,s.stream.closeSegmentIndex)):s.stream.closeSegmentIndex()),i=s.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,s.stream=t,s.ja=null,s.df=!!o,t.dependencyStream?s.nd=Oc(e,t.dependencyStream):s.nd=null,i?Uc(e,!0,!1):(n?s.nc?s.Ue=!0:s.Da?(s.lc=!0,s.Yd=r,s.Ue=!0):(lu(s),dp(e,s,!0,r).catch(function(u){e.g&&e.g.onError(u)})):s.Da||s.kb||Rn(e,s,0),RM(e,s).catch(function(u){e.g&&e.g.onError(u)}))):CM(e,t)}function RM(e,t){var n,r;return b(function(i){if(i.g==1)return t.rb?(n=t.stream,r=t.rb,n.segmentIndex?i.s(2):I(i,n.createSegmentIndex(),2)):i.return();if(t.rb!=r||t.stream!=n)return i.return();var o=e.g.Rc(),s=as(e.g.aa,t.type),u=t.stream.segmentIndex.find(t.ya?t.ya.endTime:o),a=u==null?null:t.stream.segmentIndex.get(u);u=a&&a.xa?a.xa-a.Sa:null,a&&!u&&(u=(a.endTime-a.getStartTime())*(t.stream.bandwidth||0)/8),u?((a=a.Y)&&(u+=(a.xa?a.xa-a.Sa:null)||0),a=e.g.getBandwidthEstimate(),o=8*u/a<(s||0)-o-e.h.rebufferingGoal||t.rb.h.g>u):o=!1,o&&t.rb.abort(),ae(i)})}p.Fc=function(){if(this.g){for(var e=this.g.Rc(),t=v(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var i=this.g.aa;if(r==Xe?(i=i.h,i=i.g==null||i.h==null?!1:e>=i.g&&e<i.h):(i=iu(i,r),i=Fh(i,e)),!i){if(this.L=0,n.ba&&(n.ba.g=null),n.type==="audio"){i=v(this.o.values());for(var o=i.next();!o.done;o=i.next())o.value.g=null}n.ja=null,(as(this.g.aa,r)!=null||n.Da)&&jc(this,n),n.rb&&(n.rb.abort(),n.rb=null),r===Xe&&(r=this.g.aa,r.O&&r.O.g()),n.Fc=!0}}this.h.crossBoundaryStrategy!=="keep"&&pp(this)}};function jc(e,t){t.nc||t.lc||(t.Da?(t.lc=!0,t.Yd=0):zh(e.g.aa,t.type)==null?t.kb==null&&Rn(e,t,0):(lu(t),dp(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function PM(e,t){var n,r,i,o,s,u,a,c,f,h;return b(function(g){if(g.g==1){if(n=$t,!e.l)throw new j(2,5,5006);return r=new Map,i=new Set,e.l.audio&&(r.set(n.V,e.l.audio),i.add(e.l.audio)),e.l.video&&(r.set(n.la,e.l.video),i.add(e.l.video)),e.u&&(r.set(n.va,e.u),i.add(e.u)),o=e.g.aa,I(g,o.init(r,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Tt(e.m),e.updateDuration(),s=v(r.keys()),u=s.next();!u.done;u=s.next())a=u.value,c=r.get(a),e.i.has(a)||(f=Oc(e,c),t.has(c.id)&&(h=t.get(c.id),TM(h,function(y,T,E){return bc(y,T,E||null,e.h.retryParameters,e.g.Xb)}),f.ba=h),e.i.set(a,f),Rn(e,f,0));ae(g)})}function Oc(e,t){var n={stream:t,type:t.type,ja:null,ba:ap(e,t),ya:null,zb:null,le:null,Ac:null,zc:null,je:null,ke:null,fc:null,endOfStream:!1,Da:!1,kb:null,lc:!1,Yd:0,Ue:!1,nc:!1,Fc:!0,df:!1,dg:!1,sd:!1,rb:null,nd:null};return t.dependencyStream&&(n.nd=Oc(e,t.dependencyStream)),n}function ap(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===Xe&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===Xe&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.ba)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new _c(e.h.segmentPrefetchLimit,t,function(r,i,o){return bc(r,i,o||null,e.h.retryParameters,e.g.Xb)},0>e.g.gb()):null}function LM(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=v(e.j.variants),i=r.next(),o={};!i.done;o={wb:void 0},i=r.next())if(o.wb=i.value,o.wb.audio)if(e.o.has(o.wb.audio)){if(i=e.o.get(o.wb.audio),U0(i,t),!(0<t&&n.some(function(u){return function(a){return Ws(u.wb.audio.language,a)}}(o)))){var s=e.i.get(o.wb.audio.type);i!==(s&&s.ba)&&ii(i),e.o.delete(o.wb.audio)}}else 0>=t||!n.some(function(u){return function(a){return Ws(u.wb.audio.language,a)}}(o))||!(i=ap(e,o.wb.audio))||(o.wb.audio.segmentIndex||o.wb.audio.createSegmentIndex(),e.o.set(o.wb.audio,i))}p.updateDuration=function(){var e=Uy(),t=this.j.presentationTimeline.getDuration();1/0>t?(e&&(this.A&&this.A.stop(),qh(this.g.aa)),this.g.aa.bb(t)):e?(this.A&&this.A.ua(.5),this.g.aa.bb(1/0)):this.g.aa.bb(Math.pow(2,32))};function _M(e,t){var n,r,i,o,s,u;return b(function(a){switch(a.g){case 1:if(Tt(e.m),t.Da||t.kb==null||t.nc)return a.return();if(t.kb=null,!t.lc){a.s(2);break}return I(a,dp(e,t,t.Ue,t.Yd),3);case 3:return a.return();case 2:if(DM(e,t),t.stream.segmentIndex){a.s(4);break}return n=t.stream,ye(a,5),I(a,t.stream.createSegmentIndex(),7);case 7:Oe(a,6);break;case 5:return r=ve(a),I(a,hp(e,t,r),8);case 8:return a.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Da||t.kb||Rn(e,t,0),a.return();case 4:ye(a,9),i=NM(e,t),i!=null&&(Rn(e,t,i),t.sd=!1),Oe(a,10);break;case 9:return o=ve(a),I(a,hp(e,t,o),11);case 11:return a.return();case 10:if(s=Array.from(e.i.values()),!e.I||!s.every(function(c){return c.endOfStream})){a.s(0);break}return I(a,e.g.aa.endOfStream(),13);case 13:Tt(e.m),u=e.g.aa.getDuration(),u!=0&&u<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.bb(u),ae(a)}})}function NM(e,t){if(fp(t))return nM(e.g.aa,t.stream.originalId||""),null;if(t.type==Xe&&rM(e.g.aa),t.stream.isAudioMuxedInVideo)return null;var n=e.h.updateIntervalSeconds/Math.max(1,Math.abs(e.g.gb()));if(!m0(e.g.aa)&&t.type!=Xe)return n/2;var r=e.g.Rc();if(t.type==="audio")for(var i=v(e.o.keys()),o=i.next();!o.done;o=i.next())o=e.o.get(o.value),o.Pa(r,!0),Ea(o,r);i=t.ya?t.ya.endTime:r;var s=eM(e.g.aa,t.type,r),u=Math.max(1,Math.max(e.h.rebufferingGoal,e.h.bufferingGoal)*e.C),a=e.j.presentationTimeline.getDuration()-i;if(o=as(e.g.aa,t.type),1e-6>a&&o)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Xe))&&fp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,s>=u)return n/2;if(u=!t.ja,o=jM(e,t,r,o),!o)return n;s=!1,u&&t.df&&(s=!0,t.df=!1),u=1/0,a=Array.from(e.i.values()),a=v(a);for(var c=a.next();!c.done;c=a.next())c=c.value,fp(c)||c.ja&&!c.ja.current()||(u=Math.min(u,c.ya?c.ya.endTime:r));return i>=u+e.j.presentationTimeline.h?n:(e.h.crossBoundaryStrategy!=="keep"&&HM(e,t,o)||(t.ba&&t.ja&&!e.o.has(t.stream)&&(t.ba.Pa(o.startTime+.001),Ea(t.ba,o.startTime).catch(function(){})),OM(e,t,r,o,s).catch(function(){}),t.nd&&bM(e,t.nd,r)),null)}function jM(e,t,n,r){if(t.ja)return(n=t.ja.current())&&t.ya&&.001>Math.abs(t.ya.startTime-n.startTime)&&(n=t.ja.next().value),n;if(t.ya||r)return n=t.ya?t.ya.endTime:r,e=0>e.g.gb(),t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(n,!1,e)),t.ja&&t.ja.next().value;r=e.j.sequenceMode?0:e.h.inaccurateManifestTolerance;var i=Math.max(n-r,0);e=0>e.g.gb();var o=null;return r&&(t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(i,!1,e)),o=t.ja&&t.ja.next().value),o||(t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(n,!1,e)),o=t.ja&&t.ja.next().value),o}function OM(e,t,n,r,i){var o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F;return b(function(P){switch(P.g){case 1:if(o=$t,s=t.stream,u=t.ja,t.Da=!0,ye(P,2),r.dc()==2)throw new j(1,1,1011);return I(P,BM(e,t,r,i),4);case 4:return Tt(e.m),e.B?P.return():(a=s.mimeType=="video/mp4"||s.mimeType=="audio/mp4",c=S.ReadableStream,e.h.lowLatencyMode&&e.j.isLowLatency&&c&&a&&(e.j.type!="HLS"||r.m)?(g=new Uint8Array(0),T=y=!1,x=function(k){var O,U,W;return b(function(B){switch(B.g){case 1:if(y||(T=!0,Tt(e.m),e.B))return B.return();if(ye(B,2),g=UM(g,k),O=!1,U=0,new mt().box("mdat",function(K){U=K.size+K.start,O=!0}).parse(g,!1,!0),!O){B.s(4);break}return W=g.subarray(0,U),g=g.subarray(U),I(B,lp(e,t,n,s,r,W,!0,i),5);case 5:t.ba&&t.ja&&Ea(t.ba,r.startTime,!0);case 4:Oe(B,0);break;case 2:E=ve(B),ae(B)}})},I(P,Ma(e,t,r,x),9)):(f=Ma(e,t,r),I(P,f,7)));case 7:return h=P.h,Tt(e.m),e.B?P.return():(Tt(e.m),t.lc?(t.Da=!1,Rn(e,t,0),P.return()):I(P,lp(e,t,n,s,r,h,!1,i),6));case 9:if(A=P.h,E)throw E;if(T){P.s(10);break}return y=!0,Tt(e.m),e.B?P.return():t.lc?(t.Da=!1,Rn(e,t,0),P.return()):I(P,lp(e,t,n,s,r,A,!1,i),10);case 10:t.ba&&t.ja&&Ea(t.ba,r.startTime,!0);case 6:if(Tt(e.m),e.B)return P.return();t.ya=r,u.next(),t.Da=!1,t.dg=!1,M=e.g.aa.Fb(),L=M[t.type],JSON.stringify(L),t.lc||(_=null,t.type===o.la?_=e.i.get(o.V):t.type===o.V&&(_=e.i.get(o.la)),_&&_.type==o.V?e.g.ue(r,t.stream,_.stream.isAudioMuxedInVideo):e.g.ue(r,t.stream,t.stream.codecs.includes(","))),Rn(e,t,0),Oe(P,0);break;case 2:if(F=ve(P),Tt(e.m,F),e.B)return P.return();if(t.Da=!1,F.code==7001)t.Da=!1,lu(t),Rn(e,t,0),P.s(0);else if(t.type==o.va&&e.h.ignoreTextStreamFailures)e.i.delete(o.va),P.s(0);else return F.code==3017?I(P,FM(e,t,F),0):(t.sd=!0,F.category==1&&t.ba&&Aa(t.ba,r),F.severity=2,I(P,hp(e,t,F),0))}})}function bM(e,t,n){var r,i,o,s,u,a,c,f;b(function(h){switch(h.g){case 1:if(r=t.stream,o=(i=r.segmentIndex.Gb(n))&&i.next().value,!o){h.s(0);break}if(s=o.Y,!s||Ac(s,t.zb)){h.s(3);break}return t.zb=s,ye(h,4),I(h,Ma(e,t,s),6);case 6:u=h.h;var g=e.g.aa;g.K&&Zd(g.K,u,0,r),Oe(h,3);break;case 4:throw a=ve(h),t.zb=null,a;case 3:if(t.ya&&t.ya==o){h.s(0);break}return t.ya=o,ye(h,8),I(h,Ma(e,t,o),10);case 10:c=h.h,g=e.g.aa,g.K&&Zd(g.K,c,0,r),Oe(h,0);break;case 8:throw f=ve(h),t.ya=null,f}})}function UM(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function FM(e,t,n){var r,i,o,s;return b(function(u){if(u.g==1){if(r=Array.from(e.i.values()),r.some(function(a){return a!=t&&a.dg}))return u.s(2);if(i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,e.g.disableStream(t.stream,i))return u.return();if(e.h.avoidEvictionOnQuotaExceededError)return Rn(e,t,4),u.return();if(o=Math.round(100*e.C),20<o)e.C-=.2;else if(4<o)e.C-=.04;else return t.sd=!0,e.B=!0,e.g.onError(n),u.return();return t.dg=!0,s=e.g.Rc(),I(u,cp(e,t,s),2)}Rn(e,t,4),ae(u)})}function BM(e,t,n,r){var i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L;return b(function(_){switch(_.g){case 1:if(i=$t,o=t.ya==null,s=[],u=Math.max(0,Math.max(n.appendWindowStart,e.W)-.1),a=Math.min(n.appendWindowEnd,e.T)+.01,c=n.codecs||t.stream.codecs,f=go(c),h=Zn(n.mimeType||t.stream.mimeType),g=n.timestampOffset,g==t.le&&u==t.Ac&&a==t.zc&&f==t.je&&h==t.ke){_.s(2);break}if(y=t.je&&t.ke&&fM(e.g.aa,t.type,h,c),!y){_.s(3);break}if(T=null,t.type===i.la?T=e.i.get(i.V):t.type===i.V&&(T=e.i.get(i.la)),!T){_.s(3);break}return I(_,Ca(T).catch(function(){}),5);case 5:T.zb=null,T.Ac=null,T.zc=null,jc(e,T);case 3:return I(_,H0(e,t,g,u,a,n,f,h),2);case 2:return Ac(n.Y,t.zb)||(t.zb=n.Y,n.l&&n.Y&&(E=Ma(e,t,n.Y),x=function(){var F,P,k,O,U,W,B;return b(function(K){switch(K.g){case 1:return ye(K,2),I(K,E,4);case 4:return F=K.h,Tt(e.m),P=null,k=new Map,O={projection:null,hfov:null},U=new mt,U.box("moov",Fe).box("trak",Fe).box("mdia",Fe).R("mdhd",function(X){P=Tc(X.reader,X.version).timescale}).box("hdlr",function(X){switch(X=X.reader,X.skip(8),X.Cc()){case"soun":k.set(i.V,P);break;case"vide":k.set(i.la,P)}P=null}).box("minf",Fe).box("stbl",Fe).R("stsd",Fi).box("encv",tr).box("avc1",tr).box("avc3",tr).box("hev1",tr).box("hvc1",tr).box("dvav",tr).box("dva1",tr).box("dvh1",tr).box("dvhe",tr).box("dvc1",tr).box("dvi1",tr).box("vexu",Fe).box("proj",Fe).R("prji",function(X){X=X.reader.Cc(),O.projection=X}).box("hfov",function(X){X=X.reader.S()/1e3,O.hfov=X}).parse(F),t.type===i.la&&VM(e,O),k.has(t.type)?n.Y.timescale=k.get(t.type):P!=null&&(n.Y.timescale=P),W=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,I(K,e.g.Hg(t.type,F),5);case 5:return I(K,kc(e.g.aa,t.type,F,null,t.stream,W,t.Fc,r),6);case 6:Oe(K,0);break;case 2:throw B=ve(K),t.zb=null,B}})},A=n.startTime,o&&(M=as(e.g.aa,t.type),M!=null&&(A=M)),e.g.hj(A,n.Y),s.push(x()))),L=t.ya?t.ya.i:-1,n.i!=L&&s.push(oM(e.g.aa,t.type,n.startTime)),I(_,Promise.all(s),0)}})}function H0(e,t,n,r,i,o,s,u){var a,c,f,h;return b(function(g){if(g.g==1)return a=$t,c=new Map,e.l.audio&&c.set(a.V,e.l.audio),e.l.video&&c.set(a.la,e.l.video),ye(g,2),t.Ac=r,t.zc=i,s&&(t.je=s),u&&(t.ke=u),t.le=n,f=e.j.sequenceMode||e.j.type=="HLS",I(g,iM(e.g.aa,t.type,n,r,i,f,o.mimeType||t.stream.mimeType,o.codecs||t.stream.codecs,c),4);if(g.g!=2)return Oe(g,0);throw h=ve(g),t.Ac=null,t.zc=null,t.je=null,t.ke=null,t.le=null,h})}function lp(e,t,n,r,i,o,s,u){s=s===void 0?!1:s,u=u===void 0?!1:u;var a,c,f,h,g,y;return b(function(T){switch(T.g){case 1:return a=r.closedCaptions&&0<r.closedCaptions.size,e.h.shouldFixTimestampOffset&&(f=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",h=null,i.Y&&(h=i.Y.timescale),(g=f&&h&&r.type==="video"&&e.j.type=="DASH")&&(c=new mt),g&&c.box("moof",Fe).box("traf",Fe).R("tfdt",function(E){var x,A,M,L,_,F;return b(function(P){return x=Sc(E.reader,E.version),A=x.baseMediaDecodeTime,A?(M=-A/h,L=Number(t.le)||0,L<M?(_=t.Ac,F=t.zc,I(P,H0(e,t,M,_,F,i),0)):P.s(0)):P.return()})}),g&&c.parse(o,!1,s)),I(T,cp(e,t,n),2);case 2:return Tt(e.m),y=t.Fc,t.Fc=!1,I(T,e.g.Hg(t.type,o),3);case 3:return I(T,kc(e.g.aa,t.type,o,i,r,a,y,u,s),4);case 4:Tt(e.m),ae(T)}})}function cp(e,t,n){var r,i,o,s,u,a,c,f;return b(function(h){if(h.g==1)return r=t.stream.segmentIndex,r instanceof jt&&r.Pa(e.j.presentationTimeline.pb()),i=Math.max(e.h.bufferBehind*e.C,e.j.presentationTimeline.h),o=zh(e.g.aa,t.type),o==null?(e.F==t&&(e.F=null),h.return()):(s=n-o,u=e.h.evictionGoal,a=e.j.presentationTimeline.Hb(),c=e.j.presentationTimeline.ob(),f=s-i,c-a>u&&(f=Math.max(s-i,a-u-o)),f<=u?h.return():I(h,e.g.aa.remove(t.type,o,o+f),2));if(h.g!=4)return Tt(e.m),e.F?I(h,cp(e,e.F,n),4):h.s(0);Tt(e.m),ae(h)})}function fp(e){return e&&e.type==Xe&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Ma(e,t,n,r){var i,o,s,u,a;return b(function(c){switch(c.g){case 1:if(i=n.Ib())return c.return(i);if(o=null,t.ba){var f=t.ba,h=f.h;n instanceof Vn&&(h=f.j),h.has(n)?(f=h.get(n),r&&(f.rg=r),o=f.Gd):o=null}return o||(o=bc(n,t.stream,r||null,e.h.retryParameters,e.g.Xb)),s=0,t.ja&&(s=t.ja.h),t.rb=o,I(c,o.promise,2);case 2:if(u=c.h,t.rb=null,a=u.data,!n.aesKey){c.s(3);break}return I(c,sp(a,n.aesKey,s),4);case 4:a=c.h;case 3:return c.return(a)}})}function bc(e,t,n,r,i,o){o=o===void 0?!1:o;var s=e instanceof xe?e:void 0,u=s?1:0;return e=Ia(e.N(),e.Sa,e.xa,r,n),e.contentType=t.type,i.request(Xr,e,{type:u,stream:t,segment:s,isPreload:o})}function dp(e,t,n,r){var i,o;return b(function(s){if(s.g==1)return t.lc=!1,t.Ue=!1,t.Yd=0,t.nc=!0,t.ya=null,t.ja=null,t.ba&&!e.o.has(t.stream)&&ii(t.ba),r?(i=e.g.Rc(),o=e.g.aa.getDuration(),I(s,e.g.aa.remove(t.type,i+r,o),3)):I(s,y0(e.g.aa,t.type),4);if(s.g!=3)return Tt(e.m),n?I(s,e.g.aa.flush(t.type),3):s.s(3);Tt(e.m),t.nc=!1,t.endOfStream=!1,t.Da||t.kb||Rn(e,t,0),ae(s)})}function Rn(e,t,n){var r=t.type;(r!=Xe||e.i.has(r))&&(t.kb=new Xu(function(){var i;return b(function(o){if(o.g==1)return ye(o,2),I(o,_M(e,t),4);if(o.g!=2)return Oe(o,0);i=ve(o),e.g&&e.g.onError(i),ae(o)})}).da(n))}function lu(e){e.kb!=null&&(e.kb.stop(),e.kb=null)}function Ca(e){return b(function(t){return e.rb?I(t,e.rb.abort(),0):t.s(0)})}function hp(e,t,n){var r;return b(function(i){if(i.g==1)return n.code==3024?(t.Da=!1,lu(t),Rn(e,t,0),i.return()):I(i,Tv(e.P),2);if(Tt(e.m),n.category===1&&n.code!=1003){if(t.fc)return up(e,!1),i.return();r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),ae(i)})}function Uc(e,t,n){t=t===void 0?!1:t,n=n===void 0?!0:n;var r,i,o,s,u,a;return b(function(c){if(c.g==1){if(r=Date.now()/1e3,i=e.h.minTimeBetweenRecoveries,!t){if(!e.h.allowMediaSourceRecoveries||r-e.L<i)return c.return(!1);e.L=r}return o=$t,(s=e.i.get(o.V))&&(s.zb=null,s.Ac=null,s.zc=null,n&&jc(e,s),Ca(s).catch(function(){}),s.ja&&s.ja.fg()),(u=e.i.get(o.la))&&(u.zb=null,u.Ac=null,u.zc=null,n&&jc(e,u),Ca(u).catch(function(){}),u.ja&&u.ja.fg()),a=new Map,e.l.audio&&a.set(o.V,e.l.audio),e.l.video&&a.set(o.la,e.l.video),I(c,S0(e.g.aa,a),2)}return!u||u.nc||u.Da||u.kb||Rn(e,u,0),!s||s.nc||s.Da||s.kb||Rn(e,s,0),c.return(!0)})}function VM(e,t){if(e.M.projection!=t.projection||e.M.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new ce("spatialvideoinfo",n)}else n=new ce("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.M=t}}function pp(e){if(e.h.crossBoundaryStrategy!=="keep"){e.H.stop();var t=e.g.Rc(),n=e.i.get("video")||e.i.get("audio");n&&(n=n.zb)&&n.g!==null&&(t=n.g-t,0>t||1<t||(e.G=n.g+.01,e.H.da(t)))}}function HM(e,t,n){if(t.type===Xe)return!1;var r=t.zb;if(!r)return!1;n=n.Y;var i=r.g!==n.g;if(e.h.crossBoundaryStrategy==="reset_to_encrypted"&&(r.encrypted||n.encrypted||(i=!1),r.encrypted&&(e.h.crossBoundaryStrategy="keep")),e.h.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&r.encrypted==n.encrypted&&(i=!1),i&&t.Fc){var o=e.g.video,s=o.paused;Uc(e,!0).then(function(){e.g.onEvent(new ce("boundarycrossed")),s||o.play()})}return i}function Fc(){}function gp(e,t,n,r,i){var o=i in r,s=o?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,u=o||s,a=!0,c;for(c in t){var f=i+"."+c,h=o?r[i]:n[c];u||c in n?t[c]===void 0?h===void 0||u?delete e[c]:e[c]=ei(h):s?e[c]=t[c]:h.constructor==Object&&t[c]&&t[c].constructor==Object?(e[c]||(e[c]=ei(h)),f=gp(e[c],t[c],h,r,f),a=a&&f):typeof t[c]!=typeof h||t[c]==null||typeof t[c]!="function"&&t[c].constructor!=h.constructor?(he("Invalid config, wrong type for "+f),a=!1):(typeof n[c]=="function"&&n[c].length!=t[c].length&&re("Unexpected number of arguments for "+f),e[c]=t[c]):(he("Invalid config, unrecognized key "+f),a=!1)}return a}function Bc(e,t){for(var n={},r=n,i=0,o=0;i=e.indexOf(".",i),!(0>i);)(i==0||e[i-1]!="\\")&&(o=e.substring(o,i).replace(/\\\./g,"."),r[o]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}function cu(e,t){return e&&t}function G0(e,t){function n(o){for(var s=v(Object.keys(o)),u=s.next();!u.done;u=s.next())if(u=u.value,!(o[u]instanceof HTMLElement))if(i(o[u])&&Object.keys(o[u]).length===0)delete o[u];else{var a=o[u];Array.isArray(a)&&a.length===0||typeof o[u]=="function"?delete o[u]:i(o[u])&&(n(o[u]),Object.keys(o[u]).length===0&&delete o[u])}}function r(o,s){return Object.keys(o).reduce(function(u,a){var c=o[a];return s.hasOwnProperty(a)?c instanceof HTMLElement&&s[a]instanceof HTMLElement?c.isEqualNode(s[a])||(u[a]=c):i(c)&&i(s[a])?(c=r(c,s[a]),(0<Object.keys(c).length||!i(c))&&(u[a]=c)):Array.isArray(c)&&Array.isArray(s[a])?ih(c,s[a])||(u[a]=c):Number.isNaN(c)&&Number.isNaN(s[a])||c!==s[a]&&(u[a]=c):u[a]=c,u},{})}function i(o){return o&&typeof o=="object"&&!Array.isArray(o)}return e=r(e,t),n(e),e}D("shaka.util.ConfigUtils",Fc),Fc.getDifferenceFromConfigObjects=G0,Fc.convertToConfigObject=Bc,Fc.mergeConfigObjects=gp;function Gn(){}function K0(e){return e=di(e),new Vt(e).nb}function ka(e,t,n){function r(u){Un(o).setUint32(s,u.byteLength,!0),s+=4,o.set(Le(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new j(2,6,6015);var i;typeof t=="string"?i=$d(t,!0):i=t,e=di(e),e=$d(e,!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),s=0;return r(e),r(i),r(n),o}function mp(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=di(e).split("skd://").pop(),ka(e,n,t))}function Vc(e,t){e===2&&(e=t.drmInfo)&&Wl(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}D("shaka.drm.FairPlay",Gn),Gn.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&Wl(e.keySystem)){try{var n=Rt(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch{}e&&(t.data=Ar(Ir(n)))}},Gn.muxFairPlayRequest=function(e,t){Vc(e,t)},Gn.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&Wl(n.keySystem)&&Vc(e,t)}},Gn.conaxFairPlayRequest=function(e,t){Vc(e,t)},Gn.ezdrmFairPlayRequest=function(e,t){Vc(e,t)},Gn.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&Wl(e.keySystem)&&(e=Le(t.body),e=Di(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Hr("spc="+e))},Gn.muxInitDataTransform=function(e,t,n){return mp(e,t,n)},Gn.expressplayInitDataTransform=function(e,t,n){return mp(e,t,n)},Gn.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=di(e).split("skd://").pop().split("?").shift(),n=S.atob(n);var r=new ArrayBuffer(2*n.length);r=My(r);for(var i=0,o=n.length;i<o;i++)r[i]=n.charCodeAt(i);return ka(e,r,t)},Gn.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=di(e).split(";").pop(),ka(e,n,t))},Gn.verimatrixInitDataTransform=function(e,t,n){return mp(e,t,n)},Gn.initDataTransform=ka,Gn.defaultGetContentId=K0,Gn.isFairPlaySupported=function(){var e;return b(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ye(t,2),I(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ve(t),t.return(!1))})};function yp(){this.g=null}yp.prototype.configure=function(e){this.g=e},yp.prototype.create=function(e){var t;if(this.g.language){var n=GM(e,this.g.language);n.length&&(t=n)}return t||(t=e.filter(function(r){return r.primary}),t=t.length?t:e),e=KM(t,this.g.role),e.length&&(t=e),this.g.videoLayout&&(e=YM(t,this.g.videoLayout),e.length&&(t=e)),this.g.Sc&&(e=qM(t,this.g.Sc),e.length&&(t=e)),this.g.channelCount&&(e=zM(t,this.g.channelCount),e.length&&(t=e)),this.g.Kc&&(e=WM(t,this.g.Kc),e.length&&(t=e)),this.g.fd&&(e=XM(t,this.g.fd),e.length&&(t=e)),e=$M(t,this.g.spatialAudio),e.length&&(t=e),this.g.audioCodec&&(e=QM(t,this.g.audioCodec),e.length&&(t=e)),new yc(t[0],t,!(this.g.codecSwitchingStrategy=="smooth"&&Go()))};function GM(e,t){t=yt(t);var n=oc(t,e.map(function(r){return wh(r)}));return n?e.filter(function(r){return n==wh(r)}):[]}function KM(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function WM(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function XM(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function zM(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,r){return n.audio||r.audio?n.audio?r.audio?(r.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function qM(e,t){if(t=="AUTO"){var n=e.some(function(r){return!!(r.video&&r.video.hdr&&r.video.hdr=="HLG")});t=Ly(n)}return e.filter(function(r){return!(r.video&&r.video.hdr&&r.video.hdr!=t)})}function YM(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function $M(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function QM(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function Hc(){}function fu(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ni(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(f,h,g){return S.shakaMediaKeysPolyfill==="apple"&&h=="skd"&&(h=g.serverCertificate,g=K0(f),f=ka(f,g,h)),f},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Jr(),minHdcpVersion:"",ignoreDuplicateInitData:!Xt("Tizen 2"),defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"};(Jr()||Zr())&&t.preferredKeySystems.push("com.microsoft.playready"),Yl()&&!Ps()&&(t.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"});var n="reload",r=!1;!Go()||fi()||Zr()||Ls()||ki()&&ky()===79||Vr()&&!uo()&&!zd()||Yl()&&Ps()||(n="smooth",r=!0),r={retryParameters:ni(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:Gc,manifestPreprocessorTXml:Kc,sequenceMode:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:CI(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:Gc,manifestPreprocessorTXml:Kc,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var i={retryParameters:ni(),failureCallback:function(f){return cu([f])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Zr()||Ls(),dontChooseCodecs:!1,shouldFixTimestampOffset:ki()||fi(),avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep"};(ki()||fi()||Vr()||ql())&&(i.stallSkip=0),(navigator.userAgent.match(/Edge\//)||Jr())&&(i.gapPadding=.01),fi()&&(i.gapPadding=2),zl()&&(i.crossBoundaryStrategy="reset"),Ci()&&(i.crossBoundaryStrategy="reset_to_encrypted");var o={trackSelectionCallback:function(f){return b(function(h){return h.return(f)})},downloadSizeCallback:function(f){var h;return b(function(g){return g.g==1?navigator.storage&&navigator.storage.estimate?I(g,navigator.storage.estimate(),3):g.return(!0):(h=g.h,g.return(h.usage+f<.95*h.quota))})},progressCallback:function(f,h){return cu([f,h])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:pn()?.5:0,preferNetworkInformationBandwidth:!1},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(f){return cu([f],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(f,h){return cu([f,h])},dispatchAllEmsgBoxes:!1};var s=!1,u=!1,a=!0;qd()&&(u=s=!0,a=!1);var c={drm:t,manifest:r,streaming:i,mediaSource:n,offline:o,abrFactory:function(){return new Lt},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(yp,[null].concat(J(en.apply(0,arguments)))))},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:s,skipPlayDetection:u,supportsMultipleMediaElements:a,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0},ignoreHardwareResolution:!1};return o.trackSelectionCallback=function(f){return b(function(h){return h.return(JM(f,c.preferredAudioLanguage,c.preferredVideoHdrLevel))})},c}function W0(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function To(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return gp(e,t,n||fu(),r,"")}function JM(e,t,n){var r=n;r=="AUTO"&&(n=e.some(function(u){return!!(u.hdr&&u.hdr=="HLG")}),r=Ly(n));var i=e.filter(function(u){return!(u.type!="variant"||u.hdr&&u.hdr!=r)});n=[];var o=oc(t,i.map(function(u){return u.language}));o&&(n=i.filter(function(u){return yt(u.language)==o})),n.length==0&&(n=i.filter(function(u){return u.primary})),n.length==0&&(i.map(function(u){return u.language}),n=i);var s=n.filter(function(u){return u.height&&480>=u.height});for(s.length&&(s.sort(function(u,a){return a.height-u.height}),n=s.filter(function(u){return u.height==s[0].height})),t=[],n.length&&(i=Math.floor(n.length/2),n.sort(function(u,a){return u.bandwidth-a.bandwidth}),t.push(n[i])),e=v(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Xe&&n.type!="image"||t.push(n);return t}function Gc(e){return cu([e],e)}function Kc(e){return cu([e],e)}D("shaka.util.PlayerConfiguration",Hc),Hc.mergeConfigObjects=To,Hc.createDefaultForLL=W0,Hc.createDefault=fu;function ZM(){this.g=null,this.h=[]}function vp(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=v(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function eC(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],r=v(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}function tC(){this.i=this.h=null,this.g=[]}function Sp(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Wc(){this.mc=this.dh=this.u=this.A=this.I=this.B=this.o=this.j=this.H=this.C=this.i=this.P=this.T=this.L=this.M=this.O=this.l=this.m=NaN,this.K=0,this.F=this.G=NaN,this.g=new ZM,this.h=new tC}function Cr(e,t,n,r){gt.call(this),this.O=e,this.Z=t,this.Fa=r.networkingEngine,this.B=n,this.o=null,this.za=0,this.Na=r.Lc,this.F=r.aj,this.Oa=r.bj,this.g=r.config,this.l=this.G=this.h=null,this.oa=!1,this.H=r.mj,this.sa=!1,this.i=null,this.ka=!1,this.j=this.C=null,this.ea=!1,this.M=new Map,this.Aa=!1,this.Ga=r.lj,this.$=new Wc,this.na=new pt,this.m=new pt,this.P=null,this.u=!1,this.fa=r.Vh,this.W=this.K=null,this.Ma=r.Uh,this.T=!1,this.L=[],this.I=[],this.A=!0}St(Cr,gt);function Da(e,t,n){(e=t?e.I:e.L)?e.push(n):n()}function nC(e){if(e.I)for(var t=v(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function X0(e,t){if(e.P=t,e.T=!0,e.L){t=v(e.L);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.L=null}p=Cr.prototype,p.getStartTime=function(){return this.B},p.Qc=function(){return this.O},p.Jf=function(){return this.h};function rC(e){return e.ea=!0,e.j}function iC(e){return e.sa=!0,e.H}p.getStats=function(){return this.$};function oC(e){return e.ka=!0,e.i}p.Ci=function(){return this.K?Jo(this.K):null},p.Bi=function(){return this.W?Zo(this.W):null};function sC(e){return e.Aa=!0,e.M}p.start=function(){var e=this;(function(){var t;return b(function(n){switch(n.g){case 1:return I(n,Promise.resolve(),2);case 2:return ye(n,3),I(n,uC(e),5);case 5:if(ls(e),S.shakaMediaKeysPolyfill==="webkit"){n.s(6);break}return I(n,z0(e),7);case 7:ls(e);case 6:return I(n,aC(e),8);case 8:if(ls(e),!e.fa||!e.i){n.s(9);break}return I(n,p2(e.i),10);case 10:ls(e);case 9:e.m.resolve(),Oe(n,0);break;case 3:t=ve(n),t instanceof j&&(t.code==7001||t.code==7003)||e.m.reject(t),ae(n)}})})()},p.dispatchEvent=function(e){return this.P?this.P.dispatchEvent(e):gt.prototype.dispatchEvent.call(this,e)},p.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new ce("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function ls(e){if(e.u)throw new j(2,7,7003)}function Tp(e,t){e.dispatchEvent(new ce("onstatechange",new Map().set("state",t)))}function uC(e){var t,n,r,i,o,s,u,a,c;return b(function(f){switch(f.g){case 1:if(Tp(e,"manifest-parser"),e.l||(e.G=Jv(e.O,e.Z),e.l=e.G(),e.l.configure(e.g.manifest,function(){return e.A})),t=Date.now()/1e3,Tp(e,"manifest"),e.h){f.s(2);break}return I(f,e.l.start(e.O,e.Oa),3);case 3:if(e.h=f.h,e.h.variants.length!=1){f.s(2);break}for(n=[],r=e.h.variants[0],i=v([r.video,r.audio]),o=i.next();!o.done;o=i.next())(s=o.value)&&!s.segmentIndex&&n.push(s.createSegmentIndex());if(!(0<n.length)){f.s(2);break}return I(f,Promise.all(n),2);case 2:return e.na.resolve(),u=new ce("manifestparsed",void 0),I(f,Promise.resolve(),7);case 7:if(e.dispatchEvent(u),e.h.variants.length==0)throw new j(2,4,4036);lC(e.h),a=Date.now()/1e3,c=a-t,e.$.H=c,ae(f)}})}function z0(e,t){var n,r,i,o,s,u;return b(function(a){switch(a.g){case 1:if(!e.h||e.i)return a.return();if(Tp(e,"drm-engine"),e.za=Date.now()/1e3,e.i=e.Na(),e.F.h=e.i,e.i.configure(e.g.drm,function(){return e.A}),n=qv(e.F,e.h),!n){a.s(2);break}return r=new ce("trackschanged",void 0),I(a,Promise.resolve(),3);case 3:ls(e),e.dispatchEvent(r);case 2:return i=uc(e.h.variants),o=!0,e.h&&e.h.presentationTimeline&&e.h.type!="HLS"&&(o=e.h.presentationTimeline.U()),I(a,Lv(e.i,i,e.h.offlineSessionIds,o),4);case 4:if(ls(e),!t){a.s(5);break}return I(a,e.i.Lb(t),6);case 6:ls(e);case 5:return I(a,zv(e.F,e.h),7);case 7:if(s=a.h,!s){a.s(0);break}return u=new ce("trackschanged",void 0),I(a,Promise.resolve(),9);case 9:e.dispatchEvent(u),ae(a)}})}p.configure=function(e,t){e=Bc(e,t),To(this.g,e)},p.getConfiguration=function(){return ei(this.g)};function aC(e){var t,n,r,i,o,s,u;return b(function(a){return e.o||(e.o=e.g.adaptationSetCriteriaFactory(),e.o.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,Sc:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Kc:e.g.preferredAudioLabel,fd:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:""})),e.Ma&&(t=e.g.abrFactory,e.C=t,e.j=t(),e.j.configure(e.g.abr)),!e.fa||(n=e.h.presentationTimeline.U(),r=uc(e.h.variants),i=e.o.create(r),e.j.configure(e.g.abr),e.j.setVariants(Array.from(i.values())),o=e.j.chooseVariant(),!o)?a.s(0):(s=[],e.K=o,o.video&&s.push(wp(e,o.video,n)),o.audio&&s.push(wp(e,o.audio,n)),(u=Xs(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&yv(o.audio,u,e.g)&&(s.push(wp(e,u,n)),e.W=u),I(a,Promise.all(s),0))})}function wp(e,t,n){var r,i,o,s,u;return b(function(a){return a.g==1?(r=e.g.streaming.segmentPrefetchLimit||2,i=new _c(r,t,function(c,f,h){return bc(c,f,h||null,e.g.streaming.retryParameters,e.Fa,e.A)},!1),e.M.set(t.id,i),t.segmentIndex?a.s(2):I(a,t.createSegmentIndex(),2)):(o=e.B||0,s=t.segmentIndex.Gb(o),u=null,s&&(u=s.current(),u||(u=s.next().value)),u||(u=ri(t.segmentIndex)),u?n?u.Y?I(a,O0(i,u.Y),0):a.s(0):I(a,Ea(i,u.startTime),0):a.s(0))})}p.Nj=function(){return this.m},p.destroy=function(){var e=this,t,n,r;return b(function(i){switch(i.g){case 1:if(e.u=!0,!e.l||e.oa){i.s(2);break}return I(i,e.l.stop(),2);case 2:if(!e.j||e.ea){i.s(4);break}return I(i,e.j.stop(),4);case 4:if(e.H&&!e.sa&&e.H.release(),!e.i||e.ka){i.s(6);break}return I(i,e.i.destroy(),6);case 6:if(0<e.M.size&&!e.Aa)for(t=v(e.M.values()),n=t.next();!n.done;n=t.next())r=n.value,ii(r);ae(i)}})};function lC(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}D("shaka.media.PreloadManager",Cr),Cr.prototype.destroy=Cr.prototype.destroy,Cr.prototype.waitForFinish=Cr.prototype.Nj,Cr.prototype.getPrefetchedTextTrack=Cr.prototype.Bi,Cr.prototype.getPrefetchedVariantTrack=Cr.prototype.Ci;function cs(e,t){gt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Jc:null,Ic:du,xc:function(r,i){return Ki(n,"enter",r,i)}},{Jc:Ra,Ic:du,xc:function(r,i){return Ki(n,"enter",r,i)}},{Jc:Pa,Ic:du,xc:function(r,i){return Ki(n,"enter",r,i)}},{Jc:du,Ic:Ra,xc:function(r,i){return Ki(n,"exit",r,i)}},{Jc:du,Ic:Pa,xc:function(r,i){return Ki(n,"exit",r,i)}},{Jc:Ra,Ic:Pa,xc:function(r,i){i?Ki(n,"skip",r,i):(Ki(n,"enter",r,i),Ki(n,"exit",r,i))}},{Jc:Pa,Ic:Ra,xc:function(r,i){return Ki(n,"skip",r,i)}}],this.h=new _e,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}St(cs,gt),cs.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,gt.prototype.release.call(this)},cs.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=v(this.i.h.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),o=e<r.startTime?Ra:e>r.endTime?Pa:du;this.g.set(r,o);for(var s=v(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.Jc==i&&u.Ic==o&&u.xc(r,t)}}};function Ki(e,t,n,r){t=new ce(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var Ra=1,du=2,Pa=3;function fs(e,t,n){var r,i,o,s,u,a,c;return b(function(f){switch(f.g){case 1:var h=new Vt(e).ab.split("/").pop().split(".");return r=h.length==1?"":h.pop().toLowerCase(),(i=cC.get(r))?f.return(i):(o=0,s=nn([e],n),ye(f,2),s.method="HEAD",I(f,t.request(o,s).promise,4));case 4:u=f.h,i=u.headers["content-type"],Oe(f,3);break;case 2:if(a=ve(f),!a||a.code!=1002&&a.code!=1001){f.s(3);break}return s.method="GET",I(f,t.request(o,s).promise,6);case 6:c=f.h,i=c.headers["content-type"];case 3:return f.return(i?i.toLowerCase().split(";").shift():"")}})}var cC=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function q0(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(s){return q0(s,e)}).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=Vs,i=e.fontStyle==Hs,o=e.textDecoration.includes(_i);return r&&n.push(["b"]),i&&n.push(["i"]),o&&n.push(["u"]),i=e.color,i==""&&t&&(i=t.color),r="",(i=Y0(i))&&(r+="."+i),i=e.backgroundColor,i==""&&t&&(i=t.backgroundColor),(t=Y0(i))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(s,u){var a=v(u);return u=a.next().value,a=a.next().value,"<"+u+(a===void 0?"":a)+">"+s+"</"+u+">"},e.payload)}function Y0(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function xp(e,t){var n=[];e=v($0(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,J(xp(r.nestedCues,r)));else{var i=r.clone();i.nestedCues=[],i.payload=q0(r,t),n.push(i)}return n}function $0(e){var t=[];e=v(e);for(var n=e.next(),r={};!n.done;r={lf:void 0},n=e.next())r.lf=n.value,t.some(function(i){return function(o){return tc(i.lf,o)}}(r))||t.push(r.lf);return t}function fC(e){function t(r){for(var i=5381,o=r.length;o;)i=33*i^r.charCodeAt(--o);return(i>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Sn(e,t){for(this.h=e,this.i=t,this.g=null,e=v(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}p=Sn.prototype,p.configure=function(){},p.remove=function(e,t){return this.g?(J0(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},p.append=function(e){if(this.g){var t=xp(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=v(t);for(var r=t.next(),i={};!r.done;i={Tc:void 0},r=t.next())i.Tc=r.value,!e.some(function(o){return function(s){return s.startTime==o.Tc.startTime&&s.endTime==o.Tc.endTime&&s.text==o.Tc.payload}}(i))&&i.Tc.payload&&(r=fC(i.Tc))&&n.push(r);for(e=n.slice().sort(function(o,s){return o.startTime!=s.startTime?o.startTime-s.startTime:o.endTime!=s.endTime?o.endTime-s.startTime:"line"in VTTCue.prototype?n.indexOf(s)-n.indexOf(o):n.indexOf(o)-n.indexOf(s)}),e=v(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)}},p.destroy=function(){return this.g&&(J0(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},p.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},p.setTextVisibility=function(e){e&&!this.g&&Q0(this),this.g&&(this.g.mode=e?"showing":"hidden")},p.setTextLanguage=function(){},p.enableTextDisplayer=function(){Q0(this)};function Q0(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function J0(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=v(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}D("shaka.text.SimpleTextDisplayer",Sn),Sn.prototype.enableTextDisplayer=Sn.prototype.enableTextDisplayer,Sn.prototype.setTextLanguage=Sn.prototype.setTextLanguage,Sn.prototype.setTextVisibility=Sn.prototype.setTextVisibility,Sn.prototype.isTextVisible=Sn.prototype.isTextVisible,Sn.prototype.destroy=Sn.prototype.destroy,Sn.prototype.append=Sn.prototype.append,Sn.prototype.remove=Sn.prototype.remove,Sn.prototype.configure=Sn.prototype.configure;function Tn(){}p=Tn.prototype,p.configure=function(){},p.remove=function(){},p.append=function(){},p.destroy=function(){},p.isTextVisible=function(){return!1},p.setTextVisibility=function(){},p.setTextLanguage=function(){},p.enableTextDisplayer=function(){},D("shaka.text.StubTextDisplayer",Tn),Tn.prototype.enableTextDisplayer=Tn.prototype.enableTextDisplayer,Tn.prototype.setTextLanguage=Tn.prototype.setTextLanguage,Tn.prototype.setTextVisibility=Tn.prototype.setTextVisibility,Tn.prototype.isTextVisible=Tn.prototype.isTextVisible,Tn.prototype.destroy=Tn.prototype.destroy,Tn.prototype.append=Tn.prototype.append,Tn.prototype.remove=Tn.prototype.remove,Tn.prototype.configure=Tn.prototype.configure;function wn(e,t){var n=this;document.fullscreenEnabled||re("Using UITextDisplayer in a browser without Fullscreen API support causes subtitles to not be rendered in fullscreen"),this.A=!1,this.h=[],this.j=e,this.C=t,this.u=this.m=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.C.appendChild(this.g),this.o=new ze(function(){n.j.paused||wo(n)}),La(this),this.l=new Map,this.i=new _e,this.i.D(document,"fullscreenchange",function(){wo(n,!0)}),this.i.D(this.j,"seeking",function(){wo(n,!0)}),this.i.D(this.j,"ratechange",function(){La(n)}),this.i.D(this.j,"resize",function(){var r=n.j,i=r.videoWidth;r=r.videoHeight,i&&r?n.m=i/r:n.m=null}),this.B=null,"ResizeObserver"in S&&(this.B=new ResizeObserver(function(){wo(n,!0)}),this.B.observe(this.g)),this.F=new Map}p=wn.prototype,p.configure=function(e){this.u=e,La(this),wo(this,!0)},p.append=function(e){var t=[].concat(J(this.h));e=v($0(e));for(var n=e.next(),r={};!n.done;r={mf:void 0},n=e.next())r.mf=n.value,t.some(function(i){return function(o){return tc(o,i.mf)}}(r))||this.h.push(r.mf);this.h.length&&La(this),wo(this)},p.destroy=function(){return this.g&&(this.C.removeChild(this.g),this.g=null,this.A=!1,this.h=[],this.o&&(this.o.stop(),this.o=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.B&&(this.B.disconnect(),this.B=null)),Promise.resolve()},p.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),wo(this,n>this.h.length),this.h.length||La(this),!0},p.isTextVisible=function(){return this.A},p.setTextVisibility=function(e){this.A=e,wo(this,!0)},p.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},p.enableTextDisplayer=function(){};function La(e){e.o&&(e.h.length?e.o.ua((e.u?e.u.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.o.stop())}function dC(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function Z0(e,t,n,r,i){var o=!1,s=[],u=[];t=v(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,i.push(a);var c=e.l.get(a),f=a.startTime<=r&&a.endTime>r,h=c?c.Oh:null;c&&(s.push(c.nf),c.Ec&&s.push(c.Ec),f||(o=!0,e.l.delete(a),c=null)),f&&(u.push(a),c?dC(e,h)||(o=!0):(hC(e,a,i),c=e.l.get(a),h=c.Oh,o=!0)),0<a.nestedCues.length&&h&&Z0(e,a.nestedCues,h,r,i),i.pop()}if(o){for(r=v(s),i=r.next();!i.done;i=r.next())i=i.value,i.parentElement&&i.parentElement.removeChild(i);for(u.sort(function(g,y){return g.startTime!=y.startTime?g.startTime-y.startTime:g.endTime-y.endTime}),u=v(u),r=u.next();!r.done;r=u.next())r=e.l.get(r.value),r.Ec?(r.Ec.contains(n)&&r.Ec.removeChild(n),n.appendChild(r.Ec),r.Ec.appendChild(r.nf)):n.appendChild(r.nf)}}function wo(e,t){if(e.g){var n=e.j.currentTime;if(!e.A||t!==void 0&&t){t=v(e.F.values());for(var r=t.next();!r.done;r=t.next())So(r.value);So(e.g),e.l.clear(),e.F.clear()}e.A&&Z0(e,e.h,e.g,n,[])}}function hC(e,t,n){var r=1<n.length,i=r?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),r=!r&&0<t.nestedCues.length;var o=document.createElement(i);if(i!="br"&&gC(e,o,t,n,r),n=null,t.region&&t.region.id){var s=t.region,u=e.m===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==Jn?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==Jn?"%":"px"),e.F.has(n))n=e.F.get(n);else{i=document.createElement("span");var a=s.heightUnits==Jn?"%":"px",c=s.widthUnits==Jn?"%":"px",f=s.viewportAnchorUnits==Jn?"%":"px";i.id="shaka-text-region---"+n,i.classList.add("shaka-text-region"),i.style.position="absolute";var h=s.height,g=s.width;s.heightUnits===2&&(h=5.33*s.height,a="%"),s.widthUnits===2&&(g=s.width*u,c="%"),i.style.height=h+a,i.style.width=g+c,s.viewportAnchorUnits===2?(u=s.viewportAnchorY/75*100,a=s.viewportAnchorX/(e.m===4/3?160:210)*100,u-=s.regionAnchorY*h/100,a-=s.regionAnchorX*g/100,i.style.top=u+"%",i.style.left=a+"%"):(i.style.top=s.viewportAnchorY-s.regionAnchorY*h/100+f,i.style.left=s.viewportAnchorX-s.regionAnchorX*g/100+f),s.heightUnits!==0&&s.widthUnits!==0&&s.viewportAnchorUnits!==0&&(s=Math.max(0,Math.min(100-(parseInt(i.style.width.slice(0,-1),10)||0),parseInt(i.style.left.slice(0,-1),10)||0)),i.style.top=Math.max(0,Math.min(100-(parseInt(i.style.height.slice(0,-1),10)||0),parseInt(i.style.top.slice(0,-1),10)||0))+"%",i.style.left=s+"%"),i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.F.set(n,i),n=i}}i=o,r&&(i=document.createElement("span"),i.classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",o.appendChild(i)),e.l.set(t,{nf:o,Oh:i,Ec:n})}function pC(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==rc?n:e==="left"||e==="start"&&t===na||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===na?"line-right":"center"}function gC(e,t,n,r,i){var o=t.style,s=n.nestedCues.length==0,u=1<r.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(f){return"".repeat(f.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=Ep(n.linePadding,n,e.C),o.paddingRight=Ep(n.linePadding,n,e.C),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",n.backgroundColor&&(o.backgroundColor=n.backgroundColor),o.width="100%",o.height="100%";else{if(n.nestedCues.length)var c=t;else c=document.createElement("span"),t.appendChild(c);n.border&&(c.style.border=n.border),i||((t=mC(r,function(f){return f.backgroundColor}))?c.style.backgroundColor=t:a&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(c.textContent=a)}u&&!r[r.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(o.width="100%",o.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(o.width="100%",o.alignItems="end"),o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=Ep(n.fontSize,n,e.C,e.u?e.u.fontScaleFactor:1),r=n.line,r!=null&&(s=n.lineInterpretation,s==ra&&(s=1,u=16,e.m&&1>e.m&&(u=32),r=0>r?100+r/u*100:r/u*100),s==1&&(o.position="absolute",n.writingMode==Yo?(o.width="100%",n.lineAlign==$o?o.top=r+"%":n.lineAlign=="end"&&(o.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==$o?o.left=r+"%":n.lineAlign=="end"&&(o.right=100-r+"%")):(o.height="100%",n.lineAlign==$o?o.right=r+"%":n.lineAlign=="end"&&(o.left=100-r+"%")))),o.lineHeight=n.lineHeight,e=pC(n),e=="line-left"?(o.cssFloat="left",n.position!==null&&(o.position="absolute",n.writingMode==Yo?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%")):e=="line-right"?(o.cssFloat="right",n.position!==null&&(o.position="absolute",n.writingMode==Yo?(o.right=100-n.position+"%",o.width="auto"):o.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(o.position="absolute",n.writingMode==Yo?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Yo?o.width=n.size+"%":o.height=n.size+"%")}function Ep(e,t,n,r){r=r===void 0?1:r;var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;switch(e=i.unit,r*=i.value,e){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return r+e}}function mC(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}D("shaka.text.UITextDisplayer",wn),wn.prototype.enableTextDisplayer=wn.prototype.enableTextDisplayer,wn.prototype.setTextLanguage=wn.prototype.setTextLanguage,wn.prototype.setTextVisibility=wn.prototype.setTextVisibility,wn.prototype.isTextVisible=wn.prototype.isTextVisible,wn.prototype.remove=wn.prototype.remove,wn.prototype.destroy=wn.prototype.destroy,wn.prototype.append=wn.prototype.append,wn.prototype.configure=wn.prototype.configure;function yC(e,t){function n(o){for(var s=o,u=v(t),a=u.next();!a.done;a=u.next())a=a.value,a.end&&a.start<o&&(s+=a.end-a.start);return o=Math.floor(s/3600),u=Math.floor(s/60%60),a=Math.floor(s%60),s=Math.floor(1e3*s%1e3),(10>o?"0":"")+o+":"+(10>u?"0":"")+u+":"+(10>a?"0":"")+a+"."+(100>s?10>s?"00":"0":"")+s}var r=xp(e);e=`WEBVTT

`,r=v(r);for(var i=r.next();!i.done;i=r.next())i=i.value,e+=n(i.startTime)+" --> "+n(i.endTime)+function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case gi:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""}(i)+`
`,e+=i.payload+`

`;return e}D("shaka.text.WebVttGenerator",function(){});function Ap(e,t){this.h=e,this.g=t,this.i=void 0,this.u=!1,this.F=!0,this.l=this.B=!1,this.o=this.m=void 0,this.A=0,this.G=!1,this.C=new _e,this.j=null}Ap.prototype.setMediaElement=function(e){this.j=e,xC(this)},Ap.prototype.configure=function(e){this.g=e};function vC(e){e.u=!1,e.F=!0,e.B=!1,e.l=!1,e.m=0,e.o=0,e.A=0,e.G=!1,e.j=null,e.C.Ra()}function SC(e,t){e.l=t,e.l?e.i==Qc?e.i=Jc:e.i==Zc&&(e.i=ef):e.i==Jc?e.i=Qc:e.i==ef&&(e.i=Zc)}function TC(e,t){if(e.g&&e.g.enabled&&e.g.version==n1&&e.j&&e.j.autoplay){var n=e.j.play();n&&n.then(function(){e.A=t}).catch(function(){e.A=0})}}function wC(e,t,n){try{if(!e.g.enabled)return t;var r=Ip(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=zc;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=Yc;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=t1;break e}i=void 0}r.ot=i,r.su=!0;var o=Xc(r);return Mp(t,o)}catch(s){return fe("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function xC(e){e.C.qa(e.j,"play",function(){e.m||(e.m=Date.now())}),e.C.qa(e.j,"playing",function(){e.o||(e.o=Date.now())})}function Ip(e){return e.g.sessionId||(e.g.sessionId=S.crypto.randomUUID()),{v:e.g.version,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function hu(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,Ip(e)),n.pr=e.h.gb();var i=n.ot===qc||n.ot===Yc;if(e.B&&i&&(n.bs=!0,n.su=!0,e.B=!1),n.su==null&&(n.su=e.F),n.v===n1&&(e.h.U()&&(n.ltc=e.h.ce()),i=!e.G&&e.o&&e.m?e.o-(e.A||e.m):void 0,i!=null&&(n.msd=i,e.G=!0)),e=EC(e,n),r)r=CC(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var o=Xc(e);o&&(t.uris=t.uris.map(function(s){return Mp(s,o)}))}}}function EC(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,i){return n.includes(i)&&(r[i]=t[i]),r},{}):t}function AC(e){if(e.type===0)return kC;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Yc:qc;if(t=="audio")return zc;if(t=="text")return e.mimeType==="application/mp4"?$c:Cp}}function IC(e,t){if(t=e.h.Fb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function e1(e,t){if(t=e.h.Fb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function MC(e,t){var n=e.h.Rb();if(!n.length)return NaN;e=n[0],n=v(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case qc:return e.videoBandwidth||NaN;case zc:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Xc(e){function t(h){return 100*n(h/100)}function n(h){return Math.round(h)}function r(h){return!Number.isNaN(h)&&h!=null&&h!==""&&h!==!1}var i=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(h){return encodeURIComponent(h)},rtp:t,tb:n},s=Object.keys(e||{}).sort();s=v(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(r(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var c=o[u];c&&(a=c(a)),c=typeof a;var f=void 0;f=c==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):c==="boolean"?u:c==="symbol"?u+"="+a.description:u+"="+a,i.push(f)}}return i.join(",")}function CC(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3};t=v(t);for(var s=t.next();!s.done;s=t.next())s=s.value,i[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<i.length;e++)(o=Xc(i[e]))&&(n["CMCD-"+r[e]]=o);return n}function Mp(e,t){return!t||e.includes("offline:")?e:(e=new Vt(e),e.g.set("CMCD",t),e.toString())}var t1="m",zc="a",qc="v",Yc="av",kC="i",Cp="c",$c="tt",n1=2,Qc="d",Jc="ld",Zc="h",ef="lh";D("shaka.util.CmcdManager.StreamingFormat",{DASH:Qc,jk:Jc,HLS:Zc,kk:ef,yk:"s",OTHER:"o"});function kr(e){this.h=e,this.g=null}p=kr.prototype,p.configure=function(e){this.h=e},p.Vg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(o1)?1e3*this.g.get(o1):null},p.Tg=function(){return this.h.enabled&&this.g&&this.g.has(i1)?1e3*this.g.get(i1):null},p.Ei=function(){return this.h.enabled&&this.g&&this.g.has(s1)?this.g.get(s1):null},p.Fi=function(){return this.h.enabled&&this.g&&this.g.has(u1)?this.g.get(u1):null},p.getBandwidthEstimate=function(e){var t=this.Tg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function r1(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}D("shaka.util.CmsdManager",kr),kr.prototype.getBandwidthEstimate=kr.prototype.getBandwidthEstimate,kr.prototype.getRoundTripTime=kr.prototype.Fi,kr.prototype.getResponseDelay=kr.prototype.Ei,kr.prototype.getEstimatedThroughput=kr.prototype.Tg,kr.prototype.getMaxBitrate=kr.prototype.Vg;var i1="etp",o1="mb",s1="rd",u1="rtt";function a1(){this.g=null,this.h=[]}function kp(e,t){return b(function(n){if(n.g==1)return e.g?I(n,new Promise(function(r){return e.h.push(r)}),2):n.s(2);e.g=t,ae(n)})}a1.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function ee(e,t,n){t=t===void 0?null:t,gt.call(this);var r=this;this.m=uf,this.h=null,this.He=t,this.na=!1,this.We=new _e,this.zd=new _e,this.l=new _e,this.Oa=new _e,this.Sb=new _e,this.G=this.I=this.C=this.F=null,this.Pd=0,this.$=new a1,this.Z=this.Pb=this.T=this.i=this.Qb=this.H=this.j=this.xd=this.O=this.Ag=this.fa=this.L=this.Ga=this.Aa=this.yd=this.M=this.oa=this.K=this.Ma=null,this.sa=!1,this.Fa=this.o=null,this.Ae=1e9,this.Ve=[],this.Jd=[],this.Ye=-1,this.g=Wi(this),this.Ze=W0(),this.P=null,this.Qd=-1,this.Na=null,this.ka={width:1/0,height:1/0},this.xe=new Nh(this.g,this.ka,null),this.Re=[],this.A=null,this.W=this.g.adaptationSetCriteriaFactory(),this.W.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:this.g.preferredAudioChannelCount,Sc:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Kc:this.g.preferredAudioLabel,fd:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),this.Tb=this.g.preferredTextLanguage,this.Hd=this.g.preferredTextRole,this.Fd=this.g.preferForcedSubs,this.Cd=[],n&&n(this),this.L=GC(this),this.fa=new kr(this.g.cmsd),this.F=y1(this),this.F.mg(this.g.streaming.forceHTTP),this.F.ng(this.g.streaming.forceHTTPS),this.F.o=this.g.streaming.minBytesForProgressEvents,this.Ub=this.ea=this.B=null,this.af=!1,this.$e=new ze(function(){return b(function(i){if(i.g==1)return r.ea?I(i,r.Lb(r.Ub,!0),3):i.s(0);if(i.g!=4)return I(i,r.load(r.ea),4);r.af?r.Ub.pause():r.Ub.play(),r.ea=null,r.af=!1,ae(i)})}),af&&(this.B=af(),this.B.configure(this.g.ads),this.Sb.D(this.B,"ad-content-pause-requested",function(i){var o;return b(function(s){if(s.g==1)return r.$e.stop(),r.ea?s.s(0):(r.Ub=r.h,r.af=r.Uc(),o=i.saveLivePosition||!1,I(s,r.Ng(!0,o),3));r.ea=s.h,ae(s)})}),this.Sb.D(this.B,"ad-content-resume-requested",function(i){if(i=i.offset||0,r.ea){var o=r.ea;o.B&&i&&(o.B+=i)}r.$e.da(.1)}),this.Sb.D(this.B,"ad-content-attach-requested",function(){return b(function(i){return r.h||!r.Ub?i.s(0):I(i,r.Lb(r.Ub,!0),0)})})),this.We.D(S,"online",function(){Np(r),r.gg()}),this.Je=new ze(function(){for(var i=Date.now()/1e3,o=!1,s=!0,u=v(r.i.variants),a=u.next();!a.done;a=u.next())a=a.value,0<a.disabledUntilTime&&a.disabledUntilTime<=i&&(a.disabledUntilTime=0,o=!0),0<a.disabledUntilTime&&(s=!1);s&&r.Je.stop(),o&&gu(r,!1,void 0,!1,!1)}),this.za=null,e&&(tt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Lb(e,!0)),this.u=null}St(ee,gt);function tf(e){e.O!=null&&(Oy(e.O),e.O.release(),e.O=null)}function DC(e,t,n){n||t.lcevc.enabled?(tf(e),e.O==null&&(e.O=new qu(e.h,e.Ag,t.lcevc,n),e.I&&(e.I.K=e.O))):tf(e)}function xt(e,t){return new ce(e,t)}p=ee.prototype,p.destroy=function(){var e=this,t;return b(function(n){switch(n.g){case 1:return e.m==zr?n.return():(tf(e),t=e.detach(),e.m=zr,I(n,t,2));case 2:return I(n,e.rf(),3);case 3:if(e.We&&(e.We.release(),e.We=null),e.zd&&(e.zd.release(),e.zd=null),e.l&&(e.l.release(),e.l=null),e.Oa&&(e.Oa.release(),e.Oa=null),e.Sb&&(e.Sb.release(),e.Sb=null),e.Fa=null,e.g=null,e.A=null,e.He=null,e.L=null,e.fa=null,!e.F){n.s(4);break}return I(n,e.F.destroy(),5);case 5:e.F=null;case 4:e.o&&(e.o.release(),e.o=null),gt.prototype.release.call(e),ae(n)}})};function l1(e,t){F1.set(e,t)}function pu(e,t){e.dispatchEvent(xt("onstatechange",new Map().set("state",t)))}p.Lb=function(e,t){t=t===void 0?!0:t;var n=this,r,i,o;return b(function(s){switch(s.g){case 1:if(n.m==zr)throw new j(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){s.s(2);break}return I(s,n.detach(),2);case 2:return I(s,Dp(n,"attach"),4);case 4:if(s.h)return s.return();if(ye(s,5,6),r||(pu(n,"attach"),i=function(){var u=jp(n,!1);u&&mu(n,u)},n.zd.D(e,"error",i),n.h=e,n.L&&n.L.setMediaElement(e)),!t||!ci()||n.I){s.s(6);break}return I(s,Rp(n),6);case 6:Ct(s),n.$.release(),ut(s,0);break;case 5:return o=ve(s),I(s,n.detach(),10);case 10:throw o}})},p.Wh=function(e){this.Ag=e},p.detach=function(e){e=e===void 0?!1:e;var t=this;return b(function(n){if(n.g==1){if(t.m==zr)throw new j(2,7,7e3);return I(n,t.kc(!1,e),2)}if(n.g!=3)return I(n,Dp(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.zd.Ra(),t.h=null),pu(t,"detach"),t.B&&!e&&t.B.release()}finally{t.$.release()}ae(n)})};function Dp(e,t){var n;return b(function(r){return r.g==1?(n=++e.Pd,I(r,kp(e.$,t),2)):n!=e.Pd?(e.$.release(),r.return(!0)):r.return(!1)})}p.kc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,i,o,s,u,a,c,f,h,g;return b(function(y){switch(y.g){case 1:return n.m!=zr&&(n.m=uf),I(y,Dp(n,"unload"),2);case 2:return y.h?y.return():(hn(y,3),n.sa=!1,pu(n,"unload"),tf(n),r=n.Cd.map(function(T){return T()}),n.Cd=[],I(y,Promise.all(r),5));case 5:if(n.dispatchEvent(xt("unloading")),n.yd&&(n.yd.release(),n.yd=null),n.Aa&&(n.Aa.release(),n.Aa=null),n.Ga&&(n.Ga.release(),n.Ga=null),n.h&&(n.l.Ra(),n.Oa.Ra()),n.Je.stop(),n.Ma&&(n.Ma.release(),n.Ma=null),n.oa&&(n.oa.stop(),n.oa=null),!n.H){y.s(6);break}return I(y,n.H.stop(),7);case 7:n.H=null,n.Qb=null;case 6:if(!n.o){y.s(8);break}return I(y,n.o.stop(),8);case 8:if(!n.j){y.s(10);break}return I(y,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),S.shakaMediaKeysPolyfill!=="webkit"||!n.C){y.s(12);break}return I(y,n.C.destroy(),13);case 13:n.C=null;case 12:if(!n.I){y.s(14);break}return I(y,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.B&&!t&&n.B.onAssetUnload(),n.ea&&!t&&(n.ea.destroy(),n.ea=null),t||n.$e.stop(),n.L&&vC(n.L),n.fa&&(n.fa.g=null),!n.u){y.s(16);break}return I(y,n.u.destroy(),17);case 17:n.u=null;case 16:if(n.h&&(So(n.h),n.h.src&&(n.h.removeAttribute("src"),n.h.load())),!n.C){y.s(18);break}return I(y,n.C.destroy(),19);case 19:n.C=null;case 18:if(n.za&&n.T!=n.za.Qc()&&(n.za.u||n.za.destroy(),n.za=null),n.T=null,n.Pb=null,n.M=null,n.i){for(i=v(n.i.variants),o=i.next();!o.done;o=i.next())for(s=o.value,u=v([s.audio,s.video]),a=u.next();!a.done;a=u.next())(c=a.value)&&c.segmentIndex&&c.segmentIndex.release();for(f=v(n.i.textStreams),h=f.next();!h.done;h=f.next())g=h.value,g.segmentIndex&&g.segmentIndex.release()}n.g&&n.g.streaming.clearDecodingCache&&(ac.clear(),Rs.clear()),n.i=null,n.A=new Wc,n.Xe=null,n.Na=null,n.P=null,n.Qd=-1,n.Ve=[],n.Jd=[],n.Ye=-1,n.F&&n.F.Jg(),rf(n);case 3:Ct(y),n.$.release(),ut(y,4);break;case 4:if(e&&ci()&&!n.I&&n.h)return I(y,Rp(n),0);y.s(0)}})},p.Mj=function(e){this.Z=e},p.load=function(e,t,n){t=t===void 0?null:t;var r=this,i,o,s,u,a,c,f,h,g,y,T,E,x;return b(function(A){switch(A.g){case 1:if(r.m==zr)throw new j(2,7,7e3);if(i=null,o="",e instanceof Cr){if(e.u)throw new j(2,7,7006);i=e,o=i.Qc()||""}else o=e||"";return I(A,kp(r.$,"load"),2);case 2:if(r.$.release(),!r.h)throw new j(2,7,7002);if(!r.T){A.s(3);break}return r.T=o,I(A,r.kc(!1),3);case 3:if(s=++r.Pd,u=function(){return b(function(M){if(M.g==1)return r.Pd==s?M.s(0):i?I(M,i.destroy(),3):M.s(3);throw new j(2,7,7e3)})},a=function(M,L){return b(function(_){switch(_.g){case 1:return hn(_,2),I(_,kp(r.$,L),4);case 4:return I(_,u(),5);case 5:return I(_,M(),6);case 6:return I(_,u(),7);case 7:i&&r.g&&(i.g=r.g);case 2:Ct(_),r.$.release(),ut(_,0)}})},ye(A,5,6),t==null&&i&&(t=i.getStartTime()),r.Z=t,r.sa=!1,r.dispatchEvent(xt("loading")),i){n=i.Z,A.s(8);break}if(n){A.s(8);break}return I(A,a(function(){return b(function(M){if(M.g==1)return I(M,h1(r,o),2);n=M.h,ae(M)})},"guessMimeType_"),8);case 8:if(c=!!i,i){X0(i,r),r.A=i.getStats(),A.s(11);break}return I(A,f1(r,o,t,n,!0),12);case 12:(i=A.h)?(i.A=!1,X0(i,r),r.A=i.getStats(),i.start(),i.m.catch(function(){})):r.A=new Wc;case 11:return f=!i,h=Date.now()/1e3,r.A=i?i.getStats():new Wc,r.T=o,r.Pb=n||null,rf(r),r.Aa=new xa(function(){return r.Ja()}),f?I(A,a(function(){return b(function(M){return I(M,_C(r,n),0)})},"initializeSrcEqualsDrmInner_"),23):(r.Ga=new xa(function(){return r.Ja()}),I(A,a(function(){return b(function(M){if(M.g==1)return I(M,Promise.race([i.na,i.m]),2);r.Qb=i.G;var L=i;L.oa=!0,r.H=L.l,r.i=i.Jf(),ae(M)})},"waitForFinish"),15));case 15:if(r.I){A.s(16);break}return I(A,a(function(){return b(function(M){return I(M,Rp(r),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return r.i&&r.i.textStreams.length&&(r.u.enableTextDisplayer?r.u.enableTextDisplayer():tt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),I(A,a(function(){return b(function(M){return I(M,i.m,0)})},"waitForFinish"),18);case 18:if(r.g=i.getConfiguration(),r.xe=i.F,r.H&&r.H.setMediaElement&&r.h&&r.H.setMediaElement(r.h),r.yd=iC(i),r.xd=i.Ga,(g=i.o)&&(r.W=g),c&&r.h&&r.h.nodeName==="AUDIO"&&(RC(r),r.configure("manifest.disableVideo",!0)),i.i){A.s(19);break}return I(A,a(function(){return b(function(M){return I(M,z0(i,r.h),0)})},"drmEngine_.init"),19);case 19:return r.C=oC(i),I(A,a(function(){return b(function(M){return I(M,r.C.Lb(r.h),0)})},"drmEngine_.attach"),21);case 21:return!(y=i.C)||r.Fa&&r.Fa==y||(r.o=rC(i),r.Fa=i.C,typeof r.o.setMediaElement!="function"&&(tt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(tt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(tt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),T=sC(i),E=i.K,I(A,a(function(){return b(function(M){return I(M,LC(r,h,E,T),0)})},"loadInner_"),22);case 22:nC(i),r.Pb&&pn()&&vh(r.Pb)&&$2(r.I,r.T,r.Pb),A.s(14);break;case 23:return I(A,a(function(){return b(function(M){return I(M,NC(r,h,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(xt("loaded"));case 6:if(Ct(A),!i){A.s(25);break}return I(A,i.destroy(),25);case 25:r.za=null,ut(A,0);break;case 5:if(x=ve(A),!x||x.code==7e3){A.s(27);break}return I(A,r.kc(!1),27);case 27:throw x}})};function RC(e){for(var t=v(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}p.Ij=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return b(function(i){return i.g==1?I(i,c1(n),2):i.g!=3?(r=i.h,I(i,n.kc(e,t),3)):i.return(r)})},p.Ng=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return b(function(i){return i.g==1?I(i,c1(n,t),2):i.g!=3?(r=i.h,I(i,n.detach(e),3)):i.return(r)})};function c1(e,t){t=t===void 0?!1:t;var n,r;return b(function(i){if(i.g==1)return n=null,e.i&&e.H&&e.Qb&&e.T?(r=e.h.currentTime,e.U()&&!t&&(r=null),I(i,d1(e,e.T,r,e.Pb,!0,!1,!1),3)):i.s(2);if(i.g!=2){n=i.h,e.Re.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var o=n,s=e.H,u=e.Qb;o.h=e.i,o.l=s,o.G=u,o=n,s=e.Fa,o.j=e.o,o.C=s,n.o=e.W,n.start(),e.i=null,e.H=null,e.Qb=null,e.o=null,e.Fa=null}return i.return(n)})}p.preload=function(e,t,n){t=t===void 0?null:t;var r=this,i;return b(function(o){return o.g==1?I(o,f1(r,e,t,n),2):((i=o.h)?i.start():mu(r,new j(2,7,7005)),o.return(i))})},p.rf=function(){var e=this,t,n,r,i;return b(function(o){for(t=[],n=v(e.Re),r=n.next();!r.done;r=n.next())i=r.value,i.u||t.push(i.destroy());return e.Re=[],I(o,Promise.all(t),0)})};function f1(e,t,n,r,i){i=i===void 0?!1:i;var o,s,u;return b(function(a){return a.g==1?r?a.s(2):I(a,h1(e,t),3):(a.g!=2&&(r=a.h),PC(e,r)?a.return(null):(o=!1,s=!0,i&&(e.o&&e.Fa==e.g.abrFactory&&(s=!1),e.h&&e.h.nodeName==="AUDIO"&&(o=!0)),u=d1(e,t,n,r||null,!i,o,s),u=i?u.then(function(c){return c.A=!1,c}):u.then(function(c){return e.Re.push(c),c}),a.return(u)))})}function d1(e,t,n,r,i,o,s){i=i===void 0?!0:i,o=o===void 0?!1:o,s=s===void 0?!0:s;var u,a,c,f,h,g,y,T,E,x,A,M,L,_;return b(function(F){return F.g==1?(u=null,a=ei(e.g),o&&(a.manifest.disableVideo=!0),c=function(){return u.T&&u.u?null:u},f=function(){return c()?c().getConfiguration():e.g},e.ka.width!=1/0||e.ka.height!=1/0||e.g.ignoreHardwareResolution?F.s(2):I(F,Py(),3)):(F.g!=2&&(h=F.h,e.ka.width=h.width,e.ka.height=h.height),g=new Nh(a,e.ka,null),y={networkingEngine:e.F,filter:function(P){var k,O;return b(function(U){if(U.g==1)return I(U,zv(g,P),2);if(U.g!=4)return k=U.h,k?(O=xt("trackschanged"),I(U,Promise.resolve(),4)):U.s(0);u.dispatchEvent(O),ae(U)})},makeTextStreamsForClosedCaptions:function(P){return zC(e,P)},onTimelineRegionAdded:function(P){tp(u.H,P)},onEvent:function(P){return u.dispatchEvent(P)},onError:function(P){return u.onError(P)},isLowLatencyMode:function(){return f().streaming.lowLatencyMode},updateDuration:function(){e.j&&u.T&&e.j.updateDuration()},newDrmInfo:function(P){var k=u.i,O=k?k.h:null;O&&k.A&&$v(g,O.keySystem,P)},onManifestUpdated:function(){var P=new Map().set("isLive",e.U());u.dispatchEvent(xt("manifestupdated",P)),Da(u,!1,function(){e.B&&e.B.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(P,k,O,U){var W=P;P=="com.apple.hls.interstitial"&&(W="com.apple.quicktime.HLS",P={startTime:k,endTime:O,values:U},e.B)&&e.B.onHLSInterstitialMetadata(e,e.h,P),U=v(U),P=U.next();for(var B={};!P.done;B={ag:void 0},P=U.next())B.ag=P.value,B.ag.name!="ID"&&Da(u,!1,function(K){return function(){Pp(e,k,O,W,K.ag)}}(B))},disableStream:function(P){return e.disableStream(P,e.g.streaming.maxDisabledTime)},addFont:function(P,k){return e.addFont(P,k)}},T=new xa(function(){return e.Ja()}),T.addEventListener("regionadd",function(P){var k=P.region;Oa(e,"timelineregionadded",k,u),Da(u,!1,function(){e.B&&(e.B.onDashTimedMetadata(k),e.B.onDASHInterstitialMetadata(e,e.h,k))})}),E=null,a.streaming.observeQualityChanges&&(E=new Pc(function(){return e.Fb()}),E.addEventListener("qualitychange",function(P){j1(e,P.quality,P.position)}),E.addEventListener("audiotrackchange",function(P){j1(e,P.quality,P.position,!0)})),x=!0,A={Xb:e.F,onError:function(P){return u.onError(P)},te:function(P){Da(u,!0,function(){e:{var k=P,O=xt("keystatuschanged");e.dispatchEvent(O);var U=Object.keys(k);U.length==1&&U[0]==""&&(U=["00"],k={"00":k[""]}),O=U.length==1&&U[0]=="00";var W=!1;if(U.length){U=e.keySystem();for(var B=ns(e.g.drm.clearKeys),K=v(e.i.variants),X=K.next();!X.done;X=K.next()){X=X.value;var q=[];X.audio&&q.push(X.audio),X.video&&q.push(X.video),q=v(q);for(var Q=q.next();!Q.done;Q=q.next()){var Y=Q.value;if(Q=X.allowedByKeySystem,Y.keyIds.size)if(Y.drmInfos.length&&!B.size){Y=v(Y.drmInfos);for(var ne=Y.next();!ne.done;ne=Y.next())if(ne=ne.value,ne.keyIds.size&&ne.keySystem==U){X.allowedByKeySystem=!0,ne=v(ne.keyIds);for(var ue=ne.next();!ue.done;ue=ne.next())ue=ue.value,((ue=k[O?"00":ue])||e.C.F)&&(X.allowedByKeySystem=X.allowedByKeySystem&&!!ue&&!jh.includes(ue))}}else for(X.allowedByKeySystem=!0,Y=v(Y.keyIds),ne=Y.next();!ne.done;ne=Y.next())ne=ne.value,((ne=k[O?"00":ne])||e.C.F)&&(X.allowedByKeySystem=X.allowedByKeySystem&&!!ne&&!jh.includes(ne));Q!=X.allowedByKeySystem&&(W=!0)}}}if(W&&(Kn(e),!ds(e)))break e;(k=e.j.l)&&!k.allowedByKeySystem&&gu(e)}})},onExpirationUpdated:function(P,k){var O=xt("expirationupdated");u.dispatchEvent(O),(O=u.l)&&O.onExpirationUpdated&&O.onExpirationUpdated(P,k)},onEvent:function(P){u.dispatchEvent(P),P.type=="drmsessionupdate"&&x&&(x=!1,P=Date.now()/1e3-u.za,(e.A||u.getStats()).j=P,e.O&&Oy(e.O))}},M=y1(e,c),Av(e.F,M),L=function(){return e.Lc(A)},_={config:a,bj:y,mj:T,lj:E,Lc:L,aj:g,networkingEngine:M,Vh:i,Uh:s},u=new Cr(t,r,n,_),F.return(u))})}function h1(e,t){var n,r;return b(function(i){return i.g==1?(n=e.g.manifest.retryParameters,I(i,fs(t,e.F,n),2)):(r=i.h,r=="application/x-mpegurl"&&pn()&&(r="application/vnd.apple.mpegurl"),i.return(r))})}function PC(e,t){if(!ci())return!0;if(t){if((e.h||Ry()).canPlayType(t)=="")return!1;if(!ci()||!Js.has(t))return!0;if(vh(t))return pn()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function p1(e){var t=e.g.textDisplayFactory;t!==e.Xe&&(e.u=t(),e.u.configure?e.u.configure(e.g.textDisplayer):tt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.Xe=t,e.u.setTextVisibility(e.na))}function Rp(e){var t,n,r;return b(function(i){if(i.g==1)return pu(e,"media-source"),e.h.removeAttribute("src"),So(e.h),p1(e),t=HC(e.h,e.u,{ui:function(){return e.keySystem()},onMetadata:function(o,s,u){o=v(o);for(var a=o.next();!a.done;a=o.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var c=a.cueTime+s,f=u;f&&c>f&&(f=c);for(var h=v(a.frames),g=h.next();!g.done;g=h.next())Pp(e,c,f,"org.id3",g.value);e.B&&e.B.onHlsTimedMetadata(a,c)}},gj:function(o){e.Ga&&tp(e.Ga,{schemeIdUri:o.schemeIdUri,startTime:o.startTime,endTime:o.endTime,id:String(o.id),emsg:o})},onEvent:function(o){return e.dispatchEvent(o)},ij:function(){e.H&&e.H.update&&e.H.update()}},e.O),t.configure(e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.Ea=r,I(i,t.H,2);e.I=t,ae(i)})}function g1(e,t,n){function r(){return _p(e)}e.l.D(t,"playing",r),e.l.D(t,"pause",r),e.l.D(t,"ended",r),e.l.D(t,"ratechange",function(){var i=e.h.playbackRate;i!=0&&(e.K&&(e.K.set(i),e.m==In&&e.o.playbackRateChanged(i),C1(e,i)),i=xt("ratechange"),e.dispatchEvent(i))}),t.remote&&(e.l.D(t.remote,"connect",function(){return Kn(e)}),e.l.D(t.remote,"connecting",function(){return Kn(e)}),e.l.D(t.remote,"disconnect",function(){return b(function(i){if(i.g==1)return e.j&&t.remote.state=="disconnected"?I(i,Uc(e.j),2):i.s(2);Kn(e),ae(i)})})),t.audioTracks&&(e.l.D(t.audioTracks,"addtrack",function(){return Kn(e)}),e.l.D(t.audioTracks,"removetrack",function(){return Kn(e)}),e.l.D(t.audioTracks,"change",function(){return Kn(e)})),t.textTracks&&(e.l.D(t.textTracks,"addtrack",function(i){if(i.track)switch(i=i.track,i.kind){case"metadata":bC(e,i);break;case"chapters":UC(e,i);break;default:Kn(e)}}),e.l.D(t.textTracks,"removetrack",function(){return Kn(e)}),e.l.D(t.textTracks,"change",function(){return Kn(e)}),e.g.streaming.crossBoundaryStrategy!=="keep"&&(e.l.D(t,"waiting",function(){e.j&&pp(e.j)}),e.l.D(t,"timeupdate",function(){e.j&&pp(e.j)}))),t.preload!="none"&&e.l.qa(t,"loadedmetadata",function(){e.A.C=Date.now()/1e3-n})}function LC(e,t,n,r){var i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X;return b(function(q){switch(q.g){case 1:for(pu(e,"load"),i=e.h,e.K=new wa({de:function(){return i.playbackRate},sc:function(){return i.defaultPlaybackRate},og:function(Q){i.playbackRate=Q},hh:function(Q){i.currentTime+=Q}}),g1(e,i,t),o=!1,s=v(e.i.variants),u=s.next();!u.done;u=s.next())a=u.value,(c=a.video&&a.video.dependencyStream)&&(o=by(c));DC(e,e.g,o),e.Tb=e.g.preferredTextLanguage,e.Hd=e.g.preferredTextRole,e.Fd=e.g.preferForcedSubs,Op(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(Q,Y,ne){e.i&&e.j&&Q!=e.j.l&&Na(e,Q,!0,Y===void 0?!1:Y,ne===void 0?0:ne)}),e.o.setMediaElement(i),e.o.setCmsdManager(e.fa),e.j=KC(e),e.j.configure(e.g.streaming),e.m=In,e.dispatchEvent(xt("streaming")),f=n;case 2:for((g=e.j.l)||f||(f=ds(e)?e.o.chooseVariant():null),y=[],h=g||f,T=v([h.video,h.audio]),E=T.next();!E.done;E=T.next())(x=E.value)&&!x.segmentIndex&&(y.push(x.createSegmentIndex()),x.dependencyStream&&y.push(x.dependencyStream.createSegmentIndex()));if(!(0<y.length)){q.s(4);break}return I(q,Promise.all(y),4);case 4:if(!h||h.disabledUntilTime!=0){q.s(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(h),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Ze):re("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.L&&(SC(e.L,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),TC(e.L,1e3*t)),Op(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),MM(e.j,e.g.playRangeStart,e.g.playRangeEnd),A=function(Q){e.G=FC(e,Q),e.Ma=BC(e,Q),v1(e,i,!1)},e.g.streaming.startAtSegmentBoundary||(M=e.Z,M==null&&e.i.startTime&&(M=e.i.startTime),A(M)),g){q.s(7);break}if(!e.g.streaming.startAtSegmentBoundary){q.s(8);break}return L=e.i.presentationTimeline,_=e.Z||e.h.currentTime,e.Z==null&&e.i.startTime&&(_=e.i.startTime),F=L.Hb(),P=L.ob(),_<F?_=F:_>P&&(_=P),I(q,qC(f,_),9);case 9:k=q.h,A(k);case 8:Na(e,f,!0,!1,0);case 7:return e.G.ready(),O=e.vc().find(function(Q){return Q.active}),O||((U=Xs(e.i.textStreams,e.Tb,e.Hd,e.Fd)[0]||null)&&Sp(e.A.h,U,!0),f&&(U?(yv(f.audio,U,e.g)&&(e.na=!0),e.na&&e.u.setTextVisibility(!0),_1(e)):e.na=!1),U&&(e.g.streaming.alwaysStreamText||e.Rf())&&(Nc(e.j,U),ja(e))),I(q,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),N1(e)),Kn(e),ds(e),e.i.variants.some(function(Q){return Q.primary}),((W=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(B=function(){return k1(e)},e.l.D(i,"timeupdate",B)),W||(K=function(){return of(e)},e.l.D(i,"timeupdate",K),of(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(X=function(){var Q;return b(function(Y){if(Y.g==1)return Q=e.Ja().end-e.h.currentTime,isNaN(Q)||!(Q<=e.g.streaming.preloadNextUrlWindow)?Y.s(0):(e.l.Ka(i,"timeupdate",X),I(Y,e.preload(e.i.nextUrl),4));e.za=Y.h,ae(Y)})},e.l.D(i,"timeupdate",X)),e.l.D(i,"ended",function(){e.load(e.za||e.i.nextUrl)}))),e.B&&e.B.onManifestUpdated(W),e.sa=!0,ae(q)}})}function _C(e,t){var n,r,i,o,s;return b(function(u){return u.g==1?(n=$t,r=Date.now()/1e3,i=!0,e.C=e.Lc({Xb:e.F,onError:function(a){mu(e,a)},te:function(){},onExpirationUpdated:function(){var a=xt("expirationupdated");e.dispatchEvent(a)},onEvent:function(a){e.dispatchEvent(a),a.type=="drmsessionupdate"&&i&&(i=!1,e.A.j=Date.now()/1e3-r)}}),e.C.configure(e.g.drm),o={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},s={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Zn(t):"",codecs:t?er(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.la,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},s.fullMimeTypes.add(Kt(s.mimeType,s.codecs)),t.startsWith("audio/")?(s.type=n.V,o.audio=s):o.video=s,e.C.$=!0,I(u,Lv(e.C,[o],[]),2)):I(u,e.C.Lb(e.h),0)})}function NC(e,t,n){var r,i,o,s,u,a,c,f,h,g,y,T;return b(function(E){switch(E.g){case 1:if(pu(e,"src-equals"),r=e.h,e.G=new D0(r),i=!1,e.Cd.push(function(){i=!0}),e.Z!=null&&e.G.cf(e.Z),e.Ma=VC(e,e.Z||0),e.K=new wa({de:function(){return r.playbackRate},sc:function(){return r.defaultPlaybackRate},og:function(x){r.playbackRate=x},hh:function(x){r.currentTime+=x}}),v1(e,r,!0),r.textTracks&&(p1(e),o=function(){var x=_a(e).find(function(A){return A.mode!=="disabled"});x&&(x.mode="showing"),(x=I1(e))&&(x.mode="hidden")},s=function(){var x=_a(e).find(function(M){return M.mode!=="disabled"});x&&(x.mode="hidden"),x=I1(e);var A=e.u.isTextVisible();x&&A&&(x.mode="showing")},e.l.D(r,"enterpictureinpicture",function(){return o()}),e.l.D(r,"leavepictureinpicture",function(){return s()}),r.remote?(e.l.D(r.remote,"connect",function(){return s()}),e.l.D(r.remote,"connecting",function(){return s()}),e.l.D(r.remote,"disconnect",function(){return s()})):"webkitCurrentPlaybackTargetIsWireless"in r&&e.l.D(r,"webkitcurrentplaybacktargetiswirelesschanged",function(){return s()}),u=r,u.webkitSupportsFullscreen&&e.l.D(u,"webkitpresentationmodechanged",function(){u.webkitPresentationMode!="inline"?o():s()})),g1(e,r,t),a=wC(e.L,e.T,n),!a.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(a+="#t=",0<e.g.playRangeStart&&(a+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(a+=","+e.g.playRangeEnd)),!e.I){E.s(2);break}return I(E,e.I.destroy(),3);case 3:e.I=null;case 2:return So(r),r.src=a,(fi()||ki())&&r.load(),r.preload!="none"&&!r.autoplay&&vh(n)&&pn()&&r.load(),e.m=pr,e.dispatchEvent(xt("streaming")),c=new pt,uu(r,HTMLMediaElement.HAVE_METADATA,e.l,function(){e.G.ready(),c.resolve()}),f=function(){return new Promise(function(x){var A=new ze(x);e.l.D(r.textTracks,"change",function(){return A.da(.5)}),A.da(.5)})},uu(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,function(){var x,A,M,L,_;return b(function(F){if(F.g==1)return I(F,f(),2);if(i)return F.return();for(jC(e),x=_a(e),x.some(function(P){return P.mode==="showing"})&&(e.na=!0,e.u.setTextVisibility(!0)),x.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():tt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),A=!1,M=v(x),L=M.next();!L.done;L=M.next())_=L.value,_.mode!=="disabled"&&(A?(_.mode="disabled",re("Found more than one enabled text track, disabling it",_)):(A1(e,_),A=!0));OC(e),ae(F)})}),r.error?c.reject(jp(e)):r.preload=="none"&&(re('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),c.resolve()),e.l.qa(r,"error",function(){c.reject(jp(e))}),I(E,sa(e.g.streaming.loadTimeout,c),4);case 4:((h=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(g=function(){return k1(e)},e.l.D(r,"timeupdate",g)),h||(y=function(){return of(e)},e.l.D(r,"timeupdate",y),of(e)),e.B&&(e.B.onManifestUpdated(h),h&&(T=e.Ja().end,e.l.D(r,"progress",function(){var x=e.Ja().end;T!=x&&(e.B.onManifestUpdated(e.U()),T=x)}))),e.sa=!0,ae(E)}})}function jC(e){var t=e.g.preferredAudioLanguage;t!=""&&e.th(t,e.g.preferredVariantRole)}function OC(e){var t=e.g.preferredTextLanguage;t!=""&&e.jg(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function bC(e,t){if(t.kind=="metadata"){t.mode="hidden",e.l.D(t,"cuechange",function(){if(t.activeCues)for(var r=v(t.activeCues),i=r.next();!i.done;i=r.next())i=i.value,Pp(e,i.startTime,i.endTime,i.type,i.value),e.B&&e.B.onCueMetadataChange(i.value);if(t.cues){r=[],i=v(t.cues);for(var o=i.next(),s={};!o.done;s={bc:void 0},o=i.next())s.bc=o.value,s.bc.type=="com.apple.quicktime.HLS"&&s.bc.startTime!=null&&(o=r.find(function(u){return function(a){return a.startTime==u.bc.startTime&&a.endTime==u.bc.endTime}}(s)),o||(o={startTime:s.bc.startTime,endTime:s.bc.endTime,values:[]},r.push(o)),o.values.push(s.bc.value));for(r=v(r),i=r.next();!i.done;i=r.next())i=i.value,i.values.some(function(u){return u.key=="X-ASSET-URI"||u.key=="X-ASSET-LIST"})&&e.B&&(i.values.push({key:"CUE",description:"",data:i.startTime!=0||e.U()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.B.onHLSInterstitialMetadata(e,e.h,i))}});var n=new ze(function(){var r=WC(e);r=v(r);for(var i=r.next();!i.done;i=r.next())i.value.mode="hidden"}).sb().da(.5);e.Cd.push(function(){n.stop()})}}function m1(e,t){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(xt("metadata",t))}function Pp(e,t,n,r,i){e.Aa&&(t={schemeIdUri:r,startTime:t,endTime:n||1/0,id:"",payload:i},t.id=JSON.stringify(t),tp(e.Aa,t))}function UC(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new ze(function(){t.mode="hidden"}).sb().da(.5);e.Cd.push(function(){n.stop()})}}p.qj=function(){for(var e=this.$;e.g;)e.release()},p.Lc=function(e){return new mc(e)};function y1(e,t){function n(i){t()?t().dispatchEvent(i):e.dispatchEvent(i)}function r(i){t()?Da(t(),!0,i):i()}return t||(t=function(){return null}),new wt(function(i,o,s,u){var a=t()?t().j:e.o;a&&a.segmentDownloaded(i,o,s,u)},function(i,o,s){o=new Map().set("headers",i).set("request",o).set("requestType",s),n(xt("downloadheadersreceived",o)),r(function(){if(e.fa){var u=e.fa;if(u.h.enabled){var a=i["cmsd-static"];if(a)try{var c=new Map,f=a.split(",");for(a=0;a<f.length;a++){var h=f[a].split("=");c.set(h[0],r1(h[1]))}}catch{}if(c=i["cmsd-dynamic"]){try{var g=new Map,y=c.split(";");for(c=1;c<y.length;c++){var T=y[c].split("=");g.set(T[0],r1(T[1]))}var E=g}catch{E=null}E&&(u.g=E)}}}})},function(i,o){i=new Map().set("request",i).set("response",o),n(xt("downloadcompleted",i))},function(i,o,s,u){i=new Map().set("request",i).set("error",o).set("httpResponseCode",s).set("aborted",u),n(xt("downloadfailed",i))},function(i,o,s){r(function(){var u=e.L,a=s;if(a=a===void 0?{}:a,u.g.enabled)if(o.method==="HEAD")hu(u,o);else switch(i){case 0:try{if(u.g.enabled){if(a.type){e:{switch(a.type){case 4:var c=u.l?Jc:Qc;break e;case 3:case 2:c=u.l?ef:Zc;break e;case 5:c="s";break e}c=void 0}u.i=c}hu(u,o,{ot:t1,su:!u.u})}}catch(q){fe("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",q)}break;case Xr:try{if(u.g.enabled){var f=a.segment;c=0,f&&(c=f.endTime-f.startTime);var h={d:1e3*c,st:u.h.U()?"l":"v"};h.ot=AC(a);var g=h.ot===qc||h.ot===zc||h.ot===Yc||h.ot===$c,y=a.stream;if(y){var T=u.h.gb();if(g&&(h.bl=IC(u,y.type),h.ot!==$c)){var E=e1(u,y.type);h.dl=T?E/Math.abs(T):E}if(y.bandwidth&&(h.br=y.bandwidth/1e3),y.segmentIndex&&f){var x=y.segmentIndex.Gb(f.endTime,!0,0>T);if(x){var A=x.next().value;if(A&&A!=f){if(!bs(f.N(),A.N())){var M=A.N()[0],L=o.uris[0],_=new URL(M),F=new URL(L);if(_.origin!==F.origin)var P=M;else{for(var k=_.pathname.split("/").slice(1),O=F.pathname.split("/").slice(1,-1);k[0]===O[0];)k.shift(),O.shift();for(;O.length;)O.shift(),k.unshift("..");P=k.join("/")}h.nor=P}if((A.Sa||A.xa)&&(f.Sa!=A.Sa||f.xa!=A.xa)){var U=A.Sa+"-";A.xa&&(U+=A.xa),h.nrr=U}}}var W=u.h.gb()||1,B=e1(u,y.type)||500,K=y.bandwidth,X=K?K*(f.endTime-f.startTime)/1e3/(B/W/1e3)*u.g.rtpSafetyFactor:NaN;isNaN(X)||(h.rtp=X)}}g&&h.ot!==$c&&(h.tb=MC(u,h.ot)/1e3),hu(u,o,h)}}catch(q){fe("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",q)}break;case 2:case 5:case 6:hu(u,o,{ot:"k"});break;case 4:hu(u,o,{ot:"o"})}})},function(i,o,s,u){(i=t()?t().l:e.H)&&i.banLocation&&i.banLocation(u)},function(i,o){if(o.data){o=o.data.byteLength;var s=t()?t().getStats():e.A;s&&(s.mc=isNaN(s.mc)?o:s.mc+o,i===0&&(s.dh=o))}})}function FC(e,t){return new R0(e.h,e.i,e.g.streaming,t,function(){e.Ma&&N0(e.Ma,!0),e.j&&e.j.Fc(),e.M&&mi(e)},function(n){return e.dispatchEvent(n)})}function BC(e,t){var n=e.U()||0<t;t=new cs(e.yd,n),t.addEventListener("enter",function(o){Oa(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){Oa(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var s=o.region;o.seeking||(Oa(e,"timelineregionenter",s),Oa(e,"timelineregionexit",s))});var r=new cs(e.Aa,n);r.addEventListener("enter",function(o){m1(e,o.region)}),n=new cs(e.Ga,n),n.addEventListener("enter",function(o){o=new Map().set("detail",o.region.emsg),e.dispatchEvent(xt("emsg",o))});var i=new ep(e.h);return i.g.add(t),i.g.add(r),i.g.add(n),e.xd&&i.g.add(e.xd),i}function VC(e,t){t=new cs(e.Aa,0<t),t.addEventListener("enter",function(r){m1(e,r.region)});var n=new ep(e.h);return n.g.add(t),n}function v1(e,t,n){e.M=new A2,e.M.g=Qs,S1(e),rf(e),e.oa=new ze(function(){mi(e)}),e.g.streaming.rebufferingGoal&&e.oa.ua(.25),e.l.D(t,"waiting",function(){return mi(e)}),e.l.D(t,"canplaythrough",function(){return mi(e)}),e.l.D(t,"playing",function(){return mi(e)}),e.l.D(t,"seeked",function(){return mi(e)}),n&&(e.l.D(t,"stalled",function(){return mi(e)}),e.l.D(t,"progress",function(){return mi(e)}),e.l.D(t,"timeupdate",function(){return mi(e)}))}function S1(e){var t=e.g.streaming.rebufferingGoal;e.M.i.set(ha,Math.min(.5,t/2)).set(Qs,t)}function mi(e){switch(e.m){case pr:if(e.Uc())var t=!0;else{var n=Uh(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case In:e:if(e.Uc()||us(e.I))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.cc();var r=Uh(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=a0(e.h.buffered,e.h.currentTime),n=e.M;var i=t,o=n.i.get(n.g);t=n.g,r=i||r>=o&&0<r?ha:Qs,n.g=r,(t=t!=r)&&r===ha&&(n.h=Date.now()),t&&rf(e)}function HC(e,t,n,r){return new g0(e,t,n,r)}function GC(e){return new Ap({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},Fb:function(){return e.Fb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},gb:function(){return e.gb()},yb:function(){return e.yb()},Rb:function(){return e.Rb()},U:function(){return e.U()},ce:function(){return e.ce()}},e.g.cmcd)}function KC(e){return new B0(e.i,{Rc:function(){return e.G?e.G.Rd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},gb:function(){return e.gb()},video:e.h,aa:e.I,Xb:e.F,onError:function(t){return mu(e,t)},onEvent:function(t){return e.dispatchEvent(t)},ue:function(t,n,r){var i=t.startTime;if(t=t.endTime,n=n.type,n!=Xe){if(e.G){e.G.jh();var o=zh(e.I,n);!e.U()&&e.h.paused&&!e.h.seeking&&o!=null&&0<o&&e.G.Rd()<o&&e.G.cf(o)}mi(e)}r=new Map().set("start",i).set("end",t).set("contentType",n).set("isMuxed",r),e.dispatchEvent(xt("segmentappended",r))},hj:function(t,n){(n=n.Wc)&&e.xd&&yM(e.xd,n,t)},Hg:function(t,n){var r=e.C;if(r.g.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new Rh(Le(n)),n=0;for(var i=v(t.data),o=i.next();!o.done;o=i.next())n+=o.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),i=0,t=v(t.data),o=t.next();!o.done;o=t.next())o=o.value,n.set(o,i),i+=o.length;ca(r,"cenc",n),r=r.m}}else r=Promise.resolve();return r},disableStream:function(t,n){return e.disableStream(t,n)}})}p.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Bc(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(tt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(tt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(tt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&pn(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){tt("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(tt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(tt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(tt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(tt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(tt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(tt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(tt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(tt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){tt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var i=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return i},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(tt("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(tt("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(tt("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(tt("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(tt("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(tt("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(tt("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(tt("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(tt("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(tt("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){n=!1;for(var o in e.drm.advanced){var s=e.drm.advanced[o];r=s.videoRobustness,s=s.audioRobustness,"videoRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].videoRobustness)&&(e.drm.advanced[o].videoRobustness=[r],n=!0),"audioRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].audioRobustness)&&(e.drm.advanced[o].audioRobustness=[s],n=!0)}n&&tt("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"crossBoundaryStrategy"in e.streaming&&e.streaming.crossBoundaryStrategy!="keep"&&(e.streaming.inaccurateManifestTolerance=0),o=To(this.g,e,Wi(this)),T1(this),o},p.di=function(e){this.Ze=e};function T1(e){if(e.xe=new Nh(e.g,e.ka,e.C),e.H){var t=ei(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.C&&e.C.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.m!=zr&&Yv(e.xe,e.i)&&Kn(e)}catch(i){mu(e,i)}e.o&&ds(e),t=e.j.l,!t||t.allowedByApplication&&t.allowedByKeySystem||gu(e)}if(e.F&&(e.F.mg(e.g.streaming.forceHTTP),e.F.ng(e.g.streaming.forceHTTPS),e.F.o=e.g.streaming.minBytesForProgressEvents),e.I&&(e.I.configure(e.g.mediaSource),e.I.Ea=e.g.manifest.segmentRelativeVttTiming),e.u)if(t=e.g.textDisplayFactory,e.Xe!=t){var n=e.u;if(e.u=t(),e.u.configure?e.u.configure(e.g.textDisplayer):tt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||tt("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),e.u.setTextVisibility(n.isTextVisible()),n.destroy(),e.I){n=e.I;var r=e.u;n.ea=r,n.h&&(n.h.j=r)}e.Xe=t,e.j&&(t=e.j,(n=t.i.get(Xe))&&au(t,n.stream,!0,0,!0))}else e.u.configure&&e.u.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),N1(e)),e.M&&S1(e),e.oa&&(e.g.streaming.rebufferingGoal?e.oa.ua(.25):e.oa.stop()),e.i&&Op(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.B&&e.B.configure(e.g.ads),e.L&&e.L.configure(e.g.cmcd),e.fa&&e.fa.configure(e.g.cmsd)}p.getConfiguration=function(){var e=Wi(this);return To(e,this.g,Wi(this)),e},p.mi=function(){return this.Ze},p.Wg=function(){var e=Wi(this);return To(e,this.g,Wi(this)),G0(this.g,Wi(this))},p.Sg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ja().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},p.uj=function(){for(var e in this.g)delete this.g[e];To(this.g,Wi(this),Wi(this)),T1(this)},p.vi=function(){return this.m},p.Ug=function(){return this.i?this.i.type:null},p.zi=function(){return this.h},p.yb=function(){return this.F},p.Qc=function(){return this.T},p.Rg=function(){return this.B?this.B:null},p.U=function(){return this.i&&!this.Qa()?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},p.yc=function(){return this.i?this.i.presentationTimeline.yc():!1},p.Si=function(){if(this.i&&!this.Qa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},p.Ja=function(){if(this.i&&!this.Qa()){if(!this.sa&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Hb(),end:e.ob()}}if(this.h&&this.h.src&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},p.Pi=function(){this.U()&&(this.h.currentTime=this.Ja().end)},p.Ti=function(){return this.sa},p.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},p.drmInfo=function(){return this.C?this.C.h:null},p.pd=function(){return this.C?this.C.pd():1/0},p.If=function(){return this.C?this.C.If():[]},p.be=function(){return this.C?this.C.be():{}},p.Qf=function(){return this.M?this.M.g==Qs:!!this.T},p.gb=function(){return this.h?this.K?this.K.i:1:0},p.Nd=function(e,t){t=t===void 0?!0:t,e==0?re("A trick play rate of 0 is unsupported!"):(this.K.set(e),this.m==In&&(this.o.playbackRateChanged(e),up(this.j,t&&1<Math.abs(e))),C1(this,e))},p.gd=function(){var e=this.K.sc();this.m==pr&&this.K.set(e),this.m==In&&(this.K.set(e),this.o.playbackRateChanged(e),up(this.j,!1)),this.Oa.Ra()},p.Rb=function(){if(this.i&&!this.Qa()){for(var e=this.j?this.j.l:null,t=[],n=0,r=v(this.i.variants),i=r.next();!i.done;i=r.next())if(i=i.value,la(i)){var o=Jo(i);o.active=i==e,o.active||n==1||e==null||i.video!=e.video||i.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(s){return Ih(s)}):[]},p.vc=function(){if(this.i&&!this.Qa()){for(var e=this.j?this.j.u:null,t=[],n=v(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var i=Zo(r);i.active=r==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?_a(this).map(function(o){var s=hv(o);return s.active=o.mode!="disabled",s.type="text",s.originalTextId=o.id,o.kind=="captions"&&(s.mimeType="unknown"),o.kind=="subtitles"&&(s.mimeType="text/vtt"),o.kind&&(s.roles=[o.kind]),o.kind=="forced"&&(s.forced=!0),s}):[]},p.si=function(){var e=this.Ve;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Eh(t)})},p.gi=function(e){var t=this,n,r;return b(function(i){return i.g==1?I(i,x1(t,e),2):(n=i.h,n?(r=[],n.segmentIndex.xb(function(o){var s=w1(o.tilesLayout||n.tilesLayout);if(s)for(var u=s.rows*s.oc,a=o.j-o.startTime,c=0;c<u;c++){var f=E1(o,n,o.startTime+a*c/u,s);r.push(f)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),i.return(r)):i.return(null))})};function w1(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}p.Ji=function(e,t){var n=this,r,i,o,s;return b(function(u){return u.g==1?I(u,x1(n,e),2):(r=u.h,!r||(i=r.segmentIndex.find(t),i==null)?u.return(null):(o=r.segmentIndex.get(i),(s=w1(o.tilesLayout||r.tilesLayout))?u.return(E1(o,r,t,s)):u.return(null)))})};function x1(e,t){var n,r;return b(function(i){return i.g==1?e.m!=In&&e.m!=pr||(n=e.Ve,e.i&&(n=e.i.imageStreams),r=n[0],!r)?i.return(null):(t!=null&&(r=n.find(function(o){return o.id==t})),r?r.segmentIndex?i.s(2):I(i,r.createSegmentIndex(),2):i.return(null)):i.return(r)})}function E1(e,t,n,r){var i=t.width||0,o=t.height||0,s=i/r.oc,u=o/r.rows,a=r.oc*r.rows,c=e.j-e.startTime;c=e.B||c/a;var f=e.startTime,h=0,g=0;return 1<a&&(g=Math.floor((n-e.startTime)/c),f=e.startTime+g*c,h=g%r.oc*s,g=Math.floor(g/r.oc)*u),r=!1,(n=e.thumbnailSprite)&&(r=!0,u=n.height,h=n.positionX,g=n.positionY,s=n.width),{segment:e,imageHeight:o,imageWidth:i,height:u,positionX:h,positionY:g,startTime:f,duration:c,uris:e.N(),width:s,sprite:r,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}p.uh=function(e){function t(){var r=n.i.textStreams.find(function(i){return i.id==e.id});r&&r!=n.j.u&&(Sp(n.A.h,r,!1),Nc(n.j,r),sf(n),ja(n),n.Tb=r.language)}var n=this;this.i&&this.G&&(t(),!this.Qa())||function(){if(n.h&&n.h.textTracks){var r=_a(n),i=r.find(function(o){return o.mode!=="disabled"});(r=r.find(function(o){return Ah(o)===e.id}))&&(i!==r&&(i&&(i.mode="disabled",n.l.Ka(i,"cuechange"),n.u.remove(0,1/0)),r&&A1(n,r)),sf(n),ja(n))}}()};function A1(e,t){e.l.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},r=[],i=Array.from(t.activeCues||[]);i=v(i);for(var o=i.next();!o.done;o=i.next()){if(o=o.value,o.endTime===1/0||o.endTime<o.startTime)o=null;else{var s=new Et(o.startTime,o.endTime,o.text);s.line=typeof o.line=="number"?o.line:null,o.lineAlign&&(s.lineAlign=o.lineAlign),s.lineInterpretation=o.snapToLines?ra:1,s.position=typeof o.position=="number"?o.position:null,o.positionAlign&&(s.positionAlign=o.positionAlign),s.size=o.size,s.textAlign=o.align,o.vertical==="lr"?s.writingMode="vertical-lr":o.vertical==="rl"&&(s.writingMode="vertical-rl"),o.region&&(s.region.id=o.region.id,s.region.height=o.region.lines,s.region.heightUnits=2,s.region.regionAnchorX=o.region.regionAnchorX,s.region.regionAnchorY=o.region.regionAnchorY,s.region.scroll=o.region.scroll,s.region.viewportAnchorX=o.region.viewportAnchorX,s.region.viewportAnchorY=o.region.viewportAnchorY,s.region.viewportAnchorUnits=Jn,s.region.width=o.region.width,s.region.widthUnits=Jn),nc(s),o=s}o&&((s=e.g.mediaSource.modifyCueCallback)&&s(o,null,n),r.push(o))}e.u.append(r)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}p.Ee=function(e,t,n){function r(){var o=i.i.variants.find(function(u){return u.id==e.id});if(o&&la(o)){var s=i.j.l;i.g.abr.enabled&&(s.video!=o.video||s.audio&&o.audio&&s.audio.language==o.audio.language&&s.audio.channelsCount==o.audio.channelsCount&&s.audio.label==o.audio.label)&&re("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),i.Qa()?Na(i,o,!1,!1,0):Na(i,o,!1,t||!1,n||0),i.W.configure({language:o.language,role:o.audio&&o.audio.roles&&o.audio.roles[0]||"",channelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,Sc:o.video&&o.video.hdr?o.video.hdr:"",spatialAudio:o.audio&&o.audio.spatialAudio?o.audio.spatialAudio:!1,videoLayout:o.video&&o.video.videoLayout?o.video.videoLayout:"",Kc:o.audio&&o.audio.label?o.audio.label:"",fd:"",codecSwitchingStrategy:i.g.mediaSource.codecSwitchingStrategy,audioCodec:o.audio&&o.audio.codecs?o.audio.codecs:""}),ds(i)}}var i=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(r(),!this.Qa()))&&function(){if(i.h&&i.h.audioTracks){var o=Array.from(i.h.audioTracks);o=v(o);for(var s=o.next();!s.done;s=o.next())if(s=s.value,Ah(s)==e.id){D1(i,s);break}}}()},p.zj=function(e,t){t=t===void 0?0:t;var n=this.Rb();if(n.length){var r=n.find(function(i){return i.active});r&&(n=n.find(function(i){return i.videoId===r.videoId&&i.language==e.language&&i.label==e.label&&i.audioMimeType==e.mimeType&&i.audioCodec==e.codecs&&i.primary==e.primary&&bs(i.audioRoles,e.roles)&&i.accessibilityPurpose==e.accessibilityPurpose&&i.channelsCount==e.channelsCount&&i.audioSamplingRate==e.audioSamplingRate&&i.spatialAudio==e.spatialAudio}))&&!n.active&&this.Ee(n,!0,t)}},p.getAudioTracks=function(){var e=this.Rb();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e;if(this.m==In&&(n=e.filter(function(o){return o.originalVideoId===t.originalVideoId&&o.audioCodec})),!n.length)return[];e=new Map,n=v(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var i=r.originalAudioId;i||r.audioId==null||(i=String(r.audioId)),i&&e.set(i,{active:r.active,language:r.language,label:r.label,mimeType:r.audioMimeType,codecs:r.audioCodec,primary:r.primary,roles:r.audioRoles||[],accessibilityPurpose:r.accessibilityPurpose,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,originalLanguage:r.originalLanguage})}return Array.from(e.values())},p.ii=function(){return b1(this.Rb())},p.Hi=function(){return b1(this.vc())},p.hi=function(){return Array.from(O1(this.Rb()))},p.Gi=function(){return Array.from(O1(this.vc()))},p.th=function(e,t,n,r,i,o,s){function u(){function c(T,E){return T.video||E.video?T.video&&E.video?Math.abs((T.video.height||0)-(E.video.height||0))+Math.abs((T.video.width||0)-(E.video.width||0)):1/0:0}a.W=a.g.adaptationSetCriteriaFactory(),a.W.configure({language:e,role:t||"",channelCount:n||0,Sc:"",spatialAudio:o||!1,videoLayout:"",Kc:s||"",fd:"",codecSwitchingStrategy:a.g.mediaSource.codecSwitchingStrategy,audioCodec:i||""});var f=a.j.l,h=a.W.create(a.i.variants),g=null;h=v(h.values());for(var y=h.next();!y.done;y=h.next())y=y.value,la(y)&&(!g||c(g,f)>c(y,f))&&(g=y);g!=f&&(g?(f=Jo(g),a.Ee(f,!0,r||0)):gu(a))}var a=this;n=n===void 0?0:n,r=r===void 0?0:r,i=i===void 0?"":i,o=o===void 0?!1:o,s=s===void 0?"":s,!(this.i&&this.G&&(u(),!this.Qa()))&&function(){if(a.h&&a.h.audioTracks){var c=Xs(a.Rb(),e,t||"",!1)[0];c&&a.Ee(c)}}()},p.jg=function(e,t,n){function r(){i.Tb=e,i.Hd=t||"",i.Fd=n||!1;var o=Xs(i.i.textStreams,i.Tb,i.Hd,i.Fd)[0]||null;o&&o!=i.j.u&&(Sp(i.A.h,o,!1),i.g.streaming.alwaysStreamText||i.Rf())&&(Nc(i.j,o),sf(i),ja(i))}var i=this;n=n===void 0?!1:n,!(this.i&&this.G&&(r(),!this.Qa()))&&function(){var o=Xs(i.vc(),e,t||"",n||!1)[0];o&&i.uh(o)}()},p.Aj=function(e,t,n){function r(){for(var o=null,s=v(i.i.variants),u=s.next();!u.done;u=s.next())if(u=u.value,u.audio.label==e){o=u;break}o!=null&&(i.W=i.g.adaptationSetCriteriaFactory(),i.W.configure({language:o.language,role:"",channelCount:0,Sc:"",spatialAudio:!1,videoLayout:"",fd:"",Kc:e,codecSwitchingStrategy:i.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),gu(i,t,n))}var i=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(r(),!this.Qa()))&&function(){if(i.h&&i.h.audioTracks){var o=Array.from(i.h.audioTracks),s=null;o=v(o);for(var u=o.next();!u.done;u=o.next())u=u.value,u.label==e&&(s=u);s&&D1(i,s)}}()},p.Rf=function(){var e=this.na;return this.u?this.u.isTextVisible():e},p.li=function(){return this.Jd.map(function(e){return Zo(e)})},p.ki=function(e){if(!this.Jd.length)return[];var t=yt(e);if(e=this.Jd.filter(function(o){return yt(o.language)==t}),!e.length)return[];var n=[],r=new Set;e=v(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.segmentIndex&&i.segmentIndex.xb(function(o){var s=o.N()[0],u=o.startTime+"-"+o.endTime+"-"+s;o={id:u,title:s,startTime:o.startTime,endTime:o.endTime},r.has(u)||(n.push(o),r.add(u))});return n};function _a(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function I1(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function WC(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}p.Ah=function(e){e=!!e,this.na!=e&&(this.na=e,this.m==In?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.u||(e=Xs(this.i.textStreams,this.Tb,this.Hd,this.Fd),0<e.length&&(Nc(this.j,e[0]),sf(this),ja(this))):kM(this.j))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),_1(this))},p.Ai=function(){if(this.G)var e=this.G.Rd();else{if(this.Z==null)return new Date;e=this.Z}if(this.i&&!this.Qa()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},p.Xg=function(){if(this.i&&!this.Qa()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},p.ee=function(){return this.U()&&this.i?this.i.presentationTimeline.ee():null},p.Fb=function(){if(this.m==In)return this.I.Fb();var e={total:[],audio:[],video:[],text:[]};return this.m==pr&&(e.total=Vi(this.h.buffered)),e},p.ce=function(){if(!this.h||!this.h.currentTime)return null;var e=this.Xg().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},p.getStats=function(){if(this.m!=In&&this.m!=pr)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};_p(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.U()){var n=this.A;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.A.P=this.G.Bg(),this.A.T=this.G.Cg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.A;var r=Number(n.totalVideoFrames);t.O=Number(n.droppedVideoFrames),t.M=r,this.A.L=Number(n.corruptedVideoFrames)}if(this.C?(n=this.C,n=n.H?n.H:NaN):n=NaN,this.A.o=n,this.m==In){if(n=this.j.l,t=this.j.u,n){r=this.K?this.K.i:1;var i=r*n.bandwidth;t&&t.bandwidth&&(i+=r*t.bandwidth),this.A.A=i}n&&n.video&&(t=this.A,r=n.video.height||NaN,t.m=n.video.width||NaN,t.l=r),this.U()&&(n=this.ce()||0,this.A.B=n/1e3),this.i&&(this.A.G=this.i.periodCount,this.A.F=this.i.gapCount,this.i.presentationTimeline&&(this.A.I=this.i.presentationTimeline.h)),n=this.o.getBandwidthEstimate(),this.A.u=n}this.m==pr&&(n=this.A,n.mc=isNaN(n.mc)?NaN:n.mc+NaN,n=this.A,t=e.videoHeight||NaN,n.m=e.videoWidth||NaN,n.l=t);var o=this.A;e=o.m,n=o.l,t=o.A,r=o.M,i=o.O;var s=o.L,u=o.T,a=o.P,c=o.u,f=o.i,h=o.C,g=o.H,y=o.j,T=vp(o.g,"playing"),E=vp(o.g,"paused"),x=vp(o.g,"buffering"),A=o.o,M=o.B,L=o.I,_=o.dh,F=o.mc,P=o.K,k=o.G,O=o.F,U=eC(o.g),W=[];o=v(o.h.g);for(var B=o.next();!B.done;B=o.next())B=B.value,W.push({timestamp:B.timestamp,id:B.id,type:B.type,fromAdaptation:B.fromAdaptation,bandwidth:B.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:i,corruptedFrames:s,stallsDetected:u,gapsJumped:a,estimatedBandwidth:c,completionPercent:f,loadLatency:h,manifestTimeSeconds:g,drmTimeSeconds:y,playTime:T,pauseTime:E,bufferingTime:x,licenseTime:A,liveLatency:M,maxSegmentDuration:L,manifestSizeBytes:_,bytesDownloaded:F,nonFatalErrorCount:P,manifestPeriodCount:k,manifestGapCount:O,stateHistory:U,switchHistory:W}},p.Sh=function(e,t,n,r,i,o,s){s=s===void 0?!1:s;var u=this,a,c,f,h,g,y,T,E,x,A,M,L,_;return b(function(F){switch(F.g){case 1:if(u.m!=In&&u.m!=pr)throw new j(1,7,7004);if(n!="subtitles"&&n!="captions"&&re("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){F.s(2);break}return I(F,Lp(u,e),3);case 3:r=F.h;case 2:if(a=[],u.B&&(a=u.B.getCuePoints()),u.m!=pr){F.s(4);break}return s&&(n="forced"),I(F,XC(u,e,t,n,r,o||"",a),5);case 5:if(c=yt(t),f=u.vc(),h=f.find(function(P){return yt(P.language)==c&&P.label==(o||"")&&P.kind==n}))return Kn(u),F.return(h);throw new j(1,2,2012);case 4:if(g=$t,y=u.Ja(),T=y.end-y.start,u.i&&(T=u.i.presentationTimeline.getDuration()),T==1/0)throw new j(1,4,4033);if(!a.length){F.s(6);break}return I(F,nf(u,e,u.F,u.g.streaming.retryParameters),7);case 7:E=F.h,x=M1(u,E,r,a),A=new Blob([x],{type:"text/vtt"}),e=$h(A),r="text/vtt";case 6:if(M={id:u.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Rc(0,T,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:g.va,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Kt(r||"",i||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},L=Kt(M.mimeType,M.codecs),_=Ks(L),!_)throw new j(2,2,2014,r);return u.i.textStreams.push(M),Kn(u),F.return(Zo(M))}})},p.Th=function(e,t){var n=this,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_;return b(function(F){switch(F.g){case 1:if(n.m!=In&&n.m!=pr)throw new j(1,7,7004);if(t){F.s(2);break}return I(F,Lp(n,e),3);case 3:t=F.h;case 2:if(t!="text/vtt")throw new j(1,2,2017,e);if(r=$t,i=n.Ja(),o=i.end-i.start,n.i&&(o=n.i.presentationTimeline.getDuration()),o==1/0)throw new j(1,4,4045);return I(F,nf(n,e,n.F,n.g.streaming.retryParameters),4);case 4:if(s=F.h,u=ia(t),!u)throw new j(2,2,2014,t);for(a=u(),c={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},f=Le(s),h=a.parseMedia(f,c,e,[]),g=[],y=v(h),T=y.next(),E={};!T.done;E={Qe:void 0,Mc:void 0},T=y.next())E.Mc=T.value,E.Qe=null,x=function(P){return function(){return P.Qe==null&&(P.Qe=un([e],[P.Mc.payload])),P.Qe||[]}}(E),A=new xe(E.Mc.startTime,E.Mc.endTime,x,0,null,null,0,0,1/0),E.Mc.payload.includes("#xywh")&&(M=E.Mc.payload.split("#xywh=")[1].split(","),M.length===4&&A.Ge({height:parseInt(M[3],10),positionX:parseInt(M[0],10),positionY:parseInt(M[1],10),width:parseInt(M[2],10)})),g.push(A);if(L=t,!g.length){F.s(5);break}return I(F,fs(g[0].N()[0],n.F,n.g.manifest.retryParameters),6);case 6:L=F.h;case 5:return _={id:n.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new it(g),mimeType:L||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.bf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Kt(L||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==pr?n.Ve.push(_):n.i.imageStreams.push(_),Kn(n),F.return(Eh(_))}})},p.Rh=function(e,t,n){var r=this,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M;return b(function(L){switch(L.g){case 1:if(r.m!=In&&r.m!=pr)throw new j(1,7,7004);if(n){L.s(2);break}return I(L,Lp(r,e),3);case 3:n=L.h;case 2:if(i=$t,o=r.Ja(),s=o.end-o.start,r.i&&(s=r.i.presentationTimeline.getDuration()),s==1/0)throw new j(1,4,4054);return I(L,nf(r,e,r.F,r.g.streaming.retryParameters),4);case 4:if(u=L.h,a=ia(n),!a)throw new j(2,2,2014,n);for(c=a(),f={periodStart:0,segmentStart:0,segmentEnd:s,vttOffset:0},h=Le(u),g=c.parseMedia(h,f,e,[]),y=[],T=v(g),E=T.next(),x={};!E.done;x={Zd:void 0},E=T.next())x.Zd=E.value,A=new xe(x.Zd.startTime,x.Zd.endTime,function(_){return function(){return[_.Zd.payload]}}(x),0,null,null,0,0,1/0),y.push(A);return M={id:r.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new it(y),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:i.va,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Kt("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},r.Jd.push(M),Kn(r),L.return(Zo(M))}})};function Lp(e,t){var n;return b(function(r){switch(r.g){case 1:return ye(r,2),I(r,fs(t,e.F,e.g.streaming.retryParameters),4);case 4:n=r.h,Oe(r,3);break;case 2:ve(r);case 3:if(n)return r.return(n);throw new j(1,2,2011,t)}})}function XC(e,t,n,r,i,o,s){var u,a,c,f;return b(function(h){if(h.g==1)return i!="text/vtt"||s.length?I(h,nf(e,t,e.F,e.g.streaming.retryParameters),3):h.s(2);h.g!=2&&(u=h.h,a=M1(e,u,i,s),c=new Blob([a],{type:"text/vtt"}),t=$h(c),i="text/vtt"),f=document.createElement("track");var g=e.L,y=t;try{if(g.g.enabled){var T=Ip(g);T.ot=Cp,T.su=!0;var E=Xc(T),x=Mp(y,E)}else x=y}catch(A){fe("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",A),x=y}return f.src=x,f.label=o,f.kind=r,f.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(f),h.return(f)})}function nf(e,t,n,r){var i,o,s;return b(function(u){if(u.g==1){i=Xr,o=nn([t],r),o.method="GET";var a=e.L;try{a.g.enabled&&hu(a,o,{ot:Cp,su:!0})}catch(c){fe("CMCD_TEXT_ERROR","Could not generate text CMCD data.",c)}return I(u,n.request(i,o).promise,2)}return s=u.h,u.return(s.data)})}function M1(e,t,n,r){var i=ia(n);if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Le(t),t=n.parseMedia(t,e,null,[]),yC(t,r);throw new j(2,2,2014,n)}p.Fj=function(e,t){this.ka.width=e,this.ka.height=t},p.gg=function(e){if(this.m==In){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.B)t=!1;else{for(var n=v(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.sd||r.Da||r.kb||(r.sd=!1,Rn(t,r,e));t=!0}}else t=!1;return t},p.Jf=function(){return re("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},p.wi=function(){return this.Qb},p.pi=function(){var e={video:null,audio:null,text:null};if(this.m!=In)return e;var t=this.j.l,n=this.h.currentTime;t=v([t.video,t.audio,this.j.u]);for(var r=t.next();!r.done;r=t.next())if((r=r.value)&&r.segmentIndex){var i=r.segmentIndex.find(n);i=r.segmentIndex.get(i),i={codecs:i.codecs||r.codecs,mimeType:i.mimeType||r.mimeType,bandwidth:i.bandwidth||r.bandwidth},r.type=="video"?(i.width=r.width,i.height=r.height,e.video=i):r.type=="audio"?e.audio=i:r.type==Xe&&(e.text=i)}return e};function Wi(e){var t=fu();return t.streaming.failureCallback=function(n){if(e.U()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.gg(r))}},t.textDisplayFactory=function(){return!e.He||pn()&&!document.fullscreenEnabled?"addTextTrack"in e.h?new Sn(e.h,"Shaka Player TextTrack"):new Tn:new wn(e.h,e.He)},t}p.Dh=function(e){this.He=e};function zC(e,t){for(var n=new Set,r=v(t.textStreams),i=r.next();!i.done;i=r.next())i=i.value,i.mimeType!="application/cea-608"&&i.mimeType!="application/cea-708"||n.add(i.originalId);for(r=v(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions){for(var o=v(i.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new jt,c=i.closedCaptions.get(s);u={id:e.Ae++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:c,originalLanguage:c,label:null,type:Xe,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Kt(u,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(u),n.add(s)}}}function qC(e,t){var n,r,i,o,s;return b(function(u){return u.g==1?(n=e.audio,r=e.video,i=function(a,c){var f,h,g;return b(function(y){return y.g==1?a?a.segmentIndex?y.s(2):I(y,a.createSegmentIndex(),2):y.return(null):(h=(f=a.segmentIndex.Gb(c))?f.next().value:null,h?(g=h.startTime,y.return(g)):y.return(null))})},I(u,i(n,t),2)):u.g!=3?(o=u.h,I(u,i(r,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function rf(e){var t=e.Qf();if(e.A&&e.M&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.K;n.j=!1,Zh(n)}else n=e.K,n.j=t,Zh(n);if(e.L&&(n=e.L,t||n.u||(n.u=!0),n.u&&t&&(n.B=!0),n.F=t),_p(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Qd<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.P&&(e.P=Math.min(e.P+ ++e.Qd*i,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(xt("buffering",t))}function C1(e,t){e.Oa.Ra(),e.Oa.D(e.h,"timeupdate",function(){var n=e.h.currentTime,r=e.Ja(),i=e.U()?e.g.streaming.safeSeekOffset:0;0<t?Math.floor(n)>=Math.floor(r.end)&&e.gd():Math.floor(n)<=Math.floor(r.start+i)&&e.gd()})}function _p(e){if(e.A&&e.M){var t=e.A.g,n="playing";e.M.g==Qs?n="buffering":e.Uc()?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:i,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(xt("statechanged",n)))}}function k1(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,i=e.Sg();i<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.Nd(r,!1):i==1&&t!==e.K.sc()&&e.gd()}if(n&&(n=e.Ja(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var o=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,u=s+r,a=Math.max(0,s-r),c=e.g.streaming.liveSync.maxPlaybackRate,f=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?u=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(u=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?a=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(a=e.i.serviceDescription.minLatency),c=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,f=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.P||typeof s!="number"||(e.P=s);var h=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;i&&e.Na&&e.P!==null&&typeof s=="number"&&e.Qd<h&&Date.now()-e.Na>1e3*o&&(o=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.P=Math.max(e.P-(s-o)/2,o+r),e.Na=Date.now()),i&&e.P!==null&&(u=e.P+r,a=e.P-r),s=n.end-e.h.currentTime,r=0,e.m==pr&&(i=e.h.buffered,0<i.length&&(r=i.end(i.length-1),r=Math.max(c,r-n.end))),n=e.g.streaming.liveSync.panicMode,i=1e3*e.g.streaming.liveSync.panicThreshold,o=Date.now()-e.M.h,n&&!f&&(f=e.g.streaming.liveSync.minPlaybackRate),n&&f&&o<=i?t!=f&&e.Nd(f,!1):u!=null&&c&&s-r>u?(t!=c&&e.Nd(c,!1),e.Na=null):a!=null&&f&&s-r<a?(t!=f&&e.Nd(f,!1),e.Na=null):t!==e.K.sc()&&(e.gd(),e.Na=Date.now())}}function of(e){if(e.h){var t=function(i,o){var s=s===void 0?Number.EPSILON:s;if(i===o)s=!0;else{var u=Math.abs(i-o);s=u<=s?!0:s!==Number.EPSILON?Math.abs(u-s)<=Number.EPSILON:!1}return(s||o>i)&&e.Ye<i?(e.Ye=i,!0):!1},n=e.Ja();if(n=n.end-n.start,n=0<n?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var r=xt("started");else t(25,n)?r=xt("firstquartile"):t(50,n)?r=xt("midpoint"):t(75,n)?r=xt("thirdquartile"):(t(100,n)&&(r=xt("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.Uc()&&e.h.pause());r&&e.dispatchEvent(r)}}}function ds(e){try{Qv(e.xe,e.i)}catch(n){return mu(e,n),!1}var t=uc(e.i.variants);return t=e.W.create(t),e.o.setVariants(Array.from(t.values())),!0}function gu(e,t,n,r,i){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,i=i===void 0?!0:i;var o;(o=ds(e)?e.o.chooseVariant():null)&&Na(e,o,i,t,n,r)}function Na(e,t,n,r,i,o){o=o===void 0?!1:o;var s=e.j.l;if(t==s)r&&V0(e.j,t,r,i,!0);else{var u=e.A.h;if(u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),V0(e.j,t,r,i,o,n),r=null,s&&(r=Jo(s)),s=Jo(t),s.active=!0,e.O&&(i=e.O,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),o=0,u=-1,t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(e.Ug()){case"DASH":u=1;break;case"HLS":u=0}i.g&&(i.g.setLevelSwitching(t.id,!0),i.g.setContainerFormat(o),i.j||i.g.setStreamingFormat(u))}n?(n=new Map().set("oldTrack",r).set("newTrack",s),n=xt("adaptation",n),hs(e,n)):R1(e,r,s),P1(e,r,s)}}function D1(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Ih(n),t=Ih(t),R1(e,n,t),P1(e,n,t))}function Kn(e){var t=xt("trackschanged");hs(e,t),L1(e)}function R1(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=xt("variantchanged",t),hs(e,t)}function P1(e,t,n){var r=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(r=!0),r&&L1(e)}function L1(e){var t=xt("audiotrackschanged");hs(e,t)}function sf(e){var t=xt("textchanged");hs(e,t)}function _1(e){var t=xt("texttrackvisibility");hs(e,t)}function N1(e){e.g.abr.enabled||Np(e);var t=new Map().set("newStatus",e.g.abr.enabled);hs(e,xt("abrstatuschanged",t))}function ja(e){var t=e.vc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Np(e,t){if(t=t===void 0?!0:t,e.m==In){e.Je.stop();for(var n=v(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&ds(e)}}p.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===zr||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(u){var a=u[e.type];return a&&a.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===a.language:!0:!1})){for(var n=!1,r=!1,i=v(this.i.variants),o=i.next();!o.done;o=i.next()){o=o.value;var s=o[e.type];s&&(s.id===e.id?(o.disabledUntilTime=Date.now()/1e3+t,n=!0):s.trickModeVideo&&s.trickModeVideo.id==e.id&&(r=!0))}return!n&&r?!1:(this.Je.ua(1),t=this.Fb().video.reduce(function(u,a){return u+a.end-a.start},0),gu(this,!1,t,!0,!1),!0)}return!1};function mu(e,t){var n,r,i,o;return b(function(s){switch(s.g){case 1:if(e.m==zr)return s.return();if(t.severity===1&&e.A.K++,n=!0,!(e.sa&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){s.s(2);break}return pn()&&t.code==3016?s.return():(ye(s,3),I(s,Uc(e.j),5));case 5:r=s.h,n=!r,r&&(i=xt("mediasourcerecovered"),e.dispatchEvent(i)),Oe(s,2);break;case 3:ve(s),n=!0;case 2:if(!n)return s.return();t.severity===2&&Np(e,!1),o=xt("error",new Map().set("detail",t)),e.dispatchEvent(o),o.defaultPrevented&&(t.handled=!0),ae(s)}})}p.addFont=function(e,t){var n,r,i,o,s;return b(function(u){if(u.g==1)return"fonts"in document&&"FontFace"in S?I(u,document.fonts.ready,3):u.s(0);if(!("entries"in document.fonts))return u.return();for(n=function(a){a=a.entries();for(var c=[],f=a.next();f.done===!1;)c.push(f.value),f=a.next();return c},r=v(n(document.fonts)),i=r.next();!i.done;i=r.next())if(o=i.value,o.family==e&&o.display=="swap")return u.return();s=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(s),ae(u)})};function Oa(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(xt(t,e))}function j1(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(xt(r?"audiotrackchanged":"mediaqualitychanged",t))}function jp(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new j(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new j(2,3,3016,n,t,e.h.error.message))}function Op(e,t,n){0<t&&(e.U()||e.Ch(t)),t=e.getDuration(),n<t&&(e.U()||e.bb(n))}function hs(e,t){b(function(n){if(n.g==1)return I(n,Promise.resolve(),2);e.m!=zr&&e.dispatchEvent(t),ae(n)})}function O1(e){var t=new Set;e=v(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(yt(n.language)):t.add("und");return t}function b1(e){var t=new Map,n=new Map;e=v(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i="und",o=[];r.language&&(i=yt(r.language)),r.type=="variant"?o=r.audioRoles:o=r.roles,o&&o.length||(o=[""]),t.has(i)||t.set(i,new Set),o=v(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(i).add(s),r.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(s,r.label))}var u=[];return t.forEach(function(a,c){a=v(a);for(var f=a.next();!f.done;f=a.next()){f=f.value;var h=null;n.has(c)&&n.get(c).has(f)&&(h=n.get(c).get(f)),u.push({language:c,role:f,label:h})}}),u}p.Qa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},p.Uc=function(){return!this.h||this.h.ended?!0:this.sa&&!this.U()&&this.h.currentTime>=this.Ja().end},D("shaka.Player",ee),ee.prototype.isEnded=ee.prototype.Uc,ee.prototype.isRemotePlayback=ee.prototype.Qa,ee.prototype.addFont=ee.prototype.addFont,ee.prototype.setVideoContainer=ee.prototype.Dh,ee.prototype.getFetchedPlaybackInfo=ee.prototype.pi,ee.prototype.getManifestParserFactory=ee.prototype.wi,ee.prototype.getManifest=ee.prototype.Jf,ee.prototype.retryStreaming=ee.prototype.gg,ee.prototype.setMaxHardwareResolution=ee.prototype.Fj,ee.prototype.addChaptersTrack=ee.prototype.Rh,ee.prototype.addThumbnailsTrack=ee.prototype.Th,ee.prototype.addTextTrackAsync=ee.prototype.Sh,ee.prototype.getStats=ee.prototype.getStats,ee.prototype.getBufferedInfo=ee.prototype.Fb,ee.prototype.getSegmentAvailabilityDuration=ee.prototype.ee,ee.prototype.getPresentationStartTimeAsDate=ee.prototype.Xg,ee.prototype.getPlayheadTimeAsDate=ee.prototype.Ai,ee.prototype.setTextTrackVisibility=ee.prototype.Ah,ee.prototype.getChapters=ee.prototype.ki,ee.prototype.getChaptersTracks=ee.prototype.li,ee.prototype.isTextTrackVisible=ee.prototype.Rf,ee.prototype.selectVariantsByLabel=ee.prototype.Aj,ee.prototype.selectTextLanguage=ee.prototype.jg,ee.prototype.selectAudioLanguage=ee.prototype.th,ee.prototype.getTextLanguages=ee.prototype.Gi,ee.prototype.getAudioLanguages=ee.prototype.hi,ee.prototype.getTextLanguagesAndRoles=ee.prototype.Hi,ee.prototype.getAudioLanguagesAndRoles=ee.prototype.ii,ee.prototype.getAudioTracks=ee.prototype.getAudioTracks,ee.prototype.selectAudioTrack=ee.prototype.zj,ee.prototype.selectVariantTrack=ee.prototype.Ee,ee.prototype.selectTextTrack=ee.prototype.uh,ee.prototype.getThumbnails=ee.prototype.Ji,ee.prototype.getAllThumbnails=ee.prototype.gi,ee.prototype.getImageTracks=ee.prototype.si,ee.prototype.getTextTracks=ee.prototype.vc,ee.prototype.getVariantTracks=ee.prototype.Rb,ee.prototype.cancelTrickPlay=ee.prototype.gd,ee.prototype.trickPlay=ee.prototype.Nd,ee.prototype.getPlaybackRate=ee.prototype.gb,ee.prototype.isBuffering=ee.prototype.Qf,ee.prototype.getKeyStatuses=ee.prototype.be,ee.prototype.getActiveSessionsMetadata=ee.prototype.If,ee.prototype.getExpiration=ee.prototype.pd,ee.prototype.drmInfo=ee.prototype.drmInfo,ee.prototype.keySystem=ee.prototype.keySystem,ee.prototype.isFullyLoaded=ee.prototype.Ti,ee.prototype.goToLive=ee.prototype.Pi,ee.prototype.seekRange=ee.prototype.Ja,ee.prototype.isAudioOnly=ee.prototype.Si,ee.prototype.isInProgress=ee.prototype.yc,ee.prototype.isLive=ee.prototype.U,ee.prototype.getAdManager=ee.prototype.Rg,ee.prototype.getAssetUri=ee.prototype.Qc,ee.prototype.getNetworkingEngine=ee.prototype.yb,ee.prototype.getMediaElement=ee.prototype.zi,ee.prototype.getManifestType=ee.prototype.Ug,ee.prototype.getLoadMode=ee.prototype.vi,ee.prototype.resetConfiguration=ee.prototype.uj,ee.prototype.getBufferFullness=ee.prototype.Sg,ee.prototype.getNonDefaultConfiguration=ee.prototype.Wg,ee.prototype.getConfigurationForLowLatency=ee.prototype.mi,ee.prototype.getConfiguration=ee.prototype.getConfiguration,ee.prototype.configurationForLowLatency=ee.prototype.di,ee.prototype.configure=ee.prototype.configure,ee.prototype.releaseAllMutexes=ee.prototype.qj,ee.prototype.destroyAllPreloads=ee.prototype.rf,ee.prototype.preload=ee.prototype.preload,ee.prototype.detachAndSavePreload=ee.prototype.Ng,ee.prototype.unloadAndSavePreload=ee.prototype.Ij,ee.prototype.load=ee.prototype.load,ee.prototype.updateStartTime=ee.prototype.Mj,ee.prototype.unload=ee.prototype.kc,ee.prototype.detach=ee.prototype.detach,ee.prototype.attachCanvas=ee.prototype.Wh,ee.prototype.attach=ee.prototype.Lb,ee.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,i,o,s;return b(function(u){switch(u.g){case 1:if(t={},!e){u.s(2);break}return I(u,m2(),3);case 3:t=u.h;case 2:return n=I2(),r=J2(),I(u,Py(),4);case 4:return i=u.h,o={manifest:n,media:r,drm:t,hardwareResolution:i},s=F1,s.forEach(function(a,c){o[c]=a()}),u.return(o)}})},ee.isBrowserSupported=function(){return S.Promise||re("A Promise implementation or polyfill is required"),S.Promise&&S.Uint8Array&&Array.prototype.forEach&&!Xt("Trident/")?ci()?!0:zu("application/x-mpegurl"):!1},ee.setAdManagerFactory=function(e){af=e},ee.registerSupportPlugin=l1,ee.prototype.destroy=ee.prototype.destroy;var zr=0,uf=1,In=2,pr=3;ee.LoadMode={DESTROYED:zr,NOT_LOADED:uf,MEDIA_SOURCE:In,SRC_EQUALS:pr},ee.version="v4.14.10";var U1=["4","14"];Er=new function(e){this.g=e,this.i=Bl,this.h=Qn}(new fr(Number(U1[0]),Number(U1[1])));var F1=new Map,af=null;function B1(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function YC(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function Me(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new _e,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}p=Me.prototype,p.needsSkipUI=function(){return!1},p.isClientRendering=function(){return!0},p.hasCustomClick=function(){return!0},p.isUsingAnotherMediaElement=function(){return!0},p.getDuration=function(){return this.g.getDuration()},p.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.h.getRemainingTime()},p.isPaused=function(){return this.i},p.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.h.getAdSkippableState()},p.skip=function(){return this.h.skip()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.resume()},p.getVolume=function(){return this.h.getVolume()},p.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},p.isMuted=function(){return this.h.getVolume()==0},p.isLinear=function(){return this.g.isLinear()},p.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return this.g.getMediaUrl()},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.g=null},D("shaka.ads.ClientSideAd",Me),Me.prototype.release=Me.prototype.release,Me.prototype.getPodIndex=Me.prototype.getPodIndex,Me.prototype.getTimeOffset=Me.prototype.getTimeOffset,Me.prototype.getMediaUrl=Me.prototype.getMediaUrl,Me.prototype.getAdvertiserName=Me.prototype.getAdvertiserName,Me.prototype.getCreativeAdId=Me.prototype.getCreativeAdId,Me.prototype.getAdId=Me.prototype.getAdId,Me.prototype.getVastMediaWidth=Me.prototype.getVastMediaWidth,Me.prototype.getVastMediaHeight=Me.prototype.getVastMediaHeight,Me.prototype.getVastMediaBitrate=Me.prototype.getVastMediaBitrate,Me.prototype.getDescription=Me.prototype.getDescription,Me.prototype.getTitle=Me.prototype.getTitle,Me.prototype.getPositionInSequence=Me.prototype.getPositionInSequence,Me.prototype.getSequenceLength=Me.prototype.getSequenceLength,Me.prototype.setMuted=Me.prototype.setMuted,Me.prototype.resize=Me.prototype.resize,Me.prototype.isLinear=Me.prototype.isLinear,Me.prototype.isMuted=Me.prototype.isMuted,Me.prototype.setVolume=Me.prototype.setVolume,Me.prototype.getVolume=Me.prototype.getVolume,Me.prototype.play=Me.prototype.play,Me.prototype.pause=Me.prototype.pause,Me.prototype.skip=Me.prototype.skip,Me.prototype.canSkipNow=Me.prototype.canSkipNow,Me.prototype.getTimeUntilSkippable=Me.prototype.getTimeUntilSkippable,Me.prototype.isSkippable=Me.prototype.isSkippable,Me.prototype.isPaused=Me.prototype.isPaused,Me.prototype.getRemainingTime=Me.prototype.getRemainingTime,Me.prototype.getMinSuggestedDuration=Me.prototype.getMinSuggestedDuration,Me.prototype.getDuration=Me.prototype.getDuration,Me.prototype.isUsingAnotherMediaElement=Me.prototype.isUsingAnotherMediaElement,Me.prototype.hasCustomClick=Me.prototype.hasCustomClick,Me.prototype.isClientRendering=Me.prototype.isClientRendering,Me.prototype.needsSkipUI=Me.prototype.needsSkipUI;function Mt(){}function V1(e,t){var n=[];e=v(lt(e,"Ad"));for(var r=e.next();!r.done;r=e.next())if((r=zt(r.value,"InLine"))&&(r=zt(r,"Creatives"))){r=v(lt(r,"Creative"));for(var i=r.next();!i.done;i=r.next()){i=i.value;var o=zt(i,"Linear");if(o&&$C(n,t,o),i=zt(i,"NonLinearAds")){i=lt(i,"NonLinear"),i=v(i);for(var s=i.next();!s.done;s=i.next())e:{o=n;var u=t,a=s.value,c=zt(a,"StaticResource");if(c)s=c.attributes.creativeType;else{if(c=zt(a,"HTMLResource"),!c)break e;s="text/html"}if(c=hr(c)){s==="text/html"&&(c="data:text/html;charset=UTF-8,"+encodeURIComponent(c));var f=be(a,"width",Dn)||be(a,"expandedWidth",Dn),h=be(a,"height",Dn)||be(a,"expandedHeight",Dn);if(f||h){var g=null;(a=a.attributes.minSuggestedDuration)&&(g=Bs(a)),a=0,u!=null&&(a=u),o.push({id:null,groupId:null,startTime:a,endTime:null,uri:c,mimeType:s,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:g,once:!0,pre:u==null,post:u==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:f||0,y:h||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}}}return n}function $C(e,t,n){var r=0;t!=null&&(r=t);var i=null;if(n.attributes.skipoffset&&(i=Bs(n.attributes.skipoffset),isNaN(i)&&(i=null)),n=zt(n,"MediaFiles")){var o=lt(n,"MediaFile");for(n=o,o=o.filter(function(u){return u.attributes.delivery=="streaming"}),o.length&&(n=o),n=n.sort(function(u,a){return(parseInt(a.attributes.height,10)||0)-(parseInt(u.attributes.height,10)||0)}),n=v(n),o=n.next();!o.done;o=n.next())if(o=o.value,!o.attributes.apiFramework){var s=hr(o);if(s){e.push({id:null,groupId:null,startTime:r,endTime:null,uri:s,mimeType:o.attributes.type||null,isSkippable:i!=null,skipOffset:i,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}D("shaka.ads.Utils",Mt),Mt.ADS_LOADED="ads-loaded",Mt.AD_STARTED="ad-started",Mt.AD_FIRST_QUARTILE="ad-first-quartile",Mt.AD_MIDPOINT="ad-midpoint",Mt.AD_THIRD_QUARTILE="ad-third-quartile",Mt.AD_COMPLETE="ad-complete",Mt.AD_STOPPED="ad-stopped",Mt.AD_SKIPPED="ad-skipped",Mt.AD_VOLUME_CHANGED="ad-volume-changed",Mt.AD_MUTED="ad-muted",Mt.AD_PAUSED="ad-paused",Mt.AD_RESUMED="ad-resumed",Mt.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Mt.CUEPOINTS_CHANGED="ad-cue-points-changed",Mt.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Mt.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Mt.AD_CLICKED="ad-clicked",Mt.AD_PROGRESS="ad-progress",Mt.AD_BUFFERING="ad-buffering",Mt.AD_IMPRESSION="ad-impression",Mt.AD_DURATION_CHANGED="ad-duration-changed",Mt.AD_CLOSED="ad-closed",Mt.AD_LOADED="ad-loaded",Mt.ALL_ADS_COMPLETED="all-ads-completed",Mt.AD_LINEAR_CHANGED="ad-linear-changed",Mt.AD_METADATA="ad-metadata",Mt.AD_RECOVERABLE_ERROR="ad-recoverable-error",Mt.AD_ERROR="ad-error",Mt.AD_BREAK_READY="ad-break-ready",Mt.AD_INTERACTION="ad-interaction",Mt.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Mt.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Mt.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function lf(e,t,n,r,i){var o=this;this.u=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=i,this.j=null,this.h=new _e,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.u,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.14.10"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){QC(o,s)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){H1(o,s)}),this.h.D(this.i,"ended",function(){o.m.contentComplete()}),this.h.qa(this.i,"play",function(){o.F=!0})}lf.prototype.configure=function(e){this.o=e},lf.prototype.stop=function(){this.g&&this.g.stop(),this.u&&So(this.u)},lf.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function H1(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new ce("ad-error",t)),ff(e,null),e.l(new ce("ad-cue-points-changed",new Map().set("cuepoints",[])))}function QC(e,t){if(e.l(new ce("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new ce("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=v(r);for(var i=r.next();!i.done;i=r.next())t.push({start:i.value,end:null});e.l(new ce("ad-cue-points-changed",new Map().set("cuepoints",t)))}JC(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in S?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.qa(e.i,"play",function(){e.F=!0,e.g.start()})}catch{ff(e,null)}}function cf(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function JC(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new ce(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){H1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){G1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){G1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){ff(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){ff(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function G1(e,t){var n=t.getAd();n?(e.j=new Me(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new ce("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new ce("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):re("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function ff(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new ce("ad-content-resume-requested")),e.l(new ce("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function Ce(e,t,n,r,i,o){this.g=e,this.i=t,this.j=(this.h=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.A=n,this.o=r,this.m=i,this.u=o,this.B=t.overlay}p=Ce.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!0},p.hasCustomClick=function(){return!1},p.isUsingAnotherMediaElement=function(){return this.u},p.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return this.h&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},p.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},p.canSkipNow=function(){return this.h&&this.getTimeUntilSkippable()==0},p.skip=function(){this.canSkipNow()&&this.A()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.B==null},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.o},p.getPositionInSequence=function(){return this.m},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.i.id||""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return this.i.uri},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.g=null},D("shaka.ads.InterstitialAd",Ce),Ce.prototype.release=Ce.prototype.release,Ce.prototype.getPodIndex=Ce.prototype.getPodIndex,Ce.prototype.getTimeOffset=Ce.prototype.getTimeOffset,Ce.prototype.getMediaUrl=Ce.prototype.getMediaUrl,Ce.prototype.getAdvertiserName=Ce.prototype.getAdvertiserName,Ce.prototype.getCreativeAdId=Ce.prototype.getCreativeAdId,Ce.prototype.getAdId=Ce.prototype.getAdId,Ce.prototype.getVastMediaWidth=Ce.prototype.getVastMediaWidth,Ce.prototype.getVastMediaHeight=Ce.prototype.getVastMediaHeight,Ce.prototype.getVastMediaBitrate=Ce.prototype.getVastMediaBitrate,Ce.prototype.getDescription=Ce.prototype.getDescription,Ce.prototype.getTitle=Ce.prototype.getTitle,Ce.prototype.getPositionInSequence=Ce.prototype.getPositionInSequence,Ce.prototype.getSequenceLength=Ce.prototype.getSequenceLength,Ce.prototype.setMuted=Ce.prototype.setMuted,Ce.prototype.resize=Ce.prototype.resize,Ce.prototype.isLinear=Ce.prototype.isLinear,Ce.prototype.isMuted=Ce.prototype.isMuted,Ce.prototype.setVolume=Ce.prototype.setVolume,Ce.prototype.getVolume=Ce.prototype.getVolume,Ce.prototype.play=Ce.prototype.play,Ce.prototype.pause=Ce.prototype.pause,Ce.prototype.skip=Ce.prototype.skip,Ce.prototype.canSkipNow=Ce.prototype.canSkipNow,Ce.prototype.getTimeUntilSkippable=Ce.prototype.getTimeUntilSkippable,Ce.prototype.isSkippable=Ce.prototype.isSkippable,Ce.prototype.isPaused=Ce.prototype.isPaused,Ce.prototype.getRemainingTime=Ce.prototype.getRemainingTime,Ce.prototype.getMinSuggestedDuration=Ce.prototype.getMinSuggestedDuration,Ce.prototype.getDuration=Ce.prototype.getDuration,Ce.prototype.isUsingAnotherMediaElement=Ce.prototype.isUsingAnotherMediaElement,Ce.prototype.hasCustomClick=Ce.prototype.hasCustomClick,Ce.prototype.isClientRendering=Ce.prototype.isClientRendering,Ce.prototype.needsSkipUI=Ce.prototype.needsSkipUI;function ke(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}p=ke.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!0},p.hasCustomClick=function(){return!1},p.isUsingAnotherMediaElement=function(){return!1},p.getDuration=function(){return-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return-1},p.isPaused=function(){return!1},p.isSkippable=function(){return!1},p.getTimeUntilSkippable=function(){return 0},p.canSkipNow=function(){return!1},p.skip=function(){},p.pause=function(){},p.play=function(){},p.getVolume=function(){return 1},p.setVolume=function(){},p.isMuted=function(){return!1},p.isLinear=function(){return this.i},p.resize=function(){},p.setMuted=function(){},p.getSequenceLength=function(){return this.j},p.getPositionInSequence=function(){return this.h},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.g.id||""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return this.g.uri},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){},D("shaka.ads.InterstitialStaticAd",ke),ke.prototype.release=ke.prototype.release,ke.prototype.getPodIndex=ke.prototype.getPodIndex,ke.prototype.getTimeOffset=ke.prototype.getTimeOffset,ke.prototype.getMediaUrl=ke.prototype.getMediaUrl,ke.prototype.getAdvertiserName=ke.prototype.getAdvertiserName,ke.prototype.getCreativeAdId=ke.prototype.getCreativeAdId,ke.prototype.getAdId=ke.prototype.getAdId,ke.prototype.getVastMediaWidth=ke.prototype.getVastMediaWidth,ke.prototype.getVastMediaHeight=ke.prototype.getVastMediaHeight,ke.prototype.getVastMediaBitrate=ke.prototype.getVastMediaBitrate,ke.prototype.getDescription=ke.prototype.getDescription,ke.prototype.getTitle=ke.prototype.getTitle,ke.prototype.getPositionInSequence=ke.prototype.getPositionInSequence,ke.prototype.getSequenceLength=ke.prototype.getSequenceLength,ke.prototype.setMuted=ke.prototype.setMuted,ke.prototype.resize=ke.prototype.resize,ke.prototype.isLinear=ke.prototype.isLinear,ke.prototype.isMuted=ke.prototype.isMuted,ke.prototype.setVolume=ke.prototype.setVolume,ke.prototype.getVolume=ke.prototype.getVolume,ke.prototype.play=ke.prototype.play,ke.prototype.pause=ke.prototype.pause,ke.prototype.skip=ke.prototype.skip,ke.prototype.canSkipNow=ke.prototype.canSkipNow,ke.prototype.getTimeUntilSkippable=ke.prototype.getTimeUntilSkippable,ke.prototype.isSkippable=ke.prototype.isSkippable,ke.prototype.isPaused=ke.prototype.isPaused,ke.prototype.getRemainingTime=ke.prototype.getRemainingTime,ke.prototype.getMinSuggestedDuration=ke.prototype.getMinSuggestedDuration,ke.prototype.getDuration=ke.prototype.getDuration,ke.prototype.isUsingAnotherMediaElement=ke.prototype.isUsingAnotherMediaElement,ke.prototype.hasCustomClick=ke.prototype.hasCustomClick,ke.prototype.isClientRendering=ke.prototype.isClientRendering,ke.prototype.needsSkipUI=ke.prototype.needsSkipUI;function K1(e,t,n,r){var i=this;this.T=null,this.A=e,this.H=t,this.g=n,this.F=null,this.B=!0,this.h=this.g,this.i=r,this.W=new Set,this.G=new Set,this.C=new Map,this.L=new Map,this.j=new ee,Bp(this),this.I=new _e,this.l=new _e,this.K=!1,this.ea=this.m=this.u=this.o=null,this.fa=!1,this.O=-1,this.$=function(){if(!i.K&&i.o&&!i.H.Qa()){i.o=i.g.currentTime,i.u&&!i.u.pre&&!i.u.post&&i.o<i.u.startTime&&(i.u=null);var o=Ua(i);o&&df(i,o,1,1,Date.now())}},this.Z=function(){if(!(i.K||i.o||i.H.Qa())){i.o=i.g.currentTime;var o=Ua(i,!0);o&&df(i,o,1,1,Date.now())}},this.P=new ze(this.$),this.M=new ze(function(){var o,s,u,a,c,f,h,g,y,T,E;return b(function(x){switch(x.g){case 1:if(!i.G.size||i.o==null){x.s(0);break}if(o=i.H.m,o==zr||o==uf)return x.return();s=!1,u=Array.from(i.G),a=i.H.Ja(),c=v(u),f=c.next();case 3:if(f.done){x.s(5);break}if(h=f.value,h==i.u){x.s(4);break}if(g=h.endTime||h.startTime,!(1<=a.start-g)){y=h.startTime-i.o,0<y&&10>=y&&(!i.C.has(h)&&X1(h)&&i.C.set(h,i.j.preload(h.uri,null,h.mimeType||void 0)),z1(i,h)),x.s(4);break}if(!i.C.has(h)){x.s(7);break}return I(x,i.C.get(h),8);case 8:(T=x.h)&&T.destroy(),i.C.delete(h);case 7:q1(i,h),E=JSON.stringify(h),i.W.has(E)&&i.W.delete(E),i.G.delete(h),bp(i),h.overlay||(s=!0);case 4:f=c.next(),x.s(3);break;case 5:s&&hf(i),ae(x)}})})}p=K1.prototype,p.configure=function(e){this.T=e,Up(this)};function ZC(e){if(!e.fa&&e.G.size){if(e.I.D(e.g,"playing",e.Z),e.I.D(e.g,"timeupdate",e.Z),e.I.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!qd()){var t=e.g,n=function(){e.O!=-1&&(e.$(),e.O!=-1&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.P.ua(.025);e.M&&e.M.ua(1),e.fa=!0}}function bp(e){e.fa&&!e.G.size&&(e.I.Ka(e.g,"playing",e.Z),e.I.Ka(e.g,"timeupdate",e.Z),e.I.Ka(e.g,"ended",e.$),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.P&&e.P.stop(),e.M&&e.M.stop(),e.fa=!1)}function Up(e){if(e.A&&e.T&&!e.K){var t=e.T.supportsMultipleMediaElements,n=e.g;n.webkitSupportsFullscreen&&n.webkitDisplayingFullscreen&&(t=!1),e.B==t&&(e.B=!t,e.B?(e.h=e.g,e.F&&(e.F.parentElement&&e.A.removeChild(e.F),e.F=null)):(e.F||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.F=t),e.h=e.F))}}p.stop=function(){if(this.l&&this.l.Ra(),this.W.clear(),this.G.clear(),this.j.rf(),this.C.size){var e=Array.from(this.C.values());e=v(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.C.clear(),this.L.size)for(e=Array.from(this.L.keys()),e=v(e),t=e.next();!t.done;t=e.next())q1(this,t.value);this.L.clear(),this.j.detach(),this.K=!1,this.u=this.o=null,this.B=!0,this.h=this.g,this.F=null,Fp(this),bp(this),this.A&&So(this.A),this.m&&(this.m.stop(),this.m=null)},p.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.P&&(this.P.stop(),this.P=null),this.M&&(this.M.stop(),this.M=null),this.j.destroy()},p.Kf=function(){return this.j};function ek(e,t){var n;b(function(r){if(r.g==1)return Bp(e),I(r,ik(e,t),2);n=r.h,n.length?ba(e,n):re("Unsupported HLS interstitial",t),ae(r)})}function tk(e,t){var n=zt(t.eventNode,"OverlayEvent"),r=n.attributes.uri,i=n.attributes.mimeType,o=n.attributes.loop=="true",s=be(n,"z",Dn);if(r&&s!=0){var u={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920,y:1080}},a=zt(n,"Viewport"),c=zt(n,"TopLeft"),f=zt(n,"Size");if(a&&c&&f){if(u=be(a,"x",Dn),u==null||(a=be(a,"y",Dn),a==null))return;var h=be(c,"x",Dn);if(h==null||(c=be(c,"y",Dn),c==null))return;var g=be(f,"x",Dn);if(g==null||(f=be(f,"y",Dn),f==null))return;u={viewport:{x:u,y:a},topLeft:{x:h,y:c},size:{x:g,y:f}}}f=zt(n,"SqueezeCurrent"),n=null,f&&(f=be(f,"percentage",Zu))&&(n={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*f,y:1080*f}}),ba(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:r,mimeType:i,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:o,overlay:u,displayOnBackground:s==-1,currentVideo:n,background:null}])}}p.addAdUrlInterstitial=function(e){var t=this,n,r,i,o,s,u,a,c,f;return b(function(h){switch(h.g){case 1:return n={type:12},I(h,Vp(t,e,n),2);case 2:if(r=h.h,i=Ju(r,"VAST,vmap:VMAP"),!i)throw new j(2,10,10007);if(o=[],i.tagName=="VAST"){o=V1(i,t.o),h.s(3);break}if(i.tagName!="vmap:VMAP"){h.s(3);break}for(var g=[],y=v(lt(i,"vmap:AdBreak")),T=y.next();!T.done;T=y.next()){var E=T.value,x=E.attributes.timeOffset;x&&(T=null,x=="start"?T=0:x=="end"?T=1/0:T=Bs(x),(E=zt(E,"vmap:AdSource"))&&(E=zt(E,"vmap:AdTagURI"))&&(E=Qt(E))&&g.push({time:T,uri:E}))}s=v(g),u=s.next();case 5:if(u.done){h.s(3);break}return a=u.value,I(h,Vp(t,a.uri,n),8);case 8:if(c=h.h,f=Ju(c,"VAST"),!f)throw new j(2,10,10007);o.push.apply(o,J(V1(f,a.time))),u=s.next(),h.s(5);break;case 3:ba(t,o),ae(h)}})};function ba(e,t){var n,r,i,o,s,u,a,c;b(function(f){switch(f.g){case 1:n=!1,r=v(t),i=r.next();case 2:if(i.done){f.s(4);break}if(o=i.value,!o.uri){re("Missing URL in interstitial",o),f.s(3);break}if(o.mimeType){f.s(5);break}return ye(f,6),s=e.j.yb(),I(f,fs(o.uri,s,e.H.getConfiguration().streaming.retryParameters),8);case 8:o.mimeType=f.h,Oe(f,5);break;case 6:ve(f);case 5:if(u=o.id||JSON.stringify(o),e.W.has(u)){f.s(3);break}o.loop&&!o.overlay&&re("Loop is only supported in overlay interstitials",o),o.overlay||(n=!0),e.W.add(u),e.G.add(o),a=!1,o.pre&&e.o==null?a=!0:o.startTime!=0||o.canJump?e.o!=null&&(c=o.startTime-e.o,0<c&&10>=c&&(a=!0)):a=!0,a&&(!e.C.has(o)&&X1(o)&&e.C.set(o,e.j.preload(o.uri,null,o.mimeType||void 0)),z1(e,o));case 3:i=r.next(),f.s(2);break;case 4:n&&hf(e),ZC(e),ae(f)}})}function Ua(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var r=0,i=null;if(e.G.size&&e.o!=null){var o=e.g.ended,s=Array.from(e.G).sort(function(f,h){return h.startTime-f.startTime}),u=s;for(u=t?s.filter(function(f){return f.pre}):o?s.filter(function(f){return f.post}):s.filter(function(f){return!f.pre&&!f.post}),s=v(u),u=s.next();!u.done;u=s.next()){u=u.value;var a=!1;if(t)a=u.pre;else if(o)a=u.post;else if(!u.pre&&!u.post){var c=e.o-Math.round(1e3*u.startTime)/1e3;0<c&&(1>=c||!u.canJump)&&(a=!(n==null&&e.u&&!e.u.pre&&!e.u.post&&e.u.startTime>=u.startTime))}a&&(!e.u||u.startTime>=e.u.startTime)&&(r==(n||0)?i=u:i&&!u.canJump&&.001<Math.round(1e3*u.startTime)/1e3-Math.round(1e3*i.startTime)/1e3&&(i=u,r=0),r++)}}return i}function df(e,t,n,r,i,o){o=o===void 0?0:o,e.u=t,Up(e),!e.h.parentElement&&e.A&&e.A.appendChild(e.h),r==1&&n==1&&(n=Array.from(e.G).filter(function(s){return t.pre?s.pre==t.pre:t.post?s.post==t.post:.001>Math.abs(s.startTime-t.startTime)}).length),t.once&&(o++,e.G.delete(t),bp(e),t.overlay||hf(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?nk(e,t,n,r,o):re("Unsupported interstitial",t):e.B&&t.overlay?re("Unsupported interstitial",t):rk(e,t,n,r,i,o)}function nk(e,t,n,r,i){function o(){e.m&&(e.m.stop(),e.m=null),e.A.removeChild(a),Fp(e,t),e.i(new ce("ad-stopped"));var g=Ua(e,t.pre,r-i);g?(e.l.Ra(),df(e,g,n,++r,Date.now(),i)):e.K=!1}var s=t.overlay,u=t.mimeType=="text/html"?"iframe":"img",a=document.createElement(u);a.style.objectFit="contain",a.style.position="absolute",a.style.border="none",W1(e,t),e.i(new ce("ad-started",new Map().set("ad",new ke(t,n,r)))),u=="iframe"?a.src=t.uri:(a.src=t.uri,a.onerror=function(g){e.i(new ce("ad-error",new Map().set("originalEvent",g))),o()});var c=s.viewport,f=s.topLeft;s=s.size,c.x==0&&c.y==0?(a.width=t.overlay.size.x,a.height=t.overlay.size.y,a.style.bottom="10%",a.style.left="0",a.style.right="0",a.style.width="100%",t.overlay.size.y||u!="iframe"||(a.style.height="auto")):(a.style.height=s.y/c.y*100+"%",a.style.left=f.x/c.x*100+"%",a.style.top=f.y/c.y*100+"%",a.style.width=s.x/c.x*100+"%"),e.A.appendChild(a);var h=Date.now();e.m&&e.m.stop(),e.m=new ze(function(){t.playoutLimit&&(Date.now()-h)/1e3>t.playoutLimit?(e.i(new ce("ad-complete")),o()):t.endTime&&e.g.currentTime>t.endTime?(e.i(new ce("ad-complete")),o()):e.g.currentTime<t.startTime&&(e.i(new ce("ad-skipped")),o())}),t.playoutLimit&&!t.endTime?e.m.da(t.playoutLimit):t.endTime&&e.m.ua(.025),e.l.D(e.g,"seeked",function(){var g=e.g.currentTime;(g<t.startTime||t.endTime&&g>t.endTime)&&(e.m&&e.m.stop(),e.i(new ce("ad-skipped")),o())})}function rk(e,t,n,r,i,o){var s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P;b(function(k){switch(k.g){case 1:if(s=Date.now(),e.K=!0,!e.B||r!=1){k.s(2);break}return e.i(new ce("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),u=new pt,a=function(O){return b(function(U){if(U.g==1)return O.state!="detach"?U.s(0):qd()?I(U,new Promise(function(W){return new ze(W).da(.1)}),3):U.s(3);u.resolve(),e.l.Ka(e.H,"onstatechange",a),ae(U)})},e.l.D(e.H,"onstatechange",a),I(k,u,2);case 2:return W1(e,t),e.B||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,c=t.overlay.viewport,f=t.overlay.topLeft,h=t.overlay.size,e.h.style.height=h.y/c.y*100+"%",e.h.style.left=f.x/c.x*100+"%",e.h.style.top=f.y/c.y*100+"%",e.h.style.width=h.x/c.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),g=!1,y=function(){if(!e.B&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var O=Date.now();e.g.currentTime+=(O-i)/1e3,i=O}},T=function(O){var U,W;return b(function(B){if(B.g==1){if(y(),U=Ua(e,t.pre,r-o),O&&t.groupId)for(;U&&U.groupId==t.groupId;)r++,U=Ua(e,t.pre,r-o);return e.m&&(!t.groupId||U&&U.groupId!=t.groupId)&&(e.m.stop(),e.m=null),Fp(e,t),U&&!U.overlay?B.s(2):(t.post&&(e.o=null,e.u=null),e.B?I(B,e.j.detach(),4):I(B,e.j.kc(),4))}B.g!=2&&(e.B&&(W=t.resumeOffset,W==null&&(W=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.o||0):(Date.now()-i)/1e3),e.i(new ce("ad-content-resume-requested",new Map().set("offset",W)))),e.i(new ce("ad-stopped")),e.l.Ra(),e.K=!1,e.B?hf(e):(e.h.style.display="none",y(),e.g.ended||e.g.play())),Up(e),U&&(e.i(new ce("ad-stopped")),e.l.Ra(),df(e,U,n,++r,i,o)),ae(B)})},E=function(O){return b(function(U){return g?U.return():(g=!0,e.i(new ce("ad-error",new Map().set("originalEvent",O))),I(U,T(!1),0))})},x=function(){return b(function(O){if(O.g==1)return g?O.return():(g=!0,I(O,T(!1),2));e.i(new ce("ad-complete")),ae(O)})},e.ea=function(){return b(function(O){return g?O.return():(g=!0,e.i(new ce("ad-skipped")),I(O,T(!0),0))})},A=new Ce(e.h,t,e.ea,n,r,!e.B),e.B||(A.setMuted(e.g.muted),A.setVolume(e.g.volume)),e.i(new ce("ad-started",new Map().set("ad",A))),(M=A.canSkipNow())&&e.i(new ce("ad-skip-state-changed")),e.l.qa(e.j,"error",E),e.l.D(e.h,"timeupdate",function(){if(e.h.duration){var O=A.canSkipNow();M!=O&&0<A.getRemainingTime()&&0<A.getDuration()&&e.i(new ce("ad-skip-state-changed")),M=O}}),e.l.qa(e.j,"firstquartile",function(){y(),e.i(new ce("ad-first-quartile"))}),e.l.qa(e.j,"midpoint",function(){y(),e.i(new ce("ad-midpoint"))}),e.l.qa(e.j,"thirdquartile",function(){y(),e.i(new ce("ad-third-quartile"))}),e.l.qa(e.j,"complete",x),e.l.D(e.h,"play",function(){e.i(new ce("ad-resumed"))}),e.l.D(e.h,"pause",function(){var O=e.j.getConfiguration();e.h.currentTime>=O.playRangeEnd?x():e.i(new ce("ad-paused"))}),e.l.D(e.h,"volumechange",function(){e.h.muted?e.i(new ce("ad-muted")):e.i(new ce("ad-volume-changed"))}),ye(k,4),Bp(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(L=t.endTime-t.startTime,0<L&&e.j.configure("playRangeEnd",L)),t.playoutLimit&&!e.m&&(e.m=new ze(function(){e.ea()}).da(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),I(k,e.j.Lb(e.h),6);case 6:return e.C.has(t)?I(k,e.C.get(t),10):I(k,e.j.load(t.uri,null,t.mimeType||void 0),8);case 10:return _=k.h,e.C.delete(t),_?I(k,e.j.load(_),8):I(k,e.j.load(t.uri,null,t.mimeType||void 0),8);case 8:e.h.play(),F=(Date.now()-s)/1e3,e.i(new ce("ads-loaded",new Map().set("loadTime",F))),e.B&&e.g.play(),t.overlay&&(e.l.D(e.g,"seeking",function(){var O=e.g.currentTime-t.startTime;.1<Math.abs(O-e.h.currentTime)&&(e.h.currentTime=O)}),e.l.D(e.g,"seeked",function(){var O=e.g.currentTime;(O<t.startTime||t.endTime&&O>t.endTime)&&e.ea()})),Oe(k,0);break;case 4:if(P=ve(k),!e.K)return k.return();E(P),ae(k)}})}function W1(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var r=!0,i=[],o=n.topLeft.x/n.viewport.x*100;0<o&&100>=o&&(i.push("translateX("+o+"%)"),r=!1),o=n.topLeft.y/n.viewport.y*100,0<o&&100>=o&&(i.push("translateY("+o+"%)"),r=!1),o=n.size.x/n.viewport.x,1>o&&i.push("scaleX("+o+")"),n=n.size.y/n.viewport.y,1>o&&i.push("scaleY("+n+")"),i.length&&(e.g.style.transform=i.join(" ")),r&&(e.g.style.transition="transform 250ms")}e.A&&(e.A.style.pointerEvents="none",t.background&&(e.A.style.background=t.background)),e.F&&(e.F.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Fp(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.A&&(e.A.style.pointerEvents="",!t||t.background)&&(e.A.style.background=""),e.F&&(e.F.style.background="")}function ik(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re,ge,st,qe,Ke,We,ot,Ve,$e;return b(function(Ne){switch(Ne.g){case 1:if(n=[],!t||(r=t.values.find(function(He){return He.key=="X-ASSET-URI"}),i=t.values.find(function(He){return He.key=="X-ASSET-LIST"}),!r&&!i))return Ne.return(n);if(o=null,(s=t.values.find(function(He){return He.key=="ID"}))&&(o=s.data),u=o==null?Math.floor(10*t.startTime)/10:t.startTime,(a=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(a=o==null?Math.floor(10*t.endTime)/10:t.endTime),c=t.values.find(function(He){return He.key=="X-RESTRICT"}),h=f=!0,c&&c.data&&(g=c.data,f=!g.includes("SKIP"),h=!g.includes("JUMP")),y=f?0:null,(T=t.values.find(function(He){return He.key=="X-ENABLE-SKIP-AFTER"}))&&(E=T.data,y=parseFloat(E),isNaN(y)&&(y=f?0:null)),x=null,(A=t.values.find(function(He){return He.key=="X-ENABLE-SKIP-FOR"}))&&(M=A.data,x=parseFloat(M),isNaN(y)&&(x=null)),L=null,(_=t.values.find(function(He){return He.key=="X-RESUME-OFFSET"}))&&(F=_.data,L=parseFloat(F),isNaN(L)&&(L=null)),P=null,(k=t.values.find(function(He){return He.key=="X-PLAYOUT-LIMIT"}))&&(O=k.data,P=parseFloat(O),isNaN(P)&&(P=null)),B=W=U=!1,(K=t.values.find(function(He){return He.key=="CUE"}))&&(X=K.data,U=X.includes("ONCE"),W=X.includes("PRE"),B=X.includes("POST")),q=!1,(Q=t.values.find(function(He){return He.key=="X-TIMELINE-OCCUPIES"}))?(Y=Q.data,q=Y.includes("RANGE")):!_&&e.H.U()&&(q=!W&&!B),r){if(ne=r.data,!ne)return Ne.return(n);n.push({id:o,groupId:null,startTime:u,endTime:a,uri:ne,mimeType:null,isSkippable:f,skipOffset:y,skipFor:x,canJump:h,resumeOffset:L,playoutLimit:P,once:U,pre:W,post:B,timelineRange:q,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),Ne.s(2);break}if(!i){Ne.s(2);break}return ue=i.data,ue?(ye(Ne,4),Re={type:11},I(Ne,Vp(e,ue,Re),6)):Ne.return(n);case 6:for(ge=Ne.h,st=Rt(ge),qe=JSON.parse(st),(Ke=qe["SKIP-CONTROL"])&&(We=Ke["ENABLE-SKIP-AFTER"],typeof We=="number"&&(y=parseFloat(We),isNaN(We)&&(y=f?0:null)),ot=Ke["ENABLE-SKIP-FOR"],typeof ot=="number"&&(x=parseFloat(ot),isNaN(ot)&&(x=null))),Ve=0;Ve<qe.ASSETS.length;Ve++)$e=qe.ASSETS[Ve],$e.URI&&n.push({id:o+"_shaka_asset_"+Ve,groupId:o,startTime:u,endTime:a,uri:$e.URI,mimeType:null,isSkippable:f,skipOffset:y,skipFor:x,canJump:h,resumeOffset:L,playoutLimit:P,once:U,pre:W,post:B,timelineRange:q,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});Oe(Ne,2);break;case 4:ve(Ne);case 2:return Ne.return(n)}})}function hf(e){for(var t=[],n=v(e.G),r=n.next(),i={};!r.done;i={$b:void 0},r=n.next())r=r.value,r.overlay||(i.$b={start:r.startTime,end:null},r.pre?(i.$b.start=0,i.$b.end=null):r.post?(i.$b.start=-1,i.$b.end=null):r.timelineRange&&(i.$b.end=r.endTime),t.find(function(o){return function(s){return o.$b.start==s.start&&o.$b.end==s.end}}(i))||t.push(i.$b));e.i(new ce("ad-cue-points-changed",new Map().set("cuepoints",t)))}function Bp(e){e.j.configure(e.H.Wg()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),Av(e.H.yb(),e.j.yb())}function Vp(e,t,n){var r,i,o;return b(function(s){return s.g==1?(r=nn([t],ni()),i=e.H.yb().request(7,r,n),I(s,i.promise,2)):(o=s.h,s.return(o.data))})}function X1(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function z1(e,t){if(!(e.L.has(t)||e.T&&!e.T.allowPreloadOnDomElements)){var n=function(o){var s=document.createElement("link");return s.rel="preload",s.href=o,s.as="image",document.head.appendChild(s),s},r=[];if(t.background){var i=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);i&&r.push(n(i[2]))}t.mimeType.startsWith("image/")&&r.push(n(t.uri)),e.L.set(t,r)}}function q1(e,t){if(e.L.has(t)){var n=e.L.get(t);n=v(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.parentNode.removeChild(r);e.L.delete(t)}}function Ae(e,t,n,r,i){this.h=e,this.j=Bs(this.h.skipOffset),this.g=i,this.i=t,this.l=n,this.o=r,this.m=!1}p=Ae.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!1},p.hasCustomClick=function(){return!1},p.isUsingAnotherMediaElement=function(){return!1},p.getDuration=function(){return this.h.durationInSeconds},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return typeof this.j=="number"},p.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.o},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.l?this.l:1},p.getPositionInSequence=function(){return this.i?this.i:1},p.getTitle=function(){return this.h.adTitle},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.h.adId},p.getCreativeAdId=function(){return this.h.creativeId},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.l=this.i=this.g=this.h=null},D("shaka.ads.MediaTailorAd",Ae),Ae.prototype.release=Ae.prototype.release,Ae.prototype.getPodIndex=Ae.prototype.getPodIndex,Ae.prototype.getTimeOffset=Ae.prototype.getTimeOffset,Ae.prototype.getMediaUrl=Ae.prototype.getMediaUrl,Ae.prototype.getAdvertiserName=Ae.prototype.getAdvertiserName,Ae.prototype.getCreativeAdId=Ae.prototype.getCreativeAdId,Ae.prototype.getAdId=Ae.prototype.getAdId,Ae.prototype.getVastMediaWidth=Ae.prototype.getVastMediaWidth,Ae.prototype.getVastMediaHeight=Ae.prototype.getVastMediaHeight,Ae.prototype.getVastMediaBitrate=Ae.prototype.getVastMediaBitrate,Ae.prototype.getDescription=Ae.prototype.getDescription,Ae.prototype.getTitle=Ae.prototype.getTitle,Ae.prototype.getPositionInSequence=Ae.prototype.getPositionInSequence,Ae.prototype.getSequenceLength=Ae.prototype.getSequenceLength,Ae.prototype.setMuted=Ae.prototype.setMuted,Ae.prototype.resize=Ae.prototype.resize,Ae.prototype.isLinear=Ae.prototype.isLinear,Ae.prototype.isMuted=Ae.prototype.isMuted,Ae.prototype.setVolume=Ae.prototype.setVolume,Ae.prototype.getVolume=Ae.prototype.getVolume,Ae.prototype.play=Ae.prototype.play,Ae.prototype.pause=Ae.prototype.pause,Ae.prototype.skip=Ae.prototype.skip,Ae.prototype.canSkipNow=Ae.prototype.canSkipNow,Ae.prototype.getTimeUntilSkippable=Ae.prototype.getTimeUntilSkippable,Ae.prototype.isSkippable=Ae.prototype.isSkippable,Ae.prototype.isPaused=Ae.prototype.isPaused,Ae.prototype.getRemainingTime=Ae.prototype.getRemainingTime,Ae.prototype.getMinSuggestedDuration=Ae.prototype.getMinSuggestedDuration,Ae.prototype.getDuration=Ae.prototype.getDuration,Ae.prototype.isUsingAnotherMediaElement=Ae.prototype.isUsingAnotherMediaElement,Ae.prototype.hasCustomClick=Ae.prototype.hasCustomClick,Ae.prototype.isClientRendering=Ae.prototype.isClientRendering,Ae.prototype.needsSkipUI=Ae.prototype.needsSkipUI;function Fa(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.P=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.M=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.o=new _e}Fa.prototype.stop=function(){for(var e=v(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ka(t.target,t.type,t.listener);yu(this),this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.A=null,this.j=[],this.M=[],this.F.clear()},Fa.prototype.release=function(){this.stop(),this.o&&this.o.release()},Fa.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(sk(this,this.G,this.O),this.O=!1)},Fa.prototype.getCuePoints=function(){for(var e=[],t=v(this.j),n=t.next();!n.done;n=t.next()){n=v(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function ok(e,t,n){var r,i,o,s,u,a,c,f,h,g,y,T;b(function(E){if(E.g==1)return r={type:7},i=nn([t],ni()),i.method="POST",n&&(o=JSON.stringify(n),i.body=Hr(o)),s=e.K.request(7,i,r),ye(E,2),I(E,s.promise,4);if(E.g!=2){if(u=E.h,a=Rt(u.data),c=JSON.parse(a),c.manifestUrl&&c.trackingUrl)f=new Vt(t),h=new Vt(c.trackingUrl),e.G=f.resolve(h).toString(),g=Date.now()/1e3,y=g-e.P,e.i(new ce("ads-loaded",new Map().set("loadTime",y))),T=new Vt(c.manifestUrl),e.l.resolve(f.resolve(T).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return Oe(E,0)}if(ve(E),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,E.return();e.l.resolve(e.H),e.l=null,ae(E)})}function sk(e,t,n){var r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M;b(function(L){if(L.g==1)return r={type:8},i=nn([t],ni()),o=e.K.request(7,i,r),ye(L,2),I(L,o.promise,4);if(L.g!=2){if(s=L.h,u=[],a=Rt(s.data),c=JSON.parse(a),0<c.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(c.avails)){for(e.j=c.avails,f=v(e.j),h=f.next();!h.done;h=f.next())for(g=h.value,y=v(g.nonLinearAdsList),T=y.next();!T.done;T=y.next())for(E=T.value,x=v(E.nonLinearAdList),A=x.next();!A.done;A=x.next())M=A.value,uk(e,M);u=e.getCuePoints(),e.i(new ce("ad-cue-points-changed",new Map().set("cuepoints",u)))}}else e.j.length&&e.i(new ce("ad-cue-points-changed",new Map().set("cuepoints",u))),yu(e),e.j=[];return n&&(e.I||0<u.length)&&ak(e),Oe(L,0)}ve(L),ae(L)})}function uk(e,t){var n,r,i,o,s,u,a,c;b(function(f){if(f.g==1)return!t.staticResource||(n=Y1(t),e.F.get(n))?f.return():(r={type:9},i=nn([t.staticResource],ni()),o=e.K.request(7,i,r),ye(f,2),e.F.set(n,[]),I(f,o.promise,4));if(f.g!=2)return s=f.h,u=Rt(s.data),a=JSON.parse(u),c=a.apps,e.F.set(n,c),Oe(f,0);ve(f),e.F.delete(n),ae(f)})}function Y1(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function ak(e){Q1(e),e.I||($1(e),e.o.D(e.h,"seeked",function(){$1(e)}),e.o.D(e.h,"ended",function(){yu(e)})),e.o.D(e.h,"timeupdate",function(){Q1(e)})}function $1(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,i=v(e.j),o=i.next();!o.done;o=i.next()){o=o.value;for(var s=v(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,!r)u.startTimeInSeconds<t&&(r=u,n=o);else if(u.startTimeInSeconds<t&&u.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=u,n=o;break}}n&&r&&!e.M.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function Q1(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,i=r.startTimeInSeconds+.5*r.durationInSeconds,o=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),Pn(e,"firstQuartile")):t>=i&&!e.u.includes("midpoint")?(e.u.push("midpoint"),Pn(e,"midpoint")):t>=o&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),Pn(e,"thirdQuartile")),r=e.g.getRemainingTime(),i=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<i&&Pn(e,"skipStateChanged"),0<i&&(0>=r||r>i)&&yu(e)}if(!e.g||!e.g.isLinear()){e:for(r=v(e.j),i=r.next();!i.done&&(i=i.value,!(e.g&&e.g.isLinear()));i=r.next())for(o=0;o<i.ads.length;o++){var s=i.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.M.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=u;break e}yu(e),e.L=i,e.g=new Ae(s,o+1,i.ads.length,!0,e.h),e.C=s,o===0&&Pn(e,"breakStart"),J1(e);break}}if(!e.g){for(r=v(e.j),i=r.next();!i.done&&(i=i.value,!e.g);i=r.next())for(o=0;o<i.nonLinearAdsList.length;o++)if(s=i.nonLinearAdsList[o],s.nonLinearAdList.length){u=i.startTimeInSeconds;var a=e.F.get(Y1(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){yu(e),u=e,a=v(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,c.data.source.length){var f=document.createElement("img");f.src=c.data.source[0].url,f.style.top=(c.placeholder.top||0)+"%",f.style.height=100-(c.placeholder.top||0)+"%",f.style.left=(c.placeholder.left||0)+"%",f.style.maxWidth=100-(c.placeholder.left||0)+"%",f.style.objectFit="contain",f.style.position="absolute",u.B.appendChild(f)}e.L=i,e.g=new Ae(s,o+1,i.ads.length,!1,e.h),e.C=s,o===0&&Pn(e,"breakStart"),J1(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function yu(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.M.push(e.C.adId);var t=e.g.m;t!==void 0&&t?Pn(e,"skip"):Pn(e,"complete"),t=v(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ka(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Pn(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function J1(e){var t=!1;e.h.paused?t=!0:(Pn(e,"impression"),Pn(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Pn(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Pn(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Pn(e,"impression"),Pn(e,"start"),t=!1):Pn(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Pn(e,"pause")}});for(var n=v(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function Pn(e,t){var n=e.C.trackingEvents.find(function(o){return o.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(o){return o.eventType==t})),n){var r={type:10};n=v(n.beaconUrls);for(var i=n.next();!i.done;i=n.next())(i=i.value)&&i!=""&&(i=nn([i],ni()),i.method="POST",e.K.request(7,i,r))}switch(t){case"impression":e.i(new ce("ad-impression"));break;case"start":e.i(new ce("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new ce("ad-muted"));break;case"unmute":e.i(new ce("ad-volume-changed"));break;case"resume":e.i(new ce("ad-resumed"));break;case"pause":e.i(new ce("ad-paused"));break;case"firstQuartile":e.i(new ce("ad-first-quartile"));break;case"midpoint":e.i(new ce("ad-midpoint"));break;case"thirdQuartile":e.i(new ce("ad-third-quartile"));break;case"complete":e.i(new ce("ad-complete")),e.i(new ce("ad-stopped"));break;case"skip":e.i(new ce("ad-skipped")),e.i(new ce("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new ce("ad-skip-state-changed"))}}function De(e,t){this.g=e,this.i=null,this.h=t}p=De.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!1},p.hasCustomClick=function(){return!0},p.isUsingAnotherMediaElement=function(){return!1},p.getDuration=function(){return this.i?this.i.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},p.isPaused=function(){return this.h.paused},p.isSkippable=function(){return this.g.isSkippable()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.h.currentTime+=this.getRemainingTime()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.play()},p.getVolume=function(){return this.h.volume},p.setVolume=function(e){this.h.volume=e},p.isMuted=function(){return this.h.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.h.muted=e},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.i=this.g=null},D("shaka.ads.ServerSideAd",De),De.prototype.release=De.prototype.release,De.prototype.getPodIndex=De.prototype.getPodIndex,De.prototype.getTimeOffset=De.prototype.getTimeOffset,De.prototype.getMediaUrl=De.prototype.getMediaUrl,De.prototype.getAdvertiserName=De.prototype.getAdvertiserName,De.prototype.getCreativeAdId=De.prototype.getCreativeAdId,De.prototype.getAdId=De.prototype.getAdId,De.prototype.getVastMediaWidth=De.prototype.getVastMediaWidth,De.prototype.getVastMediaHeight=De.prototype.getVastMediaHeight,De.prototype.getVastMediaBitrate=De.prototype.getVastMediaBitrate,De.prototype.getDescription=De.prototype.getDescription,De.prototype.getTitle=De.prototype.getTitle,De.prototype.getPositionInSequence=De.prototype.getPositionInSequence,De.prototype.getSequenceLength=De.prototype.getSequenceLength,De.prototype.setMuted=De.prototype.setMuted,De.prototype.resize=De.prototype.resize,De.prototype.isLinear=De.prototype.isLinear,De.prototype.isMuted=De.prototype.isMuted,De.prototype.setVolume=De.prototype.setVolume,De.prototype.getVolume=De.prototype.getVolume,De.prototype.play=De.prototype.play,De.prototype.pause=De.prototype.pause,De.prototype.skip=De.prototype.skip,De.prototype.canSkipNow=De.prototype.canSkipNow,De.prototype.getTimeUntilSkippable=De.prototype.getTimeUntilSkippable,De.prototype.isSkippable=De.prototype.isSkippable,De.prototype.isPaused=De.prototype.isPaused,De.prototype.getRemainingTime=De.prototype.getRemainingTime,De.prototype.getMinSuggestedDuration=De.prototype.getMinSuggestedDuration,De.prototype.getDuration=De.prototype.getDuration,De.prototype.isUsingAnotherMediaElement=De.prototype.isUsingAnotherMediaElement,De.prototype.hasCustomClick=De.prototype.hasCustomClick,De.prototype.isClientRendering=De.prototype.isClientRendering,De.prototype.needsSkipUI=De.prototype.needsSkipUI;function Z1(e,t,n,r){var i=this;this.u=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new _e,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new ce("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){lk(i,o)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.B.length?i.j.resolve(i.B):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),i.m=new De(o,i.l),i.A&&(i.m.i=i.A),i.i(new ce("ad-started",new Map().set("ad",i.m))),i.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.u.removeAttribute("ad-active");var o=i.l.currentTime;i.o&&i.o>o&&(i.l.currentTime=i.o,i.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){i.A=o.getStreamData().adProgressData,i.m&&(i.m.i=i.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.i(new ce("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.i(new ce("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.i(new ce("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.i(new ce("ad-complete")),i.i(new ce("ad-stopped")),i.u.removeAttribute("ad-active"),i.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.i(new ce("ad-skipped")),i.i(new ce("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=v(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});i.C=o,i.i(new ce("ad-cue-points-changed",new Map().set("cuepoints",o)))})}p=Z1.prototype,p.configure=function(){},p.stop=function(){this.B="",this.o=null,this.C=[]},p.release=function(){this.stop(),this.h&&this.h.release()},p.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},p.getCuePoints=function(){return this.C};function lk(e,t){e.i(new ce("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function pe(){gt.call(this),this.h=this.i=this.j=this.g=null,this.m=new B1,this.o=navigator.language,this.l=null}St(pe,gt),p=pe.prototype,p.setLocale=function(e){this.o=e},p.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},p.initInterstitial=function(e,t,n){var r=this;this.g&&this.g.release(),this.g=new K1(e,t,n,function(i){return pf(r,i)}),this.g.configure(this.l)},p.initClientSide=function(e,t,n){var r=this;if(!S.google||!google.ima||!google.ima.AdsLoader)throw new j(2,10,1e4);this.j&&this.j.release(),this.j=new lf(e,t,this.o,n,function(i){return pf(r,i)}),this.j.configure(this.l)},p.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),gt.prototype.release.call(this)},p.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new ce("ad-stopped")),this.dispatchEvent(new ce("ad-content-attach-requested")),this.m=new B1},p.requestClientSideAds=function(e){if(!this.j)throw new j(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},p.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new j(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},p.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new Fa(e,t,n,function(i){return pf(r,i)})},p.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new j(1,10,10005);var r=this.i;return n=n===void 0?"":n,r.l?e=Promise.reject(new j(1,10,10004)):(r.l=new pt,ok(r,e,t),r.H=n||"",r.P=Date.now()/1e3,e=r.l),e},p.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new j(1,10,10005);var t=this.i;t.G=e,t.i(new ce("ads-loaded",new Map().set("loadTime",0)))},p.initServerSide=function(e,t){var n=this;if(!S.google||!google.ima||!google.ima.dai)throw new j(2,10,10002);this.h&&this.h.release(),this.h=new Z1(e,t,this.o,function(r){return pf(n,r)}),this.h.configure(this.l)},p.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new j(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&re('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.14.10",n=this.h,n.j?e=Promise.reject(new j(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new pt,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},p.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new j(1,10,10003);(e.mpt||e.mpv)&&re('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.14.10",this.h.g.replaceAdTagParameters(e)},p.getServerSideCuePoints=function(){return tt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},p.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},p.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:YC(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},p.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},p.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},p.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},p.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},p.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&ek(this.g,n))},p.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var r=n.schemeIdUri;if(r=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||r=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",r=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||r)){for(var i=n.startTime,o=n.endTime,s=null,u=0,a,c=v(n.eventNode.children),f=c.next();!f.done;f=c.next())if(f=f.value,f.tagName=="AlternativeMPD"){if(f=f.attributes.uri){a=f;break}}else if(f.tagName=="InsertPresentation"||f.tagName=="ReplacePresentation"){var h=f.attributes.url;if(h){a=h,(c=be(f,"maxDuration",Dn))&&(s=c/n.timescale),(c=be(f,"returnOffset",Dn))&&(u=c/n.timescale),t&&u&&(o=i+u);break}}a&&ba(e,[{id:n.id,groupId:null,startTime:i,endTime:o,uri:a,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:r?u:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!r,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else(r=="urn:mpeg:dash:event:2012"||r=="urn:scte:dash:scte214-events")&&n.eventNode&&zt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&tk(this.g,n))}},p.addCustomInterstitial=function(e){if(!this.g)throw new j(1,10,10006);ba(this.g,[e])},p.addAdUrlInterstitial=function(e){if(!this.g)throw new j(1,10,10006);return this.g.addAdUrlInterstitial(e)},p.getInterstitialPlayer=function(){if(!this.g)throw new j(1,10,10006);return this.g.Kf()};function pf(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}D("shaka.ads.AdManager",pe),pe.prototype.getInterstitialPlayer=pe.prototype.getInterstitialPlayer,pe.prototype.addAdUrlInterstitial=pe.prototype.addAdUrlInterstitial,pe.prototype.addCustomInterstitial=pe.prototype.addCustomInterstitial,pe.prototype.onDASHInterstitialMetadata=pe.prototype.onDASHInterstitialMetadata,pe.prototype.onHLSInterstitialMetadata=pe.prototype.onHLSInterstitialMetadata,pe.prototype.onCueMetadataChange=pe.prototype.onCueMetadataChange,pe.prototype.onHlsTimedMetadata=pe.prototype.onHlsTimedMetadata,pe.prototype.onDashTimedMetadata=pe.prototype.onDashTimedMetadata,pe.prototype.onManifestUpdated=pe.prototype.onManifestUpdated,pe.prototype.getStats=pe.prototype.getStats,pe.prototype.getCuePoints=pe.prototype.getCuePoints,pe.prototype.getServerSideCuePoints=pe.prototype.getServerSideCuePoints,pe.prototype.replaceServerSideAdTagParameters=pe.prototype.replaceServerSideAdTagParameters,pe.prototype.requestServerSideStream=pe.prototype.requestServerSideStream,pe.prototype.initServerSide=pe.prototype.initServerSide,pe.prototype.addMediaTailorTrackingUrl=pe.prototype.addMediaTailorTrackingUrl,pe.prototype.requestMediaTailorStream=pe.prototype.requestMediaTailorStream,pe.prototype.initMediaTailor=pe.prototype.initMediaTailor,pe.prototype.updateClientSideAdsRenderingSettings=pe.prototype.updateClientSideAdsRenderingSettings,pe.prototype.requestClientSideAds=pe.prototype.requestClientSideAds,pe.prototype.onAssetUnload=pe.prototype.onAssetUnload,pe.prototype.release=pe.prototype.release,pe.prototype.initClientSide=pe.prototype.initClientSide,pe.prototype.initInterstitial=pe.prototype.initInterstitial,pe.prototype.configure=pe.prototype.configure,pe.prototype.setLocale=pe.prototype.setLocale,pe.ADS_LOADED="ads-loaded",pe.AD_STARTED="ad-started",pe.AD_FIRST_QUARTILE="ad-first-quartile",pe.AD_MIDPOINT="ad-midpoint",pe.AD_THIRD_QUARTILE="ad-third-quartile",pe.AD_COMPLETE="ad-complete",pe.AD_STOPPED="ad-stopped",pe.AD_SKIPPED="ad-skipped",pe.AD_VOLUME_CHANGED="ad-volume-changed",pe.AD_MUTED="ad-muted",pe.AD_PAUSED="ad-paused",pe.AD_RESUMED="ad-resumed",pe.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",pe.CUEPOINTS_CHANGED="ad-cue-points-changed",pe.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",pe.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",pe.AD_CLICKED="ad-clicked",pe.AD_PROGRESS="ad-progress",pe.AD_BUFFERING="ad-buffering",pe.AD_IMPRESSION="ad-impression",pe.AD_DURATION_CHANGED="ad-duration-changed",pe.AD_CLOSED="ad-closed",pe.AD_LOADED="ad-loaded",pe.ALL_ADS_COMPLETED="all-ads-completed",pe.AD_LINEAR_CHANGED="ad-linear-changed",pe.AD_METADATA="ad-metadata",pe.AD_RECOVERABLE_ERROR="ad-recoverable-error",pe.AD_ERROR="ad-error",pe.AD_BREAK_READY="ad-break-ready",pe.AD_INTERACTION="ad-interaction",pe.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",pe.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",pe.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",af=function(){return new pe};function eS(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof ce){var r={};for(i in n)(t=n[i])&&typeof t=="object"?i=="detail"&&(r[i]=t):i in Event||(r[i]=t);return r}if(n instanceof Error){var i=new Set(["name","message","stack"]);for(r in n)i.add(r);for(r=v(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())i.add(t.value);for(r={},i=v(i),t=i.next();!t.done;t=i.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(i={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=v(Vi(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,i.start.push(r.start),i.end.push(t);n=i}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Hp(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=ck(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function ck(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var tS="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),fk="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Gp=["loop","playbackRate"],dk=["pause","play"],Kp=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("getImageTracks",2).set("getThumbnails",2).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),Wp=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getTextTracks",2).set("getVariantTracks",2),nS=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),rS=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],iS=[["isTextTrackVisible","setTextTrackVisibility"]],hk="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure configurationForLowLatency getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),pk=["attach","attachCanvas","detach","load","unload"];function Xp(e,t,n,r,i,o,s){var u=this;this.G=e,this.K=s,this.l=new ze(t),this.L=n,this.u=!1,this.A=r,this.F=i,this.M=o,this.i=this.m=!1,this.I="",this.o=null,this.B=function(){return zp(u)},this.C=function(a,c){switch(a=Hp(c),a.type){case"event":var f=a.targetName,h=Ev(a.event);u.A(f,h);break;case"update":f=a.update;for(h in f){a=u.g[h]||{};for(var g in f[h])a[g]=f[h][g]}u.u&&(u.L(),u.u=!1);break;case"asyncComplete":if(h=a.id,g=a.error,a=u.h.get(h),u.h.delete(h),a)if(g){h=new j(g.severity,g.category,g.code);for(f in g)h[f]=g[f];a.reject(h)}else a.resolve()}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,Va.add(this)}p=Xp.prototype,p.destroy=function(){return Va.delete(this),qp(this),qr&&sS(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.i=this.m=!1,this.C=this.B=this.j=this.h=this.g=this.o=null,Promise.resolve()},p.qb=function(){return this.i},p.cg=function(){return this.I},p.init=function(){if(this.G.length)if(S.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.sb();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=v(Va),r=n.next();!r.done;r=n.next()){r=r.value;var i=t;r.j=new pt,r.u=!0,gf(r,i)}},function(t){for(var n=v(Va),r=n.next();!r.done;r=n.next())r=r.value,mf=t=="available",r.l.sb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),mf&&this.l.da(mk),(e=qr)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new pt,this.u=!0,gf(this,e)):qr=null}else S.__onGCastApiAvailable!==uS&&(yf=S.__onGCastApiAvailable||null,S.__onGCastApiAvailable=uS)},p.kg=function(e){this.o=e,this.i&&Ba(this,{type:"appData",appData:this.o})},p.cast=function(){var e=this;return b(function(t){if(!e.m)throw new j(1,8,8e3);if(!mf)throw new j(1,8,8001);if(e.i)throw new j(1,8,8002);return e.j=new pt,chrome.cast.requestSession(function(n){return gf(e,n)},function(n){return oS(e,n)}),I(t,e.j,0)})};function gk(e){e.i&&chrome.cast.requestSession(function(t){return gf(e,t)},function(t){return oS(e,t)})}p.Pc=function(){if(this.i){if(qp(this),qr){sS(this);try{qr.stop(function(){},function(){})}catch{}qr=null}zp(this)}},p.get=function(e,t){var n=this;if(e=="video"){if(dk.includes(t))return function(){return n.ph.apply(n,[e,t].concat(J(en.apply(0,arguments))))}}else if(e=="player"){if(nS.has(t)&&!this.get("player","isLive")())return function(){};if(hk.includes(t))return function(){return n.ph.apply(n,[e,t].concat(J(en.apply(0,arguments))))};if(pk.includes(t))return function(){return n.rj.apply(n,[e,t].concat(J(en.apply(0,arguments))))};if(Kp.has(t)||Wp.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},p.set=function(e,t,n){this.g[e][t]=n,Ba(this,{type:"set",targetName:e,property:t,value:n})};function gf(e,t){var n=e.M();qr=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),zp(e),Ba(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function oS(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new j(2,8,n,t))}p.ph=function(e,t){Ba(this,{type:"call",targetName:e,methodName:t,args:en.apply(2,arguments)})},p.rj=function(e,t){var n=en.apply(2,arguments),r=new pt,i=this.H.toString();this.H++,this.h.set(i,r);try{Ba(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(o){r.reject(o)}return r};function sS(e){var t=qr;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function zp(e){var t=qr?qr.status=="connected":!1;if(e.i&&!t){e.F();for(var n in e.g)e.g[n]={};qp(e)}e.i=t,e.I=t?qr.receiver.friendlyName:"",e.l.sb()}function qp(e){if(e.h)for(var t=v(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var r=e.h.get(n);e.h.delete(n),r.reject(new j(1,7,7e3))}}function Ba(e,t){t=eS(t);var n=qr;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Ze)}catch(r){throw t=new j(2,8,8005,r),n=new ce("error",new Map().set("detail",t)),e.A("player",n),e.Pc(),t}}var mk=.02,mf=!1,qr=null,yf=null,Va=new Set;function uS(e){if(yf?S.__onGCastApiAvailable=yf:delete S.__onGCastApiAvailable,yf=null,e)for(var t=v(Va),n=t.next();!n.done;n=t.next())n.value.init();typeof S.__onGCastApiAvailable=="function"&&S.__onGCastApiAvailable(e)}function Jt(e,t,n,r){r=r===void 0?!1:r,gt.call(this);var i=this;this.i=e,this.h=t,this.m=this.o=this.l=this.u=this.j=null,this.C=n,this.B=r,this.A=new Map,this.g=null,S.chrome?(this.g=new Xp(n,function(){return cS(i)},function(){return fS(i)},function(o,s){return hS(i,o,s)},function(){return dS(i)},function(){return lS(i)},r),yk(this)):(this.j=this.i,this.u=this.h)}St(Jt,gt),p=Jt.prototype,p.destroy=function(e){return this.g&&e&&this.g.Pc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,gt.prototype.release.call(this),Promise.all(e)},p.Ni=function(){return this.j},p.Kf=function(){return this.u},p.Yh=function(){return this.g?this.g.m&&mf:!1},p.qb=function(){return this.g?this.g.qb():!1},p.cg=function(){return this.g?this.g.cg():""},p.cast=function(){var e=this;return b(function(t){return t.g==1?e.g?I(t,e.g.cast(),2):t.return():e.h?I(t,e.h.kc(),0):t.return()})},p.kg=function(e){this.g&&this.g.kg(e)},p.Gj=function(){this.g&&gk(this.g)},p.Pc=function(){this.g&&this.g.Pc()},p.Zh=function(e,t){t=t===void 0?!1:t;var n=this;return b(function(r){if(r.g==1)return e==n.C&&t==n.B||(n.C=e,n.B=t,!n.g)?r.return():(n.g.Pc(),I(r,n.g.destroy(),2));n.g=null,n.g=new Xp(e,function(){return cS(n)},function(){return fS(n)},function(i,o){return hS(n,i,o)},function(){return dS(n)},function(){return lS(n)},t),n.g.init(),ae(r)})};function yk(e){e.g.init(),e.m=new _e;for(var t=v(tS),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(o){e.g.qb()||(o=Ev(o),e.l.dispatchEvent(o))});for(var r in cc)e.m.D(e.h,cc[r],function(o){e.g.qb()||e.o.dispatchEvent(o)});e.j={},t={};for(var i in e.i)t={wd:t.wd},t.wd=i,Object.defineProperty(e.j,t.wd,{configurable:!1,enumerable:!0,get:function(o){return function(){return Sk(e,o.wd)}}(t),set:function(o){return function(s){var u=o.wd;e.g.qb()?e.g.set("video",u,s):e.i[u]=s}}(t)});e.u={},aS(e,function(o){Object.defineProperty(e.u,o,{configurable:!1,enumerable:!0,get:function(){return Tk(e,o)}})}),vk(e),e.l=new gt,e.l.Te=e.j,e.o=new gt,e.o.Te=e.u}function vk(e){var t=new Map;aS(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function aS(e,t){function n(a){return a=="constructor"||typeof r[a]!="function"?!1:!i.has(a)}var r=e.h,i=new Set,o;for(o in r)n(o)&&(i.add(o),t(o,r[o]));for(e=Object.getPrototypeOf(r),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=v(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(i.add(u),t(u,r[u]));e=Object.getPrototypeOf(e)}}function lS(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Qc(),startTime:null};e.i.pause();for(var n=v(Gp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=v(rS),r=n.next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(n=v(iS),r=n.next();!r.done;r=n.next())i=r.value,r=i[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function cS(e){var t=new ce("caststatuschanged");e.dispatchEvent(t)}function fS(e){var t=new ce(e.j.paused?"pause":"play");e.l.dispatchEvent(t)}function dS(e){for(var t=v(rS),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var s;(r=e.g.get("player","getTextTracks")())&&r.length&&(s=r.find(function(c){return c.active}));var u=e.g.get("player","isTextTrackVisible")();i&&(e.i.autoplay=!1,t=e.h.load(i,n));var a={};for(n=v(Gp),r=n.next();!r.done;r=n.next())r=r.value,a[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var c=v(Gp),f=c.next();!f.done;f=c.next())f=f.value,e.i[f]=a[f];for(c=v(iS),f=c.next();!f.done;f=c.next()){var h=f.value;f=h[1],h=e.g.get("player",h[0])(),e.h[f](h)}e.h.Ah(u),s&&e.h.jg(s.language,s.roles,s.forced),e.i.autoplay=o,i&&e.i.play()}},function(c){c=new Map().set("detail",c),c=new ce("error",c),e.h.dispatchEvent(c)})}function Sk(e,t){if(t=="addEventListener")return function(r,i,o){return e.l.addEventListener(r,i,o)};if(t=="removeEventListener")return function(r,i,o){return e.l.removeEventListener(r,i,o)};if(e.g.qb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.qb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Tk(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,i){return e.o.addEventListener(n,r,i)};if(t=="removeEventListener")return function(n,r,i){return e.o.removeEventListener(n,r,i)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.yb()};if(t=="getDrmEngine")return function(){return e.h.C};if(t=="getAdManager")return function(){return e.h.Rg()};if(t=="setVideoContainer")return function(n){return e.h.Dh(n)};if(e.g.qb()){if(t=="getManifest"||t=="drmInfo")return function(){return re(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return re(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return re(t+"() does not work while casting!"),[]}}return e.g.qb()&&Object.keys(e.g.g.video).length==0&&(Kp.has(t)||Wp.has(t))||!e.g.qb()?e.h[t].bind(e.h):e.g.get("player",t)}function hS(e,t,n){e.g.qb()&&(t=="video"?e.l.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}D("shaka.cast.CastProxy",Jt),Jt.prototype.changeReceiverId=Jt.prototype.Zh,Jt.prototype.forceDisconnect=Jt.prototype.Pc,Jt.prototype.suggestDisconnect=Jt.prototype.Gj,Jt.prototype.setAppData=Jt.prototype.kg,Jt.prototype.cast=Jt.prototype.cast,Jt.prototype.receiverName=Jt.prototype.cg,Jt.prototype.isCasting=Jt.prototype.qb,Jt.prototype.canCast=Jt.prototype.Yh,Jt.prototype.getPlayer=Jt.prototype.Kf,Jt.prototype.getVideo=Jt.prototype.Ni,Jt.prototype.destroy=Jt.prototype.destroy;function xn(e,t,n,r){gt.call(this);var i=this;this.g=e,this.h=t,this.j=new _e,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(o){return o},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.u=this.l=null,this.C=new ze(function(){Yp(i)}),wk(this)}St(xn,gt),p=xn.prototype,p.isConnected=function(){return this.G},p.Ui=function(){return this.o},p.Dj=function(e){this.i=e},p.ci=function(){this.i=null},p.Ej=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},p.Cj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},p.Bj=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var e=this,t,n;return b(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.u=null,gt.prototype.release.call(e),I(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),ae(r)})};function wk(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return pS(e)},t.onSenderDisconnected=function(){return pS(e)},t.onSystemVolumeChanged=function(){var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&Xi(e,{type:"update",update:{video:{volume:i.level,muted:i.muted}}},e.l),Xi(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(i){return Ak(e,i)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(i){return Ek(e,i)},t.start(),t=v(tS);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(i){return gS(e,"video",i)});for(var r in cc)e.j.D(e.h,cc[r],function(i){return gS(e,"player",i)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,vu(e)}),e.j.D(e.g,"playing",function(){e.o=!1,vu(e)}),e.j.D(e.g,"pause",function(){vu(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,vu(e)}),e.j.D(e.g,"ended",function(){new ze(function(){e.g&&e.g.ended&&(e.o=!0,vu(e))}).da(Mk)})}function pS(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,vu(e)}function vu(e){var t;b(function(n){if(n.g==1)return I(n,Promise.resolve(),2);if(!e.h)return n.return();t=new ce("caststatuschanged"),e.dispatchEvent(t),mS(e)||zi(e),ae(n)})}function xk(e,t,n){var r,i,o,s,u,a,c,f,h,g;b(function(y){switch(y.g){case 1:for(r in t.player)i=t.player[r],e.h[r](i);return e.F(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ye(y,5),I(y,e.h.load(t.manifest,t.startTime),7)):I(y,Promise.resolve(),3);case 7:Oe(y,3);break;case 5:return s=ve(y),u=new Map().set("detail",s),a=new ce("error",u),e.h&&e.h.dispatchEvent(a),y.return();case 3:if(!e.h)return y.return();for(c in t.video)f=t.video[c],e.g[c]=f;for(h in t.playerAfterLoad)g=t.playerAfterLoad[h],e.h[h](g);e.g.autoplay=o,t.manifest&&(e.g.play(),zi(e)),ae(y)}})}function gS(e,t,n){e.h&&(Yp(e),Xi(e,{type:"event",targetName:t,event:n},e.l))}function Yp(e){e.C.da(Ik);for(var t={video:{},player:{}},n=v(fk),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];e.h.U()&&nS.forEach(function(i,o){e.m%i==0&&(t.player[o]=e.h[o]())}),Kp.forEach(function(i,o){e.m%i==0&&(t.player[o]=e.h[o]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Xi(e,{type:"update",update:t},e.l),Wp.forEach(function(i,o){e.m%i==0&&(i={player:{}},i.player[o]=e.h[o](),Xi(e,{type:"update",update:i},e.l))}),e.B&&(e.m+=1),mS(e)}function mS(e){return e.A&&(e.g.duration||e.h.U())?($p(e),e.A=!1,!0):!1}function $p(e,t){var n={contentId:e.h.Qc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),zi(e,t===void 0?0:t,n)}function Ek(e,t){var n=Hp(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,xk(e,n.initState,n.appData),Yp(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),i=="volume"){t.setSystemVolumeLevel(n);break}else if(i=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][i]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,r=="player"&&i=="load"&&(e.m=0,e.B=!1);var o=n.id,s=t.senderId;t=e.H[r],n=t[i].apply(t,n.args),r=="player"&&i=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return yS(e,s,o,null)},function(u){return yS(e,s,o,u)})}}function Ak(e,t){var n=Hp(t.data);switch(n.type){case"PLAY":e.g.play(),zi(e);break;case"PAUSE":e.g.pause(),zi(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),zi(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),zi(e));break;case"STOP":e.h.kc().then(function(){e.h&&zi(e)});break;case"GET_STATUS":$p(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var i=e.g.volume,o=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),i==e.g.volume&&o==e.g.muted||zi(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,i=e.I(t.contentId),o=n.autoplay||!0,e.F(t.customData),o&&(e.g.autoplay=!0),e.h.load(i,r).then(function(){e.h&&$p(e)}).catch(function(s){var u="LOAD_FAILED";s.category==7&&s.code==7e3&&(u="LOAD_CANCELLED"),Xi(e,{requestId:Number(n.requestId),type:u},e.u)});break;default:Xi(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function yS(e,t,n,r){e.h&&Xi(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function Xi(e,t,n,r){e.G&&(e=eS(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function zi(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?Ck:e.h.Qf()?Dk:e.g.paused?Rk:kk,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),Xi(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.u)}D("shaka.cast.CastReceiver",xn),xn.prototype.destroy=xn.prototype.destroy,xn.prototype.setContentArtist=xn.prototype.Bj,xn.prototype.setContentImage=xn.prototype.Cj,xn.prototype.setContentTitle=xn.prototype.Ej,xn.prototype.clearContentMetadata=xn.prototype.ci,xn.prototype.setContentMetadata=xn.prototype.Dj,xn.prototype.isIdle=xn.prototype.Ui,xn.prototype.isConnected=xn.prototype.isConnected;var Ik=.5,Mk=5,Ck="IDLE",kk="PLAYING",Dk="BUFFERING",Rk="PAUSED";function vS(e,t,n,r,i){if(r>=i)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(_){return _!=null&&_.g.trim()!=""})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(_){return _!=null&&_.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,c="white",f="black",h=Qp(r,i,u,a,c,f);o<=s;o++){for(var g=n[o],y=-1,T=-1,E=0;E<g.length;E++)if(g[E]!=null&&g[E].g.trim()!==""){y=E;break}for(E=g.length-1;0<=E;E--)if(g[E]!=null&&g[E].g.trim()!==""){T=E;break}if(y===-1||T===-1)g=SS(r,i),e.nestedCues.push(g);else{for(;y<=T;y++)if(E=g[y]){var x=E.l,A=E.i,M=E.j,L=E.h;(x!=u||A!=a||M!=c||L!=f)&&(h.payload&&e.nestedCues.push(h),h=Qp(r,i,x,A,M,L),u=x,a=A,c=M,f=L),h.payload+=E.g}else h.payload+=" ";h.payload&&e.nestedCues.push(h),o!==s&&(h=SS(r,i),e.nestedCues.push(h)),h=Qp(r,i,u,a,c,f)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Qp(e,t,n,r,i,o){return e=new Et(e,t,""),n&&e.textDecoration.push(_i),r&&(e.fontStyle=Hs),e.color=i,e.backgroundColor=o,e}function SS(e,t){return e=new Et(e,t,""),e.lineBreak=!0,e}function TS(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function Jp(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.A=null,Ha(this)}function vf(e,t,n){var r="CC"+((e.C<<1|e.B)+1),i=new Et(t,n,"");i.lineInterpretation=1;var o=ES.get(e.g);return o&&(i.line=o),e.u!=null&&e.A!=null&&(i.position=10+Math.min(70,10*e.u)+2.5*e.A),(t=vS(i,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(o=ES.get(e.g+3-t.cue.nestedCues.length))&&(i.line=o),t}function Ha(e){qi(e,0,15),e.g=1}function Su(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=xS.has(n)?xS.get(n):String.fromCharCode(n);break;case 1:r=Pk.get(n);break;case 2:e.i[e.g].pop(),r=Lk.get(n);break;case 3:e.i[e.g].pop(),r=_k.get(n)}r&&e.i[e.g].push(new TS(r,e.m,e.j,e.o,e.l))}}function wS(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(o){return o});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(o){return o})}function qi(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var xS=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Pk=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Lk=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),_k=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),ES=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Sf(e,t){this.h=0,this.o=new Jp(e,t),this.i=new Jp(e,t),this.g=this.j=new Jp(e,t),this.l=0,this.m=null}function Zp(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==3&&e.h!==4&&(i=vf(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,qi(n,0,15),n=e.j,n.g=0<n.h?n.h:0,qi(n,0,15),r.g=15),e.h=3,r.h=t,i}function AS(e){e.h=1,e.g=e.j,e.g.h=0}function IS(e){fe("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var Nk="black green blue cyan red yellow magenta black".split(" "),MS="white green blue cyan red yellow magenta white_italics".split(" ");function eg(e,t){this.I=t,this.M=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.u="black",tg(this)}function tg(e){e.i=[];for(var t=0;16>t;t++)e.i.push(ng())}function ng(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function xo(e,t){CS(e)&&(e.i[e.h][e.g]=new TS(t,e.C,e.A,e.u,e.B),e.g++)}function CS(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}eg.prototype.isVisible=function(){return this.l};function jk(e){for(var t=0,n=1;16>n;n++,t++)e.i[t]=e.i[n];for(n=0;1>n;n++,t++)e.i[t]=ng()}function ps(e,t,n){var r=new Et(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":gi;var i=r.region;switch(e.I&&(i.id+="svc"+e.I),i.id+="win"+e.M,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.H,i.viewportAnchorY=e.L,i.viewportAnchorUnits=e.K?Jn:2,e.G){case 0:i.regionAnchorX=0,i.regionAnchorY=0;break;case 1:i.regionAnchorX=50,i.regionAnchorY=0;break;case 2:i.regionAnchorX=100,i.regionAnchorY=0;break;case 3:i.regionAnchorX=0,i.regionAnchorY=50;break;case 4:i.regionAnchorX=50,i.regionAnchorY=50;break;case 5:i.regionAnchorX=100,i.regionAnchorY=50;break;case 6:i.regionAnchorX=0,i.regionAnchorY=100;break;case 7:i.regionAnchorX=50,i.regionAnchorY=100;break;case 8:i.regionAnchorX=100,i.regionAnchorY=100}return(n=vS(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}eg.prototype.display=function(){this.l=!0};function Ok(){this.i=[],this.h=null,this.g=0}function bk(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Ga(e.h)),e.h=null,e.g=0))}function Ga(e){this.g=0,this.h=e}Ga.prototype.ta=function(){return this.g<this.h.length},Ga.prototype.Ba=function(){return this.g};function rn(e){if(!e.ta())throw new j(2,2,3e3);return e.h[e.g++]}Ga.prototype.skip=function(e){if(this.g+e>this.h.length)throw new j(2,2,3e3);this.g+=e},Ga.prototype.rh=function(e){if(0>this.g-e)throw new j(2,2,3e3);this.g-=e};function Uk(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Fk(e,t,n,r){if(!e.g)return[];if(n==24)return n=rn(t).value,r=rn(t).value,n=function(o){return o.map(function(s){return("0"+(s&255).toString(16)).slice(-2)}).join("")}([n,r]),xo(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var i=null;switch(n){case 8:!CS(t)||0>=t.g&&0>=t.h||(0>=t.g?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(i=ps(t,r,e.i)),t.h+1>=t.o?jk(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(i=ps(t,r,e.i)),t.i[t.h]=ng(),t.g=0;break;case 12:t.isVisible()&&(i=ps(t,r,e.i)),tg(t),t.h=0,t.g=0}return i?[i]:[]}function Bk(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=rn(t).value,t=[],n=v(Ka(e,n));for(var i=n.next();!i.done;i=n.next()){if(i=e.h[i.value],i.isVisible()){var o=ps(i,r,e.i);o&&t.push(o)}tg(i)}return t}if(n===137)for(t=rn(t).value,t=v(Ka(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.display();else{if(n===138){for(n=rn(t).value,t=null,n=v(Ka(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=ps(i,r,e.i)),i.l=!1;return t?[t]:[]}if(n===139){for(n=rn(t).value,t=null,n=v(Ka(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()?t=ps(i,r,e.i):i.j=r,i.l=!i.l;return t?[t]:[]}if(n===140)return t=rn(t).value,kS(e,t,r);if(n===143)return r=kS(e,255,r),DS(e),r;if(n===144)t.skip(1),r=rn(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=rn(t).value,n=rn(t).value,t.skip(1),e.g&&(t=RS((n&48)>>4,(n&12)>>2,n&3),e.g.B=RS((r&48)>>4,(r&12)>>2,r&3),e.g.u=t);else if(n===146)r=rn(t).value,t=rn(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=rn(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){n=(n&15)-8,i=e.h[n]!==null,i||(o=new eg(n,e.i),o.j=r,e.h[n]=o),r=rn(t).value,o=rn(t).value;var s=rn(t).value,u=rn(t).value,a=rn(t).value;t=rn(t).value,i&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.u="black"),t=e.h[n],t.l=0<(r&32),t.L=o&127,t.H=s,t.G=(u&240)>>4,t.K=0<(o&128),t.o=(u&15)+1,t.m=(a&63)+1,e.g=e.h[n]}}}return[]}function Ka(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function kS(e,t,n){var r=[];t=v(Ka(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=e.h[i];o.isVisible()&&(o=ps(o,n,e.i))&&r.push(o),e.h[i]=null}return r}function DS(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function RS(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],Vk[e<<2|t<<1|n]}var PS=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Vk="black blue green cyan red magenta yellow white".split(" ");function Tu(){this.h=[],this.g=[],this.i=new Ok,this.l=0,this.m=new Map([["CC1",new Sf(0,0)],["CC2",new Sf(0,1)],["CC3",new Sf(1,0)],["CC4",new Sf(1,1)]]),this.u=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,rg(this)}Tu.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,rg(this),e=v(this.j.values());for(var t=e.next();!t.done;t=e.next())DS(t.value)};function rg(e){e.o=0,e.u=0;for(var t=v(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Ha(n.i),Ha(n.j),Ha(n.o);e.B=!0}Tu.prototype.extract=function(e,t){if(this.B){for(var n=v(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new At(e,0),!(8>e.getLength())&&e.X()===181&&e.ma()===49&&e.S()===1195456820&&e.X()===3&&(n=e.X(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var i=e.X(),o=(i&4)>>2,s=e.X(),u=e.X();o&&(i&=3,i===0||i===1?this.h.push({pts:t,type:i,mb:s,Mb:u,order:this.h.length}):(this.g.push({pts:t,type:i,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},Tu.prototype.decode=function(){function e(i,o){return i.pts-o.pts||i.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=v(this.h),r=n.next();!r.done;r=n.next())(r=Hk(this,r.value))&&t.push(r);for(n=v(this.g),r=n.next();!r.done;r=n.next())bk(this.i,r.value);for(n=v(this.i.i),r=n.next();!r.done;r=n.next())r=Gk(this,r.value),t.push.apply(t,J(r));return this.i.i=[],this.h=[],this.g=[],t};function Hk(e,t){var n=t.type;if((t.mb&112)===16){var r=t.mb>>3&1;n===0?e.o=r:e.u=r}if(r="CC"+((n<<1|(n?e.u:e.o))+1),n=e.m.get(r),t.mb===255&&t.Mb===255||!t.mb&&!t.Mb||!LS(t.mb)||!LS(t.Mb))return 45<=++e.l&&rg(e),null;e.l=0,t.mb&=127,t.Mb&=127;var i=t.mb;if(1<=i&&15>=i||!t.mb&&!t.Mb)return null;if(i=null,(t.mb&112)===16)e:{if(e.A.add(r),r=t.mb,e=t.Mb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1],r="white",i=!1;var o=null,s=95<e?e-96:e-64;13>=s?r=MS[Math.floor(s/2)]:15>=s?i=!0:o=Math.floor((s-16)/2),e=(e&1)===1,n.h!==4&&(s=n.g,n.h===3&&t!==s.g&&(n=1+t-s.h,wS(s,n,1+s.g-s.h,s.h),qi(s,0,n-1),qi(s,t+1,15-t)),s.g=t,s.m=e,s.j=i,s.l=r,s.u=o,s.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Su(n.g,0,32),r=!1,t=MS[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",(r&7)===0&&(t=Nk[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)Su(n.g,1,e);else if((r&246)===18&&(e&224)===32)Su(n.g,r&1?3:2,e);else{if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Mb){case 32:AS(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=Zp(n,2,e);break;case 38:r=Zp(n,3,e);break;case 39:r=Zp(n,4,e);break;case 40:Su(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ha(n.o),IS(n);break;case 43:IS(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=vf(t,n.l,e)),qi(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=vf(t,n.l,e),i=t.g-t.h+1,wS(t,i-1,i,t.h),qi(t,0,i-1),qi(t,t.g,15-t.g),n.l=e);break;case 46:qi(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=vf(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,AS(n),n.l=e,r=t}i=r;break e}(r==23||r==31)&&33<=e&&35>=e&&(n.g.A=e-32)}i=null}else e=t.Mb,Su(n.g,0,t.mb),Su(n.g,0,e);return i}function Gk(e,t){var n=[];try{for(;t.ta();){var r=rn(t).value,i=(r&224)>>5,o=r&31;if(i===7&&o!=0&&(i=rn(t).value&63),i!=0){e.A.add("svc"+i),e.j.has(i)||e.j.set(i,new Uk(i));for(var s=e.j.get(i),u=t.Ba();t.Ba()-u<o;){i=s;var a=t,c=rn(a),f=c.value,h=c.pts;if(f===16){var g=rn(a);f=f<<16|g.value}if(0<=f&&31>=f)var y=Fk(i,a,f,h);else if(128<=f&&159>=f)y=Bk(i,a,f,h);else{if(4096<=f&&4127>=f)i=a,a=f&255,8<=a&&15>=a?i.skip(1):16<=a&&23>=a?i.skip(2):24<=a&&31>=a&&i.skip(3);else if(4224<=f&&4255>=f)i=a,a=f&255,128<=a&&135>=a?i.skip(4):136<=a&&143>=a&&i.skip(5);else if(32<=f&&127>=f)a=f,i.g&&(a===127?xo(i.g,""):xo(i.g,String.fromCharCode(a)));else if(160<=f&&255>=f)i.g&&xo(i.g,String.fromCharCode(f));else if(4128<=f&&4223>=f){if(a=f&255,i.g)if(PS.has(a)){var T=PS.get(a);xo(i.g,T)}else xo(i.g,"_")}else 4256<=f&&4351>=f&&i.g&&((f&255)!=160?xo(i.g,"_"):xo(i.g,"[CC]"));y=[]}n.push.apply(n,J(y))}}}}catch(E){if(E instanceof j&&E.code===3e3)fe("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw E}return n}function LS(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}Tu.prototype.getStreams=function(){return Array.from(this.A)},D("shaka.cea.CeaDecoder",Tu),Os=function(){return new Tu};function _S(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(J(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var i=0;e[r]==255;)i+=255,r++;i+=e[r++],n==4&&t.push(e.subarray(r,r+i)),r+=i}return t}function Tf(){this.j=new Map,this.i=this.h=0,this.g=ig}Tf.prototype.init=function(e){function t(o){o=o.name,wf.has(o)&&(n.g=wf.get(o))}var n=this,r=[],i=[];if(new mt().box("moov",Fe).box("mvex",Fe).R("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.S(),s=s.S(),n.h=o,n.i=s}).box("trak",Fe).R("tkhd",function(o){var s=o.reader;o=o.version,o==1?(s.skip(8),s.skip(8)):(s.skip(4),s.skip(4));var u=s.S();o==1?s.skip(8):s.skip(4),s.skip(4),s.skip(8),s.skip(2),s.skip(2),s.skip(2),s.skip(2),s.skip(36),s.ma(),s.ma(),s.ma(),s.ma(),r.push(u)}).box("mdia",Fe).R("mdhd",function(o){o=Tc(o.reader,o.version),i.push(o.timescale)}).box("minf",Fe).box("stbl",Fe).R("stsd",Fi).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",tr).box("sinf",Fe).box("frma",function(o){o=Oh(o.reader).codec,wf.has(o)&&(n.g=wf.get(o))}).parse(e,!0),!r.length||!i.length||r.length!=i.length)throw new j(2,2,2010);this.g==ig&&re("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(o,s){n.j.set(o,i[s])})},Tf.prototype.parse=function(e){var t=this;if(this.g==ig)return[];var n=[],r=0,i=[];return new mt().box("moof",function(o){r=o.start,i=[],Fe(o)}).box("traf",function(o){i.push({baseMediaDecodeTime:null,ld:t.h,md:t.i,mh:[],timescale:9e4}),Fe(o)}).R("trun",function(o){var s=i[i.length-1];o=wc(o.reader,o.version,o.flags),s.mh.push(o)}).R("tfhd",function(o){var s=i[i.length-1];o=vc(o.reader,o.flags),s.ld=o.ld||t.h,s.md=o.md||t.i,o=o.trackId,t.j.has(o)&&(s.timescale=t.j.get(o))}).R("tfdt",function(o){var s=i[i.length-1];o=Sc(o.reader,o.version),s.baseMediaDecodeTime=o.baseMediaDecodeTime}).box("mdat",function(o){for(var s=r-o.start-8,u=o.reader.Ba(),a=v(i),c=a.next();!c.done;c=a.next()){if(c=c.value,c.baseMediaDecodeTime===null)throw re("Unable to find base media decode time for CEA captions!"),new j(2,2,2010);o.reader.seek(u),Kk(t,o.reader,c.baseMediaDecodeTime,c.timescale,c.ld,c.md,s,c.mh,n)}}).parse(e,!1),n};function Kk(e,t,n,r,i,o,s,u,a){var c=0,f=o,h=u.map(function(T){return T.hg});for(h=[].concat.apply([],J(h)),h.length&&(f=h[0].sampleSize||o),t.skip(s+u[0].qf);t.ta();){s=t.S();var g=t.X(),y=null;switch(y=!1,u=1,e.g){case Wa:y=g&31,y=y==6;break;case Xa:u=2,t.skip(1),y=g>>1&63,y=y==39||y==40;break;case za:u=2,t.skip(1),y=g>>1&63,y=y==23||y==24;break;default:return}if(y)for(g=0,c<h.length&&(g=h[c].Be||0),g=(n+g)/r,u=v(_S(t.Db(s-u))),y=u.next();!y.done;y=u.next())a.push({packet:y.value,pts:g});else try{t.skip(s-u)}catch{break}f-=s+4,f==0&&(n=c<h.length?n+(h[c].ig||i):n+i,c++,c<h.length?f=h[c].sampleSize||o:f=o)}}D("shaka.cea.Mp4CeaParser",Tf);var ig=0,Wa=1,Xa=2,za=3,wf=new Map().set("avc1",Wa).set("avc3",Wa).set("dvav",Wa).set("dva1",Wa).set("hev1",Xa).set("hvc1",Xa).set("dvh1",Xa).set("dvhe",Xa).set("vvc1",za).set("vvi1",za).set("dvc1",za).set("dvi1",za);nh("video/mp4",function(){return new Tf});function xf(){this.g=null}xf.prototype.init=function(){},xf.prototype.parse=function(e){this.g?this.g.clearData():this.g=new It;var t=[];if(e=Le(e),!nu(e))return t;e=this.g.parse(e);var n=e.od(),r=e.fe();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=v(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var i=v(_S(r.data)),o=i.next();!o.done;o=i.next())t.push({packet:o.value,pts:r.time});return t},D("shaka.cea.TsCeaParser",xf),nh("video/mp2t",function(){return new xf});function Wk(e){var t=0,n=Un(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,(i&1)!=0||i+e>n.byteLength){n=[];break e}var o=Le(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function NS(e){return e=Ir(Qt(e)),e=Wk(e).filter(function(t){return t.type===Xk})[0],e?(e=ao(e.value,!0),(e=qo(e,"WRMHEADER"))?e:null):null}function Ef(e){try{var t=NS(e);if(t)e:{for(var n=v(ti(t,"DATA")),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.children)for(var o=v(i.children),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.tagName=="LA_URL"){var a=Qt(u);break e}}}a=""}else a="";return a}catch{return""}}var Xk=1;function jS(e,t,n){var r=Yk(e),i=null;e=[];var o=[],s=null,u=new Set(r.map(function(c){return c.keyId}));u.delete(null);var a="cenc";if(1<u.size)throw new j(2,4,4010);if(!t){if(o=r.filter(function(c){return c.cd=="urn:mpeg:dash:sea:2012"}),1<o.length)throw new j(2,4,4050);o.length&&(s=Qk(o[0])),(o=r.find(function(c){return c.cd=="urn:mpeg:dash:mp4protection:2011"}))&&o.encryptionScheme&&(a=o.encryptionScheme),o=r.filter(function(c){return c.cd=="urn:mpeg:dash:mp4protection:2011"?(i=c.init||i,!1):c.cd!="urn:mpeg:dash:sea:2012"}),o.length&&(e=qk(i,a,o,n,u),e.length==0&&(e=[lo("",a,i)]))}if(r.length&&!s&&(t||!o.length))for(e=[],t=v(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(lo(n,a,i));if(u=Array.from(u)[0]||null)for(a=v(e),t=a.next();!t.done;t=a.next())for(t=v(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=u;return{Lg:u,Rk:i,drmInfos:e,ef:s,Qg:!0}}function zk(e,t,n,r){var i=jS(e,n,r);if(t.Qg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=i.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=i.drmInfos),t.Qg=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return i.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),t.drmInfos.length==0))throw new j(2,4,4008);return i.Lg||t.Lg}function Af(e){var t=Kr(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=Qt(t)))return t;if((t=Kr(e.node,"urn:microsoft:playready","pro"))&&Qt(t))return Ef(t);if((e=Kr(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=Qt(e))){t=Ir(e),e=8,t=Un(t);var n=t.getUint8(e);return e+=20,0<n&&(e+=4+16*t.getUint32(e)),e=Le(t,e+4),e=$l(e),e=qo("<pro>"+e+"</pro>"),Ef(e)}return""}function qk(e,t,n,r,i){var o=[];n=v(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=r[s.cd];if(u){var a;if((a=Kr(s.node,"urn:microsoft:playready","pro"))&&Qt(a)){a=Qt(a),a=Ir(a);var c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);a=[{initData:gc(a,c,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else a=null;if(c=null,s.cd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){c=s;var f=i;if(f.size==0)c=null;else{var h=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),g=new Uint8Array([]);c=[{initData:gc(g,h,f,1),initDataType:"cenc",keyId:c.keyId}]}}a=lo(u,t,s.init||e||a||c),(u=Jk.get(u))&&(a.licenseServerUri=u(s)),o.push(a)}}return o}function Yk(e){var t=[];e=v(e);for(var n=e.next();!n.done;n=e.next())(n=$k(n.value))&&t.push(n);return t}function $k(e){var t=e.attributes.schemeIdUri,n=Pi(e,"urn:mpeg:cenc:2013","default_KID"),r=Gy(e,"urn:mpeg:cenc:2013","pssh").map(hr),i=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new j(2,4,4009);var o=[];try{o=r.map(function(s){return{initDataType:"cenc",initData:Ir(s),keyId:null}})}catch{throw new j(2,4,4007)}return{node:e,cd:t,keyId:n,init:0<o.length?o:null,encryptionScheme:i}}function Qk(e){if(!S.crypto||!S.crypto.subtle)throw re("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new j(2,4,4042);var t=Kr(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new j(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new j(2,4,4051);if(t=Kr(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new j(2,4,4051);if(e=t.attributes.IV,t=Fn(t.attributes.keyUriTemplate),!e||!t)throw new j(2,4,4051);if(e=Ho(e.substr(2)),e.byteLength!=16)throw new j(2,4,4048);return{Zi:t,iv:e}}var Jk=new Map().set("com.apple.fps",function(e){if(S.shakaMediaKeysPolyfill==="apple")throw new j(2,4,4054);return(e=Kr(e.node,"https://dashif.org/CPS","Laurl"))&&(e=Qt(e))?e:""}).set("com.widevine.alpha",function(e){var t=Kr(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Qt(t))?t:(e=Kr(e.node,"urn:microsoft","laurl"))&&Fn(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Af).set("com.microsoft.playready.recommendation",Af).set("com.microsoft.playready.software",Af).set("com.microsoft.playready.hardware",Af).set("org.w3.clearkey",function(e){var t=Kr(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Qt(t))?t:(e=Kr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Qt(e))?e:""});function qa(e,t,n,r,i,o){var s=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",r).set("Bandwidth",i).set("Time",o);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(u,a,c,f){if(u=="$$")return"$";var h=s.get(a);if(h==null)return u;switch(a=="RepresentationID"&&c&&(c=void 0),a=="Time"&&typeof h!="bigint"&&(.2<=Math.abs(h-Math.round(h))&&re("Calculated $Time$ values must be close to integers"),h=Math.round(h)),f){case void 0:case"d":case"i":case"u":u=h.toString();break;case"o":u=h.toString(8);break;case"x":u=h.toString(16);break;case"X":u=h.toString(16).toUpperCase();break;default:u=h.toString()}return c=S.parseInt(c,10)||1,Array(Math.max(0,c-u.length)+1).join("0")+u})}function OS(e,t){var n=Yr(e,t,"timescale"),r=1;n&&(r=Li(n)||1),n=Yr(e,t,"duration");var i=(n=Li(n||""))?n/r:null,o=Yr(e,t,"startNumber"),s=Number(Yr(e,t,"presentationTimeOffset"))||0,u=An(o||"");if((o==null||u==null)&&(u=1),o=null,t=wu(e,t,"SegmentTimeline")){t=lt(t,"S"),o=r,e=e.ha.duration||1/0;for(var a=u,c=[],f=-s,h=0;h<t.length;++h){var g=t[h],y=t[h+1],T=be(g,"t",An),E=be(g,"d",An),x=be(g,"r",Dn);if(g=be(g,"k",Dn)||0,T!=null&&(T-=s),E){if(T=T??f,x=x||0,0>x)if(y){if(y=be(y,"t",An),y==null)break;if(T>=y)break;x=Math.ceil((y-T)/E)-1}else{if(e==1/0)break;if(T/o>=e)break;x=Math.ceil((e*o-T)/E)-1}for(0<c.length&&T!=f&&(c[c.length-1].end=T/o),y=0;y<=x;++y)f=T+E,c.push({start:T/o,end:f/o,zg:T,Jb:g,yj:c.length+a}),T=f}}o=c}return{timescale:r,Ke:n,Wa:i,Md:u,hc:s/r||0,yg:s,timeline:o}}function bS(e,t){return[t(e.J),t(e.ga),t(e.pa)].filter(mo)}function Yr(e,t,n){t=bS(e,t),e=null,t=v(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function wu(e,t,n){t=bS(e,t),e=null,t=v(t);for(var r=t.next();!r.done&&!(e=zt(r.value,n));r=t.next());return e}function Zk(e,t,n,r,i,o){for(var s=Pi(e,"http://www.w3.org/1999/xlink","href"),u=Pi(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=v(Object.keys(e.attributes)),c=a.next();!c.done;c=a.next()){c=c.value;var f=c.split(":"),h=sh("http://www.w3.org/1999/xlink");f[0]==h&&delete e.attributes[c]}if(5<=o)return es(new j(2,4,4028));if(u!="onLoad")return es(new j(2,4,4027));var g=un([r],[s]);return i.request(0,nn(g,t)).Ha(function(y){if(y=Ju(y.data,e.tagName),!y)return es(new j(2,4,4001,s));for(e.children=[];y.children.length;){var T=y.children.shift();e.children.push(T)}T=v(Object.keys(y.attributes));for(var E=T.next();!E.done;E=T.next())E=E.value,e.attributes[E]=y.attributes[E];return If(e,t,n,g[0],i,o+1)})}function If(e,t,n,r,i,o){if(o=o===void 0?0:o,Pi(e,"http://www.w3.org/1999/xlink","href")){var s=Zk(e,t,n,r,i,o);return n&&(s=s.Ha(void 0,function(){return If(e,t,n,r,i,o)})),s}s=[];for(var u=v(Hy(e)),a=u.next(),c={};!a.done;c={hd:void 0},a=u.next())c.hd=a.value,Pi(c.hd,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(f){return function(h){return h!==f.hd}}(c)):c.hd.tagName!="SegmentTimeline"&&s.push(If(c.hd,t,n,r,i,o));return xv(s).Ha(function(){return e})}function eD(e,t,n,r,i,o,s){var u,a=new mt().R("sidx",function(c){u=tD(t,r,i,o,s,n,c)});if(e&&a.parse(e),u)return u;throw new j(2,3,3004)}function tD(e,t,n,r,i,o,s){var u=[];s.reader.skip(4);var a=s.reader.S();if(a==0)throw new j(2,3,3005);if(s.version==0)var c=s.reader.S(),f=s.reader.S();else c=s.reader.bd(),f=s.reader.bd();s.reader.skip(2);var h=s.reader.ma();for(e=e+s.size+f,f=0;f<h;f++){var g=s.reader.S(),y=(g&2147483648)>>>31;g&=2147483647;var T=s.reader.S();if(s.reader.skip(4),y==1)throw new j(2,3,3006);u.push(new xe(c/a+n,(c+T)/a+n,function(){return o},e,e+g-1,t,n,r,i)),c+=T,e+=g}return s.parser.stop(),u}function Eo(e){this.h=Un(e),this.g=new At(this.h,0)}Eo.prototype.ta=function(){return this.g.ta()};function Yi(e){var t=US(e);if(7<t.length)throw new j(2,3,3002);var n=0;t=v(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=US(e);e:{r=v(nD);for(var i=r.next();!i.done;i=r.next())if(Mi(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.Ba();else{if(t.length==8&&t[1]&224)throw new j(2,3,3001);for(i=r=0;i<t.length;i++){var o=t[i];r=i==0?o&(1<<8-t.length)-1:256*r+o}t=r}return t=e.g.Ba()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ba(),r=Un(e.h,e.g.Ba(),t),e.g.skip(t),new rD(n,r)}function US(e){var t=e.g.Ba(),n=e.g.X();if(n==0)throw new j(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Le(e.h,t,n)}var nD=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function rD(e,t){this.id=e,this.g=t}function og(e){if(8<e.g.byteLength)throw new j(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new j(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function iD(e,t,n,r,i,o,s,u,a){function c(){return i}var f=[];e=new Eo(e.g);for(var h=null,g=null;e.ta();){var y=Yi(e);if(y.id==187){var T=oD(y);T&&(y=n*T.Lj,T=t+T.pj,h!=null&&f.push(new xe(h+s,y+s,c,g,T-1,o,s,u,a)),h=y,g=T)}}return h!=null&&f.push(new xe(h+s,r+s,c,g,null,o,s,u,a)),f}function oD(e){var t=new Eo(e.g);if(e=Yi(t),e.id!=179)throw new j(2,3,3013);if(e=og(e),t=Yi(t),t.id!=183)throw new j(2,3,3012);t=new Eo(t.g);for(var n=0;t.ta();){var r=Yi(t);if(r.id==241){n=og(r);break}}return{Lj:e,pj:n}}function FS(e,t,n){if(t=wu(e,t,"Initialization"),!t)return null;var r=e.J.Ua(),i=t.attributes.sourceURL;i&&(r=un(r,[Fn(i)],e.vb())),i=0;var o=null;return(t=be(t,"range",Jl))&&(i=t.start,o=t.end),n=new Vn(function(){return r},i,o,GS(e),null,null,n,e.ga.encrypted),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,e.ha&&(n.g=e.ha.start+e.ha.duration),n}function sD(e,t,n){var r=Number(Yr(e,xu,"presentationTimeOffset"))||0,i=Yr(e,xu,"timescale"),o=1;i&&(o=Li(i)||1);var s=r/o||0,u=FS(e,xu,n);uD(e,u);var a=zo(e);return{rc:function(){var c=wu(a,xu,"RepresentationIndex"),f=a.J.Ua();return c&&(c=Fn(c.attributes.sourceURL))&&(f=un(f,[c],a.vb())),c=VS(a),BS(a,t,u,f,c.start,c.end,s)}}}function BS(e,t,n,r,i,o,s){var u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O;return b(function(U){if(U.g==1)return u=e.presentationTimeline,a=!e.Ob||!e.ha.ah,c=e.ha.start,f=e.ha.duration,h=e.J.mimeType.split("/")[1],g=t,y=null,T=[g(r,i,o,!1),h=="webm"?g(n.N(),n.Sa,n.xa,!0):null],g=null,I(U,Promise.all(T),2);if(E=U.h,x=E[0],A=E[1]||null,M=null,L=c-s,_=c,F=f?c+f:1/0,h=="mp4")var W=eD(x,i,r,n,L,_,F);else{W=x;var B=new Eo(A);if(Yi(B).id!=440786851)throw new j(2,3,3008);var K=Yi(B);if(K.id!=408125543)throw new j(2,3,3009);B=K.g.byteOffset,K=new Eo(K.g);for(var X=null;K.ta();){var q=Yi(K);if(q.id==357149030){X=q;break}}if(!X)throw new j(2,3,3010);for(X=new Eo(X.g),q=1e6,K=null;X.ta();){var Q=Yi(X);if(Q.id==2807729)q=og(Q);else if(Q.id==17545)if(Q.g.byteLength==4)K=Q.g.getFloat32(0);else if(Q.g.byteLength==8)K=Q.g.getFloat64(0);else throw new j(2,3,3003)}if(K==null)throw new j(2,3,3011);if(X=q/1e9,K*=X,W=Yi(new Eo(W)),W.id!=475249515)throw new j(2,3,3007);W=iD(W,B,X,K,r,n,L,_,F)}for(M=W,P=v(M),k=P.next();!k.done;k=P.next())O=k.value,O.codecs=e.J.codecs,O.mimeType=e.J.mimeType,O.bandwidth=e.bandwidth;return u.Ed(M),y=new it(M),a&&y.Oc(_,F,!0),U.return(y)})}function xu(e){return e.dd}function VS(e){var t=wu(e,xu,"RepresentationIndex");return e=Yr(e,xu,"indexRange"),e=Jl(e||""),t&&(e=be(t,"range",Jl,e)),e}function uD(e,t){if(HS(e,t),!VS(e))throw new j(2,4,4002)}function HS(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=Xe&&n!="mp4"&&n!="webm")throw new j(2,4,4006);if(n=="webm"&&!t)throw new j(2,4,4005)}function GS(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.se,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ga.label||null,roles:e.roles||null,language:e.ga.language||null}}function aD(e,t,n){var r=FS(e,KS,n),i=lD(e);if(!i.Wa&&!i.timeline&&1<i.Xc.length)throw new j(2,4,4002);if(!i.Wa&&!e.ha.duration&&!i.timeline&&i.Xc.length==1)throw new j(2,4,4002);if(i.timeline&&i.timeline.length==0)throw new j(2,4,4002);var o=null,s=null;e.pa.id&&e.J.id&&(s=t.get(e.pa.id+","+e.J.id))&&(o=s.segmentIndex);var u=cD(e.ha.start,e.ha.duration,e.J.Ua,i,r,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.vb);return t=!o,o?o.Bd(u,e.presentationTimeline.pb()):o=new it(u),e.presentationTimeline.Ed(u),e.Ob&&e.ha.ah||o.Oc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),s&&(s.segmentIndex=o),{rc:function(){return o&&o.getNumReferences()!=0||o.oe(u),Promise.resolve(o)}}}function KS(e){return e.Zb}function lD(e){var t=fD(e);e=OS(e,KS);var n=e.Md;n==0&&(n=1);var r=0;return e.Wa?r=e.Wa*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Wa:e.Wa,startTime:r,Md:n,hc:e.hc,timeline:e.timeline,Xc:t}}function cD(e,t,n,r,i,o,s,u,a,c){var f=r.Xc.length;r.timeline&&r.timeline.length!=r.Xc.length&&(f=Math.min(r.timeline.length,r.Xc.length));for(var h=e-r.hc,g=t?e+t:1/0,y=[],T=r.startTime,E={},x=0;x<f;E={Me:void 0,Ce:void 0},x++){E.Ce=r.Xc[x];var A=T;T=void 0,T=r.Wa!=null?A+r.Wa:r.timeline?r.timeline[x].end:A+t,E.Me=null,E=new xe(e+A,e+T,function(M){return function(){return M.Me==null&&(M.Me=un(n(),[M.Ce.ej],c())),M.Me}}(E),E.Ce.start,E.Ce.end,i,h,e,g,[],"",null,null,Bi,o),E.codecs=u,E.mimeType=s,E.bandwidth=a,y.push(E)}return y}function fD(e){return[e.J.Zb,e.ga.Zb,e.pa.Zb].filter(mo).map(function(t){return lt(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.Nf&&(e.Nf=!0);var n=Fn(t.attributes.media);return t=be(t,"mediaRange",Jl,{start:0,end:null}),{ej:n,start:t.start,end:t.end}})}function WS(e,t,n,r,i,o,s,u,a){a||e.J.he||(e.J.he=Yr(e,Ao,"initialization"));var c=e.J.he?gD(e,s):null,f=dD(e);hD(f);var h=zo(e);if(f.vd)return HS(e,c),{rc:function(){var E=qa(f.vd,h.J.originalId,null,null,h.bandwidth||null,null);return E=un(h.J.Ua(),[E]),BS(h,t,c,E,0,null,f.hc)}};if(f.Wa)return r||e.ga.contentType==="image"||e.ga.contentType==="text"||(n=e.ha.start,r=e.pa.id,a=e.ha.duration,r=(r=r!=null&&o.get(r)||a)?n+r:1/0,e.presentationTimeline.Vf(f.Wa),e.presentationTimeline.kh(n,r)),{rc:function(){return pD(h,f,i,c,o,s,u,e.J.De)}};var g=null;r=r=null,e.pa.id&&e.J.id&&(r=e.pa.id+","+e.J.id,r=n.get(r))&&(g=r.segmentIndex);var y=e.ha.start,T=e.ha.duration?y+e.ha.duration:1/0;return g?(n=g,XS(n,f,y,T,c),n.Pa(e.presentationTimeline.pb())):g=new Mf(f,e.J.originalId,e.bandwidth,e.J.Ua,e.vb,y,T,c,s,e.J.De),f.timeline&&e.ga.contentType!=="image"&&e.ga.contentType!=="text"&&e.presentationTimeline.lh(g.h?g.h.timeline:[],y),r&&e.Ob&&(r.segmentIndex=g),{rc:function(){return g instanceof Mf&&g.getNumReferences()==0&&XS(g,f,y,T,c),Promise.resolve(g)}}}function Ao(e){return e.ic}function dD(e){var t=OS(e,Ao),n=Yr(e,Ao,"media"),r=Yr(e,Ao,"index"),i=Yr(e,Ao,"k"),o=0;return i&&(o=parseInt(i,10)),{Ke:t.Ke,Wa:t.Wa,timescale:t.timescale,Md:t.Md,hc:t.hc,yg:t.yg,timeline:t.timeline,ec:n&&Fn(n),vd:r,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,fj:o}}function hD(e){var t=e.vd?1:0;if(t+=e.timeline?1:0,t+=e.Wa?1:0,t==0)throw new j(2,4,4002);if(t!=1&&(e.vd&&(e.timeline=null),e.Ke=null,e.Wa=null),!e.vd&&!e.ec)throw new j(2,4,4002)}function pD(e,t,n,r,i,o,s,u){function a(K){var X=K-x,q=X*E,Q=t.Ke,Y=X*Q;"BigInt"in S&&Y>Number.MAX_SAFE_INTEGER&&(Y=BigInt(X)*BigInt(Q)),q+=g,X=q+E,Q=Math.min(X,f());var ne=[],ue=t.fj;if(ue)for(var Re=(Q-q)/ue,ge={},st=0;st<ue;ge={Fh:void 0},st++){var qe=q+Re*st,Ke=qe+Re;ge.Fh=st+1,ge=new xe(qe,Ke,function(We){return function(){var ot=qa(A,L,K,We.Fh,M,Y);return un(_(),[ot],F())}}(ge),0,null,r,P,g,f(),[],"",null,null,Bi,o),ge.codecs=e.J.codecs,ge.mimeType=e.J.mimeType,u==0?0<st&&ge.Vc():st%u!=0&&ge.Vc(),ne.push(ge)}return q=new xe(q,Q,function(){if(ue)return[];var We=qa(A,L,K,null,M,Y);return un(_(),[We],F())},0,null,r,P,g,f(),ne,"",null,null,Bi,o,0<ne.length),q.codecs=e.J.codecs,q.mimeType=e.J.mimeType,q.bandwidth=e.bandwidth,q.j=X,q}function c(){var K=[Math.max(h.pb(),g),Math.min(h.cc(),f())].map(function(X){return X-g});return K=[Math.ceil(K[0]/E),Math.ceil(K[1]/E)-1],e.J.cb&&K[1]++,K.map(function(X){return X+x})}function f(){var K=y!=null&&i.get(y)||T;return K?g+K:1/0}var h=e.presentationTimeline,g=e.ha.start,y=e.pa.id,T=e.ha.duration,E=t.Wa,x=t.Md,A=t.ec,M=e.bandwidth||null,L=e.J.id,_=e.J.Ua,F=e.vb,P=g-t.hc,k=c();n=e.Ob?Math.max(k[0],k[1]-n+1):k[0],s=s||k[1],k=[];for(var O=n;O<=s;++O){var U=a(O);k.push(U)}var W=new it(k);if(k=h.cc()<f(),O=h.U(),k||O){var B=Math.max(n,s+1);n=E,e.J.cb&&(n=.1),W.Le(n,function(){var K=h.pb();W.Pa(K);var X=v(c());X.next(),X=X.next().value;for(var q=[];B<=X;){var Q=a(B);q.push(Q),B++}return K>f()&&!q.length?null:q})}return Promise.resolve(W)}function gD(e,t){var n=e.J.he;if(n||(n=Yr(e,Ao,"initialization")),!n)return null;n=Fn(n);var r=e.J.originalId,i=e.bandwidth||null,o=e.J.Ua,s=e.vb;return t=new Vn(function(){var u=qa(n,r,null,null,i,null);return un(o(),[u],s())},0,null,GS(e),null,null,t,e.ga.encrypted),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,e.ha&&(t.g=e.ha.start+e.ha.duration),t}function Mf(e,t,n,r,i,o,s,u,a,c){it.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.H=i,this.j=o,this.l=s,this.u=u,this.A=a,this.G=c,sg(this)}St(Mf,it),p=Mf.prototype,p.getNumReferences=function(){return this.h?this.h.timeline.length:0},p.release=function(){it.prototype.release.call(this),this.h=null},p.Pa=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function XS(e,t,n,r,i){if(mD(e,i),e.h){if(n=e.h.timeline,e.h.ec!==t.ec&&(e.h.ec=t.ec),n.length){var o=n[n.length-1];t=t.timeline.filter(function(s){return s.end>o.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,J(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;sg(e)}function mD(e,t){if(e.u!==t){e.u=t,e=v(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&s0(n,t)}}function sg(e){if(e.h&&!e.o){for(var t=[],n=v(e.h.timeline),r=n.next();!r.done;r=n.next())r=r.value,r.start>=e.l||0>=r.end||t.push(r);e.h.timeline=t,e.Pa(e.j)}}p.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var i=t[r],o=i.start+this.j;if(i=r<n?t[r+1].start+this.j:this.l===1/0?i.end+this.j:this.l,e>=o&&e<i)return r+this.i}return null},p.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.timeline[e],i=r.yj,o=r.zg+this.h.yg;n=this.j-this.h.hc;var s=this.j+r.end,u=s;e===this.getNumReferences()-1&&this.l!==1/0&&(u=Math.min(u,this.l));for(var a=this.h.codecs,c=this.h.mimeType,f=this.h.bandwidth,h=[],g=(r.end-r.start)/r.Jb,y={},T=0;T<r.Jb;y={Ne:void 0,Gh:void 0},T++){var E=r.start+g*T,x=E+g;y.Gh=T+1,y.Ne=null,y=new xe(this.j+E,this.j+x,function(A){return function(){return t.h?(A.Ne==null&&(A.Ne=zS(t.h.ec,t.F,i,t.B,o,A.Gh,t.C,t.H)),A.Ne):[]}}(y),0,null,this.u,n,this.j,this.l,[],"",null,null,Bi,this.A),y.codecs=a,y.mimeType=c,y.bandwidth=f,this.G==0?0<T&&y.Vc():T%this.G!=0&&y.Vc(),h.push(y)}n=new xe(this.j+r.start,u,function(){return 0<r.Jb||!t.h?[]:zS(t.h.ec,t.F,i,t.B,o,null,t.C,t.H)},0,null,this.u,n,this.j,this.l,h,"",null,null,Bi,this.A,0<r.Jb),n.codecs=a,n.mimeType=c,n.j=s,n.bandwidth=f,this.g[e]=n}return n},p.xb=function(e){sg(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function zS(e,t,n,r,i,o,s,u){return e=qa(e,t,n,o,r||null,i),un(s(),[e],u()).map(function(a){return a.toString()})}function Eu(e){this.o=null,this.A=e,this.G=new qs,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}Eu.prototype.configure=function(e){this.o=e},Eu.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Eu.prototype.setManifestType=function(e){this.u=e};function Ya(e,t){var n,r,i,o,s,u,a;return b(function(c){if(c.g==1)return n=un(e.i,[yD(e,t)]),r=nn(n,e.o.retryParameters),i=e.A.networkingEngine.request(8,r),ts(e.G,i),ye(c,2),I(c,i.promise,4);if(c.g!=2)return o=c.h,s=Rt(o.data),u=JSON.parse(s),u.VERSION==1&&vD(e,u,o.uri),Oe(c,0);if((a=ve(c))&&a.code==7001)return c.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new ze(function(){Ya(e,t)}),e.g.da(e.C),ae(c)})}function yD(e,t){if(!e.m.length)return t;t=new Vt(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),i=t.g;return e.u=="DASH"?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(r))):e.u=="HLS"&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(r))),Iy(i)&&Bo(t,i),t.toString()}function vD(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new ze(function(){Ya(e,r)}),(n=t.TTL)&&(e.C=n),e.g.da(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Au(e,t,n,r){var i=e.l.get(t);i||(i=new Map),i.set(n,r),e.l.set(t,i)}Eu.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function $a(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],i=v(e.m),o=i.next(),s={};!o.done;s={Zc:void 0},o=i.next())if(s.Zc=o.value,o=t.get(s.Zc))r.push({$f:s.Zc,location:o});else if(o=e.F.find(function(a){return function(c){return c.gk==a.Zc}}(s))){var u=t.get(o["BASE-ID"]);u&&(o["URI-REPLACEMENT"].Ph?(u=new Vt(u),Gl(u,o["URI-REPLACEMENT"].Ph),r.push({$f:s.Zc,location:u.toString()})):r.push({$f:s.Zc,location:u}))}for(i=Date.now(),s=v(e.j.keys()),o=s.next();!o.done;o=s.next())o=o.value,u=e.j.get(o),i>u&&e.j.delete(o);if(r=r.filter(function(a){for(var c=v(e.j.keys()),f=c.next();!f.done;f=c.next())if(f.value.includes(new Vt(a.location).nb))return!1;return!0}),r.length&&(e.B=r[0].$f),r=r.map(function(a){return a.location}),!r.length&&e.h)for(i=v(e.h.split(",")),s=i.next();!s.done;s=i.next())(s=t.get(s.value))&&(e.B=e.h,r.push(s));if(!r.length)for(t=v(t.values()),i=t.next();!i.done;i=t.next())r.push(i.value);return n?r:un(e.i,r)}function Mn(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.u=this.o=!1,this.m=new Set}p=Mn.prototype,p.release=function(){for(var e=v(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.u=this.o=!1,this.m.clear()},p.Mi=function(){return this.l},p.Lf=function(){return this.j.slice()},p.ri=function(){return this.i},p.Mg=function(e,t){if(e){if(e.type=="audio")for(var n=v(this.h),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e});else if(e.type=="video")for(n=v(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e}),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter(function(i){return i!==e})),r.dependencyStream&&(r.dependencyStream.matchedStreams=r.dependencyStream.matchedStreams.filter(function(i){return i!==e}));else if(e.type==Xe)for(n=v(this.j),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e});else if(e.type=="image")for(n=v(this.i),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function qS(e,t){var n=[],r=[],i=[],o=[];e=v(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(h){return[cg(h),h]}));var a=new Map(u.videoStreams.map(function(h){return[lg(h),h]})),c=new Map(u.textStreams.map(function(h){return[Za(h),h]}));if(u=new Map(u.imageStreams.map(function(h){return[el(h),h]})),t){var f=eT(Xe);c.set(Za(f),f),f=eT("image"),u.set(el(f),f)}n.push(s),r.push(a),i.push(c),o.push(u)}return{Fg:n,Nh:r,Jh:i,Zg:o}}p.jf=function(e,t,n){n=n===void 0?!1:n;var r=this,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re;return b(function(ge){if(ge.g==1){if(i=$t,!t&&e.length==1)return o=qS(e,!1),s=o.Fg,u=o.Nh,a=o.Jh,c=o.Zg,r.h=Array.from(s[0].values()),r.g=Array.from(u[0].values()),r.j=Array.from(a[0].values()),r.i=Array.from(c[0].values()),ge.s(2);for(f=n?r.m.size:0,h=-1,g=0;g<e.length;g++)y=e[g],r.m.has(y.id)||(r.m.add(y.id),h==-1&&(h=g));return h==-1?ge.return():(T=qS(e,!0),E=T.Fg,x=T.Nh,A=T.Jh,M=T.Zg,I(ge,Promise.all([Io(r,r.h,E,h,Iu,Mo,f),Io(r,r.g,x,h,Iu,Mo,f),Io(r,r.j,A,h,Iu,Mo,f),Io(r,r.i,M,h,Iu,Mo,f)]),2))}if(L=0,_=[],r.g.length&&r.h.length)for(B=v(r.h),K=B.next();!K.done;K=B.next())for(X=K.value,q=v(r.g),Q=q.next();!Q.done;Q=q.next())Y=Q.value,ne=Wd(X.drmInfos,Y.drmInfos),X.drmInfos.length&&Y.drmInfos.length&&!ne.length||(ue=(X.bandwidth||0)+(Y.bandwidth||0),X.dependencyStream&&(ue+=X.dependencyStream.bandwidth||0),Y.dependencyStream&&(ue+=Y.dependencyStream.bandwidth||0),Re=L++,_.push({id:Re,language:X.language,disabledUntilTime:0,primary:X.primary,audio:X,video:Y,bandwidth:ue,drmInfos:ne,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(F=r.g.length?r.g:r.h,P=v(F),k=P.next();!k.done;k=P.next())O=k.value,U=L++,W=O.bandwidth||0,O.dependencyStream&&(W+=O.dependencyStream.bandwidth||0),_.push({id:U,language:O.language,disabledUntilTime:0,primary:O.primary,audio:O.type==i.V?O:null,video:O.type==i.la?O:null,bandwidth:W,drmInfos:O.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.l=_,ae(ge)})};function YS(e){var t,n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q;return b(function(Q){switch(Q.g){case 1:if(t=$t,e.length==1)return Q.return(e[0]);for(n=e.map(function(Y){return new Map(Y.filter(function(ne){return ne.type===t.V}).map(function(ne){return[cg(ne),ne]}))}),r=e.map(function(Y){return new Map(Y.filter(function(ne){return ne.type===t.la}).map(function(ne){return[lg(ne),ne]}))}),i=e.map(function(Y){return new Map(Y.filter(function(ne){return ne.type===t.va}).map(function(ne){return[Za(ne),ne]}))}),o=e.map(function(Y){return new Map(Y.filter(function(ne){return ne.type===t.bf}).map(function(ne){return[el(ne),ne]}))}),s=v(i),u=s.next();!u.done;u=s.next())a=u.value,c=ZS(t.va),a.set(Za(c),c);for(f=v(o),h=f.next();!h.done;h=f.next())g=h.value,y=ZS(t.bf),g.set(el(y),y);return T=new Mn,I(Q,Io(T,[],n,0,Cf,kf,0),2);case 2:return E=Q.h,I(Q,Io(T,[],r,0,Cf,kf,0),3);case 3:return x=Q.h,I(Q,Io(T,[],i,0,Cf,kf,0),4);case 4:return A=Q.h,I(Q,Io(T,[],o,0,Cf,kf,0),5);case 5:if(M=Q.h,L=0,x.length&&E.length)for(O=v(E),U=O.next();!U.done;U=O.next())for(W=U.value,B=v(x),K=B.next();!K.done;K=B.next())X=K.value,q=L++,X.variantIds.push(q),W.variantIds.push(q);else for(_=x.concat(E),F=v(_),P=F.next();!P.done;P=F.next())k=P.value,k.variantIds=[L++];return Q.return(x.concat(E).concat(A).concat(M))}})}function Io(e,t,n,r,i,o,s){var u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U;return b(function(W){switch(W.g){case 1:for(u=[],a=0;a<n.length;a++)a>=r?u.push(new Set(n[a].values())):u.push(new Set);c=v(t),f=c.next();case 2:if(f.done){W.s(4);break}return h=f.value,I(W,SD(e,h,n,r,o,u,s),5);case 5:if(g=W.h,!g)throw new j(2,4,4037);f=c.next(),W.s(2);break;case 4:for(y=v(u),T=y.next();!T.done;T=y.next())for(E=T.value,x=v(E),A=x.next();!A.done;A=x.next())M=A.value,(L=TD(e,M,n,i,o,u))&&t.push(L);for(_=v(u),F=_.next();!F.done;F=_.next())for(P=F.value,k=v(P),O=k.next(),U={};!O.done;U={pg:void 0},O=k.next())if(U.pg=O.value,!ag(U.pg)&&t.some(function(B){return function(K){return ug(e,B.pg,K)}}(U)))throw new j(2,4,4037);return W.return(t)}})}function SD(e,t,n,r,i,o,s){return b(function(u){return u.g==1?(JS(e,n,t,0<s),t.matchedStreams?t.segmentIndex?I(u,$S(t,r+s),2):u.s(2):u.return(!1)):(QS(t,r,i,o,s),u.return(!0))})}function $S(e,t){var n,r,i,o,s,u;return b(function(a){if(a.g==1){for(n=[],r=e.matchedStreams,i=t;i<r.length;i++)o=r[i],n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex()),o.dependencyStream&&!o.dependencyStream.segmentIndex&&n.push(o.dependencyStream.createSegmentIndex());return I(a,Promise.all(n),2)}if(e.segmentIndex instanceof jt)for(s=t;s<r.length;s++)u=r[s],u.segmentIndex&&e.segmentIndex.h.push(u.segmentIndex);ae(a)})}function TD(e,t,n,r,i,o){if(ag(t))return null;var s=r(t);return JS(e,n,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return b(function(u){return s.segmentIndex?u.s(0):(s.segmentIndex=new jt,I(u,$S(s,0),0))})}),!s.matchedStreams||!s.matchedStreams.length?null:(QS(s,0,i,o,0),s)}function QS(e,t,n,r,i){var o=e.matchedStreams;for(t+=i;t<o.length;t++){var s=o[t];n(e,s);var u=!0;if(e.type=="audio"&&Qo(e.language,s.language)==0&&(u=!1),u&&(r[t-i].delete(s),s.fullMimeTypes))for(s=v(s.fullMimeTypes.values()),u=s.next();!u.done;u=s.next())e.fullMimeTypes.add(u.value)}}function Iu(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=v(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Cf(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function Mo(e,t){function n(s,u){s||(s=[]),u=v(u);for(var a=u.next();!a.done;a=u.next())a=a.value,s.includes(a)||s.push(a);return s}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=v(t.keyIds),i=r.next();!i.done;i=r.next())e.keyIds.add(i.value);if(e.originalId==null?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=Wd(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new j(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=v(t.closedCaptions),i=r.next();!i.done;i=r.next()){var o=v(i.value);i=o.next().value,o=o.next().value,e.closedCaptions.set(i,o)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Iu(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var s=new jt,u=v(e.trickModeVideo.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.trickModeVideo.segmentIndex=s,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),Mo(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),Mo(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=Iu(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var s=new jt,u=v(e.dependencyStream.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.dependencyStream.segmentIndex=s,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),Mo(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),Mo(e.dependencyStream,t))}function kf(e,t){var n=e.roles;n||(n=[]);for(var r=v(t.roles),i=r.next();!i.done;i=r.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,n=v(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,J(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=v(t.closedCaptions),n=t.next();!n.done;n=t.next())r=v(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function JS(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=v(t);for(var i=t.next();!i.done;i=t.next()){if(i=wD(e,i.value,n),!i)return;r.push(i)}n.matchedStreams=r}function wD(e,t,n){var r={audio:cg,video:lg,text:Za,image:el}[n.type],i=null,o=r(n);if(t.has(o))i=t.get(o);else{o={audio:function(c,f){return ug(e,c,f)},video:function(c,f){return ug(e,c,f)},text:xD,image:ED}[n.type];for(var s={audio:AD,video:ID,text:MD,image:CD}[n.type],u=v(t.values()),a=u.next();!a.done;a=u.next())a=a.value,!o(n,a)||n.fastSwitching!=a.fastSwitching||i&&!s(n,i,a)||(i=a)}return e.u&&!ag(i)&&t.delete(r(i)),i}function Qa(e,t){return e.mimeType!=t.mimeType?!1:Df(e.codecs)===Df(t.codecs)}p.vh=function(e){this.o=e},p.Bh=function(e){this.u=e};function ug(e,t,n){return!(!Qa(t,n)&&!e.o||t.drmInfos&&!Cy(t.drmInfos,n.drmInfos))}function xD(e,t){return t.language?!(e.forced!==t.forced||Qo(e.language,t.language)==0||t.kind!=e.kind):!0}function ED(){return!0}function AD(e,t,n){var r=Qa(e,t),i=Qa(e,n);if(r&&!i)return!1;if(!r&&i||(r=Qo(e.language,t.language),i=Qo(e.language,n.language),i>r))return!0;if(i<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(o){return e.roles.includes(o)}),i=n.roles.filter(function(o){return e.roles.includes(o)}),i.length>r.length)return!0;if(i.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Ja(e.channelsCount,t.channelsCount,n.channelsCount),r==oi?!0:r==$i?!1:(r=Ja(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==oi?!0:r==$i?!1:!!(e.bandwidth&&tT(e.bandwidth,t.bandwidth,n.bandwidth)==oi)))}function ID(e,t,n){var r=Qa(e,t),i=Qa(e,n);if(r&&!i)return!1;if(!r&&i||(r=Ja(e.width*e.height,t.width*t.height,n.width*n.height),r==oi))return!0;if(r==$i)return!1;if(e.frameRate){if(r=Ja(e.frameRate,t.frameRate,n.frameRate),r==oi)return!0;if(r==$i)return!1}return!!(e.bandwidth&&tT(e.bandwidth,t.bandwidth,n.bandwidth)==oi)}function MD(e,t,n){var r=Qo(e.language,t.language),i=Qo(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(o){return e.roles.includes(o)}),i=n.roles.filter(function(o){return e.roles.includes(o)}),i.length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function CD(e,t,n){return Ja(e.width*e.height,t.width*t.height,n.width*n.height)==oi}function ZS(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function eT(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new it([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function Ja(e,t,n){if(t==e&&e!=n)return $i;if(n==e&&e!=t)return oi;if(t>e){if(n<=e||n-e<t-e)return oi;if(n-e>t-e)return $i}else{if(n>e)return $i;if(e-n<e-t)return oi;if(e-n>e-t)return $i}return nT}function tT(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?oi:t<e?$i:nT}function ag(e){switch(e.type){case Xe:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function lg(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Df(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function cg(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Df(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Za(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function el(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Df(e){if(!fg.has(e)){var t=vn(e);fg.set(e,t)}return fg.get(e)}D("shaka.util.PeriodCombiner",Mn),Mn.prototype.setUseStreamOnce=Mn.prototype.Bh,Mn.prototype.setAllowMultiTypeVariants=Mn.prototype.vh,Mn.prototype.combinePeriods=Mn.prototype.jf,Mn.prototype.deleteStream=Mn.prototype.Mg,Mn.prototype.getImageStreams=Mn.prototype.ri,Mn.prototype.getTextStreams=Mn.prototype.Lf,Mn.prototype.getVariants=Mn.prototype.Mi;var oi=1,nT=0,$i=-1,fg=new Map;function kD(e,t){var n=new DOMParser,r=DD.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function rT(e,t){try{var n=di(e);return kD(n,t)}catch{return null}}var DD=new Wu(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Rf(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.oa=1,this.F=[],this.l={qe:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.u=new Map,this.o=new Map,this.B=new Map,this.ka=new Map,this.m=new Mn,this.I=0,this.na=new ie(5),this.K=new ze(function(){if(e.H&&!e.g.continueLoadingWhenPaused&&(e.G.Ka(e.H,"timeupdate"),e.H.paused)){e.G.qa(e.H,"timeupdate",function(){return cT(e)});return}cT(e)}),this.O=new qs,this.M=null,this.C=[],this.$=1/0,this.fa=!1,this.h=null,this.L=0,this.P=!1,this.G=new _e,this.H=null,this.T=!1,this.Z="",this.ea=function(){return!1},this.W=[]}p=Rf.prototype,p.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.ea=t),n&&this.i&&this.i.presentationTimeline.U()&&this.K.sb(),this.h&&this.h.configure(this.g),this.m&&(this.m.vh(this.g.dash.multiTypeVariantsAllowed&&Go()),this.m.Bh(this.g.dash.useStreamOnceInPeriodFlattening))},p.start=function(e,t){var n=this,r;return b(function(i){if(i.g==1)return n.fa=t.isLowLatencyMode(),n.A=[e],n.j=t,I(i,dg(n),2);if(r=i.h,n.j&&hg(n,r),!n.j)throw new j(2,7,7001);return i.return(n.i)})},p.stop=function(){for(var e=v(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o.clear(),this.B.clear(),this.u.clear(),this.l={qe:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.m=null,this.K!=null&&(this.K.stop(),this.K=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.O.destroy()},p.update=function(){var e=this,t;return b(function(n){if(n.g==1)return ye(n,2),I(n,dg(e),4);if(n.g!=2)return Oe(n,0);if(t=ve(n),!e.j||!t)return n.return();e.j.onError(t),ae(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.cc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.I=t.endTime-e,hg(this,0))}}},p.banLocation=function(e){this.h&&this.h.banLocation(e)},p.setMediaElement=function(e){this.H=e};function dg(e){var t,n,r,i,o,s,u,a,c,f,h;return b(function(g){return g.g==1?(t=4,n="MPD",r=WD(e),i=e.A,r.length?(i=r,n="Patch",t=6):1<e.A.length&&e.h&&(o=$a(e.h,"Location",!0),o.length&&(i=o)),s=nn(i,e.g.retryParameters),u=Date.now(),I(g,gg(e,s,0,{type:t}),2)):g.g!=3?(a=g.h,e.j?(a.uri&&a.uri!=a.originalUri&&!e.A.includes(a.uri)&&e.A.unshift(a.uri),c=new Vt(a.uri),e.Z=c.g.toString(),I(g,RD(e,a.data,a.uri,n),3)):g.return(0)):(f=Date.now(),h=(f-u)/1e3,e.na.sample(1,h),g.return(h))})}function RD(e,t,n,r){var i,o,s,u,a,c,f,h,g,y;return b(function(T){if(T.g==1){if(i=t,o=e.g.dash.manifestPreprocessor,s=Gc,o!=s){if(tt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),u=rT(i,r),!u)throw new j(2,4,4001,n);o(u),i=Hr(u.outerHTML)}if(a=Ju(i,r),!a)throw new j(2,4,4001,n);return c=e.g.dash.manifestPreprocessorTXml,f=Kc,c!=f&&c(a),r==="Patch"?T.return(PD(e,a)):e.g.dash.disableXlinkProcessing?T.return(iT(e,a,n)):(h=e.g.dash.xlinkFailGracefully,g=If(a,e.g.retryParameters,h,n,e.j.networkingEngine),ts(e.O,g),I(T,g.promise,2))}return y=T.h,T.return(iT(e,y,n))})}function iT(e,t,n){var r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re,ge,st,qe,Ke,We,ot,Ve,$e,Ne,He,vt,sn,_t,Ot,Zt,ln,vs,Ji,ko;return b(function(jr){switch(jr.g){case 1:for(e.h&&e.h.l.clear(),r=[n],i=[],o=new Map,s=lt(t,"Location"),u=v(s),a=u.next();!a.done;a=u.next())c=a.value,f=c.attributes.serviceLocation,(h=hr(c))&&(g=un(r,[h])[0],f&&(e.h?Au(e.h,"Location",f,g):o.set(f,g)),i.push(g));if(e.h?(y=$a(e.h,"Location",!0),0<y.length&&(r=e.A=y)):i.length&&(r=e.A=i),e.l.qe=t.attributes.id||"",e.l.Id=be(t,"publishTime",co)||0,e.F=lt(t,"PatchLocation"),T=Promise.resolve(),(E=zt(t,"ContentSteering"))&&e.j)for(x=E.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=x):(e.h=new Eu(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=x,(A=hr(E))&&(be(E,"queryBeforeStart",Zl,!1)?T=Ya(e.h,A):Ya(e.h,A))),M=v(o.keys()),L=M.next();!L.done;L=M.next())_=L.value,F=o.get(_),Au(e.h,"Location",_,F);if(P=lt(t,"BaseURL"),k=!1,e.h)for(O=v(P),U=O.next();!U.done;U=O.next())W=U.value,B=W.attributes.serviceLocation,K=hr(W),B&&K&&(Au(e.h,"BaseURL",B,K),k=!0);if(e.W=null,k&&e.h||(X=P.map(hr),e.W=un(r,X)),q=function(){return e.h&&k?$a(e.h,"BaseURL"):e.W?e.W:[]},e.l.Ua=q,Q=0,P&&P.length&&(Q=be(P[0],"availabilityTimeOffset",Zu)||0),e.l.cb=Q,e.I=be(t,"minimumUpdatePeriod",pi,-1),Y=be(t,"availabilityStartTime",co),ne=be(t,"timeShiftBufferDepth",pi),ue=e.g.dash.ignoreSuggestedPresentationDelay,Re=null,ue||(Re=be(t,"suggestedPresentationDelay",pi)),ge=e.g.dash.ignoreMaxSegmentDuration,st=null,ge||(st=be(t,"maxSegmentDuration",pi)),qe=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.T=e.i.presentationTimeline.U()&&qe=="static"),e.l.type=qe,e.i)for(Ke=e.i.presentationTimeline,We=Ke.pb(),ot=v(e.o.values()),Ve=ot.next();!Ve.done;Ve=ot.next())$e=Ve.value,$e.segmentIndex&&$e.segmentIndex.Pa(We);else Ne=e.g.dash.ignoreMinBufferTime,He=0,Ne||(He=be(t,"minBufferTime",pi)||0),vt=0,vt=Re!=null?Math.min(Re,ne||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*He,ne||1/0),Ke=new Ee(Y,vt,e.g.dash.autoCorrectDrift);return Ke.Gc(qe=="static"),Ke.U()&&!isNaN(e.g.availabilityWindowOverride)&&(ne=e.g.availabilityWindowOverride),ne==null&&(ne=1/0),Ke.Fe(ne),sn=t.attributes.profiles||"",e.l.profiles=sn.split(","),_t={Ob:qe!="static",presentationTimeline:Ke,pa:null,ha:null,ga:null,J:null,bandwidth:0,Nf:!1,cb:Q,Wb:null,profiles:sn.split(","),roles:null,vb:function(){return""}},I(jr,T,2);case 2:return e.L=0,Ot=aT(e,_t,q,t,!1),Zt=Ot.duration,ln=Ot.periods,(qe!="static"||e.T)&&Ot.Og||Ke.bb(Zt||1/0),e.P&&e.fa&&Ke.wh(e.$),Ke.Vf(st||1),e.P&&e.fa&&(vs=Re??e.g.defaultPresentationDelay,Ke.lg(vs)),e.i?(e.i.periodCount=ln.length,e.i.gapCount=e.L,I(jr,oT(e,ln,!1),4)):I(jr,e.m.jf(ln,_t.Ob),6);case 6:if(e.i={presentationTimeline:Ke,variants:e.m.l,textStreams:e.m.Lf(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:ND(t),nextUrl:jD(t),periodCount:ln.length,gapCount:e.L,isLowLatency:e.P,startTime:null},!Ke.Lh()){jr.s(7);break}return Ji=lt(t,"UTCTiming"),I(jr,GD(e,q,Ji),8);case 8:if(ko=jr.h,!e.j)return jr.return();Ke.xh(ko);case 7:Ke.me(),e.m&&!e.i.presentationTimeline.U()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),OD(e),ae(jr)}})}function oT(e,t,n){var r;return b(function(i){if(i.g==1)return I(i,e.m.jf(t,!0,n),2);e.i.variants=e.m.l,r=e.m.Lf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),ae(i)})}function PD(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K;return b(function(X){if(X.g==1){if(n=t.attributes.mpdId,r=be(t,"originalPublishTime",co),!n||n!==e.l.qe||r!==e.l.Id)throw e.F=[],new j(1,4,4052);for(i=[],o=[],s=new Set,u=v(Hy(t)),a=u.next();!a.done;a=u.next())if(c=a.value,f=ec(c.attributes.sel||""),h=f[f.length-1],g=hr(c)||"",h.name==="MPD")if(h.ac==="mediaPresentationDuration"){y=hr(c)||"";var q=pi(y);if(q!=null){e.l.Wb=q;for(var Q=v(e.u.values()),Y=Q.next();!Y.done;Y=Q.next())Y.value.Wb=q}}else if(h.ac==="type"){for(e.i.presentationTimeline.Gc(g=="static"),e.l.type=g,q=v(e.u.values()),Q=q.next();!Q.done;Q=q.next())Q.value.Ob=g=="dynamic";g=="static"&&(e.I=-1)}else h.ac==="publishTime"?e.l.Id=co(g)||0:h.ac===null&&c.tagName==="add"&&o.push(c);else if(h.name==="PatchLocation")Ky(e.F,c);else if(h.name==="Period")c.tagName==="add"?o.push(c):c.tagName==="remove"&&h.id&&_D(e,h.id);else if(h.name==="SegmentTemplate"){if(Q=ec(c.attributes.sel||""),q=Q[Q.length-1],q.ac){Q=sT(e,Q),Y=hr(c)||"";for(var ne=v(Q),ue=ne.next();!ue.done;ue=ne.next())ue=e.u.get(ue.value),Xy(ue.J.ic,c.tagName,q.ac,Y);q=Q}else q=[];for(T=q,E=v(T),x=E.next();!x.done;x=E.next())A=x.value,s.add(A)}else if(h.name==="SegmentTimeline"||h.name==="S"){for(q=ec(c.attributes.sel||""),q=sT(e,q),Q=v(q),Y=Q.next();!Y.done;Y=Q.next())Y=e.u.get(Y.value),Y=wu(Y,Ao,"SegmentTimeline"),ne=lt(Y,"S"),Ky(ne,c),Y.children=ne;for(M=q,L=v(M),_=L.next();!_.done;_=L.next())F=_.value,s.add(F)}for(P=v(s),k=P.next();!k.done;k=P.next())O=k.value,uT(e,O);for(U=v(o),W=U.next();!W.done;W=U.next())B=W.value,i.push.apply(i,J(LD(e,B)));return i.length?(e.i.periodCount+=i.length,e.i.gapCount=e.L,I(X,oT(e,i,!0),2)):X.s(2)}e.l.type=="static"&&(K=e.l.Wb,e.i.presentationTimeline.bb(K||1/0)),ae(X)})}function LD(e,t){return aT(e,{Ob:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,pa:null,ha:null,ga:null,J:null,bandwidth:0,Nf:!1,cb:e.l.cb,profiles:e.l.profiles,Wb:e.l.Wb,roles:null,vb:function(){return""}},e.l.Ua,t,!0).periods}function _D(e,t){e.i.periodCount--;for(var n=v(e.u.keys()),r=n.next();!r.done;r=n.next())if(r=r.value,r.startsWith(t)){var i=e.u.get(r);wu(i,Ao,"SegmentTimeline").children=[],uT(e,r),e.u.delete(r)}e.C=e.C.filter(function(o){return o!==t})}function sT(e,t){var n="",r="",i=-1,o="";t=v(t);for(var s=t.next();!s.done;s=t.next())s=s.value,s.name==="Period"?n=s.id:s.name==="AdaptationSet"?(r=s.id,s.position!==null&&(i=s.position)):s.name==="Representation"&&(o=s.id);if(t=[],o)t.push(n+","+o);else if(r)for(i=v(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.pa.id===n&&e.ga.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<i)for(r=v(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.pa.id===n&&e.ga.position===i&&e.J.id&&t.push(n+","+e.J.id);return t}function uT(e,t){var n=e.u.get(t),r=e.o.get(t);r.segmentIndex&&r.segmentIndex.Pa(e.i.presentationTimeline.pb());try{var i=WS(n,function(o,s,u,a){return dT(e,o,s,u,a)},e.o,!0,e.g.dash.initialSegmentLimit,e.ka,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return b(function(o){if(o.g==1)return r.segmentIndex?o.s(0):I(o,i.rc(),3);r.segmentIndex=o.h,ae(o)})}}catch(o){if(t=n.J.contentType,t!=Xe&&t!="application"&&t!="image"||o.code!=4002)throw o}}function ND(e){var t=zt(e,"ServiceDescription");if(!t||(e=zt(t,"Latency"),t=zt(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function jD(e){if(e=lt(e,"SupplementalProperty"),!e.length)return null;e=v(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function aT(e,t,n,r,i){var o=t.Wb;o||(o=be(r,"mediaPresentationDuration",pi),e.l.Wb=o);var s=0;e.i&&e.i.presentationTimeline&&e.T&&(s=e.i.presentationTimeline.Hb());var u=[],a=s;r=lt(r,"Period");for(var c=0;c<r.length;c++){var f=r[c],h=r[c+1],g=be(f,"start",pi,a),y=f.attributes.id,T=be(f,"duration",pi);g=c==0&&g==0&&e.T?s:g;var E=null;if(h){var x=be(h,"start",pi);x!=null&&(E=x-g+s)}else o!=null&&(E=o-g+s);if(x=kI,E&&T&&Math.abs(E-T)>x&&E>T&&e.L++,E==null&&(E=T),!(e.M!==null&&y!==null&&g!==null&&g<e.M)||e.C.includes(y)||c+1==r.length){if(g!==null&&(e.M===null||g>e.M)&&(e.M=g),a=bD(e,t,n,{start:g,duration:E,node:f,ah:E==null||!h}),u.push(a),t.pa.id&&E&&e.ka.set(t.pa.id,E),E==null){a=null;break}a=g+E}}if(i)for(t=v(u),n=t.next();!n.done;n=t.next())n=n.value.id,e.C.includes(n)||e.C.push(n);else e.C=u.map(function(A){return A.id});return o!=null?{periods:u,duration:o+s,Og:!1}:{periods:u,duration:a,Og:!0}}function OD(e){var t=Array.from(e.B.keys()).filter(function(u){return!e.C.includes(u)});t=v(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var r=!0,i=v(e.B.get(n)),o=i.next();!o.done;o=i.next()){o=o.value;var s=e.o.get(o);s&&(s.segmentIndex&&s.segmentIndex.getNumReferences()!=0?r=!1:(e.m&&e.m.Mg(s,n),e.o.delete(o)))}r&&e.B.delete(n)}}function bD(e,t,n,r){t.pa=pg(e,r.node,null,n),t.ha=r,t.pa.cb=t.cb,t.pa.id||(t.pa.id="__shaka_period_"+r.start);var i=lt(r.node,"EventStream");n=t.presentationTimeline.pb(),i=v(i);for(var o=i.next();!o.done;o=i.next())KD(e,r.start,r.duration,o.value,n);for(n=lt(r.node,"SupplementalProperty"),n=v(n),i=n.next();!i.done;i=n.next())i=i.value,i.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(i=tl(e,i))&&(t.vb=i);if(n=lt(r.node,"AdaptationSet").map(function(y,T){return lT(e,t,T,y)}).filter(mo),t.Ob){i=[],o=v(n);for(var s=o.next();!s.done;s=o.next()){s=v(s.value.tj);for(var u=s.next();!u.done;u=s.next())i.push(u.value)}if(i.length!=new Set(i).size)throw new j(2,4,4018)}for(i=new Map,o=v(n),s=o.next();!s.done;s=o.next())for(s=v(s.value.fi),u=s.next();!u.done;u=s.next()){var a=v(u.value);u=a.next().value,a=a.next().value,i.set(u,a)}if(i.size)for(o=null,s=v(n),u=s.next();!u.done;u=s.next()){u=u.value,a=[];for(var c=v(u.streams),f=c.next(),h={};!f.done;h={qg:void 0},f=c.next())if(h.qg=f.value,i.has(h.qg.originalId)){o||(o=lt(r.node,"AdaptationSet").map(function(y,T){return lT(e,t,T,y)}).filter(mo)),f=v(o);for(var g=f.next();!g.done;g=f.next())(g=g.value.streams.find(function(y){return function(T){return T.originalId==y.qg.originalId}}(h)))&&(g.dependencyStream=i.get(g.originalId),a.push(g))}a.length&&u.streams.push.apply(u.streams,J(a))}if(r=n.filter(function(y){return!y.xg}),n=n.filter(function(y){return y.xg}),!e.g.disableIFrames){for(n=v(n),i=n.next();!i.done;i=n.next())for(i=i.value,o=i.xg.split(" "),s=v(r),u=s.next();!u.done;u=s.next())if(u=u.value,o.includes(u.id))for(u=v(u.streams),a=u.next();!a.done;a=u.next())gv(a.value,i.streams)}if(n=Pf(e.g.disableAudio,r,"audio"),i=Pf(e.g.disableVideo,r,"video"),o=Pf(e.g.disableText,r,Xe),r=Pf(e.g.disableThumbnails,r,"image"),i.length===0&&n.length===0)throw new j(2,4,4004);return{id:t.pa.id,audioStreams:n,videoStreams:i,textStreams:o,imageStreams:r}}function Pf(e,t,n){return e||!t.length?[]:t.reduce(function(r,i){return i.contentType!=n||r.push.apply(r,J(i.streams)),r},[])}function lT(e,t,n,r){function i(K){var X=K.attributes["dvb:fontFamily"];K=K.attributes["dvb:url"],X&&K&&(K=un(t.ga.Ua(),[K],t.vb()),e.j.addFont(X,K[0]))}function o(K){switch(K){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(K){switch(K){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ga=pg(e,r,t.pa,null),t.ga.position=n;var u=!1;n=lt(r,"Role");var a=n.map(function(K){return K.attributes.value}).filter(mo),c=void 0,f=t.ga.contentType==Xe;f&&(c="subtitle"),n=v(n);for(var h=n.next();!h.done;h=n.next()){h=h.value;var g=h.attributes.schemeIdUri;if(g==null||g=="urn:mpeg:dash:role:2011")switch(h=h.attributes.value,h){case"main":u=!0;break;case"caption":case"subtitle":c=h}}var y=lt(r,"EssentialProperty");n=null;var T=!1;h=null,g=!1,y=v(y);for(var E=y.next();!E.done;E=y.next()){E=E.value;var x=E.attributes.schemeIdUri;if(x=="http://dashif.org/guidelines/trickmode")n=E.attributes.value;else if(x=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var A=s(parseInt(E.attributes.value,10));else if(x=="urn:mpeg:mpegB:cicp:ColourPrimaries")var M=o(parseInt(E.attributes.value,10));else x!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(x=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?T=!0:x=="urn:dvb:dash:fontdownload:2014"?i(E):x=="urn:mpeg:dash:urlparam:2014"&&(h=tl(e,E))||(g=!0))}if(g)return null;var L=null;for(g=lt(r,"SupplementalProperty"),g=v(g),y=g.next();!y.done;y=g.next())y=y.value,E=y.attributes.schemeIdUri,E=="http://dashif.org/guidelines/last-segment-number"?L=parseInt(y.attributes.value,10)-1:E=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?A=s(parseInt(y.attributes.value,10)):E=="urn:mpeg:mpegB:cicp:ColourPrimaries"?M=o(parseInt(y.attributes.value,10)):E=="urn:dvb:dash:fontdownload:2014"?i(y):E=="urn:mpeg:dash:urlparam:2014"&&(h=tl(e,y));h&&(t.vb=h),h=lt(r,"Accessibility");var _=new Map,F;for(h=v(h),g=h.next();!g.done;g=h.next())if(y=g.value,g=y.attributes.schemeIdUri,y=y.attributes.value,g!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(g!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)g=="urn:mpeg:dash:role:2011"?y!=null&&(a.push(y),y=="captions"&&(c="caption")):g=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(y=="1"?F="visually impaired":y=="2"&&(F="hard of hearing"));else if(g=1,y!=null)for(y=v(y.split(";")),E=y.next();!E.done;E=y.next()){x=E.value;var P=E=void 0;x.includes("=")?(x=x.split("="),E="svc"+x[0],P=x[1].split(",")[0].split(":").pop()):(E="svc"+g,g++,P=x),_.set(E,yt(P))}else _.set("svc1","und");else if(g=1,y!=null)for(y=y.split(";"),E=v(y),x=E.next();!x.done;x=E.next()){P=x.value;var k=x=void 0;P.includes("=")?(P=P.split("="),x=P[0].startsWith("CC")?P[0]:"CC"+P[0],k=P[1]||"und"):(x="CC"+g,y.length==2?g+=2:g++,k=P),_.set(x,yt(k))}else _.set("CC1","und");h=lt(r,"ContentProtection");var O=jS(h,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.ga.encrypted=0<h.length;var U=yt(t.ga.language||"und"),W=t.ga.label,B=new Map;if(r=lt(r,"Representation"),!e.g.ignoreSupplementalCodecs){for(h=[],g=v(r),y=g.next();!y.done;y=g.next())E=y.value,(y=Pi(E,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(E=ei(E),E.attributes.codecs=y.split(" ").join(","),E.attributes.id&&(E.attributes.supplementalId=E.attributes.id+"_supplementalCodecs"),h.push(E));r.push.apply(r,J(h))}if(h=r.map(function(K){var X=UD(e,t,O,c,U,W,u,a,_,K,F,L);return X&&(X.hdr=X.hdr||A,X.colorGamut=X.colorGamut||M,X.fastSwitching=T,K=K.attributes.dependencyId)?(X.baseOriginalId=K,B.set(K,X),null):X}).filter(function(K){return!!K}),h.length==0&&B.size==0){if(n=t.ga.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||f||n)return null;throw new j(2,4,4003)}if(!t.ga.contentType||t.ga.contentType=="application")for(t.ga.contentType=hT(h[0].mimeType,h[0].codecs),f=v(h),g=f.next();!g.done;g=f.next())g.value.type=t.ga.contentType;for(f=t.ga.id||"__fake__"+e.oa++,g=v(h),y=g.next();!y.done;y=g.next()){for(y=y.value,E=v(O.drmInfos),x=E.next();!x.done;x=E.next())x=x.value,x.keyIds=x.keyIds&&y.keyIds?new Set([].concat(J(x.keyIds),J(y.keyIds))):x.keyIds||y.keyIds;y.groupId=f}return r=r.map(function(K){return K.attributes.supplementalId||K.attributes.id}).filter(mo),{id:f,contentType:t.ga.contentType,language:U,Sk:u,streams:h,drmInfos:O.drmInfos,xg:n,tj:r,fi:B}}function tl(e,t){if((t=Kr(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&be(t,"useMPDUrlQuery",Zl,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.Z:n.split("&").map(function(r){if(r=="$querypart$")return e.Z;var i=/\$query:(.*?)\$/g.exec(r);if(i&&i.length==2){i=i[1];var o=new ks(e.Z).get(i);if(o.length)return i+"="+o[0]}return r}).join("&")}}return null}function UD(e,t,n,r,i,o,s,u,a,c,f,h){t.J=pg(e,c,t.ga,null);var g=t.J.id;if(e.$=Math.min(e.$,t.J.cb),e.P=0<e.$,!HD(t.J))return null;var y=t.ha.start;t.bandwidth=be(c,"bandwidth",Li)||0,t.roles=u;var T=lt(c,"SupplementalProperty"),E=lt(c,"EssentialProperty"),x=lt(c,"ContentProtection");c=null;var A=E.find(function(Q){return Q.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(A||(A=T.find(function(Q){return Q.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(c=tl(e,A)),c&&(t.vb=c),A=t.J.contentType,c=A==Xe||A=="application",A=A=="image",x.length&&(t.ga.encrypted=!0);try{var M=void 0;if(n.ef){var L=t.J.Ua,_=t.vb,F=un(L(),[n.ef.Zi],_()),P=nn(F,e.g.retryParameters);M={bitsKey:128,blockCipherMode:"CBC",iv:n.ef.iv,firstMediaSequenceNumber:0,fetchKey:function(){var Q,Y,ne;return b(function(ue){if(ue.g==1)return I(ue,gg(e,P,6),2);if(ue.g!=3){if(Q=ue.h,!Q.data||Q.data.byteLength!=16)throw new j(2,4,4049);return Y={name:"AES-CBC"},ne=M,I(ue,S.crypto.subtle.importKey("raw",Q.data,Y,!0,["decrypt"]),3)}ne.cryptoKey=ue.h,M.fetchKey=void 0,ae(ue)})}}}if(t.J.aesKey=M,L=function(Q,Y,ne,ue){return dT(e,Q,Y,ne,ue)},t.J.dd)var k=sD(t,L,M);else if(t.J.Zb)k=aD(t,e.o,M);else if(t.J.ic)k=WS(t,L,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.ka,M,h,!1);else{var O=t.ha.duration||0,U=t.J.Ua,W=t.J.mimeType,B=t.J.codecs;k={rc:function(){var Q=Rc(y,O,U());return Q.xb(function(Y){Y.mimeType=W,Y.codecs=B}),Promise.resolve(Q)}}}}catch(Q){if((c||A)&&Q.code==4002)return null;throw Q}h=zk(x,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),h=new Set(h?[h]:[]),x=!1,T.some(function(Q){return Q.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Q.attributes.value=="JOC"})&&(x=!0),T=!1,c&&(T=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var K;if(A&&((E=E.find(function(Q){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Q.attributes.schemeIdUri)}))&&(K=E.attributes.value),!K))return null;var X;c=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(X="PQ"),E=t.J.id?t.pa.id+","+t.J.id:"",e.F.length&&g&&e.u.set(t.pa.id+","+g,FD(t));var q=E&&e.o.has(E)?e.o.get(E):{id:e.oa++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){q.segmentIndex&&(q.segmentIndex.release(),q.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:c,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:h,language:i,originalLanguage:t.ga.language,label:o,type:t.ga.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:u,forced:T,channelsCount:t.J.se,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:x,closedCaptions:a,hdr:X,colorGamut:void 0,videoLayout:void 0,tilesLayout:K,accessibilityPurpose:f,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Kt(t.J.mimeType,t.J.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return q.createSegmentIndex=function(){var Q;return b(function(Y){if(Y.g==1)return q.segmentIndex?Y.s(0):(Q=q,I(Y,k.rc(),3));Q.segmentIndex=Y.h,ae(Y)})},E&&t.Ob&&!e.o.has(E)&&(t=t.pa.id||"",e.B.has(t)||e.B.set(t,[]),e.o.set(E,q),e.B.get(t).push(E)),q}function FD(e){function t(n){return n?(n=zo(n),n.dd=null,n.Zb=null,n.ic=uh(n.ic),n):null}return e=zo(e),e.pa=t(e.pa),e.ga=t(e.ga),e.J=t(e.J),e.ha&&(e.ha=zo(e.ha),e.ha.node=null),e}function cT(e){var t,n;return b(function(r){switch(r.g){case 1:return t=0,ye(r,2),I(r,dg(e),4);case 4:t=r.h,Oe(r,3);break;case 2:if(n=ve(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),hg(e,t),ae(r)}})}function hg(e,t){if(!(0>e.I)){var n=e.I;0<=e.g.updatePeriod&&(n=e.g.updatePeriod),e.K.da(Math.max(n-t,le(e.na)))}}function pg(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,se:null,audioSamplingRate:null,cb:0,De:0,encrypted:!1},r=r||n.Ua;var i=t.attributes.id,o=t.attributes.supplementalId,s=lt(t,"BaseURL"),u,a=!1;if(e.h)for(var c=v(s),f=c.next();!f.done;f=c.next()){var h=f.value;f=h.attributes.serviceLocation,h=hr(h),f&&h&&(Au(e.h,i,f,h),a=!0)}a&&e.h||(u=s.map(hr)),c=t.attributes.contentType||n.contentType,f=t.attributes.mimeType||n.mimeType,h=op([t.attributes.codecs||n.codecs]).join(",");var g=be(t,"frameRate",PI)||n.frameRate,y=t.attributes.sar||n.pixelAspectRatio,T=BD(lt(t,"InbandEventStream"),n.emsgSchemeIdUris),E=lt(t,"AudioChannelConfiguration");E=VD(E)||n.se;var x=be(t,"audioSamplingRate",An)||n.audioSamplingRate;c||(c=hT(f,h));var A=zt(t,"SegmentBase"),M=zt(t,"SegmentTemplate"),L=A&&be(A,"availabilityTimeOffset",Zu)||0,_=M&&be(M,"availabilityTimeOffset",Zu)||0,F=s&&s.length&&be(s[0],"availabilityTimeOffset",Zu)||0;L=n.cb+F+L+_,_=null,(F=zt(t,"SegmentSequenceProperties"))&&(F=zt(F,"SAP"))&&(_=be(F,"cadence",Dn)),F=t.attributes.label;var P=lt(t,"Label");return P&&P.length&&(P=P[0],Qt(P)&&(F=Qt(P))),{Ua:function(){return un(r(),s.length?e.h&&a?$a(e.h,i):u||[]:[])},dd:A||n.dd,Zb:zt(t,"SegmentList")||n.Zb,ic:M||n.ic,width:be(t,"width",An)||n.width,height:be(t,"height",An)||n.height,contentType:c,mimeType:f,codecs:h,frameRate:g,pixelAspectRatio:y,emsgSchemeIdUris:T,id:o||i,originalId:i,language:t.attributes.lang,se:E,audioSamplingRate:x,cb:L,he:null,De:_||n.De,label:F||null,encrypted:!1}}function BD(e,t){t=t.slice(),e=v(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function VD(e){e=v(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var r=0,i=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(i=r=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&0<t&&t<n.length)return n[t]}}return null}function HD(e){var t=e.dd?1:0;return t+=e.Zb?1:0,t+=e.ic?1:0,t==0?e.contentType==Xe||e.contentType=="application":(t!=1&&(e.dd&&(e.Zb=null),e.ic=null),!0)}function fT(e,t,n,r){var i,o,s,u,a,c,f;return b(function(h){if(h.g==1)return i=[Fn(n)],o=un(t(),i),s=nn(o,e.g.retryParameters),s.method=r,u=e.j.networkingEngine.request(4,s,{isPreload:e.ea()}),ts(e.O,u),I(h,u.promise,2);if(a=h.h,r=="HEAD"){if(!a.headers||!a.headers.date)return h.return(0);c=a.headers.date}else c=Rt(a.data);return f=Date.parse(c),isNaN(f)?h.return(0):h.return(f-Date.now())})}function GD(e,t,n){var r,i,o,s,u,a,c,f;return b(function(h){switch(h.g){case 1:r=n.map(function(g){return{scheme:g.attributes.schemeIdUri,value:g.attributes.value}}),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=v(r),s=o.next();case 2:if(s.done){h.s(4);break}switch(u=s.value,ye(h,5),a=u.scheme,c=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.s(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.s(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return f=Date.parse(c),h.return(isNaN(f)?0:f-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":re("NTP UTCTiming scheme is not supported");break;default:re("Unrecognized scheme in UTCTiming element",a)}h.s(9);break;case 7:return I(h,fT(e,t,c,"HEAD"),10);case 10:return h.return(h.h);case 8:return I(h,fT(e,t,c,"GET"),11);case 11:return h.return(h.h);case 9:Oe(h,3);break;case 5:ve(h);case 3:s=o.next(),h.s(2);break;case 4:return re("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}})}function KD(e,t,n,r,i){var o=r.attributes.schemeIdUri||"",s=r.attributes.value||"",u=be(r,"timescale",An)||1,a=be(r,"presentationTimeOffset",An)||0;r=v(lt(r,"Event"));for(var c=r.next();!c.done;c=r.next()){c=c.value;var f=be(c,"presentationTime",An)||0,h=be(c,"duration",An)||0;f=Math.max((f-a)/u+t,t),h=f+h/u,n!=null&&(f=Math.min(f,t+n),h=Math.min(h,t+n)),h<i||(c={schemeIdUri:o,value:s,startTime:f,endTime:h,id:c.attributes.id||"",timescale:u,eventElement:zy(c),eventNode:uh(c)},e.j.onTimelineRegionAdded(c))}}function dT(e,t,n,r,i){var o,s,u,a;return b(function(c){return c.g==1?(o=Xr,s=i?0:1,u=Ia(t,n,r,e.g.retryParameters),I(c,gg(e,u,o,{type:s}),2)):(a=c.h,c.return(a.data))})}function hT(e,t){return t=Kt(e,t),Ks(t)?Xe:e.split("/")[0]}function gg(e,t,n,r){return r||(r={}),r.isPreload=e.ea(),t=e.j.networkingEngine.request(n,t,r),ts(e.O,t),t.promise}function WD(e){var t=e.l.Id;if(!e.l.qe||!t||!e.F.length)return[];var n=Date.now()/1e3,r=e.F.filter(function(i){return i=An(i.attributes.ttl),!i||t+i>n}).map(hr).filter(mo);return r.length?un(e.A,r):[]}D("shaka.dash.DashParser",Rf),rs("application/dash+xml",function(){return new Rf}),rs("video/vnd.mpeg.dash.mpd",function(){return new Rf});function Lf(){}D("shaka.dependencies",Lf),Lf.has=function(e){return mg.has(e)},Lf.add=function(e,t){if(!gT[e])throw Error(e+" is not supported");e==pT?tt("mux.js","mux.js is no longer used in Shaka Player."):mg.set(e,function(){return t})};var pT="muxjs",gT={Tk:pT,ISOBoxer:"ISOBoxer"};Lf.Allowed=gT;var mg=new Map([["ISOBoxer",function(){return S.ISOBoxer}]]);function mT(e,t,n){this.type=e,this.ca=t,this.segments=n||null}function _f(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}_f.prototype.toString=function(e){function t(i){return i.name+"="+(isNaN(Number(i.value))?'"'+i.value+'"':i.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(i){return e?!e.has(i.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function yT(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Mu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function me(e,t,n){return(e=Mu(e,t))?e.value:n||null}function ft(e,t){if(e=Mu(e,t),!e)throw new j(2,4,4023,t);return e.value}function vT(e,t,n){n=n===void 0?[]:n,this.ca=t,this.g=e,this.Jb=n}function Nf(e,t){this.name=e,this.value=t}function Dr(e,t){return e.filter(function(n){return n.name==t})}function ST(e,t){return e.filter(function(n){return ft(n,"TYPE")==t})}function cn(e,t){e=v(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Cu(e,t,n){return n=n===void 0?0:n,(e=cn(e,t))?Number(e.value):n}function Co(e,t,n){return t?TT(e,[t],n):[]}function TT(e,t,n){if(!t.length)return[];var r=t;return n&&n.size&&(r=t.map(function(i){return wT(i,n)})),un(e,r)}function wT(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=v(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var i=r.slice(2,r.length-1),o=t.get(i);if(o)e=e.replace(r,o);else throw new j(2,4,4039,i)}}return e}function XD(){this.g=0}function yg(e,t){t=Rt(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new j(2,4,4015);t=0;for(var r=!0,i=v(n),o=i.next();!o.done;o=i.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else if(o=vg(e,o),--e.g,xT.includes(o.name)){t=1;break}else o.name=="EXT-X-STREAM-INF"&&(r=!0);for(i=[],r=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=vg(e,s),zD.includes(s.name)){if(t!=1)throw new j(2,4,4017);s=n.splice(o,n.length-o),n=[],r=[],o=[],u=null,s=v(s);for(var a=s.next();!a.done;a=s.next())a=a.value,/^(#EXT)/.test(a)?(a=vg(e,a),xT.includes(a.name)?i.push(a):a.name=="EXT-X-MAP"?u=a:a.name=="EXT-X-PART"?o.push(a):a.name=="EXT-X-PRELOAD-HINT"?me(a,"TYPE")=="PART"?o.push(a):me(a,"TYPE")=="MAP"&&(a.name="EXT-X-MAP",u=a):r.push(a)):/^#(?!EXT)/m.test(a)||(a=a.trim(),u&&r.push(u),n.push(new vT(a,r,o)),r=[],o=[]);return o.length&&(u&&r.push(u),n.push(new vT("",r,o))),new mT(t,i,n)}i.push(s),s.name=="EXT-X-STREAM-INF"&&(s.attributes.push(new Nf("URI",u)),r=!0)}}return new mT(t,i)}function vg(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new j(2,4,4016,t);t=n[1];var r=n[2];n=[];var i;if(r){r=new Us(r);var o;(o=Wo(r,/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Wo(r,s);)n.push(new Nf(o[1],o[2]||o[3])),Fs(r)}return new _f(e,t,n,i)}var xT="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),zD="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function ET(){}function AT(e,t){try{var n=jf(e);return zs({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(r){return es(r)}}function jf(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new j(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new j(2,1,1004,e);var n=t[0];e=S.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var i;return r?i=Ir(e):i=Hr(e),{data:i,contentType:n}}D("shaka.net.DataUriPlugin",ET),ET.parse=AT,bi("data",AT);function Of(){var e=this;this.g=this.h=null,this.F=1,this.A=new Map,this.I=new Map,this.M=new Map,this.M.set("video",new Map),this.M.set("audio",new Map),this.M.set(Xe,new Map),this.M.set("image",new Map),this.Sb=new Map().set("com.apple.streamingkeydelivery",function(t,n,r){return yR(e,t,n,r)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=ft(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";n=="SAMPLE-AES"&&(r="cbcs"),n=ft(t,"URI"),n=jf(n.split("?")[0]),n=Le(n.data),r=lo("com.widevine.alpha",r,[{initDataType:"cenc",initData:n}]),(t=me(t,"KEYID"))&&r.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(r)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=ft(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";n=="SAMPLE-AES"&&(r="cbcs"),t=ft(t,"URI"),t=jf(t.split("?")[0]),t=Le(t.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n=gc(t,n,new Set,0),r=lo("com.microsoft.playready",r,[{initDataType:"cenc",initData:n}]),(t=qo(["<PLAYREADY>",Di(t),"</PLAYREADY>"].join(`
`)))&&(r.licenseServerUri=Ef(t)),r=Promise.resolve(r)}else r=Promise.resolve(null);return r}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=ft(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";n=="SAMPLE-AES"&&(r="cbcs"),n=ft(t,"URI"),n=jf(n.split("?")[0]),n=Le(n.data),r=lo("com.huawei.wiseplay",r,[{initDataType:"cenc",initData:n}]),(t=me(t,"KEYID"))&&r.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(r)}else t=Promise.resolve(null);return t}),this.Oa=new Set,this.i=new Map,this.l=null,this.C="",this.Ga=new XD,this.K=-1,this.ea=1/0,this.$=this.Ub=this.Na=!1,this.B=new ze(function(){if(e.W&&!e.g.continueLoadingWhenPaused&&(e.T.Ka(e.W,"timeupdate"),e.W.paused)){e.T.qa(e.W,"timeupdate",function(){return WT(e)});return}WT(e)}),this.Ea=Vf,this.m=null,this.Ma=0,this.o=1/0,this.Fa=this.Aa=this.P=0,this.Z=new qs,this.G=new Map,this.H=new Map,this.sa=new Map,this.ka=new Map,this.L=new Map,this.na=new Map,this.oa=new Map,this.Tb=this.fa=!1,this.Pb=new ie(5),this.j=null,this.O=!0,this.za=new Set,this.T=new _e,this.u=this.W=null,this.Qb=function(){return!1}}p=Of.prototype,p.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.Qb=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.U()&&this.B.sb()},p.start=function(e,t){var n=this,r;return b(function(i){return i.g==1?(n.h=t,n.fa=t.isLowLatencyMode(),I(i,Mg(n,[e]).promise,2)):i.g!=3?(r=i.h,n.C=r.uri,I(i,$D(n,r.data),3)):i.return(n.m)})},p.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.Z&&(e.push(this.Z.destroy()),this.Z=null),this.g=this.h=null,this.Oa.clear(),this.m=null,this.i.clear(),this.I.clear(),this.H.clear(),this.A.clear(),this.sa.clear(),this.ka.clear(),this.L.clear(),this.na.clear(),this.oa.clear(),this.za.clear(),this.j&&this.j.destroy(),this.T&&(this.T.release(),this.T=null),Promise.all(e)},p.update=function(){var e=this,t,n,r,i,o,s,u,a,c,f,h,g;return b(function(y){if(y.g==1){if(!Ln(e))return y.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(T){return T.stream.segmentIndex}),i=v(r),o=i.next();!o.done;o=i.next())s=o.value,t.push(qD(e,s));return I(y,Promise.all(t),2)}for(LT(e,r.map(function(T){return T.stream})),u=r.some(function(T){return T.rd==0}),r.length&&!u&&(a=xR,Ff(e,a.Qh),c=r.map(function(T){return T.Vb}),e.l.bb(Math.min.apply(Math,J(c))),e.h.updateDuration()),u&&Tg(e),f=v(r),h=f.next();!h.done;h=f.next())g=h.value,g.stream.isAudioMuxedInVideo||!g.stream.segmentIndex||ri(g.stream.segmentIndex)||e.h.disableStream(g.stream);ae(y)})};function Sg(e,t){return Ln(e)?e.M.get(t.type):t.ne}function qD(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re,ge,st;return b(function(qe){switch(qe.g){case 1:if(t.stream.isAudioMuxedInVideo)return qe.return();for(n=[],r=v(t.N()),i=r.next();!i.done;i=r.next())o=i.value,s=new Vt(o),u=s.g,t.Wd&&(0<=t.Bb&&u.add("_HLS_msn",String(t.Bb)),0<=t.Cb&&u.add("_HLS_part",String(t.Cb))),t.Xd&&u.add("_HLS_skip","YES"),Iy(u)&&Bo(s,Cs(u.toString())),n.push(s.toString());return ye(qe,2),I(qe,Mg(e,n,!0).promise,4);case 4:a=qe.h,Oe(qe,3);break;case 2:throw c=ve(qe),e.h&&e.h.disableStream(t.stream),c;case 3:if(!t.stream.segmentIndex)return qe.return();if(f=yg(e.Ga,a.data),f.type!=1)throw new j(2,4,4017);return h=a.uri,h==a.originalUri||t.N().includes(h)||t.ye.push(h),g=Dr(f.ca,"EXT-X-DEFINE"),y=wg(e,g,h),T=t.stream,E=Sg(e,t),I(qe,OT(e,f,T.mimeType,t.N,y),5);case 5:for(x=qe.h,A=x.keyIds,M=x.drmInfos,L=x.encrypted,_=x.Dg,T.encrypted||!L||_||(T.encrypted=!0),F=function(Ke,We){return Ke.size===We.size&&[].concat(J(Ke)).every(function(ot){return We.has(ot)})},F(T.keyIds,A)||(T.keyIds=A,T.drmInfos=M,e.h.newDrmInfo(T)),P=HT(e,f,E,y,t.N,t.type),k=P.segments,(O=P.bandwidth)&&(T.bandwidth=O),U=Lc(T),W=v(k),B=W.next();!B.done;B=W.next())K=B.value,K.Y&&(K.Y.Wc=U);T.segmentIndex.Bd(k,e.l.pb()),k.length&&(X=Cu(f.ca,"EXT-X-MEDIA-SEQUENCE",0),Q=(q=cn(f.ca,"EXT-X-SKIP"))?Number(me(q,"SKIPPED-SEGMENTS")):0,Y=NT(X,k),ne=Y.Bb,ue=Y.Cb,t.Bb=ne+Q,t.Cb=ue,Re=E.get(X),T.segmentIndex.Pa(Re)),(ge=ri(T.segmentIndex))&&(t.Bc=ge.startTime,st=k[k.length-1],t.Vb=st.endTime),cn(f.ca,"EXT-X-ENDLIST")&&(t.rd=!0),Eg(e,f),Ag(e,f.ca,T.type,y,t.N),ae(qe)}})}p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(e){this.j&&this.j.banLocation(e)},p.setMediaElement=function(e){this.W=e};function IT(e,t,n){n=n===void 0?!1:n;for(var r=e.K==-1,i=v(t),o=i.next();!o.done;o=i.next()){o=o.value;var s=o.stream.segmentIndex,u=Sg(e,o);if(s=ri(s)){u=v(u);for(var a=u.next();!a.done;a=u.next()){a=v(a.value);var c=a.next().value;if(a.next().value==s.startTime){r&&(e.K=Math.max(e.K,c)),o.tf=c;break}}}}if(!(0>e.K))for(t=v(t),r=t.next();!r.done;r=t.next())r=r.value,(nl(e,r.type)||n)&&(i=r.stream.segmentIndex)&&(o=e.K-r.tf,0<o&&(i.g.splice(0,o),i=ri(i))&&(i=-i.startTime,r.stream.segmentIndex.offset(i),MT(e,r,i)))}function YD(e,t){if(e.ea==1/0){t=v(t);for(var n=t.next();!n.done;n=t.next())n=ri(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ea=Math.min(e.ea,n.h))}if(t=e.ea,t!=1/0){n=v(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!nl(e,r.type)){var i=r.stream.segmentIndex;if(i!=null){var o=ri(i);if(o)if(o.h==null)he("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.N(),"Expect AV sync issues!");else for(MT(e,r,o.h-t-o.startTime),r=v(i),i=r.next();!i.done;i=r.next())i.value.sg(t)}}}}function MT(e,t,n){if(!(.001>Math.abs(n))){t.Bc+=n,t.Vb+=n,e=Sg(e,t);for(var r=v(e),i=r.next();!i.done;i=r.next()){var o=v(i.value);i=o.next().value,o=o.next().value,e.set(i,o+n)}t.N()}}function $D(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re,ge,st,qe,Ke,We,ot,Ve,$e;return b(function(Ne){switch(Ne.g){case 1:return n=$t,r=yg(e.Ga,t),i=Dr(r.ca,"EXT-X-DEFINE"),o=[],s=[],u=[],e.l=new Ee(null,0),e.l.Gc(!0),a=function(){return[e.C]},c=null,f=new Map,r.type==1?(e.O=!1,ne=Dr(r.ca,"EXT-X-DEFINE"),f=wg(e,ne,e.C),c=n.la,ue="",Re=new Map,I(Ne,_T(e,e.F++,f,r,a,"",c,ue,!0,"Media Playlist",null,Re,null,!1,null,!1),7)):(JD(e,i),h=Dr(r.ca,"EXT-X-MEDIA"),g=Dr(r.ca,"EXT-X-STREAM-INF"),y=Dr(r.ca,"EXT-X-IMAGE-STREAM-INF"),T=Dr(r.ca,"EXT-X-I-FRAME-STREAM-INF"),E=Dr(r.ca,"EXT-X-SESSION-KEY"),x=Dr(r.ca,"EXT-X-SESSION-DATA"),A=Dr(r.ca,"EXT-X-CONTENT-STEERING"),eR(e,x),I(Ne,tR(e,A),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(M=[],L=v(g),_=L.next(),F={};!_.done;F={Hh:void 0},_=L.next())P=_.value,(k=me(P,"SUPPLEMENTAL-CODECS"))&&(F.Hh=k.split(/\s*,\s*/).map(function(He){return He.split("/")[0]}),O=P.attributes.map(function(He){return function(vt){var sn=vt.name,_t=vt.value;return sn=="CODECS"&&(_t=He.Hh.join(","),vt=vt.value.split(","),1<vt.length&&(vt=Bn("audio",vt))&&(_t+=","+vt)),new Nf(sn,_t)}}(F)),M.push(new _f(P.id,P.name,O,null)));for(g.push.apply(g,J(M)),U=[],W=v(T),B=W.next(),K={};!B.done;K={Ih:void 0},B=W.next())X=B.value,(q=me(X,"SUPPLEMENTAL-CODECS"))&&(K.Ih=q.split(/\s*,\s*/).map(function(He){return He.split("/")[0]}),Q=X.attributes.map(function(He){return function(vt){var sn=vt.name;return vt=vt.value,sn=="CODECS"&&(vt=He.Ih.join(",")),new Nf(sn,vt)}}(K)),U.push(new _f(X.id,X.name,Q,null)));T.push.apply(T,J(U))}return ZD(e,g),lR(e,h),Y=oR(e,T),I(Ne,sR(e,g,E,h,a,e.A,Y),5);case 5:return o=Ne.h,s=nR(e,h),I(Ne,rR(e,y,T),6);case 6:u=Ne.h,Ne.s(3);break;case 7:ge=Ne.h,e.i.set(e.C,ge),ge.stream&&(st=Lc(ge.stream),ge.stream.segmentIndex.xb(function(He){He.Y&&(He.Y.Wc=st)})),c=ge.stream.type,o.push({id:0,language:yt(ue||"und"),disabledUntilTime:0,primary:!0,audio:c=="audio"?ge.stream:null,video:c=="video"?ge.stream:null,bandwidth:ge.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new j(2,7,7001);if(UT(e,r),r.type==1&&(Ln(e)&&(FT(e,r),qe=e.o,e.B.da(qe)),Ke=Array.from(e.i.values()),xg(e,Ke),Tg(e),Ag(e,r.ca,c,f,a)),e.m={presentationTimeline:e.l,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.$||!e.g.hls.disableCodecGuessing){Ne.s(8);break}for(We=[],ot=v(e.m.variants),Ve=ot.next();!Ve.done;Ve=ot.next())$e=Ve.value,$e.audio&&$e.audio.codecs===""&&We.push($e.audio.createSegmentIndex()),$e.video&&$e.video.codecs===""&&We.push($e.video.createSegmentIndex());return I(Ne,Promise.all(We),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),ae(Ne)}})}function QD(e,t){var n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M;return b(function(L){if(L.g==1)return n=ip(e.g.hls.mediaPlaylistFullMimeType),t.length?(r=GT(e,t),i=r.segment,o=r.segmentIndex,s=i.N(),u=s[0],a=new Vt(u),c=a.ab.split(".").pop(),(f=Cg.get(c))?L.return(ip(f)):I(L,Promise.all([CT(e,i.Y,0),CT(e,i,o)]),2)):L.return(n);if(h=L.h,g=h[1].mimeType,y=h[0].data,T=h[1].data,E="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),x=["audio/mp4","video/mp4","video/iso.segment"],nu(Le(T))){var _=T,F=e.g.disableAudio,P=e.g.disableVideo,k=e.g.disableText,O=Le(_),U=new It().parse(O),W=U.od();O=U.Mf();var B=[],K=!1,X=!1;if(!F)switch(W.audio){case"aac":case"aac-loas":U.fb().length&&(B.push("mp4a.40.2"),K=!0);break;case"mp3":U.fb().length&&(B.push("mp4a.40.34"),K=!0);break;case"ac3":U.fb().length&&(B.push("ac-3"),K=!0);break;case"ec3":U.fb().length&&(B.push("ec-3"),K=!0);break;case"opus":U.fb().length&&(B.push("opus"),K=!0)}if(!P)switch(W.video){case"avc":O.codec?B.push(O.codec):B.push("avc1.42E01E"),X=!0;break;case"hvc":O.codec?B.push(O.codec):B.push("hvc1.1.6.L93.90"),X=!0;break;case"av1":B.push("av01.0.01M.08"),X=!0}if(B.length){if(F=K&&!X,P=new Map,X&&!k){for(k=new dr("video/mp2t"),k.i(_),_=v(k.j()),X=_.next();!X.done;X=_.next())X=X.value,P.set(X,X);k.g()}O={type:F?"audio":"video",mimeType:"video/mp2t",codecs:B.join(", "),language:null,height:O.height,width:O.width,channelCount:null,sampleRate:null,closedCaptions:P,Od:null,colorGamut:null,frameRate:O.frameRate}}else O=null;if(A=O)return L.return(A)}else if((i.Y||E.includes(c)||x.includes(g))&&(M=xM(y,T,e.g.disableText)))return L.return(M);return g?L.return(ip(g)):L.return(n)})}function CT(e,t,n){var r,i,o,s,u,a;return b(function(c){switch(c.g){case 1:return t?(r=Xr,i=Ia(t.N(),t.uc(),t.tc(),e.g.retryParameters),o=t instanceof xe?1:0,I(c,Qi(e,i,r,{type:o}).promise,2)):c.return({mimeType:null,data:null});case 2:if(s=c.h,u=s.data,!t.aesKey){c.s(3);break}return I(c,sp(u,t.aesKey,n),4);case 4:u=c.h;case 3:return t instanceof xe?t.Ld(u,!0):t.Ld(u),(a=s.headers["content-type"])&&(a=a.split(";")[0].toLowerCase()),c.return({mimeType:a,data:u})}})}function Tg(e){if(Ln(e)){if(e.Ea==Hf){for(var t=1/0,n=1/0,r=v(e.i.values()),i=r.next();!i.done;i=r.next())i=i.value,i.stream.segmentIndex&&i.stream.type!="text"&&!i.stream.isAudioMuxedInVideo&&(t=Math.min(t,i.Vb),n=Math.min(n,i.Bc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Fe(t)}}else e.l.bb(PT(e));if(!e.l.u)for(t=v(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=ri(n.stream.segmentIndex))&&n.h&&e.l.yh(n.h);e.l.me()}function JD(e,t){var n=new Vt(e.C).g;t=v(t);for(var r=t.next();!r.done;r=t.next()){var i=r.value;r=me(i,"NAME");var o=me(i,"VALUE");i=me(i,"QUERYPARAM"),r&&o&&(e.A.has(r)||e.A.set(r,o)),i&&(r=n.get(i)[0])&&!e.A.has(r)&&e.A.set(i,r)}}function wg(e,t,n){n=new Vt(n).g;var r=new Map;t=v(t);for(var i=t.next();!i.done;i=t.next()){var o=i.value,s=me(o,"NAME"),u=me(o,"VALUE");i=me(o,"QUERYPARAM"),o=me(o,"IMPORT"),s&&u&&(r.has(s)||r.set(s,u)),i&&(s=n.get(i)[0])&&!r.has(s)&&r.set(i,s),o&&(i=e.A.get(o))&&r.set(o,i)}return r}function ZD(e,t){t=v(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=me(r,"AUDIO");n=me(r,"VIDEO");var o=me(r,"SUBTITLES");if(r=kT(e,r),o){var s=Bn(Xe,r);e.H.set(o,s),Gr(r,s)}i&&(o=Bn("audio",r),o||(o=e.g.hls.defaultAudioCodec),e.H.set(i,o)),n&&(i=Bn("video",r),i||(i=e.g.hls.defaultVideoCodec),e.H.set(n,i))}}function eR(e,t){t=v(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=me(r,"DATA-ID");n=me(r,"URI");var o=me(r,"LANGUAGE");r=me(r,"VALUE"),i=new Map().set("id",i),n&&i.set("uri",Co([e.C],n,e.A)[0]),o&&i.set("language",o),r&&i.set("value",r),n=new ce("sessiondata",i),e.h&&e.h.onEvent(n)}}function tR(e,t){var n,r,i,o,s,u;return b(function(a){if(!e.h||!e.g)return a.return();for(r=v(t),i=r.next();!i.done;i=r.next())if(o=i.value,s=me(o,"PATHWAY-ID"),u=me(o,"SERVER-URI"),s&&u){e.j=new Eu(e.h),e.j.configure(e.g),e.j.i=[e.C],e.j.setManifestType("HLS"),e.j.h=s,n=Ya(e.j,u);break}return I(a,n,0)})}function nR(e,t){var n=ST(t,"SUBTITLES");t=n.map(function(s){if(e.g.disableText)return null;try{return DT(e,[s],new Map).stream}catch(u){if(e.g.hls.ignoreTextStreamFailures)return null;throw u}}),n=v(n);for(var r=n.next();!r.done;r=n.next()){var i=ft(r.value,"GROUP-ID");if((r=e.H.get(i))&&(i=e.I.get(i))){i=v(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.stream.codecs=r,o.stream.mimeType=Ig(Xe,r)||Uf(Xe),gs(o.stream)}}return t.filter(function(s){return s})}function gs(e){var t=new Set([Kt(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.xb(function(n){n.mimeType&&t.add(Kt(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function rR(e,t,n){var r,i;return b(function(o){return o.g==1?(r=t.map(function(s){var u,a;return b(function(c){if(c.g==1)return e.g.disableThumbnails?c.return(null):(ye(c,2),I(c,cR(e,s),4));if(c.g!=2)return u=c.h,c.return(u.stream);if(a=ve(c),e.g.hls.ignoreImageStreamFailures)return c.return(null);throw a})}).concat(n.map(function(s){if(e.g.disableThumbnails)return null;try{var u=RT(e,s);return u.stream.type!=="image"?null:u.stream}catch(a){if(e.g.hls.ignoreImageStreamFailures)return null;throw a}})),I(o,Promise.all(r),2)):(i=o.h,o.return(i.filter(function(s){return s})))})}function iR(e,t,n){t=t.filter(function(u){var a=me(u,"URI")||"";return u=me(u,"TYPE"),u!="SUBTITLES"&&(a!=""||u=="AUDIO")});var r={};t=v(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=yT(i,!e.j);r[o]?r[o].push(i):r[o]=[i]}for(var s in r)DT(e,r[s],n,!1)}function oR(e,t){return t.map(function(n){return n=RT(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function sR(e,t,n,r,i,o,s){var u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re,ge,st,qe,Ke,We,ot,Ve;return b(function($e){switch($e.g){case 1:if(u=[],a=new Set,e.g.ignoreDrmInfo||!(0<n.length)){$e.s(2);break}c=v(n),f=c.next();case 3:if(f.done){$e.s(2);break}if(h=f.value,g=ft(h,"METHOD"),y=me(h,"KEYFORMAT")||"identity",T=null,g=="NONE"){$e.s(4);break}if(Bf(g)){E=Co(i(),ft(h,"URI"),o),x=E.sort().join(""),e.L.has(x)||(A=nn(E,e.g.retryParameters),M=Qi(e,A,6).promise,e.L.set(x,M)),$e.s(4);break}if(y=="identity")return I($e,XT(e,h,"",i,null,o),12);if(L=e.Sb.get(y),!L){_=null,$e.s(10);break}return I($e,L(h,"",null),11);case 11:_=$e.h;case 10:T=_,$e.s(6);break;case 12:T=$e.h;case 6:if(T){if(T.keyIds)for(F=v(T.keyIds),P=F.next();!P.done;P=F.next())k=P.value,a.add(k);u.push(T)}case 4:f=c.next(),$e.s(3);break;case 2:for(O={},U=v(t),W=U.next();!W.done;W=U.next())B=W.value,K=yT(B,!e.j),O[K]?O[K].push(B):O[K]=[B];X=[];for(q in O)Q=O[q],Y=Q[0],ne=me(Y,"FRAME-RATE"),ue=Number(me(Y,"AVERAGE-BANDWIDTH"))||Number(ft(Y,"BANDWIDTH")),Re=me(Y,"RESOLUTION"),ge=v(Re?Re.split("x"):[null,null]),st=ge.next().value,qe=ge.next().value,Ke=me(Y,"VIDEO-RANGE"),(We=me(Y,"REQ-VIDEO-LAYOUT"))&&We.includes(",")&&(ot=We.split(",").filter(function(Ne){return Ne=="CH-STEREO"||Ne=="CH-MONO"}),We=ot[0]),We=We||"CH-MONO",Ve=uR(e,Q,r),X.push.apply(X,J(aR(e,Ve.audio,Ve.video,ue,st,qe,ne,Ke,We,u,a,s)));return $e.return(X.filter(function(Ne){return Ne!=null}))}})}function uR(e,t,n){for(var r={audio:[],video:[]},i=new Map,o=[],s=!1,u=!1,a=v(t),c=a.next();!c.done;c=a.next()){var f=c.value;c=me(f,"AUDIO");var h=me(f,"VIDEO"),g=c||h;g&&(o.includes(g)||o.push(g),(f=me(f,"PATHWAY-ID"))&&i.set(g,f),c?s=!0:h&&(u=!0))}o.length&&n.length&&(n=n.filter(function(T){return o.includes(ft(T,"GROUP-ID"))}),iR(e,n,i)),n=(i=o.sort().join(","))&&e.I.has(i)?e.I.get(i):[],s?r.audio.push.apply(r.audio,J(n)):u&&r.video.push.apply(r.video,J(n)),s=!1;var y=t.map(function(T){return ft(T,"URI")});return c=r.audio.find(function(T){return T&&T.N().find(function(E){return y.includes(E)})}),u=kT(e,t[0]),n=Bn("video",u),(a=Bn("audio",u))&&!n?(c="audio",s=0<r.audio.length):!r.audio.length&&!r.video.length&&a&&n?(c="video",u=[[n,a].join()]):r.audio.length&&c?(c="audio",s=!0):c=r.video.length&&!r.audio.length?"audio":"video",s||(e=fR(e,t,u,c),i&&(e.stream.groupId=i),r[e.stream.type]=[e]),r}function kT(e,t){return t=me(t,"CODECS")||"",e.$=0<t.length,e.$||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),op(t.split(/\s*,\s*/))}function aR(e,t,n,r,i,o,s,u,a,c,f,h){for(var g=v(n),y=g.next();!y.done;y=g.next())KT(y.value.stream,i,o,s,u,a,null);for(i=e.g.disableAudio,(!t.length||i)&&(t=[null]),i=e.g.disableVideo,(!n.length||i)&&(n=[null]),i=[],t=v(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=v(n),u=s.next();!u.done;u=s.next()){var T=u.value;(u=o?o.stream:null)&&(u.drmInfos=c,u.keyIds=f),(a=T?T.stream:null)&&(a.drmInfos=c,a.keyIds=f,e.g.disableIFrames||gv(a,h)),a&&!u&&(a.bandwidth=r),!a&&u&&(u.bandwidth=r),g=o?o.stream.drmInfos:null,y=T?T.stream.drmInfos:null,T=T?T.N().sort().join(","):"";var E=o?o.N().sort().join(","):"",x=[];u&&u.codecs&&x.push(u.codecs),a&&a.codecs&&x.push(a.codecs),T=[T,E,x.sort()].join("-"),u&&a&&!Cy(g,y)||e.Oa.has(T)||(u={id:e.F++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!a&&a.primary,audio:u,video:a,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.push(u),e.Oa.add(T))}return i}function lR(e,t){t=ST(t,"CLOSED-CAPTIONS"),e.O=t.length==0,t=v(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=me(r,"LANGUAGE");n=yt(i||"und"),i||(i=me(r,"NAME"))&&(n=i),i=ft(r,"GROUP-ID"),r=ft(r,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(i)||e.G.set(i,new Map),e.G.get(i).set(r,n)}}function DT(e,t,n,r){r=r===void 0?!0:r;for(var i=[],o=[],s=new Map,u=v(t),a=u.next();!a.done;a=u.next()){var c=a.value;a=r?ft(c,"URI"):me(c,"URI")||"shaka://hls-muxed",c=ft(c,"GROUP-ID"),i.push(a),o.push(c),s.set(c,a)}if(r=o.sort().join(","),a=t[0],t="",u=ft(a,"TYPE").toLowerCase(),u=="subtitles"&&(u=Xe),u==Xe)t=me(a,"CODECS")||"";else for(o=v(o),c=o.next();!c.done;c=o.next())if(c=c.value,e.H.has(c)){t=e.H.get(c);break}if(o=i.sort().join(","),e.i.has(o))return e.i.get(o);if(c=e.F++,e.j){s=v(s);for(var f=s.next();!f.done;f=s.next()){var h=v(f.value);f=h.next().value,h=h.next().value,(f=n.get(f))&&Au(e.j,c,f,h)}}n=me(a,"LANGUAGE"),s=me(a,"NAME"),f=me(a,"DEFAULT")=="YES",u=="audio"?h=(h=me(a,"CHANNELS"))?parseInt(h.split("/")[0],10):null:h=null;var g;u=="audio"&&(g=me(a,"CHANNELS"))?(g=g.split("/"),g=g.length!=2?!1:g[1]==="JOC"||g[1].includes("ATMOS")):g=!1;var y=me(a,"CHARACTERISTICS"),T=me(a,"FORCED")=="YES";return u=="audio"?a=(a=me(a,"SAMPLE-RATE"))?parseInt(a,10):null:a=null,i=bf(e,c,i,t,u,n,f,s,h,null,y,T,a,g),i.stream&&(i.stream.groupId=r),e.I.has(r)?e.I.get(r).push(i):e.I.set(r,[i]),e.i.set(o,i),i}function cR(e,t){var n,r,i,o,s,u,a,c,f,h;return b(function(g){return g.g==1?(n=ft(t,"URI"),r=me(t,"CODECS","jpeg")||"",e.i.has(n)?g.return(e.i.get(n)):(i=me(t,"LANGUAGE"),o=me(t,"NAME"),s=me(t,"CHARACTERISTICS"),u=bf(e,e.F++,[n],r,"image",i,!1,o,null,null,s,!1,null,!1),(a=me(t,"RESOLUTION"))?I(g,u.stream.createSegmentIndex(),3):g.s(2))):(g.g!=2&&(c=ri(u.stream.segmentIndex),f=c.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(f.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(f.split("x")[1])),(h=me(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(h)),e.i.set(n,u),g.return(u))})}function RT(e,t){var n="video",r=ft(t,"URI"),i=me(t,"CODECS")||"";if(i=="mjpg"&&(n="image"),e.i.has(r))return e.i.get(r);var o=me(t,"LANGUAGE"),s=me(t,"NAME"),u=me(t,"CHARACTERISTICS");return n=bf(e,e.F++,[r],i,n,o,!1,s,null,null,u,!1,null,!1),i=me(t,"RESOLUTION"),o=v(i?i.split("x"):[null,null]),i=o.next().value,o=o.next().value,n.stream.width=Number(i)||void 0,n.stream.height=Number(o)||void 0,(t=me(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function fR(e,t,n,r){for(var i=e.F++,o=[],s=v(t),u=s.next();!u.done;u=s.next()){var a=u.value;u=ft(a,"URI"),a=me(a,"PATHWAY-ID"),e.j&&a&&Au(e.j,i,a,u),o.push(u)}if(s=o.sort().join(",")+n.sort().join(","),e.i.has(s))return e.i.get(s);u=o.join(",");e:{if(t=me(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.O=!1,t=null;break e}if(t){if(t!="NONE"){t=e.G.get(t);break e}e.O=!1}else if(!t&&e.G.size)for(t=v(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}}t=null}return n=js(r,n),r=bf(e,i,o,n,r,null,!1,u,null,t,null,!1,null,!1),e.i.set(s,r),r}function bf(e,t,n,r,i,o,s,u,a,c,f,h,g,y){function T(_){var F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re,ge,st,qe,Ke,We,ot,Ve,$e;return b(function(Ne){switch(Ne.g){case 1:return F=$t,ye(Ne,2),I(Ne,_.promise,4);case 4:if(P=Ne.h,_.aborted)return Ne.return();if(k=P.uri,k!=P.originalUri&&(O=A.N(),O.includes(k)||A.ye.push(k)),U=yg(e.Ga,P.data),U.type!=1)throw new j(2,4,4017);return W=Dr(U.ca,"EXT-X-DEFINE"),B=wg(e,W,k),K=!1,(!e.$&&e.g.hls.disableCodecGuessing||e.O&&i==F.la&&!e.g.hls.disableClosedCaptionsDetection)&&0<U.segments.length&&(e.O=!1,K=!0),X=!e.$&&e.g.hls.disableCodecGuessing,q=Ln(e),I(Ne,_T(e,0,B,U,E,r,i,o,s,u,a,c,f,h,g,y,void 0,K,X),5);case 5:if(Q=Ne.h,_.aborted)return Ne.return();if(Y=Q.stream,UT(e,U),Ln(e)&&!q&&FT(e,U),A.Bc=Q.Bc,A.Vb=Q.Vb,A.Xd=Q.Xd,A.Wd=Q.Wd,A.rd=Q.rd,A.ne=Q.ne,A.Bb=Q.Bb,A.Cb=Q.Cb,A.Tf=!0,x.segmentIndex=Y.segmentIndex,x.encrypted=Y.encrypted,x.drmInfos=Y.drmInfos,x.keyIds=Y.keyIds,x.mimeType=Y.mimeType,x.bandwidth=x.bandwidth||Y.bandwidth,x.codecs=x.codecs||Y.codecs,x.closedCaptions=x.closedCaptions||Y.closedCaptions,x.width=x.width||Y.width,x.height=x.height||Y.height,x.hdr=x.hdr||Y.hdr,x.colorGamut=x.colorGamut||Y.colorGamut,x.frameRate=x.frameRate||Y.frameRate,x.language=="und"&&Y.language!="und"&&(x.language=Y.language),x.language=x.language||Y.language,x.channelsCount=x.channelsCount||Y.channelsCount,x.audioSamplingRate=x.audioSamplingRate||Y.audioSamplingRate,gs(x),x.drmInfos.length&&e.h.newDrmInfo(x),ne=!1,(!c&&x.closedCaptions||c&&x.closedCaptions&&c.size!=x.closedCaptions.size)&&(ne=!0),e.m&&ne&&e.h.makeTextStreamsForClosedCaptions(e.m),i==F.la||i==F.V)for(ue=v(e.i.values()),Re=ue.next();!Re.done;Re=ue.next())ge=Re.value,ge.Tf||ge.type!=i||(ge.stream.mimeType=Y.mimeType,gs(ge.stream));i==F.va&&(st=ri(Y.segmentIndex))&&st.Y&&(x.mimeType="application/mp4",gs(x)),qe=Lc(x),x.segmentIndex.xb(function(He){He.Y&&(He.Y.Wc=qe)}),dR(e)&&(e.Ub?xg(e,[A]):(e.Ub=!0,Ke=Array.from(e.i.values()),We=Ke.filter(function(He){return He.stream.segmentIndex}),xg(e,We),Tg(e),ot=e.o,0<ot&&e.B.da(ot))),Ag(e,U.ca,x.type,B,E),e.m&&(e.m.startTime=e.u),Oe(Ne,0);break;case 2:if(Ve=ve(Ne),x.closeSegmentIndex(),Ve.code===7001)return Ne.return();if($e=e.h.disableStream(x),!$e)throw Ve;ae(Ne)}})}function E(){return e.j&&1<n.length?$a(e.j,t):A.ye.concat(TT([e.C],n,e.A))}var x=jT(e,r,i,o,s,u,a,c,f,h,g,y);n.includes("shaka://hls-muxed")&&(x.isAudioMuxedInVideo=!0,x.mimeType="video/mp2t",gs(x));var A={stream:x,type:i,ye:[],Bc:0,Vb:0,ne:new Map,Xd:!1,Wd:!1,rd:!1,tf:-1,Bb:-1,Cb:-1,Tf:!1,N:E},M=null,L;return x.createSegmentIndex=function(){return M||(x.isAudioMuxedInVideo?(x.segmentIndex=new it([]),Promise.resolve()):(L=Mg(e,A.N(),!0),M=new Promise(function(_){_(T(L))})))},x.closeSegmentIndex=function(){M&&!x.segmentIndex&&L.abort(),x.segmentIndex&&(x.segmentIndex.release(),x.segmentIndex=null),M=null},A}function PT(e){var t=1/0;e=v(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Vb));return t}function LT(e,t){var n=[];t=v(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.xb(function(i){n.push(i)});e.l.Ed(n)}function xg(e,t){if(!Ln(e))for(var n=PT(e),r=v(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.Oc(0,n);LT(e,t.map(function(o){return o.stream})),r=Array.from(e.i.values()).filter(function(o){return o.stream.segmentIndex}),n=r.some(function(o){return o.stream.type=="audio"}),i=r.some(function(o){return o.stream.type=="video"}),r=Ln(e)&&!e.Na,n=!Ln(e)&&e.Na&&!(n&&i),e.g.hls.ignoreManifestProgramDateTime||r||n?IT(e,t,r):(YD(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&IT(e,t))}function nl(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function dR(e){if(!e.m)return!1;var t=[],n=[];e=v(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(i){return i.segmentIndex})||0<n.length&&!n.some(function(i){return i.segmentIndex}))}function _T(e,t,n,r,i,o,s,u,a,c,f,h,g,y,T,E,x,A,M){A=A===void 0?!0:A,M=M===void 0?!0:M;var L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne,ue,Re,ge,st,qe,Ke,We,ot,Ve,$e,Ne,He,vt,sn;return b(function(_t){switch(_t.g){case 1:if(L=r.segments||[],_=L.every(function(Ot){return!!cn(Ot.ca,"EXT-X-GAP")}),!L.length||_)throw new j(2,4,4053);if(hR(e,r),Ln(e)&&Eg(e,r),F=Ln(e)?e.M.get(s):new Map,P=HT(e,r,F,n,i,s),k=P.segments,O=P.bandwidth,X=K=B=W=U=null,!(0<k.length&&A)){_t.s(2);break}return I(_t,QD(e,k),3);case 3:q=_t.h,s=q.type,u=q.language,f=q.channelCount,T=q.sampleRate,e.g.disableText||(h=q.closedCaptions),W=q.height,U=q.width,B=q.Od,K=q.colorGamut,X=q.frameRate,M&&(x=q.mimeType,o=q.codecs);case 2:if(x){_t.s(4);break}return I(_t,mR(e,s,o,k),5);case 5:x=_t.h,s!=Xe||o||x!="application/mp4"||!k[0]||k[0].Y||(x="text/vtt");case 4:return I(_t,OT(e,r,x,i,n),6);case 6:if(Q=_t.h,Y=Q.drmInfos,ne=Q.keyIds,ue=Q.encrypted,Re=Q.Dg,ue&&!Y.length&&!Re)throw new j(2,4,4026);return ge=jT(e,o,s,u,a,c,f,h,g,y,T,E),ge.encrypted=ue&&!Re,ge.drmInfos=Y,ge.keyIds=ne,ge.mimeType=x,O&&(ge.bandwidth=O),gs(ge),s=="video"&&(U||W||B||K)&&KT(ge,U,W,X,B,null,K),Ln(e)&&Eg(e,r),st=k[0].startTime,qe=k[k.length-1],Ke=qe.endTime,We=new it(k),ge.segmentIndex=We,Ve=(ot=cn(r.ca,"EXT-X-SERVER-CONTROL"))?Mu(ot,"CAN-SKIP-UNTIL")!=null:!1,$e=ot?Mu(ot,"CAN-BLOCK-RELOAD")!=null:!1,Ne=Cu(r.ca,"EXT-X-MEDIA-SEQUENCE",0),He=NT(Ne,k),vt=He.Bb,sn=He.Cb,_t.return({stream:ge,type:s,ye:[],N:i,Bc:st,Vb:Ke,Xd:Ve,Wd:$e,rd:!1,tf:-1,Bb:vt,Cb:sn,ne:F,Tf:!1})}})}function NT(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Bb:e,Cb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{Bb:e,Cb:n}):(e++,t.m&&(n=0),{Bb:e,Cb:n})}function jT(e,t,n,r,i,o,s,u,a,c,f,h){var g=Ig(n,t)||Uf(n),y=[];if(a){a=v(a.split(","));for(var T=a.next();!T.done;T=a.next())y.push(T.value)}return a=void 0,T=null,n==Xe?a=y.includes("public.accessibility.transcribes-spoken-dialog")&&y.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":y.includes("public.accessibility.describes-video")&&(T="visually impaired"),y.length||a!=="subtitle"||y.push("subtitle"),e={id:e.F++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:g,codecs:t,kind:n==Xe?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:yt(r||"und"),originalLanguage:r,label:o,type:n,primary:i,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:y,forced:c,channelsCount:s,audioSamplingRate:f,spatialAudio:h,closedCaptions:u,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:T,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},gs(e),e}function OT(e,t,n,r,i){var o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne;return b(function(ue){switch(ue.g){case 1:if(o=new Map,!e.g.ignoreDrmInfo&&t.segments){for(s=v(t.segments),u=s.next();!u.done;u=s.next())if(a=u.value,c=Dr(a.ca,"EXT-X-KEY"),f=null,c.length)for(f=BT(e,t,a.ca,r,i),h=v(c),g=h.next();!g.done;g=h.next())y=g.value,o.set(y,f)}E=T=!1,x=[],A=new Set,M=v(o),L=M.next();case 2:if(L.done){ue.s(4);break}if(_=L.value,F=v(_),P=F.next().value,k=F.next().value,O=P,U=k,W=ft(O,"METHOD"),W=="NONE"){ue.s(3);break}if(T=!0,B=me(O,"KEYFORMAT")||"identity",K=null,Bf(W)){E=!0,ue.s(3);break}if(B=="identity")return I(ue,XT(e,O,n,r,U,i),11);if(X=e.Sb.get(B),!X){q=null,ue.s(9);break}return I(ue,X(O,n,U),10);case 10:q=ue.h;case 9:K=q,ue.s(6);break;case 11:K=ue.h;case 6:if(K){if(K.keyIds)for(Q=v(K.keyIds),Y=Q.next();!Y.done;Y=Q.next())ne=Y.value,A.add(ne);x.push(K)}case 3:L=M.next(),ue.s(2);break;case 4:return ue.return({drmInfos:x,keyIds:A,encrypted:T,Dg:E})}})}function bT(e,t,n,r,i){if(!S.crypto||!S.crypto.subtle)throw re("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new j(2,4,4042);var o=0,s=me(t,"IV","");if(s){var u=Ho(s.substr(2));if(u.byteLength!=16)throw new j(2,4,4048)}else o=Cu(n.ca,"EXT-X-MEDIA-SEQUENCE",0);var a=Co(r(),ft(t,"URI"),i),c=a.sort().join("");if(n=t.toString()+"-"+o+"-"+c,!e.ka.has(n)){var f={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(ft(t,"METHOD")){case"AES-256":f.bitsKey=256;break;case"AES-256-CTR":f.bitsKey=256,f.blockCipherMode="CTR"}f.fetchKey=function(){var h,g,y,T;return b(function(E){if(E.g==1)return e.L.has(c)||(h=nn(a,e.g.retryParameters),g=Qi(e,h,6).promise,e.L.set(c,g)),I(E,e.L.get(c),2);if(E.g!=3){if(y=E.h,!y.data||y.data.byteLength!=f.bitsKey/8)throw new j(2,4,4049);return T={name:f.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:f.bitsKey},I(E,S.crypto.subtle.importKey("raw",y.data,T,!0,["decrypt"]),3)}f.cryptoKey=E.h,f.fetchKey=void 0,ae(E)})},e.ka.set(n,f)}return e.ka.get(n)}function UT(e,t){e.u==null&&(t=cn(t.ca,"EXT-X-START"))&&(e.u=Number(ft(t,"TIME-OFFSET")))}function hR(e,t){var n=cn(t.ca,"EXT-X-PLAYLIST-TYPE");t=cn(t.ca,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?Ff(e,Vf):n?Ff(e,Hf):Ff(e,YT)}function Eg(e,t){var n=1/0,r=t.segments;if(r.length)for(var i=r.length-1;0<=i;){var o=cn(r[i].ca,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}i--}if(r=cn(t.ca,"EXT-X-TARGETDURATION"),!r)throw new j(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(i=cn(t.ca,"EXT-X-PART-INF"))&&(e.P=Number(ft(i,"PART-TARGET"))),t=cn(t.ca,"EXT-X-SERVER-CONTROL"),e.fa&&e.P?(e.o=e.Tb?5*e.P<=n?Math.min(e.P,e.o):Math.min(n,e.o):Math.min(e.P,e.o),e.Fa=t?Number(ft(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?Mu(t,"HOLD-BACK"):null,e.Aa=n?Number(n.value):0),e.Ma=Math.max(r,e.Ma)}function FT(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Fa)n=e.Fa;else if(e.Aa)n=e.Aa;else{var r=t.segments.length,i=e.g.hls.liveSegmentsDelay;for(i>r-2&&(i=Math.max(1,r-2)),i=r-i;i<r;i++){var o=cn(t.segments[i].ca,"EXTINF");n=o?n+Math.ceil(Number(o.value.split(",")[0])):n+e.Ma}}e.u&&0>e.u&&(n=Math.min(-e.u,n),e.u+=n),e.l.zh(0),e.l.lg(n),e.l.Gc(!1)}function BT(e,t,n,r,i){var o=cn(n,"EXT-X-MAP");if(!o)return null;var s=ft(o,"URI"),u=Co(r(),s,i);if(s=[u.toString(),me(o,"BYTERANGE","")].join("-"),!e.sa.has(s)){var a=void 0,c=null,f=!1;n=v(n);for(var h=n.next();!h.done;h=n.next())h=h.value,h.name=="EXT-X-KEY"?(f=ft(h,"METHOD"),Bf(f)&&h.id<o.id?(f=!1,a=bT(e,h,t,r,i)):f=f!="NONE"):h.name=="EXT-X-BYTERANGE"&&h.id<o.id&&(c=h);t=pR(u,o,c,a,f),e.sa.set(s,t)}return e.sa.get(s)}function pR(e,t,n,r,i){var o=0,s=null;return t=me(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(o=t.split("@"),s=Number(o[0]),o=Number(o[1]),s=o+s-1,r&&(n=s+1-o,n%16&&(s+=16-n%16))),new Vn(function(){return e},o,s,null,null,null,r,i)}function gR(e,t,n,r,i,o,s,u,a){function c(ue){ue=new Vt(ue).ab.split(".").pop();var Re=kg.get(s).get(ue);return Re||(Re=Cg.get(ue)),Re}var f=r.ca,h=cn(f,"EXTINF"),g=0,y=0,T=null;r.Jb.length&&(e.m.isLowLatency=!0);var E=null;if(!e.g.hls.ignoreManifestProgramDateTime){var x=cn(f,"EXT-X-PROGRAM-DATE-TIME");x&&x.value&&(E=co(x.value),e.Na=!0)}var A=Bi;if(cn(f,"EXT-X-GAP")&&(e.m.gapCount++,A=2),!h){if(r.Jb.length==0)throw new j(2,4,4024,"EXTINF");if(!e.fa)return null}var M=[];x=!1;var L=null,_=!1,F=!1;if(e.fa&&r.Jb.length){g=t&&S.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var P=E,k={},O=0;O<r.Jb.length;k={Oe:void 0,ve:void 0},O++){var U=r.Jb[O],W=O==0?n:M[M.length-1],B=O==0?i:W.endTime,K=Number(me(U,"DURATION"))||e.P;if(K){var X=B+K,q=0,Q=null;if(U.name=="EXT-X-PRELOAD-HINT"?(q=(q=me(U,"BYTERANGE-START"))?Number(q):0,(W=me(U,"BYTERANGE-LENGTH"))?Q=q+Number(W)-1:q&&(Q=Number.MAX_SAFE_INTEGER)):(q=me(U,"BYTERANGE"),Q=v(VT(W,q)),q=Q.next().value,Q=Q.next().value),k.ve=me(U,"URI"),k.ve){W=Bi,me(U,"GAP")=="YES"&&(e.m.gapCount++,W=2,_=!0),k.Oe=null;var Y=function(ue){return function(){return ue.Oe==null&&(ue.Oe=Co(u(),ue.ve,o)),ue.Oe}}(k);g&&0<=q&&Q!=null&&(L=Y,x=!0),B=new xe(B,X,Y,q,Q,t,0,0,1/0,[],"",null,P,W,a),U.name=="EXT-X-PRELOAD-HINT"&&(B.Uf(),F=!0),me(U,"INDEPENDENT")!="YES"&&0<O&&B.Vc(),(k=c(k.ve))&&(B.mimeType=k,qT.has(k)&&(B.Y=null)),M.push(B),P&&(P+=K)}}}}if(h){if(h=Number(h.value.split(",")[0]),h==0)return null;g=i+h}else if(M.length)g=M[M.length-1].endTime;else return null;x&&(_||M[0].Sa!=0?(x=!1,L=null):M=[]),(h=cn(f,"EXT-X-BYTERANGE"))?(T=v(VT(n,h.value)),y=T.next().value,T=T.next().value):M.length&&(y=M[0].Sa,T=M[M.length-1].xa),n="",h=null,s=="image"&&(n="1x1",f=cn(f,"EXT-X-TILES"))&&(n=ft(f,"LAYOUT"),(f=me(f,"DURATION"))&&(h=Number(f)));var ne=null;return t=new xe(i,g,function(){return L?L():(ne==null&&(ne=Co(u(),r.g,o)),ne||[])},y,T,t,0,0,1/0,M,n,h,E,A,a,0<M.length&&!!r.g),(i=c(r.g))&&(t.mimeType=i,qT.has(i)&&(t.Y=null)),x&&(e.Tb=!0,t.eh(),F&&t.Uf()),t}function VT(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.xa+1,r=n+t-1),[n,r]}function Ag(e,t,n,r,i){if(n=="video"||n=="audio"){var o=e.l.m;if(o&&!nl(e,n))for(t=Dr(t,"EXT-X-DATERANGE"),t=t.filter(function(B){return Mu(B,"START-DATE")!=null}).sort(function(B,K){return B=ft(B,"START-DATE"),K=ft(K,"START-DATE"),B<K?-1:B>K?1:0}),n=0;n<t.length;n++){var s=t[n];try{var u=ft(s,"ID");if(!e.za.has(u)){var a=ft(s,"START-DATE"),c=co(a);if(!isNaN(c)){var f=Math.max(0,c-o),h=null,g=me(s,"END-DATE");if(g){var y=co(g);if(!isNaN(y)&&(h=y-o,0>h))continue}if(h==null){var T=me(s,"DURATION")||me(s,"PLANNED-DURATION");if(T){var E=parseFloat(T);if(isNaN(E)||(h=f+E),0>c-o+E)continue}}var x=me(s,"CLASS")||"com.apple.quicktime.HLS",A=me(s,"END-ON-NEXT")=="YES";if(h==null&&A){for(var M=n+1;M<t.length;M++){var L=me(t[M],"CLASS")||"com.apple.quicktime.HLS";if(x==L){var _=ft(t[M],"START-DATE"),F=co(_);if(!isNaN(F)&&F&&F>c){h=Math.max(0,F-o);break}}}if(h==null)continue}M=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var P=[],k=v(s.attributes),O=k.next();!O.done;O=k.next()){var U=O.value;if(!M.includes(U.name)){var W=wT(U.value,r);(U.name=="X-ASSET-URI"||U.name=="X-ASSET-LIST")&&(W=Co(i(),U.value,r)[0]),P.push({key:U.name,description:"",data:W,mimeType:null,pictureType:null})}}1<P.length&&e.h.onMetadata(x,f,h,P),e.za.add(u)}}}catch{}}}}function HT(e,t,n,r,i,o){var s=t.segments,u=void 0,a=Cu(t.ca,"EXT-X-DISCONTINUITY-SEQUENCE",-1),c=Cu(t.ca,"EXT-X-MEDIA-SEQUENCE",0),f=cn(t.ca,"EXT-X-SKIP"),h=f?Number(me(f,"SKIPPED-SEGMENTS")):0,g=c+h,y=0;Ln(e)&&n.has(g)&&(y=n.get(g)),y===0&&e.Ea==Hf&&0<n.size&&!n.has(g)&&e.l.i!=null&&(y=e.l.pb());var T=[],E=null;f=[];for(var x=0;x<s.length;x++){var A=s[x],M=x==0?y:E.endTime;g=c+h+x,cn(A.ca,"EXT-X-DISCONTINUITY")&&(a++,E&&E.Y&&(E.Y.g=M));for(var L=v(A.ca),_=L.next();!_.done;_=L.next())_=_.value,_.name=="EXT-X-KEY"&&(Bf(ft(_,"METHOD"))?u=bT(e,_,t,i,r):u=void 0);n.set(g,M),L=BT(e,t,A.ca,i,r),(M=gR(e,L,E,A,M,r,o,i,u))&&((E=Cu(A.ca,"EXT-X-BITRATE"))?f.push({bitrate:E,duration:M.endTime-M.startTime}):f.length&&(E=f.pop(),E.duration+=M.endTime-M.startTime,f.push(E)),E=M,M.i=a,nl(e,o)&&e.K!=null&&g<e.K||T.push(M))}if(t=void 0,f.length&&(t=f.reduce(function(F,P){return F+P.duration},0),t=Math.round(f.reduce(function(F,P){return F+P.bitrate*P.duration},0)/t*1e3)),f=T.some(function(F){return F.h!=null})){for(n={},r=0;r<T.length;n={ae:void 0,$d:void 0,Td:void 0,Dc:void 0,Sd:void 0},r++)if(n.Dc=T[r],n.Dc.h==null)for(n.$d=0,n.ae=r,i=function(F){return function(){var P=T[F.ae];if(P){if(P.h!=null)return P.h+F.$d;F.$d-=P.endTime-P.startTime,F.ae+=1}return null}}(n),n.Sd=0,n.Td=r,s=function(F){return function(){var P=T[F.Td];if(P){if(P!=F.Dc&&(F.Sd+=P.endTime-P.startTime),P.h!=null)return P.h+F.Sd;--F.Td}return null}}(n);n.Dc.h==null;)n.Dc.h=s(),n.Dc.h==null&&(n.Dc.h=i())}if(f)for(n=v(T),r=n.next();!r.done;r=n.next())for(i=r.value,r=i.h,i=v(i.g),s=i.next();!s.done;s=i.next())s=s.value,s.h=r,r+=s.endTime-s.startTime;if(n=e.ea,f&&n!=1/0&&!nl(e,o))for(e=v(T),o=e.next();!o.done;o=e.next())o.value.sg(n);return{segments:T,bandwidth:t}}function Ig(e,t){if(e==Xe){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Uf(e){return e==Xe?"text/vtt":kg.get(e).get("mp4")}function GT(e,t){e=Ln(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.dc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function mR(e,t,n,r){var i,o,s,u,a,c,f,h,g,y,T,E,x;return b(function(A){switch(A.g){case 1:return i=Xr,o=GT(e,r),s=o.segment,s.status==2?A.return(Uf(t)):(u=s.N(),a=new Vt(u[0]),c=a.ab.split(".").pop(),f=kg.get(t),(h=f.get(c))||(h=Cg.get(c))||(h=Ig(t,n))?A.return(h):(y=1,T=nn(u,e.g.retryParameters),ye(A,2),T.method="HEAD",I(A,Qi(e,T,i,{type:y}).promise,4)));case 4:E=A.h,g=E.headers["content-type"],Oe(A,3);break;case 2:if(x=ve(A),!x||x.code!=1002&&x.code!=1001){A.s(3);break}return T.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(T.headers.Range="bytes=0-0"),I(A,Qi(e,T,i,{type:y}).promise,6);case 6:E=A.h,g=E.headers["content-type"];case 3:if(!g){A.s(7);break}if(h=g.toLowerCase().split(";")[0],h!="application/octet-stream"){A.s(8);break}if(E.data.byteLength){A.s(9);break}return T.method="GET",I(A,Qi(e,T,i,{type:y}).promise,10);case 10:E=A.h;case 9:nu(Le(E.data))&&(h="video/mp2t");case 8:if(h!="application/octet-stream")return A.return(h);case 7:return A.return(Uf(t))}})}function KT(e,t,n,r,i,o,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=i||void 0,e.videoLayout=o||void 0,e.colorGamut=s||void 0)}function Mg(e,t,n){return Qi(e,nn(t,e.g.retryParameters),0,{type:n?2:3})}function WT(e){var t,n,r,i,o,s;return b(function(u){switch(u.g){case 1:return e.h?(ye(u,2),t=Date.now(),I(u,e.update(),4)):u.return();case 4:n=Date.now(),Ln(e)&&(r=(n-t)/1e3,e.Pb.sample(1,r),i=0<e.g.updatePeriod?e.g.updatePeriod:e.o,o=Math.max(0,i-le(e.Pb)),e.B.da(o)),Oe(u,3);break;case 2:if(s=ve(u),!e.h)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),u.return();s.severity=1,e.h.onError(s),e.B.da(.1);case 3:if(!e.h)return u.return();e.h.onManifestUpdated(),ae(u)}})}function Ln(e){return e.Ea!=Vf}function Ff(e,t){e.Ea=t,e.l&&e.l.Gc(!Ln(e)),Ln(e)||e.B.stop()}function Qi(e,t,n,r){if(!e.Z)throw new j(2,7,7001);return r||(r={}),r.isPreload=e.Qb(),t=e.h.networkingEngine.request(n,t,r),ts(e.Z,t),t}function Bf(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function yR(e,t,n,r){var i,o,s,u,a,c;return b(function(f){if(f.g==1){if(n=="video/mp2t")throw new j(2,4,4040);if(S.shakaMediaKeysPolyfill==="apple")throw new j(2,4,4041);if(i=ft(t,"METHOD"),o=["SAMPLE-AES","SAMPLE-AES-CTR"],!o.includes(i))return f.return(null);s="cenc",i=="SAMPLE-AES"&&(s="cbcs"),u=ft(t,"URI"),a=lo("com.apple.fps",s,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],u);var h=new Vt(u).nb.replace(/-/g,"").toLowerCase();return(c=h.length===32&&/^[0-9a-f]+$/.test(h)?h:null)||!r?f.s(2):I(f,zT(e,r),3)}return f.g!=2&&(c=f.h),c&&a.keyIds.add(c),f.return(a)})}function XT(e,t,n,r,i,o){var s,u,a,c,f,h,g,y,T,E,x,A;return b(function(M){switch(M.g){case 1:if(n=="video/mp2t")throw new j(2,4,4040);if(S.shakaMediaKeysPolyfill==="apple")throw new j(2,4,4041);if(s=ft(t,"METHOD"),u=["SAMPLE-AES","SAMPLE-AES-CTR"],!u.includes(s))return M.return(null);if(a=Co(r(),ft(t,"URI"),o),a[0].startsWith("data:text/plain;base64,")){c=Ri(Ir(a[0].split("data:text/plain;base64,").pop())),M.s(2);break}return f=a.sort().join(""),e.na.has(f)||(h=nn(a,e.g.retryParameters),g=Qi(e,h,6).promise,e.na.set(f,g)),I(M,e.na.get(f),3);case 3:y=M.h,c=Ri(y.data);case 2:if(T="00000000000000000000000000000000",!i){M.s(4);break}return I(M,zT(e,i),5);case 5:(E=M.h)&&(T=E);case 4:return x=new Map,x.set(T,c),A="cenc",s=="SAMPLE-AES"&&(A="cbcs"),M.return(Ny(x,A))}})}function zT(e,t){var n,r,i,o;return b(function(s){return s.g==1?(n=null,e.oa.has(t)?(n=e.oa.get(t),s.s(2)):(r=Ia(t.N(),t.uc(),t.tc(),e.g.retryParameters),i=Xr,I(s,Qi(e,r,i,{type:0}).promise,3))):(s.g!=2&&(o=s.h,t.Ld(o.data),n=AM(o.data),e.oa.set(t,n)),s.return(n))})}D("shaka.hls.HlsParser",Of);var Cg=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),vR=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),SR=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),TR=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),wR=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),kg=new Map().set("audio",vR).set("video",SR).set("text",TR).set("image",wR),qT=new Set(["video/mp2t"].concat(J(ji))),Vf="VOD",YT="EVENT",Hf="LIVE",xR={Qh:Vf,ak:YT,ik:Hf};rs("application/x-mpegurl",function(){return new Of}),rs("application/vnd.apple.mpegurl",function(){return new Of});function Gf(e){return Ef(e)}var ER=new Map().set("com.microsoft.playready",Gf).set("com.microsoft.playready.recommendation",Gf).set("com.microsoft.playready.software",Gf).set("com.microsoft.playready.hardware",Gf);function Dg(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.C=new ie(5),this.o=new ze(function(){AR(e)}),this.B=new qs,this.m=new Map,this.A=function(){return!1}}p=Dg.prototype,p.configure=function(e,t){this.g=e,t&&(this.A=t)},p.start=function(e,t){var n=this;return b(function(r){if(r.g==1)return n.l=[e],n.h=t,I(r,Rg(n),2);if(!n.h)throw new j(2,7,7001);return r.return(n.j)})};function AR(e){var t;b(function(n){switch(n.g){case 1:return ye(n,2),I(n,Rg(e),4);case 4:Oe(n,3);break;case 2:t=ve(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();ae(n)}})}p.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},p.update=function(){var e=this,t;return b(function(n){if(n.g==1)return ye(n,2),I(n,Rg(e),4);if(n.g!=2)return Oe(n,0);if(t=ve(n),!e.h||!t)return n.return();e.h.onError(t),ae(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){};function Rg(e){var t,n,r,i,o,s,u;return b(function(a){if(a.g==1)return t=nn(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:5,isPreload:e.A()}),ts(e.B,i),I(a,i.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var c=o.uri,f=o.data,h=e.g.mss.manifestPreprocessor;if(h!=Gc){if(tt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),f=rT(f,"SmoothStreamingMedia"),!f)throw new j(2,4,4046,c);h(f),f=Hr(f.outerHTML)}var g=Ju(f,"SmoothStreamingMedia");if(!g)throw new j(2,4,4046,c);if(c=e.g.mss.manifestPreprocessorTXml,c!=Kc&&c(g),e.i||(e.i=new Ee(null,0)),c=be(g,"IsLive",Zl,!1))throw new j(2,4,4047);e.i.Gc(!c),h=be(g,"TimeScale",An,1e7),f=be(g,"DVRWindowLength",An),c&&(f===0||isNaN(f))&&(f=1/0);var y=be(g,"CanSeek",Zl,!1);f===0&&y&&(f=1/0),y=null,f&&0<f&&(y=f/h),c&&!isNaN(e.g.availabilityWindowOverride)&&(y=e.g.availabilityWindowOverride),y==null&&(y=1/0),e.i.Fe(y),f=be(g,"Duration",An,1/0),c||e.i.bb(f/h),c={variants:[],textStreams:[],timescale:h,duration:f/h};var T;for(y=lt(g,"Protection"),h=e.g.mss.keySystemsBySystemId,f=[],y=v(y),T=y.next();!T.done;T=y.next())f=f.concat(lt(T.value,"ProtectionHeader"));if(f.length){for(y=[],T=0;T<f.length;T++){var E=f[T],x=E.attributes.SystemID.toLowerCase(),A=h[x];if(A){var M;e:{if(M=NS(E)){M=v(ti(M,"DATA"));for(var L=M.next();!L.done;L=M.next())if(L=zt(L.value,"KID")){M=Ir(Qt(L)),M=new Uint8Array([M[3],M[2],M[1],M[0],M[5],M[4],M[7],M[6]].concat(J(M.slice(8)))),M=Ri(M);break e}}M=null}L=Ir(Qt(E)),x=Ho(x.replace(/-/g,"")),x=[{initData:gc(L,x,new Set,0),initDataType:"cenc",keyId:M}],x=lo(A,"cenc",x),M&&x.keyIds.add(M),(A=ER.get(A))&&(x.licenseServerUri=A(E)),y.push(x)}}h=y}else h=[];for(T=h,y=[],h=[],f=[],g=lt(g,"StreamIndex"),g=v(g),E=g.next();!E.done;E=g.next()){E=E.value,A=lt(E,"QualityLevel"),x=c.timescale,M=c.duration,L=lt(E,"c");for(var _=[],F=0,P=0;P<L.length;++P){var k=L[P],O=L[P+1],U=be(k,"t",An),W=be(k,"d",An);if(k=be(k,"r",Dn),!W)break;if(U=U??F,(k=k||0)&&k--,0>k)if(O){if(O=be(O,"t",An),O==null)break;if(U>=O)break;k=Math.ceil((O-U)/W)-1}else{if(M==1/0)break;if(U/x>=M)break;k=Math.ceil((M*x-U)/W)-1}for(O=0;O<=k;++O)F=U+W,_.push({start:U/x,end:F/x,zg:U}),U=F}for(x=_,A=v(A),M=A.next();!M.done;M=A.next())(M=IR(e,E,M.value,x,T,c))&&(M.type!="audio"||e.g.disableAudio?M.type!="video"||e.g.disableVideo?M.type!=Xe||e.g.disableText||f.push(M):h.push(M):y.push(M))}for(g=[],y=v(0<y.length?y:[null]),T=y.next();!T.done;T=y.next())for(T=T.value,E=v(0<h.length?h:[null]),_=E.next();!_.done;_=E.next())A=g,x=A.push,M=e,L=T,_=_.value,P=0,L&&L.bandwidth&&0<L.bandwidth&&(P+=L.bandwidth),_&&_.bandwidth&&0<_.bandwidth&&(P+=_.bandwidth),M={id:M.u++,language:L?L.language:"und",disabledUntilTime:0,primary:!!L&&L.primary||!!_&&_.primary,audio:L,video:_,bandwidth:P,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},x.call(A,M);c.variants=g,c.textStreams=f,e.j?(e.j.variants=c.variants,e.j.textStreams=c.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:c.variants,textStreams:c.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.me()),Promise.resolve(),s=Date.now(),u=(s-r)/1e3,e.C.sample(1,u),ae(a)})}function IR(e,t,n,r,i,o){var s=t.attributes.Type;if(s!=="audio"&&s!=="video"&&s!=="text")return re("Ignoring unrecognized type:",s),null;var u=t.attributes.Language,a=e.u++,c=be(n,"Bitrate",Li),f=be(n,"MaxWidth",Li),h=be(n,"MaxHeight",Li),g=be(n,"Channels",Li),y=be(n,"SamplingRate",Li),T=o.duration;r.length&&(T=r[r.length-1].end-r[0].start);var E=e.i.getDuration();e.i.bb(Math.min(T,E));var x={id:a,originalId:t.attributes.Name||String(a),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:c||0,width:f||void 0,height:h||void 0,kind:"",encrypted:0<i.length,drmInfos:i,keyIds:new Set,language:yt(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:g,audioSamplingRate:y,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:T,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((i=t.attributes.Subtype)&&((i=PR.get(i))&&x.roles.push(i),i==="main"&&(x.primary=!0)),i=n.attributes.FourCC,(i===null||i==="")&&(i=t.attributes.FourCC),!i){if(s==="audio")i="AAC";else if(s==="video")return re('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!RR.includes(i.toUpperCase()))return re("Codec not supported:",i),null;switch(n=MR(n,s,i,x),x.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return re("Quality unsupported without CodecPrivateData",s),null;x.type="audio",x.mimeType="mss/audio/mp4",x.codecs=CR(i,n);break;case"video":if(!n)return re("Quality unsupported without CodecPrivateData",s),null;x.type="video",x.mimeType="mss/video/mp4",x.codecs=kR(n);break;case"text":x.type=Xe,x.mimeType="application/mp4",(i==="TTML"||i==="DFXP")&&(x.codecs="stpp")}return x.fullMimeTypes.add(Kt(x.mimeType,x.codecs)),x.createSegmentIndex=function(){if(x.segmentIndex)return Promise.resolve();if(e.m.has(x.id))var A=e.m.get(x.id);else A=[],x.type=="video"&&(A=x.mssPrivateData.codecPrivateData.split("00000001").slice(1)),A={id:x.id,type:x.type,codecs:x.codecs,encrypted:x.encrypted,timescale:x.mssPrivateData.timescale,duration:x.mssPrivateData.duration,lb:A,ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:null,stream:x},A=Zs(new is([A])),e.m.set(x.id,A);return A=DR(e,new Vn(function(){return[]},0,null,Lc(x),x.mssPrivateData.timescale,A,null,x.encrypted),x,t,r),x.segmentIndex=new it(A),Promise.resolve()},x.closeSegmentIndex=function(){x.segmentIndex&&(x.segmentIndex.release(),x.segmentIndex=null)},x}function MR(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=i[e],n==="AACH"?(n=new Uint8Array(4),e=i[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function CR(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function kR(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function DR(e,t,n,r,i){var o=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],i=v(i);for(var s=i.next(),u={};!s.done;u={Ie:void 0},s=i.next())u.Ie=s.value,r.push(new xe(u.Ie.start,u.Ie.end,function(a){return function(){return un(e.l,[o.replace("{start time}",String(a.Ie.zg))])}}(u),0,null,t,0,0,n.mssPrivateData.duration));return r}D("shaka.mss.MssParser",Dg);var RR="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),PR=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");rs("application/vnd.ms-sstr+xml",function(){return new Dg});function $T(e,t,n,r,i,o,s){if(200<=n&&299>=n&&n!=202||n==304)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:o};o=null;try{o=di(t)}catch{}throw new j(n==401||n==403?2:1,1,1001,r,n,o,e,s,i||r)}function Pg(){}function Kf(e,t,n,r,i,o){var s=new OR;ns(t.headers).forEach(function(f,h){s.append(h,f)});var u=new NR,a={Ig:!1,Kh:!1};if(e=LR(e,t,n,{body:t.body||void 0,headers:s,method:t.method,signal:u.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,r,i,t.streamDataCallback,o.minBytesForProgressEvents||0),e=new Wt(e,function(){return a.Ig=!0,u.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var c=new ze(function(){a.Kh=!0,u.abort()});c.da(t/1e3),e.finally(function(){c.stop()})}return e}function LR(e,t,n,r,i,o,s,u,a){var c,f,h,g,y,T,E,x,A,M,L,_,F,P;return b(function(k){switch(k.g){case 1:return c=_R,f=jR,g=new ArrayBuffer(0),T=y=0,E=Date.now(),ye(k,2),I(k,c(e,r),4);case 4:if(h=k.h,s(QT(h.headers)),r.method=="HEAD"){k.s(5);break}return A=(x=h.headers.get("Content-Length"))?parseInt(x,10):0,h.body?(M=h.clone().body.getReader(),L=function(O){function U(){var W,B,K,X;return b(function(q){switch(q.g){case 1:return ye(q,2),I(q,M.read(),4);case 4:W=q.h,Oe(q,3);break;case 2:return ve(q),q.return();case 3:if(W.done){q.s(5);break}if(y+=W.value.byteLength,!u){q.s(5);break}return I(q,u(W.value),5);case 5:B=Date.now(),K=y-T,(100<B-E&&K>=a||W.done)&&(X=W.done?0:A-y,o(B-E,K,X),T=y,E=B),W.done?O.close():(O.enqueue(W.value),U()),ae(q)}})}U()},new f({start:L}),I(k,h.arrayBuffer(),8)):I(k,h.arrayBuffer(),9);case 8:g=k.h,k.s(5);break;case 9:g=k.h,_=Date.now(),o(_-E,g.byteLength,0);case 5:Oe(k,3);break;case 2:throw F=ve(k),i.Ig?new j(1,1,7001,e,n):i.Kh?new j(1,1,1003,e,n):new j(1,1,1002,e,F,n);case 3:return P=QT(h.headers),k.return($T(P,g,h.status,e,h.url,t,n))}})}function QT(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function JT(){if(S.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(S.Response){if(!new Response("").body)return!1}else return!1;return!(!S.fetch||"polyfill"in S.fetch||!S.AbortController)}D("shaka.net.HttpFetchPlugin",Pg),Pg.isSupported=JT,Pg.parse=Kf;var _R=S.fetch,NR=S.AbortController,jR=S.ReadableStream,OR=S.Headers;JT()&&(bi("http",Kf,2,!0),bi("https",Kf,2,!0),bi("blob",Kf,2,!0));function ZT(){}function Wf(e,t,n,r,i,o){var s=new bR,u=Date.now(),a=0,c=new Promise(function(f,h){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials,s.onabort=function(){h(new j(1,1,7001,e,n))};var g=!1;s.onreadystatechange=function(){if(s.readyState==2&&!g){var T=ew(s);i(T),g=!0}},s.onload=function(T){var E=ew(s),x=s.response;try{r(Date.now()-u,T.loaded-a,0);var A=$T(E,x,s.status,e,s.responseURL,t,n);f(A)}catch(M){h(M)}},s.onerror=function(T){h(new j(1,1,1002,e,T,n))},s.ontimeout=function(){h(new j(1,1,1003,e,n))},s.onprogress=function(T){var E=Date.now(),x=o.minBytesForProgressEvents||0,A=T.loaded-a;(100<E-u&&A>=x||T.lengthComputable&&T.loaded==T.total)&&(r(E-u,A,s.readyState==4?0:T.total-T.loaded),a=T.loaded,u=E)};for(var y in t.headers)s.setRequestHeader(y.toLowerCase(),t.headers[y]);s.send(t.body)});return new Wt(c,function(){return s.abort(),Promise.resolve()})}function ew(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}D("shaka.net.HttpXHRPlugin",ZT),ZT.parse=Wf;var bR=S.XMLHttpRequest;bi("http",Wf,1,!0),bi("https",Wf,1,!0),bi("blob",Wf,1,!0);function tw(e,t,n,r,i){this.g=e,this.i=t,this.groupId=n,this.h=r,this.j=i}function Lg(e){var t=e.Ib(!1);return t?Di(t):e.N().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.Sa+":"+e.xa}function UR(e,t){return Ia(e.g.N(),e.g.Sa,e.g.xa,t.streaming.retryParameters)}function nw(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function rw(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}nw.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function iw(e){return e.i==0?0:e.j/e.i}function ow(e){var t=this;this.u=e,this.i=new Map,this.h=new Ys(function(){return _g(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new nw,this.l=!1}ow.prototype.destroy=function(){return this.h.destroy()};function FR(e,t,n){e.o=t,e.m=n}function _g(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}function BR(e,t,n,r,i,o){Tt(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){var u,a,c,f,h,g,y;return b(function(T){if(T.g==1)return I(T,GR(e,n),2);if(u=T.h,e.h.g)throw new j(2,9,7001);if(i)for(f in a=Le(u),c=new Rh(a),c.data)h=Number(f),g=c.data[h],y=c.g[h],e.m(g,y);return e.g.close(r,u.byteLength),e.o(iw(e.g),e.g.g),T.return(o(u))})});e.i.set(t,s)}function VR(e,t,n,r,i,o){Tt(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new j(2,9,7001);if(i){var u=Le(n);u=new Rh(u);for(var a in u.data){var c=Number(a);e.m(u.data[c],u.g[c])}}return e.g.close(r,n.byteLength),e.o(iw(e.g),e.g.g),o(n)});e.i.set(t,s)}function HR(e){return b(function(t){return t.g==1?I(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function GR(e,t){var n,r,i,o;return b(function(s){return s.g==1?(n=Xr,r=e.u.request(n,t),i=function(){return r.abort()},e.j.push(i),I(s,r.promise,2)):(o=s.h,Gr(e.j,i),s.return(o.data))})}function Xf(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new pt,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Xf.prototype.abort=function(){var e=this;return b(function(t){if(t.g==1){try{e.i.abort()}catch{}return ye(t,2),I(t,e.g,4)}if(t.g!=2)return Oe(t,0);ve(t),ae(t)})};function Ng(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var o;return b(function(s){if(s.g==1)return i.result==null?(n(),s.return()):(o=i.result,I(s,t(o.key,o.value,o),2));o.continue(),ae(s)})}})}Xf.prototype.store=function(){return this.h},Xf.prototype.promise=function(){return this.g};function jg(e){this.h=e,this.g=[]}jg.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function ms(e,t){return zf(e,t,"readwrite")}function zf(e,t,n){n=e.h.transaction([t],n);var r=new Xf(n,t);return e.g.push(r),r.promise().then(function(){Gr(e.g,r)},function(){Gr(e.g,r)}),r}function ys(e,t,n){this.h=new jg(e),this.i=t,this.g=n}p=ys.prototype,p.destroy=function(){return this.h.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return sw(this.i)},p.removeSegments=function(e,t){return uw(this,this.i,e,t)},p.getSegments=function(e){var t=this,n;return b(function(r){return r.g==1?I(r,aw(t,t.i,e),2):(n=r.h,r.return(n.map(function(i){return t.Kg(i)})))})},p.addManifests=function(){return sw(this.g)},p.updateManifest=function(){return Promise.reject(new j(2,9,9016,"Cannot modify values in "+this.g))};function KR(e,t,n){e=ms(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}p.updateManifestExpiration=function(e,t){var n=ms(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(i){(i=i.target.result)&&(i.expiration=t,r.put(i,e))},n.promise()},p.removeManifests=function(e,t){return uw(this,this.g,e,t)},p.getManifests=function(e){var t=this,n;return b(function(r){return r.g==1?I(r,aw(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(i){return t.jd(i)}))))})},p.getAllManifests=function(){var e=this,t,n;return b(function(r){return r.g==1?(t=zf(e.h,e.g,"readonly"),n=new Map,I(r,Ng(t,function(i,o){var s;return b(function(u){if(u.g==1)return I(u,e.jd(o),2);s=u.h,n.set(i,s),ae(u)})}),2)):r.g!=3?I(r,t.promise(),3):r.return(n)})},p.Kg=function(e){return e},p.jd=function(e){return Promise.resolve(e)};function sw(e){return Promise.reject(new j(2,9,9011,"Cannot add new value to "+e))}p.add=function(e,t){var n=this,r,i,o,s,u,a,c;return b(function(f){if(f.g==1){for(r=ms(n.h,e),i=r.store(),o=[],s=v(t),u=s.next(),a={};!u.done;a={eg:void 0},u=s.next())c=u.value,a.eg=i.add(c),a.eg.onsuccess=function(h){return function(){o.push(h.eg.result)}}(a);return I(f,r.promise(),2)}return f.return(o)})};function uw(e,t,n,r){e=ms(e.h,t),t=e.store(),n=v(n);for(var i=n.next(),o={};!i.done;o={Sf:void 0},i=n.next())o.Sf=i.value,t.delete(o.Sf).onsuccess=function(s){return function(){return r(s.Sf)}}(o);return e.promise()}function aw(e,t,n){var r,i,o,s,u,a,c;return b(function(f){if(f.g==1){for(r=zf(e.h,t,"readonly"),i=r.store(),o={},s=[],u=v(n),a=u.next(),c={};!a.done;c={ze:void 0,ie:void 0},a=u.next())c.ie=a.value,c.ze=i.get(c.ie),c.ze.onsuccess=function(h){return function(){h.ze.result==null&&s.push(h.ie),o[h.ie]=h.ze.result}}(c);return I(f,r.promise(),2)}if(s.length)throw new j(2,9,9012,"Could not find values for "+s);return f.return(n.map(function(h){return o[h]}))})}function rl(e){this.g=new jg(e)}rl.prototype.destroy=function(){return this.g.destroy()},rl.prototype.getAll=function(){var e=this,t,n;return b(function(r){return r.g==1?(t=zf(e.g,"session-ids","readonly"),n=[],I(r,Ng(t,function(i,o){n.push(o)}),2)):r.g!=3?I(r,t.promise(),3):r.return(n)})},rl.prototype.add=function(e){var t=ms(this.g,"session-ids"),n=t.store();e=v(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},rl.prototype.remove=function(e){var t=this,n;return b(function(r){return r.g==1?(n=ms(t.g,"session-ids"),I(r,Ng(n,function(i,o,s){e.includes(o.sessionId)&&s.delete()}),2)):I(r,n.promise(),0)})};function Wn(){this.g=new Map}Wn.prototype.destroy=function(){for(var e=[],t=v(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Wn.prototype.init=function(){var e=this;il.forEach(function(i,o){(i=i())&&e.g.set(o,i)});for(var t=[],n=v(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function lw(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(i,o){i.hasFixedKeySpace()||t||(t={path:{Ab:r,Ta:o},Ta:i})})}),t)return t;throw new j(2,9,9013,"Could not find a cell that supports add-operations")}function WR(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(i,o){t({Ab:r,Ta:o},i)})})}function qf(e,t,n){if(e=e.g.get(t),!e)throw new j(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new j(2,9,9013,"Could not find cell with name "+n);return t}function XR(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function zR(e){var t=Array.from(e.g.keys());if(!t.length)throw new j(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function qR(e){var t,n,r;return b(function(i){return i.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=il,r.forEach(function(o){(o=o())&&t.push(o)})),I(i,Promise.all(t.map(function(o){return o.erase()})),2)):n?i.s(0):I(i,Promise.all(t.map(function(o){return o.destroy()})),0)})}function cw(e,t){il.set(e,t)}D("shaka.offline.StorageMuxer",Wn),Wn.unregister=function(e){il.delete(e)},Wn.register=cw,Wn.prototype.destroy=Wn.prototype.destroy;var il=new Map;function ol(){ys.apply(this,arguments)}St(ol,ys),ol.prototype.updateManifestExpiration=function(e,t){var n=this,r,i,o;return b(function(s){return r=ms(n.h,n.g),i=r.store(),o=new pt,i.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,i.put(u),o.resolve()):o.reject(new j(2,9,9012,"Could not find values for "+e))},I(s,Promise.all([r.promise(),o]),0)})},ol.prototype.jd=function(e){var t,n,r,i,o,s;return b(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,o=YR(e.periods[n],i),t.push(o);return I(u,YS(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function YR(e,t){QR(e);for(var n=v(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(i){return $R(i,e.startTime,t)})}function $R(e,t,n){var r=e.initSegmentUri?fw(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=fw(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}ol.prototype.Kg=function(e){return{data:e.data}};function fw(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new j(2,9,9004,"Could not parse uri "+e)}function QR(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=v(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=v(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var i=v(e),o=i.next();!o.done;o=i.next())o.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=v(t),o=i.next();!o.done;o=i.next())o.value.variantIds.push(r);if(e.length&&t.length)for(t=v(t),r=t.next();!r.done;r=t.next())for(r=r.value,i=v(e),o=i.next();!o.done;o=i.next()){o=o.value;var s=n++;r.variantIds.push(s),o.variantIds.push(s)}}}function Yf(){ys.apply(this,arguments)}St(Yf,ys),Yf.prototype.jd=function(e){var t,n,r,i,o,s;return b(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var a=e.periods[n],c=[],f=v(a.streams),h=f.next();!h.done;h=f.next())h=h.value,h.variantIds.length!=0&&c.push(JR(h,a.startTime,a.startTime+i));o=c,t.push(o)}return I(u,YS(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})};function JR(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Og(){ys.apply(this,arguments)}St(Og,ys),p=Og.prototype,p.hasFixedKeySpace=function(){return!1},p.addSegments=function(e){return this.add(this.i,e)},p.addManifests=function(e){return this.add(this.g,e)},p.updateManifest=function(e,t){return KR(this,e,t)},p.jd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function dw(){this.m=this.j=this.i=this.h=this.g=this.l=null}p=dw.prototype,p.init=function(){var e=this,t=new pt,n=!1,r=new ze(function(){n=!0,t.reject(new j(2,9,9017))});r.da(5);var i=S.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){if(!n){var o=i.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new ol(o,"segment","manifest"):null,e.g=s,s=o.objectStoreNames,s=s.contains("manifest-v2")&&s.contains("segment-v2")?new Yf(o,"segment-v2","manifest-v2"):null,e.h=s,s=o.objectStoreNames,s=s.contains("manifest-v3")&&s.contains("segment-v3")?new Yf(o,"segment-v3","manifest-v3"):null,e.i=s,s=o.objectStoreNames,s=s.contains("manifest-v5")&&s.contains("segment-v5")?new Og(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new rl(o):null,e.m=o,r.stop(),t.resolve()}},i.onupgradeneeded=function(){for(var o=i.result,s=v(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())u=u.value,o.objectStoreNames.contains(u)||o.createObjectStore(u,{autoIncrement:!0})},i.onerror=function(o){n||(t.reject(new j(2,9,9001,i.error)),r.stop(),o.preventDefault())},t},p.destroy=function(){var e=this;return b(function(t){switch(t.g){case 1:if(!e.g){t.s(2);break}return I(t,e.g.destroy(),2);case 2:if(!e.h){t.s(4);break}return I(t,e.h.destroy(),4);case 4:if(!e.i){t.s(6);break}return I(t,e.i.destroy(),6);case 6:if(!e.j){t.s(8);break}return I(t,e.j.destroy(),8);case 8:if(!e.m){t.s(10);break}return I(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),ae(t)}})},p.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},p.getEmeSessionCell=function(){return this.m},p.erase=function(){var e=this;return b(function(t){switch(t.g){case 1:if(!e.g){t.s(2);break}return I(t,e.g.destroy(),2);case 2:if(!e.h){t.s(4);break}return I(t,e.h.destroy(),4);case 4:if(!e.i){t.s(6);break}return I(t,e.i.destroy(),6);case 6:if(!e.j){t.s(8);break}return I(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),I(t,ZR(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,I(t,e.init(),0)}})};function ZR(){var e=new pt,t=S.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new j(2,9,9001,t.error)),n.preventDefault()},e}cw("idb",function(){return(!Vr()||Vr()&&uo())&&!Jr()&&S.indexedDB?new dw:null});function yi(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}yi.prototype.Ab=function(){return this.i},yi.prototype.Ta=function(){return this.h},yi.prototype.key=function(){return this.l},yi.prototype.toString=function(){return this.j};function bg(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new yi(t,n,r,Number(e[4])):null}function hw(e,t){this.h=e,this.g=t}function pw(e,t){var n=new Ee(null,0);n.bb(t.duration);var r=t.streams.filter(function(c){return c.type=="audio"}),i=t.streams.filter(function(c){return c.type=="video"});r=eP(e,r,i,n),i=t.streams.filter(function(c){return c.type==Xe}).map(function(c){return $f(e,c,n)});var o=t.streams.filter(function(c){return c.type=="image"}).map(function(c){return $f(e,c,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=v(r.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function eP(e,t,n,r){for(var i=new Set,o=v(t),s=o.next();!s.done;s=o.next()){s=v(s.value.variantIds);for(var u=s.next();!u.done;u=s.next())i.add(u.value)}for(o=v(n),s=o.next();!s.done;s=o.next())for(s=v(s.value.variantIds),u=s.next();!u.done;u=s.next())i.add(u.value);for(o=new Map,i=v(i),s=i.next();!s.done;s=i.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=v(t),i=t.next();!i.done;i=t.next())for(s=i.value,i=$f(e,s,r),s=v(s.variantIds),u=s.next();!u.done;u=s.next())u=o.get(u.value),u.language=i.language,u.primary=u.primary||i.primary,u.audio=i;for(n=v(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=$f(e,i,r),i=v(i.variantIds),s=i.next();!s.done;s=i.next())s=o.get(s.value),s.primary=s.primary||t.primary,s.video=t;return o}function $f(e,t,n){var r=t.segments.map(function(i){return tP(e,i,t)});return n.Ed(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new it(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Kt(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function tP(e,t,n){var r=new yi("segment",e.h,e.g,t.dataKey);return e=new xe(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?nP(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Ge(t.thumbnailSprite),e}function nP(e,t){var n=new yi("segment",e.h,e.g,t);return new Vn(function(){return[n.toString()]},0,null)}function gw(){this.g=null}p=gw.prototype,p.configure=function(){},p.start=function(e,t){var n=this,r,i,o,s,u,a,c;return b(function(f){switch(f.g){case 1:if(r=bg(e),n.g=r,r==null||r.g!="manifest")throw new j(2,1,9004,e);return i=new Wn,hn(f,2),I(f,i.init(),4);case 4:return I(f,qf(i,r.Ab(),r.Ta()),5);case 5:return o=f.h,I(f,o.getManifests([r.key()]),6);case 6:return s=f.h,u=s[0],a=new hw(r.Ab(),r.Ta()),c=pw(a,u),t.makeTextStreamsForClosedCaptions(c),f.return(c);case 2:return Ct(f),I(f,i.destroy(),7);case 7:ut(f,0)}})},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(e,t){var n=this,r,i,o,s,u,a,c;return b(function(f){switch(f.g){case 1:return r=n.g,i=new Wn,ye(f,2,3),I(f,i.init(),5);case 5:return I(f,qf(i,r.Ab(),r.Ta()),6);case 6:return o=f.h,I(f,o.getManifests([r.key()]),7);case 7:if(s=f.h,u=s[0],a=u.sessionIds.includes(e),c=u.expiration==null||u.expiration>t,!a||!c){f.s(3);break}return I(f,o.updateManifestExpiration(r.key(),t),3);case 3:return Ct(f),I(f,i.destroy(),10);case 10:ut(f,0);break;case 2:ve(f),f.s(3)}})},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){},rs("application/x-offline-manifest",function(){return new gw});function mw(){}function yw(e,t){var n=bg(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=zs(e)):e=n&&n.g=="segment"?rP(n.key(),n,t):es(new j(2,1,9004,e)),e}function rP(e,t,n){var r=new Wn;return zs(void 0).Ha(function(){return r.init()}).Ha(function(){return qf(r,t.Ab(),t.Ta())}).Ha(function(i){return i.getSegments([t.key()])}).Ha(function(i){return{uri:t,data:i[0].data,headers:{},originalRequest:n}}).finally(function(){return r.destroy()})}D("shaka.offline.OfflineScheme",mw),mw.plugin=yw,bi("offline",yw);function vw(e,t,n){var r,i,o,s,u,a;return b(function(c){switch(c.g){case 1:r=[];for(var f=[],h=v(n),g=h.next();!g.done;g=h.next()){g=g.value;for(var y=!1,T=v(f),E=T.next();!E.done;E=T.next())if(E=E.value,oP(E.info,g)){E.sessionIds.push(g.sessionId),y=!0;break}y||f.push({info:g,sessionIds:[g.sessionId]})}i=v(f),o=i.next();case 2:if(o.done){c.s(4);break}return s=o.value,u=iP(e,t,s),I(c,u,5);case 5:a=c.h,r=r.concat(a),o=i.next(),c.s(2);break;case 4:return c.return(r)}})}function iP(e,t,n){var r,i;return b(function(o){switch(o.g){case 1:return r=new mc({Xb:t,onError:function(){},te:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ye(o,2),r.configure(e),I(o,u2(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:Oe(o,3);break;case 2:return ve(o),I(o,r.destroy(),5);case 5:return o.return([]);case 3:return i=[],I(o,Promise.all(n.sessionIds.map(function(s){return b(function(u){if(u.g==1)return ye(u,2),I(u,c2(r,s),4);if(u.g!=2)return i.push(s),Oe(u,0);ve(u),ae(u)})})),6);case 6:return I(o,r.destroy(),7);case 7:return o.return(i)}})}function oP(e,t){function n(r,i){return r.robustness==i.robustness&&r.contentType==i.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ih(e.audioCapabilities,t.audioCapabilities,n)&&ih(e.videoCapabilities,t.videoCapabilities,n)}function sP(e,t,n){var r=t.presentationTimeline.getDuration();return t=Sw(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Ug(e,t){var n=pw(new hw(e.Ab(),e.Ta()),t),r=t.appMetadata||{};return n=Sw(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function Sw(e){var t=[],n=uc(e.variants);n=v(n);for(var r=n.next();!r.done;r=n.next())t.push(Jo(r.value));for(e=v(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Zo(n.value));return t}function uP(){this.g=new Map}function aP(e,t){var n=t.audio,r=t.video;if(n&&!r&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&r&&e.g.set(r.id,r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,o=r.bandwidth||t.bandwidth-i;0>=o&&(o=t.bandwidth),e.g.set(n.id,i),e.g.set(r.id,o)}}function lP(e,t){e.g.set(t.id,t.bandwidth||2048)}function Tw(e,t){return e=e.g.get(t),e==null&&(e=0),e}function fn(e){var t=this;if(e&&e.constructor!=ee)throw new j(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.yb()):(this.h=fu(),this.g=new wt),this.i=[],this.l=[];var n=!e;this.j=new Ys(function(){var r,i,o,s,u;return b(function(a){switch(a.g){case 1:return I(a,Promise.all(t.l.map(function(c){return _g(c)})),2);case 2:for(r=function(){},i=[],o=v(t.i),s=o.next();!s.done;s=o.next())u=s.value,i.push(u.then(r,r));return I(a,Promise.all(i),3);case 3:if(!n){a.s(4);break}return I(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,ae(a)}})}),this.m=1e9}function Fg(){if(ci())e:{for(var e=v(il.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}p=fn.prototype,p.destroy=function(){return this.j.destroy()},p.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Bc(e,t)),To(this.h,e)},p.getConfiguration=function(){var e=fu();return To(e,this.h,fu()),e},p.yb=function(){return this.g},p.store=function(e,t,n,r,i){var o=this,s=this.getConfiguration(),u=new ow(this.g);return this.l.push(u),t=cP(this,e,t||{},r||[],i||[],function(){var a;return b(function(c){return c.g==1?n?c.s(2):I(c,fs(e,o.g,s.manifest.retryParameters),3):(c.g!=2&&(n=c.h),a=Jv(e,n||null),c.return(a()))})},s,u),t=new Wt(t,function(){return _g(u)}),t.finally(function(){Gr(o.l,u)}),MP(this,t)};function cP(e,t,n,r,i,o,s,u){var a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q;return b(function(Y){switch(Y.g){case 1:return Qf(),c=a=null,f=new Wn,y=g=h=null,ye(Y,2,3),I(Y,o(),5);case 5:return a=Y.h,I(Y,SP(e,t,a,s),6);case 6:if(T=Y.h,gr(e),E=!T.presentationTimeline.U()&&!T.presentationTimeline.yc(),!E)throw new j(2,9,9005,t);x=v(r),A=x.next();case 7:if(A.done){Y.s(9);break}return M=A.value,I(Y,TP(e,M,T),10);case 10:L=Y.h,T.imageStreams.push(L),gr(e),A=x.next(),Y.s(7);break;case 9:_=v(i),F=_.next();case 11:return F.done?(Kv(s.drm.clearKeys,T.variants),O=T.variants.some(function(ne){if(ne.audio){for(var ue=v(ne.audio.drmInfos),Re=ue.next();!Re.done;Re=ue.next())if(Re.value.licenseServerUri.startsWith("data:"))return!0}if(ne.video){for(ne=v(ne.video.drmInfos),ue=ne.next();!ue.done;ue=ne.next())if(ue.value.licenseServerUri.startsWith("data:"))return!0}return!1}),U=s.offline.usePersistentLicense,O&&(U=!1),I(Y,e.Lc(T,function(ne){y=y||ne},s,U),15)):(P=F.value,I(Y,wP(e,T,P.uri,P.language,P.kind,P.mime,P.codecs),14));case 14:k=Y.h,T.textStreams.push(k),gr(e),F=_.next(),Y.s(11);break;case 15:if(c=Y.h,gr(e),y)throw y;return I(Y,dP(T,c,s,U),16);case 16:return I(Y,f.init(),17);case 17:return gr(e),I(Y,lw(f),18);case 18:return h=Y.h,gr(e),W=hP(c,T,t,n,s,u,U),B=W.$i,K=W.vg,I(Y,h.Ta.addManifests([B]),19);case 19:if(X=Y.h,gr(e),g=X[0],gr(e),y)throw y;return I(Y,fP(e,K,g,B,u,s,h.Ta,T,c,U),20);case 20:return gr(e),Aw(T,B,c,U),I(Y,h.Ta.updateManifest(g,B),21);case 21:return gr(e),q=new yi("manifest",h.path.Ab,h.path.Ta,g),Y.return(Ug(q,B));case 3:return Ct(Y),I(Y,f.destroy(),22);case 22:if(!a){Y.s(23);break}return I(Y,a.stop(),23);case 23:if(!c){Y.s(25);break}return I(Y,c.destroy(),25);case 25:ut(Y,0);break;case 2:if(Q=ve(Y),g==null){Y.s(27);break}return I(Y,ww(g),27);case 27:throw y||Q}})}function fP(e,t,n,r,i,o,s,u,a,c){var f,h,g,y,T,E,x,A,M,L,_;return b(function(F){switch(F.g){case 1:if(f={},h=0,g=function(){if(e.j.g||i.l)throw new j(2,9,7001)},y=function(P,k){var O,U,W,B,K,X,q,Q,Y;return b(function(ne){if(ne.g==1){for(O=v(P),U=O.next(),W={};!U.done;W={Nb:void 0},U=O.next())W.Nb=U.value,g(),B=UR(W.Nb,o),K=W.Nb.i,X=W.Nb.h,q=function(ue){return function(Re){var ge,st,qe,Ke;return b(function(We){switch(We.g){case 1:if(ge=ue.Nb.g,st=ge.Ib(!1),!ge.aesKey||st){We.s(2);break}return I(We,sp(Re,ge.aesKey,ue.Nb.j),3);case 3:Re=We.h;case 2:return qe=Lg(ge),I(We,s.addSegments([{data:Re}]),4);case 4:Ke=We.h,g(),f[qe]=Ke[0],h+=Re.byteLength,ae(We)}})}}(W),Q=W.Nb.g,(Y=Q.Ib(!1))?VR(i,W.Nb.groupId,Y,K,X,q):BR(i,W.Nb.groupId,B,K,X,q);return I(ne,HR(i),2)}return g(),!k||i.l?ne.s(0):(Aw(u,r,a,c),I(ne,s.updateManifest(n,r),0))})},T=!1,ye(F,2),!Bg(u)||!T||Ew(u)){F.s(4);break}return I(F,y(t.filter(function(P){return P.h}),!0),5);case 5:return g(),t=t.filter(function(P){return!P.h}),E=f,x=h,f={},h=0,I(F,xw(s,n,r,E,x,function(){return gr(e)}),6);case 6:g();case 4:if(T){F.s(7);break}return I(F,y(t,!1),8);case 8:return g(),A=f,M=h,f={},h=0,I(F,xw(s,n,r,A,M,function(){return g()}),9);case 9:g();case 7:Oe(F,0);break;case 2:return L=ve(F),_=Object.values(f),I(F,s.removeSegments(_,function(){}),10);case 10:throw L}})}function ww(e){var t,n,r,i;return b(function(o){switch(o.g){case 1:return t=new Wn,I(o,t.init(),2);case 2:return I(o,lw(t),3);case 3:return n=o.h,r=new yi("manifest",n.path.Ab,n.path.Ta,e),I(o,t.destroy(),4);case 4:return i=new fn,I(o,i.remove(r.toString()),0)}})}function xw(e,t,n,r,i,o){var s,u,a,c,f,h,g,y,T,E,x;return b(function(A){switch(A.g){case 1:for(s=!1,ye(A,2),u=!0,a=v(n.streams),c=a.next();!c.done;c=a.next())for(f=c.value,h=v(f.segments),g=h.next();!g.done;g=h.next())y=g.value,T=y.pendingSegmentRefId?r[y.pendingSegmentRefId]:null,T!=null&&(y.dataKey=T,y.pendingSegmentRefId=void 0),T=y.pendingInitSegmentRefId?r[y.pendingInitSegmentRefId]:null,T!=null&&(y.initSegmentKey=T,y.pendingInitSegmentRefId=void 0),y.pendingSegmentRefId&&(u=!1),y.pendingInitSegmentRefId&&(u=!1);return n.size+=i,u&&(n.isIncomplete=!1),I(A,e.updateManifest(t,n),4);case 4:s=!0,o(),Oe(A,0);break;case 2:return E=ve(A),I(A,ww(t),5);case 5:if(s){A.s(6);break}return x=Object.values(r),I(A,e.removeSegments(x,function(){}),6);case 6:throw E}})}function dP(e,t,n,r){var i,o,s,u,a,c,f,h,g,y,T,E,x,A,M,L,_,F,P,k,O,U,W,B,K,X,q,Q,Y,ne;return b(function(ue){switch(ue.g){case 1:return i={width:1/0,height:1/0},HI(e,n.restrictions,i),I(ue,lv(t,e,r,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(o=[],s=n.preferredDecodingAttributes,u=n.preferredVideoCodecs,a=n.preferredAudioCodecs,c=n.preferredTextFormats,av(e,u,a,s,c),f=v(e.variants),h=f.next();!h.done;h=f.next())g=h.value,o.push(Jo(g));for(y=v(e.textStreams),T=y.next();!T.done;T=y.next())E=T.value,o.push(Zo(E));for(x=v(e.imageStreams),A=x.next();!A.done;A=x.next())M=A.value,o.push(Eh(M));return I(ue,n.offline.trackSelectionCallback(o),3);case 3:for(L=ue.h,_=e.presentationTimeline.getDuration(),F=0,P=v(L),k=P.next();!k.done;k=P.next())O=k.value,U=O.bandwidth*_/8,F+=U;return ye(ue,4),I(ue,n.offline.downloadSizeCallback(F),6);case 6:if(W=ue.h,!W)throw new j(2,9,9014);Oe(ue,5);break;case 4:throw B=ve(ue),B instanceof j?B:new j(2,9,9015);case 5:for(K=new Set,X=new Set,q=new Set,Q=v(L),Y=Q.next();!Y.done;Y=Q.next())ne=Y.value,ne.type=="variant"&&K.add(ne.id),ne.type=="text"&&X.add(ne.id),ne.type=="image"&&q.add(ne.id);e.variants=e.variants.filter(function(Re){return K.has(Re.id)}),e.textStreams=e.textStreams.filter(function(Re){return X.has(Re.id)}),e.imageStreams=e.imageStreams.filter(function(Re){return q.has(Re.id)}),DP(e),ae(ue)}})}function hP(e,t,n,r,i,o,s){var u=sP(n,t,r),a=i.offline.progressCallback;FR(o,function(T,E){u.size=E,a(u,T)},function(T,E){c&&s&&f==E&&ca(e,"cenc",T)});var c=Bg(t)&&!Ew(t),f=null;c&&(f=RP.get(e.h.keySystem));for(var h=new uP,g=v(t.textStreams),y=g.next();!y.done;y=g.next())h.g.set(y.value.id,52);for(g=v(t.imageStreams),y=g.next();!y.done;y=g.next())lP(h,y.value);for(g=v(t.variants),y=g.next();!y.done;y=g.next())aP(h,y.value);return o=EP(o,h,t,i),i=o.streams,o=o.vg,(h=e.h)&&s&&(h.initData=[]),{$i:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.pd(),streams:i,sessionIds:s?Ov(e):[],drmInfo:h,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},vg:o}}function Bg(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function Ew(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function Aw(e,t,n,r){if(t.expiration=n.pd(),n=Ov(n),t.sessionIds=r?n:[],Bg(e)&&r&&!n.length)throw new j(2,9,9007)}p.remove=function(e){return Vg(this,pP(this,e))};function pP(e,t){var n,r,i,o,s,u;return b(function(a){switch(a.g){case 1:if(Qf(),n=bg(t),n==null||n.g!="manifest")throw new j(2,9,9004,t);return r=n,i=new Wn,hn(a,2),I(a,i.init(),4);case 4:return I(a,qf(i,r.Ab(),r.Ta()),5);case 5:return o=a.h,I(a,o.getManifests([r.key()]),6);case 6:return s=a.h,u=s[0],I(a,Promise.all([gP(e,u,i),mP(o,r,u)]),2);case 2:return Ct(a),I(a,i.destroy(),8);case 8:ut(a,0)}})}function Iw(e,t){for(var n=[],r=v(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&i.type=="video"?n.push({contentType:Kt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||i.type!="audio"||n.push({contentType:Kt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function gP(e,t,n){return b(function(r){return I(r,kP(e.g,e.h.drm,n,t),0)})}function mP(e,t,n){function r(){}var i=CP(n);return Ug(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}p.sj=function(){return Vg(this,yP(this))};function yP(e){var t,n,r,i,o,s,u,a,c,f;return b(function(h){switch(h.g){case 1:return Qf(),t=e.g,n=e.h.drm,r=new Wn,i=!1,hn(h,2),I(h,r.init(),4);case 4:o=[],XR(r,function(g){return o.push(g)}),s=v(o),u=s.next();case 5:if(u.done){h.s(2);break}return a=u.value,I(h,a.getAll(),8);case 8:return c=h.h,I(h,vw(n,t,c),9);case 9:return f=h.h,I(h,a.remove(f),10);case 10:f.length!=c.length&&(i=!0),u=s.next(),h.s(5);break;case 2:return Ct(h),I(h,r.destroy(),11);case 11:ut(h,3);break;case 3:return h.return(!i)}})}p.list=function(){return Vg(this,vP())};function vP(){var e,t,n;return b(function(r){switch(r.g){case 1:return Qf(),e=[],t=new Wn,hn(r,2),I(r,t.init(),4);case 4:return n=Promise.resolve(),WR(t,function(i,o){n=n.then(function(){var s;return b(function(u){if(u.g==1)return I(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,c){a=Ug(new yi("manifest",i.Ab,i.Ta,c),a),e.push(a)}),ae(u)})})}),I(r,n,2);case 2:return Ct(r),I(r,t.destroy(),6);case 6:ut(r,3);break;case 3:return r.return(e)}})}function SP(e,t,n,r){var i,o,s,u,a;return b(function(c){if(c.g==1)return i=null,o=e.g,s={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(f){i=f},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),gr(e),I(c,n.start(t,s),2);if(c.g!=3)return u=c.h,gr(e),a=Cw(u),I(c,Promise.all(kh(a,function(f){return f.createSegmentIndex()})),3);if(gr(e),i)throw i;return c.return(u)})}function TP(e,t,n){var r,i,o,s,u,a,c,f,h,g,y,T,E,x,A;return b(function(M){switch(M.g){case 1:return I(M,Mw(e,t),2);case 2:if(r=M.h,r!="text/vtt")throw new j(1,2,2017,t);return I(M,xP(t,e.g,e.h.streaming.retryParameters),3);case 3:if(i=M.h,o=ia(r),!o)throw new j(2,2,2014,r);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},a=Le(i),c=s.parseMedia(a,u,t,[]),f=[],h=v(c),g=h.next(),y={};!g.done;y={Pe:void 0,Nc:void 0},g=h.next())y.Nc=g.value,y.Pe=null,T=function(L){return function(){return L.Pe==null&&(L.Pe=un([t],[L.Nc.payload])),L.Pe||[]}}(y),E=new xe(y.Nc.startTime,y.Nc.endTime,T,0,null,null,0,0,1/0),y.Nc.payload.includes("#xywh")&&(x=y.Nc.payload.split("#xywh=")[1].split(","),x.length===4&&E.Ge({height:parseInt(x[3],10),positionX:parseInt(x[0],10),positionY:parseInt(x[1],10),width:parseInt(x[2],10)})),f.push(E);if(A=r,!f.length){M.s(4);break}return I(M,fs(f[0].N()[0],e.g,e.h.manifest.retryParameters),5);case 5:A=M.h;case 4:return M.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new it(f),mimeType:A||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Kt(A||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function wP(e,t,n,r,i,o,s){var u,a,c;return b(function(f){if(f.g==1)return o?f.s(2):I(f,Mw(e,n),3);if(f.g!=2&&(o=f.h),u={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Rc(0,t.presentationTimeline.getDuration(),[n]),mimeType:o||"",codecs:s||"",kind:i,encrypted:!1,drmInfos:[],keyIds:new Set,language:r,originalLanguage:r,label:null,type:Xe,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Kt(o||"",s||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},a=Kt(u.mimeType,u.codecs),c=Ks(a),!c)throw new j(2,2,2014,o);return f.return(u)})}function Mw(e,t){var n;return b(function(r){switch(r.g){case 1:return ye(r,2),I(r,fs(t,e.g,e.h.streaming.retryParameters),4);case 4:n=r.h,Oe(r,3);break;case 2:ve(r);case 3:if(n)return r.return(n);throw new j(1,2,2011,t)}})}function xP(e,t,n){var r,i,o;return b(function(s){return s.g==1?(r=Xr,i=nn([e],n),i.method="GET",I(s,t.request(r,i).promise,2)):(o=s.h,s.return(o.data))})}p.Lc=function(e,t,n,r){var i=this,o;return b(function(s){return s.g==1?(o=new mc({Xb:i.g,onError:t,te:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o.configure(n.drm),I(s,s2(o,e.variants,r),2)):s.g!=3?I(s,jv(o),3):s.return(o)})};function EP(e,t,n,r){var i=new Map,o=Cw(n),s=new Map;o=v(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=AP(e,t,n,u,r,i);s.set(u.id,a)}for(e=v(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),vg:Array.from(i.values())}}function AP(e,t,n,r,i,o){var s={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,mssPrivateData:r.mssPrivateData,external:r.external,fastSwitching:r.fastSwitching,isAudioMuxedInVideo:r.isAudioMuxedInVideo},u=i.offline.numberOfParallelDownloads,a=u===0?r.id:0;return IP(r,n.presentationTimeline.pb(),function(c,f){var h=Lg(c),g=void 0;if(!o.has(h)){var y=c.endTime-c.startTime;y=Tw(t,r.id)*y,y=rw(e.g,y),o.set(h,new tw(c,y,a,!1,f))}c.Y&&(g=Lg(c.Y),o.has(g)||(y=.5*Tw(t,r.id),y=rw(e.g,y),o.set(g,new tw(c.Y,y,a,!0,f)))),s.segments.push({pendingInitSegmentRefId:g,initSegmentKey:g?0:null,startTime:c.startTime,endTime:c.endTime,appendWindowStart:c.appendWindowStart,appendWindowEnd:c.appendWindowEnd,timestampOffset:c.timestampOffset,tilesLayout:c.tilesLayout,pendingSegmentRefId:h,dataKey:0,mimeType:c.mimeType,codecs:c.codecs,thumbnailSprite:c.thumbnailSprite}),u!==0&&(a=(a+1)%u)}),s}function IP(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r,t),r=e.segmentIndex.get(++t)}function gr(e){if(e.j.g)throw new j(2,9,7001)}function Qf(){if(!Fg())throw new j(2,9,9e3)}function Vg(e,t){return b(function(n){return n.g==1?(e.i.push(t),hn(n,2),I(n,t,4)):n.g!=2?n.return(n.h):(Ct(n),Gr(e.i,t),ut(n,0))})}function MP(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Gr(e.i,n)})}function CP(e){var t=new Set;e=v(e.streams);for(var n=e.next();!n.done;n=e.next()){n=v(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function kP(e,t,n,r){var i,o,s;return b(function(u){return u.g==1?r.drmInfo?(i=zR(n),o=r.sessionIds.map(function(a){return{sessionId:a,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Iw(r,!1),videoCapabilities:Iw(r,!0)}}),I(u,vw(t,e,o),2)):u.return():u.g!=3?(s=u.h,I(u,i.remove(s),3)):I(u,i.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function Cw(e){for(var t=new Set,n=v(e.variants),r=n.next();!r.done;r=n.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video);for(n=v(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=v(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function DP(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=v(t),r=n.next();!r.done;r=n.next()){r=v(t);for(var i=r.next();!i.done;i=r.next());}for(t=v(e),n=t.next();!n.done;n=t.next())for(n=v(e),r=n.next();!r.done;r=n.next());}D("shaka.offline.Storage",fn),fn.deleteAll=function(){var e;return b(function(t){return t.g==1?(e=new Wn,hn(t,2),I(t,qR(e),2)):t.g!=5?(Ct(t),I(t,e.destroy(),5)):ut(t,0)})},fn.prototype.list=fn.prototype.list,fn.prototype.removeEmeSessions=fn.prototype.sj,fn.prototype.remove=fn.prototype.remove,fn.prototype.store=fn.prototype.store,fn.prototype.getNetworkingEngine=fn.prototype.yb,fn.prototype.getConfiguration=fn.prototype.getConfiguration,fn.prototype.configure=fn.prototype.configure,fn.prototype.destroy=fn.prototype.destroy,fn.support=Fg;var RP=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");l1("offline",Fg);function Cn(){}function Xn(e,t){for(e={priority:t||0,callback:e},t=0;t<sl.length;t++)if(sl[t].priority<e.priority){sl.splice(t,0,e);return}sl.push(e)}D("shaka.polyfill",Cn),Cn.register=Xn,Cn.installAll=function(){for(var e=v(sl),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){re("Error installing polyfill!",n)}}};var sl=[];function kw(){}function Dw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=v(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())PP(t.value)}function PP(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Cn.Aria=kw,kw.install=Dw,Xn(Dw);function Rw(){}function Pw(){Zr()||Xt("Sky_STB")||Kx()}Cn.EncryptionScheme=Rw,Rw.install=Pw,Xn(Pw,-2);function Lw(){}function _w(){if(S.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ku),document.addEventListener("webkitfullscreenerror",ku),document.addEventListener("mozfullscreenchange",ku),document.addEventListener("mozfullscreenerror",ku),document.addEventListener("MSFullscreenChange",ku),document.addEventListener("MSFullscreenError",ku)}}function ku(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Cn.Fullscreen=Lw,Lw.install=_w,Xn(_w);function Hg(){}function Nw(){var e=!0;(Vr()&&!uo()&&!zd()||pn()||Ls()||Zr()||ki()||fi()||ql()||_s()&&!pn())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),jw=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=LP)}function LP(e){var t,n,r,i,o,s,u,a,c,f,h;return b(function(g){switch(g.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(i=n.contentType,o=zu(i),!o)||r&&(s=r.contentType,u=zu(s),!u))return g.return(t)}else return g.return(t);g.s(2);break}if(!ci())return g.return(t);if(!n){g.s(3);break}return I(g,_P(n),4);case 4:if(a=g.h,!a)return g.return(t);case 3:if(r){var y=r.contentType;if(Vr()&&r.spatialRendering&&(y+="; spatialRendering=true"),c=gn(y),!c)return g.return(t)}case 2:return e.keySystemConfiguration?(f=e.keySystemConfiguration,I(g,NP(n,r,f),6)):(t.supported=!0,g.return(t));case 6:(h=g.h)&&(t.supported=!0,t.keySystemAccess=h);case 5:return g.return(t)}})}function _P(e){var t;return b(function(n){return n.g==1?Vr()?I(n,jP(e),3):n.s(2):n.g!=2?(t=n.h,n.return(t)):n.return(gn(e.contentType))})}function NP(e,t,n){var r,i,o,s,u,a,c,f,h,g,y;return b(function(T){switch(T.g){case 1:if(r=[],i=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},fi()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme),r.push(o)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),i.push(s)),u={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(u.audioCapabilities=r),i.length&&(u.videoCapabilities=i),a=e?e.contentType:"",c=t?t.contentType:"",f=Zn(a)+";"+go(a),h=Zn(c)+";"+go(c),g=n.keySystem,y=null,ye(T,2),Rs.has(f+"#"+h+"#"+g)){y=Rs.get(f+"#"+h+"#"+g)||null,T.s(4);break}return I(T,navigator.requestMediaKeySystemAccess(n.keySystem,[u]),5);case 5:y=T.h,Rs.set(f+"#"+h+"#"+g,y);case 4:Oe(T,3);break;case 2:ve(T);case 3:return T.return(y)}})}function jP(e){var t,n,r,i,o;return b(function(s){if(s.g==1){if(!(S.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return s.return(gn(e.contentType));switch(t=e.contentType,e.width&&e.height&&1280<e.width&&720<e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),24>n||30<n)&&(t+="; framerate="+e.framerate),r=e.transferFunction||"",r){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return s.return(!1)}return i=!1,o=OP,o.has(t)?(i=o.get(t),s.s(2)):I(s,cast.__platform__.canDisplayType(t),3)}return s.g!=2&&(i=s.h,o.set(t,i)),s.return(i)})}Cn.MediaCapabilities=Hg,Hg.install=Nw;var jw=null;Hg.originalMcap=jw;var OP=new Map;Xn(Nw,-1);function Ow(){}function bw(){var e=Dy();(S.MediaSource||S.ManagedMediaSource)&&(e&&S.MediaSource?12>=e?(Gg(),Uw()):15>=e&&Gg():Xt("DT_STB_BCM")?(Gg(),Uw()):(Xt("Tizen 2")||Ci()||Xt("Tizen 4"))&&UP()),(S.MediaSource||S.ManagedMediaSource)&&bP(),S.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&FP()}function Gg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,en.apply(0,arguments));return t.abort=function(){},t}}function Uw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function bP(){if(S.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return ic(n)!="mp2t"&&e(n)}}if(S.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);S.ManagedMediaSource.isTypeSupported=function(n){return ic(n)!="mp2t"&&t(n)}}}function UP(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return go(n)!="opus"&&e(n)},S.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);S.ManagedMediaSource.isTypeSupported=function(n){return go(n)!="opus"&&t(n)}}}function FP(){var e=MediaSource.isTypeSupported;ki()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(i[o]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}Cn.MediaSource=Ow,Ow.install=bw,Xn(bw);function Fw(){}function Bw(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?BP():S.orientation!=null&&VP())}function BP(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function VP(){function e(){switch(S.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Jf;screen.orientation=t,e(),S.addEventListener("orientationchange",function(){e();var n=new ce("change");t.dispatchEvent(n)})}Cn.Orientation=Fw,Fw.install=Bw;function Jf(){gt.call(this),this.type="",this.angle=0}St(Jf,gt),Jf.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Jf.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Xn(Bw);function Kg(){}var Wg,Xg,zg,qg,Yg,$g;function Vw(e){S.HTMLVideoElement&&S.WebKitMediaKeys&&(e!==void 0&&e&&(Wg=!0,Xg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),zg=HTMLMediaElement.prototype.setMediaKeys,qg=S.MediaKeys,Yg=S.MediaKeySystemAccess,$g=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=GP,S.MediaKeys=ul,S.MediaKeySystemAccess=Zf,navigator.requestMediaKeySystemAccess=HP,S.shakaMediaKeysPolyfill=WP,ac.clear(),Rs.clear())}function HP(e,t){try{var n=new Zf(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function GP(e){var t=this.mediaKeys;return t&&t!=e&&Hw(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Hw(e,this):Promise.resolve()}function KP(e){if(e=Le(e.initData),Un(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ao(e.subarray(4),!0),e=Hr(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ar(e),this.dispatchEvent(t)}Cn.PatchedMediaKeysApple=Kg,Kg.uninstall=function(){Wg&&(Wg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Xg),HTMLMediaElement.prototype.setMediaKeys=zg,S.MediaKeys=qg,S.MediaKeySystemAccess=Yg,navigator.requestMediaKeySystemAccess=$g,Xg=$g=zg=Yg=qg=null,S.shakaMediaKeysPolyfill="",ac.clear(),Rs.clear())},Kg.install=Vw;function Zf(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=v(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var o=v(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),i=!0));if(n.videoCapabilities)for(n=v(n.videoCapabilities),o=n.next();!o.done;o=n.next())o=o.value,o.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Zf.prototype.createMediaKeys=function(){var e=new ul(this.keySystem);return Promise.resolve(e)},Zf.prototype.getConfiguration=function(){return this.g};function ul(e){this.h=new WebKitMediaKeys(e),this.g=new _e}ul.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Qg(this.h)},ul.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Hw(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",KP);try{return uu(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}ul.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Qg(e){gt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new _e,this.sessionId="",this.expiration=NaN,this.closed=new pt,this.keyStatuses=new Gw}St(Qg,gt),p=Qg.prototype,p.generateRequest=function(e,t){var n=this;this.h=new pt;try{var r=this.l.createSession("video/mp4",Le(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(i){n.h&&(n.h.resolve(),n.h=null),i=new Map().set("messageType",n.keyStatuses.dc()==null?"license-request":"license-renewal").set("message",Ar(i.message)),i=new ce("message",i),n.dispatchEvent(i)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(ed(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var i=Error("EME PatchedMediaKeysApple key error");if(i.errorCode=n.i.error,n.h!=null)n.h.reject(i),n.h=null;else if(n.g!=null)n.g.reject(i),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ed(n,"output-not-allowed");break;default:ed(n,"internal-error")}}),ed(this,"status-pending")}catch(i){this.h.reject(i)}return this.h},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.g=new pt;try{this.i.update(Le(e))}catch(t){this.g.reject(t)}return this.g},p.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function ed(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new ce("keystatuseschange"),e.dispatchEvent(t)}function Gw(){this.size=0,this.g=void 0}p=Gw.prototype,p.dc=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,Xl.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=Xl.value();return!!(this.g&&Mi(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var WP="apple";Xn(function(){S.HTMLVideoElement&&S.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||Vw())});function Kw(){}function Ww(){S.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Ci()||Xt("Tizen 4")||Xt("Tizen 5.0")||zl())&&(MediaKeys.prototype.setServerCertificate=XP)}function XP(){return Promise.resolve(!1)}Cn.PatchedMediaKeysCert=Kw,Kw.install=Ww,Xn(Ww);function Xw(){}function zw(){if(!(!S.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)nm="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=zP,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qP,S.MediaKeys=al,S.MediaKeySystemAccess=td,S.shakaMediaKeysPolyfill=YP}}function Jg(e){var t=nm;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function zP(e,t){try{var n=new td(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function qP(e){var t=this.mediaKeys;return t&&t!=e&&qw(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&qw(e,this),Promise.resolve()}Cn.PatchedMediaKeysWebkit=Xw,Xw.install=zw;function td(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video"),t=v(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=v(o.audioCapabilities),c=a.next();!c.done;c=a.next())c=c.value,c.contentType&&(u=!0,i.canPlayType(c.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(c),r=!0));if(o.videoCapabilities)for(a=v(o.videoCapabilities),c=a.next();!c.done;c=a.next())c=c.value,c.contentType&&(u=!0,i.canPlayType(c.contentType,this.g)&&(s.videoCapabilities.push(c),r=!0));if(u||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),o.persistentState=="required"&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r){this.h=s;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}td.prototype.createMediaKeys=function(){var e=new al(this.g);return Promise.resolve(e)},td.prototype.getConfiguration=function(){return this.h};function al(e){this.l=e,this.h=null,this.g=new _e,this.i=[],this.j=new Map}function qw(e,t){e.h=t,e.g.Ra();var n=nm;t&&(e.g.D(t,n+"needkey",function(r){var i=new CustomEvent("encrypted");i.initDataType="cenc",i.initData=Ar(r.initData),e.h.dispatchEvent(i)}),e.g.D(t,n+"keymessage",function(r){var i=Zg(e,r.sessionId);i&&(r=new Map().set("messageType",i.keyStatuses.dc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new ce("message",r),i.h&&(i.h.resolve(),i.h=null),i.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=Zg(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var i=Zg(e,r.sessionId);if(i){var o=Error("EME v0.1b key error"),s=r.errorCode;s.systemCode=r.systemCode,o.errorCode=s,!r.sessionId&&i.h?(r.systemCode==45&&(o.message="Unsupported session type."),i.h.reject(o),i.h=null):r.sessionId&&i.g?(i.g.reject(o),i.g=null):(o=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?nd(i,"output-restricted"):o==1?nd(i,"expired"):nd(i,"internal-error"))}}))}al.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new em(t,this.l,e),this.i.push(e),e},al.prototype.setServerCertificate=function(){return Promise.resolve(!1)},al.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Zg(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function em(e,t,n){gt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new pt,this.keyStatuses=new $w}St(em,gt),p=em.prototype,p.ready=function(){nd(this,"usable"),this.g&&this.g.resolve(),this.g=null};function Yw(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Le(Hr("LOAD_SESSION|"+n));else{var i=Hr("PERSISTENT|");r=Ht(i,t)}else r=Le(t)}catch(s){return Promise.reject(s)}e.h=new pt;var o=Jg("generateKeyRequest");try{e.j[o](e.i,r)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new ze(function(){try{e.j[o](e.i,r)}catch(u){e.h.reject(u),e.h=null}}).da(.01)}return e.h}function tm(e,t,n){if(e.g)e.g.then(function(){return tm(e,t,n)}).catch(function(){return tm(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Rt(n),i=JSON.parse(r);i.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Ir(i.keys[0].k),i=Ir(i.keys[0].kid)}else r=Le(n),i=null;var o=Jg("addKey");try{e.j[o](e.i,r,i,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function nd(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new ce("keystatuseschange"),e.dispatchEvent(t)}p.generateRequest=function(e,t){return Yw(this,t,null)},p.load=function(e){return this.l=="persistent-license"?Yw(this,null,e):Promise.reject(Error("Not a persistent session."))},p.update=function(e){var t=new pt;return tm(this,t,e),t},p.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Jg("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},p.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function $w(){this.size=0,this.g=void 0}p=$w.prototype,p.dc=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,Xl.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=Xl.value();return!!(this.g&&Mi(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var nm="",YP="webkit";Xn(zw);function Qw(){}function Jw(){if(S.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=QP,Object.defineProperty(e,"disablePictureInPicture",{get:ZP,set:e4,enumerable:!0,configurable:!0}),document.exitPictureInPicture=JP,document.addEventListener("webkitpresentationmodechanged",$P,!0))}}function $P(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function QP(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function JP(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function ZP(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function e4(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Cn.PiPWebkit=Qw,Qw.install=Jw,Xn(Jw);function Zw(){}function ex(){S.crypto&&("randomUUID"in S.crypto||(S.crypto.randomUUID=t4))}function t4(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Cn.RandomUUID=Zw,Zw.install=ex,Xn(ex);function tx(){}function nx(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:n4})}function n4(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Cn.Symbol=tx,tx.install=nx,Xn(nx);function rx(){}function ix(){if(S.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Cn.VideoPlayPromise=rx,rx.install=ix,Xn(ix);function ox(){}function sx(){if(S.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||zl())&&(e.getVideoPlaybackQuality=r4)}}function r4(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Cn.VideoPlaybackQuality=ox,ox.install=sx,Xn(sx);function ux(){}function ax(){if(!S.VTTCue&&S.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=rm;else if(t==6)e=i4;else{try{var n=!!rm(1,2,"")}catch{n=!1}n&&(e=rm)}e&&(S.VTTCue=function(r,i,o){return e(r,i,o)})}}function rm(e,t,n){return new S.TextTrackCue(e,t,n)}function i4(e,t,n){return new S.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Cn.VTTCue=ux,ux.install=ax,Xn(ax);function mr(){}mr.prototype.parseInit=function(){},mr.prototype.setSequenceMode=function(){},mr.prototype.setManifestType=function(){},mr.prototype.parseMedia=function(e,t){var n=null,r=[];e=Rt(e).split(/\r?\n/),e=v(e);for(var i=e.next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=o4.exec(i))){var o=s4.exec(i[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),i=new Et(o,t.segmentEnd?t.segmentEnd:o+2,i[2]),n&&(n.endTime=o,r.push(n)),n=i}return n&&r.push(n),r},D("shaka.text.LrcTextParser",mr),mr.prototype.parseMedia=mr.prototype.parseMedia,mr.prototype.setManifestType=mr.prototype.setManifestType,mr.prototype.setSequenceMode=mr.prototype.setSequenceMode,mr.prototype.parseInit=mr.prototype.parseInit;var o4=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,s4=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;mn("application/x-subtitle-lrc",function(){return new mr});function ir(){}ir.prototype.parseInit=function(){},ir.prototype.setSequenceMode=function(){},ir.prototype.setManifestType=function(){},ir.prototype.parseMedia=function(e,t,n,r){var i=Rt(e);if(e=[],i=="")return e;var o=qo(i,"tt",!0);if(!o)throw new j(2,2,2005,"Failed to parse TTML.");if(i=ti(o,"body")[0],!i)return[];var s=hi(o,ll,"frameRate"),u=hi(o,ll,"subFrameRate"),a=hi(o,ll,"frameRateMultiplier"),c=hi(o,ll,"tickRate"),f=hi(o,ll,"cellResolution"),h=o.attributes["xml:space"]||"default",g=hi(o,od,"extent");if(h!="default"&&h!="preserve")throw new j(2,2,2005,"Invalid xml:space value: "+h);h=h=="default",s=new f4(s,u,a,c),f=c4(f),u=ti(o,"metadata")[0],u=(u?u.children:[]).filter(function(E){return E!=`
`}),a=ti(o,"style"),o=ti(o,"region"),c=[];for(var y=v(o),T=y.next();!T.done;T=y.next())(T=u4(T.value,a,g))&&c.push(T);if(lt(i,"p").length)throw new j(2,2,2001,"<p> can only be inside <div> in TTML");for(g=v(lt(i,"div")),y=g.next();!y.done;y=g.next())if(lt(y.value,"span").length)throw new j(2,2,2001,"<span> can only be inside <p> in TTML");return(t=lx(i,t,s,u,a,o,c,h,f,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function lx(e,t,n,r,i,o,s,u,a,c,f,h,g){var y=c;if(Ql(e)){if(!f)return null;var T={tagName:"span",children:[Qt(e)],attributes:{},parent:null}}else T=e;for(var E=null,x=v(Sx),A=x.next();!A.done&&!(E=id(T,"backgroundImage",r,"#",A.value)[0]);A=x.next());x=null,A=hi(T,Sx,"backgroundImage");var M=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(A&&M.test(A)){if(x=parseInt(A.split(":").pop(),10)-1,x>=g.length)return null;x=g[x]}else h&&A&&!A.startsWith("#")&&(M=new Vt(h),A=new Vt(A),(A=M.resolve(A).toString())&&(x=A));if((e.tagName=="p"||E||x)&&(f=!0),e=f,A=(T.attributes["xml:space"]||(u?"default":"preserve"))=="default",M=T.children.every(Ql),u=[],!M)for(var L=v(T.children),_=L.next();!_.done;_=L.next())(_=lx(_.value,t,n,r,i,o,s,A,a,T,f,h,g))&&u.push(_);if(r=c!=null,h=Qt(T),h=T.children.length&&h&&/\S/.test(h),L=T.attributes.begin||T.attributes.end||T.attributes.dur,!(L||h||T.tagName=="br"||u.length!=0||r&&!A))return null;for(g=dx(T,n),h=g.start,g=g.end;y&&y.tagName&&y.tagName!="tt";)g=l4(y,n,h,g),h=g.start,g=g.end,y=y.parent;if(h==null&&(h=0),h+=t.periodStart,g=g==null?1/0:g+t.periodStart,h=Math.max(h,t.segmentStart),g=Math.min(g,t.segmentEnd),!L&&0<u.length)for(h=1/0,g=0,t=v(u),n=t.next();!n.done;n=t.next())n=n.value,h=Math.min(h,n.startTime),g=Math.max(g,n.endTime);if(T.tagName=="br")return i=new Et(h,g,""),i.lineBreak=!0,i;if(t="",M&&(t=Fn(Qt(T)||""),A&&(t=t.replace(/\s+/g," "))),t=new Et(h,g,t),t.nestedCues=u,f||(t.isContainer=!0),a&&(t.cellResolution=a),a=id(T,"region",o,"")[0],T.attributes.region&&a&&a.attributes["xml:id"]){var F=a.attributes["xml:id"];t.region=s.filter(function(P){return P.id==F})[0]}return s=a,c&&r&&!T.attributes.region&&!T.attributes.style&&(s=id(c,"region",o,"")[0]),a4(t,T,s,E,x,i,e,u.length==0),t}function u4(e,t,n){var r=new Ko,i=e.attributes["xml:id"];if(!i)return null;r.id=i,i=null,n&&(i=am.exec(n)||lm.exec(n)),n=i?Number(i[1]):null,i=i?Number(i[2]):null;var o,s=rd(e,t,"extent");if(s){var u=(o=am.exec(s))||lm.exec(s);u!=null&&(r.width=Number(u[1]),r.height=Number(u[2]),o||(n!=null&&(r.width=100*r.width/n),i!=null&&(r.height=100*r.height/i)),r.widthUnits=o||n!=null?Jn:0,r.heightUnits=o||i!=null?Jn:0)}return(e=rd(e,t,"origin"))&&(u=(o=am.exec(e))||lm.exec(e),u!=null&&(r.viewportAnchorX=Number(u[1]),r.viewportAnchorY=Number(u[2]),o?s||(r.width=100-r.viewportAnchorX,r.widthUnits=Jn,r.height=100-r.viewportAnchorY,r.heightUnits=Jn):(i!=null&&(r.viewportAnchorY=100*r.viewportAnchorY/i),n!=null&&(r.viewportAnchorX=100*r.viewportAnchorX/n)),r.viewportAnchorUnits=o||n!=null?Jn:0)),r}function im(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function a4(e,t,n,r,i,o,s,u){if(s=s||u,En(t,n,o,"direction",s)=="rtl"&&(e.direction="rtl"),u=En(t,n,o,"writingMode",s),u=="tb"||u=="tblr"?e.writingMode="vertical-lr":u=="tbrl"?e.writingMode="vertical-rl":u=="rltb"||u=="rl"?e.direction="rtl":u&&(e.direction=na),(u=En(t,n,o,"textAlign",!0))?(e.positionAlign=p4.get(u),e.lineAlign=h4.get(u),e.textAlign=ch[u.toUpperCase()]):e.textAlign=gi,(u=En(t,n,o,"displayAlign",!0))&&(e.displayAlign=Qy[u.toUpperCase()]),(u=En(t,n,o,"color",s))&&(e.color=im(u)),(u=En(t,n,o,"backgroundColor",s))&&(e.backgroundColor=im(u)),(u=En(t,n,o,"border",s))&&(e.border=u),u=En(t,n,o,"fontFamily",s))switch(u){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=u.split(",").filter(function(a){return a!="default"}).join(",")}switch((u=En(t,n,o,"fontWeight",s))&&u=="bold"&&(e.fontWeight=Vs),u=En(t,n,o,"wrapOption",s),e.wrapLine=!(u&&u=="noWrap"),(u=En(t,n,o,"lineHeight",s))&&u.match(Du)&&(e.lineHeight=u),(u=En(t,n,o,"fontSize",s))&&(u.match(Du)||u.match(d4))&&(e.fontSize=u),(u=En(t,n,o,"fontStyle",s))&&(e.fontStyle=tv[u.toUpperCase()]),r?(i=r.attributes.imageType||r.attributes.imagetype,u=r.attributes.encoding,r=Qt(r).trim(),i=="PNG"&&u=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):i&&(e.backgroundImage=i),(r=En(t,n,o,"textOutline",s))&&(r=r.split(" "),r[0].match(Du)?e.textStrokeColor=e.color:(e.textStrokeColor=im(r[0]),r.shift()),r[0]&&r[0].match(Du)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=En(t,n,o,"letterSpacing",s))&&r.match(Du)&&(e.letterSpacing=r),(r=En(t,n,o,"linePadding",s))&&r.match(Du)&&(e.linePadding=r),(r=En(t,n,o,"opacity",s))&&(e.opacity=parseFloat(r)),(r=rd(n,o,"textDecoration"))&&cx(e,r),(r=om(t,o,"textDecoration"))&&cx(e,r),(r=En(t,n,o,"textCombine",s))&&(e.textCombineUpright=r),En(t,n,o,"ruby",s)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function cx(e,t){t=v(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(_i)||e.textDecoration.push(_i);break;case"noUnderline":e.textDecoration.includes(_i)&&Gr(e.textDecoration,_i);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Gr(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Gr(e.textDecoration,"overline")}}function En(e,t,n,r,i){return i=i===void 0?!0:i,(e=om(e,n,r))?e:i?rd(t,n,r):null}function rd(e,t,n){if(!e)return null;var r=hi(e,od,n);return r||fx(e,t,n)}function om(e,t,n){var r=hi(e,od,n);return r||fx(e,t,n)}function fx(e,t,n){e=id(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var o=Pi(e[i],"urn:ebu:tt:style",n);o||(o=hi(e[i],od,n)),o||(o=om(e[i],t,n)),o&&(r=o)}return r}function id(e,t,n,r,i){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;!e&&!(e=i?Pi(s,i,t):s.attributes[t])&&(s=s.parent,s););if(t=e){for(t=v(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=v(n),s=e.next();!s.done;s=e.next())if(s=s.value,r+s.attributes["xml:id"]==i){o.push(s);break}}return o}function l4(e,t,n,r){return e=dx(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function dx(e,t){var n=sm(e.attributes.begin,t),r=sm(e.attributes.end,t);return e=sm(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function sm(e,t){var n=null;if(hx.test(e)){e=hx.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,i+=o/t.frameRate,n=i+60*r+3600*n}else if(px.test(e))n=um(px,e);else if(gx.test(e))n=um(gx,e);else if(mx.test(e))e=mx.exec(e),n=Number(e[1])/t.frameRate;else if(yx.test(e))e=yx.exec(e),n=Number(e[1])/t.g;else if(vx.test(e))n=um(vx,e);else if(e)throw new j(2,2,2001,"Could not parse cue time range in TTML");return n}function um(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function c4(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}D("shaka.text.TtmlTextParser",ir),ir.prototype.parseMedia=ir.prototype.parseMedia,ir.prototype.setManifestType=ir.prototype.setManifestType,ir.prototype.setSequenceMode=ir.prototype.setSequenceMode,ir.prototype.parseInit=ir.prototype.parseInit;function f4(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var am=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,d4=/^(\d{1,4}(?:\.\d+)?|100)%$/,Du=/^(\d+px|\d+em|\d*\.?\d+c)$/,lm=/^(\d+)px (\d+)px$/,hx=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,px=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,gx=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,mx=/^(\d*(?:\.\d*)?)f$/,yx=/^(\d*(?:\.\d*)?)t$/,vx=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),h4=new Map().set("left",$o).set("center","center").set("right","end").set("start",$o).set("end","end"),p4=new Map().set("left","line-left").set("center","center").set("right","line-right"),ll=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],od=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Sx=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];mn("application/ttml+xml",function(){return new ir});function on(){this.g=new ir}on.prototype.parseInit=function(e){var t=!1;if(new mt().box("moov",Fe).box("trak",Fe).box("mdia",Fe).box("minf",Fe).box("stbl",Fe).R("stsd",Fi).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new j(2,2,2007)},on.prototype.setSequenceMode=function(){},on.prototype.setManifestType=function(){},on.prototype.parseMedia=function(e,t,n){var r=[],i=null,o=[],s=new Map,u=[];if(new mt().box("moof",Fe).box("traf",Fe).R("tfhd",function(A){i=vc(A.reader,A.flags).md}).R("trun",function(A){A=wc(A.reader,A.version,A.flags),A=v(A.hg);for(var M=A.next();!M.done;M=A.next())u.push(M.value.sampleSize||i||0)}).R("subs",function(A){for(var M=A.reader,L=M.S(),_=-1,F=0;F<L;F++){var P=M.S();_+=P,P=M.ma();for(var k=[],O=0;O<P;O++)A.version==1?k.push(M.S()):k.push(M.ma()),M.X(),M.X(),M.S();s.set(_,k)}}).box("mdat",$s(function(A){o.push(A)})).parse(e,!1),o.length==0)throw new j(2,2,2007);for(var a=Ht.apply(yn,J(o)),c=0,f=0;f<u.length;f++){var h=Le(a,c,u[f]);c+=u[f];var g=s.get(f);if(g&&g.length){h=Le(h,0,g[0]);for(var y=[],T=g[0],E=1;E<g.length;E++){var x=Le(e,T,g[E]);x=$l(x),y.push("data:image/png;base64,"+x),T+=g[E]}r=r.concat(this.g.parseMedia(h,t,n,y))}else r=r.concat(this.g.parseMedia(h,t,n,[]))}return r},D("shaka.text.Mp4TtmlParser",on),on.prototype.parseMedia=on.prototype.parseMedia,on.prototype.setManifestType=on.prototype.setManifestType,on.prototype.setSequenceMode=on.prototype.setSequenceMode,on.prototype.parseInit=on.prototype.parseInit,mn('application/mp4; codecs="stpp"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml.im1i"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml.im1t"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml.im2i"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml.im2t"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml.etd1"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new on}),mn('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new on}),mn('application/mp4; codecs="stpp.TTML.im1t"',function(){return new on});function _n(){this.g="UNKNOWN"}_n.prototype.parseInit=function(){},_n.prototype.setSequenceMode=function(){},_n.prototype.setManifestType=function(e){this.g=e},_n.prototype.parseMedia=function(e,t){e=Rt(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new j(2,2,2e3);if(e=t.vttOffset,this.g=="HLS")if(n[0].includes("X-TIMESTAMP-MAP")){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new j(2,2,2e3);if(e=Bs(e[1]),e==null)throw new j(2,2,2e3);r=Number(r[1]);for(var i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],r=v(n[0].split(`
`)),i=r.next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Us(i);var o=new Ko;Xo(i),Fs(i);for(var s=Xo(i);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),Fs(i),s=Xo(i)}t.push(o)}for(r=new Map,Yy(r),i=[],n=v(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split(`
`),(o.length!=1||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&o[0]=="STYLE"){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),s!=-1&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(u=v(u),s=u.next();!s.done;s=u.next()){var c=s.value;s="global",(a=c[0].match(/\((.*)\)/))&&(s=a.pop()),a=c.slice(1,-1),c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(a=c[1].split(";")),(c=r.get(s))||(c=new Et(0,0,""));for(var f=!1,h=0;h<a.length;h++){var g=/^\s*([^:]+):\s*(.*)/.exec(a[h]);if(g){var y=g[2].trim().replace(";","");switch(g[1].trim()){case"background-color":case"background":f=!0,c.backgroundColor=y;break;case"color":f=!0,c.color=y;break;case"font-family":f=!0,c.fontFamily=y;break;case"font-size":f=!0,c.fontSize=y;break;case"font-weight":(700<=parseInt(y,10)||y=="bold")&&(f=!0,c.fontWeight=Vs);break;case"font-style":switch(y){case"normal":f=!0,c.fontStyle=dh;break;case"italic":f=!0,c.fontStyle=Hs;break;case"oblique":f=!0,c.fontStyle="oblique"}break;case"opacity":f=!0,c.opacity=parseFloat(y);break;case"text-combine-upright":f=!0,c.textCombineUpright=y;break;case"text-shadow":f=!0,c.textShadow=y;break;case"white-space":f=!0,c.wrapLine=y!="noWrap"}}}f&&r.set(s,c)}}if(c=o,f=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")o=null;else if(o=null,c[0].includes("-->")||(o=c[0],c.splice(0,1)),u=new Us(c[0]),s=Qu(u),h=Wo(u,/[ \t]+--\x3e[ \t]+/g),a=Qu(u),s==null||h==null||a==null)re("Failed to parse VTT time code. Cue skipped:",o,c),o=null;else{for(s+=f,a+=f,f=c.slice(1).join(`
`).trim(),r.has("global")?(c=r.get("global").clone(),c.startTime=s,c.endTime=a,c.payload=f):c=new Et(s,a,f),Fs(u),s=Xo(u);s;)Tx(c,s,t),Fs(u),s=Xo(u);nc(c,r),o!=null&&(c.id=o),o=c}o&&i.push(o)}return i};function Tx(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=gi:e.textAlign=ch[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":rc)):(r=/^region:(.*)$/.exec(t))?(t=g4(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=fh[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ra,e.line=Number(n[1]),n[2]&&(e.lineAlign=fh[n[2].toUpperCase()]))}function g4(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}D("shaka.text.VttTextParser",_n),_n.prototype.parseMedia=_n.prototype.parseMedia,_n.prototype.setManifestType=_n.prototype.setManifestType,_n.prototype.setSequenceMode=_n.prototype.setSequenceMode,_n.prototype.parseInit=_n.prototype.parseInit,mn("text/vtt",function(){return new _n}),mn('text/vtt; codecs="vtt"',function(){return new _n}),mn('text/vtt; codecs="wvtt"',function(){return new _n});function yr(){this.g=null}yr.prototype.parseInit=function(e){var t=this,n=!1;if(new mt().box("moov",Fe).box("trak",Fe).box("mdia",Fe).R("mdhd",function(r){r=Tc(r.reader,r.version),t.g=r.timescale}).box("minf",Fe).box("stbl",Fe).R("stsd",Fi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new j(2,2,2008);if(!n)throw new j(2,2,2008)},yr.prototype.setSequenceMode=function(){},yr.prototype.setManifestType=function(){},yr.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new j(2,2,2008);var n=0,r=[],i,o=[],s=!1,u=!1,a=!1,c=null;if(new mt().box("moof",Fe).box("traf",Fe).R("tfdt",function(L){s=!0,n=Sc(L.reader,L.version).baseMediaDecodeTime}).R("tfhd",function(L){c=vc(L.reader,L.flags).ld}).R("trun",function(L){u=!0,r=wc(L.reader,L.version,L.flags).hg}).box("mdat",$s(function(L){a=!0,i=L})).parse(e,!1),!a&&!s&&!u)throw new j(2,2,2008);e=n;for(var f=new At(i,0),h=v(r),g=h.next();!g.done;g=h.next()){g=g.value;var y=g.ig||c,T=g.Be?n+g.Be:e;e=T+(y||0);var E=0;do{var x=f.S();E+=x;var A=f.S(),M=null;pc(A)=="vttc"?8<x&&(M=f.Db(x-8)):f.skip(x-8),y&&M&&(x=m4(M,t.periodStart+T/this.g,t.periodStart+e/this.g),o.push(x))}while(g.sampleSize&&E<g.sampleSize)}return o.filter(mo)};function m4(e,t,n){var r,i,o;return new mt().box("payl",$s(function(s){r=Rt(s)})).box("iden",$s(function(s){i=Rt(s)})).box("sttg",$s(function(s){o=Rt(s)})).parse(e),r?y4(r,i,o,t,n):null}function y4(e,t,n,r,i){if(e=new Et(r,i,e),nc(e),t&&(e.id=t),n)for(t=new Us(n),n=Xo(t);n;)Tx(e,n,[]),Fs(t),n=Xo(t);return e}D("shaka.text.Mp4VttParser",yr),yr.prototype.parseMedia=yr.prototype.parseMedia,yr.prototype.setManifestType=yr.prototype.setManifestType,yr.prototype.setSequenceMode=yr.prototype.setSequenceMode,yr.prototype.parseInit=yr.prototype.parseInit,mn('application/mp4; codecs="wvtt"',function(){return new yr});function vr(){}vr.prototype.parseInit=function(){},vr.prototype.setSequenceMode=function(){},vr.prototype.setManifestType=function(){},vr.prototype.parseMedia=function(e){var t=Rt(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=v(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var r=new Us(n[0]),i=Qu(r),o=Wo(r,/,/g);if(r=Qu(r),i==null||o==null||r==null)throw new j(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Et(i,r,n.slice(1).join(`
`).trim()))}return e},D("shaka.text.SbvTextParser",vr),vr.prototype.parseMedia=vr.prototype.parseMedia,vr.prototype.setManifestType=vr.prototype.setManifestType,vr.prototype.setSequenceMode=vr.prototype.setSequenceMode,vr.prototype.parseInit=vr.prototype.parseInit,mn("text/x-subviewer",function(){return new vr});function or(){this.g=new _n}or.prototype.parseInit=function(){},or.prototype.setSequenceMode=function(){},or.prototype.setManifestType=function(){},or.prototype.parseMedia=function(e,t,n){return e=Rt(e),e=wx(e),e=Le(Hr(e)),this.g.parseMedia(e,t,n,[])};function wx(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=v(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}D("shaka.text.SrtTextParser",or),or.srt2webvtt=wx,or.prototype.parseMedia=or.prototype.parseMedia,or.prototype.setManifestType=or.prototype.setManifestType,or.prototype.setSequenceMode=or.prototype.setSequenceMode,or.prototype.parseInit=or.prototype.parseInit,mn("text/srt",function(){return new or});function Sr(){}Sr.prototype.parseInit=function(){},Sr.prototype.setSequenceMode=function(){},Sr.prototype.setManifestType=function(){},Sr.prototype.parseMedia=function(e){var t="",n="",r=null,i=null;for(i=Rt(e).split(/\r?\n\s*\r?\n/),e=v(i),i=e.next();!i.done;i=e.next()){var o=i.value;i=o,(o=S4.exec(o))&&(r=o[1],i=o[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=i,t=n?t+(`
`+i):i):r=="Events"&&(n=n?n+(`
`+i):i)}for(r=[],i=null,t=v(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(o=Ax.exec(e))){if(e=o[1].trim(),o=o[2].trim(),e=="Format")i=o.split(sd);else if(e=="Style"){e=o.split(sd),o={};for(var s=0;s<i.length&&s<e.length;s++)o[i[s]]=e[s];r.push(o)}}for(i=[],t=null,n=v(n.split(/\r?\n/)),o=n.next(),e={};!o.done;e={Eh:void 0},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=Ax.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(sd);else if(o=="Dialogue"){s=s.split(sd),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=Ex(o.Start);var a=Ex(o.End);s=new Et(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Eh=o.Style,(e=r.find(function(c){return function(f){return f.Name==c.Eh}}(e)))&&v4(s,e),i.push(s)}}return i};function v4(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=xx(n))&&(e.color=n),(n=t.BackColour)&&(n=xx(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Vs),t.Italic&&(e.fontStyle=Hs),t.Underline&&e.textDecoration.push(_i),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ta,e.textAlign="start";break;case 2:e.displayAlign=ta,e.textAlign=gi;break;case 3:e.displayAlign=ta,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=gi;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=gi;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function xx(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Ex(e){return e=T4.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}D("shaka.text.SsaTextParser",Sr),Sr.prototype.parseMedia=Sr.prototype.parseMedia,Sr.prototype.setManifestType=Sr.prototype.setManifestType,Sr.prototype.setSequenceMode=Sr.prototype.setSequenceMode,Sr.prototype.parseInit=Sr.prototype.parseInit;var S4=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Ax=/^\s*([^:]+):\s*(.*)/,sd=/\s*,\s*/,T4=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;mn("text/x-ssa",function(){return new Sr});function Ix(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{ud:n,ia:e}:null}function Mx(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var i=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;return o|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:o,codec:"mp4a.40."+i}}function Cx(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function w4(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Tr(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=Tr.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?gn(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(er(t)||"mp4a.40.2")+'"':t},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,t,n,r){for(var i=Le(e),o=eu(i),s=o.length;s<i.length&&!Cx(i,s);s++);if(e=1e3*n.endTime,o=ss(o),o.length&&n&&(o=o.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=o.data),o=Mx(i,s),!o)return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=o.sampleRate,t.channelsCount=o.channelCount;for(var u=[];s<i.length;){var a=Ix(i,s);if(!a)return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));var c=a.ud+a.ia;s+c<=i.length&&u.push({data:i.subarray(s+a.ud,s+c),size:a.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),s+=c}return i=o.sampleRate,e=Math.floor(e*i/1e3),r={id:t.id,type:"audio",codecs:o.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:r,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:e,jb:u},stream:t},r=new is([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Zs(r),this.g.set(n,t)),n=this.i!==t,r=ya(r),this.i=t,this.h++,n?(t=Ht(t,r),Promise.resolve(t)):Promise.resolve(r)},D("shaka.transmuxer.AacTransmuxer",Tr),Tr.prototype.transmux=Tr.prototype.transmux,Tr.prototype.getOriginalMimeType=Tr.prototype.getOriginalMimeType,Tr.prototype.convertCodecs=Tr.prototype.convertCodecs,Tr.prototype.isSupported=Tr.prototype.isSupported,Tr.prototype.destroy=Tr.prototype.destroy,Ni("audio/aac",function(){return new Tr("audio/aac")},po);function kx(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+i>e.length)return null;var o=e[t+6]>>5,s=0;o===2?s+=2:(o&1&&o!==1&&(s+=2),o&4&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(u&3)<<6|o<<3|s<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,ra:e,ia:i}}function x4(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var i,o;0<r;){o=e[t];var s=Math.min(r,8),u=8-s;i=4278190080>>>24+u<<u,i=(o&i)>>u,n=n?n<<s|i:i,t+=1,r-=s}if(16>n)return!0}return!1}function Rr(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=Rr.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?gn(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?Ci()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,t,n,r){e=Le(e);for(var i=eu(e),o=i.length;o<e.length&&!x4(e,o);o++);var s=1e3*n.endTime;i=ss(i),i.length&&n&&(i=i.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=i.data),i=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var c=kx(e,o);if(!c)return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount,i=c.sampleRate,u=c.ra,a.push({data:e.subarray(o,o+c.ia),size:c.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),o+=c.ia}return e=Math.floor(s*i/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:r,lb:[],ra:u,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:e,jb:a},stream:t},r=new is([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Zs(r),this.g.set(n,t)),n=this.i!==t,r=ya(r),this.i=t,this.h++,n?(t=Ht(t,r),Promise.resolve(t)):Promise.resolve(r)},D("shaka.transmuxer.Ac3Transmuxer",Rr),Rr.prototype.transmux=Rr.prototype.transmux,Rr.prototype.getOriginalMimeType=Rr.prototype.getOriginalMimeType,Rr.prototype.convertCodecs=Rr.prototype.convertCodecs,Rr.prototype.isSupported=Rr.prototype.isSupported,Rr.prototype.destroy=Rr.prototype.destroy,Ni("audio/ac3",function(){return new Rr("audio/ac3")},po);function Dx(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Hi(e.subarray(t+2));rr(n,2),rr(n,3);var r=Je(n,11)+1<<1,i=Je(n,2);if(i==3){i=Je(n,2),i=[24e3,22060,16e3][i];var o=3}else i=[48e3,44100,32e3][i],o=Je(n,2);var s=Je(n,3),u=Je(n,1);return n=Je(n,5),t+r>e.byteLength?null:(e=Math.floor(r*i/(16*[1,2,3,6][o])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,i<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][s]+u,ra:e,ia:r})}function Pr(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=Pr.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?gn(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,t,n,r){e=Le(e);for(var i=eu(e),o=i.length;o<e.length&&(e[o]<<8|e[o+1]<<0)!==2935;o++);var s=1e3*n.endTime;i=ss(i),i.length&&n&&(i=i.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=i.data),i=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var c=Dx(e,o);if(!c)return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount,i=c.sampleRate,u=c.ra,a.push({data:e.subarray(o,o+c.ia),size:c.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),o+=c.ia}return e=Math.floor(s*i/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:r,lb:[],ra:u,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:e,jb:a},stream:t},r=new is([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Zs(r),this.g.set(n,t)),n=this.i!==t,r=ya(r),this.i=t,this.h++,n?(t=Ht(t,r),Promise.resolve(t)):Promise.resolve(r)},D("shaka.transmuxer.Ec3Transmuxer",Pr),Pr.prototype.transmux=Pr.prototype.transmux,Pr.prototype.getOriginalMimeType=Pr.prototype.getOriginalMimeType,Pr.prototype.convertCodecs=Pr.prototype.convertCodecs,Pr.prototype.isSupported=Pr.prototype.isSupported,Pr.prototype.destroy=Pr.prototype.destroy,Ni("audio/ec3",function(){return new Pr("audio/ec3")},po);function E4(e){if(!e.length)return null;var t=e.find(function(E){return E.type==7});if(e=e.find(function(E){return E.type==8}),!t||!e)return null;var n=new Hi(t.data),r=at(n);if(at(n),at(n),Hn(n),I4.includes(r)&&(r=de(n),r===3&&rr(n,1),Hn(n),Hn(n),rr(n,1),we(n))){r=r!==3?8:12;for(var i=0;i<r;i++)we(n)&&(6>i?Ic(n,16):Ic(n,64))}if(Hn(n),r=de(n),r===0)de(n);else if(r===1)for(rr(n,1),Hn(n),Hn(n),r=de(n),i=0;i<r;i++)Hn(n);Hn(n),rr(n,1);var o=de(n),s=de(n),u=Je(n,1);u===0&&rr(n,1),rr(n,1);var a=0,c=0,f=0,h=0;if(we(n)&&(a=de(n),c=de(n),f=de(n),h=de(n)),i=r=1,we(n)&&we(n)){var g=at(n),y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],T=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<g&&16>=g?(r=y[g-1],i=T[g-1]):g===255&&(r=Je(n,16),i=Je(n,16))}return n=(2-u)*(s+1)*16-2*f-2*h,o=16*(o+1)-2*a-2*c,a=[],t=t.fullData,a.push(t.byteLength>>>8&255),a.push(t.byteLength&255),a=a.concat.apply(a,J(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,J(e)),e=new Uint8Array([1,a[3],a[4],a[5],255,225].concat(a,[1],t)),{height:n,width:o,Ca:e,Ia:r,La:i}}function A4(e){function t(T){i={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:T.pts,dts:T.dts,nalus:[]}}function n(){if(i&&i.nalus.length&&i.frame){for(var T=[],E=v(i.nalus),x=E.next();!x.done;x=E.next()){x=x.value;var A=x.fullData.byteLength,M=new Uint8Array(4);M[0]=A>>24&255,M[1]=A>>16&255,M[2]=A>>8&255,M[3]=A&255,T.push(M),T.push(x.fullData)}i.data=Ht.apply(yn,J(T)),r.push(i)}}for(var r=[],i=null,o=!1,s=0;s<e.length;s++){var u=e[s],a=u.nalus,c=!1;i&&a.length&&!o&&(n(),t(u)),a=v(u.nalus);for(var f=a.next();!f.done;f=a.next()){f=f.value;var h=!1;switch(f.type){case 1:var g=!1;h=!0;var y=f.data;c&&4<y.length&&(y=X2(new Hi(y)),y===2||y===4||y===7||y===9)&&(g=!0),g&&i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(u),i.frame=!0,i.isKeyframe=g;break;case 5:h=!0,i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(u),i.frame=!0,i.isKeyframe=!0;break;case 6:h=!0;break;case 7:c=h=!0;break;case 8:h=!0;break;case 9:o=h=!0,i&&i.frame&&(n(),i=null),i||t(u);break;case 12:h=!0;break;default:h=!1}i&&h&&i.nalus.push(f)}}return n(),r}var I4=[100,110,122,244,44,83,86,118,128,138,139,134];function M4(e){if(!e.length)return null;var t=e.find(function(s){return s.type==32}),n=e.find(function(s){return s.type==33}),r=e.find(function(s){return s.type==34});if(!t||!n||!r)return null;var i=C4(t.fullData);e=k4(n.fullData);var o=D4(r.fullData);return t=R4(t.fullData,n.fullData,r.fullData,{Wf:i.Wf,tg:i.tg,Gf:e.Gf,Hf:e.Hf,Af:e.Af,Ff:e.Ff,Bf:e.Bf,Cf:e.Cf,Df:e.Df,Ef:e.Ef,uf:e.uf,vf:e.vf,wf:e.wf,xf:e.xf,yf:e.yf,zf:e.zf,kf:e.kf,pe:e.pe,hf:e.hf,gf:e.gf,ff:e.ff,Yf:o.Yf}),{height:e.height,width:e.width,Ca:t,Ia:e.xj,La:e.wj}}function C4(e){var t=new Hi(e,!0);return at(t),at(t),Je(t,4),Je(t,2),Je(t,6),e=Je(t,3),t=we(t),{Wf:e+1,tg:t}}function k4(e){e=new Hi(e,!0),at(e),at(e);var t=0,n=0,r=0,i=0;Je(e,4);var o=Je(e,3);we(e);for(var s=Je(e,2),u=Je(e,1),a=Je(e,5),c=at(e),f=at(e),h=at(e),g=at(e),y=at(e),T=at(e),E=at(e),x=at(e),A=at(e),M=at(e),L=at(e),_=[],F=[],P=0;P<o;P++)_.push(we(e)),F.push(we(e));if(0<o)for(P=o;8>P;P++)Je(e,2);for(P=0;P<o;P++)_[P]&&Je(e,88),F[P]&&at(e);de(e),_=de(e),_==3&&Je(e,1),F=de(e),P=de(e),we(e)&&(t+=de(e),n+=de(e),r+=de(e),i+=de(e));var k=de(e),O=de(e),U=de(e);if(we(e))for(var W=0;W<=o;W++)de(e),de(e),de(e);else de(e),de(e),de(e);if(de(e),de(e),de(e),de(e),de(e),de(e),we(e)&&we(e))for(W=0;4>W;W++)for(var B=0;B<(W===3?2:6);B++)if(we(e)){var K=Math.min(64,1<<4+(W<<1));1<W&&tu(e);for(var X=0;X<K;X++)tu(e)}else de(e);for(we(e),we(e),we(e)&&(at(e),de(e),de(e),we(e)),W=de(e),K=B=0;K<W;K++)if(X=!1,K!==0&&(X=we(e)),X){K===W&&de(e),we(e),de(e);for(var q=X=0;q<=B;q++){var Q=we(e),Y=!1;Q||(Y=we(e)),(Q||Y)&&X++}B=X}else{for(q=de(e),X=de(e),B=q+X,Q=0;Q<q;Q++)de(e),we(e);for(q=0;q<X;q++)de(e),we(e)}if(we(e))for(W=de(e),B=0;B<W;B++){for(K=0;K<U+4;K++)Je(e,1);Je(e,1)}if(W=U=1,B=0,we(e),we(e),we(e)){if(we(e)&&(K=at(e),X=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],q=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<K&&16>=K?(U=X[K-1],W=q[K-1]):K===255&&(U=Je(e,16),W=Je(e,16))),we(e)&&we(e),we(e)&&(Je(e,3),we(e),we(e)&&(at(e),at(e),at(e))),we(e)&&(de(e),de(e)),we(e),we(e),we(e),(K=we(e))&&(de(e),de(e),de(e),de(e)),we(e)&&(Je(e,32),Je(e,32),we(e)&&de(e),we(e)))for(q=!1,K=we(e),X=we(e),(K||X)&&((q=we(e))&&(at(e),Je(e,5),we(e),Je(e,5)),Je(e,4),Je(e,4),q&&Je(e,4),Je(e,5),Je(e,5),Je(e,5)),Q=0;Q<=o;Q++){var ne=!0;Y=1,we(e)||(ne=we(e));var ue=!1;if(ne?de(e):ue=we(e),ue||(Y=de(e)+1),K){for(ne=0;ne<Y;ne++)de(e),de(e),q&&(de(e),de(e));we(e)}if(X){for(ne=0;ne<Y;ne++)de(e),de(e),q&&(de(e),de(e));we(e)}}we(e)&&(we(e),we(e),we(e),B=de(e),de(e),de(e),de(e),de(e))}return{Af:L,Gf:s,Hf:u,Ff:a,Bf:c,Cf:f,Df:h,Ef:g,uf:y,vf:T,wf:E,xf:x,yf:A,zf:M,pe:B,kf:0,hf:_,gf:k,ff:O,width:F-(t+n)*(_===1||_===2?2:1),height:P-(r+i)*(_===1?2:1),xj:U,wj:W}}function D4(e){var t=new Hi(e,!0);at(t),at(t),de(t),de(t),we(t),we(t),Je(t,3),we(t),we(t),de(t),de(t),tu(t),we(t),we(t),we(t)&&de(t),tu(t),tu(t),we(t),we(t),we(t),we(t),e=we(t),t=we(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Yf:n}}function R4(e,t,n,r){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return i[0]=1,i[1]=(r.Gf&3)<<6|(r.Hf?1:0)<<5|r.Ff&31,i[2]=r.Bf,i[3]=r.Cf,i[4]=r.Df,i[5]=r.Ef,i[6]=r.uf,i[7]=r.vf,i[8]=r.wf,i[9]=r.xf,i[10]=r.yf,i[11]=r.zf,i[12]=r.Af,i[13]=240|(r.pe&3840)>>8,i[14]=r.pe&255,i[15]=252|r.Yf&3,i[16]=252|r.hf&3,i[17]=248|r.gf&7,i[18]=248|r.ff&7,i[19]=0,i[20]=0,i[21]=(r.kf&3)<<6|(r.Wf&7)<<3|(r.tg?1:0)<<2|3,i[22]=3,i[23]=160,i[24]=0,i[25]=1,i[26]=(e.byteLength&65280)>>8,i[27]=(e.byteLength&255)>>0,i.set(e,28),i[23+(5+e.byteLength)]=161,i[e.byteLength+29]=0,i[e.byteLength+30]=1,i[e.byteLength+31]=(t.byteLength&65280)>>8,i[e.byteLength+32]=(t.byteLength&255)>>0,i.set(t,e.byteLength+33),i[23+(e.byteLength+10+t.byteLength)]=162,i[e.byteLength+10+t.byteLength+24]=0,i[e.byteLength+10+t.byteLength+25]=1,i[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,i[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,i.set(n,e.byteLength+10+t.byteLength+28),i}function ud(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(n!==1&&i!==0&&i!==15&&o!==3){var s=e[t+3]>>6;i=1e3*P4[14*(n===3?3-r:r===3?3:4)+i-1],o=L4[3*(n===3?0:n===2?1:2)+o],n=_4[n][r];var u=N4[r],a=Math.floor(n*i/o+(e[t+2]>>1&1))*u,c=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(c=c?parseInt(c[1],10):0)&&87>=c&&r===2&&224e3<=i&&s===0&&(e[t+3]|=128),{sampleRate:o,channelCount:s===3?1:2,ia:a,vj:8*n*u}}return null}function Rx(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function Px(e,t){if(t+1<e.length&&Rx(e,t)){var n=ud(e,t),r=4;return n&&n.ia&&(r=n.ia),t+=r,t===e.length||t+1<e.length&&Rx(e,t)}return!1}var P4=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],L4=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],_4=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],N4=[0,1,1,4];function Lr(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=Lr.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?gn(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,t,n,r){for(var i=Le(e),o=eu(i).length;o<i.length&&!Px(i,o);o++);var s;for(e=[];o<i.length;){var u=ud(i,o);if(!u)return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));s||(s=u),o+u.ia<=i.length&&e.push({data:i.subarray(o,o+u.ia),size:u.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),o+=u.ia}return s?(i=9e4*s.vj/s.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:r,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:i,jb:e},stream:t},r=new is([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Zs(r),this.g.set(n,t)),n=this.i!==t,r=ya(r),this.i=t,this.h++,n?(t=Ht(t,r),Promise.resolve(t)):Promise.resolve(r)):Promise.reject(new j(2,3,3018,n?n.N()[0]:null))},D("shaka.transmuxer.Mp3Transmuxer",Lr),Lr.prototype.transmux=Lr.prototype.transmux,Lr.prototype.getOriginalMimeType=Lr.prototype.getOriginalMimeType,Lr.prototype.convertCodecs=Lr.prototype.convertCodecs,Lr.prototype.isSupported=Lr.prototype.isSupported,Lr.prototype.destroy=Lr.prototype.destroy,Ni("audio/mpeg",function(){return new Lr("audio/mpeg")},po);function _r(e){this.h=e,this.g=null}p=_r.prototype,p.destroy=function(){},p.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=er(e).split(","),n=Bn("audio",t);return t=Bn("video",t),!n||t||vn(n)!="mp3"?!1:gn(this.convertCodecs("audio",e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n,r,i){if(this.g?this.g.clearData():this.g=new It,e=Le(e),e=this.g.parse(e),e.od().audio!="mp3"||i!="audio")return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));for(n=new Uint8Array([]),i=v(e.fb()),e=i.next();!e.done;e=i.next())if(e=e.value.data)for(t=0;t<e.length;)(r=ud(e,t))?(t+r.ia<=e.length&&(n=Ht(n,e.subarray(t,t+r.ia))),t+=r.ia):t++;return Promise.resolve(n)},D("shaka.transmuxer.MpegTsTransmuxer",_r),_r.prototype.transmux=_r.prototype.transmux,_r.prototype.getOriginalMimeType=_r.prototype.getOriginalMimeType,_r.prototype.convertCodecs=_r.prototype.convertCodecs,_r.prototype.isSupported=_r.prototype.isSupported,_r.prototype.destroy=_r.prototype.destroy,Ni("video/mp2t",function(){return new _r("video/mp2t")},ph);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function wr(e){this.h=e,(this.g=mg.get("ISOBoxer")())&&j4(this)}function j4(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==O4[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}p=wr.prototype,p.destroy=function(){},p.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?gn(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),gn(t)||gn(e))},p.convertCodecs=function(e,t){return t.replace("mss/","")},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n){if(!n)return Promise.resolve(Le(e));if(!t.mssPrivateData)return Promise.reject(new j(2,3,3020,n?n.N()[0]:null));try{var r,i=this.g.parseBuffer(e),o=i.fetch("tfhd");o.track_ID=t.id+1;var s=i.fetch("tfdt"),u=i.fetch("traf");s===null&&(s=this.g.createFullBox("tfdt",u,o),s.version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=i.fetch("trun"),c=i.fetch("tfxd");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var f=i.fetch("tfrf");f&&f._parent.boxes.splice(f._parent.boxes.indexOf(f),1);var h=i.fetch("sepiff");if(h!==null){h.type="senc",h.usertype=void 0;var g=i.fetch("saio");if(g===null){g=this.g.createFullBox("saio",u),g.version=0,g.flags=0,g.entry_count=1,g.offset=[0];var y=this.g.createFullBox("saiz",u);if(y.version=0,y.flags=0,y.sample_count=h.sample_count,y.default_sample_info_size=0,y.sample_info_size=[],h.flags&2)for(r=0;r<h.sample_count;r+=1)y.sample_info_size[r]=10+6*h.entry[r].NumberOfEntries;else y.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var T=i.fetch("moof");a.data_offset=T.getLength()+8;var E=i.fetch("saio");E!==null&&(E.offset[0]=Lx(T,"traf")+Lx(u,"senc")+16);var x=Le(i.write());return Promise.resolve(x)}catch(A){return A instanceof j?Promise.reject(A):Promise.reject(new j(2,3,3022,n?n.N()[0]:null))}};function Lx(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}D("shaka.transmuxer.MssTransmuxer",wr),wr.prototype.transmux=wr.prototype.transmux,wr.prototype.getOriginalMimeType=wr.prototype.getOriginalMimeType,wr.prototype.convertCodecs=wr.prototype.convertCodecs,wr.prototype.isSupported=wr.prototype.isSupported,wr.prototype.destroy=wr.prototype.destroy;var O4=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ni("mss/audio/mp4",function(){return new wr("mss/audio/mp4")},po),Ni("mss/video/mp4",function(){return new wr("mss/video/mp4")},po);function Nr(e){this.m=e,this.g=0,this.i=new Map,this.l=this.h=this.j=null}p=Nr.prototype,p.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},p.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=er(n).split(",");return n=Bn("audio",r),r=Bn("video",r),n&&(n=vn(n),!b4.includes(n))||r&&(n=vn(r),!U4.includes(n))?!1:t?gn(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),gn(t)||gn(e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=er(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return aa(n,"audio/mp4")}).map(xh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},p.getOriginalMimeType=function(){return this.m},p.transmux=function(e,t,n,r,i){var o=Le(e);if(i=="audio"&&!nu(o)){for(var s=eu(o),u=s.length;u<o.length;u++)if(Px(o,u))return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));for(u=s.length;u<o.length;u++)if(Cx(o,u))return this.h||(this.h=new Tr("audio/aac")),this.h.transmux(e,t,n,r,i);return Promise.reject(new j(2,3,3018,n?n.N()[0]:null))}this.j?this.j.clearData():this.j=new It;var a=this.j.parse(o),c=[],f=a.od();try{var h=null;if(i=="video"){switch(f.video){case"avc":var g=[],y=null,T=a.wc(),E=A4(T);if(!E.length)throw new j(2,3,3023,n?n.N()[0]:null);for(var x=0;x<E.length;x++){var A=E[x];y==null&&(y=A.dts);var M=void 0;M=x+1<E.length?(E[x+1].dts||0)-(A.dts||0):1<E.length?(A.dts||0)-(E[x-1].dts||0):9e4*(n.endTime-n.startTime),g.push({data:A.data,size:A.data.byteLength,duration:M,eb:Math.round((A.pts||0)-(A.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:A.isKeyframe?2:1,ib:A.isKeyframe?0:1}})}for(var L=[],_=v(T),F=_.next();!F.done;F=_.next())L.push.apply(L,J(F.value.nalus));var P=E4(L);if(!P||y==null)throw new j(2,3,3018,n?n.N()[0]:null);t.height=P.height,t.width=P.width,h={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,lb:[],ra:new Uint8Array([]),Ca:P.Ca,Ia:P.Ia,La:P.La,data:{Eb:this.g,baseMediaDecodeTime:y,jb:g},stream:t};break;case"hvc":var k=[],O=null,U=[],W=a.wc();if(!W.length)throw new j(2,3,3023,n?n.N()[0]:null);for(var B=0;B<W.length;B++){var K=W[B],X=K.nalus;U.push.apply(U,J(X));for(var q=!1,Q=[],Y=!1,ne=v(X),ue=ne.next();!ue.done;ue=ne.next()){var Re=ue.value;switch(Re.type){case 1:case 0:var ge=Y=!0;break;case 19:case 20:case 21:q=ge=Y=!0;break;case 32:ge=!0;break;case 33:ge=!0;break;case 34:ge=!0;break;case 35:Y=ge=!0;break;case 39:case 40:ge=!0;break;default:ge=!1}if(Y&&ge){var st=Re.fullData.byteLength,qe=new Uint8Array(4);qe[0]=st>>24&255,qe[1]=st>>16&255,qe[2]=st>>8&255,qe[3]=st&255,Q.push(qe),Q.push(Re.fullData)}}var Ke=Q.length?{data:Ht.apply(yn,J(Q)),isKeyframe:q}:null;if(Ke){O==null&&K.dts!=null&&(O=K.dts);var We=void 0;We=B+1<W.length?(W[B+1].dts||0)-(K.dts||0):1<W.length?(K.dts||0)-(W[B-1].dts||0):9e4*(n.endTime-n.startTime),k.push({data:Ke.data,size:Ke.data.byteLength,duration:We,eb:Math.round((K.pts||0)-(K.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:Ke.isKeyframe?2:1,ib:Ke.isKeyframe?0:1}})}}var ot=M4(U);if(!ot||O==null)throw new j(2,3,3018,n?n.N()[0]:null);t.height=ot.height,t.width=ot.width,h={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,lb:[],ra:new Uint8Array([]),Ca:ot.Ca,Ia:ot.Ia,La:ot.La,data:{Eb:this.g,baseMediaDecodeTime:O,jb:k},stream:t}}h&&(c.push(h),h=null)}if(i=="audio"){switch(f.audio){case"aac":for(var Ve=[],$e,Ne=null,He=null,vt=null,sn=v(a.fb()),_t=sn.next();!_t.done;_t=sn.next()){var Ot=_t.value,Zt=Ot.data;if(Zt){var ln=0;if(He==-1&&vt)Zt=Ht(vt,Ot.data),He=null;else if(He!=null&&vt){ln=Math.max(0,He);var vs=Ht(vt,Zt.subarray(0,ln));Ve.push({data:vs,size:vs.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),He=vt=null}if($e=Mx(Zt,ln),!$e)throw new j(2,3,3018,n?n.N()[0]:null);for(t.audioSamplingRate=$e.sampleRate,t.channelsCount=$e.channelCount,Ne==null&&Ot.pts!==null&&(Ne=Ot.pts);ln<Zt.length;){var Ji=Ix(Zt,ln);if(!Ji){vt=Zt.subarray(ln,Zt.length),He=-1;break}var ko=Ji.ud+Ji.ia;He=Math.max(0,ln+ko-Zt.length),He!=0?vt=Zt.subarray(ln+Ji.ud,ln+ko):ln+ko<=Zt.length&&Ve.push({data:Zt.subarray(ln+Ji.ud,ln+ko),size:Ji.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),ln+=ko}}}if(!$e||Ne==null){if(!a.wc().length)throw new j(2,3,3018,n?n.N()[0]:null);Ne=9e4*n.startTime;var jr=Bn("audio",t.codecs.split(","));if(!jr||!t.channelsCount||!t.audioSamplingRate)throw new j(2,3,3018,n?n.N()[0]:null);$e={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:jr};var hm=w4(jr,t.channelsCount);if(!hm)throw new j(2,3,3018,n?n.N()[0]:null);for(var K4=Ne+9e4*(n.endTime-n.startTime),zx=Ne;zx<K4;)Ve.push({data:hm,size:hm.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),zx+=1024/$e.sampleRate*9e4}var qx=$e.sampleRate,W4=Ne/9e4*qx;h={id:t.id,type:"audio",codecs:$e.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:qx,duration:r,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:W4,jb:Ve},stream:t};break;case"ac3":for(var Yx=[],ld=0,pm=new Uint8Array([]),cd=null,$x=v(a.fb()),gm=$x.next();!gm.done;gm=$x.next()){var mm=gm.value,ym=mm.data;cd==null&&mm.pts!==null&&(cd=mm.pts);for(var Ru=0;Ru<ym.length;){var Do=kx(ym,Ru);Do?(t.audioSamplingRate=Do.sampleRate,t.channelsCount=Do.channelCount,ld=Do.sampleRate,pm=Do.ra,Yx.push({data:ym.subarray(Ru,Ru+Do.ia),size:Do.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),Ru+=Do.ia):Ru++}}if(ld==0||pm.byteLength==0||cd==null)throw new j(2,3,3018,n?n.N()[0]:null);var X4=cd/9e4*ld;h={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ld,duration:r,lb:[],ra:pm,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:X4,jb:Yx},stream:t};break;case"ec3":for(var Qx=[],fd=0,vm=new Uint8Array([]),dd=null,Jx=v(a.fb()),Sm=Jx.next();!Sm.done;Sm=Jx.next()){var Tm=Sm.value,wm=Tm.data;dd==null&&Tm.pts!==null&&(dd=Tm.pts);for(var Pu=0;Pu<wm.length;){var Ro=Dx(wm,Pu);Ro?(t.audioSamplingRate=Ro.sampleRate,t.channelsCount=Ro.channelCount,fd=Ro.sampleRate,vm=Ro.ra,Qx.push({data:wm.subarray(Pu,Pu+Ro.ia),size:Ro.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),Pu+=Ro.ia):Pu++}}if(fd==0||vm.byteLength==0||dd==null)throw new j(2,3,3018,n?n.N()[0]:null);var z4=dd/9e4*fd;h={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:fd,duration:r,lb:[],ra:vm,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:z4,jb:Qx},stream:t};break;case"mp3":for(var Zx=[],hd,pd=null,eE=v(a.fb()),xm=eE.next();!xm.done;xm=eE.next()){var Em=xm.value,dl=Em.data;if(dl){pd==null&&Em.pts!==null&&(pd=Em.pts);for(var Ss=0;Ss<dl.length;){var Lu=ud(dl,Ss);Lu?(hd||(hd=Lu),Ss+Lu.ia<=dl.length&&Zx.push({data:dl.subarray(Ss,Ss+Lu.ia),size:Lu.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),Ss+=Lu.ia):Ss++}}}if(!hd||pd==null)throw new j(2,3,3018,n?n.N()[0]:null);var tE=hd.sampleRate,q4=pd/9e4*tE;h={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:tE,duration:r,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:q4,jb:Zx},stream:t};break;case"opus":var nE=[],gd=null,vi=a.F;if(!vi)throw new j(2,3,3018,n?n.N()[0]:null);var Nn=[];switch(vi.$h){case 1:case 2:Nn=[0];break;case 0:Nn=[255,1,1,0,1];break;case 128:Nn=[255,2,0,0,1];break;case 3:Nn=[1,2,1,0,2,1];break;case 4:Nn=[1,2,2,0,1,2,3];break;case 5:Nn=[1,3,2,0,4,1,2,3];break;case 6:Nn=[1,4,2,0,4,1,2,3,5];break;case 7:Nn=[1,4,2,0,4,1,2,3,5,6];break;case 8:Nn=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Nn=[1,1,2,0,1];break;case 131:Nn=[1,1,3,0,1,2];break;case 132:Nn=[1,1,4,0,1,2,3];break;case 133:Nn=[1,1,5,0,1,2,3,4];break;case 134:Nn=[1,1,6,0,1,2,3,4,5];break;case 135:Nn=[1,1,7,0,1,2,3,4,5,6];break;case 136:Nn=[1,1,8,0,1,2,3,4,5,6,7]}for(var rE=new Uint8Array([0,vi.channelCount,0,0,vi.sampleRate>>>24&255,vi.sampleRate>>>17&255,vi.sampleRate>>>8&255,vi.sampleRate>>>0&255,0,0].concat(J(Nn))),iE=vi.sampleRate,oE=v(a.fb()),Am=oE.next();!Am.done;Am=oE.next()){var Im=Am.value,_u=Im.data;gd==null&&Im.pts!==null&&(gd=Im.pts);for(var hl=0;hl<_u.length;){for(var Y4=(_u[hl+1]&16)!==0,$4=(_u[hl+1]&8)!==0,Zi=hl+2,md=0;_u[Zi]===255;)md+=255,Zi+=1;md+=_u[Zi],Zi+=1,Zi+=Y4?2:0,Zi+=$4?2:0;var sE=_u.slice(Zi,Zi+md);nE.push({data:sE,size:sE.byteLength,duration:960,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),hl=Zi+md}}if(rE.byteLength==0||gd==null)throw new j(2,3,3018,n?n.N()[0]:null);t.audioSamplingRate=vi.sampleRate,t.channelsCount=vi.channelCount;var Q4=gd/9e4*iE;h={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:iE,duration:r,lb:[],ra:rE,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:Q4,jb:nE},stream:t}}h&&(c.push(h),h=null)}}catch(Cm){return Cm&&Cm.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(Cm)}if(!c.length)return Promise.reject(new j(2,3,3018,n?n.N()[0]:null));var uE=new is(c),Mm=t.id+"_"+n.i;if(this.i.has(Mm))var pl=this.i.get(Mm);else pl=Zs(uE),this.i.set(Mm,pl);var J4=this.l!==pl,aE=ya(uE);if(this.l=pl,this.g++,J4){var Z4=Ht(pl,aE);return Promise.resolve(Z4)}return Promise.resolve(aE)},D("shaka.transmuxer.TsTransmuxer",Nr),Nr.prototype.transmux=Nr.prototype.transmux,Nr.prototype.getOriginalMimeType=Nr.prototype.getOriginalMimeType,Nr.prototype.convertCodecs=Nr.prototype.convertCodecs,Nr.prototype.isSupported=Nr.prototype.isSupported,Nr.prototype.destroy=Nr.prototype.destroy;var b4=["aac","ac-3","ec-3","mp3","opus"],U4=["avc","hevc"];Ni("video/mp2t",function(){return new Nr("video/mp2t")},gh);function _x(){}St(_x,Gn),D("shaka.util.FairPlayUtils",_x);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Nx(){}var cl;function jx(){cl||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(cl=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=F4,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function F4(e,t){var n=this,r;return b(function(i){return i.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),I(i,cl.call(n,e,t),2)):(r=i.h,Gx(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=cl,i.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Ox,i.return(Ox.call(n,e,t))))})}function Ox(e,t){var n=this,r,i,o,s,u,a,c,f,h,g,y,T;return b(function(E){if(E.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=Hx(e),i=[],o=v(t),s=o.next();!s.done;s=o.next())u=s.value,a=bx(u.videoCapabilities,r),c=bx(u.audioCapabilities,r),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!c.length||(f=Object.assign({},u),f.videoCapabilities=a,f.audioCapabilities=c,i.push(f));if(!i.length)throw h=Error("Unsupported keySystem or supportedConfigurations."),h.name="NotSupportedError",h.code=DOMException.NOT_SUPPORTED_ERR,h;return I(E,cl.call(n,e,i),2)}return g=E.h,T=y=null,i[0]&&(i[0].videoCapabilities&&(y=i[0].videoCapabilities[0].encryptionScheme),i[0].audioCapabilities&&(T=i[0].audioCapabilities[0].encryptionScheme)),E.return(new ad(g,y,T))})}function bx(e,t){return e&&e.filter(function(n){return cm(n.encryptionScheme,t)})}D("EmeEncryptionSchemePolyfill",Nx),Nx.install=jx;function Ux(){}var fl;function Fx(){fl||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(fl=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=B4,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function B4(e){var t=this,n,r;return b(function(i){switch(i.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),I(i,fl.call(t,e),2);case 2:if(n=i.h,!n.supported||!e.keySystemConfiguration)return i.return(n);if((r=n.keySystemAccess)&&Gx(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=fl,i.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Bx,r){i.s(3);break}return I(i,Vx(e),4);case 4:return n.keySystemAccess=i.h,i.return(n);case 3:return i.return(Bx.call(t,e))}})}function Bx(e){var t=this,n,r,i,o,s,u,a;return b(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(i=e.keySystemConfiguration,o=i.keySystem,r=i.audio&&i.audio.encryptionScheme,n=i.video&&i.video.encryptionScheme,s=Hx(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},cm(r,s)&&cm(n,s))?I(c,fl.call(t,e),2):c.return(u);case 2:if(a=c.h,a.keySystemAccess){a.keySystemAccess=new ad(a.keySystemAccess,n,r),c.s(3);break}if(!e.keySystemConfiguration){c.s(3);break}return I(c,Vx(e),5);case 5:a.keySystemAccess=c.h;case 3:return c.return(a)}})}function Vx(e){var t,n;return b(function(r){if(r.g==1){var i=e.keySystemConfiguration,o=[],s=[];return i.audio&&o.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:i.audio.encryptionScheme}),i.video&&s.push({robustness:i.video.robustness||"",contentType:e.video.contentType,encryptionScheme:i.video.encryptionScheme}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},o.length&&(i.audioCapabilities=o),s.length&&(i.videoCapabilities=s),t=i,I(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}D("McEncryptionSchemePolyfill",Ux),Ux.install=Fx;function ad(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}ad.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=v(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=v(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},ad.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function Hx(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":e.startsWith("com.huawei")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Gx(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function cm(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(H4||G4||V4))}function fm(){}function Kx(){jx(),Fx()}D("EncryptionSchemePolyfills",fm),fm.install=Kx;var V4=navigator.userAgent.includes("CrKey"),H4=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10),dm,Wx=navigator.userAgent||"";if(Wx.includes("Web0S")){var Xx=Wx.match(/Chrome\/(\d+)/);dm=Xx?79<=parseInt(Xx[1],10):!1}else dm=!1;var G4=dm;typeof R<"u"&&R.exports&&(R.exports=fm)}).call(m,d,d,void 0);for(var w in m.shaka)l[w]=m.shaka[w]})()}(Vm)),Vm}var RN=DN();const vl=kN(RN),PN="[BILILITE_PLAYER_EVENT]";function Td(l,d){window.chrome.webview.postMessage({type:PN,event:l,data:d})}class tA{constructor(d,m,w,S){lE(this,"onErrorEvent",d=>{this.onError(d.detail)});this.elementRef=d,this.mediaType=m,this.shakaPlayer=w,this.config=S,this.isEnabled=!0,this.currentPlaybackRate=1}async init(d){if(!d.url){this.isEnabled=!1;return}await this.shakaPlayer.attach(this.elementRef.value),this.shakaPlayer.configure(this.config),this.shakaPlayer.addEventListener("error",this.onErrorEvent);try{await this.shakaPlayer.load(d.url,null,d.contentType),console.log(`The ${this.mediaType} has now been loaded!`)}catch(m){this.onError(m)}}onError(d){console.error("Error code",d.code,"object",d)}setCurrentTime(d){this.elementRef.value.currentTime=d}getCurrentTime(){return this.elementRef.value.currentTime}setPlaybackRate(d){this.currentPlaybackRate=d,this.elementRef.value.playbackRate=d}getPlaybackRate(){return this.elementRef.value.playbackRate}play(){this.elementRef.value.play()}pause(){this.elementRef.value.pause()}setVolume(d){this.elementRef.value.volume=d}getVolume(){return this.elementRef.value.volume}}class LN{constructor(d,m,w){this.videoPlayer=d,this.audioPlayer=m,this.avSyncManager=w}play(){this.videoPlayer.play(),this.audioPlayer.play()}pause(){this.videoPlayer.pause(),this.audioPlayer.pause()}seek(d){this.videoPlayer.setCurrentTime(d),this.audioPlayer.setCurrentTime(d)}setVolume(d){this.videoPlayer.setVolume(d),this.audioPlayer.setVolume(d)}getVolume(){return this.audioPlayer.getVolume()}setPlaybackRate(d){this.videoPlayer.setPlaybackRate(d),this.audioPlayer.setPlaybackRate(d)}checkAVSync(){this.avSyncManager.checkSync()}}class _N{constructor(d,m){this.videoPlayer=d,this.audioPlayer=m,this.syncThresholdSmall=.1,this.syncThresholdLarge=.5,this.isSyncing=!1,this.lastSyncTime=0,this.syncCooldown=1e3,this.syncTimeoutId=null}checkSync(){if(!this.videoPlayer.isEnabled||!this.audioPlayer.isEnabled)return;const d=Date.now();if(this.isSyncing||d-this.lastSyncTime<this.syncCooldown)return;const m=this.videoPlayer.getCurrentTime(),w=this.audioPlayer.getCurrentTime(),S=m-w;if(Math.abs(S)<this.syncThresholdSmall){this.resetSyncState();return}this.isSyncing=!0,this.lastSyncTime=d;try{if(this.syncTimeoutId&&(clearTimeout(this.syncTimeoutId),this.syncTimeoutId=null),Math.abs(S)>=this.syncThresholdLarge)console.log(`:  (: ${S.toFixed(3)}s)`),this.audioPlayer.setCurrentTime(m),this.resetSyncState();else{const C=this.calculateSyncRate(S,this.videoPlayer.currentPlaybackRate);console.log(`:  ${C.toFixed(2)}x (: ${S.toFixed(3)}s)`),this.audioPlayer.setPlaybackRate(C),this.syncTimeoutId=setTimeout(()=>{const R=this.videoPlayer.getCurrentTime()-this.audioPlayer.getCurrentTime();Math.abs(R)<this.syncThresholdSmall?(console.log(` ${this.videoPlayer.currentPlaybackRate}x`),this.resetSyncState()):(console.log(` (: ${R.toFixed(3)}s)`),this.isSyncing=!1,this.checkSync()),this.syncTimeoutId=null},500)}}catch(C){console.error(":",C),this.resetSyncState()}}resetAudioRate(){this.audioPlayer.setPlaybackRate(this.videoPlayer.currentPlaybackRate)}resetSyncState(){this.syncTimeoutId&&(clearTimeout(this.syncTimeoutId),this.syncTimeoutId=null),this.resetAudioRate(),this.isSyncing=!1}calculateSyncRate(d,m){const w=Math.min(Math.abs(d)*5,.5);return d>0?Math.min(m+w,2):Math.max(.5,m-w)}setSyncThresholds(d,m){this.syncThresholdSmall=d,this.syncThresholdLarge=m}}const NN={__name:"ShakaPlayerView",setup(l){window.shaka=vl;const d=zm(null),m=zm(null);let w=null;const S=()=>{const $=new URLSearchParams(window.location.search).get("playData");console.log("playDataBase64",$);const te=atob($),v=Uint8Array.from(te,je=>je.codePointAt(0)),J=new TextDecoder("utf-8").decode(v),nt=JSON.parse(J);return console.log("playData:",nt),nt},C=G=>{Td("positionChanged",d.value.currentTime),w.checkAVSync()},R=()=>{let G=d.value.duration;console.log("duration:",G),G==1/0&&(G=0),Td("loaded",{duration:G})},p=()=>{console.log("onAudioLoadedMateData")},N=()=>{Td("ended")},z=G=>{console.log("volumeChanged",m.value.volume),Td("volumeChanged",m.value.volume)},H=async()=>{if(vl.polyfill.installAll(),!vl.Player.isBrowserSupported()){console.error("Browser not supported!");return}const G={video:{url:"",contentType:"video/mp4"},audio:{url:"",contentType:"audio/mp3"}},$={video:{...G.video,...S().video},audio:{...G.audio,...S().audio}},te={streaming:{bufferingGoal:30}},v=new tA(d,"video",new vl.Player,te),J=new tA(m,"audio",new vl.Player,te),nt=new _N(v,J);w=new LN(v,J,nt),window.resume=()=>w.play(),window.seek=je=>w.seek(je),window.setVolume=je=>w.setVolume(je),window.getVolume=()=>w.getVolume(),window.setRate=je=>w.setPlaybackRate(je),window.pause=()=>w.pause(),window.setCheckAVSyncDiff=(je,Ue)=>nt.setSyncThresholds(je,Ue),await v.init($.video),await J.init($.audio)};return NA(()=>{H()}),window.initApp=H,(G,$)=>(eI(),UL(wi,null,[Pd("video",{ref_key:"videoElement",ref:d,id:"videoElement",width:"100%",height:"100%",onLoadedmetadata:R,onTimeupdate:C,onVolumechange:z,onEnded:N},null,544),Pd("video",{ref_key:"audioElement",ref:m,id:"audioElement",width:"0",height:"0",onLoadedmetadata:p,onVolumechange:z},null,544)],64))}},jN=AN({history:eN("./"),routes:[{path:"/index.html",query:{view:"ShakaPlayerView"},component:NN}]}),wI=w_(MN);wI.use(jN);wI.mount("#app");</script>
    <style rel="stylesheet" crossorigin>:root{--vt-c-white: #ffffff;--vt-c-white-soft: #f8f8f8;--vt-c-white-mute: #f2f2f2;--vt-c-black: #181818;--vt-c-black-soft: #222222;--vt-c-black-mute: #282828;--vt-c-indigo: #2c3e50;--vt-c-divider-light-1: rgba(60, 60, 60, .29);--vt-c-divider-light-2: rgba(60, 60, 60, .12);--vt-c-divider-dark-1: rgba(84, 84, 84, .65);--vt-c-divider-dark-2: rgba(84, 84, 84, .48);--vt-c-text-light-1: var(--vt-c-indigo);--vt-c-text-light-2: rgba(60, 60, 60, .66);--vt-c-text-dark-1: var(--vt-c-white);--vt-c-text-dark-2: rgba(235, 235, 235, .64)}:root{--color-background: var(--vt-c-white);--color-background-soft: var(--vt-c-white-soft);--color-background-mute: var(--vt-c-white-mute);--color-border: var(--vt-c-divider-light-2);--color-border-hover: var(--vt-c-divider-light-1);--color-heading: var(--vt-c-text-light-1);--color-text: var(--vt-c-text-light-1);--section-gap: 160px}@media (prefers-color-scheme: dark){:root{--color-background: var(--vt-c-black);--color-background-soft: var(--vt-c-black-soft);--color-background-mute: var(--vt-c-black-mute);--color-border: var(--vt-c-divider-dark-2);--color-border-hover: var(--vt-c-divider-dark-1);--color-heading: var(--vt-c-text-dark-1);--color-text: var(--vt-c-text-dark-2)}}*,*:before,*:after{box-sizing:border-box;margin:0;font-weight:400}body{min-height:100vh;color:var(--color-text);background:var(--color-background);transition:color .5s,background-color .5s;line-height:1.6;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:15px;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app{width:100%;height:100dvh;overflow:hidden;background:#000}#videoElement{width:100%;height:100%;background:#000}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
