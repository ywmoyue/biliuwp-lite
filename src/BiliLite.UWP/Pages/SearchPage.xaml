<local:BasePage
    x:Class="BiliLite.Pages.SearchPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:control="using:BiliLite.Controls"
    xmlns:convert="using:BiliLite.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="using:FontAwesome5"
    xmlns:local="using:BiliLite.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:modules="using:BiliLite.Modules"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:dataTemplateSelectors="using:BiliLite.Controls.DataTemplateSelectors"
    xmlns:viewModel="using:BiliLite.ViewModels.Search"
    xmlns:model="using:BiliLite.Models.Common.Search"
    Background="Transparent"
    SizeChanged="SearchPage_OnSizeChanged"
    mc:Ignorable="d">
    <Page.Resources>
        <convert:DatetimeConvert x:Key="ts" />
        <SolidColorBrush x:Key="PivotHeaderBackground" Color="Transparent" />
        <SolidColorBrush x:Key="SystemControlHighlightAltAccentBrush" Color="White" />
        <DataTemplate x:Key="VideoTpl" x:DataType="viewModel:SearchVideoViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid Margin="0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <ComboBox
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=OrderFilters}"
                        SelectedItem="{x:Bind Path=SelectOrder, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="1"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=DurationFilters}"
                        SelectedItem="{x:Bind Path=SelectDuration, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="2"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=RegionFilters}"
                        SelectedItem="{x:Bind Path=SelectRegion, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                </Grid>
                <toolkit:AdaptiveGridView
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    Padding="8"
                    DesiredWidth="600"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="100"
                    ItemsSource="{x:Bind Path=Videos, Mode=OneWay}"
                    PointerPressed="Search_ItemPressed"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <toolkit:AdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchVideoItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <toolkit:ImageEx
                                        Width="160"
                                        Height="100"
                                        IsCacheEnabled="True"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=pic, Converter={StaticResource imageConvert}, ConverterParameter='160w'}"
                                        Stretch="UniformToFill" />
                                    <Border
                                        Margin="4"
                                        Padding="4,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Background="#99000000"
                                        CornerRadius="4">
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="White"
                                            Text="{x:Bind duration}" />
                                    </Border>
                                </Grid>
                                <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        UP:<Run Text="{x:Bind Path=author}" /></TextBlock>
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        播放:<Run Text="{x:Bind Path=play, Converter={StaticResource numberToStringConvert}}" />
                                        弹幕:<Run Text="{x:Bind Path=video_review, Converter={StaticResource numberToStringConvert}}" /></TextBlock>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </toolkit:AdaptiveGridView.ItemTemplate>
                    <toolkit:AdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </toolkit:AdaptiveGridView.Footer>
                </toolkit:AdaptiveGridView>

                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <control:RoundButton
                    Grid.RowSpan="2"
                    Margin="12"
                    Padding="12"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Command="{x:Bind Path=RefreshCommand}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource display}}">
                    <SymbolIcon Foreground="White" Symbol="Refresh" />
                </control:RoundButton>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="AnimeTpl" x:DataType="viewModel:SearchAnimeViewModel">
            <Grid>
                <toolkit:AdaptiveGridView
                    Grid.Row="1"
                    Padding="8"
                    DesiredWidth="600"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="140"
                    ItemsSource="{x:Bind Path=Animes, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <toolkit:AdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchAnimeItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <toolkit:ImageEx
                                        Width="105"
                                        Height="140"
                                        IsCacheEnabled="True"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=cover, Converter={StaticResource imageConvert}, ConverterParameter='160w'}"
                                        Stretch="UniformToFill" />
                                    <Border
                                        Margin="4"
                                        Padding="8,4"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Background="#FFFB9E60"
                                        CornerRadius="2"
                                        Visibility="{x:Bind showBadge}">
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="#FFFFFFFF"
                                            Text="会员专享"
                                            TextTrimming="CharacterEllipsis"
                                            TextWrapping="Wrap" />
                                    </Border>
                                </Grid>
                                <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        类型：<Run Text="{x:Bind season_type_name}" /></TextBlock>
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        地区：<Run Text="{x:Bind areas}" /></TextBlock>
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        风格：<Run Text="{x:Bind styles}" /></TextBlock>
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        开播时间：<Run Text="{x:Bind Path=pubtime, Converter={StaticResource ts}, ConverterParameter='yyyy-MM-dd'}" /></TextBlock>
                                    <!--<TextBlock Margin="0" MaxLines="2" FontSize="14" Foreground="Gray" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" Text="{x:Bind Path=desc}"></TextBlock>-->
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </toolkit:AdaptiveGridView.ItemTemplate>
                    <toolkit:AdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </toolkit:AdaptiveGridView.Footer>
                </toolkit:AdaptiveGridView>
                <TextBlock
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <control:RoundButton
                    Margin="12"
                    Padding="12"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Command="{x:Bind Path=RefreshCommand}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource display}}">
                    <SymbolIcon Foreground="White" Symbol="Refresh" />
                </control:RoundButton>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="UserTpl" x:DataType="viewModel:SearchUserViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid Margin="0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <ComboBox
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=OrderFilters}"
                        SelectedItem="{x:Bind Path=SelectOrder, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="1"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=TypeFilters}"
                        SelectedItem="{x:Bind Path=SelectType, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />

                </Grid>
                <toolkit:AdaptiveGridView
                    Grid.Row="1"
                    Padding="8"
                    DesiredWidth="600"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="72"
                    ItemsSource="{x:Bind Path=Users, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <toolkit:AdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchUserItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <Ellipse
                                        Width="56"
                                        Height="56"
                                        Margin="4,0,0,0">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{x:Bind Path=upic}" Stretch="UniformToFill" />
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <Image
                                        Width="20"
                                        Height="20"
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Source="{x:Bind Path=Verify}" />
                                </Grid>
                                <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        Text="{x:Bind uname}"
                                        TextTrimming="CharacterEllipsis" />
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        稿件:<Run Text="{x:Bind Path=videos, Converter={StaticResource numberToStringConvert}}" />
                                        粉丝:<Run Text="{x:Bind Path=fans, Converter={StaticResource numberToStringConvert}}" /></TextBlock>
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        FontSize="14"
                                        Foreground="Gray"
                                        MaxLines="1"
                                        Text="{x:Bind sign}"
                                        TextTrimming="CharacterEllipsis" />

                                    <!--<TextBlock Margin="0" MaxLines="2" FontSize="14" Foreground="Gray" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" Text="{x:Bind Path=desc}"></TextBlock>-->
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </toolkit:AdaptiveGridView.ItemTemplate>
                    <toolkit:AdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </toolkit:AdaptiveGridView.Footer>
                </toolkit:AdaptiveGridView>
                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <control:RoundButton
                    Grid.RowSpan="2"
                    Margin="12"
                    Padding="12"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Command="{x:Bind Path=RefreshCommand}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource display}}">
                    <SymbolIcon Foreground="White" Symbol="Refresh" />
                </control:RoundButton>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="LiveRoomTpl" x:DataType="viewModel:SearchLiveRoomViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <toolkit:AdaptiveGridView
                    Grid.Row="1"
                    Padding="8"
                    DesiredWidth="260"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="220"
                    ItemsSource="{x:Bind Path=Rooms, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <toolkit:AdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchLiveRoomItem">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="32" />
                                </Grid.RowDefinitions>
                                <Grid>
                                    <toolkit:ImageEx
                                        IsCacheEnabled="True"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=user_cover, Converter={StaticResource imageConvert}, ConverterParameter='200h'}"
                                        Stretch="UniformToFill" />
                                </Grid>
                                <Grid Grid.Row="1" Margin="4,-24,4,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="48" />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Ellipse
                                        Width="48"
                                        Height="48"
                                        Stroke="Gray"
                                        StrokeThickness="1">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{x:Bind Path=uface, Converter={StaticResource imageConvert2}, ConverterParameter='56w'}" />
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <TextBlock
                                        Grid.Column="1"
                                        Margin="4,24,4,0"
                                        Text="{x:Bind title}"
                                        TextTrimming="CharacterEllipsis" />
                                </Grid>

                                <Grid Grid.Row="2" Margin="8,4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind uname}"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Grid.Column="1"
                                        HorizontalAlignment="Right"
                                        FontSize="12"
                                        Foreground="Gray">
                                        人气:<Run Text="{x:Bind Path=online, Converter={StaticResource numberToStringConvert}}" /></TextBlock>
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </toolkit:AdaptiveGridView.ItemTemplate>
                    <toolkit:AdaptiveGridView.ItemContainerStyle>
                        <Style TargetType="GridViewItem">
                            <Setter Property="Margin" Value="8" />

                        </Style>
                    </toolkit:AdaptiveGridView.ItemContainerStyle>
                    <toolkit:AdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </toolkit:AdaptiveGridView.Footer>
                </toolkit:AdaptiveGridView>
                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <control:RoundButton
                    Grid.RowSpan="2"
                    Margin="12"
                    Padding="12"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Command="{x:Bind Path=RefreshCommand}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource display}}">
                    <SymbolIcon Foreground="White" Symbol="Refresh" />
                </control:RoundButton>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="ArticTpl" x:DataType="viewModel:SearchArticleViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid Margin="0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <ComboBox
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=OrderFilters}"
                        SelectedItem="{x:Bind Path=SelectOrder, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="2"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=RegionFilters}"
                        SelectedItem="{x:Bind Path=SelectRegion, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                </Grid>
                <toolkit:AdaptiveGridView
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    Padding="8"
                    DesiredWidth="600"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="100"
                    ItemsSource="{x:Bind Path=Articles, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <toolkit:AdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchArticleItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <toolkit:ImageEx
                                        Width="160"
                                        Height="100"
                                        IsCacheEnabled="True"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=cover, Converter={StaticResource imageConvert}, ConverterParameter='160w'}"
                                        Stretch="UniformToFill" />

                                </Grid>
                                <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        阅读:<Run Text="{x:Bind Path=view, Converter={StaticResource numberToStringConvert}}" />
                                        评论:<Run Text="{x:Bind Path=reply, Converter={StaticResource numberToStringConvert}}" />
                                        喜欢:<Run Text="{x:Bind Path=like, Converter={StaticResource numberToStringConvert}}" /></TextBlock>
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray"
                                        MaxLines="2">
                                        分区:<Run Text="{x:Bind Path=category_name}" /></TextBlock>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </toolkit:AdaptiveGridView.ItemTemplate>
                    <toolkit:AdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </toolkit:AdaptiveGridView.Footer>
                </toolkit:AdaptiveGridView>

                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <control:RoundButton
                    Grid.RowSpan="2"
                    Margin="12"
                    Padding="12"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Command="{x:Bind Path=RefreshCommand}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource display}}">
                    <SymbolIcon Foreground="White" Symbol="Refresh" />
                </control:RoundButton>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="TopicTpl" x:DataType="viewModel:SearchTopicViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <toolkit:AdaptiveGridView
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    Padding="8"
                    DesiredWidth="600"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="100"
                    ItemsSource="{x:Bind Path=Topics, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <toolkit:AdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchTopicItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <toolkit:ImageEx
                                        Width="80"
                                        Height="100"
                                        IsCacheEnabled="True"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=cover, Converter={StaticResource imageConvert}, ConverterParameter='160w'}"
                                        Stretch="UniformToFill" />

                                </Grid>
                                <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray"
                                        MaxLines="2"
                                        Text="{x:Bind description}"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        时间:<Run Text="{x:Bind Path=pubdate, Converter={StaticResource ts}, ConverterParameter='yyyy-MM-dd'}" /></TextBlock>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </toolkit:AdaptiveGridView.ItemTemplate>
                    <toolkit:AdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </toolkit:AdaptiveGridView.Footer>
                </toolkit:AdaptiveGridView>

                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <control:RoundButton
                    Grid.RowSpan="2"
                    Margin="12"
                    Padding="12"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Command="{x:Bind Path=RefreshCommand}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource display}}">
                    <SymbolIcon Foreground="White" Symbol="Refresh" />
                </control:RoundButton>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="TestTpl">
            <TextBlock>还没写好</TextBlock>
        </DataTemplate>
        <dataTemplateSelectors:SearchDataTemplateSelector
            x:Key="tplSelect"
            AnimeTemplate="{StaticResource AnimeTpl}"
            ArticTemplate="{StaticResource ArticTpl}"
            LiveRoomTemplate="{StaticResource LiveRoomTpl}"
            TestTemplate="{StaticResource TestTpl}"
            TopicTemplate="{StaticResource TopicTpl}"
            UserTemplate="{StaticResource UserTpl}"
            VideoTemplate="{StaticResource VideoTpl}" />
    </Page.Resources>
    <Grid>
        <Pivot
            x:Name="pivot"
            ItemTemplateSelector="{StaticResource ResourceKey=tplSelect}"
            ItemsSource="{x:Bind Path=m_viewModel.SearchItems}"
            SelectedIndex="{x:Bind m_viewModel.PivotIndex, Mode=TwoWay}"
            SelectedItem="{x:Bind Path=m_viewModel.SelectItem, Mode=TwoWay}"
            Margin="{x:Bind m_viewModel.PivotMargin,Mode=OneWay}"
            SelectionChanged="pivot_SelectionChanged"
            UseSystemFocusVisuals="False">
            <Pivot.HeaderTemplate>
                <DataTemplate x:DataType="viewModel:ISearchPivotViewModel">
                    <TextBlock FontSize="15" Text="{x:Bind Title}" />
                </DataTemplate>
            </Pivot.HeaderTemplate>
            <Pivot.ItemContainerStyle>
                <Style TargetType="PivotItem">
                    <Setter Property="Margin" Value="0" />
                </Style>
            </Pivot.ItemContainerStyle>
        </Pivot>
        <Grid
            x:Name="SearchBox"
            Margin="{x:Bind m_viewModel.SearchBoxMargin,Mode=OneWay}"
            HorizontalAlignment="{x:Bind m_viewModel.SearchBoxHorizontalAlignment,Mode=OneWay}"
            VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <AutoSuggestBox
                x:Name="txtKeyword"
                MinWidth="220"
                ItemsSource="{x:Bind Path=m_viewModel.SuggestSearchContents, Mode=OneWay}"
                PlaceholderText="随便搜索点什么东西吧"
                QueryIcon="Find"
                QuerySubmitted="txtKeyword_QuerySubmitted"
                TextChanged="txtKeyword_TextChanged" />
            <ComboBox
                x:Name="cbArea"
                Grid.Column="1"
                Margin="8,0,0,0"
                DisplayMemberPath="name"
                ItemsSource="{x:Bind Path=m_viewModel.Areas}"
                PlaceholderText="选择地区"
                SelectedIndex="{x:Bind m_viewModel.ComboIndex, Mode=TwoWay}"
                SelectedItem="{x:Bind Path=m_viewModel.Area, Mode=TwoWay}"
                SelectedValuePath="area"
                SelectionChanged="cbArea_SelectionChanged">
                <ComboBoxItem>默认地区</ComboBoxItem>
                <ComboBoxItem>大陆地区</ComboBoxItem>
                <ComboBoxItem>香港地区</ComboBoxItem>
                <ComboBoxItem>台湾地区</ComboBoxItem>
            </ComboBox>
        </Grid>
    </Grid>
</local:BasePage>
