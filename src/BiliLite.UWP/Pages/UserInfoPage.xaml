<local:BasePage
    x:Class="BiliLite.Pages.UserInfoPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:control="using:BiliLite.Controls"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="using:FontAwesome5"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:BiliLite.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:modules="using:BiliLite.Modules.User"
    xmlns:modules1="using:BiliLite.Modules.User.UserDetail"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:user="using:BiliLite.Models.Common.User"
    xmlns:userViewModel="using:BiliLite.ViewModels.User"
    Background="Transparent"
    Loaded="UserInfoPage_OnLoaded"
    SizeChanged="UserInfoPage_OnSizeChanged"
    mc:Ignorable="d">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Controls/Dynamic/DynamicTemplate.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <SolidColorBrush x:Key="SystemControlHighlightAltAccentBrush" Color="White" />
            <ItemsPanelTemplate x:Key="GridPanel">
                <toolkit:StaggeredPanel
                    HorizontalAlignment="Stretch"
                    ColumnSpacing="-12"
                    DesiredColumnWidth="500"
                    RowSpacing="8" />
            </ItemsPanelTemplate>
            <ItemsPanelTemplate x:Key="ListPanel">
                <ItemsStackPanel />
            </ItemsPanelTemplate>

            <DataTemplate x:Key="UserTpl" x:DataType="modules1:UserFollowItemModel">
                <Grid Padding="0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid>
                        <Ellipse
                            Width="48"
                            Height="48"
                            Margin="4,0,0,0">
                            <Ellipse.Fill>
                                <ImageBrush ImageSource="{x:Bind Path=face, Converter={StaticResource ImageSourceConvert}, ConverterParameter='56w'}" Stretch="UniformToFill" />
                            </Ellipse.Fill>
                        </Ellipse>
                        <Image
                            Width="20"
                            Height="20"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Source="{x:Bind Path=Verify}" />
                    </Grid>
                    <StackPanel
                        Grid.Column="1"
                        Margin="12,0,0,0"
                        VerticalAlignment="Center">
                        <TextBlock
                            Margin="0,0,0,4"
                            Text="{x:Bind uname}"
                            TextTrimming="CharacterEllipsis" />
                        <TextBlock
                            Margin="0,0,0,4"
                            FontSize="14"
                            Foreground="Gray"
                            MaxLines="1"
                            Text="{x:Bind sign}"
                            TextTrimming="CharacterEllipsis" />
                    </StackPanel>
                </Grid>
            </DataTemplate>

            <MenuFlyout x:Key="AttentionContextManu">
                <MenuFlyoutItem Click="BtnSetLocalAttention_OnClick">设置本地关注</MenuFlyoutItem>
                <MenuFlyoutItem Click="BtnCancelLocalAttention_OnClick">取消本地关注</MenuFlyoutItem>
            </MenuFlyout>
        </ResourceDictionary>
    </Page.Resources>
    <Grid>


        <SplitView
            x:Name="splitView"
            DisplayMode="Overlay"
            IsPaneOpen="False"
            OpenPaneLength="360"
            PaneBackground="Transparent"
            PanePlacement="Right">
            <SplitView.Pane>
                <Border x:Name="RootBorder" Padding="12,0,0,0">
                    <Grid>
                        <toolkit:DropShadowPanel
                            HorizontalContentAlignment="Stretch"
                            VerticalContentAlignment="Stretch"
                            BlurRadius="12"
                            Opacity="0.3"
                            Color="Black">
                            <Rectangle Fill="White" />
                        </toolkit:DropShadowPanel>
                        <Grid Background="{ThemeResource SystemControlChromeMediumLowAcrylicElementMediumBrush}">
                            <Pivot x:Name="pivotRight" SelectionChanged="pivotRight_SelectionChanged">
                                <PivotItem>
                                    <PivotItem.Header>
                                        <TextBlock FontSize="15">
                                            转发(<Run x:Name="repostCount" />
                                            )</TextBlock>
                                    </PivotItem.Header>
                                    <control:DynamicRepostControl x:Name="repost" />
                                </PivotItem>
                                <PivotItem>
                                    <PivotItem.Header>
                                        <TextBlock FontSize="15">
                                            评论(<Run x:Name="commentCount" />
                                            )</TextBlock>
                                    </PivotItem.Header>
                                    <control:CommentControl x:Name="comment" />
                                </PivotItem>
                            </Pivot>
                        </Grid>
                    </Grid>

                </Border>
            </SplitView.Pane>
            <SplitView.Content>
                <Grid>
                    <Grid.Resources>
                        <SolidColorBrush x:Key="PivotHeaderBackground" Color="Transparent" />
                        <Style TargetType="PivotItem">
                            <Setter Property="Margin" Value="0,15,0,0" />
                        </Style>
                    </Grid.Resources>
                    <Pivot
                        x:Name="pivot"
                        Margin="{x:Bind m_viewModel.PivotMargin, Mode=OneWay}"
                        SelectionChanged="pivot_SelectionChanged">
                        <!--<Pivot.RightHeader>
                            <Grid Background="Transparent">
                                <AutoSuggestBox
                                    Width="120"
                                    Margin="8,0"
                                    VerticalAlignment="Center"
                                    PlaceholderText="搜索视频"
                                    QueryIcon="Find" />
                            </Grid>
                        </Pivot.RightHeader>-->
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="15">
                                    视频<Run
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Path=m_viewModel.Stat.Video, Mode=OneWay}" /></TextBlock>
                            </PivotItem.Header>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>

                                <Grid Margin="10,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Orientation="Horizontal">
                                        <ComboBox
                                            DisplayMemberPath="Name"
                                            ItemsSource="{x:Bind Path=m_userSubmitVideoViewModel.Tlist, Mode=OneWay}"
                                            PlaceholderText="{x:Bind Path=m_userSubmitVideoViewModel.SelectTid.Name}"
                                            SelectedItem="{x:Bind Path=m_userSubmitVideoViewModel.SelectTid, Mode=TwoWay}"
                                            SelectionChanged="ComboBox_SelectionChanged" />
                                        <ComboBox
                                            x:Name="comVideoOrder"
                                            Margin="8,0"
                                            PlaceholderText="最新发布"
                                            SelectedIndex="{x:Bind Path=m_userSubmitVideoViewModel.SelectOrder, Mode=TwoWay}"
                                            SelectionChanged="comVideoOrder_SelectionChanged">
                                            <ComboBoxItem>最新发布</ComboBoxItem>
                                            <ComboBoxItem>最多播放</ComboBoxItem>
                                        </ComboBox>
                                    </StackPanel>
                                    <AutoSuggestBox
                                        x:Name="searchVideo"
                                        Grid.Column="1"
                                        MinWidth="200"
                                        HorizontalAlignment="Right"
                                        PlaceholderText="搜索视频"
                                        QueryIcon="Find"
                                        QuerySubmitted="searchVideo_QuerySubmitted"
                                        Text="{x:Bind Path=m_userSubmitVideoViewModel.Keyword, Mode=TwoWay}" />
                                    <Button
                                        x:Name="BtnPlayAll"
                                        Grid.Column="2"
                                        Margin="8,0,0,0"
                                        Tapped="BtnPlayAll_OnTapped">
                                        全部播放
                                    </Button>
                                </Grid>
                                <control:MyAdaptiveGridView
                                    Grid.Row="1"
                                    Padding="10,5"
                                    CanLoadMore="{x:Bind Path=m_userSubmitVideoViewModel.SubmitVideoCanLoadMore, Mode=OneWay}"
                                    DesiredWidth="550"
                                    IsItemClickEnabled="True"
                                    ItemClick="SubmitVideo_ItemClick"
                                    
                                    ItemsSource="{x:Bind Path=m_userSubmitVideoViewModel.SubmitVideoItems, Mode=OneWay}"
                                    LoadMoreBottomOffset="0"
                                    LoadMoreCommand="{x:Bind Path=m_userSubmitVideoViewModel.LoadMoreSubmitVideoCommand}"
                                    OneRowModeEnabled="False"
                                    SelectionMode="None"
                                    StretchContentForSingleRow="False">
                                    <toolkit:AdaptiveGridView.ItemTemplate>
                                        <DataTemplate x:DataType="user:SubmitVideoItemModel">
                                            <Grid Background="#00FFFFFF">
                                                <Grid.ContextFlyout>
                                                    <MenuFlyout>
                                                        <MenuFlyoutItem
                                                            x:Name="AddToWatchLater"
                                                            Click="AddToWatchLater_Click"
                                                            Icon="Add"
                                                            Text="添加到稍后再看" />
                                                    </MenuFlyout>
                                                </Grid.ContextFlyout>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <Grid>
                                                    <toolkit:ImageEx
                                                        HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch"
                                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                                        Source="{x:Bind Path=Pic, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='360w_200h_1c'}"
                                                        Stretch="UniformToFill" />

                                                    <Grid Padding="8" VerticalAlignment="Bottom">
                                                        <Grid.Background>
                                                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                                                <GradientStop Offset="0.993" Color="#CC000005" />
                                                                <GradientStop Offset="0" Color="#00000000" />
                                                            </LinearGradientBrush>
                                                        </Grid.Background>
                                                        <TextBlock
                                                            HorizontalAlignment="Right"
                                                            FontSize="12"
                                                            Foreground="White"
                                                            Text="{x:Bind Length}" />
                                                    </Grid>
                                                </Grid>

                                                <Grid Grid.Column="1" Margin="10,5">
                                                    <TextBlock
                                                        MaxLines="2"
                                                        Text="{x:Bind Title}"
                                                        TextAlignment="Justify"
                                                        TextTrimming="CharacterEllipsis"
                                                        TextWrapping="Wrap" />
                                                    <StackPanel VerticalAlignment="Bottom">
                                                        <TextBlock Margin="0,4,0,0" Foreground="Gray">
                                                            观看:<Run Text="{x:Bind Path=Play, Converter={StaticResource NumberToStringConvert}}" />
                                                            弹幕:<Run Text="{x:Bind Path=VideoReview, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                        <TextBlock Margin="0,4,0,0" Foreground="Gray">
                                                            发表于<Run Text="{x:Bind Path=Created, Converter={StaticResource DatetimeConvert}, ConverterParameter='ts'}" /></TextBlock>
                                                    </StackPanel>
                                                    <!--<TextBlock
                                                        Grid.Row="2"
                                                        Margin="4,0,4,4"
                                                        FontSize="12"
                                                        Foreground="Gray"
                                                        MaxLines="2"
                                                        Text="{Binding desc}"
                                                        TextTrimming="CharacterEllipsis"
                                                        TextWrapping="Wrap" TextAlignment="Justify" />-->
                                                </Grid>
                                            </Grid>
                                        </DataTemplate>
                                    </toolkit:AdaptiveGridView.ItemTemplate>
                                    <toolkit:AdaptiveGridView.Footer>
                                        <StackPanel>
                                            <HyperlinkButton
                                                x:Name="btnLoadMore"
                                                HorizontalAlignment="Center"
                                                Command="{x:Bind Path=m_userSubmitVideoViewModel.LoadMoreSubmitVideoCommand}"
                                                Foreground="Gray"
                                                Visibility="{x:Bind Path=m_userSubmitVideoViewModel.SubmitVideoCanLoadMore, Mode=OneWay}">
                                                <TextBlock>加载更多</TextBlock>
                                            </HyperlinkButton>
                                            <muxc:ProgressRing
                                                HorizontalAlignment="Center"
                                                IsActive="True"
                                                Visibility="{x:Bind Path=m_userSubmitVideoViewModel.LoadingSubmitVideo, Mode=OneWay}" />
                                        </StackPanel>
                                    </toolkit:AdaptiveGridView.Footer>
                                </control:MyAdaptiveGridView>
                                <TextBlock
                                    Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Gray"
                                    Text="这里什么都没有呢..."
                                    Visibility="{x:Bind Path=m_userSubmitVideoViewModel.Nothing, Mode=OneWay}" />
                                <Button
                                    x:Name="btnRefresh"
                                    Grid.Row="1"
                                    Command="{x:Bind Path=m_userSubmitVideoViewModel.RefreshSubmitVideoCommand}"
                                    Style="{StaticResource RoundAccentButtonStyle}">
                                    <SymbolIcon Symbol="Refresh" />
                                </Button>
                            </Grid>
                        </PivotItem>
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="15">动态</TextBlock>
                            </PivotItem.Header>
                            <Grid Background="Transparent">
                                <Frame x:Name="DynamicSpaceFrame" />
                            </Grid>
                        </PivotItem>
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="15">
                                    专栏<Run
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Path=m_viewModel.Stat.Article, Mode=OneWay}" /></TextBlock>
                            </PivotItem.Header>
                            <Grid>
                                <control:MyAdaptiveGridView
                                    Padding="10,5"
                                    CanLoadMore="{x:Bind Path=userSubmitArticleVM.SubmitArticleCanLoadMore, Mode=OneWay}"
                                    DesiredWidth="550"
                                    IsItemClickEnabled="True"
                                    ItemClick="SubmitArticle_ItemClick"
                                    
                                    ItemsSource="{x:Bind Path=userSubmitArticleVM.SubmitArticleItems, Mode=OneWay}"
                                    LoadMoreBottomOffset="0"
                                    LoadMoreCommand="{x:Bind Path=userSubmitArticleVM.LoadMoreSubmitArticleCommand}"
                                    OneRowModeEnabled="False"
                                    SelectionMode="None"
                                    StretchContentForSingleRow="False">
                                    <toolkit:AdaptiveGridView.Header>
                                        <Grid Margin="4,8">
                                            <StackPanel Orientation="Horizontal">
                                                <ComboBox
                                                    x:Name="comArticleOrder"
                                                    PlaceholderText="最新发布"
                                                    SelectedIndex="{x:Bind Path=userSubmitArticleVM.SelectOrder, Mode=TwoWay}"
                                                    SelectionChanged="comArticleOrder_SelectionChanged">
                                                    <ComboBoxItem>最新发布</ComboBoxItem>
                                                    <ComboBoxItem>最多阅读</ComboBoxItem>
                                                    <ComboBoxItem>最多收藏</ComboBoxItem>
                                                </ComboBox>
                                            </StackPanel>

                                        </Grid>
                                    </toolkit:AdaptiveGridView.Header>
                                    <toolkit:AdaptiveGridView.ItemTemplate>
                                        <DataTemplate x:DataType="modules1:SubmitArticleItemModel">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <Grid>
                                                    <toolkit:ImageEx
                                                        HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch"
                                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                                        Source="{x:Bind Path=cover, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='120h'}"
                                                        Stretch="UniformToFill" />
                                                    <Grid Padding="8" VerticalAlignment="Bottom">
                                                        <Grid.Background>
                                                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                                                <GradientStop Offset="0.993" Color="#CC000005" />
                                                                <GradientStop Offset="0" Color="#00000000" />
                                                            </LinearGradientBrush>
                                                        </Grid.Background>
                                                        <TextBlock
                                                            HorizontalAlignment="Right"
                                                            FontSize="12"
                                                            Foreground="White">
                                                            <Run Text="{x:Bind Path=category.name}" />
                                                        </TextBlock>
                                                    </Grid>
                                                </Grid>
                                                <StackPanel Grid.Column="1" Margin="4,0,0,0">
                                                    <TextBlock
                                                        MaxLines="1"
                                                        Text="{x:Bind title}"
                                                        TextAlignment="Justify"
                                                        TextTrimming="CharacterEllipsis"
                                                        TextWrapping="Wrap" />
                                                    <TextBlock
                                                        Margin="0,4,0,0"
                                                        Foreground="Gray"
                                                        MaxLines="1"
                                                        Text="{x:Bind Path=summary}"
                                                        TextTrimming="CharacterEllipsis" />
                                                    <TextBlock Margin="0,4,0,0" Foreground="Gray">
                                                        观看:<Run Text="{x:Bind Path=stats.view, Converter={StaticResource NumberToStringConvert}}" />
                                                        点赞:<Run Text="{x:Bind Path=stats.like, Converter={StaticResource NumberToStringConvert}}" />
                                                        评论:<Run Text="{x:Bind Path=stats.reply, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                                    <TextBlock Margin="0,4,0,0" Foreground="Gray">
                                                        发表于<Run Text="{x:Bind Path=publish_time, Converter={StaticResource DatetimeConvert}, ConverterParameter='ts'}" /></TextBlock>
                                                </StackPanel>
                                                <!--<TextBlock
                                                    Grid.Row="2"
                                                    Margin="4,0,4,4"
                                                    FontSize="12"
                                                    Foreground="Gray"
                                                    MaxLines="2"
                                                    Text="{Binding desc}"
                                                    TextTrimming="CharacterEllipsis"
                                                    TextWrapping="Wrap" TextAlignment="Justify" />-->
                                            </Grid>
                                        </DataTemplate>
                                    </toolkit:AdaptiveGridView.ItemTemplate>
                                    <toolkit:AdaptiveGridView.Footer>
                                        <StackPanel>
                                            <HyperlinkButton
                                                HorizontalAlignment="Center"
                                                Command="{x:Bind Path=userSubmitArticleVM.LoadMoreSubmitArticleCommand}"
                                                Foreground="Gray"
                                                Visibility="{x:Bind Path=userSubmitArticleVM.SubmitArticleCanLoadMore, Mode=OneWay}">
                                                <TextBlock>加载更多</TextBlock>
                                            </HyperlinkButton>
                                            <muxc:ProgressRing
                                                HorizontalAlignment="Center"
                                                IsActive="True"
                                                Visibility="{x:Bind Path=userSubmitArticleVM.LoadingSubmitArticle, Mode=OneWay}" />
                                        </StackPanel>
                                    </toolkit:AdaptiveGridView.Footer>
                                </control:MyAdaptiveGridView>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Gray"
                                    Text="这里什么都没有呢..."
                                    Visibility="{x:Bind Path=userSubmitArticleVM.Nothing, Mode=OneWay}" />
                                <Button Command="{x:Bind Path=userSubmitArticleVM.RefreshSubmitArticleCommand}" Style="{StaticResource RoundAccentButtonStyle}">
                                    <SymbolIcon Symbol="Refresh" />
                                </Button>
                            </Grid>
                        </PivotItem>
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="15">
                                    合集<Run
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Path=m_viewModel.Stat.Collection, Mode=OneWay}" /></TextBlock>
                            </PivotItem.Header>
                            <Grid>
                                <control:MyAdaptiveGridView
                                    Padding="10,5"
                                    CanLoadMore="{x:Bind Path=m_userSubmitCollectionViewModel.SubmitCollectionCanLoadMore, Mode=OneWay}"
                                    DesiredWidth="550"
                                    IsItemClickEnabled="True"
                                    ItemClick="SubmitCollection_ItemClick"
                                    
                                    ItemsSource="{x:Bind Path=m_userSubmitCollectionViewModel.SubmitCollectionItems, Mode=OneWay}"
                                    LoadMoreBottomOffset="0"
                                    LoadMoreCommand="{x:Bind Path=m_userSubmitCollectionViewModel.LoadMoreSubmitCollectionCommand}"
                                    OneRowModeEnabled="False"
                                    SelectionMode="None"
                                    StretchContentForSingleRow="False">
                                    <toolkit:AdaptiveGridView.ItemTemplate>
                                        <DataTemplate x:DataType="user:SubmitCollectionItemModel">
                                            <Grid Background="#00FFFFFF">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <Grid>
                                                    <toolkit:ImageEx
                                                        HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch"
                                                        PlaceholderSource="/Assets/Thumbnails/Placeholde.png"
                                                        Source="{x:Bind Path=Cover, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='360w_200h_1c'}"
                                                        Stretch="UniformToFill" />
                                                    <Grid Padding="8" VerticalAlignment="Bottom">
                                                        <Grid.Background>
                                                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                                                <GradientStop Offset="0.993" Color="#CC000005" />
                                                                <GradientStop Offset="0" Color="#00000000" />
                                                            </LinearGradientBrush>
                                                        </Grid.Background>
                                                        <TextBlock
                                                            HorizontalAlignment="Right"
                                                            FontSize="12"
                                                            Foreground="White">
                                                            <Run>🎞️</Run>
                                                            <Run Text="{x:Bind Count}" />
                                                        </TextBlock>
                                                    </Grid>
                                                </Grid>
                                                <Grid Grid.Column="1">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>
                                                    <StackPanel
                                                        Grid.Row="0"
                                                        Margin="8,0,0,0"
                                                        VerticalAlignment="Top">
                                                        <TextBlock
                                                            Margin="0,0,0,0"
                                                            MaxLines="2"
                                                            Text="{x:Bind Title}"
                                                            TextAlignment="Justify"
                                                            TextTrimming="CharacterEllipsis"
                                                            TextWrapping="Wrap" />
                                                    </StackPanel>
                                                    <StackPanel
                                                        Grid.Row="1"
                                                        Margin="8,0,0,0"
                                                        VerticalAlignment="Bottom">
                                                        <TextBlock
                                                            Margin="0,3,0,0"
                                                            VerticalAlignment="Bottom"
                                                            FontSize="13"
                                                            Foreground="Gray">
                                                            <!--<Run>类型: </Run>-->
                                                            <Run Text="{x:Bind Path=Type}" />
                                                        </TextBlock>
                                                    </StackPanel>
                                                    <StackPanel
                                                        Grid.Row="2"
                                                        Margin="8,0,0,0"
                                                        VerticalAlignment="Bottom">
                                                        <TextBlock
                                                            Margin="0,3,0,0"
                                                            FontSize="14"
                                                            Foreground="Gray">
                                                            <Run>最后更新:</Run>
                                                            <Run Text="{x:Bind Path=LatestUpdateTime, Converter={StaticResource DatetimeConvert}, ConverterParameter='ts'}" />
                                                        </TextBlock>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </DataTemplate>
                                    </toolkit:AdaptiveGridView.ItemTemplate>
                                    <toolkit:AdaptiveGridView.Footer>
                                        <StackPanel>
                                            <HyperlinkButton
                                                HorizontalAlignment="Center"
                                                Command="{x:Bind Path=m_userSubmitCollectionViewModel.LoadMoreSubmitCollectionCommand}"
                                                Foreground="Gray"
                                                Visibility="{x:Bind Path=m_userSubmitCollectionViewModel.SubmitCollectionCanLoadMore, Mode=OneWay}">
                                                <TextBlock>加载更多</TextBlock>
                                            </HyperlinkButton>
                                            <muxc:ProgressRing
                                                HorizontalAlignment="Center"
                                                IsActive="True"
                                                Visibility="{x:Bind Path=m_userSubmitCollectionViewModel.LoadingSubmitCollection, Mode=OneWay}" />
                                        </StackPanel>
                                    </toolkit:AdaptiveGridView.Footer>
                                </control:MyAdaptiveGridView>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Gray"
                                    Text="这里什么都没有呢..."
                                    Visibility="{x:Bind Path=m_userSubmitCollectionViewModel.Nothing, Mode=OneWay}" />
                                <Button Command="{x:Bind Path=m_userSubmitCollectionViewModel.RefreshSubmitCollectionCommand}" Style="{StaticResource RoundAccentButtonStyle}">
                                    <SymbolIcon Symbol="Refresh" />
                                </Button>
                            </Grid>

                        </PivotItem>
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="15">
                                    收藏<Run
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Path=m_viewModel.Stat.Favourite, Mode=OneWay}" /></TextBlock>
                            </PivotItem.Header>
                            <Grid>
                                <toolkit:AdaptiveGridView
                                    Padding="10,5"
                                    DesiredWidth="300"
                                    IsItemClickEnabled="True"
                                    ItemClick="FavList_ItemClick"
                                    ItemsSource="{x:Bind Path=userFavlistVM.Items, Mode=OneWay}"
                                    OneRowModeEnabled="False"
                                    SelectionMode="None"
                                    StretchContentForSingleRow="False">
                                    <toolkit:AdaptiveGridView.ItemTemplate>
                                        <DataTemplate x:DataType="modules1:FavFolderItemModel">
                                            <Grid Padding="8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <fa:FontAwesome
                                                    FontSize="36"
                                                    Foreground="Orange"
                                                    Icon="Solid_Folder" />
                                                <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                                    <TextBlock Text="{x:Bind Path=title}" />
                                                    <TextBlock FontSize="12" Foreground="Gray">
                                                        <Run Text="{x:Bind Path=media_count}" />
                                                        个内容</TextBlock>
                                                </StackPanel>
                                            </Grid>
                                        </DataTemplate>
                                    </toolkit:AdaptiveGridView.ItemTemplate>
                                </toolkit:AdaptiveGridView>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Gray"
                                    Text="这里什么都没有呢..."
                                    Visibility="{x:Bind Path=userFavlistVM.Nothing, Mode=OneWay}" />
                                <Button Command="{x:Bind Path=userFavlistVM.RefreshCommand}" Style="{StaticResource RoundAccentButtonStyle}">
                                    <SymbolIcon Symbol="Refresh" />
                                </Button>
                            </Grid>

                        </PivotItem>
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="15">
                                    关注<Run
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Path=m_viewModel.Stat.Attention, Mode=OneWay}" /></TextBlock>
                            </PivotItem.Header>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid x:Name="followHeader" Margin="10,5">
                                    <StackPanel Orientation="Horizontal">
                                        <ComboBox
                                            DisplayMemberPath="Name"
                                            ItemsSource="{x:Bind Path=followVM.Tlist, Mode=OneWay}"
                                            PlaceholderText="{x:Bind Path=followVM.SelectTid.Name}"
                                            SelectedItem="{x:Bind Path=followVM.SelectTid, Mode=TwoWay}"
                                            SelectionChanged="ComboBox_SelectionChanged_1" />
                                        <ComboBox
                                            x:Name="comFollowOrder"
                                            Margin="8,0"
                                            PlaceholderText="关注时间"
                                            SelectedIndex="{x:Bind Path=followVM.SelectOrder, Mode=TwoWay}"
                                            SelectionChanged="comFollowOrder_SelectionChanged">
                                            <ComboBoxItem>关注时间</ComboBoxItem>
                                            <ComboBoxItem>最常访问</ComboBoxItem>
                                        </ComboBox>
                                    </StackPanel>
                                    <AutoSuggestBox
                                        x:Name="searchFollow"
                                        Width="160"
                                        HorizontalAlignment="Right"
                                        PlaceholderText="搜索关注的人"
                                        QueryIcon="Find"
                                        QuerySubmitted="searchFollow_QuerySubmitted"
                                        Text="{x:Bind Path=followVM.Keyword, Mode=TwoWay}" />
                                </Grid>
                                <control:MyAdaptiveGridView
                                    Grid.Row="1"
                                    Padding="10,5"
                                    CanLoadMore="{x:Bind Path=followVM.CanLoadMore, Mode=OneWay}"
                                    DesiredWidth="550"
                                    IsItemClickEnabled="True"
                                    ItemClick="UserList_ItemClick"
                                    ItemTemplate="{StaticResource UserTpl}"
                                    ItemsSource="{x:Bind Path=followVM.Items, Mode=OneWay}"
                                    LoadMoreBottomOffset="0"
                                    LoadMoreCommand="{x:Bind Path=followVM.LoadMoreCommand}"
                                    OneRowModeEnabled="False"
                                    SelectionMode="None"
                                    StretchContentForSingleRow="False">

                                    <toolkit:AdaptiveGridView.Footer>
                                        <StackPanel>
                                            <HyperlinkButton
                                                HorizontalAlignment="Center"
                                                Command="{x:Bind Path=followVM.LoadMoreCommand}"
                                                Foreground="Gray"
                                                Visibility="{x:Bind Path=followVM.CanLoadMore, Mode=OneWay}">
                                                <TextBlock>加载更多</TextBlock>
                                            </HyperlinkButton>
                                            <muxc:ProgressRing
                                                HorizontalAlignment="Center"
                                                IsActive="True"
                                                Visibility="{x:Bind Path=followVM.Loading, Mode=OneWay}" />
                                        </StackPanel>
                                    </toolkit:AdaptiveGridView.Footer>
                                </control:MyAdaptiveGridView>
                                <TextBlock
                                    Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Gray"
                                    Text="这里什么都没有呢..."
                                    Visibility="{x:Bind Path=followVM.Nothing, Mode=OneWay}" />
                                <Button
                                    Grid.Row="1"
                                    Command="{x:Bind Path=followVM.RefreshCommand}"
                                    Style="{StaticResource RoundAccentButtonStyle}">
                                    <SymbolIcon Symbol="Refresh" />
                                </Button>
                            </Grid>
                        </PivotItem>
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="15">
                                    粉丝<Run
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind Path=m_viewModel.Stat.Fans, Mode=OneWay}" /></TextBlock>
                            </PivotItem.Header>
                            <Grid>
                                <control:MyAdaptiveGridView
                                    Padding="10,5"
                                    CanLoadMore="{x:Bind Path=fansVM.CanLoadMore, Mode=OneWay}"
                                    DesiredWidth="550"
                                    IsItemClickEnabled="True"
                                    ItemClick="UserList_ItemClick"
                                    ItemTemplate="{StaticResource UserTpl}"
                                    ItemsSource="{x:Bind Path=fansVM.Items, Mode=OneWay}"
                                    LoadMoreBottomOffset="0"
                                    LoadMoreCommand="{x:Bind Path=fansVM.LoadMoreCommand}"
                                    OneRowModeEnabled="False"
                                    SelectionMode="None"
                                    StretchContentForSingleRow="False">
                                    <toolkit:AdaptiveGridView.Footer>
                                        <StackPanel>
                                            <HyperlinkButton
                                                HorizontalAlignment="Center"
                                                Command="{x:Bind Path=fansVM.LoadMoreCommand}"
                                                Foreground="Gray"
                                                Visibility="{x:Bind Path=fansVM.CanLoadMore, Mode=OneWay}">
                                                <TextBlock>加载更多</TextBlock>
                                            </HyperlinkButton>
                                            <muxc:ProgressRing
                                                HorizontalAlignment="Center"
                                                IsActive="True"
                                                Visibility="{x:Bind Path=fansVM.Loading, Mode=OneWay}" />
                                        </StackPanel>
                                    </toolkit:AdaptiveGridView.Footer>
                                </control:MyAdaptiveGridView>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Gray"
                                    Text="这里什么都没有呢..."
                                    Visibility="{x:Bind Path=fansVM.Nothing, Mode=OneWay}" />
                                <Button Command="{x:Bind Path=fansVM.RefreshCommand}" Style="{StaticResource RoundAccentButtonStyle}">
                                    <SymbolIcon Symbol="Refresh" />
                                </Button>
                            </Grid>
                        </PivotItem>
                    </Pivot>
                    <Grid HorizontalAlignment="Right" VerticalAlignment="Top">
                        <StackPanel
                            x:Name="UserBar"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal"
                            SizeChanged="UserBar_OnSizeChanged">
                            <Button Margin="10">
                                <Button.Content>
                                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                        <Ellipse Width="36" Height="36">
                                            <Ellipse.Fill>
                                                <ImageBrush ImageSource="{x:Bind Path=m_viewModel.UserSpaceInfo.Face, Mode=OneWay, Converter={StaticResource ImageSourceConvert}, ConverterParameter='56h'}" />
                                            </Ellipse.Fill>
                                        </Ellipse>
                                        <TextBlock
                                            Margin="8,0"
                                            VerticalAlignment="Center"
                                            Text="{x:Bind Path=m_viewModel.UserSpaceInfo.Name, Mode=OneWay}" />
                                    </StackPanel>
                                </Button.Content>
                                <Button.Flyout>
                                    <Flyout>
                                        <Grid Width="340" Margin="-15">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid Visibility="{x:Bind m_viewModel.NeedCaptcha, Mode=OneWay}" />
                                            <Grid Visibility="{x:Bind m_viewModel.NeedCaptcha, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                                <Image
                                                    Width="340"
                                                    Height="100"
                                                    VerticalAlignment="Top"
                                                    Source="{x:Bind Path=m_viewModel.UserSpaceInfo.TopImage, Mode=OneWay, Converter={StaticResource ImageSourceConvert}, ConverterParameter='400w_120h_1c'}"
                                                    Stretch="UniformToFill" />
                                                <Grid Margin="0,80,0,0" VerticalAlignment="Top">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid Margin="12,0" VerticalAlignment="Top">
                                                        <Ellipse
                                                            Width="56"
                                                            Height="56"
                                                            Stroke="White"
                                                            StrokeThickness="2">
                                                            <Ellipse.Fill>
                                                                <ImageBrush ImageSource="{x:Bind Path=m_viewModel.UserSpaceInfo.Face, Mode=OneWay, Converter={StaticResource ImageSourceConvert}, ConverterParameter='56h'}" />
                                                            </Ellipse.Fill>
                                                        </Ellipse>
                                                        <Image
                                                            Width="84"
                                                            Height="84"
                                                            Source="{x:Bind Path=m_viewModel.UserSpaceInfo.PendantStr, Mode=OneWay}"
                                                            Visibility="Collapsed" />
                                                        <Image
                                                            Width="16"
                                                            Height="16"
                                                            Margin="12,12,0,0"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom"
                                                            Source="{x:Bind Path=m_viewModel.UserSpaceInfo.Verify, Mode=OneWay}" />
                                                    </Grid>

                                                    <StackPanel Grid.Column="1" Margin="0,24,12,0">

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock
                                                                VerticalAlignment="Center"
                                                                FontWeight="Bold"
                                                                Foreground="{ThemeResource SystemAccentColor}"
                                                                Text="{x:Bind Path=m_viewModel.UserSpaceInfo.Name, Mode=OneWay}"
                                                                Visibility="{x:Bind Path=m_viewModel.UserSpaceInfo.Vip.Status, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=1}" />
                                                            <TextBlock
                                                                VerticalAlignment="Center"
                                                                FontWeight="Bold"
                                                                Text="{x:Bind Path=m_viewModel.UserSpaceInfo.Name, Mode=OneWay}"
                                                                Visibility="{x:Bind Path=m_viewModel.UserSpaceInfo.Vip.Status, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=0}" />
                                                            <Border
                                                                Margin="8,0"
                                                                Background="{x:Bind Path=m_viewModel.UserSpaceInfo.LevelColor, Mode=OneWay}"
                                                                CornerRadius="{StaticResource ControlCornerRadius}"
                                                                Opacity=".8">
                                                                <TextBlock
                                                                    Margin="4,2"
                                                                    FontSize="12"
                                                                    Foreground="White">
                                                                    LV<Run Text="{x:Bind Path=m_viewModel.UserSpaceInfo.Level, Mode=OneWay}" /></TextBlock>
                                                            </Border>
                                                            <Border
                                                                Background="{ThemeResource SystemAccentColor}"
                                                                CornerRadius="{StaticResource ControlCornerRadius}"
                                                                Opacity=".8"
                                                                Visibility="{x:Bind Path=m_viewModel.UserSpaceInfo.Vip.Status, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=1}">
                                                                <TextBlock
                                                                    Margin="4,2"
                                                                    FontSize="12"
                                                                    Foreground="White"
                                                                    Text="{x:Bind Path=m_viewModel.UserSpaceInfo.Vip.Label.Text, Mode=OneWay}" />
                                                            </Border>
                                                        </StackPanel>
                                                        <TextBlock
                                                            Margin="0,4,0,0"
                                                            FontSize="14"
                                                            Opacity="0.8"
                                                            Text="{x:Bind Path=m_viewModel.UserSpaceInfo.Official.Title, Mode=OneWay}"
                                                            TextAlignment="Justify"
                                                            TextWrapping="Wrap"
                                                            Visibility="{x:Bind Path=m_viewModel.UserSpaceInfo.Official.ShowOfficial, Mode=OneWay}" />
                                                        <TextBlock Margin="0,4" Foreground="{ThemeResource TextColor}">
                                                            关注<Run Text="{x:Bind Path=m_viewModel.Stat.Following, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" />
                                                            粉丝<Run Text="{x:Bind Path=m_viewModel.Stat.Follower, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>

                                                        <TextBlock
                                                            FontSize="14"
                                                            Foreground="Gray"
                                                            IsTextSelectionEnabled="True"
                                                            Text="{x:Bind Path=m_viewModel.UserSpaceInfo.Sign, Mode=OneWay}"
                                                            TextAlignment="Justify"
                                                            TextWrapping="Wrap" />
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Flyout>
                                </Button.Flyout>
                            </Button>

                            <StackPanel
                                x:Name="UserAppBar"
                                HorizontalAlignment="Right"
                                Orientation="Horizontal">
                                <AppBarButton
                                    x:Name="BtnFollowingTag"
                                    Click="BtnFollowingTag_OnClick"
                                    Label="关注分组"
                                    Visibility="{x:Bind Path=m_viewModel.IsFollowed, Mode=OneWay}">
                                    <FontIcon FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" Glyph="&#xE779;" />
                                </AppBarButton>

                                <AppBarButton
                                    Command="{x:Bind Path=m_viewModel.AttentionCommand, Mode=OneWay}"
                                    ContextFlyout="{StaticResource AttentionContextManu}"
                                    Label="关注"
                                    Visibility="{x:Bind Path=m_viewModel.IsFollowed, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                    <AppBarButton.Icon>
                                        <FontIcon FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" Glyph="&#xE006;" />
                                    </AppBarButton.Icon>
                                    <!--<interactivity:Interaction.Behaviors>
                                        <core:EventTriggerBehavior EventName="RightTapped">
                                            <core:InvokeCommandAction Command="{x:Bind userDetailVM.AttentionWithGroupCommand, Mode=OneWay}" />
                                        </core:EventTriggerBehavior>
                                    </interactivity:Interaction.Behaviors>-->
                                </AppBarButton>

                                <AppBarButton
                                    Command="{x:Bind Path=m_viewModel.AttentionCommand, Mode=OneWay}"
                                    ContextFlyout="{StaticResource AttentionContextManu}"
                                    Label="取消关注"
                                    Visibility="{x:Bind Path=m_viewModel.IsFollowed, Mode=OneWay}">
                                    <AppBarButton.Icon>
                                        <FontIcon FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" Glyph="&#xE00B;" />
                                    </AppBarButton.Icon>
                                </AppBarButton>

                                <AppBarButton
                                    x:Name="btnChat"
                                    Click="btnChat_Click"
                                    Icon="Message"
                                    Label="私信" />

                                <AppBarButton
                                    x:Name="btnLiveRoom"
                                    Click="btnLiveRoom_Click"
                                    Label="直播间"
                                    Visibility="{x:Bind Path=m_viewModel.HaveLiveRoom, Mode=OneWay}">
                                    <AppBarButton.Icon>
                                        <FontIcon FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets" Glyph="&#xE960;" />
                                    </AppBarButton.Icon>
                                </AppBarButton>
                            </StackPanel>
                            <control:UserFollowingTagsFlyout x:Name="UserFollowingTagsFlyout" />
                        </StackPanel>
                    </Grid>
                </Grid>
            </SplitView.Content>
        </SplitView>
    </Grid>
</local:BasePage>
