<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="./favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
    <script type="module" crossorigin>(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))I(w);new MutationObserver(w=>{for(const C of w)if(C.type==="childList")for(const O of C.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&I(O)}).observe(document,{childList:!0,subtree:!0});function T(w){const C={};return w.integrity&&(C.integrity=w.integrity),w.referrerPolicy&&(C.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?C.credentials="include":w.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function I(w){if(w.ep)return;w.ep=!0;const C=T(w);fetch(w.href,C)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pm(c){const p=Object.create(null);for(const T of c.split(","))p[T]=1;return T=>T in p}const Ht={},Eu=[],hr=()=>{},WR=()=>!1,fd=c=>c.charCodeAt(0)===111&&c.charCodeAt(1)===110&&(c.charCodeAt(2)>122||c.charCodeAt(2)<97),Lm=c=>c.startsWith("onUpdate:"),ii=Object.assign,_m=(c,p)=>{const T=c.indexOf(p);T>-1&&c.splice(T,1)},XR=Object.prototype.hasOwnProperty,Pt=(c,p)=>XR.call(c,p),rt=Array.isArray,ol=c=>dd(c)==="[object Map]",zR=c=>dd(c)==="[object Set]",at=c=>typeof c=="function",xn=c=>typeof c=="string",Cu=c=>typeof c=="symbol",an=c=>c!==null&&typeof c=="object",mE=c=>(an(c)||at(c))&&at(c.then)&&at(c.catch),qR=Object.prototype.toString,dd=c=>qR.call(c),YR=c=>dd(c).slice(8,-1),$R=c=>dd(c)==="[object Object]",Nm=c=>xn(c)&&c!=="NaN"&&c[0]!=="-"&&""+parseInt(c,10)===c,sl=Pm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hd=c=>{const p=Object.create(null);return T=>p[T]||(p[T]=c(T))},QR=/-(\w)/g,Io=hd(c=>c.replace(QR,(p,T)=>T?T.toUpperCase():"")),JR=/\B([A-Z])/g,ps=hd(c=>c.replace(JR,"-$1").toLowerCase()),vE=hd(c=>c.charAt(0).toUpperCase()+c.slice(1)),am=hd(c=>c?`on${vE(c)}`:""),Ao=(c,p)=>!Object.is(c,p),lm=(c,...p)=>{for(let T=0;T<c.length;T++)c[T](...p)},yE=(c,p,T,I=!1)=>{Object.defineProperty(c,p,{configurable:!0,enumerable:!1,writable:I,value:T})},ZR=c=>{const p=parseFloat(c);return isNaN(p)?c:p};let Bx;const pd=()=>Bx||(Bx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jm(c){if(rt(c)){const p={};for(let T=0;T<c.length;T++){const I=c[T],w=xn(I)?i3(I):jm(I);if(w)for(const C in w)p[C]=w[C]}return p}else if(xn(c)||an(c))return c}const e3=/;(?![^(]*\))/g,t3=/:([^]+)/,n3=/\/\*[^]*?\*\//g;function i3(c){const p={};return c.replace(n3,"").split(e3).forEach(T=>{if(T){const I=T.split(t3);I.length>1&&(p[I[0].trim()]=I[1].trim())}}),p}function Om(c){let p="";if(xn(c))p=c;else if(rt(c))for(let T=0;T<c.length;T++){const I=Om(c[T]);I&&(p+=I+" ")}else if(an(c))for(const T in c)c[T]&&(p+=T+" ");return p.trim()}const r3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o3=Pm(r3);function TE(c){return!!c||c===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pi;class s3{constructor(p=!1){this.detached=p,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pi,!p&&Pi&&(this.index=(Pi.scopes||(Pi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let p,T;if(this.scopes)for(p=0,T=this.scopes.length;p<T;p++)this.scopes[p].pause();for(p=0,T=this.effects.length;p<T;p++)this.effects[p].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let p,T;if(this.scopes)for(p=0,T=this.scopes.length;p<T;p++)this.scopes[p].resume();for(p=0,T=this.effects.length;p<T;p++)this.effects[p].resume()}}run(p){if(this._active){const T=Pi;try{return Pi=this,p()}finally{Pi=T}}}on(){Pi=this}off(){Pi=this.parent}stop(p){if(this._active){this._active=!1;let T,I;for(T=0,I=this.effects.length;T<I;T++)this.effects[T].stop();for(this.effects.length=0,T=0,I=this.cleanups.length;T<I;T++)this.cleanups[T]();if(this.cleanups.length=0,this.scopes){for(T=0,I=this.scopes.length;T<I;T++)this.scopes[T].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!p){const w=this.parent.scopes.pop();w&&w!==this&&(this.parent.scopes[this.index]=w,w.index=this.index)}this.parent=void 0}}}function u3(){return Pi}let Vt;const cm=new WeakSet;class wE{constructor(p){this.fn=p,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pi&&Pi.active&&Pi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cm.has(this)&&(cm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xE(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vx(this),EE(this);const p=Vt,T=Ji;Vt=this,Ji=!0;try{return this.fn()}finally{AE(this),Vt=p,Ji=T,this.flags&=-3}}stop(){if(this.flags&1){for(let p=this.deps;p;p=p.nextDep)Fm(p);this.deps=this.depsTail=void 0,Vx(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wm(this)&&this.run()}get dirty(){return wm(this)}}let SE=0,ul,al;function xE(c,p=!1){if(c.flags|=8,p){c.next=al,al=c;return}c.next=ul,ul=c}function Um(){SE++}function bm(){if(--SE>0)return;if(al){let p=al;for(al=void 0;p;){const T=p.next;p.next=void 0,p.flags&=-9,p=T}}let c;for(;ul;){let p=ul;for(ul=void 0;p;){const T=p.next;if(p.next=void 0,p.flags&=-9,p.flags&1)try{p.trigger()}catch(I){c||(c=I)}p=T}}if(c)throw c}function EE(c){for(let p=c.deps;p;p=p.nextDep)p.version=-1,p.prevActiveLink=p.dep.activeLink,p.dep.activeLink=p}function AE(c){let p,T=c.depsTail,I=T;for(;I;){const w=I.prevDep;I.version===-1?(I===T&&(T=w),Fm(I),a3(I)):p=I,I.dep.activeLink=I.prevActiveLink,I.prevActiveLink=void 0,I=w}c.deps=p,c.depsTail=T}function wm(c){for(let p=c.deps;p;p=p.nextDep)if(p.dep.version!==p.version||p.dep.computed&&(IE(p.dep.computed)||p.dep.version!==p.version))return!0;return!!c._dirty}function IE(c){if(c.flags&4&&!(c.flags&16)||(c.flags&=-17,c.globalVersion===hl))return;c.globalVersion=hl;const p=c.dep;if(c.flags|=2,p.version>0&&!c.isSSR&&c.deps&&!wm(c)){c.flags&=-3;return}const T=Vt,I=Ji;Vt=c,Ji=!0;try{EE(c);const w=c.fn(c._value);(p.version===0||Ao(w,c._value))&&(c._value=w,p.version++)}catch(w){throw p.version++,w}finally{Vt=T,Ji=I,AE(c),c.flags&=-3}}function Fm(c,p=!1){const{dep:T,prevSub:I,nextSub:w}=c;if(I&&(I.nextSub=w,c.prevSub=void 0),w&&(w.prevSub=I,c.nextSub=void 0),T.subs===c&&(T.subs=I,!I&&T.computed)){T.computed.flags&=-5;for(let C=T.computed.deps;C;C=C.nextDep)Fm(C,!0)}!p&&!--T.sc&&T.map&&T.map.delete(T.key)}function a3(c){const{prevDep:p,nextDep:T}=c;p&&(p.nextDep=T,c.prevDep=void 0),T&&(T.prevDep=p,c.nextDep=void 0)}let Ji=!0;const ME=[];function Mo(){ME.push(Ji),Ji=!1}function Co(){const c=ME.pop();Ji=c===void 0?!0:c}function Vx(c){const{cleanup:p}=c;if(c.cleanup=void 0,p){const T=Vt;Vt=void 0;try{p()}finally{Vt=T}}}let hl=0;class l3{constructor(p,T){this.sub=p,this.dep=T,this.version=T.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bm{constructor(p){this.computed=p,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(p){if(!Vt||!Ji||Vt===this.computed)return;let T=this.activeLink;if(T===void 0||T.sub!==Vt)T=this.activeLink=new l3(Vt,this),Vt.deps?(T.prevDep=Vt.depsTail,Vt.depsTail.nextDep=T,Vt.depsTail=T):Vt.deps=Vt.depsTail=T,CE(T);else if(T.version===-1&&(T.version=this.version,T.nextDep)){const I=T.nextDep;I.prevDep=T.prevDep,T.prevDep&&(T.prevDep.nextDep=I),T.prevDep=Vt.depsTail,T.nextDep=void 0,Vt.depsTail.nextDep=T,Vt.depsTail=T,Vt.deps===T&&(Vt.deps=I)}return T}trigger(p){this.version++,hl++,this.notify(p)}notify(p){Um();try{for(let T=this.subs;T;T=T.prevSub)T.sub.notify()&&T.sub.dep.notify()}finally{bm()}}}function CE(c){if(c.dep.sc++,c.sub.flags&4){const p=c.dep.computed;if(p&&!c.dep.subs){p.flags|=20;for(let I=p.deps;I;I=I.nextDep)CE(I)}const T=c.dep.subs;T!==c&&(c.prevSub=T,T&&(T.nextSub=c)),c.dep.subs=c}}const Sm=new WeakMap,fs=Symbol(""),xm=Symbol(""),pl=Symbol("");function Vn(c,p,T){if(Ji&&Vt){let I=Sm.get(c);I||Sm.set(c,I=new Map);let w=I.get(T);w||(I.set(T,w=new Bm),w.map=I,w.key=T),w.track()}}function Wr(c,p,T,I,w,C){const O=Sm.get(c);if(!O){hl++;return}const h=X=>{X&&X.trigger()};if(Um(),p==="clear")O.forEach(h);else{const X=rt(c),ee=X&&Nm(T);if(X&&T==="length"){const Y=Number(I);O.forEach((ne,le)=>{(le==="length"||le===pl||!Cu(le)&&le>=Y)&&h(ne)})}else switch((T!==void 0||O.has(void 0))&&h(O.get(T)),ee&&h(O.get(pl)),p){case"add":X?ee&&h(O.get("length")):(h(O.get(fs)),ol(c)&&h(O.get(xm)));break;case"delete":X||(h(O.get(fs)),ol(c)&&h(O.get(xm)));break;case"set":ol(c)&&h(O.get(fs));break}}bm()}function Su(c){const p=Rt(c);return p===c?p:(Vn(p,"iterate",pl),Zi(c)?p:p.map(ei))}function Vm(c){return Vn(c=Rt(c),"iterate",pl),c}const c3={__proto__:null,[Symbol.iterator](){return fm(this,Symbol.iterator,ei)},concat(...c){return Su(this).concat(...c.map(p=>rt(p)?Su(p):p))},entries(){return fm(this,"entries",c=>(c[1]=ei(c[1]),c))},every(c,p){return Gr(this,"every",c,p,void 0,arguments)},filter(c,p){return Gr(this,"filter",c,p,T=>T.map(ei),arguments)},find(c,p){return Gr(this,"find",c,p,ei,arguments)},findIndex(c,p){return Gr(this,"findIndex",c,p,void 0,arguments)},findLast(c,p){return Gr(this,"findLast",c,p,ei,arguments)},findLastIndex(c,p){return Gr(this,"findLastIndex",c,p,void 0,arguments)},forEach(c,p){return Gr(this,"forEach",c,p,void 0,arguments)},includes(...c){return dm(this,"includes",c)},indexOf(...c){return dm(this,"indexOf",c)},join(c){return Su(this).join(c)},lastIndexOf(...c){return dm(this,"lastIndexOf",c)},map(c,p){return Gr(this,"map",c,p,void 0,arguments)},pop(){return tl(this,"pop")},push(...c){return tl(this,"push",c)},reduce(c,...p){return Hx(this,"reduce",c,p)},reduceRight(c,...p){return Hx(this,"reduceRight",c,p)},shift(){return tl(this,"shift")},some(c,p){return Gr(this,"some",c,p,void 0,arguments)},splice(...c){return tl(this,"splice",c)},toReversed(){return Su(this).toReversed()},toSorted(c){return Su(this).toSorted(c)},toSpliced(...c){return Su(this).toSpliced(...c)},unshift(...c){return tl(this,"unshift",c)},values(){return fm(this,"values",ei)}};function fm(c,p,T){const I=Vm(c),w=I[p]();return I!==c&&!Zi(c)&&(w._next=w.next,w.next=()=>{const C=w._next();return C.value&&(C.value=T(C.value)),C}),w}const f3=Array.prototype;function Gr(c,p,T,I,w,C){const O=Vm(c),h=O!==c&&!Zi(c),X=O[p];if(X!==f3[p]){const ne=X.apply(c,C);return h?ei(ne):ne}let ee=T;O!==c&&(h?ee=function(ne,le){return T.call(this,ei(ne),le,c)}:T.length>2&&(ee=function(ne,le){return T.call(this,ne,le,c)}));const Y=X.call(O,ee,I);return h&&w?w(Y):Y}function Hx(c,p,T,I){const w=Vm(c);let C=T;return w!==c&&(Zi(c)?T.length>3&&(C=function(O,h,X){return T.call(this,O,h,X,c)}):C=function(O,h,X){return T.call(this,O,ei(h),X,c)}),w[p](C,...I)}function dm(c,p,T){const I=Rt(c);Vn(I,"iterate",pl);const w=I[p](...T);return(w===-1||w===!1)&&Wm(T[0])?(T[0]=Rt(T[0]),I[p](...T)):w}function tl(c,p,T=[]){Mo(),Um();const I=Rt(c)[p].apply(c,T);return bm(),Co(),I}const d3=Pm("__proto__,__v_isRef,__isVue"),kE=new Set(Object.getOwnPropertyNames(Symbol).filter(c=>c!=="arguments"&&c!=="caller").map(c=>Symbol[c]).filter(Cu));function h3(c){Cu(c)||(c=String(c));const p=Rt(this);return Vn(p,"has",c),p.hasOwnProperty(c)}class DE{constructor(p=!1,T=!1){this._isReadonly=p,this._isShallow=T}get(p,T,I){if(T==="__v_skip")return p.__v_skip;const w=this._isReadonly,C=this._isShallow;if(T==="__v_isReactive")return!w;if(T==="__v_isReadonly")return w;if(T==="__v_isShallow")return C;if(T==="__v_raw")return I===(w?C?E3:_E:C?LE:PE).get(p)||Object.getPrototypeOf(p)===Object.getPrototypeOf(I)?p:void 0;const O=rt(p);if(!w){let X;if(O&&(X=c3[T]))return X;if(T==="hasOwnProperty")return h3}const h=Reflect.get(p,T,Hn(p)?p:I);return(Cu(T)?kE.has(T):d3(T))||(w||Vn(p,"get",T),C)?h:Hn(h)?O&&Nm(T)?h:h.value:an(h)?w?NE(h):Gm(h):h}}class RE extends DE{constructor(p=!1){super(!1,p)}set(p,T,I,w){let C=p[T];if(!this._isShallow){const X=hs(C);if(!Zi(I)&&!hs(I)&&(C=Rt(C),I=Rt(I)),!rt(p)&&Hn(C)&&!Hn(I))return X?!1:(C.value=I,!0)}const O=rt(p)&&Nm(T)?Number(T)<p.length:Pt(p,T),h=Reflect.set(p,T,I,Hn(p)?p:w);return p===Rt(w)&&(O?Ao(I,C)&&Wr(p,"set",T,I):Wr(p,"add",T,I)),h}deleteProperty(p,T){const I=Pt(p,T);p[T];const w=Reflect.deleteProperty(p,T);return w&&I&&Wr(p,"delete",T,void 0),w}has(p,T){const I=Reflect.has(p,T);return(!Cu(T)||!kE.has(T))&&Vn(p,"has",T),I}ownKeys(p){return Vn(p,"iterate",rt(p)?"length":fs),Reflect.ownKeys(p)}}class p3 extends DE{constructor(p=!1){super(!0,p)}set(p,T){return!0}deleteProperty(p,T){return!0}}const g3=new RE,m3=new p3,v3=new RE(!0);const Em=c=>c,$f=c=>Reflect.getPrototypeOf(c);function y3(c,p,T){return function(...I){const w=this.__v_raw,C=Rt(w),O=ol(C),h=c==="entries"||c===Symbol.iterator&&O,X=c==="keys"&&O,ee=w[c](...I),Y=T?Em:p?Am:ei;return!p&&Vn(C,"iterate",X?xm:fs),{next(){const{value:ne,done:le}=ee.next();return le?{value:ne,done:le}:{value:h?[Y(ne[0]),Y(ne[1])]:Y(ne),done:le}},[Symbol.iterator](){return this}}}}function Qf(c){return function(...p){return c==="delete"?!1:c==="clear"?void 0:this}}function T3(c,p){const T={get(w){const C=this.__v_raw,O=Rt(C),h=Rt(w);c||(Ao(w,h)&&Vn(O,"get",w),Vn(O,"get",h));const{has:X}=$f(O),ee=p?Em:c?Am:ei;if(X.call(O,w))return ee(C.get(w));if(X.call(O,h))return ee(C.get(h));C!==O&&C.get(w)},get size(){const w=this.__v_raw;return!c&&Vn(Rt(w),"iterate",fs),Reflect.get(w,"size",w)},has(w){const C=this.__v_raw,O=Rt(C),h=Rt(w);return c||(Ao(w,h)&&Vn(O,"has",w),Vn(O,"has",h)),w===h?C.has(w):C.has(w)||C.has(h)},forEach(w,C){const O=this,h=O.__v_raw,X=Rt(h),ee=p?Em:c?Am:ei;return!c&&Vn(X,"iterate",fs),h.forEach((Y,ne)=>w.call(C,ee(Y),ee(ne),O))}};return ii(T,c?{add:Qf("add"),set:Qf("set"),delete:Qf("delete"),clear:Qf("clear")}:{add(w){!p&&!Zi(w)&&!hs(w)&&(w=Rt(w));const C=Rt(this);return $f(C).has.call(C,w)||(C.add(w),Wr(C,"add",w,w)),this},set(w,C){!p&&!Zi(C)&&!hs(C)&&(C=Rt(C));const O=Rt(this),{has:h,get:X}=$f(O);let ee=h.call(O,w);ee||(w=Rt(w),ee=h.call(O,w));const Y=X.call(O,w);return O.set(w,C),ee?Ao(C,Y)&&Wr(O,"set",w,C):Wr(O,"add",w,C),this},delete(w){const C=Rt(this),{has:O,get:h}=$f(C);let X=O.call(C,w);X||(w=Rt(w),X=O.call(C,w)),h&&h.call(C,w);const ee=C.delete(w);return X&&Wr(C,"delete",w,void 0),ee},clear(){const w=Rt(this),C=w.size!==0,O=w.clear();return C&&Wr(w,"clear",void 0,void 0),O}}),["keys","values","entries",Symbol.iterator].forEach(w=>{T[w]=y3(w,c,p)}),T}function Hm(c,p){const T=T3(c,p);return(I,w,C)=>w==="__v_isReactive"?!c:w==="__v_isReadonly"?c:w==="__v_raw"?I:Reflect.get(Pt(T,w)&&w in I?T:I,w,C)}const w3={get:Hm(!1,!1)},S3={get:Hm(!1,!0)},x3={get:Hm(!0,!1)};const PE=new WeakMap,LE=new WeakMap,_E=new WeakMap,E3=new WeakMap;function A3(c){switch(c){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function I3(c){return c.__v_skip||!Object.isExtensible(c)?0:A3(YR(c))}function Gm(c){return hs(c)?c:Km(c,!1,g3,w3,PE)}function M3(c){return Km(c,!1,v3,S3,LE)}function NE(c){return Km(c,!0,m3,x3,_E)}function Km(c,p,T,I,w){if(!an(c)||c.__v_raw&&!(p&&c.__v_isReactive))return c;const C=w.get(c);if(C)return C;const O=I3(c);if(O===0)return c;const h=new Proxy(c,O===2?I:T);return w.set(c,h),h}function ll(c){return hs(c)?ll(c.__v_raw):!!(c&&c.__v_isReactive)}function hs(c){return!!(c&&c.__v_isReadonly)}function Zi(c){return!!(c&&c.__v_isShallow)}function Wm(c){return c?!!c.__v_raw:!1}function Rt(c){const p=c&&c.__v_raw;return p?Rt(p):c}function C3(c){return!Pt(c,"__v_skip")&&Object.isExtensible(c)&&yE(c,"__v_skip",!0),c}const ei=c=>an(c)?Gm(c):c,Am=c=>an(c)?NE(c):c;function Hn(c){return c?c.__v_isRef===!0:!1}function Gx(c){return k3(c,!1)}function k3(c,p){return Hn(c)?c:new D3(c,p)}class D3{constructor(p,T){this.dep=new Bm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=T?p:Rt(p),this._value=T?p:ei(p),this.__v_isShallow=T}get value(){return this.dep.track(),this._value}set value(p){const T=this._rawValue,I=this.__v_isShallow||Zi(p)||hs(p);p=I?p:Rt(p),Ao(p,T)&&(this._rawValue=p,this._value=I?p:ei(p),this.dep.trigger())}}function R3(c){return Hn(c)?c.value:c}const P3={get:(c,p,T)=>p==="__v_raw"?c:R3(Reflect.get(c,p,T)),set:(c,p,T,I)=>{const w=c[p];return Hn(w)&&!Hn(T)?(w.value=T,!0):Reflect.set(c,p,T,I)}};function jE(c){return ll(c)?c:new Proxy(c,P3)}class L3{constructor(p,T,I){this.fn=p,this.setter=T,this._value=void 0,this.dep=new Bm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!T,this.isSSR=I}notify(){if(this.flags|=16,!(this.flags&8)&&Vt!==this)return xE(this,!0),!0}get value(){const p=this.dep.track();return IE(this),p&&(p.version=this.dep.version),this._value}set value(p){this.setter&&this.setter(p)}}function _3(c,p,T=!1){let I,w;return at(c)?I=c:(I=c.get,w=c.set),new L3(I,w,T)}const Jf={},rd=new WeakMap;let cs;function N3(c,p=!1,T=cs){if(T){let I=rd.get(T);I||rd.set(T,I=[]),I.push(c)}}function j3(c,p,T=Ht){const{immediate:I,deep:w,once:C,scheduler:O,augmentJob:h,call:X}=T,ee=qe=>w?qe:Zi(qe)||w===!1||w===0?Eo(qe,1):Eo(qe);let Y,ne,le,_e,v=!1,Q=!1;if(Hn(c)?(ne=()=>c.value,v=Zi(c)):ll(c)?(ne=()=>ee(c),v=!0):rt(c)?(Q=!0,v=c.some(qe=>ll(qe)||Zi(qe)),ne=()=>c.map(qe=>{if(Hn(qe))return qe.value;if(ll(qe))return ee(qe);if(at(qe))return X?X(qe,2):qe()})):at(c)?p?ne=X?()=>X(c,2):c:ne=()=>{if(le){Mo();try{le()}finally{Co()}}const qe=cs;cs=Y;try{return X?X(c,3,[_e]):c(_e)}finally{cs=qe}}:ne=hr,p&&w){const qe=ne,Xt=w===!0?1/0:w;ne=()=>Eo(qe(),Xt)}const Et=u3(),Je=()=>{Y.stop(),Et&&Et.active&&_m(Et.effects,Y)};if(C&&p){const qe=p;p=(...Xt)=>{qe(...Xt),Je()}}let Lt=Q?new Array(c.length).fill(Jf):Jf;const bt=qe=>{if(!(!(Y.flags&1)||!Y.dirty&&!qe))if(p){const Xt=Y.run();if(w||v||(Q?Xt.some((At,ln)=>Ao(At,Lt[ln])):Ao(Xt,Lt))){le&&le();const At=cs;cs=Y;try{const ln=[Xt,Lt===Jf?void 0:Q&&Lt[0]===Jf?[]:Lt,_e];X?X(p,3,ln):p(...ln),Lt=Xt}finally{cs=At}}}else Y.run()};return h&&h(bt),Y=new wE(ne),Y.scheduler=O?()=>O(bt,!1):bt,_e=qe=>N3(qe,!1,Y),le=Y.onStop=()=>{const qe=rd.get(Y);if(qe){if(X)X(qe,4);else for(const Xt of qe)Xt();rd.delete(Y)}},p?I?bt(!0):Lt=Y.run():O?O(bt.bind(null,!0),!0):Y.run(),Je.pause=Y.pause.bind(Y),Je.resume=Y.resume.bind(Y),Je.stop=Je,Je}function Eo(c,p=1/0,T){if(p<=0||!an(c)||c.__v_skip||(T=T||new Set,T.has(c)))return c;if(T.add(c),p--,Hn(c))Eo(c.value,p,T);else if(rt(c))for(let I=0;I<c.length;I++)Eo(c[I],p,T);else if(zR(c)||ol(c))c.forEach(I=>{Eo(I,p,T)});else if($R(c)){for(const I in c)Eo(c[I],p,T);for(const I of Object.getOwnPropertySymbols(c))Object.prototype.propertyIsEnumerable.call(c,I)&&Eo(c[I],p,T)}return c}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tl(c,p,T,I){try{return I?c(...I):c()}catch(w){gd(w,p,T)}}function pr(c,p,T,I){if(at(c)){const w=Tl(c,p,T,I);return w&&mE(w)&&w.catch(C=>{gd(C,p,T)}),w}if(rt(c)){const w=[];for(let C=0;C<c.length;C++)w.push(pr(c[C],p,T,I));return w}}function gd(c,p,T,I=!0){const w=p?p.vnode:null,{errorHandler:C,throwUnhandledErrorInProduction:O}=p&&p.appContext.config||Ht;if(p){let h=p.parent;const X=p.proxy,ee=`https://vuejs.org/error-reference/#runtime-${T}`;for(;h;){const Y=h.ec;if(Y){for(let ne=0;ne<Y.length;ne++)if(Y[ne](c,X,ee)===!1)return}h=h.parent}if(C){Mo(),Tl(C,null,10,[c,X,ee]),Co();return}}O3(c,T,w,I,O)}function O3(c,p,T,I=!0,w=!1){if(w)throw c;console.error(c)}const ti=[];let lr=-1;const Au=[];let So=null,xu=0;const OE=Promise.resolve();let od=null;function U3(c){const p=od||OE;return c?p.then(this?c.bind(this):c):p}function b3(c){let p=lr+1,T=ti.length;for(;p<T;){const I=p+T>>>1,w=ti[I],C=gl(w);C<c||C===c&&w.flags&2?p=I+1:T=I}return p}function Xm(c){if(!(c.flags&1)){const p=gl(c),T=ti[ti.length-1];!T||!(c.flags&2)&&p>=gl(T)?ti.push(c):ti.splice(b3(p),0,c),c.flags|=1,UE()}}function UE(){od||(od=OE.then(FE))}function F3(c){rt(c)?Au.push(...c):So&&c.id===-1?So.splice(xu+1,0,c):c.flags&1||(Au.push(c),c.flags|=1),UE()}function Kx(c,p,T=lr+1){for(;T<ti.length;T++){const I=ti[T];if(I&&I.flags&2){if(c&&I.id!==c.uid)continue;ti.splice(T,1),T--,I.flags&4&&(I.flags&=-2),I(),I.flags&4||(I.flags&=-2)}}}function bE(c){if(Au.length){const p=[...new Set(Au)].sort((T,I)=>gl(T)-gl(I));if(Au.length=0,So){So.push(...p);return}for(So=p,xu=0;xu<So.length;xu++){const T=So[xu];T.flags&4&&(T.flags&=-2),T.flags&8||T(),T.flags&=-2}So=null,xu=0}}const gl=c=>c.id==null?c.flags&2?-1:1/0:c.id;function FE(c){try{for(lr=0;lr<ti.length;lr++){const p=ti[lr];p&&!(p.flags&8)&&(p.flags&4&&(p.flags&=-2),Tl(p,p.i,p.i?15:14),p.flags&4||(p.flags&=-2))}}finally{for(;lr<ti.length;lr++){const p=ti[lr];p&&(p.flags&=-2)}lr=-1,ti.length=0,bE(),od=null,(ti.length||Au.length)&&FE()}}let dr=null,BE=null;function sd(c){const p=dr;return dr=c,BE=c&&c.type.__scopeId||null,p}function B3(c,p=dr,T){if(!p||c._n)return c;const I=(...w)=>{I._d&&Zx(-1);const C=sd(p);let O;try{O=c(...w)}finally{sd(C),I._d&&Zx(1)}return O};return I._n=!0,I._c=!0,I._d=!0,I}function as(c,p,T,I){const w=c.dirs,C=p&&p.dirs;for(let O=0;O<w.length;O++){const h=w[O];C&&(h.oldValue=C[O].value);let X=h.dir[I];X&&(Mo(),pr(X,T,8,[c.el,h,c,p]),Co())}}const V3=Symbol("_vte"),H3=c=>c.__isTeleport;function zm(c,p){c.shapeFlag&6&&c.component?(c.transition=p,zm(c.component.subTree,p)):c.shapeFlag&128?(c.ssContent.transition=p.clone(c.ssContent),c.ssFallback.transition=p.clone(c.ssFallback)):c.transition=p}function VE(c){c.ids=[c.ids[0]+c.ids[2]+++"-",0,0]}function ud(c,p,T,I,w=!1){if(rt(c)){c.forEach((v,Q)=>ud(v,p&&(rt(p)?p[Q]:p),T,I,w));return}if(cl(I)&&!w){I.shapeFlag&512&&I.type.__asyncResolved&&I.component.subTree.component&&ud(c,p,T,I.component.subTree);return}const C=I.shapeFlag&4?$m(I.component):I.el,O=w?null:C,{i:h,r:X}=c,ee=p&&p.r,Y=h.refs===Ht?h.refs={}:h.refs,ne=h.setupState,le=Rt(ne),_e=ne===Ht?()=>!1:v=>Pt(le,v);if(ee!=null&&ee!==X&&(xn(ee)?(Y[ee]=null,_e(ee)&&(ne[ee]=null)):Hn(ee)&&(ee.value=null)),at(X))Tl(X,h,12,[O,Y]);else{const v=xn(X),Q=Hn(X);if(v||Q){const Et=()=>{if(c.f){const Je=v?_e(X)?ne[X]:Y[X]:X.value;w?rt(Je)&&_m(Je,C):rt(Je)?Je.includes(C)||Je.push(C):v?(Y[X]=[C],_e(X)&&(ne[X]=Y[X])):(X.value=[C],c.k&&(Y[c.k]=X.value))}else v?(Y[X]=O,_e(X)&&(ne[X]=O)):Q&&(X.value=O,c.k&&(Y[c.k]=O))};O?(Et.id=-1,Ri(Et,T)):Et()}}}pd().requestIdleCallback;pd().cancelIdleCallback;const cl=c=>!!c.type.__asyncLoader,HE=c=>c.type.__isKeepAlive;function G3(c,p){GE(c,"a",p)}function K3(c,p){GE(c,"da",p)}function GE(c,p,T=ni){const I=c.__wdc||(c.__wdc=()=>{let w=T;for(;w;){if(w.isDeactivated)return;w=w.parent}return c()});if(md(p,I,T),T){let w=T.parent;for(;w&&w.parent;)HE(w.parent.vnode)&&W3(I,p,T,w),w=w.parent}}function W3(c,p,T,I){const w=md(p,c,I,!0);WE(()=>{_m(I[p],w)},T)}function md(c,p,T=ni,I=!1){if(T){const w=T[c]||(T[c]=[]),C=p.__weh||(p.__weh=(...O)=>{Mo();const h=wl(T),X=pr(p,T,c,O);return h(),Co(),X});return I?w.unshift(C):w.push(C),C}}const Xr=c=>(p,T=ni)=>{(!yl||c==="sp")&&md(c,(...I)=>p(...I),T)},X3=Xr("bm"),KE=Xr("m"),z3=Xr("bu"),q3=Xr("u"),Y3=Xr("bum"),WE=Xr("um"),$3=Xr("sp"),Q3=Xr("rtg"),J3=Xr("rtc");function Z3(c,p=ni){md("ec",c,p)}const eP=Symbol.for("v-ndc"),Im=c=>c?dA(c)?$m(c):Im(c.parent):null,fl=ii(Object.create(null),{$:c=>c,$el:c=>c.vnode.el,$data:c=>c.data,$props:c=>c.props,$attrs:c=>c.attrs,$slots:c=>c.slots,$refs:c=>c.refs,$parent:c=>Im(c.parent),$root:c=>Im(c.root),$host:c=>c.ce,$emit:c=>c.emit,$options:c=>zE(c),$forceUpdate:c=>c.f||(c.f=()=>{Xm(c.update)}),$nextTick:c=>c.n||(c.n=U3.bind(c.proxy)),$watch:c=>xP.bind(c)}),hm=(c,p)=>c!==Ht&&!c.__isScriptSetup&&Pt(c,p),tP={get({_:c},p){if(p==="__v_skip")return!0;const{ctx:T,setupState:I,data:w,props:C,accessCache:O,type:h,appContext:X}=c;let ee;if(p[0]!=="$"){const _e=O[p];if(_e!==void 0)switch(_e){case 1:return I[p];case 2:return w[p];case 4:return T[p];case 3:return C[p]}else{if(hm(I,p))return O[p]=1,I[p];if(w!==Ht&&Pt(w,p))return O[p]=2,w[p];if((ee=c.propsOptions[0])&&Pt(ee,p))return O[p]=3,C[p];if(T!==Ht&&Pt(T,p))return O[p]=4,T[p];Mm&&(O[p]=0)}}const Y=fl[p];let ne,le;if(Y)return p==="$attrs"&&Vn(c.attrs,"get",""),Y(c);if((ne=h.__cssModules)&&(ne=ne[p]))return ne;if(T!==Ht&&Pt(T,p))return O[p]=4,T[p];if(le=X.config.globalProperties,Pt(le,p))return le[p]},set({_:c},p,T){const{data:I,setupState:w,ctx:C}=c;return hm(w,p)?(w[p]=T,!0):I!==Ht&&Pt(I,p)?(I[p]=T,!0):Pt(c.props,p)||p[0]==="$"&&p.slice(1)in c?!1:(C[p]=T,!0)},has({_:{data:c,setupState:p,accessCache:T,ctx:I,appContext:w,propsOptions:C}},O){let h;return!!T[O]||c!==Ht&&Pt(c,O)||hm(p,O)||(h=C[0])&&Pt(h,O)||Pt(I,O)||Pt(fl,O)||Pt(w.config.globalProperties,O)},defineProperty(c,p,T){return T.get!=null?c._.accessCache[p]=0:Pt(T,"value")&&this.set(c,p,T.value,null),Reflect.defineProperty(c,p,T)}};function Wx(c){return rt(c)?c.reduce((p,T)=>(p[T]=null,p),{}):c}let Mm=!0;function nP(c){const p=zE(c),T=c.proxy,I=c.ctx;Mm=!1,p.beforeCreate&&Xx(p.beforeCreate,c,"bc");const{data:w,computed:C,methods:O,watch:h,provide:X,inject:ee,created:Y,beforeMount:ne,mounted:le,beforeUpdate:_e,updated:v,activated:Q,deactivated:Et,beforeDestroy:Je,beforeUnmount:Lt,destroyed:bt,unmounted:qe,render:Xt,renderTracked:At,renderTriggered:ln,errorCaptured:We,serverPrefetch:cn,expose:A,inheritAttrs:ie,components:ge,directives:En,filters:Pe}=p;if(ee&&iP(ee,I,null),O)for(const lt in O){const jt=O[lt];at(jt)&&(I[lt]=jt.bind(T))}if(w){const lt=w.call(T,T);an(lt)&&(c.data=Gm(lt))}if(Mm=!0,C)for(const lt in C){const jt=C[lt],gr=at(jt)?jt.bind(T,T):at(jt.get)?jt.get.bind(T,T):hr,zr=!at(jt)&&at(jt.set)?jt.set.bind(T):hr,gi=XP({get:gr,set:zr});Object.defineProperty(I,lt,{enumerable:!0,configurable:!0,get:()=>gi.value,set:_i=>gi.value=_i})}if(h)for(const lt in h)XE(h[lt],I,T,lt);if(X){const lt=at(X)?X.call(T):X;Reflect.ownKeys(lt).forEach(jt=>{lP(jt,lt[jt])})}Y&&Xx(Y,c,"c");function Ct(lt,jt){rt(jt)?jt.forEach(gr=>lt(gr.bind(T))):jt&&lt(jt.bind(T))}if(Ct(X3,ne),Ct(KE,le),Ct(z3,_e),Ct(q3,v),Ct(G3,Q),Ct(K3,Et),Ct(Z3,We),Ct(J3,At),Ct(Q3,ln),Ct(Y3,Lt),Ct(WE,qe),Ct($3,cn),rt(A))if(A.length){const lt=c.exposed||(c.exposed={});A.forEach(jt=>{Object.defineProperty(lt,jt,{get:()=>T[jt],set:gr=>T[jt]=gr})})}else c.exposed||(c.exposed={});Xt&&c.render===hr&&(c.render=Xt),ie!=null&&(c.inheritAttrs=ie),ge&&(c.components=ge),En&&(c.directives=En),cn&&VE(c)}function iP(c,p,T=hr){rt(c)&&(c=Cm(c));for(const I in c){const w=c[I];let C;an(w)?"default"in w?C=td(w.from||I,w.default,!0):C=td(w.from||I):C=td(w),Hn(C)?Object.defineProperty(p,I,{enumerable:!0,configurable:!0,get:()=>C.value,set:O=>C.value=O}):p[I]=C}}function Xx(c,p,T){pr(rt(c)?c.map(I=>I.bind(p.proxy)):c.bind(p.proxy),p,T)}function XE(c,p,T,I){let w=I.includes(".")?uA(T,I):()=>T[I];if(xn(c)){const C=p[c];at(C)&&gm(w,C)}else if(at(c))gm(w,c.bind(T));else if(an(c))if(rt(c))c.forEach(C=>XE(C,p,T,I));else{const C=at(c.handler)?c.handler.bind(T):p[c.handler];at(C)&&gm(w,C,c)}}function zE(c){const p=c.type,{mixins:T,extends:I}=p,{mixins:w,optionsCache:C,config:{optionMergeStrategies:O}}=c.appContext,h=C.get(p);let X;return h?X=h:!w.length&&!T&&!I?X=p:(X={},w.length&&w.forEach(ee=>ad(X,ee,O,!0)),ad(X,p,O)),an(p)&&C.set(p,X),X}function ad(c,p,T,I=!1){const{mixins:w,extends:C}=p;C&&ad(c,C,T,!0),w&&w.forEach(O=>ad(c,O,T,!0));for(const O in p)if(!(I&&O==="expose")){const h=rP[O]||T&&T[O];c[O]=h?h(c[O],p[O]):p[O]}return c}const rP={data:zx,props:qx,emits:qx,methods:rl,computed:rl,beforeCreate:Zn,created:Zn,beforeMount:Zn,mounted:Zn,beforeUpdate:Zn,updated:Zn,beforeDestroy:Zn,beforeUnmount:Zn,destroyed:Zn,unmounted:Zn,activated:Zn,deactivated:Zn,errorCaptured:Zn,serverPrefetch:Zn,components:rl,directives:rl,watch:sP,provide:zx,inject:oP};function zx(c,p){return p?c?function(){return ii(at(c)?c.call(this,this):c,at(p)?p.call(this,this):p)}:p:c}function oP(c,p){return rl(Cm(c),Cm(p))}function Cm(c){if(rt(c)){const p={};for(let T=0;T<c.length;T++)p[c[T]]=c[T];return p}return c}function Zn(c,p){return c?[...new Set([].concat(c,p))]:p}function rl(c,p){return c?ii(Object.create(null),c,p):p}function qx(c,p){return c?rt(c)&&rt(p)?[...new Set([...c,...p])]:ii(Object.create(null),Wx(c),Wx(p??{})):p}function sP(c,p){if(!c)return p;if(!p)return c;const T=ii(Object.create(null),c);for(const I in p)T[I]=Zn(c[I],p[I]);return T}function qE(){return{app:null,config:{isNativeTag:WR,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uP=0;function aP(c,p){return function(I,w=null){at(I)||(I=ii({},I)),w!=null&&!an(w)&&(w=null);const C=qE(),O=new WeakSet,h=[];let X=!1;const ee=C.app={_uid:uP++,_component:I,_props:w,_container:null,_context:C,_instance:null,version:zP,get config(){return C.config},set config(Y){},use(Y,...ne){return O.has(Y)||(Y&&at(Y.install)?(O.add(Y),Y.install(ee,...ne)):at(Y)&&(O.add(Y),Y(ee,...ne))),ee},mixin(Y){return C.mixins.includes(Y)||C.mixins.push(Y),ee},component(Y,ne){return ne?(C.components[Y]=ne,ee):C.components[Y]},directive(Y,ne){return ne?(C.directives[Y]=ne,ee):C.directives[Y]},mount(Y,ne,le){if(!X){const _e=ee._ceVNode||ds(I,w);return _e.appContext=C,le===!0?le="svg":le===!1&&(le=void 0),c(_e,Y,le),X=!0,ee._container=Y,Y.__vue_app__=ee,$m(_e.component)}},onUnmount(Y){h.push(Y)},unmount(){X&&(pr(h,ee._instance,16),c(null,ee._container),delete ee._container.__vue_app__)},provide(Y,ne){return C.provides[Y]=ne,ee},runWithContext(Y){const ne=Iu;Iu=ee;try{return Y()}finally{Iu=ne}}};return ee}}let Iu=null;function lP(c,p){if(ni){let T=ni.provides;const I=ni.parent&&ni.parent.provides;I===T&&(T=ni.provides=Object.create(I)),T[c]=p}}function td(c,p,T=!1){const I=ni||dr;if(I||Iu){const w=Iu?Iu._context.provides:I?I.parent==null?I.vnode.appContext&&I.vnode.appContext.provides:I.parent.provides:void 0;if(w&&c in w)return w[c];if(arguments.length>1)return T&&at(p)?p.call(I&&I.proxy):p}}const YE={},$E=()=>Object.create(YE),QE=c=>Object.getPrototypeOf(c)===YE;function cP(c,p,T,I=!1){const w={},C=$E();c.propsDefaults=Object.create(null),JE(c,p,w,C);for(const O in c.propsOptions[0])O in w||(w[O]=void 0);T?c.props=I?w:M3(w):c.type.props?c.props=w:c.props=C,c.attrs=C}function fP(c,p,T,I){const{props:w,attrs:C,vnode:{patchFlag:O}}=c,h=Rt(w),[X]=c.propsOptions;let ee=!1;if((I||O>0)&&!(O&16)){if(O&8){const Y=c.vnode.dynamicProps;for(let ne=0;ne<Y.length;ne++){let le=Y[ne];if(vd(c.emitsOptions,le))continue;const _e=p[le];if(X)if(Pt(C,le))_e!==C[le]&&(C[le]=_e,ee=!0);else{const v=Io(le);w[v]=km(X,h,v,_e,c,!1)}else _e!==C[le]&&(C[le]=_e,ee=!0)}}}else{JE(c,p,w,C)&&(ee=!0);let Y;for(const ne in h)(!p||!Pt(p,ne)&&((Y=ps(ne))===ne||!Pt(p,Y)))&&(X?T&&(T[ne]!==void 0||T[Y]!==void 0)&&(w[ne]=km(X,h,ne,void 0,c,!0)):delete w[ne]);if(C!==h)for(const ne in C)(!p||!Pt(p,ne))&&(delete C[ne],ee=!0)}ee&&Wr(c.attrs,"set","")}function JE(c,p,T,I){const[w,C]=c.propsOptions;let O=!1,h;if(p)for(let X in p){if(sl(X))continue;const ee=p[X];let Y;w&&Pt(w,Y=Io(X))?!C||!C.includes(Y)?T[Y]=ee:(h||(h={}))[Y]=ee:vd(c.emitsOptions,X)||(!(X in I)||ee!==I[X])&&(I[X]=ee,O=!0)}if(C){const X=Rt(T),ee=h||Ht;for(let Y=0;Y<C.length;Y++){const ne=C[Y];T[ne]=km(w,X,ne,ee[ne],c,!Pt(ee,ne))}}return O}function km(c,p,T,I,w,C){const O=c[T];if(O!=null){const h=Pt(O,"default");if(h&&I===void 0){const X=O.default;if(O.type!==Function&&!O.skipFactory&&at(X)){const{propsDefaults:ee}=w;if(T in ee)I=ee[T];else{const Y=wl(w);I=ee[T]=X.call(null,p),Y()}}else I=X;w.ce&&w.ce._setProp(T,I)}O[0]&&(C&&!h?I=!1:O[1]&&(I===""||I===ps(T))&&(I=!0))}return I}const dP=new WeakMap;function ZE(c,p,T=!1){const I=T?dP:p.propsCache,w=I.get(c);if(w)return w;const C=c.props,O={},h=[];let X=!1;if(!at(c)){const Y=ne=>{X=!0;const[le,_e]=ZE(ne,p,!0);ii(O,le),_e&&h.push(..._e)};!T&&p.mixins.length&&p.mixins.forEach(Y),c.extends&&Y(c.extends),c.mixins&&c.mixins.forEach(Y)}if(!C&&!X)return an(c)&&I.set(c,Eu),Eu;if(rt(C))for(let Y=0;Y<C.length;Y++){const ne=Io(C[Y]);Yx(ne)&&(O[ne]=Ht)}else if(C)for(const Y in C){const ne=Io(Y);if(Yx(ne)){const le=C[Y],_e=O[ne]=rt(le)||at(le)?{type:le}:ii({},le),v=_e.type;let Q=!1,Et=!0;if(rt(v))for(let Je=0;Je<v.length;++Je){const Lt=v[Je],bt=at(Lt)&&Lt.name;if(bt==="Boolean"){Q=!0;break}else bt==="String"&&(Et=!1)}else Q=at(v)&&v.name==="Boolean";_e[0]=Q,_e[1]=Et,(Q||Pt(_e,"default"))&&h.push(ne)}}const ee=[O,h];return an(c)&&I.set(c,ee),ee}function Yx(c){return c[0]!=="$"&&!sl(c)}const eA=c=>c[0]==="_"||c==="$stable",qm=c=>rt(c)?c.map(fr):[fr(c)],hP=(c,p,T)=>{if(p._n)return p;const I=B3((...w)=>qm(p(...w)),T);return I._c=!1,I},tA=(c,p,T)=>{const I=c._ctx;for(const w in c){if(eA(w))continue;const C=c[w];if(at(C))p[w]=hP(w,C,I);else if(C!=null){const O=qm(C);p[w]=()=>O}}},nA=(c,p)=>{const T=qm(p);c.slots.default=()=>T},iA=(c,p,T)=>{for(const I in p)(T||I!=="_")&&(c[I]=p[I])},pP=(c,p,T)=>{const I=c.slots=$E();if(c.vnode.shapeFlag&32){const w=p._;w?(iA(I,p,T),T&&yE(I,"_",w,!0)):tA(p,I)}else p&&nA(c,p)},gP=(c,p,T)=>{const{vnode:I,slots:w}=c;let C=!0,O=Ht;if(I.shapeFlag&32){const h=p._;h?T&&h===1?C=!1:iA(w,p,T):(C=!p.$stable,tA(p,w)),O=p}else p&&(nA(c,p),O={default:1});if(C)for(const h in w)!eA(h)&&O[h]==null&&delete w[h]},Ri=DP;function mP(c){return vP(c)}function vP(c,p){const T=pd();T.__VUE__=!0;const{insert:I,remove:w,patchProp:C,createElement:O,createText:h,createComment:X,setText:ee,setElementText:Y,parentNode:ne,nextSibling:le,setScopeId:_e=hr,insertStaticContent:v}=c,Q=(R,K,Z,ae=null,oe=null,se=null,me=void 0,fe=null,J=!!K.dynamicChildren)=>{if(R===K)return;R&&!nl(R,K)&&(ae=qr(R),_i(R,oe,se,!0),R=null),K.patchFlag===-2&&(J=!1,K.dynamicChildren=null);const{type:ue,ref:Xe,shapeFlag:Ce}=K;switch(ue){case yd:Et(R,K,Z,ae);break;case ml:Je(R,K,Z,ae);break;case mm:R==null&&Lt(K,Z,ae,me);break;case cr:ge(R,K,Z,ae,oe,se,me,fe,J);break;default:Ce&1?Xt(R,K,Z,ae,oe,se,me,fe,J):Ce&6?En(R,K,Z,ae,oe,se,me,fe,J):(Ce&64||Ce&128)&&ue.process(R,K,Z,ae,oe,se,me,fe,J,ko)}Xe!=null&&oe&&ud(Xe,R&&R.ref,se,K||R,!K)},Et=(R,K,Z,ae)=>{if(R==null)I(K.el=h(K.children),Z,ae);else{const oe=K.el=R.el;K.children!==R.children&&ee(oe,K.children)}},Je=(R,K,Z,ae)=>{R==null?I(K.el=X(K.children||""),Z,ae):K.el=R.el},Lt=(R,K,Z,ae)=>{[R.el,R.anchor]=v(R.children,K,Z,ae,R.el,R.anchor)},bt=({el:R,anchor:K},Z,ae)=>{let oe;for(;R&&R!==K;)oe=le(R),I(R,Z,ae),R=oe;I(K,Z,ae)},qe=({el:R,anchor:K})=>{let Z;for(;R&&R!==K;)Z=le(R),w(R),R=Z;w(K)},Xt=(R,K,Z,ae,oe,se,me,fe,J)=>{K.type==="svg"?me="svg":K.type==="math"&&(me="mathml"),R==null?At(K,Z,ae,oe,se,me,fe,J):cn(R,K,oe,se,me,fe,J)},At=(R,K,Z,ae,oe,se,me,fe)=>{let J,ue;const{props:Xe,shapeFlag:Ce,transition:He,dirs:$e}=R;if(J=R.el=O(R.type,se,Xe&&Xe.is,Xe),Ce&8?Y(J,R.children):Ce&16&&We(R.children,J,null,ae,oe,pm(R,se),me,fe),$e&&as(R,null,ae,"created"),ln(J,R,R.scopeId,me,ae),Xe){for(const ke in Xe)ke!=="value"&&!sl(ke)&&C(J,ke,null,Xe[ke],se,ae);"value"in Xe&&C(J,"value",null,Xe.value,se),(ue=Xe.onVnodeBeforeMount)&&ar(ue,ae,R)}$e&&as(R,null,ae,"beforeMount");const ot=yP(oe,He);ot&&He.beforeEnter(J),I(J,K,Z),((ue=Xe&&Xe.onVnodeMounted)||ot||$e)&&Ri(()=>{ue&&ar(ue,ae,R),ot&&He.enter(J),$e&&as(R,null,ae,"mounted")},oe)},ln=(R,K,Z,ae,oe)=>{if(Z&&_e(R,Z),ae)for(let se=0;se<ae.length;se++)_e(R,ae[se]);if(oe){let se=oe.subTree;if(K===se||lA(se.type)&&(se.ssContent===K||se.ssFallback===K)){const me=oe.vnode;ln(R,me,me.scopeId,me.slotScopeIds,oe.parent)}}},We=(R,K,Z,ae,oe,se,me,fe,J=0)=>{for(let ue=J;ue<R.length;ue++){const Xe=R[ue]=fe?xo(R[ue]):fr(R[ue]);Q(null,Xe,K,Z,ae,oe,se,me,fe)}},cn=(R,K,Z,ae,oe,se,me)=>{const fe=K.el=R.el;let{patchFlag:J,dynamicChildren:ue,dirs:Xe}=K;J|=R.patchFlag&16;const Ce=R.props||Ht,He=K.props||Ht;let $e;if(Z&&ls(Z,!1),($e=He.onVnodeBeforeUpdate)&&ar($e,Z,K,R),Xe&&as(K,R,Z,"beforeUpdate"),Z&&ls(Z,!0),(Ce.innerHTML&&He.innerHTML==null||Ce.textContent&&He.textContent==null)&&Y(fe,""),ue?A(R.dynamicChildren,ue,fe,Z,ae,pm(K,oe),se):me||jt(R,K,fe,null,Z,ae,pm(K,oe),se,!1),J>0){if(J&16)ie(fe,Ce,He,Z,oe);else if(J&2&&Ce.class!==He.class&&C(fe,"class",null,He.class,oe),J&4&&C(fe,"style",Ce.style,He.style,oe),J&8){const ot=K.dynamicProps;for(let ke=0;ke<ot.length;ke++){const wt=ot[ke],Gn=Ce[wt],Pn=He[wt];(Pn!==Gn||wt==="value")&&C(fe,wt,Gn,Pn,oe,Z)}}J&1&&R.children!==K.children&&Y(fe,K.children)}else!me&&ue==null&&ie(fe,Ce,He,Z,oe);(($e=He.onVnodeUpdated)||Xe)&&Ri(()=>{$e&&ar($e,Z,K,R),Xe&&as(K,R,Z,"updated")},ae)},A=(R,K,Z,ae,oe,se,me)=>{for(let fe=0;fe<K.length;fe++){const J=R[fe],ue=K[fe],Xe=J.el&&(J.type===cr||!nl(J,ue)||J.shapeFlag&70)?ne(J.el):Z;Q(J,ue,Xe,null,ae,oe,se,me,!0)}},ie=(R,K,Z,ae,oe)=>{if(K!==Z){if(K!==Ht)for(const se in K)!sl(se)&&!(se in Z)&&C(R,se,K[se],null,oe,ae);for(const se in Z){if(sl(se))continue;const me=Z[se],fe=K[se];me!==fe&&se!=="value"&&C(R,se,fe,me,oe,ae)}"value"in Z&&C(R,"value",K.value,Z.value,oe)}},ge=(R,K,Z,ae,oe,se,me,fe,J)=>{const ue=K.el=R?R.el:h(""),Xe=K.anchor=R?R.anchor:h("");let{patchFlag:Ce,dynamicChildren:He,slotScopeIds:$e}=K;$e&&(fe=fe?fe.concat($e):$e),R==null?(I(ue,Z,ae),I(Xe,Z,ae),We(K.children||[],Z,Xe,oe,se,me,fe,J)):Ce>0&&Ce&64&&He&&R.dynamicChildren?(A(R.dynamicChildren,He,Z,oe,se,me,fe),(K.key!=null||oe&&K===oe.subTree)&&rA(R,K,!0)):jt(R,K,Z,Xe,oe,se,me,fe,J)},En=(R,K,Z,ae,oe,se,me,fe,J)=>{K.slotScopeIds=fe,R==null?K.shapeFlag&512?oe.ctx.activate(K,Z,ae,me,J):Pe(K,Z,ae,oe,se,me,J):Se(R,K,J)},Pe=(R,K,Z,ae,oe,se,me)=>{const fe=R.component=BP(R,ae,oe);if(HE(R)&&(fe.ctx.renderer=ko),VP(fe,!1,me),fe.asyncDep){if(oe&&oe.registerDep(fe,Ct,me),!R.el){const J=fe.subTree=ds(ml);Je(null,J,K,Z)}}else Ct(fe,R,K,Z,oe,se,me)},Se=(R,K,Z)=>{const ae=K.component=R.component;if(CP(R,K,Z))if(ae.asyncDep&&!ae.asyncResolved){lt(ae,K,Z);return}else ae.next=K,ae.update();else K.el=R.el,ae.vnode=K},Ct=(R,K,Z,ae,oe,se,me)=>{const fe=()=>{if(R.isMounted){let{next:Ce,bu:He,u:$e,parent:ot,vnode:ke}=R;{const ri=oA(R);if(ri){Ce&&(Ce.el=ke.el,lt(R,Ce,me)),ri.asyncDep.then(()=>{R.isUnmounted||fe()});return}}let wt=Ce,Gn;ls(R,!1),Ce?(Ce.el=ke.el,lt(R,Ce,me)):Ce=ke,He&&lm(He),(Gn=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&ar(Gn,ot,Ce,ke),ls(R,!0);const Pn=Qx(R),mi=R.subTree;R.subTree=Pn,Q(mi,Pn,ne(mi.el),qr(mi),R,oe,se),Ce.el=Pn.el,wt===null&&kP(R,Pn.el),$e&&Ri($e,oe),(Gn=Ce.props&&Ce.props.onVnodeUpdated)&&Ri(()=>ar(Gn,ot,Ce,ke),oe)}else{let Ce;const{el:He,props:$e}=K,{bm:ot,m:ke,parent:wt,root:Gn,type:Pn}=R,mi=cl(K);ls(R,!1),ot&&lm(ot),!mi&&(Ce=$e&&$e.onVnodeBeforeMount)&&ar(Ce,wt,K),ls(R,!0);{Gn.ce&&Gn.ce._injectChildStyle(Pn);const ri=R.subTree=Qx(R);Q(null,ri,Z,ae,R,oe,se),K.el=ri.el}if(ke&&Ri(ke,oe),!mi&&(Ce=$e&&$e.onVnodeMounted)){const ri=K;Ri(()=>ar(Ce,wt,ri),oe)}(K.shapeFlag&256||wt&&cl(wt.vnode)&&wt.vnode.shapeFlag&256)&&R.a&&Ri(R.a,oe),R.isMounted=!0,K=Z=ae=null}};R.scope.on();const J=R.effect=new wE(fe);R.scope.off();const ue=R.update=J.run.bind(J),Xe=R.job=J.runIfDirty.bind(J);Xe.i=R,Xe.id=R.uid,J.scheduler=()=>Xm(Xe),ls(R,!0),ue()},lt=(R,K,Z)=>{K.component=R;const ae=R.vnode.props;R.vnode=K,R.next=null,fP(R,K.props,ae,Z),gP(R,K.children,Z),Mo(),Kx(R),Co()},jt=(R,K,Z,ae,oe,se,me,fe,J=!1)=>{const ue=R&&R.children,Xe=R?R.shapeFlag:0,Ce=K.children,{patchFlag:He,shapeFlag:$e}=K;if(He>0){if(He&128){zr(ue,Ce,Z,ae,oe,se,me,fe,J);return}else if(He&256){gr(ue,Ce,Z,ae,oe,se,me,fe,J);return}}$e&8?(Xe&16&&An(ue,oe,se),Ce!==ue&&Y(Z,Ce)):Xe&16?$e&16?zr(ue,Ce,Z,ae,oe,se,me,fe,J):An(ue,oe,se,!0):(Xe&8&&Y(Z,""),$e&16&&We(Ce,Z,ae,oe,se,me,fe,J))},gr=(R,K,Z,ae,oe,se,me,fe,J)=>{R=R||Eu,K=K||Eu;const ue=R.length,Xe=K.length,Ce=Math.min(ue,Xe);let He;for(He=0;He<Ce;He++){const $e=K[He]=J?xo(K[He]):fr(K[He]);Q(R[He],$e,Z,null,oe,se,me,fe,J)}ue>Xe?An(R,oe,se,!0,!1,Ce):We(K,Z,ae,oe,se,me,fe,J,Ce)},zr=(R,K,Z,ae,oe,se,me,fe,J)=>{let ue=0;const Xe=K.length;let Ce=R.length-1,He=Xe-1;for(;ue<=Ce&&ue<=He;){const $e=R[ue],ot=K[ue]=J?xo(K[ue]):fr(K[ue]);if(nl($e,ot))Q($e,ot,Z,null,oe,se,me,fe,J);else break;ue++}for(;ue<=Ce&&ue<=He;){const $e=R[Ce],ot=K[He]=J?xo(K[He]):fr(K[He]);if(nl($e,ot))Q($e,ot,Z,null,oe,se,me,fe,J);else break;Ce--,He--}if(ue>Ce){if(ue<=He){const $e=He+1,ot=$e<Xe?K[$e].el:ae;for(;ue<=He;)Q(null,K[ue]=J?xo(K[ue]):fr(K[ue]),Z,ot,oe,se,me,fe,J),ue++}}else if(ue>He)for(;ue<=Ce;)_i(R[ue],oe,se,!0),ue++;else{const $e=ue,ot=ue,ke=new Map;for(ue=ot;ue<=He;ue++){const Kn=K[ue]=J?xo(K[ue]):fr(K[ue]);Kn.key!=null&&ke.set(Kn.key,ue)}let wt,Gn=0;const Pn=He-ot+1;let mi=!1,ri=0;const Ye=new Array(Pn);for(ue=0;ue<Pn;ue++)Ye[ue]=0;for(ue=$e;ue<=Ce;ue++){const Kn=R[ue];if(Gn>=Pn){_i(Kn,oe,se,!0);continue}let vi;if(Kn.key!=null)vi=ke.get(Kn.key);else for(wt=ot;wt<=He;wt++)if(Ye[wt-ot]===0&&nl(Kn,K[wt])){vi=wt;break}vi===void 0?_i(Kn,oe,se,!0):(Ye[vi-ot]=ue+1,vi>=ri?ri=vi:mi=!0,Q(Kn,K[vi],Z,null,oe,se,me,fe,J),Gn++)}const xl=mi?TP(Ye):Eu;for(wt=xl.length-1,ue=Pn-1;ue>=0;ue--){const Kn=ot+ue,vi=K[Kn],El=Kn+1<Xe?K[Kn+1].el:ae;Ye[ue]===0?Q(null,vi,Z,El,oe,se,me,fe,J):mi&&(wt<0||ue!==xl[wt]?gi(vi,Z,El,2):wt--)}}},gi=(R,K,Z,ae,oe=null)=>{const{el:se,type:me,transition:fe,children:J,shapeFlag:ue}=R;if(ue&6){gi(R.component.subTree,K,Z,ae);return}if(ue&128){R.suspense.move(K,Z,ae);return}if(ue&64){me.move(R,K,Z,ko);return}if(me===cr){I(se,K,Z);for(let Ce=0;Ce<J.length;Ce++)gi(J[Ce],K,Z,ae);I(R.anchor,K,Z);return}if(me===mm){bt(R,K,Z);return}if(ae!==2&&ue&1&&fe)if(ae===0)fe.beforeEnter(se),I(se,K,Z),Ri(()=>fe.enter(se),oe);else{const{leave:Ce,delayLeave:He,afterLeave:$e}=fe,ot=()=>I(se,K,Z),ke=()=>{Ce(se,()=>{ot(),$e&&$e()})};He?He(se,ot,ke):ke()}else I(se,K,Z)},_i=(R,K,Z,ae=!1,oe=!1)=>{const{type:se,props:me,ref:fe,children:J,dynamicChildren:ue,shapeFlag:Xe,patchFlag:Ce,dirs:He,cacheIndex:$e}=R;if(Ce===-2&&(oe=!1),fe!=null&&ud(fe,null,Z,R,!0),$e!=null&&(K.renderCache[$e]=void 0),Xe&256){K.ctx.deactivate(R);return}const ot=Xe&1&&He,ke=!cl(R);let wt;if(ke&&(wt=me&&me.onVnodeBeforeUnmount)&&ar(wt,K,R),Xe&6)tn(R.component,Z,ae);else{if(Xe&128){R.suspense.unmount(Z,ae);return}ot&&as(R,null,K,"beforeUnmount"),Xe&64?R.type.remove(R,K,Z,ko,ae):ue&&!ue.hasOnce&&(se!==cr||Ce>0&&Ce&64)?An(ue,K,Z,!1,!0):(se===cr&&Ce&384||!oe&&Xe&16)&&An(J,K,Z),ae&&Sl(R)}(ke&&(wt=me&&me.onVnodeUnmounted)||ot)&&Ri(()=>{wt&&ar(wt,K,R),ot&&as(R,null,K,"unmounted")},Z)},Sl=R=>{const{type:K,el:Z,anchor:ae,transition:oe}=R;if(K===cr){U(Z,ae);return}if(K===mm){qe(R);return}const se=()=>{w(Z),oe&&!oe.persisted&&oe.afterLeave&&oe.afterLeave()};if(R.shapeFlag&1&&oe&&!oe.persisted){const{leave:me,delayLeave:fe}=oe,J=()=>me(Z,se);fe?fe(R.el,se,J):J()}else se()},U=(R,K)=>{let Z;for(;R!==K;)Z=le(R),w(R),R=Z;w(K)},tn=(R,K,Z)=>{const{bum:ae,scope:oe,job:se,subTree:me,um:fe,m:J,a:ue}=R;$x(J),$x(ue),ae&&lm(ae),oe.stop(),se&&(se.flags|=8,_i(me,R,K,Z)),fe&&Ri(fe,K),Ri(()=>{R.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},An=(R,K,Z,ae=!1,oe=!1,se=0)=>{for(let me=se;me<R.length;me++)_i(R[me],K,Z,ae,oe)},qr=R=>{if(R.shapeFlag&6)return qr(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const K=le(R.anchor||R.el),Z=K&&K[V3];return Z?le(Z):K};let Yr=!1;const ku=(R,K,Z)=>{R==null?K._vnode&&_i(K._vnode,null,null,!0):Q(K._vnode||null,R,K,null,null,null,Z),K._vnode=R,Yr||(Yr=!0,Kx(),bE(),Yr=!1)},ko={p:Q,um:_i,m:gi,r:Sl,mt:Pe,mc:We,pc:jt,pbc:A,n:qr,o:c};return{render:ku,hydrate:void 0,createApp:aP(ku)}}function pm({type:c,props:p},T){return T==="svg"&&c==="foreignObject"||T==="mathml"&&c==="annotation-xml"&&p&&p.encoding&&p.encoding.includes("html")?void 0:T}function ls({effect:c,job:p},T){T?(c.flags|=32,p.flags|=4):(c.flags&=-33,p.flags&=-5)}function yP(c,p){return(!c||c&&!c.pendingBranch)&&p&&!p.persisted}function rA(c,p,T=!1){const I=c.children,w=p.children;if(rt(I)&&rt(w))for(let C=0;C<I.length;C++){const O=I[C];let h=w[C];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=w[C]=xo(w[C]),h.el=O.el),!T&&h.patchFlag!==-2&&rA(O,h)),h.type===yd&&(h.el=O.el)}}function TP(c){const p=c.slice(),T=[0];let I,w,C,O,h;const X=c.length;for(I=0;I<X;I++){const ee=c[I];if(ee!==0){if(w=T[T.length-1],c[w]<ee){p[I]=w,T.push(I);continue}for(C=0,O=T.length-1;C<O;)h=C+O>>1,c[T[h]]<ee?C=h+1:O=h;ee<c[T[C]]&&(C>0&&(p[I]=T[C-1]),T[C]=I)}}for(C=T.length,O=T[C-1];C-- >0;)T[C]=O,O=p[O];return T}function oA(c){const p=c.subTree.component;if(p)return p.asyncDep&&!p.asyncResolved?p:oA(p)}function $x(c){if(c)for(let p=0;p<c.length;p++)c[p].flags|=8}const wP=Symbol.for("v-scx"),SP=()=>td(wP);function gm(c,p,T){return sA(c,p,T)}function sA(c,p,T=Ht){const{immediate:I,deep:w,flush:C,once:O}=T,h=ii({},T),X=p&&I||!p&&C!=="post";let ee;if(yl){if(C==="sync"){const _e=SP();ee=_e.__watcherHandles||(_e.__watcherHandles=[])}else if(!X){const _e=()=>{};return _e.stop=hr,_e.resume=hr,_e.pause=hr,_e}}const Y=ni;h.call=(_e,v,Q)=>pr(_e,Y,v,Q);let ne=!1;C==="post"?h.scheduler=_e=>{Ri(_e,Y&&Y.suspense)}:C!=="sync"&&(ne=!0,h.scheduler=(_e,v)=>{v?_e():Xm(_e)}),h.augmentJob=_e=>{p&&(_e.flags|=4),ne&&(_e.flags|=2,Y&&(_e.id=Y.uid,_e.i=Y))};const le=j3(c,p,h);return yl&&(ee?ee.push(le):X&&le()),le}function xP(c,p,T){const I=this.proxy,w=xn(c)?c.includes(".")?uA(I,c):()=>I[c]:c.bind(I,I);let C;at(p)?C=p:(C=p.handler,T=p);const O=wl(this),h=sA(w,C.bind(I),T);return O(),h}function uA(c,p){const T=p.split(".");return()=>{let I=c;for(let w=0;w<T.length&&I;w++)I=I[T[w]];return I}}const EP=(c,p)=>p==="modelValue"||p==="model-value"?c.modelModifiers:c[`${p}Modifiers`]||c[`${Io(p)}Modifiers`]||c[`${ps(p)}Modifiers`];function AP(c,p,...T){if(c.isUnmounted)return;const I=c.vnode.props||Ht;let w=T;const C=p.startsWith("update:"),O=C&&EP(I,p.slice(7));O&&(O.trim&&(w=T.map(Y=>xn(Y)?Y.trim():Y)),O.number&&(w=T.map(ZR)));let h,X=I[h=am(p)]||I[h=am(Io(p))];!X&&C&&(X=I[h=am(ps(p))]),X&&pr(X,c,6,w);const ee=I[h+"Once"];if(ee){if(!c.emitted)c.emitted={};else if(c.emitted[h])return;c.emitted[h]=!0,pr(ee,c,6,w)}}function aA(c,p,T=!1){const I=p.emitsCache,w=I.get(c);if(w!==void 0)return w;const C=c.emits;let O={},h=!1;if(!at(c)){const X=ee=>{const Y=aA(ee,p,!0);Y&&(h=!0,ii(O,Y))};!T&&p.mixins.length&&p.mixins.forEach(X),c.extends&&X(c.extends),c.mixins&&c.mixins.forEach(X)}return!C&&!h?(an(c)&&I.set(c,null),null):(rt(C)?C.forEach(X=>O[X]=null):ii(O,C),an(c)&&I.set(c,O),O)}function vd(c,p){return!c||!fd(p)?!1:(p=p.slice(2).replace(/Once$/,""),Pt(c,p[0].toLowerCase()+p.slice(1))||Pt(c,ps(p))||Pt(c,p))}function Qx(c){const{type:p,vnode:T,proxy:I,withProxy:w,propsOptions:[C],slots:O,attrs:h,emit:X,render:ee,renderCache:Y,props:ne,data:le,setupState:_e,ctx:v,inheritAttrs:Q}=c,Et=sd(c);let Je,Lt;try{if(T.shapeFlag&4){const qe=w||I,Xt=qe;Je=fr(ee.call(Xt,qe,Y,ne,_e,le,v)),Lt=h}else{const qe=p;Je=fr(qe.length>1?qe(ne,{attrs:h,slots:O,emit:X}):qe(ne,null)),Lt=p.props?h:IP(h)}}catch(qe){dl.length=0,gd(qe,c,1),Je=ds(ml)}let bt=Je;if(Lt&&Q!==!1){const qe=Object.keys(Lt),{shapeFlag:Xt}=bt;qe.length&&Xt&7&&(C&&qe.some(Lm)&&(Lt=MP(Lt,C)),bt=Mu(bt,Lt,!1,!0))}return T.dirs&&(bt=Mu(bt,null,!1,!0),bt.dirs=bt.dirs?bt.dirs.concat(T.dirs):T.dirs),T.transition&&zm(bt,T.transition),Je=bt,sd(Et),Je}const IP=c=>{let p;for(const T in c)(T==="class"||T==="style"||fd(T))&&((p||(p={}))[T]=c[T]);return p},MP=(c,p)=>{const T={};for(const I in c)(!Lm(I)||!(I.slice(9)in p))&&(T[I]=c[I]);return T};function CP(c,p,T){const{props:I,children:w,component:C}=c,{props:O,children:h,patchFlag:X}=p,ee=C.emitsOptions;if(p.dirs||p.transition)return!0;if(T&&X>=0){if(X&1024)return!0;if(X&16)return I?Jx(I,O,ee):!!O;if(X&8){const Y=p.dynamicProps;for(let ne=0;ne<Y.length;ne++){const le=Y[ne];if(O[le]!==I[le]&&!vd(ee,le))return!0}}}else return(w||h)&&(!h||!h.$stable)?!0:I===O?!1:I?O?Jx(I,O,ee):!0:!!O;return!1}function Jx(c,p,T){const I=Object.keys(p);if(I.length!==Object.keys(c).length)return!0;for(let w=0;w<I.length;w++){const C=I[w];if(p[C]!==c[C]&&!vd(T,C))return!0}return!1}function kP({vnode:c,parent:p},T){for(;p;){const I=p.subTree;if(I.suspense&&I.suspense.activeBranch===c&&(I.el=c.el),I===c)(c=p.vnode).el=T,p=p.parent;else break}}const lA=c=>c.__isSuspense;function DP(c,p){p&&p.pendingBranch?rt(c)?p.effects.push(...c):p.effects.push(c):F3(c)}const cr=Symbol.for("v-fgt"),yd=Symbol.for("v-txt"),ml=Symbol.for("v-cmt"),mm=Symbol.for("v-stc"),dl=[];let Li=null;function RP(c=!1){dl.push(Li=c?null:[])}function PP(){dl.pop(),Li=dl[dl.length-1]||null}let vl=1;function Zx(c,p=!1){vl+=c,c<0&&Li&&p&&(Li.hasOnce=!0)}function LP(c){return c.dynamicChildren=vl>0?Li||Eu:null,PP(),vl>0&&Li&&Li.push(c),c}function _P(c,p,T,I,w,C){return LP(ld(c,p,T,I,w,C,!0))}function cA(c){return c?c.__v_isVNode===!0:!1}function nl(c,p){return c.type===p.type&&c.key===p.key}const fA=({key:c})=>c??null,nd=({ref:c,ref_key:p,ref_for:T})=>(typeof c=="number"&&(c=""+c),c!=null?xn(c)||Hn(c)||at(c)?{i:dr,r:c,k:p,f:!!T}:c:null);function ld(c,p=null,T=null,I=0,w=null,C=c===cr?0:1,O=!1,h=!1){const X={__v_isVNode:!0,__v_skip:!0,type:c,props:p,key:p&&fA(p),ref:p&&nd(p),scopeId:BE,slotScopeIds:null,children:T,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:C,patchFlag:I,dynamicProps:w,dynamicChildren:null,appContext:null,ctx:dr};return h?(Ym(X,T),C&128&&c.normalize(X)):T&&(X.shapeFlag|=xn(T)?8:16),vl>0&&!O&&Li&&(X.patchFlag>0||C&6)&&X.patchFlag!==32&&Li.push(X),X}const ds=NP;function NP(c,p=null,T=null,I=0,w=null,C=!1){if((!c||c===eP)&&(c=ml),cA(c)){const h=Mu(c,p,!0);return T&&Ym(h,T),vl>0&&!C&&Li&&(h.shapeFlag&6?Li[Li.indexOf(c)]=h:Li.push(h)),h.patchFlag=-2,h}if(WP(c)&&(c=c.__vccOpts),p){p=jP(p);let{class:h,style:X}=p;h&&!xn(h)&&(p.class=Om(h)),an(X)&&(Wm(X)&&!rt(X)&&(X=ii({},X)),p.style=jm(X))}const O=xn(c)?1:lA(c)?128:H3(c)?64:an(c)?4:at(c)?2:0;return ld(c,p,T,I,w,O,C,!0)}function jP(c){return c?Wm(c)||QE(c)?ii({},c):c:null}function Mu(c,p,T=!1,I=!1){const{props:w,ref:C,patchFlag:O,children:h,transition:X}=c,ee=p?UP(w||{},p):w,Y={__v_isVNode:!0,__v_skip:!0,type:c.type,props:ee,key:ee&&fA(ee),ref:p&&p.ref?T&&C?rt(C)?C.concat(nd(p)):[C,nd(p)]:nd(p):C,scopeId:c.scopeId,slotScopeIds:c.slotScopeIds,children:h,target:c.target,targetStart:c.targetStart,targetAnchor:c.targetAnchor,staticCount:c.staticCount,shapeFlag:c.shapeFlag,patchFlag:p&&c.type!==cr?O===-1?16:O|16:O,dynamicProps:c.dynamicProps,dynamicChildren:c.dynamicChildren,appContext:c.appContext,dirs:c.dirs,transition:X,component:c.component,suspense:c.suspense,ssContent:c.ssContent&&Mu(c.ssContent),ssFallback:c.ssFallback&&Mu(c.ssFallback),el:c.el,anchor:c.anchor,ctx:c.ctx,ce:c.ce};return X&&I&&zm(Y,X.clone(Y)),Y}function OP(c=" ",p=0){return ds(yd,null,c,p)}function fr(c){return c==null||typeof c=="boolean"?ds(ml):rt(c)?ds(cr,null,c.slice()):cA(c)?xo(c):ds(yd,null,String(c))}function xo(c){return c.el===null&&c.patchFlag!==-1||c.memo?c:Mu(c)}function Ym(c,p){let T=0;const{shapeFlag:I}=c;if(p==null)p=null;else if(rt(p))T=16;else if(typeof p=="object")if(I&65){const w=p.default;w&&(w._c&&(w._d=!1),Ym(c,w()),w._c&&(w._d=!0));return}else{T=32;const w=p._;!w&&!QE(p)?p._ctx=dr:w===3&&dr&&(dr.slots._===1?p._=1:(p._=2,c.patchFlag|=1024))}else at(p)?(p={default:p,_ctx:dr},T=32):(p=String(p),I&64?(T=16,p=[OP(p)]):T=8);c.children=p,c.shapeFlag|=T}function UP(...c){const p={};for(let T=0;T<c.length;T++){const I=c[T];for(const w in I)if(w==="class")p.class!==I.class&&(p.class=Om([p.class,I.class]));else if(w==="style")p.style=jm([p.style,I.style]);else if(fd(w)){const C=p[w],O=I[w];O&&C!==O&&!(rt(C)&&C.includes(O))&&(p[w]=C?[].concat(C,O):O)}else w!==""&&(p[w]=I[w])}return p}function ar(c,p,T,I=null){pr(c,p,7,[T,I])}const bP=qE();let FP=0;function BP(c,p,T){const I=c.type,w=(p?p.appContext:c.appContext)||bP,C={uid:FP++,vnode:c,type:I,parent:p,appContext:w,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new s3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:p?p.provides:Object.create(w.provides),ids:p?p.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ZE(I,w),emitsOptions:aA(I,w),emit:null,emitted:null,propsDefaults:Ht,inheritAttrs:I.inheritAttrs,ctx:Ht,data:Ht,props:Ht,attrs:Ht,slots:Ht,refs:Ht,setupState:Ht,setupContext:null,suspense:T,suspenseId:T?T.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return C.ctx={_:C},C.root=p?p.root:C,C.emit=AP.bind(null,C),c.ce&&c.ce(C),C}let ni=null,cd,Dm;{const c=pd(),p=(T,I)=>{let w;return(w=c[T])||(w=c[T]=[]),w.push(I),C=>{w.length>1?w.forEach(O=>O(C)):w[0](C)}};cd=p("__VUE_INSTANCE_SETTERS__",T=>ni=T),Dm=p("__VUE_SSR_SETTERS__",T=>yl=T)}const wl=c=>{const p=ni;return cd(c),c.scope.on(),()=>{c.scope.off(),cd(p)}},eE=()=>{ni&&ni.scope.off(),cd(null)};function dA(c){return c.vnode.shapeFlag&4}let yl=!1;function VP(c,p=!1,T=!1){p&&Dm(p);const{props:I,children:w}=c.vnode,C=dA(c);cP(c,I,C,p),pP(c,w,T);const O=C?HP(c,p):void 0;return p&&Dm(!1),O}function HP(c,p){const T=c.type;c.accessCache=Object.create(null),c.proxy=new Proxy(c.ctx,tP);const{setup:I}=T;if(I){Mo();const w=c.setupContext=I.length>1?KP(c):null,C=wl(c),O=Tl(I,c,0,[c.props,w]),h=mE(O);if(Co(),C(),(h||c.sp)&&!cl(c)&&VE(c),h){if(O.then(eE,eE),p)return O.then(X=>{tE(c,X)}).catch(X=>{gd(X,c,0)});c.asyncDep=O}else tE(c,O)}else hA(c)}function tE(c,p,T){at(p)?c.type.__ssrInlineRender?c.ssrRender=p:c.render=p:an(p)&&(c.setupState=jE(p)),hA(c)}function hA(c,p,T){const I=c.type;c.render||(c.render=I.render||hr);{const w=wl(c);Mo();try{nP(c)}finally{Co(),w()}}}const GP={get(c,p){return Vn(c,"get",""),c[p]}};function KP(c){const p=T=>{c.exposed=T||{}};return{attrs:new Proxy(c.attrs,GP),slots:c.slots,emit:c.emit,expose:p}}function $m(c){return c.exposed?c.exposeProxy||(c.exposeProxy=new Proxy(jE(C3(c.exposed)),{get(p,T){if(T in p)return p[T];if(T in fl)return fl[T](c)},has(p,T){return T in p||T in fl}})):c.proxy}function WP(c){return at(c)&&"__vccOpts"in c}const XP=(c,p)=>_3(c,p,yl),zP="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rm;const nE=typeof window<"u"&&window.trustedTypes;if(nE)try{Rm=nE.createPolicy("vue",{createHTML:c=>c})}catch{}const pA=Rm?c=>Rm.createHTML(c):c=>c,qP="http://www.w3.org/2000/svg",YP="http://www.w3.org/1998/Math/MathML",Kr=typeof document<"u"?document:null,iE=Kr&&Kr.createElement("template"),$P={insert:(c,p,T)=>{p.insertBefore(c,T||null)},remove:c=>{const p=c.parentNode;p&&p.removeChild(c)},createElement:(c,p,T,I)=>{const w=p==="svg"?Kr.createElementNS(qP,c):p==="mathml"?Kr.createElementNS(YP,c):T?Kr.createElement(c,{is:T}):Kr.createElement(c);return c==="select"&&I&&I.multiple!=null&&w.setAttribute("multiple",I.multiple),w},createText:c=>Kr.createTextNode(c),createComment:c=>Kr.createComment(c),setText:(c,p)=>{c.nodeValue=p},setElementText:(c,p)=>{c.textContent=p},parentNode:c=>c.parentNode,nextSibling:c=>c.nextSibling,querySelector:c=>Kr.querySelector(c),setScopeId(c,p){c.setAttribute(p,"")},insertStaticContent(c,p,T,I,w,C){const O=T?T.previousSibling:p.lastChild;if(w&&(w===C||w.nextSibling))for(;p.insertBefore(w.cloneNode(!0),T),!(w===C||!(w=w.nextSibling)););else{iE.innerHTML=pA(I==="svg"?`<svg>${c}</svg>`:I==="mathml"?`<math>${c}</math>`:c);const h=iE.content;if(I==="svg"||I==="mathml"){const X=h.firstChild;for(;X.firstChild;)h.appendChild(X.firstChild);h.removeChild(X)}p.insertBefore(h,T)}return[O?O.nextSibling:p.firstChild,T?T.previousSibling:p.lastChild]}},QP=Symbol("_vtc");function JP(c,p,T){const I=c[QP];I&&(p=(p?[p,...I]:[...I]).join(" ")),p==null?c.removeAttribute("class"):T?c.setAttribute("class",p):c.className=p}const rE=Symbol("_vod"),ZP=Symbol("_vsh"),eL=Symbol(""),tL=/(^|;)\s*display\s*:/;function nL(c,p,T){const I=c.style,w=xn(T);let C=!1;if(T&&!w){if(p)if(xn(p))for(const O of p.split(";")){const h=O.slice(0,O.indexOf(":")).trim();T[h]==null&&id(I,h,"")}else for(const O in p)T[O]==null&&id(I,O,"");for(const O in T)O==="display"&&(C=!0),id(I,O,T[O])}else if(w){if(p!==T){const O=I[eL];O&&(T+=";"+O),I.cssText=T,C=tL.test(T)}}else p&&c.removeAttribute("style");rE in c&&(c[rE]=C?I.display:"",c[ZP]&&(I.display="none"))}const oE=/\s*!important$/;function id(c,p,T){if(rt(T))T.forEach(I=>id(c,p,I));else if(T==null&&(T=""),p.startsWith("--"))c.setProperty(p,T);else{const I=iL(c,p);oE.test(T)?c.setProperty(ps(I),T.replace(oE,""),"important"):c[I]=T}}const sE=["Webkit","Moz","ms"],vm={};function iL(c,p){const T=vm[p];if(T)return T;let I=Io(p);if(I!=="filter"&&I in c)return vm[p]=I;I=vE(I);for(let w=0;w<sE.length;w++){const C=sE[w]+I;if(C in c)return vm[p]=C}return p}const uE="http://www.w3.org/1999/xlink";function aE(c,p,T,I,w,C=o3(p)){I&&p.startsWith("xlink:")?T==null?c.removeAttributeNS(uE,p.slice(6,p.length)):c.setAttributeNS(uE,p,T):T==null||C&&!TE(T)?c.removeAttribute(p):c.setAttribute(p,C?"":Cu(T)?String(T):T)}function lE(c,p,T,I,w){if(p==="innerHTML"||p==="textContent"){T!=null&&(c[p]=p==="innerHTML"?pA(T):T);return}const C=c.tagName;if(p==="value"&&C!=="PROGRESS"&&!C.includes("-")){const h=C==="OPTION"?c.getAttribute("value")||"":c.value,X=T==null?c.type==="checkbox"?"on":"":String(T);(h!==X||!("_value"in c))&&(c.value=X),T==null&&c.removeAttribute(p),c._value=T;return}let O=!1;if(T===""||T==null){const h=typeof c[p];h==="boolean"?T=TE(T):T==null&&h==="string"?(T="",O=!0):h==="number"&&(T=0,O=!0)}try{c[p]=T}catch{}O&&c.removeAttribute(w||p)}function rL(c,p,T,I){c.addEventListener(p,T,I)}function oL(c,p,T,I){c.removeEventListener(p,T,I)}const cE=Symbol("_vei");function sL(c,p,T,I,w=null){const C=c[cE]||(c[cE]={}),O=C[p];if(I&&O)O.value=I;else{const[h,X]=uL(p);if(I){const ee=C[p]=cL(I,w);rL(c,h,ee,X)}else O&&(oL(c,h,O,X),C[p]=void 0)}}const fE=/(?:Once|Passive|Capture)$/;function uL(c){let p;if(fE.test(c)){p={};let I;for(;I=c.match(fE);)c=c.slice(0,c.length-I[0].length),p[I[0].toLowerCase()]=!0}return[c[2]===":"?c.slice(3):ps(c.slice(2)),p]}let ym=0;const aL=Promise.resolve(),lL=()=>ym||(aL.then(()=>ym=0),ym=Date.now());function cL(c,p){const T=I=>{if(!I._vts)I._vts=Date.now();else if(I._vts<=T.attached)return;pr(fL(I,T.value),p,5,[I])};return T.value=c,T.attached=lL(),T}function fL(c,p){if(rt(p)){const T=c.stopImmediatePropagation;return c.stopImmediatePropagation=()=>{T.call(c),c._stopped=!0},p.map(I=>w=>!w._stopped&&I&&I(w))}else return p}const dE=c=>c.charCodeAt(0)===111&&c.charCodeAt(1)===110&&c.charCodeAt(2)>96&&c.charCodeAt(2)<123,dL=(c,p,T,I,w,C)=>{const O=w==="svg";p==="class"?JP(c,I,O):p==="style"?nL(c,T,I):fd(p)?Lm(p)||sL(c,p,T,I,C):(p[0]==="."?(p=p.slice(1),!0):p[0]==="^"?(p=p.slice(1),!1):hL(c,p,I,O))?(lE(c,p,I),!c.tagName.includes("-")&&(p==="value"||p==="checked"||p==="selected")&&aE(c,p,I,O,C,p!=="value")):c._isVueCE&&(/[A-Z]/.test(p)||!xn(I))?lE(c,Io(p),I,C,p):(p==="true-value"?c._trueValue=I:p==="false-value"&&(c._falseValue=I),aE(c,p,I,O))};function hL(c,p,T,I){if(I)return!!(p==="innerHTML"||p==="textContent"||p in c&&dE(p)&&at(T));if(p==="spellcheck"||p==="draggable"||p==="translate"||p==="form"||p==="list"&&c.tagName==="INPUT"||p==="type"&&c.tagName==="TEXTAREA")return!1;if(p==="width"||p==="height"){const w=c.tagName;if(w==="IMG"||w==="VIDEO"||w==="CANVAS"||w==="SOURCE")return!1}return dE(p)&&xn(T)?!1:p in c}const pL=ii({patchProp:dL},$P);let hE;function gL(){return hE||(hE=mP(pL))}const mL=(...c)=>{const p=gL().createApp(...c),{mount:T}=p;return p.mount=I=>{const w=yL(I);if(!w)return;const C=p._component;!at(C)&&!C.render&&!C.template&&(C.template=w.innerHTML),w.nodeType===1&&(w.textContent="");const O=T(w,!1,vL(w));return w instanceof Element&&(w.removeAttribute("v-cloak"),w.setAttribute("data-v-app","")),O},p};function vL(c){if(c instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&c instanceof MathMLElement)return"mathml"}function yL(c){return xn(c)?document.querySelector(c):c}var TL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wL(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Tm={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var pE;function SL(){return pE||(pE=1,function(c){(function(){var p=typeof window<"u"?window:TL,T={};(function(w,C,O){var h;function X(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var ee=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function Y(e){e=[typeof globalThis=="object"&&globalThis,e,typeof w=="object"&&w,typeof self=="object"&&self,typeof C=="object"&&C];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var ne=Y(this);function le(e,t){if(t)e:{var n=ne;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&ee(n,e,{configurable:!0,writable:!0,value:t})}}le("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(o||"")+"_"+r++,o)}function n(o,s){this.g=o,ee(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}),le("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=ne[t[n]];typeof i=="function"&&typeof i.prototype[e]!="function"&&ee(i.prototype,e,{configurable:!0,writable:!0,value:function(){return _e(X(this))}})}return e});function _e(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function v(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:X(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function Q(e){if(!(e instanceof Array)){e=v(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var Et=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},Je;if(typeof Object.setPrototypeOf=="function")Je=Object.setPrototypeOf;else{var Lt;e:{var bt={a:!0},qe={};try{qe.__proto__=bt,Lt=qe.a;break e}catch{}Lt=!1}Je=Lt?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Xt=Je;function At(e,t){if(e.prototype=Et(t.prototype),e.prototype.constructor=e,Xt)Xt(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Tk=t.prototype}function ln(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function We(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}ln.prototype.u=function(e){this.h=e};function cn(e,t){e.i={Ng:t,Zg:!0},e.g=e.m||e.j}ln.prototype.return=function(e){this.i={return:e},this.g=this.j};function A(e,t,n){return e.g=n,{value:t}}ln.prototype.s=function(e){this.g=e};function ie(e){e.g=0}function ge(e,t,n){e.m=t,n!=null&&(e.j=n)}function En(e,t){e.m=0,e.j=t||0}function Pe(e,t,n){e.g=t,e.m=n||0}function Se(e,t){return e.m=t||0,t=e.i.Ng,e.i=null,t}function Ct(e){e.A=[e.i],e.m=0,e.j=0}function lt(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Zg?e.g=e.m||e.j:n.s!=null&&e.j<n.s?(e.g=n.s,e.i=null):e.g=e.j:e.g=t}function jt(e){this.g=new ln,this.h=e}function gr(e,t){We(e.g);var n=e.g.l;return n?zr(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),gi(e))}function zr(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var o=r.value}catch(s){return e.g.l=null,cn(e.g,s),gi(e)}return e.g.l=null,i.call(e.g,o),gi(e)}function gi(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,cn(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Zg)throw t.Ng;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function _i(e){this.next=function(t){return We(e.g),e.g.l?t=zr(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=gi(e)),t},this.throw=function(t){return We(e.g),e.g.l?t=zr(e,e.g.l.throw,t,e.g.u):(cn(e.g,t),t=gi(e)),t},this.return=function(t){return gr(e,t)},this[Symbol.iterator]=function(){return this}}function Sl(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function o(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(o,r)}o(e.next())})}function U(e){return Sl(new _i(new jt(e)))}function tn(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}le("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.o=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function i(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var r=ne.setTimeout;n.prototype.i=function(s){r(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(f){a||(a=!0,l.call(u,f))}}var u=this,a=!1;return{resolve:s(this.F),reject:s(this.l)}},t.prototype.F=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.H(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.C(s):this.m(s)}},t.prototype.C=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.I(u,s):this.m(s)},t.prototype.l=function(s){this.u(2,s)},t.prototype.m=function(s){this.u(1,s)},t.prototype.u=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var s=this;r(function(){if(s.B()){var u=ne.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var s=ne.CustomEvent,u=ne.Event,a=ne.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=ne.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.A=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.H=function(s){var u=this.j();s.Sd(u.resolve,u.reject)},t.prototype.I=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(g,m){return typeof g=="function"?function(y){try{l(g(y))}catch(x){f(x)}}:m}var l,f,d=new t(function(g,m){l=g,f=m});return this.Sd(a(s,l),a(u,f)),d},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Sd=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?o.h(a):this.g.push(a),this.o=!0},t.resolve=i,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=v(s),f=l.next();!f.done;f=l.next())i(f.value).Sd(u,a)})},t.all=function(s){var u=v(s),a=u.next();return a.done?i([]):new t(function(l,f){function d(y){return function(x){g[y]=x,m--,m==0&&l(g)}}var g=[],m=0;do g.push(void 0),m++,i(a.value).Sd(d(g.length-1),f),a=u.next();while(!a.done)})},t});function An(e,t){return Object.prototype.hasOwnProperty.call(e,t)}le("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=v(a);for(var l;!(l=a.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function i(a){var l=typeof a;return l==="object"&&a!==null||l==="function"}function r(a){if(!An(a,s)){var l=new n;ee(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(f){return f instanceof n?f:(Object.isExtensible(f)&&r(f),l(f))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),f=new e([[a,2],[l,3]]);return f.get(a)!=2||f.get(l)!=3?!1:(f.delete(a),f.set(l,4),!f.has(a)&&f.get(l)==4)}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!i(a))throw Error("Invalid WeakMap key");if(r(a),!An(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return i(a)&&An(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return i(a)&&An(a,s)&&An(a[s],this.g)},t.prototype.delete=function(a){return i(a)&&An(a,s)&&An(a[s],this.g)?delete a[s][this.g]:!1},t}),le("Map",function(e){function t(){var u={};return u.Yb=u.next=u.head=u}function n(u,a){var l=u[1];return _e(function(){if(l){for(;l.head!=u[1];)l=l.Yb;for(;l.next!=l.head;)return l=l.next,{done:!1,value:a(l)};l=null}return{done:!0,value:void 0}})}function i(u,a){var l=a&&typeof a;l=="object"||l=="function"?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var f=u[0][l];if(f&&An(u[0],l))for(u=0;u<f.length;u++){var d=f[u];if(a!==a&&d.key!==d.key||a===d.key)return{id:l,list:f,index:u,entry:d}}return{id:l,list:f,index:-1,entry:void 0}}function r(u){if(this[0]={},this[1]=t(),this.size=0,u){u=v(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(v([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var l=a.entries(),f=l.next();return f.done||f.value[0]!=u||f.value[1]!="s"?!1:(f=l.next(),!(f.done||f.value[0].x!=4||f.value[1]!="t"||!l.next().done))}catch{return!1}}())return e;var o=new WeakMap;r.prototype.set=function(u,a){u=u===0?0:u;var l=i(this,u);return l.list||(l.list=this[0][l.id]=[]),l.entry?l.entry.value=a:(l.entry={next:this[1],Yb:this[1].Yb,head:this[1],key:u,value:a},l.list.push(l.entry),this[1].Yb.next=l.entry,this[1].Yb=l.entry,this.size++),this},r.prototype.delete=function(u){return u=i(this,u),u.entry&&u.list?(u.list.splice(u.index,1),u.list.length||delete this[0][u.id],u.entry.Yb.next=u.entry.next,u.entry.next.Yb=u.entry.Yb,u.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this[0]={},this[1]=this[1].Yb=t(),this.size=0},r.prototype.has=function(u){return!!i(this,u).entry},r.prototype.get=function(u){return(u=i(this,u).entry)&&u.value},r.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},r.prototype.keys=function(){return n(this,function(u){return u.key})},r.prototype.values=function(){return n(this,function(u){return u.value})},r.prototype.forEach=function(u,a){for(var l=this.entries(),f;!(f=l.next()).done;)f=f.value,u.call(a,f[1],f[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r}),le("Set",function(e){function t(n){if(this.g=new Map,n){n=v(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(v([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),o=r.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=r.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:r.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},t)});function qr(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}le("Array.prototype.values",function(e){return e||function(){return qr(this,function(t,n){return n})}}),le("Array.from",function(e){return e||function(t,n,i){n=n??function(u){return u};var r=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)r.push(n.call(i,o.value,s++))}else for(o=t.length,s=0;s<o;s++)r.push(n.call(i,t[s],s));return r}}),le("Array.prototype.keys",function(e){return e||function(){return qr(this,function(t){return t})}}),le("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),le("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,0>n&&(n=Math.max(n+r,0));n<r;n++){var o=i[n];if(o===t||Object.is(o,t))return!0}return!1}});function Yr(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}le("String.prototype.includes",function(e){return e||function(t,n){return Yr(this,t,"includes").indexOf(t,n||0)!==-1}}),le("String.fromCodePoint",function(e){return e||function(t){for(var n="",i=0;i<arguments.length;i++){var r=Number(arguments[i]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),n+=String.fromCharCode(r&1023|56320))}return n}});function ku(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{Xg:r,v:o}}return{Xg:-1,v:void 0}}le("Array.prototype.findIndex",function(e){return e||function(t,n){return ku(this,t,n).Xg}}),le("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=v(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),le("Array.prototype.find",function(e){return e||function(t,n){return ku(this,t,n).v}}),le("String.prototype.startsWith",function(e){return e||function(t,n){var i=Yr(this,t,"startsWith"),r=i.length,o=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var s=0;s<o&&n<r;)if(i[n++]!=t[s++])return!1;return s>=o}}),le("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)An(t,i)&&n.push([i,t[i]]);return n}});var ko=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)An(i,r)&&(e[r]=i[r])}return e};le("Object.assign",function(e){return e||ko}),le("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),le("Array.prototype.entries",function(e){return e||function(){return qr(this,function(t,n){return[t,n]})}}),le("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),le("String.prototype.repeat",function(e){return e||function(t){var n=Yr(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),le("Number.EPSILON",function(){return Math.pow(2,-52)}),le("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),le("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),le("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)An(t,i)&&n.push(t[i]);return n}}),le("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),le("String.prototype.endsWith",function(e){return e||function(t,n){var i=Yr(this,t,"endsWith");n===void 0&&(n=i.length),n=Math.max(0,Math.min(n|0,i.length));for(var r=t.length;0<r&&0<n;)if(i[--n]!=t[--r])return!1;return 0>=r}}),le("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var Qm=this||self;function R(e,t){e=e.split(".");var n=Qm;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function K(){}function Z(){}function ae(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}ae.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function oe(e){return e.h/(1-Math.pow(e.g,e.i))}function se(){this.h=new ae(2),this.j=new ae(5),this.g=0,this.i=128e3,this.l=16e3}se.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},se.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},se.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(oe(this.h),oe(this.j))};function me(){}function fe(){}function J(){}function ue(e){var t=tn.apply(1,arguments);$e.has(e)||($e.add(e),J.apply(me,Q(t)))}function Xe(){}function Ce(){}function He(){}var $e=new Set;w.console&&(new Map().set(1,function(){return console.error.apply(console,Q(tn.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,Q(tn.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,Q(tn.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,Q(tn.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,Q(tn.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,Q(tn.apply(0,arguments)))}),J=function(){return console.warn.apply(console,Q(tn.apply(0,arguments)))},fe=function(){console.error.apply(console,Q(tn.apply(0,arguments)))});function ot(){this.g=new Map}h=ot.prototype,h.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},h.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},h.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(i){return i!=t});this.g.set(e,n),n.length||this.g.delete(e)}},h.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},h.size=function(){return this.g.size},h.keys=function(){return Array.from(this.g.keys())};function ke(){this.g=new ot}h=ke.prototype,h.release=function(){this.Qa(),this.g=null},h.D=function(e,t,n,i){this.g&&(e=new wt(e,t,n,i),this.g.push(t,e))},h.ma=function(e,t,n,i){function r(s){o.Ja(e,t,r),n(s)}var o=this;this.D(e,t,r,i)},h.Ja=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=v(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Ja(),this.g.remove(t,r))}},h.Qa=function(){if(this.g){for(var e=[],t=v(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,Q(n.value));for(e=v(e),t=e.next();!t.done;t=e.next())t.value.Ja();this.g.g.clear()}},R("shaka.util.EventManager",ke),ke.prototype.removeAll=ke.prototype.Qa,ke.prototype.unlisten=ke.prototype.Ja,ke.prototype.listenOnce=ke.prototype.ma,ke.prototype.listen=ke.prototype.D,ke.prototype.release=ke.prototype.release;function wt(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=Gn(e,i),this.target.addEventListener(t,n,this.g)}wt.prototype.Ja=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Gn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),Pn(e)?t:t.capture||!1}function Pn(e){var t=mi;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch{t=!1}mi=t}return t||!1}var mi=void 0;R("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function ri(e,t){this.g=e,this.h=t}ri.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ye(e,t){var n=new ri(5,0),i=vi,r=i.g,o=n.h-r.h;(0<(n.g-r.g||o)?i.i:i.h)(i.g,n,e,t)}function xl(e,t,n,i){J([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Kn(e,t,n,i){fe([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var vi=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var El=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function _t(e){var t;e instanceof _t?(Al(this,e.Kb),this.Hc=e.Hc,Il(this,e.nb),Td(this,e.$c),this.ab=e.ab,Do(this,e.g.clone()),this.qc=e.qc):e&&(t=String(e).match(El))?(Al(this,t[1]||"",!0),this.Hc=gs(t[2]||""),Il(this,t[3]||"",!0),Td(this,t[4]),this.ab=gs(t[5]||"",!0),Do(this,t[6]||"",!0),this.qc=gs(t[7]||"")):this.g=new ms(null)}h=_t.prototype,h.Kb="",h.Hc="",h.nb="",h.$c=null,h.ab="",h.qc="",h.toString=function(){var e=[],t=this.Kb;if(t&&e.push(Du(t,Jm,!0),":"),t=this.nb){e.push("//");var n=this.Hc;n&&e.push(Du(n,Jm,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.$c,t!=null&&e.push(":",String(t))}return(t=this.ab)&&(this.nb&&t.charAt(0)!="/"&&e.push("/"),e.push(Du(t,t.charAt(0)=="/"?vA:mA,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.qc)&&e.push("#",Du(t,TA)),e.join("")},h.resolve=function(e){var t=this.clone();t.Kb==="data"&&(t=new _t);var n=!!e.Kb;n?Al(t,e.Kb):n=!!e.Hc,n?t.Hc=e.Hc:n=!!e.nb,n?Il(t,e.nb):n=e.$c!=null;var i=e.ab;if(n)Td(t,e.$c);else if(n=!!e.ab){if(i.charAt(0)!="/")if(this.nb&&!this.ab)i="/"+i;else{var r=t.ab.lastIndexOf("/");r!=-1&&(i=t.ab.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],s=0;s<i.length;){var u=i[s++];u=="."?r&&s==i.length&&o.push(""):u==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),r&&s==i.length&&o.push("")):(o.push(u),r=!0)}i=o.join("/")}}return n?t.ab=i:n=e.g.toString()!=="",n?Do(t,e.g.clone()):n=!!e.qc,n&&(t.qc=e.qc),t},h.clone=function(){return new _t(this)};function Al(e,t,n){e.Kb=n?gs(t,!0):t,e.Kb&&(e.Kb=e.Kb.replace(/:$/,""))}function Il(e,t,n){e.nb=n?gs(t,!0):t}function Td(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.$c=t}else e.$c=null}function Do(e,t,n){t instanceof ms?e.g=t:(n||(t=Du(t,yA)),e.g=new ms(t))}function gs(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Du(e,t,n){return e!=null?(e=encodeURI(e).replace(t,gA),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gA(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Jm=/[#\/\?@]/g,mA=/[#\?:]/g,vA=/[#\?]/g,yA=/[#\?@]/g,TA=/#/g;function ms(e){this.g=e||null}function Ml(e){if(!e.Va&&(e.Va=new Map,e.kd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),r=r||"",e.add(o,decodeURIComponent(r.replace(/\+/g," ")))}}h=ms.prototype,h.Va=null,h.kd=null;function Zm(e){return Ml(e),e.kd}h.add=function(e,t){Ml(this),this.g=null;var n=this.Va.has(e)?this.Va.get(e):null;return n||this.Va.set(e,n=[]),n.push(t),this.kd++,this},h.set=function(e,t){return Ml(this),this.g=null,this.Va.has(e)?this.Va.set(e,[t]):this.add(e,t),this},h.get=function(e){return Ml(this),this.Va.get(e)||[]},h.toString=function(){if(this.g)return this.g;if(!this.Va||!this.Va.size)return"";for(var e=[],t=v(this.Va.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.Va.get(i);for(var r=0;r<i.length;r++){var o=n;i[r]!==""&&(o+="="+encodeURIComponent(i[r])),e.push(o)}}return this.g=e.join("&")},h.clone=function(){var e=new ms;if(e.g=this.g,this.Va){for(var t=new Map,n=v(this.Va),i=n.next();!i.done;i=n.next()){var r=v(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.Va=t,e.kd=this.kd}return e};function vs(){}function mr(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=De(e);t=De(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function yi(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function De(e,t,n){return n=n===void 0?1/0:n,wd(e,t===void 0?0:t,n,Uint8Array)}function ev(e,t,n){return n=n===void 0?1/0:n,wd(e,t===void 0?0:t,n,Uint16Array)}function Ln(e,t,n){return n=n===void 0?1/0:n,wd(e,t===void 0?0:t,n,DataView)}function wd(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,o=1;"BYTES_PER_ELEMENT"in i&&(o=i.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,s))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),s))-e)}R("shaka.util.BufferUtils",vs),vs.toDataView=Ln,vs.toUint16=ev,vs.toUint8=De,vs.toArrayBuffer=yi,vs.equal=mr;function _(e,t,n){var i=tn.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}_.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},R("shaka.util.Error",_),_.Severity={RECOVERABLE:1,CRITICAL:2},_.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},_.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function Ru(e){this.h=e,this.g=void 0}Ru.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function tv(e,t){return e.length&&t.length&&e!==t?0<Sd(e,t).length:!0}function Sd(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=v(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.keySystem==o.keySystem){r=new Map;for(var s=v((i.initData||[]).concat(o.initData||[])),u=s.next();!u.done;u=s.next())u=u.value,r.set(u.keyId,u);r=Array.from(r.values()),s=i.keyIds&&o.keyIds?new Set([].concat(Q(i.keyIds),Q(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r,keyIds:s});break}}return n}function xd(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Cl(e){return e?!!e.match(/^com\.apple\.fps/):!1}var kl=new Ru(function(){return yi(new Uint8Array([0]))}),ys=new Map;function Pu(e){this.h=e,this.g=null}Pu.prototype.da=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){w.clearTimeout(i),n=!1},i=w.setTimeout(function(){n&&t.h()},1e3*e),this},Pu.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Be(e){this.h=e,this.g=null}Be.prototype.sb=function(){return this.stop(),this.h(),this},Be.prototype.da=function(e){var t=this;return this.stop(),this.g=new Pu(function(){t.h()}).da(e),this},Be.prototype.ua=function(e){var t=this;return this.stop(),this.g=new Pu(function(){t.g.da(e),t.h()}).da(e),this},Be.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},R("shaka.util.Timer",Be),Be.prototype.stop=Be.prototype.stop,Be.prototype.tickEvery=Be.prototype.ua,Be.prototype.tickAfter=Be.prototype.da,Be.prototype.tickNow=Be.prototype.sb;function er(){var e=w.ManagedMediaSource||w.MediaSource;return!!(e&&e.isTypeSupported)}function Lu(e){return rv().canPlayType(e)!=""}function _u(){return!!navigator.userAgent.match(/Edge?\//)}function Gi(){return Ft("Xbox One")}function Ki(){return Ft("Tizen")}function vr(){return Ft("Tizen 3")}function yr(){return Ft("Web0S")}function Dl(){return yr()&&nv()===38}function Ni(){return Ft("CrKey")&&!Ft("VIZIO SmartCast")}function nv(){if(!Ft("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function sn(){return ws()&&((navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="macos":navigator.platform?navigator.platform.toLowerCase().includes("mac"):!1)||(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?!0:ws()&&1<navigator.maxTouchPoints))}function Ts(){return Ft("PlayStation 5")}function Wi(){return Ft("PlayStation 4")}function Rl(){return Ft("Hisense")||Ft("VIDAA")}function iv(){if(!sn()&&(!ws()||sn()))return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Ed(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}function $r(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":Ft("Android")}function Ad(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="fuchsia":Ft("Fuchsia")}function Id(){return!!(Ki()||yr()||Gi()||Wi()||Ts()||Ni()||Rl()||Ft("VIZIO SmartCast")||ws()&&!sn())}function Ft(e){return(navigator.userAgent||"").includes(e)}function ws(){return(navigator.vendor||"").includes("Apple")}function rv(){return Ss||(Md||(Md=new Be(function(){Ss=null})),(Ss=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ss=document.createElement("video")),Md.da(1),Ss)}function wA(){if(vr()||Ft("Tizen 2")||Dl()||Wi()||Ts())return!1;var e=iv();return!(ws()&&!sn()&&e!=null&&15>e)}function ov(){var e,t,n,i,r,o,s,u,a,l,f,d,g,m,y,x,S;return U(function(E){switch(E.g){case 1:if(e={width:1/0,height:1/0},Ni()){if(m=w.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,ge(E,14),!(y=m)){E.s(16);break}return A(E,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),17)}if(Ki()){t=w.devicePixelRatio,e.width=1920<w.screen.width*t?3840:1920,e.height=1080<w.screen.height*t?2160:1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(n=webapis.systeminfo.getMaxVideoResolution(),e.width=n.width,e.height=n.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{J("Tizen: Error detecting screen size, default screen size 1920x1080.")}E.s(3);break}if(yr()){try{i=JSON.parse(w.PalmSystem.deviceInfo),e.width=Math.max(1920,i.screenWidth),e.height=Math.max(1080,i.screenHeight)}catch{J("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}E.s(3);break}if(Rl()){if(r=null,w.Hisense_Get4KSupportState)try{r=w.Hisense_Get4KSupportState()}catch{}r==null&&(r=Ft("UHD")),r?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),E.s(3);break}if(!Wi()&&!Ts()){o=void 0;try{o=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}if(o){e.width=1920,e.height=1080;try{s=new o.Media.Protection.ProtectionCapabilities,u=o.Media.Protection.ProtectionCapabilityResult,a=null;do a=s.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(a===u.maybe);a===u.probably&&(e.width=3840,e.height=2160)}catch{J("Xbox: Error detecting screen size, default screen size 1920x1080.")}}else Gi()&&(e.width=1920,e.height=1080,J("Xbox: Error detecting screen size, default screen size 1920x1080."));E.s(3);break}return l=!1,ge(E,8),A(E,w.msdk.device.getDisplayInfo(),10);case 10:f=E.h,l=f.resolution==="4K",Pe(E,9);break;case 8:return Se(E),ge(E,11),A(E,w.msdk.device.getDisplayInfoImmediate(),13);case 13:d=E.h,l=d.resolution==="4K",Pe(E,9);break;case 11:g=Se(E),J("PlayStation: Failed to get the display info:",g);case 9:l?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),E.s(3);break;case 17:y=E.h;case 16:if(y){e.width=3840,e.height=2160,E.s(18);break}if(!(x=m)){E.s(19);break}return A(E,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),20);case 20:x=E.h;case 19:x&&(e.width=1920,e.height=1080);case 18:Pe(E,3);break;case 14:S=Se(E),fe("Failed to check canDisplayType:",S);case 3:return E.return(e)}})}function sv(e){return w.matchMedia!==void 0&&w.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"}var Md=null,Ss=null;function Ro(){}function St(e){if(!e)return"";if(e=De(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),w.TextDecoder&&!Wi())return e=new TextDecoder().decode(e),e.includes("�")&&fe('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if((e[n]&128)==0?i=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),65535>=i)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function Qr(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new _(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ln(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return kd(i)}function tr(e){function t(i){return n.byteLength<=i||9<=n[i]&&126>=n[i]}if(!e)return"";var n=De(e);if(n[0]==239&&n[1]==187&&n[2]==191)return St(n);if(n[0]==254&&n[1]==255)return Qr(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Qr(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Qr(e,!1);if(n[1]==0&&n[3]==0)return Qr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return St(e);throw new _(2,2,2003)}function ji(e){if(w.TextEncoder&&!Wi()){var t=new TextEncoder;return yi(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return yi(t)}function Cd(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}function kd(e){return uv.value()(e)}function _n(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return r[1]=="#"?(r=r[2]=="x"||r[2]=="X"?parseInt(r.substring(3),16):parseInt(r.substring(2),10),0<=r&&1114111>=r?String.fromCodePoint(r):""):t[r]||"'"}):e||""}R("shaka.util.StringUtils",Ro),Ro.resetFromCharCode=function(){uv.g=void 0},Ro.toUTF16=Cd,Ro.toUTF8=ji,Ro.fromBytesAutoDetect=tr,Ro.fromUTF16=Qr,Ro.fromUTF8=St;var uv=new Ru(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch{return!1}}for(var t={jc:65536};0<t.jc;t={jc:t.jc},t.jc/=2)if(e(t.jc))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.jc)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.jc));return r}}(t);return null});function fn(){}function Pl(e){return e=kd(De(e)),btoa(e)}function Tr(e,t){return t=t??!0,e=Pl(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ti(e){e=w.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Po(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=w.parseInt(e.substr(2*i,2),16);return n}function wr(e){var t=De(e);e="",t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function Nt(){for(var e=tn.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&r.BYTES_PER_ELEMENT===1?t.set(r,n):t.set(De(r),n),n+=r.byteLength}return t}R("shaka.util.Uint8ArrayUtils",fn),fn.concat=Nt,fn.toHex=wr,fn.fromHex=Po,fn.fromBase64=Ti,fn.toBase64=Tr,fn.toStandardBase64=Pl;function Jt(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var i=new _t(e[0]);return t=new _t(t[0]),t=i.resolve(t),n&&Do(t,n),[t.toString()]}t=t.map(function(u){return new _t(u)}),i=[],e=v(e);for(var r=e.next();!r.done;r=e.next()){r=new _t(r.value);for(var o=v(t),s=o.next();!s.done;s=o.next())s=r.resolve(s.value),n&&Do(s,n),i.push(s.toString())}return i}function Jr(e,t,n,i){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},i&&(e.keySystemUris=new Set([i])),e}function av(e,t){t=t===void 0?"cenc":t;var n=[],i=[],r=[];e.forEach(function(s,u){var a=u;a.length!=22&&(a=Tr(Po(u),!1));var l=s;l.length!=22&&(l=Tr(Po(s),!1)),s={kty:"oct",kid:a,k:l},n.push(s),i.push(s.kid),r.push(u)}),e=JSON.stringify({keys:n});var o=JSON.stringify({kids:i});return o=[{initData:De(ji(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+w.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(r)}}function xs(e,t){if(t.length==1)return t[0];if(e=Nn(e,t),e!=null)return e;throw new _(2,4,4025,t)}function Nn(e,t){var n=lv.get(e);n=v(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;for(var r=v(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.test(o.trim()))return o.trim()}return e==be?"":null}function Dd(e,t){var n=[];e=lv.get(e),e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=v(t),o=r.next();!o.done;o=r.next())o=o.value,i.test(o.trim())&&n.push(o.trim())}return n}var be="text",zt={la:"video",V:"audio",za:be,$e:"image",Mj:"application"},SA=1/15,lv=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function Nu(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.o=i,this.j=!1;e:{if(typeof libDPIModule>"u"&&J("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ye("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{J("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(J("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||J(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Rd(e,t,n,i){i.type!=="video"||e.o&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.o)}function cv(e){e.g&&e.i.classList.add("shaka-hidden")}Nu.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function fv(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}R("shaka.lcevc.Dec",Nu),Nu.prototype.release=Nu.prototype.release;function nn(e){if(Pd.has(e))return Pd.get(e);var t=w.ManagedMediaSource||w.MediaSource;return t?(t=t.isTypeSupported(e),Pd.set(e,t),t):!1}function Lo(){var e=w.ManagedSourceBuffer||w.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType}function dv(){var e=w.ManagedMediaSource||w.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var Pd=new Map;function ju(){}ju.prototype.extract=function(){},ju.prototype.decode=function(){return[]},ju.prototype.clear=function(){},ju.prototype.getStreams=function(){return[]};function Ld(){}Ld.prototype.init=function(){},Ld.prototype.parse=function(){return[]};function Ou(){}Ou.prototype.init=function(){},Ou.prototype.i=function(){},Ou.prototype.g=function(){},Ou.prototype.j=function(){},R("shaka.media.IClosedCaptionParser",Ou);function oi(e){this.l=new Ld,(e=hv(e.toLowerCase()))&&(this.l=e()),this.h=new ju,(e=Es)&&(this.h=e())}oi.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},oi.prototype.i=function(e){e=this.l.parse(e),e=v(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=De(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},oi.prototype.g=function(){this.h.clear()},oi.prototype.j=function(){return this.h.getStreams()};function _d(e,t){Nd.set(e,t)}function hv(e){return Nd.get(e)}R("shaka.media.ClosedCaptionParser",oi),oi.findDecoder=function(){return Es},oi.unregisterDecoder=function(){Es=null},oi.registerDecoder=function(e){Es=e},oi.findParser=hv,oi.unregisterParser=function(e){Nd.delete(e)},oi.registerParser=_d;var Nd=new Map,Es=null;function _o(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Wn,this.scroll=pv}R("shaka.text.CueRegion",_o);var Wn=1;_o.units={PX:0,PERCENTAGE:Wn,LINES:2};var pv="";_o.scrollMode={NONE:pv,UP:"up"};function gv(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Oi(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function jd(e,t,n){if(n||(n=gv),e.length!=t.length)return!1;t=t.slice(),e=v(e);for(var i=e.next(),r={};!i.done;r={ah:void 0},i=e.next()){if(r.ah=i.value,i=t.findIndex(function(o){return function(s){return n(o.ah,s)}}(r)),i==-1)return!1;t[i]=t[t.length-1],t.pop()}return t.length==0}function As(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=gv),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Is(e){this.h=e||"",this.g=0}function Ms(e){No(e,/[ \t]+/gm)}function No(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function jo(e){return e.g==e.h.length?null:(e=No(e,/[^ \t\n]*/gm))?e[0]:null}function Uu(e){if(e=No(e,xA),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Cs(e){return e?Uu(new Is(e)):null}var xA=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Xi(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||ArrayBuffer.isView(i))return i;if(n.has(i))return null;var r=i.constructor==Array;if(i.constructor!=Object&&!r)return null;n.add(i);var o=r?[]:{},s;for(s in i)o[s]=t(i[s]);return r&&(o.length=i.length),o}}var n=new WeakSet;return t(e)}function Oo(e){var t={},n;for(n in e)t[n]=e[n];return t}function Od(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];r!==void 0&&(r=Od(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=v(n),i=n.next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),r=e[r],r!==void 0&&(r=Od(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}function bu(e,t){var n=n===void 0?!1:n;return e=tr(e),Uo(e,t,n)}function Uo(e,t,n){return e=EA(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(i){return t.split(",").includes(i.tagName)}))?e:null}function Ud(e){return Fd.has(e)?Fd.get(e):""}function EA(e,t){function n(o,s){s=s===void 0?!1:s;for(var u=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){s=r+2,r=e.indexOf(">",r),s=e.substring(s,r);var a=s.indexOf(o);if(a==-1){var l=o.indexOf(".");0<l&&(a=s.indexOf(o.substring(0,l)))}if(a==-1)throw o=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(o.length-1)+`
Column: `+(o[o.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){a=e.indexOf("]]>",r),a==-1?(u.push(e.substr(r+9)),r=e.length):(u.push(e.substring(r+9,a)),r=a+3);continue}r++;continue}e:{l=s,r++;var f=i(),d={};for(a=[];e.charCodeAt(r)!==62&&e[r];){var g=e.charCodeAt(r);if(64<g&&91>g||96<g&&123>g){g=i();for(var m=e.charCodeAt(r);m&&m!==39&&m!==34&&!(64<m&&91>m||96<m&&123>m)&&m!==62;)r++,m=e.charCodeAt(r);var y=r+1;if(r=e.indexOf(e[r],y),y=e.slice(y,r),m===39||m===34){if(r===-1){if(l={tagName:f,attributes:d,children:a,parent:null},t)for(f=0;f<a.length;f++)typeof a[f]!="string"&&(a[f].parent=l);a=l;break e}}else y=null,r--;if(g.startsWith("xmlns:")){m=y;var x=g.split(":")[1];Fd.set(m,x),Bd.set(x,m)}f==="tt"&&g==="xml:space"&&y==="preserve"&&(l=!0),d[g]=y}r++}for(e.charCodeAt(r-1)!==47?(r++,a=n(f,l)):r++,l={tagName:f,attributes:d,children:a,parent:null},f=a.length,d=0;d<f;d++)g=a[d],typeof g!="string"?t&&(g.parent=l):d==f-1&&g==`
`&&a.pop();a=l}if(u.push(a),typeof a=="string")break;a.tagName[0]==="?"&&a.children&&(u.push.apply(u,Q(a.children)),a.children=[])}else a=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),a=e.slice(a,r+1),s?0<a.length&&u.push(a):(u.length&&a.length==1&&a[0]==`
`||0<a.trim().length)&&u.push(a),r++;return u}function i(){for(var o=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(o,r)}var r=0;return n("")}function Ll(e){return typeof e=="string"}function mv(e){var t=[];if(!e.children)return[];e=v(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function nt(e,t){var n=[];if(!e.children)return[];e=v(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function Gt(e){return typeof e=="string"?_n(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:_n(e))}function si(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Gt(e))&&(e=e.trim()),e):null}function zi(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=v(e.children);for(var i=e.next();!i.done;i=e.next())zi(i.value,t,n)}return n}function Bt(e,t){return e=nt(e,t),e.length!=1?null:e[0]}function Ui(e,t,n){return e=vv(e,t,n),e.length!=1?null:e[0]}function Le(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.attributes[t],e!=null&&(r=n(e)),r??i}function Sr(e,t,n){return t=Ud(t),e.attributes[t+":"+n]||null}function vv(e,t,n){var i=Ud(t);if(t=[],e.children)for(n=i?i+":"+n:n,e=v(e.children),i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function nr(e,t,n){t=v(t);for(var i=t.next();!i.done;i=t.next())if(i=Sr(e,i.value,n))return i;return null}function Zr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function ir(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function _l(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function In(e){return e=Number(e),e%1===0?e:null}function xr(e){return e=Number(e),e%1===0&&0<e?e:null}function yn(e){return e=Number(e),e%1===0&&0<=e?e:null}function Fu(e){return e=Number(e),isNaN(e)?null:e}function Nl(e){return e?e.toLowerCase()==="true":!1}function AA(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function jl(e){var t=[];e=_n(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=v(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),o=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),u=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:u?Number(u[1])-1:null,ac:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].ac=n.slice(1))}return t}function yv(e,t){var n=jl(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,n==null&&(i.t!==null&&(n=Tv(e,"t",i.t)),i.n!==null&&(n=Tv(e,"n",i.n))),n===null?n=r==="prepend"?0:e.length:r==="prepend"?--n:r==="after"&&++n,r=t.tagName,(i=i.ac)&&e[n]?wv(e[n],r,i,si(t)||""):(r!=="remove"&&r!=="replace"||e.splice(n,1),r!=="add"&&r!=="replace"||e.splice.apply(e,[n,0].concat(Q(t.children))))}}function Tv(e,t,n){var i=0;e=v(e);for(var r=e.next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function wv(e,t,n,i){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=i)}function Sv(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=Bd.has(t)?Bd.get(t):""),t=document.createElementNS(t,e.tagName);for(var i in e.attributes)t.setAttribute(i,e.attributes[i]);for(e=v(e.children),i=e.next();!i.done;i=e.next())i=i.value,n=void 0,typeof i=="string"?n=new Text(i):n=Sv(i),t.appendChild(n);return t}function bd(e){if(!e)return null;var t={tagName:e.tagName,attributes:Oo(e.attributes),children:[],parent:null};e=v(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=bd(n),n.parent=t),t.children.push(n);return t}var Fd=new Map,Bd=new Map;function mt(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new _o,this.position=null,this.positionAlign=bl,this.size=0,this.textAlign=rr,this.direction=Hu,this.writingMode=bo,this.lineInterpretation=Gu,this.line=null,this.lineHeight="",this.lineAlign=Fo,this.displayAlign=Vu,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=kv,this.fontStyle=Gd,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={oc:32,rows:15}}function xv(e,t){return e=new mt(e,t,""),e.lineBreak=!0,e}mt.prototype.clone=function(){var e=new mt(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Ol(e,t){if(e.payload!=t.payload||!(.001>Math.abs(e.startTime-t.startTime)&&.001>Math.abs(e.endTime-t.endTime)))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!As(e.nestedCues,t.nestedCues,Ol))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!As(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function Ul(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Ev(t);var i=n;n=[];for(var r=-1,o=0;o<i.length;o++)i[o]==="<"?r=o+1:i[o]===">"&&0<r&&(r=i.substr(r,o-r),r.match(MA)&&n.push(r),r=-1);for(n=v(n),o=n.next();!o.done;o=n.next())o=o.value,i=i.replace("<"+o+">",'<div time="'+o+'">'),i+="</div>";e:{o=i,r=[];var s=-1;n="",i=!1;for(var u=0;u<o.length;u++)if(o[u]==="/"){var a=o.indexOf(">",u);if(a===-1){n=o;break e}if((a=o.substring(u+1,a))&&a=="v"){i=!0;var l=null;if(r.length&&(l=r[r.length-1]),l){if(l===a)n+="/"+a+">";else{if(!l.startsWith("v")){n+=o[u];continue}n+="/"+l+">"}u+=a.length+1}else n+=o[u]}else n+=o[u]}else o[u]==="<"?(s=u+1,o[s]!="v"&&(s=-1)):o[u]===">"&&0<s&&(r.push(o.substr(s,u-s)),s=-1),n+=o[u];for(o=v(r),r=o.next();!r.done;r=o.next())r=r.value,s=r.replace(" ",".voice-"),n=n.replace("<"+r+">","<"+s+">"),n=n.replace("</"+r+">","</"+s+">"),i||(n+="</"+s+">")}n=IA(n),e.payload="";try{var f=Uo("<span>"+n+"</span>","span")}catch{}if(f)if(f=f.children,f.length!=1||f[0].tagName)for(f=v(f),n=f.next();!n.done;n=f.next())Av(n.value,e,t);else e.payload=_n(n);else e.payload=_n(n)}else e.payload=_n(n)}function Ev(e){for(var t=v(Object.entries(Mv)),n=t.next();!n.done;n=t.next()){var i=v(n.value);n=i.next().value,i=i.next().value;var r=new mt(0,0,"");r.color=i,e.set("."+n,r)}for(t=v(Object.entries(Cv)),n=t.next();!n.done;n=t.next())i=v(n.value),n=i.next().value,i=i.next().value,r=new mt(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function IA(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||""}):e||""}function Av(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new _o,i.position=null,i.size=0,i.textAlign=rr,e.tagName)for(var r=v(e.tagName.split(/(?=[ .])+/g)),o=r.next();!o.done;o=r.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(u=i,s=n.get(s))&&(u.backgroundColor=Bu(s.backgroundColor,u.backgroundColor),u.color=Bu(s.color,u.color),u.fontFamily=Bu(s.fontFamily,u.fontFamily),u.fontSize=Bu(s.fontSize,u.fontSize),u.textShadow=Bu(s.textShadow,u.textShadow),u.fontWeight=s.fontWeight,u.fontStyle=s.fontStyle,u.opacity=s.opacity,u.rubyTag=s.rubyTag,u.textCombineUpright=s.textCombineUpright,u.wrapLine=s.wrapLine),o){case"br":i=xv(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=ks;break;case"i":i.fontStyle=Ds;break;case"u":i.textDecoration.push(Er);break;case"font":(o=e.attributes.color)&&(i.color=o);break;case"div":if(o=e.attributes.time,!o)break;(o=Cs(o))&&(i.startTime=o);break;case"ruby":case"rp":case"rt":i.rubyTag=o}}if(r=e.children,Ll(e)||r.length==1&&Ll(r[0]))for(n=Gt(e).split(`
`),e=!0,n=v(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=xv(i.startTime,i.endTime),t.nestedCues.push(e)),0<r.length&&(e=i.clone(),e.payload=_n(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=v(r),e=t.next();!e.done;e=t.next())Av(e.value,i,n)}function Bu(e,t){return e&&0<e.length?e:t}R("shaka.text.Cue",mt),mt.parseCuePayload=Ul,mt.equal=Ol,mt.prototype.clone=mt.prototype.clone;var bl="auto";mt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:bl};var rr="center",Vd={LEFT:"left",RIGHT:"right",CENTER:rr,START:"start",END:"end"};mt.textAlign=Vd;var Vu="after",Iv={BEFORE:"before",CENTER:"center",AFTER:Vu};mt.displayAlign=Iv;var Hu="ltr";mt.direction={HORIZONTAL_LEFT_TO_RIGHT:Hu,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var bo="horizontal-tb";mt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:bo,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Gu=0;mt.lineInterpretation={LINE_NUMBER:Gu,PERCENTAGE:1};var Fo="start",Hd={CENTER:"center",START:Fo,END:"end"};mt.lineAlign=Hd;var Mv={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};mt.defaultTextColor=Mv;var Cv={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};mt.defaultTextBackgroundColor=Cv;var kv=400,ks=700;mt.fontWeight={NORMAL:kv,BOLD:ks};var Gd="normal",Ds="italic",Dv={NORMAL:Gd,ITALIC:Ds,OBLIQUE:"oblique"};mt.fontStyle=Dv;var Er="underline";mt.textDecoration={UNDERLINE:Er,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var MA=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function eo(){}eo.prototype.destroy=function(){};function Ar(e,t,n){Kd.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,se:t})}function to(e,t){for(var n=e.toLowerCase().split(";")[0],i=v([Rv,Xd,Wd,no]),r=i.next();!r.done;r=i.next())if(r=Kd.get(n+"-"+r.value)){var o=r.se(),s=o.isSupported(e,t);if(o.destroy(),s)return r.se}return null}R("shaka.transmuxer.TransmuxerEngine",eo),eo.findTransmuxer=to,eo.unregisterTransmuxer=function(e,t){Kd.delete(e.toLowerCase().split(";")[0]+"-"+t)},eo.registerTransmuxer=Ar,eo.prototype.destroy=eo.prototype.destroy;var Kd=new Map,no=1,Wd=2,Xd=3,Rv=4;eo.PluginPriority={FALLBACK:no,PREFERRED_SECONDARY:Wd,PREFERRED:Xd,APPLICATION:Rv};function zd(){}function Ot(e,t){var n=e;return t&&!Ir.includes(e)&&(n+='; codecs="'+t+'"'),n}function Rs(e,t){return t&&(e+='; codecs="'+t+'"'),e}function qd(e,t,n){var i=Ot(e,t);return t=Rs(e,t),to(t)?(e=to(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function CA(e,t,n){var i=[t];return kA.forEach(function(r,o){var s=e[o];o=="codecs"?Ir.includes(e.mimeType)||i.push('codecs="'+n+'"'):s&&i.push(r+'="'+s+'"')}),e.hdr=="PQ"&&i.push('eotf="smpte2084"'),i.join(";")}function Fl(e){return e.split(";")[0].split("/")[1]}function dn(e){var t=Pv(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function io(e){var t=[];e=v(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Pv(n.value),t.push(n[0]);return t.sort().join(",")}function Xn(e){return e.split(";")[0]}function zn(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Yd(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Pv(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}R("shaka.util.MimeUtils",zd),zd.getFullTypeWithAllCodecs=Rs,zd.getFullType=Ot;var kA=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Ir=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Mr(e){this.i=null,this.j=e,this.B=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function un(e,t){Ku.set(e,t)}function Bl(e){return Ku.get(e)}function Ps(e){return Ku.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!Es:!1}Mr.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function DA(e,t,n,i,r){var o,s,u,a,l,f,d;return U(function(g){if(g.g==1)return A(g,Promise.resolve(),2);if(!e.i||!e.j)return g.return();if(n==null||i==null)return e.i.parseInit(De(t)),g.return();for(o=e.B?n:e.u,s={periodStart:e.u,segmentStart:n,segmentEnd:i,vttOffset:o},u=e.i.parseMedia(De(t),s,r,[]),a=v(u),l=a.next();!l.done;l=a.next())f=l.value,e.A(f,r||null,s);d=u.filter(function(m){return m.startTime>=e.l&&m.startTime<e.m}),e.j.append(d),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),ie(g)})}Mr.prototype.remove=function(e,t){var n=this;return U(function(i){if(i.g==1)return A(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),ie(i)})};function RA(e,t,n){e.l=t,e.m=n}function Lv(e,t,n){if(e.C=t,t=e.o.get(t))for(var i=v(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(o){return o.endTime<=n}))&&e.j.append(r)}function _v(e,t,n){t.startTime+=n,t.endTime+=n,t=v(t.nestedCues);for(var i=t.next();!i.done;i=t.next())_v(e,i.value,n)}function PA(e,t,n,i,r){var o=n+" "+i,s=new Map;t=v(t);for(var u=t.next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),_v(e,a,r),a.startTime>=e.l&&a.startTime<e.m&&(s.get(u).get(o).push(a),u==e.C&&e.j.append([a]))}for(r=v(s.keys()),o=r.next();!o.done;o=r.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=v(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.o.get(o).set(u,a);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}R("shaka.text.TextEngine",Mr),Mr.prototype.destroy=Mr.prototype.destroy,Mr.findParser=Bl,Mr.unregisterParser=function(e){Ku.delete(e)},Mr.registerParser=un;var Ku=new Map;function LA(e,t){return e.concat(t)}function _A(){}function ro(e){return e!=null}function Wu(e,t){return Promise.race([t,new Promise(function(n,i){new Be(i).da(e)})])}function bi(){}function Ls(e,t){return e=ct(e),t=ct(t),e.split("-")[0]==t.split("-")[0]}function Xu(e,t){return e=ct(e),t=ct(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function $d(e,t){return e=ct(e),t=ct(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function ct(e){e=v(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=v(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Nv.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Bo(e,t){return e=ct(e),t=ct(t),t==e?4:Xu(t,e)?3:$d(t,e)?2:Xu(e,t)?1:0}function Qd(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Nv.get(e)||e}function Jd(e){return e.language?ct(e.language):e.audio&&e.audio.language?ct(e.audio.language):e.video&&e.video.language?ct(e.video.language):"und"}function Vl(e,t){e=ct(e);var n=new Set;t=v(t);for(var i=t.next();!i.done;i=t.next())n.add(ct(i.value));for(t=v(n),i=t.next();!i.done;i=t.next())if(i=i.value,i==e)return i;for(t=v(n),i=t.next();!i.done;i=t.next())if(i=i.value,Xu(i,e))return i;for(t=v(n),i=t.next();!i.done;i=t.next())if(i=i.value,$d(i,e))return i;for(n=v(n),t=n.next();!t.done;t=n.next())if(t=t.value,Xu(e,t))return t;return null}R("shaka.util.LanguageUtils",bi),bi.findClosestLocale=Vl,bi.getLocaleForVariant=Jd,bi.getLocaleForText=function(e){return ct(e.language||"und")},bi.getBase=Qd,bi.relatedness=Bo,bi.areSiblings=function(e,t){var n=Qd(e),i=Qd(t);return e!=n&&t!=i&&n==i},bi.normalize=ct,bi.isSiblingOf=$d,bi.isParentOf=Xu,bi.areLanguageCompatible=Ls,bi.areLocaleCompatible=function(e,t){return e=ct(e),t=ct(t),e==t};var Nv=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function jv(){}function Ov(e,t,n,i,r){function o(E){var M=String(E.width||"")+String(E.height||"")+String(Math.round(E.frameRate||0))+(E.hdr||"")+E.fastSwitching;return E.dependencyStream&&(M+=E.dependencyStream.baseOriginalId||""),M}function s(E){var M=E.language+(E.channelsCount||0)+(E.audioSamplingRate||0)+E.roles.join(",")+E.label+E.groupId+E.fastSwitching;return E.dependencyStream&&(M+=E.dependencyStream.baseOriginalId||""),M}if(r.length){var u=e.textStreams;r=v(r);for(var a=r.next(),l={};!a.done;l={sg:void 0},a=r.next())if(l.sg=a.value,a=u.filter(function(E){return function(M){return!!(M.codecs.startsWith(E.sg)||M.mimeType.startsWith(E.sg))}}(l)),a.length){u=a;break}e.textStreams=u}if(u=e.variants,(t.length||n.length)&&(u=NA(u,t,n)),i.length){for(t=new ot,n=v(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var f=[];t.forEach(function(E,M){E=0;var L=[];M=v(M);for(var P=M.next(),b={};!P.done;b={Pe:void 0},P=M.next())b.Pe=P.value,P=i.filter(function(D){return function(k){return D.Pe.decodingInfos[0][k]}}(b)).length,P>E?(E=P,L=[b.Pe]):P==E&&L.push(b.Pe);f.push.apply(f,Q(L))}),u=f}for(n=new Set,t=new Set,u=v(u),r=u.next();!r.done;r=u.next())r=r.value,r.audio&&n.add(r.audio),r.video&&t.add(r.video);u=Array.from(n).sort(function(E,M){return E.bandwidth-M.bandwidth});var d=[];for(n=new Map,u=v(u),r=u.next();!r.done;r=u.next()){if(r=r.value,a=s(r),l=n.get(a)||[],l.length){var g=l[l.length-1],m=dn(g.codecs),y=dn(r.codecs);m!=y||r.bandwidth&&g.bandwidth&&!(r.bandwidth>g.bandwidth)||(l.push(r),d.push(r.id))}else l.push(r),d.push(r.id);n.set(a,l)}var x={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};u=Array.from(t).sort(function(E,M){if(!E.bandwidth||!M.bandwidth||E.bandwidth==M.bandwidth){if(E.codecs&&M.codecs&&E.codecs!=M.codecs&&E.width==M.width){var L=dn(E.codecs),P=dn(M.codecs);if(L!=P)return(x[L]||1)-(x[P]||1)}return E.width-M.width}return E.bandwidth-M.bandwidth}),t=Lo();var S=[];for(n=new Map,u=v(u),r=u.next();!r.done;r=u.next()){if(r=r.value,a=o(r),l=n.get(a)||[],l.length){if(g=l[l.length-1],!t&&(m=dn(g.codecs),y=dn(r.codecs),m!==y))continue;m=dn(g.codecs),y=dn(r.codecs),m!=y||r.bandwidth&&g.bandwidth&&!(r.bandwidth>g.bandwidth)||(l.push(r),S.push(r.id))}else l.push(r),S.push(r.id);n.set(a,l)}e.variants=e.variants.filter(function(E){var M=E.audio;return E=E.video,!(M&&!d.includes(M.id)||E&&!S.includes(E.id))})}function NA(e,t,n){t=v(t);for(var i=t.next(),r={};!i.done;r={Lh:void 0},i=t.next())if(r.Lh=i.value,i=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.Lh)}}(r)),i.length){e=i;break}for(n=v(n),t=n.next(),i={};!t.done;i={Cg:void 0},t=n.next())if(i.Cg=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.Cg)}}(i)),t.length){e=t;break}return e}function jA(e,t,n){e.variants=e.variants.filter(function(i){return Hl(i,t,n)})}function Hl(e,t,n){function i(u,a,l){return u>=a&&u<=l}var r=e.video;if(r&&r.width&&r.height){var o=r.width,s=r.height;if(s>o&&(s=v([s,o]),o=s.next().value,s=s.next().value),!i(o,t.minWidth,Math.min(t.maxWidth,n.width))||!i(s,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function OA(e,t,n,i){return n=n===void 0?[]:n,i=i===void 0?{}:i,U(function(r){return r.g==1?A(r,Uv(e,t,0<t.offlineSessionIds.length,n,i),2):(BA(t),A(r,VA(t),0))})}function Uv(e,t,n,i,r){var o,s;return U(function(u){if(u.g==1)return Gi()&&UA(t.variants),A(u,Fv(t.variants,n,!1,i),2);o=null,e&&(s=e.h)&&(o=s.keySystem),t.variants=t.variants.filter(function(a){var l=bA(a,o,r);if(!l){var f=[];a.audio&&f.push(Wv(a.audio)),a.video&&f.push(Wv(a.video))}return l}),ie(u)})}function UA(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=v(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&n.add(i.video);for(n=v(n),e=n.next();!e.done;e=n.next()){e=e.value,i=v(t);for(var r=i.next();!r.done;r=i.next()){var o=v(r.value);if(r=o.next().value,o=o.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,o);break}}}}function bA(e,t,n){if(!e.decodingInfos.some(function(a){return!(!a.supported||t&&(a=a.keySystemAccess)&&(n[a.keySystem]||a.keySystem)!=t)}))return!1;var i=Gi(),r=Ft("Firefox")&&$r(),o=e.video,s=o&&o.width||0,u=o&&o.height||0;return i&&o&&(1920<s||1080<u)&&(o.codecs.includes("avc1.")||o.codecs.includes("avc3."))||(i=o&&o.dependencyStream)&&!fv(i)?!1:(e=e.audio,!(r&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function bv(e,t){var n,i,r,o,s,u,a;return U(function(l){if(l.g==1){for(n=function(f,d){if(f){var g=Oo(f);return g.supported=f.supported&&d.supported,g.powerEfficient=f.powerEfficient&&d.powerEfficient,g.smooth=f.smooth&&d.smooth,d.keySystemAccess&&!g.keySystemAccess&&(g.keySystemAccess=d.keySystemAccess),g}return d},i=null,r=[],o=v(t),s=o.next(),u={};!s.done;u={cache:void 0,Rd:void 0},s=o.next())a=s.value,u.Rd=Od(a),u.cache=Kl,u.cache.has(u.Rd)?i=n(i,u.cache.get(u.Rd)):r.push(FA(a).then(function(f){return function(d){var g=null;d=v(d||[]);for(var m=d.next();!m.done;m=d.next())g=n(g,m.value);g&&(f.cache.set(f.Rd,g),i=n(i,g))}}(u)));return A(l,Promise.all(r),2)}i&&e.decodingInfos.push(i),ie(l)})}function FA(e){var t=[""];e.video&&(t=zn(e.video.contentType).split(","));var n=[""];e.audio&&(n=zn(e.audio.contentType).split(","));var i=[];t=v(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var o=v(n),s=o.next(),u={};!s.done;u={pc:void 0},s=o.next())s=s.value,u.pc=Xi(e),e.video&&(u.pc.video.contentType=Ot(Xn(u.pc.video.contentType),r)),e.audio&&(u.pc.audio.contentType=Ot(Xn(u.pc.audio.contentType),s)),i.push(new Promise(function(a){return function(l,f){($r()?Wu(5,navigator.mediaCapabilities.decodingInfo(a.pc)):navigator.mediaCapabilities.decodingInfo(a.pc)).then(function(d){l(d)}).catch(f)}}(u)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function Fv(e,t,n,i){var r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b;return U(function(D){switch(D.g){case 1:if(e.some(function(k){return k.decodingInfos.length}))return D.return();r=v(i),o=r.next(),s={};case 2:if(o.done){D.s(4);break}s.mh=o.value,u=!1,a=v(e),l=a.next();case 5:if(l.done){D.s(7);break}f=l.value,d=Bv(f,t,n).filter(function(k){return function(N){return N=N[0],(N.keySystemConfiguration&&N.keySystemConfiguration.keySystem)===k.mh}}(s)),g=v(d),m=g.next();case 8:if(m.done){D.s(10);break}return y=m.value,A(D,bv(f,y),9);case 9:m=g.next(),D.s(8);break;case 10:f.decodingInfos.length&&(u=!0),l=a.next(),D.s(5);break;case 7:if(u)return D.return();s={mh:void 0},o=r.next(),D.s(2);break;case 4:x=v(e),S=x.next();case 12:if(S.done){D.s(0);break}E=S.value,M=Bv(E,t,n).filter(function(k){return k=k[0],k=k.keySystemConfiguration&&k.keySystemConfiguration.keySystem,!k||!i.includes(k)}),L=v(M),P=L.next();case 15:if(P.done){S=x.next(),D.s(12);break}return b=P.value,A(D,bv(E,b),16);case 16:P=L.next(),D.s(15)}})}function Bv(e,t,n){var i=e.audio,r=e.video,o=[],s=[];if(r)for(var u=v(r.fullMimeTypes),a=u.next();!a.done;a=u.next()){a=a.value;var l=zn(a);if(l.includes(",")&&!i){var f=l.split(","),d=Xn(a);l=xs("video",f),f=xs("audio",f),f=zu(f,d),d=qd(d,f,"audio"),s.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=Zd(l),a={contentType:qd(Xn(a),l,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":a.transferFunction="srgb";break;case"PQ":a.transferFunction="pq";break;case"HLG":a.transferFunction="hlg"}r.colorGamut&&(a.colorGamut=r.colorGamut),o.push(a)}if(i)for(u=v(i.fullMimeTypes),a=u.next();!a.done;a=u.next())l=a.value,a=Xn(l),l=zu(zn(l),a),a=qd(a,l,"audio"),s.push({contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(u=[],o.length==0&&o.push(null),s.length==0&&s.push(null),o=v(o),a=o.next();!a.done;a=o.next())for(a=a.value,l=v(s),d=l.next();!d.done;d=l.next())d=d.value,f={type:n?"file":"media-source"},a&&(f.video=a),d&&(f.audio=d),u.push(f);if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];for(e=[],n=new Map,s=v(s),o=s.next();!o.done;o=s.next())o=o.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=v(n.keys()),a=o.next();!a.done;a=o.next()){for(a=a.value,d=n.get(a),l=new Map,d=v(d),f=d.next();!f.done;f=d.next()){f=f.value;var g=f.videoRobustness+","+f.audioRobustness;l.get(g)||l.set(g,[]),l.get(g).push(f)}for(l=v(l.values()),d=l.next();!d.done;d=l.next()){d=d.value,f=[],g=v(u);for(var m=g.next();!m.done;m=g.next()){m=Object.assign({},m.value);for(var y={keySystem:a,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},x=v(d),S=x.next();!S.done;S=x.next()){if(S=S.value,S.initData&&S.initData.length){for(var E=new Set,M=v(S.initData),L=M.next();!L.done;L=M.next())E.add(L.value.initDataType);y.initDataType=S.initData[0].initDataType}S.distinctiveIdentifierRequired&&(y.distinctiveIdentifier="required"),S.persistentStateRequired&&(y.persistentState="required"),S.sessionType&&(y.sessionTypes=[S.sessionType]),i&&(y.audio?(S.encryptionScheme&&(y.audio.encryptionScheme=y.audio.encryptionScheme||S.encryptionScheme),y.audio.robustness=y.audio.robustness||S.audioRobustness):(y.audio={robustness:S.audioRobustness},S.encryptionScheme&&(y.audio.encryptionScheme=S.encryptionScheme)),y.audio.robustness==""&&delete y.audio.robustness),r&&(y.video?(S.encryptionScheme&&(y.video.encryptionScheme=y.video.encryptionScheme||S.encryptionScheme),y.video.robustness=y.video.robustness||S.videoRobustness):(y.video={robustness:S.videoRobustness},S.encryptionScheme&&(y.video.encryptionScheme=S.encryptionScheme)),y.video.robustness==""&&delete y.video.robustness)}m.keySystemConfiguration=y,f.push(m)}e.push(f)}}return e}function zu(e,t){return e.toLowerCase()=="flac"?sn()?"fLaC":"flac":e.toLowerCase()==="opus"?sn()&&Fl(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&vr()?"ec-3":e}function Zd(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function BA(e){e.textStreams=e.textStreams.filter(function(t){return t=Ot(t.mimeType,t.codecs),Ps(t)})}function VA(e){var t,n,i,r,o,s,u;return U(function(a){switch(a.g){case 1:t=[],n=v(e.imageStreams),i=n.next();case 2:if(i.done){a.s(4);break}if(r=i.value,o=r.mimeType,o=="application/mp4"&&r.codecs=="mjpg"&&(o="image/jpg"),Wl.has(o)){a.s(5);break}if(s=KA.get(o),!s){Wl.set(o,!1),a.s(5);break}return A(a,HA(s),7);case 7:u=a.h,Wl.set(o,u);case 5:Wl.get(o)&&t.push(r),i=n.next(),a.s(2);break;case 4:e.imageStreams=t,ie(a)}})}function HA(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Vo(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=t?t.groupId:null,a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var f=new Set;if(t)for(var d=v(t.roles),g=d.next();!g.done;g=d.next())f.add(g.value);if(n)for(d=v(n.roles),g=d.next();!g.done;g=d.next())f.add(g.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:a,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(f),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:u,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec),s.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,n=s.split(",");try{e.videoCodec=xs("video",n),e.audioCodec=xs("audio",n)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function qu(e){return{id:e.id,active:!1,type:be,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function eh(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=Yi(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function th(e){return e.__shaka_id||(e.__shaka_id=GA++),e.__shaka_id}function Vv(e){var t=Hv(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function nh(e){var t=Hv(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Hv(e){var t=e.language;return{id:th(e),active:!1,type:"",bandwidth:0,language:ct(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Yu(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Gl(e){return e.filter(function(t){return Yu(t)})}function _s(e,t,n,i){var r=e,o=e.filter(function(a){return a.primary});o.length&&(r=o);var s=r.length?r[0].language:"";if(r=r.filter(function(a){return a.language==s}),t){var u=Vl(ct(t),e.map(function(a){return a.language}));u&&(r=e.filter(function(a){return ct(a.language)==u}))}if(r=r.filter(function(a){return a.forced==i}),n){if(e=Gv(r,n),e.length)return e}else if(e=r.filter(function(a){return a.roles.length==0}),e.length)return e;return e=r.map(function(a){return a.roles}).reduce(LA,[]),e.length?Gv(r,e[0]):r}function Gv(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Kv(e,t){t.length&&(t=t.filter(function(n){return dn(e.codecs)==dn(n.codecs)}).sort(function(n,i){return n.bandwidth&&i.bandwidth&&n.bandwidth!=i.bandwidth?n.bandwidth-i.bandwidth:(n.width||0)-(i.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function Wv(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function Xv(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var i=ct(n.preferredTextLanguage);return t=ct(t.language),n.autoShowText==2?Ls(t,i):n.autoShowText==3?e?(e=ct(e.language),Ls(t,i)&&!Ls(e,t)):!1:(J("Invalid autoShowText setting!"),!1)}R("shaka.util.StreamUtils",jv),jv.meetsRestrictions=Hl;var Kl=new Map,GA=0,Wl=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),KA=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function It(){var e=this;this.G=null,this.o=!1,this.m=new se,this.j=new ke,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.m=new se,e.g&&e.m.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.l=this.g=this.u=null,this.A=new Be(function(){if(e.o&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.B=w,"documentPictureInPicture"in w&&this.j.D(w.documentPictureInPicture,"enter",function(){e.B=w.documentPictureInPicture.window,e.A&&e.A.sb(),e.j.ma(e.B,"pagehide",function(){e.B=w,e.A&&e.A.sb()})}),this.C=this.i=null}h=It.prototype,h.stop=function(){this.G=null,this.o=!1,this.F=[],this.H=1,this.l=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.A.stop(),this.C=this.i=null},h.release=function(){this.j.release(),this.A=null},h.init=function(e){this.G=e},h.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;e=this.B.screen.height*n,t=this.B.screen.width*n}if(this.h&&this.g.restrictToElementSize){n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;var i=this.l.clientHeight,r=this.l.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.l&&(i=this.i.height,r=this.i.width),e=Math.min(e,i*n),t=Math.min(t,r*n)}if(n=this.F.filter(function(l){return l&&!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)}),n.length||(n=this.F),i=n,n.length!=this.F.length&&(i=this.F.filter(function(l){return l&&!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),n=ih(this,this.g.restrictions,i,1/0,1/0),e!=1/0||t!=1/0){for(n=WA(n),n=v(n),r=n.next();!r.done;r=n.next())if(r=r.value,r.height>=e&&r.width>=t){e=r.height,t=r.width;break}n=ih(this,this.g.restrictions,i,e,t)}for(e=this.getBandwidthEstimate(),i.length&&!n.length&&(n=ih(this,null,i,1/0,1/0),n=[n[0]]),t=n[0]||null,i=0;i<n.length;i++){r=n[i];for(var o=isNaN(this.H)?1:Math.abs(this.H),s=o*r.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},a=i+1;a<n.length;a++)if(r.bandwidth!=n[a].bandwidth){u=n[a];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,e>=s&&e<=o&&(t.bandwidth!=r.bandwidth||t.bandwidth==r.bandwidth&&t.video&&r.video&&(t.video.width<r.video.width||t.video.height<r.video.height))&&(t=r)}return this.u=Date.now(),t},h.enable=function(){this.o=!0},h.disable=function(){this.o=!1},h.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.m.sample(e,t),n&&this.u!=null&&this.o&&zv(this))},h.trySuggestStreams=function(){this.u!=null&&this.o&&zv(this)},h.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.m.getBandwidthEstimate(e),this.C?this.C.getBandwidthEstimate(e):e)},h.setVariants=function(e){this.F=e},h.playbackRateChanged=function(e){this.H=e},h.setMediaElement=function(e){function t(){n.A.da(XA)}var n=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in w&&(this.h=new ResizeObserver(t),this.h.observe(this.l)),this.j.D(e,"enterpictureinpicture",function(i){i.pictureInPictureWindow&&(n.i=i.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ja(n.i,"resize",t),n.i=null})},h.setCmsdManager=function(e){this.C=e},h.configure=function(e){this.g=e,this.m&&this.g&&this.m.configure(this.g.advanced)};function zv(e){if(!e.I){var t=e.m;if(!(t.g>=t.i))return;e.I=!0,e.u-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.u<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function ih(e,t,n,i,r){if(e.C){var o=e.C.Ug();o&&(n=n.filter(function(s){return s.bandwidth&&o?s.bandwidth<=o:!0}))}return t&&(n=n.filter(function(s){return Hl(s,t,{width:r,height:i})})),n.sort(function(s,u){return s.bandwidth-u.bandwidth})}function WA(e){var t=[];e=v(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}R("shaka.abr.SimpleAbrManager",It),It.prototype.configure=It.prototype.configure,It.prototype.setCmsdManager=It.prototype.setCmsdManager,It.prototype.setMediaElement=It.prototype.setMediaElement,It.prototype.playbackRateChanged=It.prototype.playbackRateChanged,It.prototype.setVariants=It.prototype.setVariants,It.prototype.getBandwidthEstimate=It.prototype.getBandwidthEstimate,It.prototype.trySuggestStreams=It.prototype.trySuggestStreams,It.prototype.segmentDownloaded=It.prototype.segmentDownloaded,It.prototype.disable=It.prototype.disable,It.prototype.enable=It.prototype.enable,It.prototype.chooseVariant=It.prototype.chooseVariant,It.prototype.init=It.prototype.init,It.prototype.release=It.prototype.release,It.prototype.stop=It.prototype.stop;var XA=1;R("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function qv(e,t){var n=qi();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Yv(e){var t,n;return U(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new _(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),A(i,new Promise(function(r){new Be(r).da(n/1e3)}),2))}e.h*=e.m,ie(i)})}function qi(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function st(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}st.prototype.resolve=function(){},st.prototype.reject=function(){};function Ut(e,t){this.promise=e,this.i=t,this.g=null}function Ho(e){return new Ut(Promise.reject(e),function(){return Promise.resolve()})}function rh(){var e=Promise.reject(new _(2,7,7001));return e.catch(function(){}),new Ut(e,function(){return Promise.resolve()})}function Ns(e){return new Ut(Promise.resolve(e),function(){return Promise.resolve()})}function $v(e){return new Ut(e,function(){return e.catch(function(){})})}Ut.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function Qv(e){return new Ut(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Ut.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Ut.prototype.Ha=function(e,t){function n(u){return function(a){if(r.g&&u)o.reject(s);else{var l=u?e:t;l?i=zA(l,a,o):(u?o.resolve:o.reject)(a)}}}function i(){return o.reject(s),r.abort()}var r=this,o=new st;o.catch(function(){});var s=new _(2,7,7001);return this.promise.then(n(!0),n(!1)),new Ut(o,function(){return i()})};function zA(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}ne.Object.defineProperties(Ut.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),R("shaka.util.AbortableOperation",Ut),Ut.prototype.chain=Ut.prototype.Ha,Ut.prototype.finally=Ut.prototype.finally,Ut.all=Qv,Ut.prototype.abort=Ut.prototype.abort,Ut.notAbortable=$v,Ut.completed=Ns,Ut.aborted=rh,Ut.failed=Ho;function re(e,t){if(t)if(t instanceof Map)for(var n=v(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=w.performance&&w.performance.now?w.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Jv(e){var t=new re(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}re.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},re.prototype.stopImmediatePropagation=function(){this.g=!0},re.prototype.stopPropagation=function(){},R("shaka.util.FakeEvent",re);var Xl={Oj:"abrstatuschanged",Pj:"adaptation",Qj:"audiotrackchanged",Rj:"audiotrackschanged",Sj:"boundarycrossed",Tj:"buffering",Uj:"complete",Vj:"downloadcompleted",Wj:"downloadfailed",Xj:"downloadheadersreceived",Yj:"drmsessionupdate",$j:"emsg",uk:"prft",Error:"error",ak:"expirationupdated",bk:"firstquartile",ck:"gapjumped",fk:"keystatuschanged",jk:"loaded",kk:"loading",mk:"manifestparsed",nk:"manifestupdated",pk:"mediaqualitychanged",qk:"mediasourcerecovered",Metadata:"metadata",rk:"midpoint",sk:"nospatialvideoinfo",tk:"onstatechange",vk:"ratechange",xk:"segmentappended",yk:"sessiondata",zk:"spatialvideoinfo",Ak:"stalldetected",Bk:"started",Ck:"statechanged",Dk:"streaming",Ek:"textchanged",Fk:"texttrackvisibility",Gk:"thirdquartile",Hk:"timelineregionadded",Ik:"timelineregionenter",Jk:"timelineregionexit",Kk:"trackschanged",Mk:"unloading",Ok:"variantchanged"};function ut(){this.Ea=new ot,this.Ge=this}ut.prototype.addEventListener=function(e,t){this.Ea&&this.Ea.push(e,t)},ut.prototype.removeEventListener=function(e,t){this.Ea&&this.Ea.remove(e,t)},ut.prototype.dispatchEvent=function(e){if(!this.Ea)return!0;var t=this.Ea.get(e.type)||[],n=this.Ea.get("All");for(n&&(t=t.concat(n)),t=v(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ge,e.currentTarget=this.Ge;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},ut.prototype.release=function(){this.Ea=null};function js(){this.g=[]}function Go(e,t){e.g.push(t.finally(function(){Oi(e.g,t)}))}js.prototype.destroy=function(){for(var e=[],t=v(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function pt(e,t,n,i,r,o,s){ut.call(this),this.i=!1,this.u=new js,this.g=new Set,this.h=new Set,this.m=e||null,this.l=t||null,this.C=n||null,this.F=i||null,this.G=r||null,this.I=o||null,this.H=s||null,this.A=this.B=!1,this.o=16e3,this.j=new Map}At(pt,ut),h=pt.prototype,h.kg=function(e){this.B=e},h.lg=function(e){this.A=e};function Cr(e,t,n,i){i=i===void 0?!1:i,n=n||iy;var r=ql.get(e);(!r||n>=r.priority)&&ql.set(e,{priority:n,se:t,ij:i})}function Zv(e,t){for(var n=v(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=v(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}h.lj=function(e){this.g.add(e)},h.Hj=function(e){this.g.delete(e)},h.$h=function(){this.g.clear()},h.mj=function(e){this.h.add(e)},h.Ij=function(e){this.h.delete(e)},h.ai=function(){this.h.clear()},h.Hg=function(){this.j.clear()};function qt(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}h.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),this.j.clear(),ut.prototype.release.call(this),this.u.destroy()},h.request=function(e,t,n){var i=this,r=new ny;if(this.i){var o=Promise.reject(new _(2,7,7001));return o.catch(function(){}),new zl(o,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Xi(t.retryParameters):qi(),t.uris=Xi(t.uris),o=qA(this,e,t,n);var s=o.Ha(function(){return ey(i,e,t,n,new qv(t.retryParameters,!1),0,null,r)}),u=s.Ha(function(g){return YA(i,e,g,n)}),a=Date.now(),l=0;o.promise.then(function(){l=Date.now()-a},function(){});var f=0;s.promise.then(function(){f=Date.now()},function(){});var d=u.Ha(function(g){var m=Date.now()-f,y=g.response;return y.timeMs+=l,y.timeMs+=m,g.Oi||!i.m||y.fromCache||t.method=="HEAD"||e!=Fi||i.m(y.timeMs,y.data.byteLength,ty(n)),i.H&&i.H(e,y,n),y},function(g){throw g&&(g.severity=2),g});return o=new zl(d.promise,function(){return d.abort()},r),Go(this.u,o),o};function qA(e,t,n,i){function r(u){o=o.Ha(function(){return n.body&&(n.body=yi(n.body)),u(t,n,i)})}var o=Ns(void 0);e.G&&r(e.G),e=v(e.g);for(var s=e.next();!s.done;s=e.next())r(s.value);return o.Ha(void 0,function(u){throw u instanceof _&&u.code==7001?u:new _(2,1,1006,u)})}function ey(e,t,n,i,r,o,s,u){e.B&&(n.uris[o]=n.uris[o].replace("https://","http://")),e.A&&(n.uris[o]=n.uris[o].replace("http://","https://")),0<o&&e.I&&e.I(t,i,n.uris[o],n.uris[o-1]);var a=new _t(n.uris[o]),l=a.Kb,f=!1;l||(l=location.protocol,l=l.slice(0,-1),Al(a,l),n.uris[o]=a.toString()),l=l.toLowerCase();var d=(l=ql.get(l))?l.se:null;if(!d)return Ho(new _(2,1,1e3,a));var g=l.ij;(a=e.j.get(a.nb))&&(n.headers["common-access-token"]=a);var m=null,y=null,x=!1,S=!1,E;return $v(Yv(r)).Ha(function(){if(e.i)return rh();E=Date.now();var M=0;n.requestStartTime=Date.now();var L=d(n.uris[o],n,t,function(D,k,N){m&&m.stop(),y&&y.da(b/1e3),e.m&&t==Fi&&(M++,n.packetNumber=M,e.m(D,k,ty(i),n),f=!0,u.g=N)},function(D){S=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.l&&e.l(D,n,t)},{minBytesForProgressEvents:e.o});if(!g)return L;var P=n.retryParameters.connectionTimeout;P&&(m=new Be(function(){x=!0,L.abort()}),m.da(P/1e3));var b=n.retryParameters.stallTimeout;return b&&(y=new Be(function(){x=!0,L.abort()})),L}).Ha(function(M){m&&m.stop(),y&&y.stop(),M.timeMs==null&&(M.timeMs=Date.now()-E);var L=M.headers["common-access-token"];if(L){var P=new _t(M.uri);e.j.set(P.nb,L)}return L={response:M,Oi:f},!S&&e.l&&e.l(M.headers,n,t),e.C&&e.C(n,M),L},function(M){if(m&&m.stop(),y&&y.stop(),e.F){var L=null,P=0;M instanceof _&&(L=M,M.code==1001&&(P=M.data[1])),e.F(n,L,P,x)}if(e.i)return rh();if(x&&(M=new _(1,1,1003,n.uris[o],t)),M instanceof _){if(M.code==7001)throw M;if(M.code==1010)throw s;if(M.severity==1){if(L=new Map().set("error",M),L=new re("retry",L),L.cancelable=!0,e.dispatchEvent(L),L.defaultPrevented)throw M;return o=(o+1)%n.uris.length,ey(e,t,n,i,r,o,M,u)}}throw M})}function YA(e,t,n,i){var r=Ns(void 0);e=v(e.h);for(var o=e.next(),s={};!o.done;s={ph:void 0},o=e.next())s.ph=o.value,r=r.Ha(function(u){return function(){var a=n.response;return a.data&&(a.data=yi(a.data)),(0,u.ph)(t,a,i)}}(s));return r.Ha(function(){return n},function(u){var a=2;if(u instanceof _){if(u.code==7001)throw u;a=u.severity}throw new _(a,1,1007,u)})}function ty(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.o)return!1}return!0}R("shaka.net.NetworkingEngine",pt),pt.prototype.request=pt.prototype.request,pt.prototype.destroy=pt.prototype.destroy,pt.makeRequest=qt,pt.defaultRetryParameters=function(){return qi()},pt.prototype.clearCommonAccessTokenMap=pt.prototype.Hg,pt.prototype.clearAllResponseFilters=pt.prototype.ai,pt.prototype.unregisterResponseFilter=pt.prototype.Ij,pt.prototype.registerResponseFilter=pt.prototype.mj,pt.prototype.clearAllRequestFilters=pt.prototype.$h,pt.prototype.unregisterRequestFilter=pt.prototype.Hj,pt.prototype.registerRequestFilter=pt.prototype.lj,pt.unregisterScheme=function(e){ql.delete(e)},pt.registerScheme=Cr,pt.prototype.setForceHTTPS=pt.prototype.lg,pt.prototype.setForceHTTP=pt.prototype.kg;function ny(){this.g=0}pt.NumBytesRemainingClass=ny;function zl(e,t,n){Ut.call(this,e,t),this.h=n}At(zl,Ut),pt.PendingRequest=zl;var Fi=1;pt.RequestType={MANIFEST:0,SEGMENT:Fi,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},pt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var iy=3;pt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:iy};var ql=new Map;function Os(e){this.g=!1,this.h=new st,this.i=e}Os.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function ht(e,t){if(e.g)throw t instanceof _&&t.code==7003?t:new _(2,7,7003,t)}function oh(e,t){var n=[];e=v(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function $A(e,t){e=v(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Ko(e){for(var t=new Map,n=v(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function sh(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function vt(e,t){this.h=Ln(e),this.i=t==ry,this.g=0}h=vt.prototype,h.ta=function(){return this.g<this.h.byteLength},h.Ba=function(){return this.g},h.getLength=function(){return this.h.byteLength},h.X=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw kr()}},h.na=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw kr()}},h.S=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw kr()}},h.$f=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw kr()}},h.bd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw kr()}if(2097151<t)throw new _(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},h.Cb=function(e){if(this.g+e>this.h.byteLength)throw kr();var t=De(this.h,this.g,e);return this.g+=e,t},h.skip=function(e){if(this.g+e>this.h.byteLength)throw kr();this.g+=e},h.qh=function(e){if(this.g<e)throw kr();this.g-=e},h.seek=function(e){if(0>e||e>this.h.byteLength)throw kr();this.g=e},h.Cc=function(){for(var e=this.g;this.ta()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=De(this.h,e,this.g-e),this.g+=1,St(e)};function kr(){return new _(2,3,3e3)}R("shaka.util.DataViewReader",vt),vt.prototype.readTerminatedString=vt.prototype.Cc,vt.prototype.seek=vt.prototype.seek,vt.prototype.rewind=vt.prototype.qh,vt.prototype.skip=vt.prototype.skip,vt.prototype.readBytes=vt.prototype.Cb,vt.prototype.readUint64=vt.prototype.bd,vt.prototype.readInt32=vt.prototype.$f,vt.prototype.readUint32=vt.prototype.S,vt.prototype.readUint16=vt.prototype.na,vt.prototype.readUint8=vt.prototype.X,vt.prototype.getLength=vt.prototype.getLength,vt.prototype.getPosition=vt.prototype.Ba,vt.prototype.hasMoreData=vt.prototype.ta;var ry=1;vt.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:ry};function ft(){this.i=new Map,this.h=new Map,this.g=!1}h=ft.prototype,h.box=function(e,t){return e=oy(e),this.i.set(e,QA),this.h.set(e,t),this},h.R=function(e,t){return e=oy(e),this.i.set(e,sy),this.h.set(e,t),this},h.stop=function(){this.g=!0},h.parse=function(e,t,n){for(e=new vt(e,0),this.g=!1;e.ta()&&!this.g;)this.Yc(0,e,t,n)},h.Yc=function(e,t,n,i){var r=t.Ba();if(i&&r+8>t.getLength())this.g=!0;else{var o=t.S(),s=t.S(),u=Yl(s),a=!1;switch(o){case 0:o=t.getLength()-r;break;case 1:if(i&&t.Ba()+8>t.getLength()){this.g=!0;return}o=t.bd(),a=!0}var l=this.h.get(s);if(l){var f=null,d=null;if(this.i.get(s)==sy){if(i&&t.Ba()+4>t.getLength()){this.g=!0;return}d=t.S(),f=d>>>24,d&=16777215}s=r+o,n&&s>t.getLength()&&(s=t.getLength()),i&&s>t.getLength()?this.g=!0:(i=s-t.Ba(),t=0<i?t.Cb(i):new Uint8Array(0),t=new vt(t,0),l({name:u,parser:this,partialOkay:n||!1,version:f,flags:d,reader:t,size:o,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+o-t.Ba(),t.getLength()-t.Ba()))}};function Fe(e){for(var t=so(e);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function oo(e){for(var t=so(e),n=e.reader.S(),i=0;i<n&&(e.parser.Yc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function qn(e){var t=so(e);for(e.reader.skip(78);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function uh(e){var t=so(e);e.reader.skip(8);var n=e.reader.na();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function Us(e){return function(t){e(t.reader.Cb(t.reader.getLength()-t.reader.Ba()))}}function oy(e){var t=0;e=v(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Yl(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function so(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}R("shaka.util.Mp4Parser",ft),ft.headerSize=so,ft.typeToString=Yl,ft.allData=Us,ft.audioSampleEntry=uh,ft.visualSampleEntry=qn,ft.sampleDescription=oo,ft.children=Fe,ft.prototype.parseNext=ft.prototype.Yc,ft.prototype.parse=ft.prototype.parse,ft.prototype.stop=ft.prototype.stop,ft.prototype.fullBox=ft.prototype.R,ft.prototype.box=ft.prototype.box;var QA=0,sy=1;function ah(e){var t=this;this.g=[],this.h=[],this.data=[],new ft().box("moov",Fe).box("moof",Fe).R("pssh",function(n){if(!(1<n.version)){var i=De(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(wr(n.reader.Cb(16))),0<n.version){i=n.reader.S();for(var r=0;r<i;r++){var o=wr(n.reader.Cb(16));t.h.push(o)}}}}).parse(e)}function $l(e,t,n,i){var r=e.length,o=t.length+16+r;0<i&&(o+=4+16*n.size);var s=new Uint8Array(o),u=Ln(s),a=0;if(u.setUint32(a,o),a+=4,u.setUint32(a,1886614376),a+=4,1>i?u.setUint32(a,0):u.setUint32(a,16777216),a+=4,s.set(t,a),a+=t.length,0<i)for(u.setUint32(a,n.size),a+=4,t=v(n),n=t.next();!n.done;n=t.next())n=Po(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,r),s.set(e,a+4),s}function Ql(e){var t=this;this.C=e,this.j=this.A=null,this.ka=this.ea=!1,this.H=0,this.h=null,this.o=new ke,this.i=new Map,this.T=[],this.B=new Map,this.K=!1,this.m=new st,this.g=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.Z=new Map,this.fa=new Map,this.L=new Be(function(){return a2(t)}),this.O=!1,this.M=[],this.W=!1,this.I=new Be(function(){c2(t)}),this.m.catch(function(){}),this.l=new Os(function(){return JA(t)}),this.$=!1,this.F=this.G=null,this.P=function(){return!1}}h=Ql.prototype,h.destroy=function(){return this.l.destroy()};function JA(e){return U(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.I.stop(),e.I=null,e.L.stop(),e.L=null,A(t,Qu(e),2);case 2:if(!e.j){t.s(3);break}return ge(t,4),A(t,e.j.setMediaKeys(null),6);case 6:Pe(t,5);break;case 4:Se(t);case 5:e.j=null;case 3:e.h=null,e.A=null,e.B=new Map,e.g=null,e.u=function(){},e.C=null,e.$=!1,e.G=null,ie(t)}})}h.configure=function(e,t){this.g=e,t&&(this.P=t),this.I&&this.I.ua(this.g.updateExpirationTime)};function ZA(e,t,n){return e.ka=!0,e.B=new Map,e.O=n,ay(e,t,!1)}function uy(e,t,n,i){i=i===void 0?!0:i,e.B=new Map,n=v(n);for(var r=n.next();!r.done;r=n.next())e.B.set(r.value,{initData:null,initDataType:null});for(n=v(e.g.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.B.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.O=0<e.B.size,ay(e,t,i)}function e2(e,t,n,i,r,o){var s=new Map;return r={audioCapabilities:r,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,r),dy(e,s,[])}function ay(e,t,n){var i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D;return U(function(k){if(k.g==1){for(Ty(e.g.clearKeys,t),i=t.some(function(N){return!!(N.video&&N.video.drmInfos.length||N.audio&&N.audio.drmInfos.length)}),!i&&n&&(r=Ko(e.g.servers),d2(t,r)),o=new Set,s=v(t),u=s.next();!u.done;u=s.next())for(a=u.value,l=vy(a),f=v(l),d=f.next();!d.done;d=f.next())g=d.value,o.add(g);for(m=v(o),y=m.next();!y.done;y=m.next())x=y.value,h2(x,Ko(e.g.servers),Ko(e.g.advanced||{}),e.g.keySystemsMapping);for(S=function(N,j){var V=[];N=v(N);for(var F=N.next();!F.done;F=N.next()){F=F.value;var B=F[j]||e.g.advanced&&e.g.advanced[F.keySystem]&&e.g.advanced[F.keySystem][j]||"",H;if((H=B=="")&&(H=(H=F.keySystem)?!!H.match(/^com\.widevine\.alpha/):!1),H&&(j=="audioRobustness"?B=[e.g.defaultAudioRobustnessForWidevine]:j=="videoRobustness"&&(B=[e.g.defaultVideoRobustnessForWidevine])),typeof B=="string")V.push(F);else if(Array.isArray(B))for(B.length===0&&(B=[""]),B=v(B),H=B.next();!H.done;H=B.next()){var G={};V.push(Object.assign({},F,(G[j]=H.value,G)))}}return V},E=new Set,M=v(t),L=M.next();!L.done;L=M.next())P=L.value,P.video&&!E.has(P.video)&&(P.video.drmInfos=S(P.video.drmInfos,"videoRobustness"),P.video.drmInfos=S(P.video.drmInfos,"audioRobustness"),E.add(P.video)),P.audio&&!E.has(P.audio)&&(P.audio.drmInfos=S(P.audio.drmInfos,"videoRobustness"),P.audio.drmInfos=S(P.audio.drmInfos,"audioRobustness"),E.add(P.audio));return E.clear(),A(k,Fv(t,e.O,e.$,e.g.preferredKeySystems),2)}return ht(e.l),b=i||Object.keys(e.g.servers).length,b?(D=dy(e,void 0,t),k.return(i?D:D.catch(function(){}))):(e.ea=!0,k.return(Promise.resolve()))})}function ly(e){var t;return U(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.G){n.s(2);break}return A(n,e.G,3);case 3:return ht(e.l),n.return();case 2:return ge(n,4),e.G=e.j.setMediaKeys(e.A),A(n,e.G,6);case 6:Pe(n,5);break;case 4:t=Se(n),e.u(new _(2,6,6003,t.message));case 5:ht(e.l),ie(n)}})}function t2(e,t){return U(function(n){if(n.g==1)return A(n,ly(e),2);$u(e,t.initDataType,De(t.initData)),ie(n)})}h.Lb=function(e){var t=this;return U(function(n){if(n.g==1)return t.j===e?n.return():t.A?(t.j=e,t.o.ma(t.j,"play",function(){for(var i=v(t.M),r=i.next();!r.done;r=i.next())ch(t,r.value);t.W=!0,t.M=[]}),t.j.remote?(t.o.D(t.j.remote,"connect",function(){return Qu(t)}),t.o.D(t.j.remote,"connecting",function(){return Qu(t)}),t.o.D(t.j.remote,"disconnect",function(){return Qu(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.j&&t.o.D(t.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Qu(t)}),t.F=t.h&&t.h.initData.find(function(i){return 0<i.initData.length})||null,t.F||t.h.keySystem!=="com.apple.fps"||t.B.size?A(n,ly(t),2):n.s(2)):(t.o.ma(e,"encrypted",function(){t.u(new _(2,6,6010))}),n.return());cy(t).catch(function(){}),t.F||t.B.size||t.g.parseInbandPsshEnabled||t.o.D(t.j,"encrypted",function(i){return t2(t,i)}),ie(n)})};function n2(e){var t,n,i,r,o;return U(function(s){switch(s.g){case 1:if(!e.A||!e.h)return s.return();if(!e.h.serverCertificateUri||e.h.serverCertificate&&e.h.serverCertificate.length){s.s(2);break}return t=qt([e.h.serverCertificateUri],e.g.retryParameters),ge(s,3),n=e.C.Xb.request(5,t,{isPreload:e.P()}),A(s,n.promise,5);case 5:i=s.h,e.h.serverCertificate=De(i.data),Pe(s,4);break;case 3:throw r=Se(s),new _(2,6,6017,r);case 4:if(e.l.g)return s.return();case 2:return!e.h.serverCertificate||!e.h.serverCertificate.length?s.return():(ge(s,6),A(s,e.A.setServerCertificate(e.h.serverCertificate),8));case 8:Pe(s,0);break;case 6:throw o=Se(s),new _(2,6,6004,o.message)}})}function i2(e,t){var n,i,r;return U(function(o){if(o.g==1)return A(o,py(e,t,{initData:null,initDataType:null}),2);if(o.g!=3)return n=o.h,n?(i=[],(r=e.i.get(n))&&(r.ub=new st,i.push(r.ub)),i.push(n.remove()),A(o,Promise.all(i),3)):o.return();e.i.delete(n),ie(o)})}function cy(e){var t,n,i,r,o;return U(function(s){if(s.g==1)return e.B.size?(e.B.forEach(function(u,a){py(e,a,u)}),A(s,e.m,3)):s.s(2);if(s.g!=2){if(t=e.h&&e.h.keyIds||new Set([]),0<t.size&&f2(e))return s.return(e.m);e.K=!1,e.m=new st,e.m.catch(function(){})}for(n=(e.h?e.h.initData:[])||[],i=v(n),r=i.next();!r.done;r=i.next())o=r.value,$u(e,o.initDataType,o.initData);return Ju(e)&&e.m.resolve(),s.return(e.m)})}function $u(e,t,n){if(n.length){if(e.g.ignoreDuplicateInitData){var i=e.i.values();i=v(i);for(var r=i.next();!r.done;r=i.next())if(mr(n,r.value.initData))return;var o=!1;if(e.B.forEach(function(s){!o&&mr(n,s.initData)&&(o=!0)}),o)return}e.K=!0,0<e.i.size&&Ju(e)&&(e.m.resolve(),e.K=!1,e.m=new st,e.m.catch(function(){})),s2(e,t,n,e.h.sessionType)}}function fy(e){return e=e.i.keys(),e=oh(e,function(t){return t.sessionId}),Array.from(e)}h.Gf=function(){var e=this,t=this.i.keys();return t=oh(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},h.pd=function(){var e=1/0,t=this.i.keys();t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},h.Yd=function(){return sh(this.fa)};function dy(e,t,n){var i,r,o,s,u,a,l,f;return U(function(d){switch(d.g){case 1:if(i=new Map,n.length){r=r2(e,n,i),d.s(2);break}return A(d,o2(e,t),3);case 3:r=d.h;case 2:if(o=r,!o)throw navigator.requestMediaKeySystemAccess?new _(2,6,6001):new _(2,6,6020);if(ht(e.l),ge(d,4),o.getConfiguration(),s=e.g.keySystemsMapping[o.keySystem]||o.keySystem,n.length){var g=s,m=i.get(s),y=[],x=[],S=[],E=[],M=[],L=new Set,P=new Set;yy(m,y,x,E,S,M,L,P);var b=e.O?"persistent-license":"temporary";for(g={keySystem:g,encryptionScheme:y[0],licenseServerUri:x[0],distinctiveIdentifierRequired:m[0].distinctiveIdentifierRequired,persistentStateRequired:m[0].persistentStateRequired,sessionType:m[0].sessionType||b,audioRobustness:m[0].audioRobustness||"",videoRobustness:m[0].videoRobustness||"",serverCertificate:E[0],serverCertificateUri:S[0],initData:M,keyIds:L},0<P.size&&(g.keySystemUris=P),m=v(m),P=m.next();!P.done;P=m.next())P=P.value,P.distinctiveIdentifierRequired&&(g.distinctiveIdentifierRequired=P.distinctiveIdentifierRequired),P.persistentStateRequired&&(g.persistentStateRequired=P.persistentStateRequired);m=g}else m=s,P=t.get(s),g=[],y=[],x=[],S=[],E=[],M=new Set,yy(P.drmInfos,g,y,S,x,E,M),m={keySystem:m,encryptionScheme:g[0],licenseServerUri:y[0],distinctiveIdentifierRequired:P.distinctiveIdentifier=="required",persistentStateRequired:P.persistentState=="required",sessionType:P.sessionTypes[0]||"temporary",audioRobustness:(P.audioCapabilities?P.audioCapabilities[0].robustness:"")||"",videoRobustness:(P.videoCapabilities?P.videoCapabilities[0].robustness:"")||"",serverCertificate:S[0],serverCertificateUri:x[0],initData:E,keyIds:M};if(e.h=m,!e.h.licenseServerUri)throw new _(2,6,6012,e.h.keySystem);return A(d,o.createMediaKeys(),6);case 6:if(u=d.h,ht(e.l),e.A=u,!(e.g.minHdcpVersion!=""&&"getStatusForPolicy"in e.A)){d.s(7);break}return ge(d,8),A(d,e.A.getStatusForPolicy({minHdcpVersion:e.g.minHdcpVersion}),10);case 10:if(a=d.h,a!="usable")throw new _(2,6,6018);ht(e.l),Pe(d,7,4);break;case 8:throw l=Se(d,4),l instanceof _?l:new _(2,6,6019,l.message);case 7:return e.ea=!0,A(d,n2(e),11);case 11:ht(e.l),Pe(d,0);break;case 4:throw f=Se(d),ht(e.l,f),e.h=null,f instanceof _?f:new _(2,6,6002,f.message)}})}function r2(e,t,n){for(var i=v(t),r=i.next();!r.done;r=i.next()){r=v(vy(r.value));for(var o=r.next();!o.done;o=r.next())o=o.value,n.has(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o)}if(n.size==1&&n.has(""))throw new _(2,6,6e3);i=e.g.preferredKeySystems,i.length||(r=Ko(e.g.servers),r.size==1&&(i=Array.from(r.keys()))),r=v(i);var s=r.next();for(o={};!s.done;o={nh:void 0},s=r.next()){o.nh=s.value,s=v(t);for(var u=s.next();!u.done;u=s.next())if(u=u.value.decodingInfos.find(function(d){return function(g){return g.supported&&g.keySystemAccess!=null&&g.keySystemAccess.keySystem==d.nh}}(o)))return u.keySystemAccess}for(r=v([!0,!1]),o=r.next();!o.done;o=r.next())for(o=o.value,s=v(t),u=s.next();!u.done;u=s.next()){u=v(u.value.decodingInfos);for(var a=u.next();!a.done;a=u.next())if(a=a.value,a.supported&&a.keySystemAccess){var l=a.keySystemAccess.keySystem;if(!i.includes(l)){var f=n.get(l);for(!f&&e.g.keySystemsMapping[l]&&(f=n.get(e.g.keySystemsMapping[l])),l=v(f),f=l.next();!f.done;f=l.next())if(!!f.value.licenseServerUri==o)return a.keySystemAccess}}}return null}function o2(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E;return U(function(M){switch(M.g){case 1:if(t.size==1&&t.has(""))throw new _(2,6,6e3);for(i=v(t.values()),r=i.next();!r.done;r=i.next())o=r.value,o.audioCapabilities.length==0&&delete o.audioCapabilities,o.videoCapabilities.length==0&&delete o.videoCapabilities;s=v(e.g.preferredKeySystems),u=s.next();case 2:if(u.done){M.s(4);break}if(a=u.value,!t.has(a)){M.s(3);break}return l=t.get(a),ge(M,6),A(M,navigator.requestMediaKeySystemAccess(a,[l]),8);case 8:return n=M.h,M.return(n);case 6:Se(M);case 7:ht(e.l);case 3:u=s.next(),M.s(2);break;case 4:f=v([!0,!1]),d=f.next();case 9:if(d.done){M.s(11);break}g=d.value,m=v(t.keys()),y=m.next();case 12:if(y.done){d=f.next(),M.s(9);break}if(x=y.value,S=t.get(x),E=S.drmInfos.some(function(L){return!!L.licenseServerUri}),E!=g){M.s(13);break}return ge(M,15),A(M,navigator.requestMediaKeySystemAccess(x,[S]),17);case 17:return n=M.h,M.return(n);case 15:Se(M);case 16:ht(e.l);case 13:y=m.next(),M.s(12);break;case 11:return M.return(n)}})}function lh(e){Ju(e)&&e.m.resolve()}function hy(e,t){new Be(function(){t.loaded=!0,lh(e)}).da(g2)}function py(e,t,n){var i,r,o,s,u,a,l;return U(function(f){switch(f.g){case 1:try{i=e.A.createSession("persistent-license")}catch(d){return r=new _(2,6,6005,d.message),e.u(r),f.return(Promise.reject(r))}return e.o.D(i,"message",function(d){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(d):ch(e,d)}),e.o.D(i,"keystatuseschange",function(d){return gy(e,d)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Vf:1/0,ub:null,type:"persistent-license"},e.i.set(i,o),ge(f,2),A(f,i.load(t),4);case 4:return s=f.h,ht(e.l),s||(e.i.delete(i),u=e.g.persistentSessionOnlinePlayback?1:2,e.u(new _(u,6,6013)),o.loaded=!0),hy(e,o),lh(e),f.return(i);case 2:a=Se(f),ht(e.l,a),e.i.delete(i),l=e.g.persistentSessionOnlinePlayback?1:2,e.u(new _(l,6,6005,a.message)),o.loaded=!0,lh(e);case 3:return f.return(Promise.resolve())}})}function s2(e,t,n,i){try{var r=e.A.createSession(i)}catch(o){e.u(new _(2,6,6005,o.message));return}e.o.D(r,"message",function(o){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(o):ch(e,o)}),e.o.D(r,"keystatuseschange",function(o){return gy(e,o)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Vf:1/0,ub:null,type:i});try{n=e.g.initDataTransform(n,t,e.h)}catch(o){t=o,o instanceof _||(t=new _(2,6,6016,o)),e.u(t);return}e.g.logLicenseExchange&&Tr(n),r.generateRequest(t,n).catch(function(o){if(!e.l.g){e.i.delete(r);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.u(new _(2,6,6006,o.message,o,u))}})}function u2(e){return U(function(t){return t.g==1?e.K?A(t,e.m,3):t.s(0):A(t,Promise.all(e.T.map(function(n){return n.promise})),0)})}function ch(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x;U(function(S){switch(S.g){case 1:if(n=t.target,e.g.logLicenseExchange&&Tr(t.message),i=e.i.get(n),r=e.h.licenseServerUri,o=e.g.advanced[e.h.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(r=o.individualizationServer),s=qt([r],e.g.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.h,i&&(s.initData=i.initData,s.initDataType=i.initDataType),o&&o.headers)for(u in o.headers)s.headers[u]=o.headers[u];if(e.h.keySystem==="org.w3.clearkey"){var E=s,M=e.h;try{var L=tr(E.body);if(L){var P=JSON.parse(L);P.type||(P.type=M.sessionType,E.body=ji(JSON.stringify(P)))}}catch{}}if(xd(e.h.keySystem))if(E=Qr(s.body,!0,!0),E.includes("PlayReadyKeyMessage")){for(E=Uo(E,"PlayReadyKeyMessage"),M=zi(E,"HttpHeader"),M=v(M),L=M.next();!L.done;L=M.next())P=L.value,L=zi(P,"name")[0],P=zi(P,"value")[0],s.headers[Gt(L)]=Gt(P);E=zi(E,"Challenge")[0],s.body=Ti(Gt(E))}else s.headers["Content-Type"]="text/xml; charset=utf-8";return a=Date.now(),ge(S,2),f=e.C.Xb.request(2,s,{isPreload:e.P()}),e.T.push(f),A(S,f.promise,4);case 4:l=S.h,Oi(e.T,f),Pe(S,3);break;case 2:return d=Se(S),e.l.g||(g=new _(2,6,6007,d),e.i.size==1?(e.u(g),i&&i.ub&&i.ub.reject(g)):(i&&i.ub&&i.ub.reject(g),e.i.delete(n),Ju(e)&&(e.m.resolve(),e.L.da(.1)))),S.return();case 3:return e.l.g?S.return():(e.H+=(Date.now()-a)/1e3,e.g.logLicenseExchange&&Tr(l.data),ge(S,5),A(S,n.update(l.data),7));case 7:Pe(S,6);break;case 5:return m=Se(S),y=new _(2,6,6008,m.message),e.u(y),i&&i.ub&&i.ub.reject(y),S.return();case 6:if(e.l.g)return S.return();x=new re("drmsessionupdate"),e.C.onEvent(x),i&&(i.ub&&i.ub.resolve(),hy(e,i)),ie(S)}})}function gy(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(o,s){if(typeof s=="string"){var u=s;s=o,o=u}if(xd(e.h.keySystem)&&s.byteLength==16&&(_u()||Wi())){u=Ln(s);var a=u.getUint32(0,!0),l=u.getUint16(4,!0),f=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,l,!1),u.setUint16(6,f,!1)}o!="status-pending"&&(n.loaded=!0),o=="expired"&&(i=!0),s=wr(s).slice(0,32),e.Z.set(s,o)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.ub&&(e.i.delete(t),my(t)),Ju(e)&&(e.m.resolve(),e.L.da(m2))}function a2(e){var t=e.Z,n=e.fa;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.u(new _(2,6,6014)),e.C.pe(sh(n))}function l2(){var e,t,n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$;return U(function(te){if(te.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(w.MediaKeys&&w.navigator&&w.navigator.requestMediaKeySystemAccess&&w.MediaKeySystemAccess&&w.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=v(e),i=n.next();!i.done;i=n.next())r=i.value,t[r]=null;return te.return(t)}for(o="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],u=["150","2000","3000"],a={"com.widevine.alpha":s,"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":u},l=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],f=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],d={videoCapabilities:l,audioCapabilities:f,initDataTypes:["cenc","sinf","skd","keyids"]},g=[null,"cenc","cbcs","cbcs-1-9"],m=new Map,y=function(Me,he){var et,Ve,Oe,Ue,Qe,Ne,Ge,Re,je,dt,Qt,Mt,Dt;return U(function(Wt){switch(Wt.g){case 1:return ge(Wt,2),A(Wt,he.createMediaKeys(),5);case 5:et=Wt.h;case 4:Pe(Wt,3);break;case 2:return Se(Wt),Wt.return();case 3:if(Oe=(Ve=he.getConfiguration().sessionTypes)?Ve.includes("persistent-license"):!1,vr()&&(Oe=!1),Ue=he.getConfiguration().videoCapabilities,Qe=he.getConfiguration().audioCapabilities,Ne={persistentState:Oe,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},m.has(Me)&&m.get(Me)?Ne=m.get(Me):m.set(Me,Ne),(Ge=Ue[0].encryptionScheme)&&!Ne.encryptionSchemes.includes(Ge)&&Ne.encryptionSchemes.push(Ge),(Re=Ue[0].robustness)&&!Ne.videoRobustnessLevels.includes(Re)&&Ne.videoRobustnessLevels.push(Re),(je=Qe[0].robustness)&&!Ne.audioRobustnessLevels.includes(je)&&Ne.audioRobustnessLevels.push(je),"getStatusForPolicy"in et){for(dt=[],Qt=v(o),Mt=Qt.next(),Dt={};!Mt.done;Dt={td:void 0},Mt=Qt.next())Dt.td=Mt.value,Ne.minHdcpVersions.includes(Dt.td)||dt.push(et.getStatusForPolicy({minHdcpVersion:Dt.td}).then(function(en){return function(ss){ss!="usable"||Ne.minHdcpVersions.includes(en.td)||Ne.minHdcpVersions.push(en.td)}}(Dt)));return A(Wt,Promise.all(dt),0)}Wt.s(0)}})},x=function(Me,he,et,Ve){var Oe,Ue,Qe,Ne,Ge,Re,je,dt,Qt,Mt;return U(function(Dt){switch(Dt.g){case 1:for(ge(Dt,2),Oe=Xi(d),Ue=v(Oe.videoCapabilities),Qe=Ue.next();!Qe.done;Qe=Ue.next())Ne=Qe.value,Ne.encryptionScheme=he,Ne.robustness=et;for(Ge=v(Oe.audioCapabilities),Re=Ge.next();!Re.done;Re=Ge.next())je=Re.value,je.encryptionScheme=he,je.robustness=Ve;return dt=Xi(Oe),dt.persistentState="required",dt.sessionTypes=["persistent-license"],Qt=[dt,Oe],$r()?A(Dt,Wu(5,navigator.requestMediaKeySystemAccess(Me,Qt)),7):A(Dt,navigator.requestMediaKeySystemAccess(Me,Qt),6);case 6:Mt=Dt.h,Dt.s(5);break;case 7:Mt=Dt.h;case 5:return A(Dt,y(Me,Mt),8);case 8:Pe(Dt,0);break;case 2:Se(Dt),ie(Dt)}})},S=function(Me,he,et,Ve){var Oe,Ue,Qe;return U(function(Ne){switch(Ne.g){case 1:return ge(Ne,2),Oe={type:"media-source",video:{contentType:l[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:f[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:Me,video:{encryptionScheme:he,robustness:et},audio:{encryptionScheme:he,robustness:Ve}}},$r()?A(Ne,Wu(5,navigator.mediaCapabilities.decodingInfo(Oe)),7):A(Ne,navigator.mediaCapabilities.decodingInfo(Oe),6);case 6:Ue=Ne.h,Ne.s(5);break;case 7:Ue=Ne.h;case 5:return Qe=Ue.keySystemAccess,A(Ne,y(Me,Qe),8);case 8:Pe(Ne,0);break;case 2:Se(Ne),ie(Ne)}})},E=v(e),M=E.next();!M.done;M=E.next())L=M.value,m.set(L,null);for(P=function(Me){return!(Me==="org.w3.clearkey"&&sn())},b=[],D=v(g),k=D.next();!k.done;k=D.next())for(N=k.value,j=v(e),V=j.next();!V.done;V=j.next())F=V.value,P(F)&&(b.push(x(F,N,"","")),b.push(S(F,N,"","")));for(B=v(e),H=B.next();!H.done;H=B.next())for(G=H.value,z=v(a[G]||[]),W=z.next();!W.done;W=z.next())$=W.value,P(G)&&(b.push(x(G,null,$,"")),b.push(x(G,null,"",$)),b.push(S(G,null,$,"")),b.push(S(G,null,"",$)));return A(te,Promise.all(b),2)}return te.return(sh(m))})}function my(e){return U(function(t){if(t.g==1)return ge(t,2),A(t,Wu(p2,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return Pe(t,0);Se(t),ie(t)})}function Qu(e){var t;return U(function(n){return t=Array.from(e.i.entries()),e.i.clear(),A(n,Promise.all(t.map(function(i){i=v(i);var r=i.next().value,o=i.next().value;return U(function(s){if(s.g==1)return ge(s,2),e.ka||e.B.has(r.sessionId)||o.type!=="persistent-license"||e.g.persistentSessionOnlinePlayback?A(s,my(r),5):A(s,r.remove(),5);if(s.g!=2)return Pe(s,0);Se(s),ie(s)})})),0)})}function vy(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function c2(e){e.i.forEach(function(t,n){var i=t.Vf,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.C.onExpirationUpdated(n.sessionId,r),t.Vf=r)})}function Ju(e){return e=e.i.values(),$A(e,function(t){return t.loaded})}function f2(e){for(var t=v(e.h&&e.h.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function d2(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=v(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function yy(e,t,n,i,r,o,s,u){var a=[];e=v(e);for(var l=e.next(),f={};!l.done;f={va:void 0},l=e.next()){if(f.va=l.value,t.includes(f.va.encryptionScheme)||t.push(f.va.encryptionScheme),f.va.keySystem=="org.w3.clearkey"&&f.va.licenseServerUri.startsWith("data:application/json;base64,")?a.includes(f.va.licenseServerUri)||a.push(f.va.licenseServerUri):n.includes(f.va.licenseServerUri)||n.push(f.va.licenseServerUri),r.includes(f.va.serverCertificateUri)||r.push(f.va.serverCertificateUri),f.va.serverCertificate&&(i.some(function(m){return function(y){return mr(y,m.va.serverCertificate)}}(f))||i.push(f.va.serverCertificate)),f.va.initData){l=v(f.va.initData);for(var d=l.next(),g={};!d.done;g={Mf:void 0},d=l.next())g.Mf=d.value,o.some(function(m){return function(y){var x=m.Mf;return y.keyId&&y.keyId==x.keyId?!0:y.initDataType==x.initDataType&&mr(y.initData,x.initData)}}(g))||o.push(g.Mf)}if(f.va.keyIds)for(l=v(f.va.keyIds),d=l.next();!d.done;d=l.next())s.add(d.value);if(f.va.keySystemUris&&u)for(f=v(f.va.keySystemUris),l=f.next();!l.done;l=f.next())u.add(l.value)}if(a.length==1)n.push(a[0]);else if(0<a.length){for(t=[],a=v(a),i=a.next();!i.done;i=a.next())i=w.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,Q(i.keys));a=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+w.btoa(a))}}function h2(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(r)&&(t=t.get(r),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),w.cast&&w.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function Ty(e,t){if(e=Ko(e),e.size!=0){e=av(e),t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var p2=1,g2=5,m2=.5;function Jl(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=v(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}Jl.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var i;if(!(i=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(i=n.audio&&e.audio)){i=n.audio;var r=e.audio;i=!(!((!i.channelsCount||!r.channelsCount||2<i.channelsCount||2<r.channelsCount)&&i.channelsCount!=r.channelsCount||i.spatialAudio!==r.spatialAudio||t&&!wy(i,r))&&Sy(i.roles,r.roles)&&i.groupId===r.groupId)}return!i&&(i=n.video&&e.video)&&(n=n.video,i=e.video,i=!((!t||wy(n,i))&&Sy(n.roles,i.roles))),i?!1:(this.g.add(e),!0)},Jl.prototype.values=function(){return this.g.values()};function wy(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return io(i)}),t=t.codecs.split(",").map(function(i){return io(i)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Sy(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=v(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}R("shaka.media.AdaptationSet",Jl),R("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function fh(){}fh.prototype.create=function(){},fh.prototype.configure=function(){},R("shaka.media.AdaptationSetCriteria",fh);function v2(){this.g=Zu,this.i=new Map().set(Zu,2).set(bs,1),this.h=0}var bs=0,Zu=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function dh(e,t,n){this.g=e,this.i=t,this.h=n}function xy(e,t){return U(function(n){if(n.g==1)return A(n,OA(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||Ov(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(Yu))throw new _(2,4,4032);return n.return(Ay(e,t))})}function Ey(e,t){var n=e.g.restrictions;e=e.i;var i=!1;t=v(t.variants);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=r.allowedByApplication;r.allowedByApplication=Hl(r,n,e),o!=r.allowedByApplication&&(i=!0)}return i}function Ay(e,t){var n=Ey(e,t);if(t){var i=e.h?e.h.h:null;if(i&&e.h.A)for(var r=v(t.variants),o=r.next();!o.done;o=r.next())o=o.value,hh(e,i.keySystem,o.video),hh(e,i.keySystem,o.audio);Iy(e,t)}return n}function hh(e,t,n){if(n){n=v(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=v(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,$u(e.h,r.initDataType,r.initData)}}}function Iy(e,t){e=e.h?e.h.Yd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var i=!1,r=!1,o=new Set,s=new Set;t=v(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var a=[];u.audio&&a.push(u.audio),u.video&&a.push(u.video),a=v(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.keyIds.size){l=v(l.keyIds);for(var f=l.next();!f.done;f=l.next()){f=f.value;var d=e[n?"00":f];d?ph.includes(d)&&s.add(d):o.add(f)}}u.allowedByApplication?u.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new _(2,4,4012,e)}var ph=["output-restricted","internal-error"];function ea(){}function Wo(e,t){Fs.set(e,t)}function y2(){var e={};if(er())for(var t=v(Fs.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=v(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=er()?Fs.has(n):Lu(n);return e}function My(e,t){if(t){var n=Fs.get(t.toLowerCase());if(n)return n}throw new _(2,4,4e3,e,t)}R("shaka.media.ManifestParser",ea),ea.unregisterParserByMime=function(e){Fs.delete(e)},ea.registerParserByMime=Wo,ea.registerParserByExtension=function(){Ye("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},ea.AccessibilityPurpose={Nk:"visually impaired",dk:"hard of hearing"};var Fs=new Map;function Zl(e,t){var n=null,i=null,r=null,o=null,s=e.S();return t&1&&(r=e.bd()),t&2&&(o=e.S()),t&8&&(n=e.S()),t&16&&(i=e.S()),{trackId:s,ld:n,md:i,Wh:r,rh:o}}function ec(e,t){return t==1?(t=e.S(),e=e.S(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.S()}}function tc(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.S(),e.skip(4),e=e.na(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function nc(e,t,n){var i=e.S(),r=[],o=null;n&1&&(o=e.$f()),n&4&&e.skip(4);for(var s=0;s<i;s++){var u={gg:null,sampleSize:null,ye:null};n&256&&(u.gg=e.S()),n&512&&(u.sampleSize=e.S()),n&1024&&e.skip(4),n&2048&&(u.ye=t==0?e.S():e.$f()),r.push(u)}return{Sk:i,fg:r,nf:o}}function Cy(e){e.skip(6),e.skip(2),e.skip(8);var t=e.na();return e.skip(2),e.skip(2),e.skip(2),e=e.na()+e.na()/65536,{channelCount:t,sampleRate:e}}function ky(e){return e=e.S(),{codec:Yl(e)}}function T2(e){var t=null,n=null,i=e.Cb(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),r==="nclx"){switch(e.na()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.na(),e.na(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,Nd:n}}function ta(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Yn(e){return(10>e?"0":"")+e}function Xo(e){if(!_y){_y=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);ic=ze("ftyp",t,i,t,n),t=ze("dref",R2),gh=ze("dinf",t)}this.g=e}function Bs(e){for(var t=[],n=v(e.g),i=n.next();!i.done;i=n.next()){var r=t,o=r.push,s=i.value;i=ze;var u=s.id+1,a=s.stream.width||0,l=s.stream.height||0;s.type=="audio"&&(l=a=0);var f=s.duration*s.timescale,d=Math.floor(f/(uo+1));switch(f=Math.floor(f%(uo+1)),u=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(Q(xt(u,4)),[0,0,0,0],Q(xt(d,4)),Q(xt(f,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],Q(xt(a,2)),[0,0],Q(xt(l,2)),[0,0])),u=ze("tkhd",u),a=ze,d=s.duration*s.timescale,l=Math.floor(d/(uo+1)),d=Math.floor(d%(uo+1)),f=s.stream.language,f=f.charCodeAt(0)-96<<10|f.charCodeAt(1)-96<<5|f.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(Q(xt(s.timescale,4)),Q(xt(l,4)),Q(xt(d,4)),Q(xt(f,2)),[0,0])),l=ze("mdhd",l),d=s,f=new Uint8Array([]),d.type){case"video":f=S2;break;case"audio":f=x2}d=ze("hdlr",f);e:{switch(s.type){case"video":s=ze("minf",ze("vmhd",C2),gh,Dy(s));break e;case"audio":s=ze("minf",ze("smhd",k2),gh,Dy(s));break e}s=new Uint8Array([])}s=a("mdia",l,d,s),i=i("trak",u,s),o.call(r,i)}for(t=Nt.apply(fn,Q(t)),o=e.g[0],n=ze,i=o.duration*o.timescale,r=Math.floor(i/(uo+1)),i=Math.floor(i%(uo+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(Q(xt(o.timescale,4)),Q(xt(r,4)),Q(xt(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=ze("mvhd",r),i=[],e=v(e.g),a=e.next();!a.done;a=e.next())s=i,u=s.push,a=new Uint8Array([0,0,0,0].concat(Q(xt(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=ze("trex",a),u.call(s,a);if(e=Nt.apply(fn,Q(i)),e=ze("mvex",e),i=[],o.encrypted){for(o=v(o.stream.drmInfos),s=o.next();!s.done;s=o.next())if(s=s.value,s.initData)for(s=v(s.initData),u=s.next();!u.done;u=s.next())i.push(u.value.initData);o=Nt.apply(fn,Q(i))}else o=new Uint8Array([]);return e=n("moov",r,t,e,o),t=new Uint8Array(ic.byteLength+e.byteLength),t.set(ic),t.set(e,ic.byteLength),t}function Dy(e){var t=ze,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=vr()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,0<e.Ca.byteLength)var r=ze("avcC",e.Ca);else{r=ze;for(var o=7,s=[],u=[],a=0,l=0,f=0,d=0;d<e.lb.length;d++){var g=Py(e.lb[d]);switch(g[0]&31){case 7:s.push(g),o+=g.length+2;break;case 8:u.push(g),o+=g.length+2}}for(0<s.length&&(a=s[0][1],f=s[0][2],l=s[0][3]),o=new Uint8Array(o),d=0,o[d++]=1,o[d++]=a,o[d++]=f,o[d++]=l,o[d++]=255,o[d++]=224|s.length,a=0;a<s.length;a++)o[d++]=(s[a].length&65280)>>8,o[d++]=s[a].length&255,o.set(s[a],d),d+=s[a].length;for(o[d++]=u.length,s=0;s<u.length;s++)o[d++]=(u[s].length&65280)>>8,o[d++]=u[s].length&255,o.set(u[s],d),d+=u[s].length;r=r("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(Q(xt(n,2)),Q(xt(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",u=Ry(e),s=new Uint8Array([]),e.encrypted&&(s=zo(0,e.stream,e.codecs),i="encv"),i=ze(i,n,r,u,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Ca.byteLength&&(n=ze("hvcC",e.Ca)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(Q(xt(i,2)),Q(xt(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",u=Ry(e),s=new Uint8Array([]),e.encrypted&&(s=zo(0,e.stream,e.codecs),r="encv"),i=ze(r,i,n,u,s));break;case"audio":n=="mp3"?e=ze(".mp3",na(e)):n=="ac-3"?(n=ze("dac3",e.ra),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=ze(i,na(e),n,r)):n=="ec-3"?(n=ze("dec3",e.ra),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=ze(i,na(e),n,r)):n=="opus"?(n=ze("dOps",e.ra),i="Opus",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=ze(i,na(e),n,r)):(0<e.ra.byteLength?n=ze("esds",e.ra):(n=ze,i=e.id+1,r=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=xs("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=l[s],(a==="mp4a.40.5"||a==="mp4a.40.29")&&(u=l[2*s]),s=parseInt(a.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(Q(xt(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=ze(i,na(e),n,r)),i=e}return e=ze("stsd",D2,i),t("stbl",e,ze("stts",E2),ze("stsc",A2),ze("stsz",M2),ze("stco",I2))}function Ry(e){if(!e.Ia&&!e.Ka)return new Uint8Array([]);var t=e.Ka;return e=new Uint8Array([].concat(Q(xt(e.Ia,4)),Q(xt(t,4)))),ze("pasp",e)}function na(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(Q(xt(e.stream.audioSamplingRate||44100,2)),[0,0]))}function zo(e,t,n){e=ze,n=new Uint8Array([].concat(Q(xt(Ly(n.split(".")[0]),4)))),n=ze("frma",n);var i="cenc",r=t.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=new Uint8Array([0,0,0,0].concat(Q(xt(Ly(i),4)),[0,1,0,0])),i=ze("schm",i),r=ze;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t=v(t.drmInfos);for(var s=t.next();!s.done;s=t.next())if((s=s.value)&&s.keyIds&&s.keyIds.size){s=v(s.keyIds);for(var u=s.next();!u.done;u=s.next())o=Py(u.value)}return t=new Uint8Array([0,0,0,0,0,0,1,8]),t=ze("tenc",t,o),e("sinf",n,i,r("schi",t))}function ia(e){var t=[];e=v(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,o=ze,s=new Uint8Array([0,0,0,0].concat(Q(xt(n.data?n.data.Db:0,4))));s=ze("mfhd",s);var u,a=n.data?n.data.jb:[],l=new Uint8Array(4+a.length);for(u=0;u<a.length;u++){var f=a[u].flags;l[u+4]=f.Ya<<4|f.$a<<2|f.Za}a=ze("sdtp",l);var d=a.length+92;l=ze,u=new Uint8Array([0,0,0,58].concat(Q(xt(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=ze("tfhd",u),f=n.data?n.data.baseMediaDecodeTime:0;var g=Math.floor(f%(uo+1));f=new Uint8Array([1,0,0,0].concat(Q(xt(Math.floor(f/(uo+1)),4)),Q(xt(g,4)))),f=ze("tfdt",f);var m=d;d=n.data?n.data.jb:[],g=d.length;var y=12+16*g,x=new Uint8Array(y);for(m+=8+y,x.set([n.type==="video"?1:0,0,15,1].concat(Q(xt(g,4)),Q(xt(m,4))),0),m=0;m<g;m++){var S=d[m];y=xt(S.duration,4);var E=xt(S.size,4),M=S.flags;S=xt(S.eb,4),x.set([].concat(Q(y),Q(E),[M.hb<<2|M.Ya,M.$a<<6|M.Za<<4|M.ib,M.Xa&61440,M.Xa&15],Q(S)),12+16*m)}d=ze("trun",x),a=l("traf",u,f,d,a),o=o("moof",s,a),r.call(i,t,[o,w2(n)])}return Nt.apply(fn,Q(t))}function w2(e){return e=(e.data?e.data.jb:[]).map(function(t){return t.data}),e=Nt.apply(fn,Q(e)),ze("mdat",e)}function xt(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function Py(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Ly(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function ze(e){var t=tn.apply(1,arguments),n=Ny.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Ny.set(e,n));for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var _y=!1,uo=Math.pow(2,32)-1,Ny=new Map,S2=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x2=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),E2=new Uint8Array([0,0,0,0,0,0,0,0]),A2=new Uint8Array([0,0,0,0,0,0,0,0]),I2=new Uint8Array([0,0,0,0,0,0,0,0]),M2=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),C2=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),k2=new Uint8Array([0,0,0,0,0,0,0,0]),D2=new Uint8Array([0,0,0,0,0,0,0,1]),ic=new Uint8Array([]),R2=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),gh=new Uint8Array([]);function P2(e,t,n){function i(m){d.push({box:m,hh:1701733217})}function r(m){d.push({box:m,hh:1701733238})}function o(m){a=!0,m.parser.stop()}function s(m){f.push(m),Fe(m)}var u=t=De(t),a=!1,l,f=[],d=[];if(new ft().box("moov",s).box("trak",s).box("mdia",s).box("minf",s).box("stbl",s).R("stsd",function(m){l=m,f.push(m),oo(m)}).R("encv",o).R("enca",o).R("dvav",r).R("dva1",r).R("dvh1",r).R("dvhe",r).R("dvc1",r).R("dvi1",r).R("hev1",r).R("hvc1",r).R("avc1",r).R("avc3",r).R("ac-3",i).R("ec-3",i).R("ac-4",i).R("Opus",i).R("fLaC",i).R("mp4a",i).parse(t),a)return t;if(d.length==0||!l)throw wr(t),new _(2,3,3019,n);d.reverse(),n=v(d);for(var g=n.next();!g.done;g=n.next())g=g.value,u=N2(e,u,l,g.box,f,g.hh);return _u()&&Ed()&&!Gi()?(e=new Uint8Array(t.byteLength+u.byteLength),e.set(u),e.set(t,u.byteLength),e):u}function L2(e){e=De(e);var t=[];new ft().box("mdat",function(s){t.push(s)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],o=t[i];n.push(_2(e.subarray(r?r.start+r.size:0,o.start+o.size)))}return Nt.apply(fn,Q(n))}function _2(e){function t(d){s.push(d),Fe(d)}var n,i,r,o,s=[];if(new ft().box("moof",t).box("traf",t).R("tfhd",function(d){n=d,r=Zl(d.reader,d.flags)}).R("trun",function(d){i=d,o=nc(d.reader,d.version,d.flags)}).parse(e),r&&r.rh!==2){var u=n.start+so(n)+4+(r.Wh!==null?8:0),a=Ln(e);if(r.rh!==null)a.setUint32(u,2);else{rc(e,n.start,n.size+4);var l=a.getUint32(n.start+8);a.setUint32(n.start+8,l|2),o&&o.nf!==null&&a.setInt32(i.start+so(i)+4,o.nf+4),l=e.subarray(0,u),a=e.subarray(u),e=new Uint8Array(e.byteLength+4),e.set(l),l=[];for(var f=3;0<=f;f--)l.push(2>>8*f&255);for(e.set(new Uint8Array(l),u),e.set(a,u+4),u=v(s),a=u.next();!a.done;a=u.next())a=a.value,rc(e,a.start,a.size+4)}}return e}function N2(e,t,n,i,r,o){var s=zo(new Xo([]),e,i.name),u=t.subarray(i.start,i.start+i.size);for(e=new Uint8Array(i.size+s.byteLength),e.set(u,0),Ln(e).setUint32(4,o),e.set(s,i.size),rc(e,0,e.byteLength),o=new Uint8Array(t.byteLength+e.byteLength),i=sn()||Gi()||_u()?i.start:i.start+i.size,s=t.subarray(i),o.set(t.subarray(0,i)),o.set(e,i),o.set(s,i+e.byteLength),t=v(r),r=t.next();!r.done;r=t.next())r=r.value,rc(o,r.start,r.size+e.byteLength);return e=Ln(o,n.start),n=so(n),t=e.getUint32(n),e.setUint32(n,t+1),o}function rc(e,t,n){e=Ln(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function j2(e){function t(r){i.push({start:r.start,size:r.size}),Fe(r)}var n=De(e),i=[];return new ft().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(r){i.push({start:r.start,size:r.size});for(var o=Ln(n,r.start),s=0;s<r.size-3;s++){var u=o.getUint32(s);u==1633889587?o.setUint32(s,1700998451):u==1684103987&&o.setUint32(s,1684366131)}}).parse(n),n}function jn(e,t,n,i,r,o,s,u){this.N=e,this.Sa=t,this.wa=n,this.Wc=i===void 0?null:i,this.timescale=r===void 0?null:r,this.h=o===void 0?null:o,this.aesKey=s===void 0?null:s,this.g=this.mimeType=this.codecs=null,this.encrypted=u===void 0?!1:u}jn.prototype.uc=function(){return this.Sa},jn.prototype.tc=function(){return this.wa},jn.prototype.Kd=function(e){this.h=e},jn.prototype.Ib=function(){return this.h};function oc(e,t){return e===t?!0:e&&t?e.uc()==t.uc()&&e.tc()==t.tc()&&As(e.N().sort(),t.N().sort())&&mr(e.Ib(),t.Ib()):e==t}R("shaka.media.InitSegmentReference",jn),jn.prototype.getEndByte=jn.prototype.tc,jn.prototype.getStartByte=jn.prototype.uc;function ye(e,t,n,i,r,o,s,u,a,l,f,d,g,m,y,x){for(l=l===void 0?[]:l,m=m===void 0?Dr:m,this.startTime=e,this.j=this.endTime=t,this.C=n,this.Sa=i,this.wa=r,this.Y=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.g=l,this.tilesLayout=f===void 0?"":f,this.B=d===void 0?null:d,this.h=g===void 0?null:g,this.status=m,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=y===void 0?null:y,this.thumbnailSprite=null,this.i=-1,this.A=x===void 0?!1:x,this.F=this.o=!1,e=v(this.g),t=e.next();!t.done;t=e.next())t.value.fh();this.A&&this.g.length&&this.g[this.g.length-1].eh(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}h=ye.prototype,h.N=function(){return this.C()},h.getStartTime=function(){return this.startTime},h.mi=function(){return this.endTime},h.uc=function(){return this.Sa},h.tc=function(){return this.wa},h.Ji=function(){return this.tilesLayout},h.Ii=function(){return this.B},h.dc=function(){return this.status},h.aj=function(){this.status=Oy},h.Sf=function(){this.preload=!0},h.isPreload=function(){return this.preload},h.Vc=function(){this.l=!1},h.Ti=function(){return this.l},h.fh=function(){this.o=!0},h.Vi=function(){return this.o},h.eh=function(){this.F=!0},h.Ui=function(){return this.F},h.dh=function(){this.m=!0},h.Pi=function(){return this.m},h.De=function(e){this.thumbnailSprite=e},h.Gi=function(){return this.thumbnailSprite},h.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=v(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},h.qg=function(e){this.h==null?fe("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},h.Kd=function(e,t){this.u=e,this.G=t===void 0?!1:t},h.Ib=function(e){var t=this.u;return(e===void 0||e)&&this.G&&(this.u=null),t};function jy(e,t){e.Y=t,e=v(e.g);for(var n=e.next();!n.done;n=e.next())jy(n.value,t)}R("shaka.media.SegmentReference",ye),ye.prototype.getSegmentData=ye.prototype.Ib,ye.prototype.setSegmentData=ye.prototype.Kd,ye.prototype.syncAgainst=ye.prototype.qg,ye.prototype.offset=ye.prototype.offset,ye.prototype.getThumbnailSprite=ye.prototype.Gi,ye.prototype.setThumbnailSprite=ye.prototype.De,ye.prototype.hasByterangeOptimization=ye.prototype.Pi,ye.prototype.markAsByterangeOptimization=ye.prototype.dh,ye.prototype.isLastPartial=ye.prototype.Ui,ye.prototype.markAsLastPartial=ye.prototype.eh,ye.prototype.isPartial=ye.prototype.Vi,ye.prototype.markAsPartial=ye.prototype.fh,ye.prototype.isIndependent=ye.prototype.Ti,ye.prototype.markAsNonIndependent=ye.prototype.Vc,ye.prototype.isPreload=ye.prototype.isPreload,ye.prototype.markAsPreload=ye.prototype.Sf,ye.prototype.markAsUnavailable=ye.prototype.aj,ye.prototype.getStatus=ye.prototype.dc,ye.prototype.getTileDuration=ye.prototype.Ii,ye.prototype.getTilesLayout=ye.prototype.Ji,ye.prototype.getEndByte=ye.prototype.tc,ye.prototype.getStartByte=ye.prototype.uc,ye.prototype.getEndTime=ye.prototype.mi,ye.prototype.getStartTime=ye.prototype.getStartTime,ye.prototype.getUris=ye.prototype.N;var Dr=0,Oy=1;ye.Status={Nj:Dr,Lk:Oy,lk:2};function ra(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function mh(e){return!e||ra(e)?null:e.length?e.end(e.length-1):null}function vh(e,t){return!e||!e.length||ra(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Uy(e,t){if(!e||!e.length||ra(e))return 0;var n=0;e=v(Rr(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function O2(e,t,n){return!e||!e.length||ra(e)?null:(e=Rr(e).findIndex(function(i,r,o){return i.start>t&&(r==0||o[r-1].end-t<=n)}),0<=e?e:null)}function Rr(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function by(){}function Fy(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function ao(e){for(;e.firstChild;)e.removeChild(e.firstChild)}R("shaka.util.Dom",by),by.removeAllChildren=ao;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function yh(){}function By(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Vy(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Th(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function U2(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=St(De(e.data,1,n)),r=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return null;var s=St(De(e.data,3+n,o)),u;return i==="-->"?u=St(De(e.data,4+n+o)):u=yi(e.data.subarray(4+n+o)),t.mimeType=i,t.pictureType=r,t.description=s,t.data=u,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=St(De(e.data,1,i)),e=St(De(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=St(De(e.data,1,i)),e=St(De(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=St(De(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=yi(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=St(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=St(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=yi(e.data),t):null}function qo(e){for(var t=0,n=[];By(e,t);){var i=Th(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),o=Th(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:o,data:r.subarray(10,10+o)},(o=U2(r))&&n.push(o),t+=r.size+10}Vy(e,t)&&(t+=10)}return n}function Vs(e,t){for(var n=t=t===void 0?0:t,i=0;By(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Th(e,t+6),Vy(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}R("shaka.util.Id3Utils",yh),yh.getID3Data=Vs,yh.getID3Frames=qo;function Pr(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=De(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function wh(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new vt(n,0).S(),e.g=8*i,e.i-=i)}function $n(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,wh(e)}e.h<<=t,e.g-=t}function Ke(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&wh(e),n=t-n,0<n?i<<n|Ke(e,n):i}function Sh(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return wh(e),t+Sh(e)}function On(e){$n(e,1+Sh(e))}function ce(e){var t=Sh(e);return Ke(e,t+1)-1}function Hs(e){return e=ce(e),1&e?1+e>>>1:-1*(e>>>1)}function ve(e){return Ke(e,1)===1}function tt(e){return Ke(e,8)}function sc(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=Hs(e),i=(n+i+256)%256),n=i===0?n:i}function b2(e){return tt(e),ce(e),ce(e)}R("shaka.util.ExpGolomb",Pr);function yt(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.u=null}h=yt.prototype,h.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},h.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Eh(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var o=!!(e[r+1]&64),s=((e[r+1]&31)<<8)+e[r+2];if(1<(e[r+3]&48)>>4){var u=r+5+e[r+4];if(u==r+188)continue}else u=r+4;switch(s){case 0:o&&(u+=e[u]+1),this.G=(e[u+10]&31)<<8|e[u+11];break;case 17:case 8191:break;case this.G:o&&(u+=e[u]+1),o=e,s={audio:-1,video:-1,ce:-1,audioCodec:"",videoCodec:""};var a=u+3+((o[u+1]&15)<<8|o[u+2])-4;for(u+=12+((o[u+10]&15)<<8|o[u+11]);u<a;){var l=(o[u+1]&31)<<8|o[u+2],f=(o[u+3]&15)<<8|o[u+4];switch(o[u]){case 6:if(0<f)for(var d=u+5,g=f;2<g;){var m=o[d+1]+2;switch(o[d]){case 5:var y=kd(o.subarray(d+2,d+m));s.audio==-1&&y==="Opus"?(s.audio=l,s.audioCodec="opus"):s.video==-1&&y==="AV01"&&(s.video=l,s.videoCodec="av1");break;case 106:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 122:s.audio==-1&&(s.audio=l,s.audioCodec="ec3");break;case 124:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 127:s.audioCodec=="opus"&&(y=null,o[d+2]===128&&(y=o[d+3]),y!=null&&(this.F={channelCount:(y&15)===0?2:y&15,Zh:y,sampleRate:48e3}))}d+=m,g-=m}break;case 15:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 17:s.audio==-1&&(s.audio=l,s.audioCodec="aac-loas");break;case 21:s.ce==-1&&(s.ce=l);break;case 27:s.video==-1&&(s.video=l,s.videoCodec="avc");break;case 3:case 4:s.audio==-1&&(s.audio=l,s.audioCodec="mp3");break;case 36:s.video==-1&&(s.video=l,s.videoCodec="hvc");break;case 129:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 132:case 135:s.audio==-1&&(s.audio=l,s.audioCodec="ec3")}u+=f+5}o=s,o.video!=-1&&(this.I=o.video,this.m=o.videoCodec),o.audio!=-1&&(this.B=o.audio,this.A=o.audioCodec),o.ce!=-1&&(this.C=o.ce),i&&!this.H&&(i=!1,r=t-188),this.H=!0;break;case this.I:u=e.subarray(u,r+188),o?this.j.push([u]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(u);break;case this.B:u=e.subarray(u,r+188),o?this.i.push([u]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(u);break;case this.C:u=e.subarray(u,r+188),o?this.l.push([u]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(u);break;default:i=!0}}return this};function xh(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var r=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.u==null&&(e.u=r),n.pts=Gy(r,e.u),e.u=n.pts,n.dts=n.pts,i&64&&(i=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=Gy(i,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}h.hj=function(e){return Ye("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Xf(e,{Dd:null,state:null})},h.Xf=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,r=1;this.m=="hvc"&&(r=2);var o=t.state||0,s=o,u=0,a=[],l=-1,f=0;for(o==-1&&(l=0,f=this.m=="hvc"?e[0]>>1&63:e[0]&31,o=0,u=1);u<i;){var d=e[u++];o?o===1?o=d?0:2:d?d==1?(d=u-o-1,0<=l?a.push({data:e.subarray(l+r,d),fullData:e.subarray(l,d),type:f,time:n,state:null}):(o=a.length?a[a.length-1]:t.Dd)&&(s&&u<=4-s&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-s),o.fullData=o.fullData.subarray(0,o.fullData.byteLength-s)),0<d&&(d=e.subarray(0,d),o.data=Nt(o.data,d),o.fullData=Nt(o.fullData,d),o.state=0)),u<i?(f=this.m=="hvc"?e[u]>>1&63:e[u]&31,l=u,o=0):o=-1):o=0:o=3:o=d?0:1}return 0<=l&&0<=o&&a.push({data:e.subarray(l+r,i),fullData:e.subarray(l,i),type:f,time:n,state:o}),!a.length&&t.Dd&&(n=a.length?a[a.length-1]:t.Dd)&&(n.data=Nt(n.data,e),n.fullData=Nt(n.fullData,e)),t.state=o,a},h.getMetadata=function(){for(var e=[],t=v(this.l),n=t.next();!n.done;n=t.next())n=Nt.apply(fn,Q(n.value)),(n=xh(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:qo(n.data),dts:n.dts,pts:n.pts});return e},h.fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=v(this.i),n=t.next();!n.done;n=t.next()){var i=Nt.apply(fn,Q(n.value)),r=xh(this,i);n=this.h.length?this.h[this.h.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?(this.h.length&&r.dts<(n.dts||0)&&(e=!0),this.h.push(r)):this.h.length&&(i=r?r.data:i)&&(n=this.h.pop(),n.data=Nt(n.data,i),this.h.push(n))}e&&(this.h=this.h.sort(function(o,s){var u=(o.pts||0)-(s.pts||0);return(o.dts||0)-(s.dts||0)||u}))}return this.h},h.wc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=v(this.j),i=n.next();!i.done;i=n.next()){var r=Nt.apply(fn,Q(i.value)),o=xh(this,r);i=this.g.length?this.g[this.g.length-1]:null,o&&o.pts!=null&&o.dts!=null&&(!i||i.pts!=o.pts&&i.dts!=o.dts)?(this.g.length&&o.dts<(i.dts||0)&&(t=!0),this.g.push(o)):this.g.length&&(r=o?o.data:r)&&(i=this.g.pop(),i.data=Nt(i.data,r),this.g.push(i))}if(e){for(n={Dd:null,state:null},i=[],r=v(this.g),o=r.next();!o.done;o=r.next())o=o.value,o.nalus=this.Xf(o,n),o.nalus.length&&(i.push(o),n.Dd=o.nalus[o.nalus.length-1]);this.g=i}t&&(this.g=this.g.sort(function(s,u){var a=(s.pts||0)-(u.pts||0);return(s.dts||0)-(u.dts||0)||a}))}return e?this.g:(e=this.g,this.g=[],e)},h.getStartTime=function(e){if(e=="audio"){e=null;var t=this.fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.wc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},h.od=function(){return{audio:this.A,video:this.m}},h.be=function(){for(var e=[],t=v(this.wc()),n=t.next();!n.done;n=t.next())e.push.apply(e,Q(n.value.nalus));return e},h.Mi=function(){Ye("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Kf();return{height:e.height,width:e.width}},h.Kf=function(){return this.m=="hvc"?B2(this):F2(this)};function Hy(e){var t=e.wc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function F2(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.be();if(!n.length||(n=n.find(function(m){return m.type==7}),!n))return t;n=new Pr(n.data);var i=tt(n),r=tt(n),o=tt(n);if(On(n),V2.includes(i)){var s=ce(n);if(s===3&&$n(n,1),On(n),On(n),$n(n,1),ve(n)){s=s!==3?8:12;for(var u=0;u<s;u++)ve(n)&&(6>u?sc(n,16):sc(n,64))}}if(On(n),s=ce(n),s===0)ce(n);else if(s===1)for($n(n,1),On(n),On(n),s=ce(n),u=0;u<s;u++)On(n);On(n),$n(n,1),s=ce(n),u=ce(n);var a=Ke(n,1);a===0&&$n(n,1),$n(n,1);var l=0,f=0,d=0,g=0;return ve(n)&&(l=ce(n),f=ce(n),d=ce(n),g=ce(n)),t.height=String((2-a)*(u+1)*16-2*d-2*g),t.width=String(16*(s+1)-2*l-2*f),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2),t.frameRate=Hy(e),t}function B2(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.be();if(!n.length||(n=n.find(function(b){return b.type==33}),!n))return t;var i=new Pr(n.fullData,!0);tt(i),tt(i),Ke(i,4);var r=Ke(i,3);ve(i);var o=Ke(i,2),s=Ke(i,1),u=Ke(i,5),a=Ke(i,32);n=tt(i);for(var l=tt(i),f=tt(i),d=tt(i),g=tt(i),m=tt(i),y=tt(i),x=[],S=[],E=0;E<r;E++)x.push(ve(i)),S.push(ve(i));if(0<r)for(E=r;8>E;E++)Ke(i,2);for(E=0;E<r;E++)x[E]&&Ke(i,88),S[E]&&tt(i);ce(i),r=ce(i),r==3&&Ke(i,1),x=ce(i),S=ce(i);var M=E=0,L=0,P=0;return ve(i)&&(E+=ce(i),M+=ce(i),L+=ce(i),P+=ce(i)),t.width=String(x-(E+M)*(r===1||r===2?2:1)),t.height=String(S-(L+P)*(r===1?2:1)),i=function(b){for(var D=0,k=0;32>k;k++)D|=(b>>k&1)<<31-k;return D>>>0}(a),s=s==1?"H":"L",o="hvc1"+("."+["","A","B","C"][o]+u),o+="."+i.toString(16).toUpperCase(),o+="."+s+y,m&&(o+="."+m.toString(16).toUpperCase()),g&&(o+="."+g.toString(16).toUpperCase()),d&&(o+="."+d.toString(16).toUpperCase()),f&&(o+="."+f.toString(16).toUpperCase()),l&&(o+="."+l.toString(16).toUpperCase()),n&&(o+="."+n.toString(16).toUpperCase()),t.codec=o,t.frameRate=Hy(e),t}function Gy(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Gs(e){return!(0>Eh(e))}function Eh(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}R("shaka.util.TsParser",yt),yt.syncOffset=Eh,yt.probe=Gs,yt.prototype.getVideoInfo=yt.prototype.Kf,yt.prototype.getVideoResolution=yt.prototype.Mi,yt.prototype.getVideoNalus=yt.prototype.be,yt.prototype.getCodecs=yt.prototype.od,yt.prototype.getStartTime=yt.prototype.getStartTime,yt.prototype.getVideoData=yt.prototype.wc,yt.prototype.getAudioData=yt.prototype.fb,yt.prototype.getMetadata=yt.prototype.getMetadata,yt.prototype.parseNalus=yt.prototype.Xf,yt.prototype.parseAvcNalus=yt.prototype.hj,yt.prototype.parse=yt.prototype.parse,yt.prototype.clearData=yt.prototype.clearData,yt.Timescale=9e4;var V2=[100,110,122,244,44,83,86,118,128,138,139,134];function Ky(e,t,n,i){var r=this;this.g=e,this.K=n,this.A=null,this.ea=t,this.l=new Map,this.B=new Map,this.Aa=new Map,this.h=null,this.Ea=!1,this.I=i||null,this.u=new Map,this.o=new ke,this.j=new Map,this.L=null,this.G=new st,this.Ga="",this.Na=!1,this.sa=!0,this.$=!1,this.C=this.M=null,this.i=Ah(this,this.G),this.ya=this.H=!1,this.O=new Os(function(){return W2(r)}),this.F=!1,this.P="UNKNOWN",this.La=this.Ma=!1,this.Fa=new st,this.m=!1,this.pa=null,this.Z=new Map,this.ka=this.T=this.oa=this.W=null,this.fa=new st,this.g.remote&&(this.$=this.g.remote.state!="disconnected",this.o.D(this.g.remote,"connect",function(){r.$=r.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"connecting",function(){r.$=r.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"disconnect",function(){r.$=r.g.remote.state!="disconnected"}))}function Ah(e,t){if(e.sa=!0,w.ManagedMediaSource){e.C||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.o.D(n,"startstreaming",function(){e.sa=!0}),e.o.D(n,"endstreaming",function(){e.sa=!1})}else n=new MediaSource;return e.o.ma(n,"sourceopen",function(){URL.revokeObjectURL(e.Ga),t.resolve()}),e.o.ma(e.g,"playing",function(){e.Na=!0}),e.Ga=kh(n),e.g.removeAttribute("src"),e.M&&e.g.removeChild(e.M),e.C&&e.g.removeChild(e.C),e.M=Fy(e.Ga),e.g.appendChild(e.M),e.C&&e.g.appendChild(e.C),e.g.load(),n}function H2(e,t,n){e.g&&w.ManagedMediaSource&&e.i&&(e.C&&e.g.removeChild(e.C),e.C=Fy(t,n),e.g.appendChild(e.C),e.g.disableRemotePlayback=!1)}function G2(e,t){var n,i,r,o,s,u,a,l,f,d,g;return U(function(m){if(m.g==1)return e.createSegmentIndex?A(m,e.createSegmentIndex(),2):m.s(2);if(!e.segmentIndex)return m.return(!1);if(e.segmentIndex.getNumReferences()==0)return m.return(!0);for(n=zt,i=new Set,r=v(e.segmentIndex),o=r.next();!o.done;o=r.next())if(s=o.value,u=s.mimeType||e.mimeType||"",a=s.codecs||e.codecs||"",(u!=e.mimeType||a!=e.codecs)&&(l=u+":"+a,!i.has(l))){if(i.add(l),t==n.za){if(f=Ot(u,a),!Ps(f))return m.return(!1)}else if(t==n.la?a=Zd(a):t==n.V&&(a=zu(a,u)),d=CA(e,u,a),g=Rs(u,a),!nn(d)&&!to(g))return m.return(!1)}return m.return(!0)})}function K2(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(Q(Ir)),t={};e=v(e);for(var n=e.next();!n.done;n=e.next()){n=n.value,Ps(n)?t[n]=!0:t[n]=er()?nn(n)||!!to(n):Lu(n);var i=n.split(";")[0];t[i]=t[i]||t[n]}return t}h=Ky.prototype,h.destroy=function(){return this.O.destroy()};function W2(e){var t,n,i,r,o,s,u,a,l,f,d,g,m,y,x;return U(function(S){if(S.g==1){for(t=[],n=v(e.u),i=n.next();!i.done;i=n.next())for(r=i.value,o=v(r),s=o.next().value,u=o.next().value,a=u[0],l=s,e.u.set(l,u.slice(0,1)),a&&t.push(a.p.catch(_A)),f=v(u.slice(1)),d=f.next();!d.done;d=f.next())g=d.value,g.p.reject(new _(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),A(S,Promise.all(t),2)}for(m=v(e.j.values()),y=m.next();!y.done;y=m.next())x=y.value,x.destroy();e.o&&(e.o.release(),e.o=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.M&&(e.g.removeChild(e.M),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.M=null,e.C=null,e.A=null,e.i=null,e.h=null,e.ea=null,e.l.clear(),e.Aa.clear(),e.j.clear(),e.L=null,e.u.clear(),e.I=null,e.Z.clear(),e.K=null,ie(S)})}h.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,o,s,u,a,l,f;return U(function(d){switch(d.g){case 1:return o=zt,A(d,r.G,2);case 2:if(!Yo(r)&&!Ks(r)){d.s(3);break}return fe("Expected MediaSource to be open during init(); reopening the media source."),r.G=new st,r.i=Ah(r,r.G),A(d,r.G,3);case 3:r.F=t,r.P=n,r.Ma=i,r.La=!r.F&&r.P=="HLS"&&!r.Ma,r.Z.clear(),r.W=null,r.oa=null,r.T=null,r.ka=null,r.fa=new st,s=v(e.keys()),u=s.next();case 5:if(u.done){d.s(7);break}return a=u.value,l=e.get(a),A(d,uc(r,a,l,l.codecs),8);case 8:r.m?(r.u.set(o.V,[]),r.u.set(o.la,[])):r.u.set(a,[]),u=s.next(),d.s(5);break;case 7:(f=e.get(o.V))&&f.isAudioMuxedInVideo&&(r.m=!0),ie(d)}})};function uc(e,t,n,i){var r,o,s,u,a,l,f,d,g,m,y,x;return U(function(S){switch(S.g){case 1:return r=zt,o=K,s=Z,A(S,G2(n,t),2);case 2:if(s.call(o,S.h,"Type negotiation should happen before MediaSourceEngine.init!"),t==r.V&&i&&(i=zu(i,n.mimeType)),u=Ot(n.mimeType,i),t==r.za){ac(e,u,e.F,n.external),S.s(0);break}if(a=e.A.forceTransmux,(!nn(u)||!e.F&&Ir.includes(u))&&(a=!0),l=Rs(n.mimeType,i),!a){S.s(4);break}if(f=Nn(r.V,(i||"").split(",")),d=Nn(r.la,(i||"").split(",")),!f||!d){S.s(5);break}return e.m=!0,A(S,uc(e,r.V,n,f),6);case 6:return A(S,uc(e,r.la,n,d),7);case 7:return S.return();case 5:(g=to(l))&&(m=g(),e.j.set(t,m),u=m.convertCodecs(t,l));case 4:y=u+e.A.addExtraFeaturesToSourceBuffer(u),ht(e.O);try{x=e.i.addSourceBuffer(y)}catch(E){throw new _(2,3,3015,E,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.F&&(x.mode=rI),e.o.D(x,"error",function(){var E=e.u.get(t)[0];E.p.reject(new _(2,3,3014,e.g.error?e.g.error.code:0,E.uri))}),e.o.D(x,"updateend",function(){return Lr(e,t)}),e.l.set(t,x),e.B.set(t,u),e.Aa.set(t,!!n.drmInfos.length),ie(S)}})}h.configure=function(e){this.A=e,this.h&&(this.h.A=e.modifyCueCallback)};function Wy(e){return e.sa&&!e.$&&!e.H}function ac(e,t,n,i){e.h||(e.h=new Mr(e.ea),e.h&&(e.h.A=e.A.modifyCueCallback));var r=e.h;i=i||e.Ea,e=e.P,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=Ku.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):Ye("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Ye("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.B=i)}function Yo(e){return e.H?!1:e.i?e.i.readyState=="ended":!0}function Ks(e){return e.H?!1:e.i?e.i.readyState=="closed":!0}function Ih(e,t){return e.l.size?t==be?e=e.h.g:(e=Ws(e,t),e=!e||ra(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null):e=null,e}function $o(e,t){return e.l.size?t==be?e.h.h:mh(Ws(e,t)):null}function X2(e,t,n){return t==be?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Ws(e,t),Uy(e,n))}h.Fb=function(){var e={total:this.H?[]:Rr(this.g.buffered),audio:Rr(Ws(this,"audio")),video:Rr(Ws(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Ws(e,t){if(e.H||e.$)return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function z2(e,t,n,i,r,o){var s=null,u=[],a=De(n);if(Ir.includes(o))t=qo(a),t.length&&i&&((n=t.find(function(m){return m.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=Math.round(n.data)/1e3),e.K.onMetadata([{cueTime:i.startTime,data:a,frames:t,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(o.includes("/mp4")&&i&&i.Y&&i.Y.timescale){var l=i.Y.timescale;if(!isNaN(l)){var f=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.A.dispatchAllEmsgBoxes,d=0,g=!1;a=new ft,f&&a.R("emsg",function(m){var y=r.emsgSchemeIdUris;if(m.version===0)var x=m.reader.Cc(),S=m.reader.Cc(),E=m.reader.S(),M=m.reader.S(),L=m.reader.S(),P=m.reader.S(),b=i.startTime+M/E;else E=m.reader.S(),b=m.reader.bd()/E+i.timestampOffset,M=b-i.startTime,L=m.reader.S(),P=m.reader.S(),x=m.reader.Cc(),S=m.reader.Cc();m=m.reader.Cb(m.reader.getLength()-m.reader.Ba()),(y&&y.includes(x)||e.A.dispatchAllEmsgBoxes)&&(x=="urn:mpeg:dash:event:2012"?e.K.gj():(y=b+L/E,E={startTime:b,endTime:y,schemeIdUri:x,value:S,timescale:E,presentationTimeDelta:M,eventDuration:L,id:P,messageData:m},P=new Map().set("detail",E),new re("emsg",P).cancelable=!0,e.K.ej(E),(x=="https://aomedia.org/emsg/ID3"||x=="https://developer.apple.com/streaming/emsg-id3")&&(x=qo(m),x.length&&e.K.onMetadata([{cueTime:b,data:m,frames:x,dts:b,pts:b}],0,y))))}),a.R("prft",function(m){var y=m.reader,x=m.version;y.S(),m=y.S();var S=y.S();m=1e3*m+S/Math.pow(2,32)*1e3,x===0?y=y.S():(x=y.S(),y=y.S(),y=x*Math.pow(2,32)+y),m=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+m).getTime(),y=new Map().set("detail",{wallClockTime:m,programStartDate:new Date(m-y/l*1e3)}),y=new re("prft",y),e.K.onEvent(y)}).box("moof",Fe).box("traf",Fe).R("tfdt",function(m){g||(d=ec(m.reader,m.version).baseMediaDecodeTime/l,g=!0,f||m.parser.stop())}).parse(n,!0),g&&i.timestampOffset==0&&(s=d)}}else o.includes("/mp4")||o.includes("/webm")||!Gs(a)||(e.Z.has(t)?e.Z.get(t).clearData():e.Z.set(t,new yt),u=e.Z.get(t).parse(a),a=u.getStartTime(t),a!=null&&(s=a),u=u.getMetadata());return{timestamp:s,metadata:u}}function lc(e,t,n,i,r,o,s,u,a,l){s=s===void 0?!1:s,u=u===void 0?!1:u,a=a===void 0?!1:a,l=l===void 0?!1:l;var f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V;return U(function(F){switch(F.g){case 1:if(f=zt,t!=f.za){F.s(2);break}if(e.P!="HLS"){F.s(3);break}return A(F,e.Fa,4);case 4:d=F.h,e.h.u=d;case 3:return A(F,DA(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.N()[0]:null),5);case 5:return F.return();case 2:if(l||!e.m){F.s(6);break}return A(F,lc(e,f.V,n,i,r,o,s,u,a,!0),7);case 7:return A(F,lc(e,f.la,n,i,r,o,s,u,a,!0),8);case 8:return F.return();case 6:if(!e.l.has(t))return F.return();if(g=e.l.get(t).timestampOffset,m=e.B.get(t),e.j.has(t)&&(m=e.j.get(t).getOriginalMimeType()),i&&(y=z2(e,t,n,i,r,m),x=y.timestamp,S=y.metadata,x!=null&&(e.W==null&&t==f.la&&(e.W=x,e.oa=i.startTime,e.T!=null&&(E=0,e.oa==e.ka&&(E=e.W-e.T),e.fa.resolve(E))),e.T==null&&t==f.V&&(e.T=x,e.ka=i.startTime,e.W!=null&&(M=0,e.oa==e.ka&&(M=e.W-e.T),e.fa.resolve(M))),L=x,P=Ir,!e.F&&P.includes(e.B.get(t))&&(L=0),b=i.startTime-L,D=Math.abs(g-b),(.001<=D||s||u)&&(!a||0<b||!g)&&(g=b,e.La&&(Zt(e,t,function(){return Xs(e,t)},null),Zt(e,t,function(){return zs(e,t,g)},null))),(t==f.la||!e.l.has(f.la))&&e.Fa.resolve(g)),S.length)&&e.K.onMetadata(S,g,i?i.endTime:null),o&&t==f.la&&(e.h||ac(e,"application/cea-608",e.F,!1),e.L||(k=m.split(";",1)[0],e.L=new oi(k)),i?(N=e.L.i(n),N.length&&PA(e.h,N,i.startTime,i.endTime,g)):e.L.init(n,u)),!e.j.has(t)){F.s(9);break}return A(F,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:n=F.h;case 9:if(n=Z2(e,r,n,i,t),!i||!e.F||t==f.za){F.s(11);break}if(!s&&!u){F.s(11);break}if(j=i.startTime,e.P!="HLS"||e.m||t!=f.V||!e.l.has(f.la)){F.s(13);break}return A(F,e.fa,14);case 14:V=F.h,.15<Math.abs(V)&&(j-=V);case 13:Zt(e,t,function(){return Xs(e,t)},null),Zt(e,t,function(){return zs(e,t,j)},null);case 11:return A(F,Zt(e,t,function(){var B=n;e.I&&Rd(e.I,B,g,r),e.l.get(t).appendBuffer(B)},i?i.N()[0]:null),15);case 15:ie(F)}})}function q2(e,t){var n=$o(e,"video")||0;Lv(e.h,t,n)}function Y2(e){e.h&&Lv(e.h,"",0)}h.remove=function(e,t,n){var i=this,r;return U(function(o){return o.g==1?(r=zt,e==r.za?A(o,i.h.remove(t,n),0):n>t?A(o,Zt(i,e,function(){return cc(i,e,t,n)},null),5):o.s(0)):i.m?A(o,Zt(i,r.V,function(){return cc(i,r.V,t,n)},null),0):o.s(0)})};function Xy(e,t){var n;return U(function(i){return i.g==1?(n=zt,t==n.za?e.h?A(i,e.h.remove(0,1/0),0):i.return():A(i,Zt(e,t,function(){return cc(e,t,0,e.i.duration)},null),4)):e.m?A(i,Zt(e,n.V,function(){return cc(e,n.V,0,e.i.duration)},null),0):i.s(0)})}h.flush=function(e){var t=this,n;return U(function(i){return i.g==1?(n=zt,e==n.za?i.return():A(i,Zt(t,e,function(){t.g.currentTime-=.001,Lr(t,e)},null),2)):t.m?A(i,Zt(t,n.V,function(){var r=n.V;t.g.currentTime-=.001,Lr(t,r)},null),0):i.s(0)})};function $2(e,t,n,i,r,o,s,u,a){var l,f,d;return U(function(g){return g.g==1?(l=zt,t==l.za?(o||(e.h.u=n),RA(e.h,i,r),g.return()):(f=[],A(g,nI(e,t,s,u,a),2))):(d=g.h,d||(f.push(Zt(e,t,function(){return Xs(e,t)},null)),e.m&&f.push(Zt(e,l.V,function(){return Xs(e,l.V)},null))),o||(f.push(Zt(e,t,function(){return zs(e,t,n)},null)),e.m&&f.push(Zt(e,l.V,function(){return zs(e,l.V,n)},null))),(i!=0||r!=1/0)&&(f.push(Zt(e,t,function(){var m=e.l.get(t);m.appendWindowStart=0,m.appendWindowEnd=r,m.appendWindowStart=i,Lr(e,t)},null)),e.m&&f.push(Zt(e,l.V,function(){var m=l.V,y=e.l.get(m);y.appendWindowStart=0,y.appendWindowEnd=r,y.appendWindowStart=i,Lr(e,m)},null))),f.length?A(g,Promise.all(f),0):g.s(0))})}function Q2(e,t,n){var i,r;return U(function(o){return o.g==1?(i=zt,t==i.za||(t==i.la&&(e.Fa=new st),!e.F||(r=$o(e,t))&&.1>Math.abs(r-n))?o.return():(Zt(e,t,function(){return Xs(e,t)},null),e.m&&Zt(e,i.V,function(){return Xs(e,i.V)},null),A(o,Zt(e,t,function(){return zs(e,t,n)},null),2))):e.m?A(o,Zt(e,i.V,function(){return zs(e,i.V,n)},null),0):o.s(0)})}h.endOfStream=function(e){var t=this;return U(function(n){return A(n,oa(t,function(){Yo(t)||Ks(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},h.bb=function(e){var t=this;return U(function(n){return A(n,oa(t,function(){if(e<t.i.duration)for(var i=v(t.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var o={start:function(){},p:new st,uri:null};t.u.get(r).unshift(o)}t.i.duration=e,t.pa=e}),0)})},h.getDuration=function(){return this.i.duration};function J2(e,t,n){U(function(i){return Yo(e)||Ks(e)?i.return():A(i,oa(e,function(){Yo(e)||Ks(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function Mh(e){U(function(t){return Yo(e)||Ks(e)?t.return():A(t,oa(e,function(){Yo(e)||Ks(e)||e.i.clearLiveSeekableRange()}),0)})}function cc(e,t,n,i){i<=n?Lr(e,t):e.l.get(t).remove(n,i)}function Xs(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,Lr(e,t)}function zs(e,t,n){0>n&&(n+=.001);var i=!0;e.P=="HLS"&&(i=$o(e,t),i=!i||.15<Math.abs(i-n)),i&&(e.l.get(t).timestampOffset=n),Lr(e,t)}function Lr(e,t){if(!e.H){var n=e.u.get(t)[0];n&&(n.p.resolve(),Ch(e,t))}}function Zt(e,t,n,i){return ht(e.O),n={start:n,p:new st,uri:i},e.u.get(t).push(n),e.u.get(t).length==1&&zy(e,t),n.p}function oa(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y;return U(function(x){switch(x.g){case 1:for(ht(e.O),n=[],i=Array.from(e.l.keys()),r=v(i),o=r.next(),s={};!o.done;s={ready:void 0},o=r.next())u=o.value,s.ready=new st,a={start:function(S){return function(){return S.ready.resolve()}}(s),p:s.ready,uri:null},l=e.u.get(u),l.push(a),n.push(s.ready),l.length==1&&a.start();return ge(x,2),A(x,Promise.all(n),4);case 4:Pe(x,3);break;case 2:throw f=Se(x),f;case 3:return ge(x,5,6),A(x,t(),6);case 6:for(Ct(x),d=v(i),g=d.next();!g.done;g=d.next())m=g.value,Ch(e,m);lt(x,0);break;case 5:throw y=Se(x),new _(2,3,3015,y,e.g.error||"No error in the media element",null)}})}function Ch(e,t){e.u.get(t).shift(),zy(e,t)}function zy(e,t){var n=e.u.get(t)[0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new _(2,3,3017,t)):Wy(e)?n.p.reject(new _(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new _(2,3,3024,t)),Ch(e,t)}}function Z2(e,t,n,i,r){if(Fl(e.B.get(r))!="mp4")return n;var o=i===null,s=e.Aa.get(r),u=e.K.si(),a=!1;return i&&i.Y&&(a=i.Y.encrypted),i=i?i.N()[0]:null,(e=e.A.insertFakeEncryptionInInit&&s)&&(u=xd(u),e=sn()&&r==="audio"||Ki()||Gi()||Ft("SOPOpenBrowser")||_u()&&Ed()&&u),e&&(o?n=P2(t,n,i):((t=!a)&&(t=sn()&&r==="audio"),t&&(n=L2(n)))),o&&vr()&&(n=j2(n)),n}function eI(e,t,n,i){return Zt(e,t,function(){if(t!==be){if(e.B.get(t),Lo()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.A.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.B.set(t,n)}Lr(e,t)}},null)}function tI(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b;return U(function(D){switch(D.g){case 1:if(e.H)return D.return();for(n=zt,e.H=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.ya=!0),e.Na&&(e.g.autoplay=!1),En(D,2),e.o.Qa(),o=v(e.j.values()),s=o.next();!s.done;s=o.next())u=s.value,u.destroy();for(a=v(e.l.values()),l=a.next();!l.done;l=a.next()){f=l.value;try{e.i.removeSourceBuffer(f)}catch{}}return e.j.clear(),e.l.clear(),d=e.i.duration,e.G=new st,e.i=Ah(e,e.G),A(D,e.G,4);case 4:!isNaN(d)&&d?e.i.duration=d:!isNaN(e.pa)&&e.pa&&(e.i.duration=e.pa),g=new st,m=e.i.sourceBuffers,y=t.size,x=0,S=function(){x++,x===y&&(g.resolve(),e.o.Ja(m,"addsourcebuffer",S))},e.o.D(m,"addsourcebuffer",S),E=v(t.keys()),M=E.next();case 5:return M.done?((b=t.get(n.V))&&b.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.u.has(n.V)&&e.u.set(n.V,[]),e.g.currentTime=i,A(D,g,2)):(L=M.value,P=t.get(L),A(D,uc(e,L,P,P.codecs),6));case 6:M=E.next(),D.s(5);break;case 2:Ct(D),e.H=!1,ht(e.O),e.o.ma(e.g,"canplaythrough",function(){e.O.g||(e.g.autoplay=r,e.ya&&(e.ya=!1,e.g.play()))}),lt(D,0)}})}function qy(e,t){return oa(e,function(){return tI(e,t)})}function Yy(e,t,n,i){var r=!1,o=Nn("audio",(i||"").split(",")),s=Nn("video",(i||"").split(",")),u=s;t=="audio"&&(u=o),u||(u=i),i=Ot(n,u);var a=e.A.forceTransmux;if((!nn(i)||!e.F&&Ir.includes(i))&&(a=!0),a&&(e=Rs(n,u),n=to(e))){var l=n();o&&s&&(r=!0),i=l.convertCodecs(t,e)}return t=dn(zn(i)),{ug:l,Fj:r,Eg:Xn(i),codec:t,mimeType:i}}function nI(e,t,n,i,r){var o,s,u,a,l,f,d,g,m,y,x,S,E,M;return U(function(L){return L.g==1?(o=zt,t==o.za?L.return(!1):(s=dn(zn(e.B.get(t))),u=Xn(e.B.get(t)),a=Yy(e,t,n,i),l=a.ug,f=a.Fj,d=a.Eg,g=a.codec,m=a.mimeType,y=!0,f&&e.B.has(o.V)&&(x=Yy(e,o.V,n,i),S=dn(zn(e.B.get(o.V))),E=Xn(e.B.get(o.V)),y=S==x.codec&&E==x.Eg,x.ug&&x.ug.destroy()),s===g&&u===d&&y?(e.j.has(t)&&!l?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&l?e.j.set(t,l):l&&(e.j.has(t)&&e.j.get(t).transmux!=l.transmux?(e.j.get(t).destroy(),e.j.delete(t),e.j.set(t,l)):l.destroy()),L.return(!1)):(M=!0,(e.m||f&&l&&!e.j.has(t))&&(M=!1),M&&e.A.codecSwitchingStrategy==="smooth"&&Lo()?A(L,eI(e,t,m,l),3):(l&&l.destroy(),A(L,qy(e,r),3))))):L.return(!0)})}function iI(e,t,n,i){if(t==be)var r=!1;else{r=dn(zn(e.B.get(t)));var o=Xn(e.B.get(t)),s=Ot(n,i),u=e.A.forceTransmux;(!nn(s)||!e.F&&Ir.includes(s))&&(u=!0),n=Rs(n,i),u&&(u=to(n))&&(u=u(),s=u.convertCodecs(t,n),u.destroy()),t=dn(zn(s)),s=Xn(s),r=r!==t||o!==s}return r?e.A.codecSwitchingStrategy!=="smooth"||!Lo()||e.m:!1}var kh=w.URL.createObjectURL,rI="sequence";function Te(e,t,n){this.i=e,this.C=t,this.o=this.l=1/0,this.h=1,this.g=this.j=null,this.A=0,this.B=!0,this.I=!1,this.H=0,this.F=n===void 0?!0:n,this.G=0,this.u=!1,this.m=e}h=Te.prototype,h.getDuration=function(){return this.l},h.vi=function(){return this.h},h.yh=function(e){this.i=e},h.bb=function(e){this.l=e},h.Bi=function(){return this.i},h.wh=function(e){this.A=e},h.Gc=function(e){e&&!this.B&&(this.I=!0),this.B=e},h.Ce=function(e){this.o=e},h.ae=function(){return this.o},h.jg=function(e){this.C=e},h.li=function(){return this.C},h.kh=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(r){return r.start+t<n}),e.length!=0){var i=e[e.length-1].end+t;this.ne(e[0].start+t),this.h=e.reduce(function(r,o){return Math.max(r,o.end-o.start)},this.h),this.g=Math.max(this.g,i),this.i!=null&&this.F&&!this.u&&(this.i=n-this.g-this.h)}}},h.Ed=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.A)/1e3;e=v(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.ne(t),this.g=Math.max(this.g,n),this.i!=null&&this.F&&!this.u&&(this.i=i-this.g-this.h)}},h.jh=function(e,t){this.ne(e),t==1/0||this.U()||(this.g=Math.max(this.g,t))},h.wi=function(){return this.g},h.ie=function(){this.u=!0},h.Wi=function(){return this.u},h.xh=function(e){this.m=e},h.ri=function(){return this.m},h.ne=function(e){this.j==null?this.j=e:this.I||(this.j=Math.min(this.j,e))},h.Tf=function(e){this.h=Math.max(this.h,e)},h.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},h.U=function(){return this.l==1/0&&!this.B},h.yc=function(){return this.l!=1/0&&!this.B},h.pb=function(){return Math.max(this.H,this.cc()-this.o)},h.Bh=function(e){this.H=e},h.cc=function(){return this.U()||this.yc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},h.qd=function(e){var t=Math.max(this.j,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.cc()-this.o+e,this.ob()))},h.Hb=function(){return this.qd(0)},h.ob=function(){return Math.max(0,this.cc()-(this.U()||this.yc()?this.C:0))},h.Kh=function(){return!(this.i==null||this.g!=null&&this.F)},h.vh=function(e){this.G=e},h.ii=function(){return this.G},R("shaka.media.PresentationTimeline",Te),Te.prototype.getAvailabilityTimeOffset=Te.prototype.ii,Te.prototype.setAvailabilityTimeOffset=Te.prototype.vh,Te.prototype.usingPresentationStartTime=Te.prototype.Kh,Te.prototype.getSeekRangeEnd=Te.prototype.ob,Te.prototype.getSeekRangeStart=Te.prototype.Hb,Te.prototype.getSafeSeekRangeStart=Te.prototype.qd,Te.prototype.getSegmentAvailabilityEnd=Te.prototype.cc,Te.prototype.setUserSeekStart=Te.prototype.Bh,Te.prototype.getSegmentAvailabilityStart=Te.prototype.pb,Te.prototype.isInProgress=Te.prototype.yc,Te.prototype.isLive=Te.prototype.U,Te.prototype.offset=Te.prototype.offset,Te.prototype.notifyMaxSegmentDuration=Te.prototype.Tf,Te.prototype.notifyMinSegmentStartTime=Te.prototype.ne,Te.prototype.getInitialProgramDateTime=Te.prototype.ri,Te.prototype.setInitialProgramDateTime=Te.prototype.xh,Te.prototype.isStartTimeLocked=Te.prototype.Wi,Te.prototype.lockStartTime=Te.prototype.ie,Te.prototype.getMaxSegmentEndTime=Te.prototype.wi,Te.prototype.notifyPeriodDuration=Te.prototype.jh,Te.prototype.notifySegments=Te.prototype.Ed,Te.prototype.notifyTimeRange=Te.prototype.kh,Te.prototype.getDelay=Te.prototype.li,Te.prototype.setDelay=Te.prototype.jg,Te.prototype.getSegmentAvailabilityDuration=Te.prototype.ae,Te.prototype.setSegmentAvailabilityDuration=Te.prototype.Ce,Te.prototype.setStatic=Te.prototype.Gc,Te.prototype.setClockOffset=Te.prototype.wh,Te.prototype.getPresentationStartTime=Te.prototype.Bi,Te.prototype.setDuration=Te.prototype.bb,Te.prototype.setPresentationStartTime=Te.prototype.yh,Te.prototype.getMaxSegmentDuration=Te.prototype.vi,Te.prototype.getDuration=Te.prototype.getDuration;function Dh(e,t,n,i){var r=this;this.u=i,this.g=e,this.B=t,this.h=n,this.o=new ke,this.l=!1,this.F=e.readyState,this.G=this.C=this.j=0,this.m=oI(this),this.A=!1,this.o.D(e,"waiting",function(){return sa(r)}),this.i=new Be(function(){sa(r)}).ua(this.h.gapJumpTimerTime)}Dh.prototype.release=function(){this.o&&(this.o.release(),this.o=null),this.i!=null&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.B=this.u=null},Dh.prototype.qe=function(){this.A=!0,this.i&&this.i.ua(this.h.gapJumpTimerTime),sa(this)};function sa(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.m)){t=e.m;var n=t.j,i=Qy(n),r=n.g.currentTime,o=Date.now()/1e3;(t.g!=r||t.m!=i)&&(t.l=o,t.g=r,t.m=i,t.h=!1),r=o-t.l,(i=r>=t.o&&i&&!t.h)&&(t.i&&t.i(t.g,r),t.h=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=O2(n,t,e.h.gapDetectionThreshold),i==null||i==0&&!e.A||(r=n.start(i),(o=e.h.gapPadding)&&(r=Math.ceil(100*(r+o))/100),r>=e.B.ob()||.001>r-t||(i!=0&&n.end(i-1),e.g.currentTime=r,t==e.j&&(e.j=r),e.C++,e.u(new re("gapjumped")))))}}}function oI(e){if(!e.h.stallEnabled)return null;var t=e.h.stallSkip;return new $y(new sI(e.g),e.h.stallThreshold,function(){var n;return U(function(i){if(i.g==1)return n=Rr(e.g.buffered),n.length?t?(e.g.currentTime+=t,i.s(2)):A(i,e.g.play(),3):i.return();if(i.g!=2){if(!e.g)return i.return();e.g.pause(),e.g.play()}e.G++,e.u(new re("stalldetected")),ie(i)})})}function $y(e,t,n){this.j=e,this.m=Qy(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.o=t,this.i=n}$y.prototype.release=function(){this.i=this.j=null};function sI(e){this.g=e}function Qy(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=v(Rr(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function qs(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=uI.value().get(t),n.ma(e,t,i))}var uI=new Ru(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Jy(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.o=!1,this.h=new ke,this.i=new n0(e),qs(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){e0(r,r.j())})}Jy.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Rh(e){return e.o?e.g.currentTime:e.j()}function Zy(e,t){0<e.g.readyState?i0(e.i,t):qs(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){e0(e,e.j())})}function e0(e,t){.001>Math.abs(e.g.currentTime-t)?t0(e):(e.h.ma(e.g,"seeking",function(){t0(e)}),i0(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function t0(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function n0(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Be(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}n0.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function i0(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.ua(.1)}function r0(e){this.h=e,this.j=!1,this.g=null,this.i=new ke}h=r0.prototype,h.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,i=t.g;0>t.g&&(i=Math.max(0,n+t.g)),n!=i?(t.i.ma(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=i):t.j=!0}}var t=this;qs(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},h.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},h.af=function(e){this.g=this.j?this.g:e},h.Od=function(){return(this.j?this.h.currentTime:this.g)||0},h.Ag=function(){return 0},h.zg=function(){return 0},h.ih=function(){};function o0(e,t,n,i,r,o){var s=this;this.i=e,this.g=t.presentationTimeline,this.l=n,this.u=r,this.o=null,this.j=new Dh(e,t.presentationTimeline,n,o),this.h=new Jy(e,function(){e:{var u=s.j;u.l=!0,u.A=!1,u.i&&u.i.ua(u.h.gapJumpTimerTime),sa(u);var a=Rh(s.h);if(u=u0(s,a),!dv()&&.001<Math.abs(u-a)){if(a=!1,!Ni()||Ni()&&$r())a=!0;else{var l=Date.now()/1e3,f=Ni()&&Ad()?3:1;(!s.o||s.o<l-f)&&(s.o=l,a=!0)}if(a){Zy(s.h,u),u=void 0;break e}}s.u(),u=void 0}return u},function(u){var a=s.j;a.g.seeking&&!a.l&&(a.l=!0,a.j=u),a.i&&a.i.ua(a.h.gapJumpTimerTime),sa(a)},function(){var u=i;return u==null?u=1/0>s.g.getDuration()?s.g.Hb():s.g.ob():0>u&&(u=s.g.ob()+u),s0(s,a0(s,u))}),this.m=new Be(function(){if(s.i.readyState!=0&&!s.i.paused){var u=Rh(s.h),a=s.g.Hb(),l=s.g.ob();3>l-a&&(a=l-3),u<a&&(u=u0(s,u),s.i.currentTime=u)}})}h=o0.prototype,h.ready=function(){this.m.ua(.25)},h.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},h.af=function(e){Zy(this.h,e)},h.Od=function(){var e=Rh(this.h);return 0<this.i.readyState&&!this.i.paused?a0(this,e):e},h.Ag=function(){return this.j.G},h.zg=function(){return this.j.C},h.ih=function(){this.j.qe()};function s0(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function u0(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.Hb(),o=e.g.ob(),s=e.g.getDuration();3>o-r&&(r=o-3);var u=e.g.qd(n),a=e.g.qd(i);return n=e.g.qd(n+i),t>=s?s0(e,t):t>o?o-e.l.safeSeekEndOffset:t<r?vh(e.i.buffered,a)?a:n:t>=u||vh(e.i.buffered,t)?t:n}function a0(e,t){var n=e.g.Hb();return t<n?n:(e=e.g.ob(),t>e?e:t)}function Ze(e){this.g=e,this.m=null,this.i=0,this.o=!1}h=Ze.prototype,h.getNumReferences=function(){return this.g.length},h.getNumEvicted=function(){return this.i},h.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},h.bj=function(){this.o=!0},h.Eb=function(e){for(var t=v(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function Yi(e){return e.g[0]||null}h.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},h.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},h.offset=function(e){if(!this.o)for(var t=v(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},h.ke=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,Q(e))}},h.Bd=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.ke(e),this.Oa(t)},h.Oa=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},h.Oc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new ye(e.startTime,t,e.C,e.Sa,e.wa,e.Y,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},h.Ie=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new Be(function(){var i=t();i?n.g.push.apply(n.g,Q(i)):(n.m.stop(),n.m=null)}),this.m.ua(e))},Ze.prototype[Symbol.iterator]=function(){return this.Gb(0)},Ze.prototype.Gb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;var r=this.get(i);n?i++:i--;var o=-1;if(r&&0<r.g.length)for(var s=r.g.length-1;0<=s;--s){var u=r.g[s];if(e>=u.startTime&&e<u.endTime){if(!t){for(;s&&!u.l;)s--,u=r.g[s];if(!u.l)return fe("No independent partial segment found!"),null}n?i--:i++,o=s-1;break}}return new wi(this,i,o,n)};function fc(e,t,n){return e=new ye(e,e+t,function(){return n},0,null,null,e,e,e+t),new Ze([e])}R("shaka.media.SegmentIndex",Ze),Ze.forSingleSegment=fc,Ze.prototype.getIteratorForTime=Ze.prototype.Gb,Ze.prototype.updateEvery=Ze.prototype.Ie,Ze.prototype.fit=Ze.prototype.Oc,Ze.prototype.evict=Ze.prototype.Oa,Ze.prototype.mergeAndEvict=Ze.prototype.Bd,Ze.prototype.offset=Ze.prototype.offset,Ze.prototype.get=Ze.prototype.get,Ze.prototype.find=Ze.prototype.find,Ze.prototype.markImmutable=Ze.prototype.bj,Ze.prototype.release=Ze.prototype.release,Ze.prototype.getNumEvicted=Ze.prototype.getNumEvicted,Ze.prototype.getNumReferences=Ze.prototype.getNumReferences;function wi(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}h=wi.prototype,h.ed=function(e){this.reverse=e},h.di=function(){return this.h},h.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.A&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},h.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.A&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},h.dg=function(){var e=this.current();if(e.o&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var t=e.g[this.g];t.l&&!(0>=this.g);)this.g--,t=e.g[this.g]},R("shaka.media.SegmentIterator",wi),wi.prototype.resetToLastIndependent=wi.prototype.dg,wi.prototype.next=wi.prototype.next,wi.prototype.current=wi.prototype.current,wi.prototype.currentPosition=wi.prototype.di,wi.prototype.setReverse=wi.prototype.ed;function kt(){Ze.call(this,[]),this.h=[]}At(kt,Ze),h=kt.prototype,h.clone=function(){var e=new kt;return e.h=this.h.slice(),e.i=this.i,e},h.release=function(){for(var e=v(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},h.Eb=function(e){for(var t=v(this.h),n=t.next();!n.done;n=t.next())n.value.Eb(e)},h.find=function(e){for(var t=this.i,n=v(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null},h.get=function(e){for(var t=this.i,n=v(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},h.offset=function(){},h.ke=function(){},h.Oa=function(e){for(var t=v(this.h),n=t.next();!n.done;n=t.next())n.value.Oa(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},h.Bd=function(){},h.Oc=function(){},h.Ie=function(){},R("shaka.media.MetaSegmentIndex",kt),kt.prototype.updateEvery=kt.prototype.Ie,kt.prototype.fit=kt.prototype.Oc,kt.prototype.mergeAndEvict=kt.prototype.Bd,kt.prototype.evict=kt.prototype.Oa,kt.prototype.merge=kt.prototype.ke,kt.prototype.offset=kt.prototype.offset,kt.prototype.get=kt.prototype.get,kt.prototype.find=kt.prototype.find,kt.prototype.forEachTopLevelReference=kt.prototype.Eb,kt.prototype.release=kt.prototype.release;function ua(e){var t=this;this.g=e,this.j=!1,this.i=this.g.$d(),this.h=new Be(function(){t.g.gh(.25*t.i)})}ua.prototype.release=function(){this.set(this.sc()),this.h&&(this.h.stop(),this.h=null),this.g=null},ua.prototype.set=function(e){this.i=e,Ph(this)},ua.prototype.sc=function(){return this.g.sc()};function Ph(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.$d()!=t&&e.g.mg(t);return}catch{}e.h.ua(.25),e.g.$d()!=0&&e.g.mg(0)}function Lh(e){var t=this;this.j=e,this.h=new ke,this.g=new Set,this.i=new Be(function(){l0(t,!1)}).sb(),e.paused||this.i.ua(.25),this.h.D(e,"playing",function(){t.i.sb().ua(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}Lh.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=v(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function l0(e,t){var n=e.j.currentTime;e=v(e.g);for(var i=e.next();!i.done;i=e.next())i.value.j(n,t)}function dc(e){ut.call(this),this.g=new Map,this.h=e}At(dc,ut),dc.prototype.release=function(){this.g.clear(),ut.prototype.release.call(this)};function aI(e,t){var n=e.g.get(t);return n||(n={Jd:[],mf:null,contentType:t},e.g.set(t,n)),n}function lI(e,t,n){var i=aI(e,t.contentType);cI(e,i),e={Wc:t,position:n},i=i.Jd,t=i.findIndex(function(r){return r.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}dc.prototype.j=function(e){for(var t=v(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.mf;e:{for(var r=n.Jd,o=r.length-1;0<=o;o--){var s=r[o];if(s.position<=e){r=s.Wc;break e}}r=null}o=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),s=r&&i&&r.label&&i.label&&i.label!==r.label;var u=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!As(i.roles,r.roles),(s||u||i)&&c0(this,e,r.contentType)&&(n.mf=r,i=new re("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),o&&c0(this,e,r.contentType)&&(n.mf=r,JSON.stringify(r),n=new re("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function c0(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function cI(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.Jd;t.Jd=r.filter(function(o,s){return!(o.position<=n&&s+1<r.length&&r[s+1].position<=n||o.position>=i)})}else t.Jd=[]}function hc(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function aa(e){ut.call(this),this.h=new Map,this.i=e,this.g=null}At(aa,ut),aa.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),ut.prototype.release.call(this)};function _h(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new re("regionadd",new Map([["region",t]])),e.dispatchEvent(t),fI(e))}function fI(e){e.g||(e.g=new Be(function(){for(var t=e.i(),n=v(e.h),i=n.next();!i.done;i=n.next()){var r=v(i.value);i=r.next().value,r=r.next().value,r.endTime<t.start&&(e.h.delete(i),i=new re("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).ua(2))}function pc(e,t,n,i){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=i}function dI(e,t){e.l=t,e=v(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function la(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.g||(e.g=e.i.segmentIndex.Gb(t,!0,e.o)),!e.g))return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value,!!n);){var i=!0;n.isPreload()&&n.wa!=null&&(i=!1),n.dc()==2&&(i=!1),n.Ib(!1)&&(i=!1),i&&n.Y&&t.push(f0(e,n.Y)),i&&!e.h.has(n)&&(i=new jh(e.l),t.push(p0(i,n,e.i)),e.h.set(n,i))}return Nh(e),Promise.all(t)}function f0(e,t){if(!e.i.segmentIndex||t.Ib()||Array.from(e.j.keys()).some(function(r){return oc(r,t)}))return Promise.resolve();var n=new jh(e.l),i=p0(n,t,e.i);return e.j.set(t,n),i}function d0(e,t){t=v(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&ca(e,n)}function $i(e){d0(e,e.h),d0(e,e.j),e.g=null}pc.prototype.Oa=function(e,t){t=t===void 0?!1:t;for(var n=v(this.h.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&ca(this,i);t&&Nh(this)},pc.prototype.ed=function(e){this.o=e,this.g&&this.g.ed(e)};function Nh(e){for(var t=Array.from(e.h.keys()),n=v(e.j.keys()),i=n.next(),r={};!i.done;r={Nf:void 0},i=n.next())r.Nf=i.value,t.some(function(o){return function(s){return oc(s.Y,o.Nf)}}(r))||ca(e,r.Nf)}function h0(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var i=n.pop();i&&ca(e,i)}Nh(e)}function hI(e,t){t&&t!==e.i&&($i(e),e.i=t)}function ca(e,t){var n=e.h;t instanceof jn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function jh(e){this.g=e,this.Gd=this.pg=null}function p0(e,t,n){var i=new Uint8Array(0);return e.Gd=e.g(t,n,function(r){return U(function(o){if(o.g==1)return 0<i.byteLength?i=Nt(i,r):i=r,e.pg?A(o,e.pg(i),3):o.s(0);i=new Uint8Array(0),ie(o)})}),e.Gd.promise.catch(function(r){return r instanceof _&&r.code==7001?Promise.resolve():Promise.reject(r)})}jh.prototype.abort=function(){this.Gd&&this.Gd.abort()};function Oh(e){var t=Xn(e),n=t.split("/")[0];return e=zn(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Nd:null,colorGamut:null,frameRate:null}}function pI(e,t,n){function i(k){E=k.name;var N=k.reader;N.skip(24);var j=N.na(),V=N.na();N.skip(50),g=String(j),d=String(V),k.reader.ta()&&Fe(k)}function r(k){var N=Cy(k.reader);m=N.channelCount,y=N.sampleRate,o(k.name)}function o(k){switch(k=k.toLowerCase(),k){case"avc1":case"avc3":u.push(k+".42E01E"),l=!0;break;case"hev1":case"hvc1":u.push(k+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":u.push(k+".05.04"),l=!0;break;case"vp09":u.push(k+".00.10.08"),l=!0;break;case"av01":u.push(k+".0.01M.08"),l=!0;break;case"mp4a":s.push("mp4a.40.2"),a=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(k),a=!0}}var s=[],u=[],a=!1,l=!1,f=null,d=null,g=null,m=null,y=null,x=null,S=null,E;if(new ft().box("moov",Fe).box("trak",Fe).box("mdia",Fe).R("mdhd",function(k){f=tc(k.reader,k.version).language}).box("minf",Fe).box("stbl",Fe).R("stsd",oo).box("mp4a",function(k){var N=Cy(k.reader);m=N.channelCount,y=N.sampleRate,k.reader.ta()?Fe(k):o(k.name)}).box("esds",function(k){k=k.reader;for(var N="mp4a",j,V;k.ta();){j=k.X();for(var F=k.X();F&128;)F=k.X();if(j==3)k.na(),F=k.X(),F&128&&k.na(),F&64&&k.skip(k.X()),F&32&&k.na();else if(j==4)V=k.X(),k.skip(12);else if(j==5)break}V&&(N+="."+ta(V),j==5&&k.ta()&&(j=k.X(),V=(j&248)>>3,V===31&&k.ta()&&(V=32+((j&7)<<3)+((k.X()&224)>>5)),N+="."+V)),s.push(N),a=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(k){var N=E||"";switch(E){case"dvav":N="avc3";break;case"dva1":N="avc1"}k=k.reader,k.skip(1),k=N+"."+ta(k.X())+ta(k.X())+ta(k.X()),u.push(k),l=!0}).box("hvcC",function(k){var N=E||"";switch(E){case"dvh1":N="hvc1";break;case"dvhe":N="hev1"}var j=k.reader;j.skip(1),k=j.X();var V=["","A","B","C"][k>>6],F=k&31,B=j.S(),H=(k&32)>>5?"H":"L";k=[j.X(),j.X(),j.X(),j.X(),j.X(),j.X()],j=j.X();for(var G=0,z=0;32>z&&(G|=B&1,z!=31);z++)G<<=1,B>>=1;for(N=N+("."+V+F)+("."+ta(G,!0)),N+="."+H+j,V="",F=k.length;F--;)((H=k[F])||V)&&(V="."+H.toString(16).toUpperCase()+V);N+=V,u.push(N),l=!0}).box("dvcC",function(k){var N=E||"";switch(E){case"hvc1":N="dvh1";break;case"hev1":N="dvhe";break;case"avc1":N="dva1";break;case"avc3":N="dvav";break;case"av01":N="dav1"}var j=k.reader;j.skip(2),k=j.X(),j=j.X(),u.push(N+"."+Yn(k>>1&127)+"."+Yn(k<<5&32|j>>3&31)),l=!0}).box("dvvC",function(k){var N=E||"";switch(E){case"hvc1":N="dvh1";break;case"hev1":N="dvhe";break;case"avc1":N="dva1";break;case"avc3":N="dvav";break;case"av01":N="dav1"}var j=k.reader;j.skip(2),k=j.X(),j=j.X(),u.push(N+"."+Yn(k>>1&127)+"."+Yn(k<<5&32|j>>3&31)),l=!0}).R("vpcC",function(k){var N=E||"",j=k.reader;k=j.X();var V=j.X();j=j.X()>>4&15,u.push(N+"."+Yn(k)+"."+Yn(V)+"."+Yn(j)),l=!0}).box("av1C",function(k){var N=E||"";switch(E){case"dav1":N="av01"}var j=k.reader;j.skip(1),k=j.X(),j=j.X();var V=k>>>5,F=(j&64)>>6;u.push(N+"."+V+"."+Yn(k&31)+(j>>>7?"H":"M")+"."+Yn(V===2&&F?(j&32)>>5?12:10:F?10:8)+"."+((j&16)>>4)+"."+((j&8)>>3)+((j&4)>>2)+(j&3)+"."+Yn(1)+"."+Yn(1)+"."+Yn(1)+".0"),l=!0}).box("enca",uh).box("encv",qn).box("sinf",Fe).box("frma",function(k){k=ky(k.reader).codec,o(k)}).box("colr",function(k){u=u.map(function(V){if(V.startsWith("av01.")){var F=k.reader,B=F.Ba(),H=F.Cb(4),G=String.fromCharCode(H[0]);if(G+=String.fromCharCode(H[1]),G+=String.fromCharCode(H[2]),G+=String.fromCharCode(H[3]),G==="nclx"){H=F.na(),G=F.na();var z=F.na(),W=F.X()>>7,$=V.split(".");$.length==10&&($[6]=Yn(H),$[7]=Yn(G),$[8]=Yn(z),$[9]=String(W),V=$.join("."))}F.seek(B)}return V});var N=T2(k.reader),j=N.colorGamut;x=N.Nd,S=j}).parse(e||t,!0),!s.length&&!u.length)return null;var M=a&&!l,L=new Map;if(l&&!n){n=new oi("video/mp4"),e&&n.init(e);try{n.i(t);for(var P=v(n.j()),b=P.next();!b.done;b=P.next()){var D=b.value;L.set(D,D)}}catch{}n.g()}return{type:M?"audio":"video",mimeType:M?"audio/mp4":"video/mp4",codecs:Uh(s.concat(u)).join(", "),language:f,height:d,width:g,channelCount:m,sampleRate:y,closedCaptions:L,Nd:x,colorGamut:S,frameRate:null}}function Uh(e){var t=new Set,n=[];e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=io(i);t.has(r)||(n.push(i),t.add(r))}return t=Dd("audio",n),i=Dd("video",n),e=Dd(be,n),i=gI(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function gI(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?nn('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function mI(e){var t=null;return new ft().box("moov",Fe).box("trak",Fe).box("mdia",Fe).box("minf",Fe).box("stbl",Fe).R("stsd",oo).box("encv",qn).box("enca",uh).box("sinf",Fe).box("schi",Fe).R("tenc",function(n){n=n.reader,n.X(),n.X(),n.X(),n.X(),t=wr(n.Cb(16))}).parse(e,!0),t}function bh(e,t,n){var i,r,o,s,u;return U(function(a){if(a.g==1)return i=t,i.cryptoKey?a.s(2):A(a,i.fetchKey(),3);if(r=i.iv,!r)for(r=De(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+n,s=r.byteLength-1;0<=s;s--)r[s]=o&255,o>>=8;return t.blockCipherMode=="CBC"?u={name:"AES-CBC",iv:r}:u={name:"AES-CTR",counter:r,length:64},a.return(w.crypto.subtle.decrypt(u,i.cryptoKey,e))})}function fa(e,t,n,i,r){return e=qt(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function g0(e,t){var n=this;this.g=t,this.j=e,this.h=null,this.K=new Map,this.C=1,this.u=this.l=null,this.O=0,this.i=new Map,this.I=!1,this.P=null,this.B=!1,this.m=new Os(function(){return vI(n)}),this.L=Date.now()/1e3,this.o=new Map,this.M={projection:null,hfov:null},this.W=0,this.T=1/0,this.F=null,this.A=new Be(function(){if(n.j&&n.g)if(n.j.presentationTimeline.U()){var i=n.j.presentationTimeline.Hb(),r=n.j.presentationTimeline.ob();1<r-i?J2(n.g.aa,i,r):Mh(n.g.aa)}else Mh(n.g.aa),n.A&&n.A.stop()}),this.G=null,this.H=new Be(function(){var i=n.g.video;!i.ended&&n.G&&(i.currentTime=n.G,n.G=null)})}h=g0.prototype,h.destroy=function(){return this.m.destroy()};function vI(e){var t,n,i,r,o,s,u;return U(function(a){if(a.g==1){for(t=[],n=v(e.i.values()),i=n.next();!i.done;i=n.next())r=i.value,$s(r),t.push(ha(r)),r.ba&&($i(r.ba),r.ba=null);for(o=v(e.o.values()),s=o.next();!s.done;s=o.next())u=s.value,$i(u);return A(a,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.j=null,e.h=null,e.A&&e.A.stop(),e.A=null,e.H&&e.H.stop(),e.H=null,e.G=null,ie(a)})}h.configure=function(e){if(this.h=e,this.P=new qv({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.ba&&($i(t.ba),t.ba=null),t=v(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,$i(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(be))&&t.ba&&($i(t.ba),t.ba=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.ba&&($i(t.ba),t.ba=null),t=v(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.ba?(h0(n.ba,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||($i(n.ba),n.ba=null)):0<e.segmentPrefetchLimit&&(n.ba=Bh(this,n.stream));e.disableAudioPrefetch||AI(this)};function yI(e,t,n){e.j.presentationTimeline.U()||(e.W=t,e.T=n)}h.start=function(e){var t=this;return U(function(n){if(n.g==1)return A(n,EI(t,e||new Map),2);ht(t.m),t.I=!0,ie(n)})};function TI(e,t){var n,i,r,o,s,u;U(function(a){switch(a.g){case 1:return n=zt,e.O++,i=e.O,ge(a,2),A(a,Xy(e.g.aa,n.za),4);case 4:Pe(a,3);break;case 2:r=Se(a),e.g&&e.g.onError(r);case 3:o=Ot(t.mimeType,t.codecs),ac(e.g.aa,o,e.j.sequenceMode,t.external),s=e.g.aa.ea,(s.isTextVisible()||e.h.alwaysStreamText)&&e.O==i&&(u=vc(e,t),e.i.set(n.za,u),Mn(e,u,0)),ie(a)}})}function wI(e){var t=e.i.get(be);t&&($s(t),ha(t).catch(function(){}),e.F=e.i.get(be),e.i.delete(be)),e.u=null}function Fh(e,t){for(var n=0>e.g.gb(),i=v(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.ja&&r.ja.ed(n),r.ba&&r.ba.ed(n);for(i=v(e.o.values()),r=i.next();!r.done;r=i.next())r.value.ed(n);(n=e.i.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.fc&&(Ys(e,t,!1,0,!1),n.fc=i):(t=n.fc)&&(n.fc=null,Ys(e,t,!0,0,!1)))}function m0(e,t,n,i,r,o){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,o=o===void 0?!1:o,e.l=t,e.I&&(t.video&&Ys(e,t.video,n,i,r,o),t.audio&&Ys(e,t.audio,n,i,r,o))}function gc(e,t){U(function(n){if(n.g==1)return e.F=null,e.u=t,e.I?t.segmentIndex?n.s(2):A(n,t.createSegmentIndex(),2):n.return();Ys(e,t,!0,0,!1),ie(n)})}function SI(e,t){for(var n=v(e.K.entries()),i=n.next();!i.done;i=n.next()){var r=v(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.K.delete(i))}}function Ys(e,t,n,i,r,o){var s=e.i.get(t.type);s||t.type!=be?s&&(s.fc&&(t.trickModeVideo?(s.fc=t,t=t.trickModeVideo):s.fc=null),s.stream!=t||r)&&(e.o.has(t)?s.ba=e.o.get(t):s.ba&&hI(s.ba,t),t.type==be&&(r=Ot(t.mimeType,t.codecs),ac(e.g.aa,r,e.j.sequenceMode,t.external)),!e.o.has(s.stream)&&s.stream.closeSegmentIndex&&(s.Da?(r="("+s.type+":"+s.stream.id+")",e.K.has(r)||e.K.set(r,s.stream.closeSegmentIndex)):s.stream.closeSegmentIndex()),r=s.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,s.stream=t,s.ja=null,s.bf=!!o,t.dependencyStream?s.nd=vc(e,t.dependencyStream):s.nd=null,r?Tc(e,!0,!1):(n?s.nc?s.Re=!0:s.Da?(s.lc=!0,s.Vd=i,s.Re=!0):($s(s),Kh(e,s,!0,i).catch(function(u){e.g&&e.g.onError(u)})):s.Da||s.kb||Mn(e,s,0),xI(e,s).catch(function(u){e.g&&e.g.onError(u)}))):TI(e,t)}function xI(e,t){var n,i;return U(function(r){if(r.g==1)return t.rb?(n=t.stream,i=t.rb,n.segmentIndex?r.s(2):A(r,n.createSegmentIndex(),2)):r.return();if(t.rb!=i||t.stream!=n)return r.return();var o=e.g.Rc(),s=$o(e.g.aa,t.type),u=t.stream.segmentIndex.find(t.xa?t.xa.endTime:o),a=u==null?null:t.stream.segmentIndex.get(u);u=a&&a.wa?a.wa-a.Sa:null,a&&!u&&(u=(a.endTime-a.getStartTime())*(t.stream.bandwidth||0)/8),u?((a=a.Y)&&(u+=(a.wa?a.wa-a.Sa:null)||0),a=e.g.getBandwidthEstimate(),o=8*u/a<(s||0)-o-e.h.rebufferingGoal||t.rb.h.g>u):o=!1,o&&t.rb.abort(),ie(r)})}h.Fc=function(){if(this.g){for(var e=this.g.Rc(),t=v(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.i.get(i);var r=this.g.aa;if(i==be?(r=r.h,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=Ws(r,i),r=vh(r,e)),!r){if(this.L=0,n.ba&&(n.ba.g=null),n.type==="audio"){r=v(this.o.values());for(var o=r.next();!o.done;o=r.next())o.value.g=null}n.ja=null,($o(this.g.aa,i)!=null||n.Da)&&mc(this,n),n.rb&&(n.rb.abort(),n.rb=null),i===be&&(i=this.g.aa,i.L&&i.L.g()),n.Fc=!0}}this.h.crossBoundaryStrategy!=="keep"&&Xh(this)}};function mc(e,t){t.nc||t.lc||(t.Da?(t.lc=!0,t.Vd=0):Ih(e.g.aa,t.type)==null?t.kb==null&&Mn(e,t,0):($s(t),Kh(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function EI(e,t){var n,i,r,o,s,u,a,l,f,d;return U(function(g){if(g.g==1){if(n=zt,!e.l)throw new _(2,5,5006);return i=new Map,r=new Set,e.l.audio&&(i.set(n.V,e.l.audio),r.add(e.l.audio)),e.l.video&&(i.set(n.la,e.l.video),r.add(e.l.video)),e.u&&(i.set(n.za,e.u),r.add(e.u)),o=e.g.aa,A(g,o.init(i,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(ht(e.m),e.updateDuration(),s=v(i.keys()),u=s.next();!u.done;u=s.next())a=u.value,l=i.get(a),e.i.has(a)||(f=vc(e,l),t.has(l.id)&&(d=t.get(l.id),dI(d,function(m,y,x){return yc(m,y,x||null,e.h.retryParameters,e.g.Xb)}),f.ba=d),e.i.set(a,f),Mn(e,f,0));ie(g)})}function vc(e,t){var n={stream:t,type:t.type,ja:null,ba:Bh(e,t),xa:null,yb:null,he:null,Ac:null,zc:null,fe:null,ge:null,fc:null,endOfStream:!1,Da:!1,kb:null,lc:!1,Vd:0,Re:!1,nc:!1,Fc:!0,bf:!1,bg:!1,sd:!1,rb:null,nd:null};return t.dependencyStream&&(n.nd=vc(e,t.dependencyStream)),n}function Bh(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===be&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===be&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.ba)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new pc(e.h.segmentPrefetchLimit,t,function(i,r,o){return yc(i,r,o||null,e.h.retryParameters,e.g.Xb)},0>e.g.gb()):null}function AI(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,i=v(e.j.variants),r=i.next(),o={};!r.done;o={wb:void 0},r=i.next())if(o.wb=r.value,o.wb.audio)if(e.o.has(o.wb.audio)){if(r=e.o.get(o.wb.audio),h0(r,t),!(0<t&&n.some(function(u){return function(a){return Ls(u.wb.audio.language,a)}}(o)))){var s=e.i.get(o.wb.audio.type);r!==(s&&s.ba)&&$i(r),e.o.delete(o.wb.audio)}}else 0>=t||!n.some(function(u){return function(a){return Ls(u.wb.audio.language,a)}}(o))||!(r=Bh(e,o.wb.audio))||(o.wb.audio.segmentIndex||o.wb.audio.createSegmentIndex(),e.o.set(o.wb.audio,r))}h.updateDuration=function(){var e=dv(),t=this.j.presentationTimeline.getDuration();1/0>t?(e&&(this.A&&this.A.stop(),Mh(this.g.aa)),this.g.aa.bb(t)):e?(this.A&&this.A.ua(.5),this.g.aa.bb(1/0)):this.g.aa.bb(Math.pow(2,32))};function II(e,t){var n,i,r,o,s,u;return U(function(a){switch(a.g){case 1:if(ht(e.m),t.Da||t.kb==null||t.nc)return a.return();if(t.kb=null,!t.lc){a.s(2);break}return A(a,Kh(e,t,t.Re,t.Vd),3);case 3:return a.return();case 2:if(SI(e,t),t.stream.segmentIndex){a.s(4);break}return n=t.stream,ge(a,5),A(a,t.stream.createSegmentIndex(),7);case 7:Pe(a,6);break;case 5:return i=Se(a),A(a,Wh(e,t,i),8);case 8:return a.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Da||t.kb||Mn(e,t,0),a.return();case 4:ge(a,9),r=MI(e,t),r!=null&&(Mn(e,t,r),t.sd=!1),Pe(a,10);break;case 9:return o=Se(a),A(a,Wh(e,t,o),11);case 11:return a.return();case 10:if(s=Array.from(e.i.values()),!e.I||!s.every(function(l){return l.endOfStream})){a.s(0);break}return A(a,e.g.aa.endOfStream(),13);case 13:ht(e.m),u=e.g.aa.getDuration(),u!=0&&u<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.bb(u),ie(a)}})}function MI(e,t){if(Gh(t))return q2(e.g.aa,t.stream.originalId||""),null;if(t.type==be&&Y2(e.g.aa),t.stream.isAudioMuxedInVideo)return null;var n=e.h.updateIntervalSeconds/Math.max(1,Math.abs(e.g.gb()));if(!Wy(e.g.aa)&&t.type!=be)return n/2;var i=e.g.Rc();if(t.type==="audio")for(var r=v(e.o.keys()),o=r.next();!o.done;o=r.next())o=e.o.get(o.value),o.Oa(i,!0),la(o,i);r=t.xa?t.xa.endTime:i;var s=X2(e.g.aa,t.type,i),u=Math.max(1,Math.max(e.h.rebufferingGoal,e.h.bufferingGoal)*e.C),a=e.j.presentationTimeline.getDuration()-r;if(o=$o(e.g.aa,t.type),1e-6>a&&o)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(be))&&Gh(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,s>=u)return n/2;if(u=!t.ja,o=CI(e,t,i,o),!o)return n;s=!1,u&&t.bf&&(s=!0,t.bf=!1),u=1/0,a=Array.from(e.i.values()),a=v(a);for(var l=a.next();!l.done;l=a.next())l=l.value,Gh(l)||l.ja&&!l.ja.current()||(u=Math.min(u,l.xa?l.xa.endTime:i));return r>=u+e.j.presentationTimeline.h?n:(e.h.crossBoundaryStrategy!=="keep"&&NI(e,t,o)||(t.ba&&t.ja&&!e.o.has(t.stream)&&(t.ba.Oa(o.startTime+.001),la(t.ba,o.startTime).catch(function(){})),kI(e,t,i,o,s).catch(function(){}),t.nd&&DI(e,t.nd,i)),null)}function CI(e,t,n,i){if(t.ja)return(n=t.ja.current())&&t.xa&&.001>Math.abs(t.xa.startTime-n.startTime)&&(n=t.ja.next().value),n;if(t.xa||i)return n=t.xa?t.xa.endTime:i,e=0>e.g.gb(),t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(n,!1,e)),t.ja&&t.ja.next().value;i=e.j.sequenceMode?0:e.h.inaccurateManifestTolerance;var r=Math.max(n-i,0);e=0>e.g.gb();var o=null;return i&&(t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(r,!1,e)),o=t.ja&&t.ja.next().value),o||(t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(n,!1,e)),o=t.ja&&t.ja.next().value),o}function kI(e,t,n,i,r){var o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b;return U(function(D){switch(D.g){case 1:if(o=zt,s=t.stream,u=t.ja,t.Da=!0,ge(D,2),i.dc()==2)throw new _(1,1,1011);return A(D,LI(e,t,i,r),4);case 4:return ht(e.m),e.B?D.return():(a=s.mimeType=="video/mp4"||s.mimeType=="audio/mp4",l=w.ReadableStream,e.h.lowLatencyMode&&e.j.isLowLatency&&l&&a&&(e.j.type!="HLS"||i.m)?(g=new Uint8Array(0),y=m=!1,S=function(k){var N,j,V;return U(function(F){switch(F.g){case 1:if(m||(y=!0,ht(e.m),e.B))return F.return();if(ge(F,2),g=RI(g,k),N=!1,j=0,new ft().box("mdat",function(B){j=B.size+B.start,N=!0}).parse(g,!1,!0),!N){F.s(4);break}return V=g.subarray(0,j),g=g.subarray(j),A(F,Vh(e,t,n,s,i,V,!0,r),5);case 5:t.ba&&t.ja&&la(t.ba,i.startTime,!0);case 4:Pe(F,0);break;case 2:x=Se(F),ie(F)}})},A(D,da(e,t,i,S),9)):(f=da(e,t,i),A(D,f,7)));case 7:return d=D.h,ht(e.m),e.B?D.return():(ht(e.m),t.lc?(t.Da=!1,Mn(e,t,0),D.return()):A(D,Vh(e,t,n,s,i,d,!1,r),6));case 9:if(E=D.h,x)throw x;if(y){D.s(10);break}return m=!0,ht(e.m),e.B?D.return():t.lc?(t.Da=!1,Mn(e,t,0),D.return()):A(D,Vh(e,t,n,s,i,E,!1,r),10);case 10:t.ba&&t.ja&&la(t.ba,i.startTime,!0);case 6:if(ht(e.m),e.B)return D.return();t.xa=i,u.next(),t.Da=!1,t.bg=!1,M=e.g.aa.Fb(),L=M[t.type],JSON.stringify(L),t.lc||(P=null,t.type===o.la?P=e.i.get(o.V):t.type===o.V&&(P=e.i.get(o.la)),P&&P.type==o.V?e.g.qe(i,t.stream,P.stream.isAudioMuxedInVideo):e.g.qe(i,t.stream,t.stream.codecs.includes(","))),Mn(e,t,0),Pe(D,0);break;case 2:if(b=Se(D),ht(e.m,b),e.B)return D.return();if(t.Da=!1,b.code==7001)t.Da=!1,$s(t),Mn(e,t,0),D.s(0);else if(t.type==o.za&&e.h.ignoreTextStreamFailures)e.i.delete(o.za),D.s(0);else return b.code==3017?A(D,PI(e,t,b),0):(t.sd=!0,b.category==1&&t.ba&&ca(t.ba,i),b.severity=2,A(D,Wh(e,t,b),0))}})}function DI(e,t,n){var i,r,o,s,u,a,l,f;U(function(d){switch(d.g){case 1:if(i=t.stream,o=(r=i.segmentIndex.Gb(n))&&r.next().value,!o){d.s(0);break}if(s=o.Y,!s||oc(s,t.yb)){d.s(3);break}return t.yb=s,ge(d,4),A(d,da(e,t,s),6);case 6:u=d.h;var g=e.g.aa;g.I&&Rd(g.I,u,0,i),Pe(d,3);break;case 4:throw a=Se(d),t.yb=null,a;case 3:if(t.xa&&t.xa==o){d.s(0);break}return t.xa=o,ge(d,8),A(d,da(e,t,o),10);case 10:l=d.h,g=e.g.aa,g.I&&Rd(g.I,l,0,i),Pe(d,0);break;case 8:throw f=Se(d),t.xa=null,f}})}function RI(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function PI(e,t,n){var i,r,o,s;return U(function(u){if(u.g==1){if(i=Array.from(e.i.values()),i.some(function(a){return a!=t&&a.bg}))return u.s(2);if(r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,e.g.disableStream(t.stream,r))return u.return();if(e.h.avoidEvictionOnQuotaExceededError)return Mn(e,t,4),u.return();if(o=Math.round(100*e.C),20<o)e.C-=.2;else if(4<o)e.C-=.04;else return t.sd=!0,e.B=!0,e.g.onError(n),u.return();return t.bg=!0,s=e.g.Rc(),A(u,Hh(e,t,s),2)}Mn(e,t,4),ie(u)})}function LI(e,t,n,i){var r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L;return U(function(P){switch(P.g){case 1:if(r=zt,o=t.xa==null,s=[],u=Math.max(0,Math.max(n.appendWindowStart,e.W)-.1),a=Math.min(n.appendWindowEnd,e.T)+.01,l=n.codecs||t.stream.codecs,f=io(l),d=Xn(n.mimeType||t.stream.mimeType),g=n.timestampOffset,g==t.he&&u==t.Ac&&a==t.zc&&f==t.fe&&d==t.ge){P.s(2);break}if(m=t.fe&&t.ge&&iI(e.g.aa,t.type,d,l),!m){P.s(3);break}if(y=null,t.type===r.la?y=e.i.get(r.V):t.type===r.V&&(y=e.i.get(r.la)),!y){P.s(3);break}return A(P,ha(y).catch(function(){}),5);case 5:y.yb=null,y.Ac=null,y.zc=null,mc(e,y);case 3:return A(P,v0(e,t,g,u,a,n,f,d),2);case 2:return oc(n.Y,t.yb)||(t.yb=n.Y,n.l&&n.Y&&(x=da(e,t,n.Y),S=function(){var b,D,k,N,j,V,F;return U(function(B){switch(B.g){case 1:return ge(B,2),A(B,x,4);case 4:return b=B.h,ht(e.m),D=null,k=new Map,N={projection:null,hfov:null},j=new ft,j.box("moov",Fe).box("trak",Fe).box("mdia",Fe).R("mdhd",function(H){D=tc(H.reader,H.version).timescale}).box("hdlr",function(H){switch(H=H.reader,H.skip(8),H.Cc()){case"soun":k.set(r.V,D);break;case"vide":k.set(r.la,D)}D=null}).box("minf",Fe).box("stbl",Fe).R("stsd",oo).box("encv",qn).box("avc1",qn).box("avc3",qn).box("hev1",qn).box("hvc1",qn).box("dvav",qn).box("dva1",qn).box("dvh1",qn).box("dvhe",qn).box("dvc1",qn).box("dvi1",qn).box("vexu",Fe).box("proj",Fe).R("prji",function(H){H=H.reader.Cc(),N.projection=H}).box("hfov",function(H){H=H.reader.S()/1e3,N.hfov=H}).parse(b),t.type===r.la&&_I(e,N),k.has(t.type)?n.Y.timescale=k.get(t.type):D!=null&&(n.Y.timescale=D),V=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,A(B,e.g.Fg(t.type,b),5);case 5:return A(B,lc(e.g.aa,t.type,b,null,t.stream,V,t.Fc,i),6);case 6:Pe(B,0);break;case 2:throw F=Se(B),t.yb=null,F}})},E=n.startTime,o&&(M=$o(e.g.aa,t.type),M!=null&&(E=M)),e.g.fj(E,n.Y),s.push(S()))),L=t.xa?t.xa.i:null,n.i!=L&&s.push(Q2(e.g.aa,t.type,n.startTime)),A(P,Promise.all(s),0)}})}function v0(e,t,n,i,r,o,s,u){var a,l,f,d;return U(function(g){if(g.g==1)return a=zt,l=new Map,e.l.audio&&l.set(a.V,e.l.audio),e.l.video&&l.set(a.la,e.l.video),ge(g,2),t.Ac=i,t.zc=r,s&&(t.fe=s),u&&(t.ge=u),t.he=n,f=e.j.sequenceMode||e.j.type=="HLS",A(g,$2(e.g.aa,t.type,n,i,r,f,o.mimeType||t.stream.mimeType,o.codecs||t.stream.codecs,l),4);if(g.g!=2)return Pe(g,0);throw d=Se(g),t.Ac=null,t.zc=null,t.fe=null,t.ge=null,t.he=null,d})}function Vh(e,t,n,i,r,o,s,u){s=s===void 0?!1:s,u=u===void 0?!1:u;var a,l,f,d,g,m;return U(function(y){switch(y.g){case 1:return a=i.closedCaptions&&0<i.closedCaptions.size,e.h.shouldFixTimestampOffset&&(f=i.mimeType=="video/mp4"||i.mimeType=="audio/mp4",d=null,r.Y&&(d=r.Y.timescale),(g=f&&d&&i.type==="video"&&e.j.type=="DASH")&&(l=new ft),g&&l.box("moof",Fe).box("traf",Fe).R("tfdt",function(x){var S,E,M,L,P,b;return U(function(D){return S=ec(x.reader,x.version),E=S.baseMediaDecodeTime,E?(M=-E/d,L=Number(t.he)||0,L<M?(P=t.Ac,b=t.zc,A(D,v0(e,t,M,P,b,r),0)):D.s(0)):D.return()})}),g&&l.parse(o,!1,s)),A(y,Hh(e,t,n),2);case 2:return ht(e.m),m=t.Fc,t.Fc=!1,A(y,e.g.Fg(t.type,o),3);case 3:return A(y,lc(e.g.aa,t.type,o,r,i,a,m,u,s),4);case 4:ht(e.m),ie(y)}})}function Hh(e,t,n){var i,r,o,s,u,a,l,f;return U(function(d){if(d.g==1)return i=t.stream.segmentIndex,i instanceof kt&&i.Oa(e.j.presentationTimeline.pb()),r=Math.max(e.h.bufferBehind*e.C,e.j.presentationTimeline.h),o=Ih(e.g.aa,t.type),o==null?(e.F==t&&(e.F=null),d.return()):(s=n-o,u=e.h.evictionGoal,a=e.j.presentationTimeline.Hb(),l=e.j.presentationTimeline.ob(),f=s-r,l-a>u&&(f=Math.max(s-r,a-u-o)),f<=u?d.return():A(d,e.g.aa.remove(t.type,o,o+f),2));if(d.g!=4)return ht(e.m),e.F?A(d,Hh(e,e.F,n),4):d.s(0);ht(e.m),ie(d)})}function Gh(e){return e&&e.type==be&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function da(e,t,n,i){var r,o,s,u,a;return U(function(l){switch(l.g){case 1:if(r=n.Ib())return l.return(r);if(o=null,t.ba){var f=t.ba,d=f.h;n instanceof jn&&(d=f.j),d.has(n)?(f=d.get(n),i&&(f.pg=i),o=f.Gd):o=null}return o||(o=yc(n,t.stream,i||null,e.h.retryParameters,e.g.Xb)),s=0,t.ja&&(s=t.ja.h),t.rb=o,A(l,o.promise,2);case 2:if(u=l.h,t.rb=null,a=u.data,!n.aesKey){l.s(3);break}return A(l,bh(a,n.aesKey,s),4);case 4:a=l.h;case 3:return l.return(a)}})}function yc(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e instanceof ye?e:void 0,u=s?1:0;return e=fa(e.N(),e.Sa,e.wa,i,n),e.contentType=t.type,r.request(Fi,e,{type:u,stream:t,segment:s,isPreload:o})}function Kh(e,t,n,i){var r,o;return U(function(s){if(s.g==1)return t.lc=!1,t.Re=!1,t.Vd=0,t.nc=!0,t.xa=null,t.ja=null,t.ba&&!e.o.has(t.stream)&&$i(t.ba),i?(r=e.g.Rc(),o=e.g.aa.getDuration(),A(s,e.g.aa.remove(t.type,r+i,o),3)):A(s,Xy(e.g.aa,t.type),4);if(s.g!=3)return ht(e.m),n?A(s,e.g.aa.flush(t.type),3):s.s(3);ht(e.m),t.nc=!1,t.endOfStream=!1,t.Da||t.kb||Mn(e,t,0),ie(s)})}function Mn(e,t,n){var i=t.type;(i!=be||e.i.has(i))&&(t.kb=new Pu(function(){var r;return U(function(o){if(o.g==1)return ge(o,2),A(o,II(e,t),4);if(o.g!=2)return Pe(o,0);r=Se(o),e.g&&e.g.onError(r),ie(o)})}).da(n))}function $s(e){e.kb!=null&&(e.kb.stop(),e.kb=null)}function ha(e){return U(function(t){return e.rb?A(t,e.rb.abort(),0):t.s(0)})}function Wh(e,t,n){var i;return U(function(r){if(r.g==1)return n.code==3024?(t.Da=!1,$s(t),Mn(e,t,0),r.return()):A(r,Yv(e.P),2);if(ht(e.m),n.category===1&&n.code!=1003){if(t.fc)return Fh(e,!1),r.return();i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),ie(r)})}function Tc(e,t,n){t=t===void 0?!1:t,n=n===void 0?!0:n;var i,r,o,s,u,a;return U(function(l){if(l.g==1){if(i=Date.now()/1e3,r=e.h.minTimeBetweenRecoveries,!t){if(!e.h.allowMediaSourceRecoveries||i-e.L<r)return l.return(!1);e.L=i}return o=zt,(s=e.i.get(o.V))&&(s.yb=null,s.Ac=null,s.zc=null,n&&mc(e,s),ha(s).catch(function(){}),s.ja&&s.ja.dg()),(u=e.i.get(o.la))&&(u.yb=null,u.Ac=null,u.zc=null,n&&mc(e,u),ha(u).catch(function(){}),u.ja&&u.ja.dg()),a=new Map,e.l.audio&&a.set(o.V,e.l.audio),e.l.video&&a.set(o.la,e.l.video),A(l,qy(e.g.aa,a),2)}return!u||u.nc||u.Da||u.kb||Mn(e,u,0),!s||s.nc||s.Da||s.kb||Mn(e,s,0),l.return(!0)})}function _I(e,t){if(e.M.projection!=t.projection||e.M.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new re("spatialvideoinfo",n)}else n=new re("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.M=t}}function Xh(e){if(e.h.crossBoundaryStrategy!=="keep"){e.H.stop();var t=e.g.Rc(),n=e.i.get("video")||e.i.get("audio");n&&(n=n.yb)&&n.g!==null&&(t=n.g-t,0>t||1<t||(e.G=n.g+.01,e.H.da(t)))}}function NI(e,t,n){if(t.type===be)return!1;var i=t.yb;if(!i)return!1;n=n.Y;var r=i.g!==n.g;if(e.h.crossBoundaryStrategy==="reset_to_encrypted"&&(i.encrypted||n.encrypted||(r=!1),i.encrypted&&(e.h.crossBoundaryStrategy="keep")),e.h.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&i.encrypted==n.encrypted&&(r=!1),r&&t.Fc){var o=e.g.video,s=o.paused;Tc(e,!0).then(function(){e.g.onEvent(new re("boundarycrossed")),s||o.play()})}return r}function wc(){}function zh(e,t,n,i,r){var o=r in i,s=o?n.constructor==Object&&Object.keys(i).length==0:n.constructor==Object&&Object.keys(n).length==0,u=o||s,a=!0,l;for(l in t){var f=r+"."+l,d=o?i[r]:n[l];u||l in n?t[l]===void 0?d===void 0||u?delete e[l]:e[l]=Xi(d):s?e[l]=t[l]:d.constructor==Object&&t[l]&&t[l].constructor==Object?(e[l]||(e[l]=Xi(d)),f=zh(e[l],t[l],d,i,f),a=a&&f):typeof t[l]!=typeof d||t[l]==null||typeof t[l]!="function"&&t[l].constructor!=d.constructor?(fe("Invalid config, wrong type for "+f),a=!1):(typeof n[l]=="function"&&n[l].length!=t[l].length&&J("Unexpected number of arguments for "+f),e[l]=t[l]):(fe("Invalid config, unrecognized key "+f),a=!1)}return a}function Sc(e,t){for(var n={},i=n,r=0,o=0;r=e.indexOf(".",r),!(0>r);)(r==0||e[r-1]!="\\")&&(o=e.substring(o,r).replace(/\\\./g,"."),i[o]={},i=i[o],o=r+1),r+=1;return i[e.substring(o).replace(/\\\./g,".")]=t,n}function Qs(e,t){return e&&t}function y0(e,t){function n(o){for(var s=v(Object.keys(o)),u=s.next();!u.done;u=s.next())if(u=u.value,!(o[u]instanceof HTMLElement))if(r(o[u])&&Object.keys(o[u]).length===0)delete o[u];else{var a=o[u];Array.isArray(a)&&a.length===0||typeof o[u]=="function"?delete o[u]:r(o[u])&&(n(o[u]),Object.keys(o[u]).length===0&&delete o[u])}}function i(o,s){return Object.keys(o).reduce(function(u,a){var l=o[a];return s.hasOwnProperty(a)?l instanceof HTMLElement&&s[a]instanceof HTMLElement?l.isEqualNode(s[a])||(u[a]=l):r(l)&&r(s[a])?(l=i(l,s[a]),(0<Object.keys(l).length||!r(l))&&(u[a]=l)):Array.isArray(l)&&Array.isArray(s[a])?jd(l,s[a])||(u[a]=l):Number.isNaN(l)&&Number.isNaN(s[a])||l!==s[a]&&(u[a]=l):u[a]=l,u},{})}function r(o){return o&&typeof o=="object"&&!Array.isArray(o)}return e=i(e,t),n(e),e}R("shaka.util.ConfigUtils",wc),wc.getDifferenceFromConfigObjects=y0,wc.convertToConfigObject=Sc,wc.mergeConfigObjects=zh;function Un(){}function T0(e){return e=tr(e),new _t(e).nb}function pa(e,t,n){function i(u){Ln(o).setUint32(s,u.byteLength,!0),s+=4,o.set(De(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new _(2,6,6015);var r;typeof t=="string"?r=Cd(t,!0):r=t,e=tr(e),e=Cd(e,!0);var o=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),o}function qh(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=tr(e).split("skd://").pop(),pa(e,n,t))}function xc(e,t){e===2&&(e=t.drmInfo)&&Cl(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}R("shaka.drm.FairPlay",Un),Un.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&Cl(e.keySystem)){try{var n=St(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=yi(Ti(n)))}},Un.muxFairPlayRequest=function(e,t){xc(e,t)},Un.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&Cl(n.keySystem)&&xc(e,t)}},Un.conaxFairPlayRequest=function(e,t){xc(e,t)},Un.ezdrmFairPlayRequest=function(e,t){xc(e,t)},Un.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&Cl(e.keySystem)&&(e=De(t.body),e=Tr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=ji("spc="+e))},Un.muxInitDataTransform=function(e,t,n){return qh(e,t,n)},Un.expressplayInitDataTransform=function(e,t,n){return qh(e,t,n)},Un.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=tr(e).split("skd://").pop().split("?").shift(),n=w.atob(n);var i=new ArrayBuffer(2*n.length);i=ev(i);for(var r=0,o=n.length;r<o;r++)i[r]=n.charCodeAt(r);return pa(e,i,t)},Un.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=tr(e).split(";").pop(),pa(e,n,t))},Un.verimatrixInitDataTransform=function(e,t,n){return qh(e,t,n)},Un.initDataTransform=pa,Un.defaultGetContentId=T0,Un.isFairPlaySupported=function(){var e;return U(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ge(t,2),A(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Se(t),t.return(!1))})};function Yh(){this.g=null}Yh.prototype.configure=function(e){this.g=e},Yh.prototype.create=function(e){var t;if(this.g.language){var n=jI(e,this.g.language);n.length&&(t=n)}return t||(t=e.filter(function(i){return i.primary}),t=t.length?t:e),e=OI(t,this.g.role),e.length&&(t=e),this.g.videoLayout&&(e=VI(t,this.g.videoLayout),e.length&&(t=e)),this.g.Sc&&(e=BI(t,this.g.Sc),e.length&&(t=e)),this.g.channelCount&&(e=FI(t,this.g.channelCount),e.length&&(t=e)),this.g.Kc&&(e=UI(t,this.g.Kc),e.length&&(t=e)),this.g.fd&&(e=bI(t,this.g.fd),e.length&&(t=e)),e=HI(t,this.g.spatialAudio),e.length&&(t=e),this.g.audioCodec&&(e=GI(t,this.g.audioCodec),e.length&&(t=e)),new Jl(t[0],t,!(this.g.codecSwitchingStrategy=="smooth"&&Lo()))};function jI(e,t){t=ct(t);var n=Vl(t,e.map(function(i){return Jd(i)}));return n?e.filter(function(i){return n==Jd(i)}):[]}function OI(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function UI(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function bI(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function FI(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,i){return n.audio||i.audio?n.audio?i.audio?(i.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function BI(e,t){if(t=="AUTO"){var n=e.some(function(i){return!!(i.video&&i.video.hdr&&i.video.hdr=="HLG")});t=sv(n)}return e.filter(function(i){return!(i.video&&i.video.hdr&&i.video.hdr!=t)})}function VI(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function HI(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function GI(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function Ec(){}function Js(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:qi(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(f,d,g){return w.shakaMediaKeysPolyfill==="apple"&&d=="skd"&&(d=g.serverCertificate,g=T0(f),f=pa(f,g,d)),f},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Gi(),minHdcpVersion:"",ignoreDuplicateInitData:!Ft("Tizen 2"),defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"};(Gi()||Wi())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",i=!1;!Lo()||Ki()||Wi()||Ts()||yr()&&nv()===79||Ni()&&!$r()&&!Ad()||Ed()&&_u()||(n="smooth",i=!0),i={retryParameters:qi(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:Ac,manifestPreprocessorTXml:Ic,sequenceMode:!1,multiTypeVariantsAllowed:i,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:wA(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:Ac,manifestPreprocessorTXml:Ic,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var r={retryParameters:qi(),failureCallback:function(f){return Qs([f])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Wi()||Ts(),dontChooseCodecs:!1,shouldFixTimestampOffset:yr()||Ki(),avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep"};(yr()||Ki()||Ni()||Rl())&&(r.stallSkip=0),(navigator.userAgent.match(/Edge\//)||Gi())&&(r.gapPadding=.01),Ki()&&(r.gapPadding=2),Dl()&&(r.crossBoundaryStrategy="reset"),vr()&&(r.crossBoundaryStrategy="reset_to_encrypted");var o={trackSelectionCallback:function(f){return U(function(d){return d.return(f)})},downloadSizeCallback:function(f){var d;return U(function(g){return g.g==1?navigator.storage&&navigator.storage.estimate?A(g,navigator.storage.estimate(),3):g.return(!0):(d=g.h,g.return(d.usage+f<.95*d.quota))})},progressCallback:function(f,d){return Qs([f,d])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:sn()?.5:0,preferNetworkInformationBandwidth:!1},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(f){return Qs([f],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(f,d){return Qs([f,d])},dispatchAllEmsgBoxes:!1};var s=!1,u=!1,a=!0;Id()&&(u=s=!0,a=!1);var l={drm:t,manifest:i,streaming:r,mediaSource:n,offline:o,abrFactory:function(){return new It},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Yh,[null].concat(Q(tn.apply(0,arguments)))))},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:s,skipPlayDetection:u,supportsMultipleMediaElements:a,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0},ignoreHardwareResolution:!1};return o.trackSelectionCallback=function(f){return U(function(d){return d.return(KI(f,l.preferredAudioLanguage,l.preferredVideoHdrLevel))})},l}function w0(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function lo(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return zh(e,t,n||Js(),i,"")}function KI(e,t,n){var i=n;i=="AUTO"&&(n=e.some(function(u){return!!(u.hdr&&u.hdr=="HLG")}),i=sv(n));var r=e.filter(function(u){return!(u.type!="variant"||u.hdr&&u.hdr!=i)});n=[];var o=Vl(t,r.map(function(u){return u.language}));o&&(n=r.filter(function(u){return ct(u.language)==o})),n.length==0&&(n=r.filter(function(u){return u.primary})),n.length==0&&(r.map(function(u){return u.language}),n=r);var s=n.filter(function(u){return u.height&&480>=u.height});for(s.length&&(s.sort(function(u,a){return a.height-u.height}),n=s.filter(function(u){return u.height==s[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(u,a){return u.bandwidth-a.bandwidth}),t.push(n[r])),e=v(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=be&&n.type!="image"||t.push(n);return t}function Ac(e){return Qs([e],e)}function Ic(e){return Qs([e],e)}R("shaka.util.PlayerConfiguration",Ec),Ec.mergeConfigObjects=lo,Ec.createDefaultForLL=w0,Ec.createDefault=Js;function WI(){this.g=null,this.h=[]}function $h(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=v(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function XI(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],i=v(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function zI(){this.i=this.h=null,this.g=[]}function Qh(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Mc(){this.mc=this.bh=this.u=this.A=this.I=this.B=this.o=this.j=this.H=this.C=this.i=this.P=this.T=this.L=this.M=this.O=this.l=this.m=NaN,this.K=0,this.F=this.G=NaN,this.g=new WI,this.h=new zI}function Si(e,t,n,i){ut.call(this),this.O=e,this.Z=t,this.Fa=i.networkingEngine,this.B=n,this.o=null,this.ya=0,this.Ma=i.Lc,this.F=i.Zi,this.Na=i.$i,this.g=i.config,this.l=this.G=this.h=null,this.pa=!1,this.H=i.kj,this.sa=!1,this.i=null,this.ka=!1,this.j=this.C=null,this.ea=!1,this.M=new Map,this.Aa=!1,this.Ga=i.jj,this.$=new Mc,this.oa=new st,this.m=new st,this.P=null,this.u=!1,this.fa=i.Uh,this.W=this.K=null,this.La=i.Th,this.T=!1,this.L=[],this.I=[],this.A=!0}At(Si,ut);function ga(e,t,n){(e=t?e.I:e.L)?e.push(n):n()}function qI(e){if(e.I)for(var t=v(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function S0(e,t){if(e.P=t,e.T=!0,e.L){t=v(e.L);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.L=null}h=Si.prototype,h.getStartTime=function(){return this.B},h.Qc=function(){return this.O},h.Hf=function(){return this.h};function YI(e){return e.ea=!0,e.j}function $I(e){return e.sa=!0,e.H}h.getStats=function(){return this.$};function QI(e){return e.ka=!0,e.i}h.Ai=function(){return this.K?Vo(this.K):null},h.zi=function(){return this.W?qu(this.W):null};function JI(e){return e.Aa=!0,e.M}h.start=function(){var e=this;(function(){var t;return U(function(n){switch(n.g){case 1:return A(n,Promise.resolve(),2);case 2:return ge(n,3),A(n,ZI(e),5);case 5:if(Qo(e),w.shakaMediaKeysPolyfill==="webkit"){n.s(6);break}return A(n,x0(e),7);case 7:Qo(e);case 6:return A(n,eM(e),8);case 8:if(Qo(e),!e.fa||!e.i){n.s(9);break}return A(n,u2(e.i),10);case 10:Qo(e);case 9:e.m.resolve(),Pe(n,0);break;case 3:t=Se(n),t instanceof _&&(t.code==7001||t.code==7003)||e.m.reject(t),ie(n)}})})()},h.dispatchEvent=function(e){return this.P?this.P.dispatchEvent(e):ut.prototype.dispatchEvent.call(this,e)},h.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new re("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Qo(e){if(e.u)throw new _(2,7,7003)}function Jh(e,t){e.dispatchEvent(new re("onstatechange",new Map().set("state",t)))}function ZI(e){var t,n,i,r,o,s,u,a,l;return U(function(f){switch(f.g){case 1:if(Jh(e,"manifest-parser"),e.l||(e.G=My(e.O,e.Z),e.l=e.G(),e.l.configure(e.g.manifest,function(){return e.A})),t=Date.now()/1e3,Jh(e,"manifest"),e.h){f.s(2);break}return A(f,e.l.start(e.O,e.Na),3);case 3:if(e.h=f.h,e.h.variants.length!=1){f.s(2);break}for(n=[],i=e.h.variants[0],r=v([i.video,i.audio]),o=r.next();!o.done;o=r.next())(s=o.value)&&!s.segmentIndex&&n.push(s.createSegmentIndex());if(!(0<n.length)){f.s(2);break}return A(f,Promise.all(n),2);case 2:return e.oa.resolve(),u=new re("manifestparsed",void 0),A(f,Promise.resolve(),7);case 7:if(e.dispatchEvent(u),e.h.variants.length==0)throw new _(2,4,4036);tM(e.h),a=Date.now()/1e3,l=a-t,e.$.H=l,ie(f)}})}function x0(e,t){var n,i,r,o,s,u;return U(function(a){switch(a.g){case 1:if(!e.h||e.i)return a.return();if(Jh(e,"drm-engine"),e.ya=Date.now()/1e3,e.i=e.Ma(),e.F.h=e.i,e.i.configure(e.g.drm,function(){return e.A}),n=Ey(e.F,e.h),!n){a.s(2);break}return i=new re("trackschanged",void 0),A(a,Promise.resolve(),3);case 3:Qo(e),e.dispatchEvent(i);case 2:return r=Gl(e.h.variants),o=!0,e.h&&e.h.presentationTimeline&&e.h.type!="HLS"&&(o=e.h.presentationTimeline.U()),A(a,uy(e.i,r,e.h.offlineSessionIds,o),4);case 4:if(Qo(e),!t){a.s(5);break}return A(a,e.i.Lb(t),6);case 6:Qo(e);case 5:return A(a,xy(e.F,e.h),7);case 7:if(s=a.h,!s){a.s(0);break}return u=new re("trackschanged",void 0),A(a,Promise.resolve(),9);case 9:e.dispatchEvent(u),ie(a)}})}h.configure=function(e,t){e=Sc(e,t),lo(this.g,e)},h.getConfiguration=function(){return Xi(this.g)};function eM(e){var t,n,i,r,o,s,u;return U(function(a){return e.o||(e.o=e.g.adaptationSetCriteriaFactory(),e.o.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,Sc:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Kc:e.g.preferredAudioLabel,fd:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:""})),e.La&&(t=e.g.abrFactory,e.C=t,e.j=t(),e.j.configure(e.g.abr)),!e.fa||(n=e.h.presentationTimeline.U(),i=Gl(e.h.variants),r=e.o.create(i),e.j.configure(e.g.abr),e.j.setVariants(Array.from(r.values())),o=e.j.chooseVariant(),!o)?a.s(0):(s=[],e.K=o,o.video&&s.push(Zh(e,o.video,n)),o.audio&&s.push(Zh(e,o.audio,n)),(u=_s(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&Xv(o.audio,u,e.g)&&(s.push(Zh(e,u,n)),e.W=u),A(a,Promise.all(s),0))})}function Zh(e,t,n){var i,r,o,s,u;return U(function(a){return a.g==1?(i=e.g.streaming.segmentPrefetchLimit||2,r=new pc(i,t,function(l,f,d){return yc(l,f,d||null,e.g.streaming.retryParameters,e.Fa,e.A)},!1),e.M.set(t.id,r),t.segmentIndex?a.s(2):A(a,t.createSegmentIndex(),2)):(o=e.B||0,s=t.segmentIndex.Gb(o),u=null,s&&(u=s.current(),u||(u=s.next().value)),u||(u=Yi(t.segmentIndex)),u?n?u.Y?A(a,f0(r,u.Y),0):a.s(0):A(a,la(r,u.startTime),0):a.s(0))})}h.Lj=function(){return this.m},h.destroy=function(){var e=this,t,n,i;return U(function(r){switch(r.g){case 1:if(e.u=!0,!e.l||e.pa){r.s(2);break}return A(r,e.l.stop(),2);case 2:if(!e.j||e.ea){r.s(4);break}return A(r,e.j.stop(),4);case 4:if(e.H&&!e.sa&&e.H.release(),!e.i||e.ka){r.s(6);break}return A(r,e.i.destroy(),6);case 6:if(0<e.M.size&&!e.Aa)for(t=v(e.M.values()),n=t.next();!n.done;n=t.next())i=n.value,$i(i);ie(r)}})};function tM(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}R("shaka.media.PreloadManager",Si),Si.prototype.destroy=Si.prototype.destroy,Si.prototype.waitForFinish=Si.prototype.Lj,Si.prototype.getPrefetchedTextTrack=Si.prototype.zi,Si.prototype.getPrefetchedVariantTrack=Si.prototype.Ai;function Jo(e,t){ut.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Jc:null,Ic:Zs,xc:function(i,r){return _r(n,"enter",i,r)}},{Jc:ma,Ic:Zs,xc:function(i,r){return _r(n,"enter",i,r)}},{Jc:va,Ic:Zs,xc:function(i,r){return _r(n,"enter",i,r)}},{Jc:Zs,Ic:ma,xc:function(i,r){return _r(n,"exit",i,r)}},{Jc:Zs,Ic:va,xc:function(i,r){return _r(n,"exit",i,r)}},{Jc:ma,Ic:va,xc:function(i,r){r?_r(n,"skip",i,r):(_r(n,"enter",i,r),_r(n,"exit",i,r))}},{Jc:va,Ic:ma,xc:function(i,r){return _r(n,"skip",i,r)}}],this.h=new ke,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}At(Jo,ut),Jo.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ut.prototype.release.call(this)},Jo.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=v(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),o=e<i.startTime?ma:e>i.endTime?va:Zs;this.g.set(i,o);for(var s=v(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.Jc==r&&u.Ic==o&&u.xc(i,t)}}};function _r(e,t,n,i){t=new re(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var ma=1,Zs=2,va=3;function Zo(e,t,n){var i,r,o,s,u,a,l;return U(function(f){switch(f.g){case 1:var d=new _t(e).ab.split("/").pop().split(".");return i=d.length==1?"":d.pop().toLowerCase(),(r=nM.get(i))?f.return(r):(o=0,s=qt([e],n),ge(f,2),s.method="HEAD",A(f,t.request(o,s).promise,4));case 4:u=f.h,r=u.headers["content-type"],Pe(f,3);break;case 2:if(a=Se(f),!a||a.code!=1002&&a.code!=1001){f.s(3);break}return s.method="GET",A(f,t.request(o,s).promise,6);case 6:l=f.h,r=l.headers["content-type"];case 3:return f.return(r?r.toLowerCase().split(";").shift():"")}})}var nM=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function E0(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(s){return E0(s,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=ks,r=e.fontStyle==Ds,o=e.textDecoration.includes(Er);return i&&n.push(["b"]),r&&n.push(["i"]),o&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=A0(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=A0(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(s,u){var a=v(u);return u=a.next().value,a=a.next().value,"<"+u+(a===void 0?"":a)+">"+s+"</"+u+">"},e.payload)}function A0(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function ep(e,t){var n=[];e=v(I0(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,Q(ep(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=E0(i,t),n.push(r)}return n}function I0(e){var t=[];e=v(e);for(var n=e.next(),i={};!n.done;i={jf:void 0},n=e.next())i.jf=n.value,t.some(function(r){return function(o){return Ol(r.jf,o)}}(i))||t.push(i.jf);return t}function iM(e){function t(i){for(var r=5381,o=i.length;o;)r=33*r^i.charCodeAt(--o);return(r>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function hn(e,t){for(this.h=e,this.i=t,this.g=null,e=v(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}h=hn.prototype,h.configure=function(){},h.remove=function(e,t){return this.g?(C0(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},h.append=function(e){if(this.g){var t=ep(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=v(t);for(var i=t.next(),r={};!i.done;r={Tc:void 0},i=t.next())r.Tc=i.value,!e.some(function(o){return function(s){return s.startTime==o.Tc.startTime&&s.endTime==o.Tc.endTime&&s.text==o.Tc.payload}}(r))&&r.Tc.payload&&(i=iM(r.Tc))&&n.push(i);for(e=n.slice().sort(function(o,s){return o.startTime!=s.startTime?o.startTime-s.startTime:o.endTime!=s.endTime?o.endTime-s.startTime:"line"in VTTCue.prototype?n.indexOf(s)-n.indexOf(o):n.indexOf(o)-n.indexOf(s)}),e=v(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)}},h.destroy=function(){return this.g&&(C0(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},h.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},h.setTextVisibility=function(e){e&&!this.g&&M0(this),this.g&&(this.g.mode=e?"showing":"hidden")},h.setTextLanguage=function(){},h.enableTextDisplayer=function(){M0(this)};function M0(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function C0(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var i=v(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}R("shaka.text.SimpleTextDisplayer",hn),hn.prototype.enableTextDisplayer=hn.prototype.enableTextDisplayer,hn.prototype.setTextLanguage=hn.prototype.setTextLanguage,hn.prototype.setTextVisibility=hn.prototype.setTextVisibility,hn.prototype.isTextVisible=hn.prototype.isTextVisible,hn.prototype.destroy=hn.prototype.destroy,hn.prototype.append=hn.prototype.append,hn.prototype.remove=hn.prototype.remove,hn.prototype.configure=hn.prototype.configure;function pn(){}h=pn.prototype,h.configure=function(){},h.remove=function(){},h.append=function(){},h.destroy=function(){},h.isTextVisible=function(){return!1},h.setTextVisibility=function(){},h.setTextLanguage=function(){},h.enableTextDisplayer=function(){},R("shaka.text.StubTextDisplayer",pn),pn.prototype.enableTextDisplayer=pn.prototype.enableTextDisplayer,pn.prototype.setTextLanguage=pn.prototype.setTextLanguage,pn.prototype.setTextVisibility=pn.prototype.setTextVisibility,pn.prototype.isTextVisible=pn.prototype.isTextVisible,pn.prototype.destroy=pn.prototype.destroy,pn.prototype.append=pn.prototype.append,pn.prototype.remove=pn.prototype.remove,pn.prototype.configure=pn.prototype.configure;function gn(e,t){var n=this;document.fullscreenEnabled||J("Using UITextDisplayer in a browser without Fullscreen API support causes subtitles to not be rendered in fullscreen"),this.A=!1,this.h=[],this.j=e,this.C=t,this.u=this.m=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.C.appendChild(this.g),this.o=new Be(function(){n.j.paused||co(n)}),ya(this),this.l=new Map,this.i=new ke,this.i.D(document,"fullscreenchange",function(){co(n,!0)}),this.i.D(this.j,"seeking",function(){co(n,!0)}),this.i.D(this.j,"ratechange",function(){ya(n)}),this.i.D(this.j,"resize",function(){var i=n.j,r=i.videoWidth;i=i.videoHeight,r&&i?n.m=r/i:n.m=null}),this.B=null,"ResizeObserver"in w&&(this.B=new ResizeObserver(function(){co(n,!0)}),this.B.observe(this.g)),this.F=new Map}h=gn.prototype,h.configure=function(e){this.u=e,ya(this),co(this,!0)},h.append=function(e){var t=[].concat(Q(this.h));e=v(I0(e));for(var n=e.next(),i={};!n.done;i={kf:void 0},n=e.next())i.kf=n.value,t.some(function(r){return function(o){return Ol(o,r.kf)}}(i))||this.h.push(i.kf);this.h.length&&ya(this),co(this)},h.destroy=function(){return this.g&&(this.C.removeChild(this.g),this.g=null,this.A=!1,this.h=[],this.o&&(this.o.stop(),this.o=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.B&&(this.B.disconnect(),this.B=null)),Promise.resolve()},h.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),co(this,n>this.h.length),this.h.length||ya(this),!0},h.isTextVisible=function(){return this.A},h.setTextVisibility=function(e){this.A=e,co(this,!0)},h.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},h.enableTextDisplayer=function(){};function ya(e){e.o&&(e.h.length?e.o.ua((e.u?e.u.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.o.stop())}function rM(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function k0(e,t,n,i,r){var o=!1,s=[],u=[];t=v(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,r.push(a);var l=e.l.get(a),f=a.startTime<=i&&a.endTime>i,d=l?l.Nh:null;l&&(s.push(l.lf),l.Ec&&s.push(l.Ec),f||(o=!0,e.l.delete(a),l=null)),f&&(u.push(a),l?rM(e,d)||(o=!0):(oM(e,a,r),l=e.l.get(a),d=l.Nh,o=!0)),0<a.nestedCues.length&&d&&k0(e,a.nestedCues,d,i,r),r.pop()}if(o){for(i=v(s),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(u.sort(function(g,m){return g.startTime!=m.startTime?g.startTime-m.startTime:g.endTime-m.endTime}),u=v(u),i=u.next();!i.done;i=u.next())i=e.l.get(i.value),i.Ec?(i.Ec.contains(n)&&i.Ec.removeChild(n),n.appendChild(i.Ec),i.Ec.appendChild(i.lf)):n.appendChild(i.lf)}}function co(e,t){if(e.g){var n=e.j.currentTime;if(!e.A||t!==void 0&&t){t=v(e.F.values());for(var i=t.next();!i.done;i=t.next())ao(i.value);ao(e.g),e.l.clear(),e.F.clear()}e.A&&k0(e,e.h,e.g,n,[])}}function oM(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var o=document.createElement(r);if(r!="br"&&uM(e,o,t,n,i),n=null,t.region&&t.region.id){var s=t.region,u=e.m===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==Wn?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==Wn?"%":"px"),e.F.has(n))n=e.F.get(n);else{r=document.createElement("span");var a=s.heightUnits==Wn?"%":"px",l=s.widthUnits==Wn?"%":"px",f=s.viewportAnchorUnits==Wn?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var d=s.height,g=s.width;s.heightUnits===2&&(d=5.33*s.height,a="%"),s.widthUnits===2&&(g=s.width*u,l="%"),r.style.height=d+a,r.style.width=g+l,s.viewportAnchorUnits===2?(u=s.viewportAnchorY/75*100,a=s.viewportAnchorX/(e.m===4/3?160:210)*100,u-=s.regionAnchorY*d/100,a-=s.regionAnchorX*g/100,r.style.top=u+"%",r.style.left=a+"%"):(r.style.top=s.viewportAnchorY-s.regionAnchorY*d/100+f,r.style.left=s.viewportAnchorX-s.regionAnchorX*g/100+f),s.heightUnits!==0&&s.widthUnits!==0&&s.viewportAnchorUnits!==0&&(s=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=s+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.F.set(n,r),n=r}}r=o,i&&(r=document.createElement("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",o.appendChild(r)),e.l.set(t,{lf:o,Nh:r,Ec:n})}function sM(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==bl?n:e==="left"||e==="start"&&t===Hu||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Hu?"line-right":"center"}function uM(e,t,n,i,r){var o=t.style,s=n.nestedCues.length==0,u=1<i.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(f){return" ".repeat(f.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=tp(n.linePadding,n,e.C),o.paddingRight=tp(n.linePadding,n,e.C),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",n.backgroundColor&&(o.backgroundColor=n.backgroundColor),o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),r||((t=aM(i,function(f){return f.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(l.textContent=a)}u&&!i[i.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(o.width="100%",o.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(o.width="100%",o.alignItems="end"),o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=tp(n.fontSize,n,e.C,e.u?e.u.fontScaleFactor:1),i=n.line,i!=null&&(s=n.lineInterpretation,s==Gu&&(s=1,u=16,e.m&&1>e.m&&(u=32),i=0>i?100+i/u*100:i/u*100),s==1&&(o.position="absolute",n.writingMode==bo?(o.width="100%",n.lineAlign==Fo?o.top=i+"%":n.lineAlign=="end"&&(o.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==Fo?o.left=i+"%":n.lineAlign=="end"&&(o.right=100-i+"%")):(o.height="100%",n.lineAlign==Fo?o.right=i+"%":n.lineAlign=="end"&&(o.left=100-i+"%")))),o.lineHeight=n.lineHeight,e=sM(n),e=="line-left"?(o.cssFloat="left",n.position!==null&&(o.position="absolute",n.writingMode==bo?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%")):e=="line-right"?(o.cssFloat="right",n.position!==null&&(o.position="absolute",n.writingMode==bo?(o.right=100-n.position+"%",o.width="auto"):o.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(o.position="absolute",n.writingMode==bo?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==bo?o.width=n.size+"%":o.height=n.size+"%")}function tp(e,t,n,i){i=i===void 0?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function aM(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||i===0)return i}return null}R("shaka.text.UITextDisplayer",gn),gn.prototype.enableTextDisplayer=gn.prototype.enableTextDisplayer,gn.prototype.setTextLanguage=gn.prototype.setTextLanguage,gn.prototype.setTextVisibility=gn.prototype.setTextVisibility,gn.prototype.isTextVisible=gn.prototype.isTextVisible,gn.prototype.remove=gn.prototype.remove,gn.prototype.destroy=gn.prototype.destroy,gn.prototype.append=gn.prototype.append,gn.prototype.configure=gn.prototype.configure;function lM(e,t){function n(o){for(var s=o,u=v(t),a=u.next();!a.done;a=u.next())a=a.value,a.end&&a.start<o&&(s+=a.end-a.start);return o=Math.floor(s/3600),u=Math.floor(s/60%60),a=Math.floor(s%60),s=Math.floor(1e3*s%1e3),(10>o?"0":"")+o+":"+(10>u?"0":"")+u+":"+(10>a?"0":"")+a+"."+(100>s?10>s?"00":"0":"")+s}var i=ep(e);e=`WEBVTT

`,i=v(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case rr:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""}(r)+`
`,e+=r.payload+`

`;return e}R("shaka.text.WebVttGenerator",function(){});function np(e,t){this.h=e,this.g=t,this.i=void 0,this.u=!1,this.F=!0,this.l=this.B=!1,this.o=this.m=void 0,this.A=0,this.G=!1,this.C=new ke,this.j=null}np.prototype.setMediaElement=function(e){this.j=e,pM(this)},np.prototype.configure=function(e){this.g=e};function cM(e){e.u=!1,e.F=!0,e.B=!1,e.l=!1,e.m=0,e.o=0,e.A=0,e.G=!1,e.j=null,e.C.Qa()}function fM(e,t){e.l=t,e.l?e.i==Lc?e.i=_c:e.i==Nc&&(e.i=jc):e.i==_c?e.i=Lc:e.i==jc&&(e.i=Nc)}function dM(e,t){if(e.g&&e.g.enabled&&e.g.version==P0&&e.j&&e.j.autoplay){var n=e.j.play();n&&n.then(function(){e.A=t}).catch(function(){e.A=0})}}function hM(e,t,n){try{if(!e.g.enabled)return t;var i=ip(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=kc;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=Rc;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=R0;break e}r=void 0}i.ot=r,i.su=!0;var o=Cc(i);return rp(t,o)}catch(s){return ue("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function pM(e){e.C.ma(e.j,"play",function(){e.m||(e.m=Date.now())}),e.C.ma(e.j,"playing",function(){e.o||(e.o=Date.now())})}function ip(e){return e.g.sessionId||(e.g.sessionId=w.crypto.randomUUID()),{v:e.g.version,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function eu(e,t,n){n=n===void 0?{}:n;var i=i===void 0?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,ip(e)),n.pr=e.h.gb();var r=n.ot===Dc||n.ot===Rc;if(e.B&&r&&(n.bs=!0,n.su=!0,e.B=!1),n.su==null&&(n.su=e.F),n.v===P0&&(e.h.U()&&(n.ltc=e.h.Zd()),r=!e.G&&e.o&&e.m?e.o-(e.A||e.m):void 0,r!=null&&(n.msd=r,e.G=!0)),e=gM(e,n),i)i=TM(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var o=Cc(e);o&&(t.uris=t.uris.map(function(s){return rp(s,o)}))}}}function gM(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(i,r){return n.includes(r)&&(i[r]=t[r]),i},{}):t}function mM(e){if(e.type===0)return wM;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Rc:Dc;if(t=="audio")return kc;if(t=="text")return e.mimeType==="application/mp4"?Pc:op}}function vM(e,t){if(t=e.h.Fb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}function D0(e,t){if(t=e.h.Fb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):0}function yM(e,t){var n=e.h.Rb();if(!n.length)return NaN;e=n[0],n=v(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Dc:return e.videoBandwidth||NaN;case kc:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Cc(e){function t(d){return 100*n(d/100)}function n(d){return Math.round(d)}function i(d){return!Number.isNaN(d)&&d!=null&&d!==""&&d!==!1}var r=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(d){return encodeURIComponent(d)},rtp:t,tb:n},s=Object.keys(e||{}).sort();s=v(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(i(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var l=o[u];l&&(a=l(a)),l=typeof a;var f=void 0;f=l==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):l==="boolean"?u:l==="symbol"?u+"="+a.description:u+"="+a,r.push(f)}}return r.join(",")}function TM(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3};t=v(t);for(var s=t.next();!s.done;s=t.next())s=s.value,r[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<r.length;e++)(o=Cc(r[e]))&&(n["CMCD-"+i[e]]=o);return n}function rp(e,t){return!t||e.includes("offline:")?e:(e=new _t(e),e.g.set("CMCD",t),e.toString())}var R0="m",kc="a",Dc="v",Rc="av",wM="i",op="c",Pc="tt",P0=2,Lc="d",_c="ld",Nc="h",jc="lh";R("shaka.util.CmcdManager.StreamingFormat",{DASH:Lc,hk:_c,HLS:Nc,ik:jc,wk:"s",OTHER:"o"});function xi(e){this.h=e,this.g=null}h=xi.prototype,h.configure=function(e){this.h=e},h.Ug=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(N0)?1e3*this.g.get(N0):null},h.Sg=function(){return this.h.enabled&&this.g&&this.g.has(_0)?1e3*this.g.get(_0):null},h.Ci=function(){return this.h.enabled&&this.g&&this.g.has(j0)?this.g.get(j0):null},h.Di=function(){return this.h.enabled&&this.g&&this.g.has(O0)?this.g.get(O0):null},h.getBandwidthEstimate=function(e){var t=this.Sg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function L0(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}R("shaka.util.CmsdManager",xi),xi.prototype.getBandwidthEstimate=xi.prototype.getBandwidthEstimate,xi.prototype.getRoundTripTime=xi.prototype.Di,xi.prototype.getResponseDelay=xi.prototype.Ci,xi.prototype.getEstimatedThroughput=xi.prototype.Sg,xi.prototype.getMaxBitrate=xi.prototype.Ug;var _0="etp",N0="mb",j0="rd",O0="rtt";function U0(){this.g=null,this.h=[]}function sp(e,t){return U(function(n){if(n.g==1)return e.g?A(n,new Promise(function(i){return e.h.push(i)}),2):n.s(2);e.g=t,ie(n)})}U0.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function q(e,t,n){t=t===void 0?null:t,ut.call(this);var i=this;this.m=Fc,this.h=null,this.ue=t,this.oa=!1,this.Qe=new ke,this.zd=new ke,this.l=new ke,this.Na=new ke,this.Sb=new ke,this.G=this.I=this.C=this.F=null,this.Te=0,this.$=new U0,this.Z=this.Pb=this.T=this.i=this.Qb=this.H=this.j=this.xd=this.O=this.yg=this.fa=this.L=this.Ga=this.Aa=this.yd=this.M=this.pa=this.K=this.La=null,this.sa=!1,this.Fa=this.o=null,this.We=1e9,this.Oe=[],this.Ve=-1,this.g=Nr(this),this.Xe=w0(),this.P=null,this.Ue=-1,this.Ma=null,this.ka={width:1/0,height:1/0},this.te=new dh(this.g,this.ka,null),this.Ee=[],this.B=null,this.W=this.g.adaptationSetCriteriaFactory(),this.W.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:this.g.preferredAudioChannelCount,Sc:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Kc:this.g.preferredAudioLabel,fd:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),this.Tb=this.g.preferredTextLanguage,this.Hd=this.g.preferredTextRole,this.Fd=this.g.preferForcedSubs,this.Cd=[],n&&n(this),this.L=jM(this),this.fa=new xi(this.g.cmsd),this.F=X0(this),this.F.kg(this.g.streaming.forceHTTP),this.F.lg(this.g.streaming.forceHTTPS),this.F.o=this.g.streaming.minBytesForProgressEvents,this.Ub=this.ea=this.A=null,this.Ze=!1,this.Ye=new Be(function(){return U(function(r){if(r.g==1)return i.ea?A(r,i.Lb(i.Ub,!0),3):r.s(0);if(r.g!=4)return A(r,i.load(i.ea),4);i.Ze?i.Ub.pause():i.Ub.play(),i.ea=null,i.Ze=!1,ie(r)})}),Bc&&(this.A=Bc(),this.A.configure(this.g.ads),this.Sb.D(this.A,"ad-content-pause-requested",function(r){var o;return U(function(s){if(s.g==1)return i.Ye.stop(),i.ea?s.s(0):(i.Ub=i.h,i.Ze=i.Uc(),o=r.saveLivePosition||!1,A(s,i.Lg(!0,o),3));i.ea=s.h,ie(s)})}),this.Sb.D(this.A,"ad-content-resume-requested",function(r){if(r=r.offset||0,i.ea){var o=i.ea;o.B&&r&&(o.B+=r)}i.Ye.da(.1)}),this.Sb.D(this.A,"ad-content-attach-requested",function(){return U(function(r){return i.h||!i.Ub?r.s(0):A(r,i.Lb(i.Ub,!0),0)})})),this.Qe.D(w,"online",function(){pp(i),i.eg()}),this.xe=new Be(function(){for(var r=Date.now()/1e3,o=!1,s=!0,u=v(i.i.variants),a=u.next();!a.done;a=u.next())a=a.value,0<a.disabledUntilTime&&a.disabledUntilTime<=r&&(a.disabledUntilTime=0,o=!0),0<a.disabledUntilTime&&(s=!1);s&&i.xe.stop(),o&&nu(i,!1,void 0,!1,!1)}),this.ya=null,e&&(Ye("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Lb(e,!0)),this.u=null}At(q,ut);function Oc(e){e.O!=null&&(cv(e.O),e.O.release(),e.O=null)}function SM(e,t,n){n||t.lcevc.enabled?(Oc(e),e.O==null&&(e.O=new Nu(e.h,e.yg,t.lcevc,n),e.I&&(e.I.I=e.O))):Oc(e)}function gt(e,t){return new re(e,t)}h=q.prototype,h.destroy=function(){var e=this,t;return U(function(n){switch(n.g){case 1:return e.m==Bi?n.return():(Oc(e),t=e.detach(),e.m=Bi,A(n,t,2));case 2:return A(n,e.pf(),3);case 3:if(e.Qe&&(e.Qe.release(),e.Qe=null),e.zd&&(e.zd.release(),e.zd=null),e.l&&(e.l.release(),e.l=null),e.Na&&(e.Na.release(),e.Na=null),e.Sb&&(e.Sb.release(),e.Sb=null),e.Fa=null,e.g=null,e.B=null,e.ue=null,e.L=null,e.fa=null,!e.F){n.s(4);break}return A(n,e.F.destroy(),5);case 5:e.F=null;case 4:e.o&&(e.o.release(),e.o=null),ut.prototype.release.call(e),ie(n)}})};function b0(e,t){m1.set(e,t)}function tu(e,t){e.dispatchEvent(gt("onstatechange",new Map().set("state",t)))}h.Lb=function(e,t){t=t===void 0?!0:t;var n=this,i,r,o;return U(function(s){switch(s.g){case 1:if(n.m==Bi)throw new _(2,7,7e3);if(i=n.h&&n.h==e,!n.h||n.h==e){s.s(2);break}return A(s,n.detach(),2);case 2:return A(s,up(n,"attach"),4);case 4:if(s.h)return s.return();if(ge(s,5,6),i||(tu(n,"attach"),r=function(){var u=gp(n,!1);u&&iu(n,u)},n.zd.D(e,"error",r),n.h=e,n.L&&n.L.setMediaElement(e)),!t||!er()||n.I){s.s(6);break}return A(s,ap(n),6);case 6:Ct(s),n.$.release(),lt(s,0);break;case 5:return o=Se(s),A(s,n.detach(),10);case 10:throw o}})},h.Vh=function(e){this.yg=e},h.detach=function(e){e=e===void 0?!1:e;var t=this;return U(function(n){if(n.g==1){if(t.m==Bi)throw new _(2,7,7e3);return A(n,t.kc(!1,e),2)}if(n.g!=3)return A(n,up(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.zd.Qa(),t.h=null),tu(t,"detach"),t.A&&!e&&t.A.release()}finally{t.$.release()}ie(n)})};function up(e,t){var n;return U(function(i){return i.g==1?(n=++e.Te,A(i,sp(e.$,t),2)):n!=e.Te?(e.$.release(),i.return(!0)):i.return(!1)})}h.kc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,o,s,u,a,l,f,d,g;return U(function(m){switch(m.g){case 1:return n.m!=Bi&&(n.m=Fc),A(m,up(n,"unload"),2);case 2:return m.h?m.return():(En(m,3),n.sa=!1,tu(n,"unload"),Oc(n),i=n.Cd.map(function(y){return y()}),n.Cd=[],A(m,Promise.all(i),5));case 5:if(n.dispatchEvent(gt("unloading")),n.yd&&(n.yd.release(),n.yd=null),n.Aa&&(n.Aa.release(),n.Aa=null),n.Ga&&(n.Ga.release(),n.Ga=null),n.h&&(n.l.Qa(),n.Na.Qa()),n.xe.stop(),n.La&&(n.La.release(),n.La=null),n.pa&&(n.pa.stop(),n.pa=null),!n.H){m.s(6);break}return A(m,n.H.stop(),7);case 7:n.H=null,n.Qb=null;case 6:if(!n.o){m.s(8);break}return A(m,n.o.stop(),8);case 8:if(!n.j){m.s(10);break}return A(m,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),w.shakaMediaKeysPolyfill!=="webkit"||!n.C){m.s(12);break}return A(m,n.C.destroy(),13);case 13:n.C=null;case 12:if(!n.I){m.s(14);break}return A(m,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ea&&!t&&(n.ea.destroy(),n.ea=null),t||n.Ye.stop(),n.L&&cM(n.L),n.fa&&(n.fa.g=null),!n.u){m.s(16);break}return A(m,n.u.destroy(),17);case 17:n.u=null;case 16:if(n.h&&(ao(n.h),n.h.src&&(n.h.removeAttribute("src"),n.h.load())),!n.C){m.s(18);break}return A(m,n.C.destroy(),19);case 19:n.C=null;case 18:if(n.ya&&n.T!=n.ya.Qc()&&(n.ya.u||n.ya.destroy(),n.ya=null),n.T=null,n.Pb=null,n.M=null,n.i){for(r=v(n.i.variants),o=r.next();!o.done;o=r.next())for(s=o.value,u=v([s.audio,s.video]),a=u.next();!a.done;a=u.next())(l=a.value)&&l.segmentIndex&&l.segmentIndex.release();for(f=v(n.i.textStreams),d=f.next();!d.done;d=f.next())g=d.value,g.segmentIndex&&g.segmentIndex.release()}n.g&&n.g.streaming.clearDecodingCache&&(Kl.clear(),ys.clear()),n.i=null,n.B=new Mc,n.Se=null,n.Ma=null,n.P=null,n.Ue=-1,n.Oe=[],n.Ve=-1,n.F&&n.F.Hg(),dp(n);case 3:Ct(m),n.$.release(),lt(m,4);break;case 4:if(e&&er()&&!n.I&&n.h)return A(m,ap(n),0);m.s(0)}})},h.Kj=function(e){this.Z=e},h.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,o,s,u,a,l,f,d,g,m,y,x,S;return U(function(E){switch(E.g){case 1:if(i.m==Bi)throw new _(2,7,7e3);if(r=null,o="",e instanceof Si){if(e.u)throw new _(2,7,7006);r=e,o=r.Qc()||""}else o=e||"";return A(E,sp(i.$,"load"),2);case 2:if(i.$.release(),!i.h)throw new _(2,7,7002);if(!i.T){E.s(3);break}return i.T=o,A(E,i.kc(!1),3);case 3:if(s=++i.Te,u=function(){return U(function(M){if(M.g==1)return i.Te==s?M.s(0):r?A(M,r.destroy(),3):M.s(3);throw new _(2,7,7e3)})},a=function(M,L){return U(function(P){switch(P.g){case 1:return En(P,2),A(P,sp(i.$,L),4);case 4:return A(P,u(),5);case 5:return A(P,M(),6);case 6:return A(P,u(),7);case 7:r&&i.g&&(r.g=i.g);case 2:Ct(P),i.$.release(),lt(P,0)}})},ge(E,5,6),t==null&&r&&(t=r.getStartTime()),i.Z=t,i.sa=!1,i.dispatchEvent(gt("loading")),r){n=r.Z,E.s(8);break}if(n){E.s(8);break}return A(E,a(function(){return U(function(M){if(M.g==1)return A(M,H0(i,o),2);n=M.h,ie(M)})},"guessMimeType_"),8);case 8:if(l=!!r,r){S0(r,i),i.B=r.getStats(),E.s(11);break}return A(E,B0(i,o,t,n,!0),12);case 12:(r=E.h)?(r.A=!1,S0(r,i),i.B=r.getStats(),r.start(),r.m.catch(function(){})):i.B=new Mc;case 11:return f=!r,d=Date.now()/1e3,i.B=r?r.getStats():new Mc,i.T=o,i.Pb=n||null,i.Aa=new aa(function(){return i.Ra()}),f?A(E,a(function(){return U(function(M){return A(M,IM(i,n),0)})},"initializeSrcEqualsDrmInner_"),23):(i.Ga=new aa(function(){return i.Ra()}),A(E,a(function(){return U(function(M){if(M.g==1)return A(M,Promise.race([r.oa,r.m]),2);i.Qb=r.G;var L=r;L.pa=!0,i.H=L.l,i.i=r.Hf(),ie(M)})},"waitForFinish"),15));case 15:if(i.I){E.s(16);break}return A(E,a(function(){return U(function(M){return A(M,ap(i),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return i.i&&i.i.textStreams.length&&(i.u.enableTextDisplayer?i.u.enableTextDisplayer():Ye("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),A(E,a(function(){return U(function(M){return A(M,r.m,0)})},"waitForFinish"),18);case 18:if(i.g=r.getConfiguration(),i.te=r.F,i.H&&i.H.setMediaElement&&i.h&&i.H.setMediaElement(i.h),i.yd=$I(r),i.xd=r.Ga,(g=r.o)&&(i.W=g),l&&i.h&&i.h.nodeName==="AUDIO"&&(xM(i),i.configure("manifest.disableVideo",!0)),r.i){E.s(19);break}return A(E,a(function(){return U(function(M){return A(M,x0(r,i.h),0)})},"drmEngine_.init"),19);case 19:return i.C=QI(r),A(E,a(function(){return U(function(M){return A(M,i.C.Lb(i.h),0)})},"drmEngine_.attach"),21);case 21:return!(m=r.C)||i.Fa&&i.Fa==m||(i.o=YI(r),i.Fa=r.C,typeof i.o.setMediaElement!="function"&&(Ye("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.o.setMediaElement=function(){}),typeof i.o.setCmsdManager!="function"&&(Ye("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.o.setCmsdManager=function(){}),typeof i.o.trySuggestStreams!="function"&&(Ye("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.o.trySuggestStreams=function(){})),y=JI(r),x=r.K,A(E,a(function(){return U(function(M){return A(M,AM(i,d,x,y),0)})},"loadInner_"),22);case 22:qI(r),i.Pb&&sn()&&Yd(i.Pb)&&H2(i.I,i.T,i.Pb),E.s(14);break;case 23:return A(E,a(function(){return U(function(M){return A(M,MM(i,d,n),0)})},"srcEqualsInner_"),14);case 14:i.dispatchEvent(gt("loaded"));case 6:if(Ct(E),!r){E.s(25);break}return A(E,r.destroy(),25);case 25:i.ya=null,lt(E,0);break;case 5:if(S=Se(E),!S||S.code==7e3){E.s(27);break}return A(E,i.kc(!1),27);case 27:throw S}})};function xM(e){for(var t=v(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}h.Gj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i;return U(function(r){return r.g==1?A(r,F0(n),2):r.g!=3?(i=r.h,A(r,n.kc(e,t),3)):r.return(i)})},h.Lg=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,i;return U(function(r){return r.g==1?A(r,F0(n,t),2):r.g!=3?(i=r.h,A(r,n.detach(e),3)):r.return(i)})};function F0(e,t){t=t===void 0?!1:t;var n,i;return U(function(r){if(r.g==1)return n=null,e.i&&e.H&&e.Qb&&e.T?(i=e.h.currentTime,e.U()&&!t&&(i=null),A(r,V0(e,e.T,i,e.Pb,!0,!1,!1),3)):r.s(2);if(r.g!=2){n=r.h,e.Ee.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var o=n,s=e.H,u=e.Qb;o.h=e.i,o.l=s,o.G=u,o=n,s=e.Fa,o.j=e.o,o.C=s,n.o=e.W,n.start(),e.i=null,e.H=null,e.Qb=null,e.o=null,e.Fa=null}return r.return(n)})}h.preload=function(e,t,n){t=t===void 0?null:t;var i=this,r;return U(function(o){return o.g==1?A(o,B0(i,e,t,n),2):((r=o.h)?r.start():iu(i,new _(2,7,7005)),o.return(r))})},h.pf=function(){var e=this,t,n,i,r;return U(function(o){for(t=[],n=v(e.Ee),i=n.next();!i.done;i=n.next())r=i.value,r.u||t.push(r.destroy());return e.Ee=[],A(o,Promise.all(t),0)})};function B0(e,t,n,i,r){r=r===void 0?!1:r;var o,s,u;return U(function(a){return a.g==1?i?a.s(2):A(a,H0(e,t),3):(a.g!=2&&(i=a.h),EM(e,i)?a.return(null):(o=!1,s=!0,r&&(e.o&&e.Fa==e.g.abrFactory&&(s=!1),e.h&&e.h.nodeName==="AUDIO"&&(o=!0)),u=V0(e,t,n,i||null,!r,o,s),u=r?u.then(function(l){return l.A=!1,l}):u.then(function(l){return e.Ee.push(l),l}),a.return(u)))})}function V0(e,t,n,i,r,o,s){r=r===void 0?!0:r,o=o===void 0?!1:o,s=s===void 0?!0:s;var u,a,l,f,d,g,m,y,x,S,E,M,L,P;return U(function(b){return b.g==1?(u=null,a=Xi(e.g),o&&(a.manifest.disableVideo=!0),l=function(){return u.T&&u.u?null:u},f=function(){return l()?l().getConfiguration():e.g},e.ka.width!=1/0||e.ka.height!=1/0||e.g.ignoreHardwareResolution?b.s(2):A(b,ov(),3)):(b.g!=2&&(d=b.h,e.ka.width=d.width,e.ka.height=d.height),g=new dh(a,e.ka,null),m={networkingEngine:e.F,filter:function(D){var k,N;return U(function(j){if(j.g==1)return A(j,xy(g,D),2);if(j.g!=4)return k=j.h,k?(N=gt("trackschanged"),A(j,Promise.resolve(),4)):j.s(0);u.dispatchEvent(N),ie(j)})},makeTextStreamsForClosedCaptions:function(D){return bM(e,D)},onTimelineRegionAdded:function(D){_h(u.H,D)},onEvent:function(D){return u.dispatchEvent(D)},onError:function(D){return u.onError(D)},isLowLatencyMode:function(){return f().streaming.lowLatencyMode},updateDuration:function(){e.j&&u.T&&e.j.updateDuration()},newDrmInfo:function(D){var k=u.i,N=k?k.h:null;N&&k.A&&hh(g,N.keySystem,D)},onManifestUpdated:function(){var D=new Map().set("isLive",e.U());u.dispatchEvent(gt("manifestupdated",D)),ga(u,!1,function(){e.A&&e.A.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(D,k,N,j){var V=D;D=="com.apple.hls.interstitial"&&(V="com.apple.quicktime.HLS",D={startTime:k,endTime:N,values:j},e.A)&&e.A.onHLSInterstitialMetadata(e,e.h,D),j=v(j),D=j.next();for(var F={};!D.done;F={Zf:void 0},D=j.next())F.Zf=D.value,F.Zf.name!="ID"&&ga(u,!1,function(B){return function(){lp(e,k,N,V,B.Zf)}}(F))},disableStream:function(D){return e.disableStream(D,e.g.streaming.maxDisabledTime)},addFont:function(D,k){return e.addFont(D,k)}},y=new aa(function(){return e.Ra()}),y.addEventListener("regionadd",function(D){var k=D.region;xa(e,"timelineregionadded",k,u),ga(u,!1,function(){e.A&&(e.A.onDashTimedMetadata(k),e.A.onDASHInterstitialMetadata(e,e.h,k))})}),x=null,a.streaming.observeQualityChanges&&(x=new dc(function(){return e.Fb()}),x.addEventListener("qualitychange",function(D){d1(e,D.quality,D.position)}),x.addEventListener("audiotrackchange",function(D){d1(e,D.quality,D.position,!0)})),S=!0,E={Xb:e.F,onError:function(D){return u.onError(D)},pe:function(D){ga(u,!0,function(){e:{var k=D,N=gt("keystatuschanged");e.dispatchEvent(N);var j=Object.keys(k);j.length==1&&j[0]==""&&(j=["00"],k={"00":k[""]}),N=j.length==1&&j[0]=="00";var V=!1;if(j.length){j=e.keySystem();for(var F=Ko(e.g.drm.clearKeys),B=v(e.i.variants),H=B.next();!H.done;H=B.next()){H=H.value;var G=[];H.audio&&G.push(H.audio),H.video&&G.push(H.video),G=v(G);for(var z=G.next();!z.done;z=G.next()){var W=z.value;if(z=H.allowedByKeySystem,W.keyIds.size)if(W.drmInfos.length&&!F.size){W=v(W.drmInfos);for(var $=W.next();!$.done;$=W.next())if($=$.value,$.keyIds.size&&$.keySystem==j){H.allowedByKeySystem=!0,$=v($.keyIds);for(var te=$.next();!te.done;te=$.next())te=te.value,((te=k[N?"00":te])||e.C.F)&&(H.allowedByKeySystem=H.allowedByKeySystem&&!!te&&!ph.includes(te))}}else for(H.allowedByKeySystem=!0,W=v(W.keyIds),$=W.next();!$.done;$=W.next())$=$.value,(($=k[N?"00":$])||e.C.F)&&(H.allowedByKeySystem=H.allowedByKeySystem&&!!$&&!ph.includes($));z!=H.allowedByKeySystem&&(V=!0)}}}if(V&&(bn(e),!es(e)))break e;(k=e.j.l)&&!k.allowedByKeySystem&&nu(e)}})},onExpirationUpdated:function(D,k){var N=gt("expirationupdated");u.dispatchEvent(N),(N=u.l)&&N.onExpirationUpdated&&N.onExpirationUpdated(D,k)},onEvent:function(D){u.dispatchEvent(D),D.type=="drmsessionupdate"&&S&&(S=!1,D=Date.now()/1e3-u.ya,(e.B||u.getStats()).j=D,e.O&&cv(e.O))}},M=X0(e,l),Zv(e.F,M),L=function(){return e.Lc(E)},P={config:a,$i:m,kj:y,jj:x,Lc:L,Zi:g,networkingEngine:M,Uh:r,Th:s},u=new Si(t,i,n,P),b.return(u))})}function H0(e,t){var n,i;return U(function(r){return r.g==1?(n=e.g.manifest.retryParameters,A(r,Zo(t,e.F,n),2)):(i=r.h,i=="application/x-mpegurl"&&sn()&&(i="application/vnd.apple.mpegurl"),r.return(i))})}function EM(e,t){if(!er())return!0;if(t){if((e.h||rv()).canPlayType(t)=="")return!1;if(!er()||!Fs.has(t))return!0;if(Yd(t))return sn()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function G0(e){var t=e.g.textDisplayFactory;t!==e.Se&&(e.u=t(),e.u.configure?e.u.configure(e.g.textDisplayer):Ye("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.Se=t,e.u.setTextVisibility(e.oa))}function ap(e){var t,n,i;return U(function(r){if(r.g==1)return tu(e,"media-source"),e.h.removeAttribute("src"),ao(e.h),G0(e),t=NM(e.h,e.u,{si:function(){return e.keySystem()},onMetadata:function(o,s,u){o=v(o);for(var a=o.next();!a.done;a=o.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var l=a.cueTime+s,f=u;f&&l>f&&(f=l);for(var d=v(a.frames),g=d.next();!g.done;g=d.next())lp(e,l,f,"org.id3",g.value);e.A&&e.A.onHlsTimedMetadata(a,l)}},ej:function(o){e.Ga&&_h(e.Ga,{schemeIdUri:o.schemeIdUri,startTime:o.startTime,endTime:o.endTime,id:String(o.id),emsg:o})},onEvent:function(o){return e.dispatchEvent(o)},gj:function(){e.H&&e.H.update&&e.H.update()}},e.O),t.configure(e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Ea=i,A(r,t.G,2);e.I=t,ie(r)})}function K0(e,t,n){function i(){return hp(e)}e.l.D(t,"playing",i),e.l.D(t,"pause",i),e.l.D(t,"ended",i),e.l.D(t,"ratechange",function(){var r=e.h.playbackRate;r!=0&&(e.K&&(e.K.set(r),e.m==Tn&&e.o.playbackRateChanged(r),r1(e,r)),r=gt("ratechange"),e.dispatchEvent(r))}),t.remote&&(e.l.D(t.remote,"connect",function(){return bn(e)}),e.l.D(t.remote,"connecting",function(){return bn(e)}),e.l.D(t.remote,"disconnect",function(){return U(function(r){if(r.g==1)return e.j&&t.remote.state=="disconnected"?A(r,Tc(e.j),2):r.s(2);bn(e),ie(r)})})),t.audioTracks&&(e.l.D(t.audioTracks,"addtrack",function(){return bn(e)}),e.l.D(t.audioTracks,"removetrack",function(){return bn(e)}),e.l.D(t.audioTracks,"change",function(){return bn(e)})),t.textTracks&&(e.l.D(t.textTracks,"addtrack",function(r){if(r.track)switch(r=r.track,r.kind){case"metadata":DM(e,r);break;case"chapters":RM(e,r);break;default:bn(e)}}),e.l.D(t.textTracks,"removetrack",function(){return bn(e)}),e.l.D(t.textTracks,"change",function(){return bn(e)}),e.g.streaming.crossBoundaryStrategy!=="keep"&&(e.l.D(t,"waiting",function(){e.j&&Xh(e.j)}),e.l.D(t,"timeupdate",function(){e.j&&Xh(e.j)}))),t.preload!="none"&&e.l.ma(t,"loadedmetadata",function(){e.B.C=Date.now()/1e3-n})}function AM(e,t,n,i){var r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H;return U(function(G){switch(G.g){case 1:for(tu(e,"load"),r=e.h,e.K=new ua({$d:function(){return r.playbackRate},sc:function(){return r.defaultPlaybackRate},mg:function(z){r.playbackRate=z},gh:function(z){r.currentTime+=z}}),K0(e,r,t),o=!1,s=v(e.i.variants),u=s.next();!u.done;u=s.next())a=u.value,(l=a.video&&a.video.dependencyStream)&&(o=fv(l));SM(e,e.g,o),e.Tb=e.g.preferredTextLanguage,e.Hd=e.g.preferredTextRole,e.Fd=e.g.preferForcedSubs,mp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(z,W,$){e.i&&e.j&&z!=e.j.l&&wa(e,z,!0,W===void 0?!1:W,$===void 0?0:$)}),e.o.setMediaElement(r),e.o.setCmsdManager(e.fa),e.j=OM(e),e.j.configure(e.g.streaming),e.m=Tn,e.dispatchEvent(gt("streaming")),f=n;case 2:for((g=e.j.l)||f||(f=es(e)?e.o.chooseVariant():null),m=[],d=g||f,y=v([d.video,d.audio]),x=y.next();!x.done;x=y.next())(S=x.value)&&!S.segmentIndex&&(m.push(S.createSegmentIndex()),S.dependencyStream&&m.push(S.dependencyStream.createSegmentIndex()));if(!(0<m.length)){G.s(4);break}return A(G,Promise.all(m),4);case 4:if(!d||d.disabledUntilTime!=0){G.s(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(d),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Xe):J("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.L&&(fM(e.L,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),dM(e.L,1e3*t)),mp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),yI(e.j,e.g.playRangeStart,e.g.playRangeEnd),E=function(z){e.G=PM(e,z),e.La=LM(e,z),z0(e,r,!1)},e.g.streaming.startAtSegmentBoundary||(M=e.Z,M==null&&e.i.startTime&&(M=e.i.startTime),E(M)),g){G.s(7);break}if(!e.g.streaming.startAtSegmentBoundary){G.s(8);break}return L=e.i.presentationTimeline,P=e.Z||e.h.currentTime,e.Z==null&&e.i.startTime&&(P=e.i.startTime),b=L.Hb(),D=L.ob(),P<b?P=b:P>D&&(P=D),A(G,FM(f,P),9);case 9:k=G.h,E(k);case 8:wa(e,f,!0,!1,0);case 7:return e.G.ready(),N=e.vc().find(function(z){return z.active}),N||((j=_s(e.i.textStreams,e.Tb,e.Hd,e.Fd)[0]||null)&&Qh(e.B.h,j,!0),f&&(j?(Xv(f.audio,j,e.g)&&(e.oa=!0),e.oa&&e.u.setTextVisibility(!0),c1(e)):e.oa=!1),j&&(e.g.streaming.alwaysStreamText||e.Pf())&&(gc(e.j,j),Sa(e))),A(G,e.j.start(i),10);case 10:e.g.abr.enabled&&(e.o.enable(),f1(e)),bn(e),es(e),e.i.variants.some(function(z){return z.primary}),((V=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(F=function(){return o1(e)},e.l.D(r,"timeupdate",F)),V||(B=function(){return Uc(e)},e.l.D(r,"timeupdate",B),Uc(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(H=function(){var z;return U(function(W){if(W.g==1)return z=e.Ra().end-e.h.currentTime,isNaN(z)||!(z<=e.g.streaming.preloadNextUrlWindow)?W.s(0):(e.l.Ja(r,"timeupdate",H),A(W,e.preload(e.i.nextUrl),4));e.ya=W.h,ie(W)})},e.l.D(r,"timeupdate",H)),e.l.D(r,"ended",function(){e.load(e.ya||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(V),e.sa=!0,ie(G)}})}function IM(e,t){var n,i,r,o,s;return U(function(u){return u.g==1?(n=zt,i=Date.now()/1e3,r=!0,e.C=e.Lc({Xb:e.F,onError:function(a){iu(e,a)},pe:function(){},onExpirationUpdated:function(){var a=gt("expirationupdated");e.dispatchEvent(a)},onEvent:function(a){e.dispatchEvent(a),a.type=="drmsessionupdate"&&r&&(r=!1,e.B.j=Date.now()/1e3-i)}}),e.C.configure(e.g.drm),o={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},s={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Xn(t):"",codecs:t?zn(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.la,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},s.fullMimeTypes.add(Ot(s.mimeType,s.codecs)),t.startsWith("audio/")?(s.type=n.V,o.audio=s):o.video=s,e.C.$=!0,A(u,uy(e.C,[o],[]),2)):A(u,e.C.Lb(e.h),0)})}function MM(e,t,n){var i,r,o,s,u,a,l,f,d,g,m,y;return U(function(x){switch(x.g){case 1:if(tu(e,"src-equals"),i=e.h,e.G=new r0(i),r=!1,e.Cd.push(function(){r=!0}),e.Z!=null&&e.G.af(e.Z),e.La=_M(e,e.Z||0),e.K=new ua({$d:function(){return i.playbackRate},sc:function(){return i.defaultPlaybackRate},mg:function(S){i.playbackRate=S},gh:function(S){i.currentTime+=S}}),z0(e,i,!0),i.textTracks&&(G0(e),o=function(){var S=Ta(e).find(function(E){return E.mode!=="disabled"});S&&(S.mode="showing"),(S=e1(e))&&(S.mode="hidden")},s=function(){var S=Ta(e).find(function(M){return M.mode!=="disabled"});S&&(S.mode="hidden"),S=e1(e);var E=e.u.isTextVisible();S&&E&&(S.mode="showing")},e.l.D(i,"enterpictureinpicture",function(){return o()}),e.l.D(i,"leavepictureinpicture",function(){return s()}),i.remote?(e.l.D(i.remote,"connect",function(){return s()}),e.l.D(i.remote,"connecting",function(){return s()}),e.l.D(i.remote,"disconnect",function(){return s()})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.l.D(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return s()}),u=i,u.webkitSupportsFullscreen&&e.l.D(u,"webkitpresentationmodechanged",function(){u.webkitPresentationMode!="inline"?o():s()})),K0(e,i,t),a=hM(e.L,e.T,n),!a.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(a+="#t=",0<e.g.playRangeStart&&(a+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(a+=","+e.g.playRangeEnd)),!e.I){x.s(2);break}return A(x,e.I.destroy(),3);case 3:e.I=null;case 2:return ao(i),i.src=a,(Ki()||yr())&&i.load(),i.preload!="none"&&!i.autoplay&&Yd(n)&&sn()&&i.load(),e.m=ui,e.dispatchEvent(gt("streaming")),l=new st,qs(i,HTMLMediaElement.HAVE_METADATA,e.l,function(){e.G.ready(),l.resolve()}),f=function(){return new Promise(function(S){var E=new Be(S);e.l.D(i.textTracks,"change",function(){return E.da(.5)}),E.da(.5)})},qs(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,function(){var S,E,M,L,P;return U(function(b){if(b.g==1)return A(b,f(),2);if(r)return b.return();for(CM(e),S=Ta(e),S.some(function(D){return D.mode==="showing"})&&(e.oa=!0,e.u.setTextVisibility(!0)),S.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():Ye("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),E=!1,M=v(S),L=M.next();!L.done;L=M.next())P=L.value,P.mode!=="disabled"&&(E?(P.mode="disabled",J("Found more than one enabled text track, disabling it",P)):(Z0(e,P),E=!0));kM(e),ie(b)})}),i.error?l.reject(gp(e)):i.preload=="none"&&(J('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),l.resolve()),e.l.ma(i,"error",function(){l.reject(gp(e))}),A(x,Wu(e.g.streaming.loadTimeout,l),4);case 4:((d=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(g=function(){return o1(e)},e.l.D(i,"timeupdate",g)),d||(m=function(){return Uc(e)},e.l.D(i,"timeupdate",m),Uc(e)),e.A&&(e.A.onManifestUpdated(d),d&&(y=e.Ra().end,e.l.D(i,"progress",function(){var S=e.Ra().end;y!=S&&(e.A.onManifestUpdated(e.U()),y=S)}))),e.sa=!0,ie(x)}})}function CM(e){var t=e.g.preferredAudioLanguage;t!=""&&e.sh(t,e.g.preferredVariantRole)}function kM(e){var t=e.g.preferredTextLanguage;t!=""&&e.hg(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function DM(e,t){if(t.kind=="metadata"){t.mode="hidden",e.l.D(t,"cuechange",function(){if(t.activeCues)for(var i=v(t.activeCues),r=i.next();!r.done;r=i.next())r=r.value,lp(e,r.startTime,r.endTime,r.type,r.value),e.A&&e.A.onCueMetadataChange(r.value);if(t.cues){i=[],r=v(t.cues);for(var o=r.next(),s={};!o.done;s={bc:void 0},o=r.next())s.bc=o.value,s.bc.type=="com.apple.quicktime.HLS"&&s.bc.startTime!=null&&(o=i.find(function(u){return function(a){return a.startTime==u.bc.startTime&&a.endTime==u.bc.endTime}}(s)),o||(o={startTime:s.bc.startTime,endTime:s.bc.endTime,values:[]},i.push(o)),o.values.push(s.bc.value));for(i=v(i),r=i.next();!r.done;r=i.next())r=r.value,r.values.some(function(u){return u.key=="X-ASSET-URI"||u.key=="X-ASSET-LIST"})&&e.A&&(r.values.push({key:"CUE",description:"",data:r.startTime!=0||e.U()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.A.onHLSInterstitialMetadata(e,e.h,r))}});var n=new Be(function(){var i=UM(e);i=v(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).sb().da(.5);e.Cd.push(function(){n.stop()})}}function W0(e,t){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(gt("metadata",t))}function lp(e,t,n,i,r){e.Aa&&(t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r},t.id=JSON.stringify(t),_h(e.Aa,t))}function RM(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new Be(function(){t.mode="hidden"}).sb().da(.5);e.Cd.push(function(){n.stop()})}}h.oj=function(){for(var e=this.$;e.g;)e.release()},h.Lc=function(e){return new Ql(e)};function X0(e,t){function n(r){t()?t().dispatchEvent(r):e.dispatchEvent(r)}function i(r){t()?ga(t(),!0,r):r()}return t||(t=function(){return null}),new pt(function(r,o,s,u){var a=t()?t().j:e.o;a&&a.segmentDownloaded(r,o,s,u)},function(r,o,s){o=new Map().set("headers",r).set("request",o).set("requestType",s),n(gt("downloadheadersreceived",o)),i(function(){if(e.fa){var u=e.fa;if(u.h.enabled){var a=r["cmsd-static"];if(a)try{var l=new Map,f=a.split(",");for(a=0;a<f.length;a++){var d=f[a].split("=");l.set(d[0],L0(d[1]))}}catch{}if(l=r["cmsd-dynamic"]){try{var g=new Map,m=l.split(";");for(l=1;l<m.length;l++){var y=m[l].split("=");g.set(y[0],L0(y[1]))}var x=g}catch{x=null}x&&(u.g=x)}}}})},function(r,o){r=new Map().set("request",r).set("response",o),n(gt("downloadcompleted",r))},function(r,o,s,u){r=new Map().set("request",r).set("error",o).set("httpResponseCode",s).set("aborted",u),n(gt("downloadfailed",r))},function(r,o,s){i(function(){var u=e.L,a=s;if(a=a===void 0?{}:a,u.g.enabled)if(o.method==="HEAD")eu(u,o);else switch(r){case 0:try{if(u.g.enabled){if(a.type){e:{switch(a.type){case 4:var l=u.l?_c:Lc;break e;case 3:case 2:l=u.l?jc:Nc;break e;case 5:l="s";break e}l=void 0}u.i=l}eu(u,o,{ot:R0,su:!u.u})}}catch(G){ue("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",G)}break;case Fi:try{if(u.g.enabled){var f=a.segment;l=0,f&&(l=f.endTime-f.startTime);var d={d:1e3*l,st:u.h.U()?"l":"v"};d.ot=mM(a);var g=d.ot===Dc||d.ot===kc||d.ot===Rc||d.ot===Pc,m=a.stream;if(m){var y=u.h.gb();if(g&&(d.bl=vM(u,m.type),d.ot!==Pc)){var x=D0(u,m.type);d.dl=y?x/Math.abs(y):x}if(m.bandwidth&&(d.br=m.bandwidth/1e3),m.segmentIndex&&f){var S=m.segmentIndex.Gb(f.endTime,!0,0>y);if(S){var E=S.next().value;if(E&&E!=f){if(!As(f.N(),E.N())){var M=E.N()[0],L=o.uris[0],P=new URL(M),b=new URL(L);if(P.origin!==b.origin)var D=M;else{for(var k=P.pathname.split("/").slice(1),N=b.pathname.split("/").slice(1,-1);k[0]===N[0];)k.shift(),N.shift();for(;N.length;)N.shift(),k.unshift("..");D=k.join("/")}d.nor=D}if((E.Sa||E.wa)&&(f.Sa!=E.Sa||f.wa!=E.wa)){var j=E.Sa+"-";E.wa&&(j+=E.wa),d.nrr=j}}}var V=u.h.gb()||1,F=D0(u,m.type)||500,B=m.bandwidth,H=B?B*(f.endTime-f.startTime)/1e3/(F/V/1e3)*u.g.rtpSafetyFactor:NaN;isNaN(H)||(d.rtp=H)}}g&&d.ot!==Pc&&(d.tb=yM(u,d.ot)/1e3),eu(u,o,d)}}catch(G){ue("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",G)}break;case 2:case 5:case 6:eu(u,o,{ot:"k"});break;case 4:eu(u,o,{ot:"o"})}})},function(r,o,s,u){(r=t()?t().l:e.H)&&r.banLocation&&r.banLocation(u)},function(r,o){if(o.data){o=o.data.byteLength;var s=t()?t().getStats():e.B;s&&(s.mc=isNaN(s.mc)?o:s.mc+o,r===0&&(s.bh=o))}})}function PM(e,t){return new o0(e.h,e.i,e.g.streaming,t,function(){e.La&&l0(e.La,!0),e.j&&e.j.Fc(),e.M&&or(e)},function(n){return e.dispatchEvent(n)})}function LM(e,t){var n=e.U()||0<t;t=new Jo(e.yd,n),t.addEventListener("enter",function(o){xa(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){xa(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var s=o.region;o.seeking||(xa(e,"timelineregionenter",s),xa(e,"timelineregionexit",s))});var i=new Jo(e.Aa,n);i.addEventListener("enter",function(o){W0(e,o.region)}),n=new Jo(e.Ga,n),n.addEventListener("enter",function(o){o=new Map().set("detail",o.region.emsg),e.dispatchEvent(gt("emsg",o))});var r=new Lh(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.xd&&r.g.add(e.xd),r}function _M(e,t){t=new Jo(e.Aa,0<t),t.addEventListener("enter",function(i){W0(e,i.region)});var n=new Lh(e.h);return n.g.add(t),n}function z0(e,t,n){e.M=new v2,e.M.g=bs,q0(e),dp(e),e.pa=new Be(function(){or(e)}),e.g.streaming.rebufferingGoal&&e.pa.ua(.25),e.l.D(t,"waiting",function(){return or(e)}),e.l.D(t,"canplaythrough",function(){return or(e)}),e.l.D(t,"playing",function(){return or(e)}),e.l.D(t,"seeked",function(){return or(e)}),n&&(e.l.D(t,"stalled",function(){return or(e)}),e.l.D(t,"progress",function(){return or(e)}),e.l.D(t,"timeupdate",function(){return or(e)}))}function q0(e){var t=e.g.streaming.rebufferingGoal;e.M.i.set(Zu,Math.min(.5,t/2)).set(bs,t)}function or(e){switch(e.m){case ui:if(e.Uc())var t=!0;else{var n=mh(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case Tn:e:if(e.Uc()||Yo(e.I))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.cc();var i=mh(e.h.buffered);if(i!=null&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Uy(e.h.buffered,e.h.currentTime),n=e.M;var r=t,o=n.i.get(n.g);t=n.g,i=r||i>=o&&0<i?Zu:bs,n.g=i,(t=t!=i)&&i===Zu&&(n.h=Date.now()),t&&dp(e)}function NM(e,t,n,i){return new Ky(e,t,n,i)}function jM(e){return new np({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},Fb:function(){return e.Fb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},gb:function(){return e.gb()},xb:function(){return e.xb()},Rb:function(){return e.Rb()},U:function(){return e.U()},Zd:function(){return e.Zd()}},e.g.cmcd)}function OM(e){return new g0(e.i,{Rc:function(){return e.G?e.G.Od():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},gb:function(){return e.gb()},video:e.h,aa:e.I,Xb:e.F,onError:function(t){return iu(e,t)},onEvent:function(t){return e.dispatchEvent(t)},qe:function(t,n,i){var r=t.startTime;if(t=t.endTime,n=n.type,n!=be){if(e.G){e.G.ih();var o=Ih(e.I,n);!e.U()&&e.h.paused&&!e.h.seeking&&o!=null&&0<o&&e.G.Od()<o&&e.G.af(o)}or(e)}i=new Map().set("start",r).set("end",t).set("contentType",n).set("isMuxed",i),e.dispatchEvent(gt("segmentappended",i))},fj:function(t,n){(n=n.Wc)&&e.xd&&lI(e.xd,n,t)},Fg:function(t,n){var i=e.C;if(i.g.parseInbandPsshEnabled&&!i.F&&["audio","video"].includes(t)){t=new ah(De(n)),n=0;for(var r=v(t.data),o=r.next();!o.done;o=r.next())n+=o.value.length;if(n==0)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,t=v(t.data),o=t.next();!o.done;o=t.next())o=o.value,n.set(o,r),r+=o.length;$u(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)}})}h.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Sc(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ye("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ye("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Ye("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&sn(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Ye("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ye("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ye("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ye("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ye("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ye("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ye("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ye("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ye("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ye("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var r=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return r},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Ye("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Ye("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Ye("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Ye("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Ye("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Ye("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Ye("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Ye("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Ye("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Ye("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){n=!1;for(var o in e.drm.advanced){var s=e.drm.advanced[o];i=s.videoRobustness,s=s.audioRobustness,"videoRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].videoRobustness)&&(e.drm.advanced[o].videoRobustness=[i],n=!0),"audioRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].audioRobustness)&&(e.drm.advanced[o].audioRobustness=[s],n=!0)}n&&Ye("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"crossBoundaryStrategy"in e.streaming&&e.streaming.crossBoundaryStrategy!="keep"&&(e.streaming.inaccurateManifestTolerance=0),o=lo(this.g,e,Nr(this)),Y0(this),o},h.ci=function(e){this.Xe=e};function Y0(e){if(e.te=new dh(e.g,e.ka,e.C),e.H){var t=Xi(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.C&&e.C.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.m!=Bi&&Ay(e.te,e.i)&&bn(e)}catch(r){iu(e,r)}e.o&&es(e),t=e.j.l,!t||t.allowedByApplication&&t.allowedByKeySystem||nu(e)}if(e.F&&(e.F.kg(e.g.streaming.forceHTTP),e.F.lg(e.g.streaming.forceHTTPS),e.F.o=e.g.streaming.minBytesForProgressEvents),e.I&&(e.I.configure(e.g.mediaSource),e.I.Ea=e.g.manifest.segmentRelativeVttTiming),e.u)if(t=e.g.textDisplayFactory,e.Se!=t){var n=e.u;if(e.u=t(),e.u.configure?e.u.configure(e.g.textDisplayer):Ye("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||Ye("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),e.u.setTextVisibility(n.isTextVisible()),n.destroy(),e.I){n=e.I;var i=e.u;n.ea=i,n.h&&(n.h.j=i)}e.Se=t,e.j&&(t=e.j,(n=t.i.get(be))&&Ys(t,n.stream,!0,0,!0))}else e.u.configure&&e.u.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),f1(e)),e.M&&q0(e),e.pa&&(e.g.streaming.rebufferingGoal?e.pa.ua(.25):e.pa.stop()),e.i&&mp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.L&&e.L.configure(e.g.cmcd),e.fa&&e.fa.configure(e.g.cmsd)}h.getConfiguration=function(){var e=Nr(this);return lo(e,this.g,Nr(this)),e},h.ki=function(){return this.Xe},h.Vg=function(){var e=Nr(this);return lo(e,this.g,Nr(this)),y0(this.g,Nr(this))},h.Qg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ra().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},h.sj=function(){for(var e in this.g)delete this.g[e];lo(this.g,Nr(this),Nr(this)),Y0(this)},h.ti=function(){return this.m},h.Tg=function(){return this.i?this.i.type:null},h.xi=function(){return this.h},h.xb=function(){return this.F},h.Qc=function(){return this.T},h.Pg=function(){return this.A?this.A:null},h.U=function(){return this.i&&!this.Pa()?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},h.yc=function(){return this.i?this.i.presentationTimeline.yc():!1},h.Qi=function(){if(this.i&&!this.Pa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},h.Ra=function(){if(this.i&&!this.Pa()){if(!this.sa&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Hb(),end:e.ob()}}if(this.h&&this.h.src&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},h.Ni=function(){this.U()&&(this.h.currentTime=this.Ra().end)},h.Ri=function(){return this.sa},h.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},h.drmInfo=function(){return this.C?this.C.h:null},h.pd=function(){return this.C?this.C.pd():1/0},h.Gf=function(){return this.C?this.C.Gf():[]},h.Yd=function(){return this.C?this.C.Yd():{}},h.Of=function(){return this.M?this.M.g==bs:!1},h.gb=function(){return this.h?this.K?this.K.i:1:0},h.Md=function(e,t){t=t===void 0?!0:t,e==0?J("A trick play rate of 0 is unsupported!"):(this.K.set(e),this.m==Tn&&(this.o.playbackRateChanged(e),Fh(this.j,t&&1<Math.abs(e))),r1(this,e))},h.gd=function(){var e=this.K.sc();this.m==ui&&this.K.set(e),this.m==Tn&&(this.K.set(e),this.o.playbackRateChanged(e),Fh(this.j,!1)),this.Na.Qa()},h.Rb=function(){if(this.i&&!this.Pa()){for(var e=this.j?this.j.l:null,t=[],n=0,i=v(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,Yu(r)){var o=Vo(r);o.active=r==e,o.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(s){return nh(s)}):[]},h.vc=function(){if(this.i&&!this.Pa()){for(var e=this.j?this.j.u:null,t=[],n=v(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=qu(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?Ta(this).map(function(o){return Vv(o)}):[]},h.pi=function(){var e=this.Oe;return this.i&&(e=this.i.imageStreams),e.map(function(t){return eh(t)})},h.fi=function(e){var t=this,n,i;return U(function(r){return r.g==1?A(r,Q0(t,e),2):(n=r.h,n?(i=[],n.segmentIndex.Eb(function(o){var s=$0(o.tilesLayout||n.tilesLayout);if(s){s=s.rows*s.oc;for(var u=o.j-o.startTime,a=0;a<s;a++){var l=J0(n,o.startTime+u*a/s);l&&i.push(l)}}}),n.closeSegmentIndex&&n.closeSegmentIndex(),r.return(i)):r.return(null))})};function $0(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}h.Hi=function(e,t){var n=this,i;return U(function(r){return r.g==1?A(r,Q0(n,e),2):(i=r.h)?r.return(J0(i,t)):r.return(null)})};function Q0(e,t){var n,i;return U(function(r){return r.g==1?e.m!=Tn&&e.m!=ui||(n=e.Oe,e.i&&(n=e.i.imageStreams),i=n[0],!i)?r.return(null):(t!=null&&(i=n.find(function(o){return o.id==t})),i?i.segmentIndex?r.s(2):A(r,i.createSegmentIndex(),2):r.return(null)):r.return(i)})}function J0(e,t){var n=e.segmentIndex.find(t);if(n==null)return null;n=e.segmentIndex.get(n);var i=$0(n.tilesLayout||e.tilesLayout);if(!i)return null;var r=e.width||0,o=e.height||0,s=r/i.oc,u=o/i.rows,a=i.oc*i.rows,l=n.j-n.startTime;l=n.B||l/a;var f=n.startTime,d=0,g=0;return 1<a&&(t=Math.floor((t-n.startTime)/l),f=n.startTime+t*l,d=t%i.oc*s,g=Math.floor(t/i.oc)*u),t=!1,(i=n.thumbnailSprite)&&(t=!0,u=i.height,d=i.positionX,g=i.positionY,s=i.width),{segment:n,imageHeight:o,imageWidth:r,height:u,positionX:d,positionY:g,startTime:f,duration:l,uris:n.N(),width:s,sprite:t,mimeType:n.mimeType||e.mimeType,codecs:n.codecs||e.codecs}}h.th=function(e){function t(){var i=n.i.textStreams.find(function(r){return r.id==e.id});i&&i!=n.j.u&&(Qh(n.B.h,i,!1),gc(n.j,i),bc(n),Sa(n),n.Tb=i.language)}var n=this;this.i&&this.G&&(t(),!this.Pa())||function(){if(n.h&&n.h.textTracks){var i=Ta(n),r=i.find(function(o){return o.mode!=="disabled"});(i=i.find(function(o){return th(o)===e.id}))&&(r!==i&&(r&&(r.mode="disabled",n.l.Ja(r,"cuechange"),n.u.remove(0,1/0)),i&&Z0(n,i)),bc(n),Sa(n))}}()};function Z0(e,t){e.l.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]);r=v(r);for(var o=r.next();!o.done;o=r.next()){if(o=o.value,o.endTime===1/0||o.endTime<o.startTime)o=null;else{var s=new mt(o.startTime,o.endTime,o.text);s.line=typeof o.line=="number"?o.line:null,o.lineAlign&&(s.lineAlign=o.lineAlign),s.lineInterpretation=o.snapToLines?Gu:1,s.position=typeof o.position=="number"?o.position:null,o.positionAlign&&(s.positionAlign=o.positionAlign),s.size=o.size,s.textAlign=o.align,o.vertical==="lr"?s.writingMode="vertical-lr":o.vertical==="rl"&&(s.writingMode="vertical-rl"),o.region&&(s.region.id=o.region.id,s.region.height=o.region.lines,s.region.heightUnits=2,s.region.regionAnchorX=o.region.regionAnchorX,s.region.regionAnchorY=o.region.regionAnchorY,s.region.scroll=o.region.scroll,s.region.viewportAnchorX=o.region.viewportAnchorX,s.region.viewportAnchorY=o.region.viewportAnchorY,s.region.viewportAnchorUnits=Wn,s.region.width=o.region.width,s.region.widthUnits=Wn),Ul(s),o=s}o&&((s=e.g.mediaSource.modifyCueCallback)&&s(o,null,n),i.push(o))}e.u.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}h.Be=function(e,t,n){function i(){var o=r.i.variants.find(function(u){return u.id==e.id});if(o&&Yu(o)){var s=r.j.l;r.g.abr.enabled&&(s.video!=o.video||s.audio&&o.audio&&s.audio.language==o.audio.language&&s.audio.channelsCount==o.audio.channelsCount&&s.audio.label==o.audio.label)&&J("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.Pa()?wa(r,o,!1,!1,0):wa(r,o,!1,t||!1,n||0),r.W.configure({language:o.language,role:o.audio&&o.audio.roles&&o.audio.roles[0]||"",channelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,Sc:o.video&&o.video.hdr?o.video.hdr:"",spatialAudio:o.audio&&o.audio.spatialAudio?o.audio.spatialAudio:!1,videoLayout:o.video&&o.video.videoLayout?o.video.videoLayout:"",Kc:o.audio&&o.audio.label?o.audio.label:"",fd:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:o.audio&&o.audio.codecs?o.audio.codecs:""}),es(r)}}var r=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.Pa()))&&function(){if(r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks);o=v(o);for(var s=o.next();!s.done;s=o.next())if(s=s.value,th(s)==e.id){s1(r,s);break}}}()},h.xj=function(e,t){t=t===void 0?0:t;var n=this.Rb();if(n.length){var i=n.find(function(r){return r.active});i&&(n=n.find(function(r){return r.videoId===i.videoId&&r.language==e.language&&r.label==e.label&&r.audioMimeType==e.mimeType&&r.audioCodec==e.codecs&&r.primary==e.primary&&As(r.audioRoles,e.roles)&&r.accessibilityPurpose==e.accessibilityPurpose&&r.channelsCount==e.channelsCount&&r.audioSamplingRate==e.audioSamplingRate&&r.spatialAudio==e.spatialAudio}))&&!n.active&&this.Be(n,!0,t)}},h.getAudioTracks=function(){var e=this.Rb();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e;if(this.m==Tn&&(n=e.filter(function(o){return o.originalVideoId===t.originalVideoId&&o.audioCodec})),!n.length)return[];e=new Map,n=v(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalAudioId;r||i.audioId==null||(r=String(i.audioId)),r&&e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage})}return Array.from(e.values())},h.hi=function(){return p1(this.Rb())},h.Fi=function(){return p1(this.vc())},h.gi=function(){return Array.from(h1(this.Rb()))},h.Ei=function(){return Array.from(h1(this.vc()))},h.sh=function(e,t,n,i,r,o,s){function u(){function l(y,x){return y.video||x.video?y.video&&x.video?Math.abs((y.video.height||0)-(x.video.height||0))+Math.abs((y.video.width||0)-(x.video.width||0)):1/0:0}a.W=a.g.adaptationSetCriteriaFactory(),a.W.configure({language:e,role:t||"",channelCount:n||0,Sc:"",spatialAudio:o||!1,videoLayout:"",Kc:s||"",fd:"",codecSwitchingStrategy:a.g.mediaSource.codecSwitchingStrategy,audioCodec:r||""});var f=a.j.l,d=a.W.create(a.i.variants),g=null;d=v(d.values());for(var m=d.next();!m.done;m=d.next())m=m.value,Yu(m)&&(!g||l(g,f)>l(m,f))&&(g=m);g!=f&&(g?(f=Vo(g),a.Be(f,!0,i||0)):nu(a))}var a=this;n=n===void 0?0:n,i=i===void 0?0:i,r=r===void 0?"":r,o=o===void 0?!1:o,s=s===void 0?"":s,!(this.i&&this.G&&(u(),!this.Pa()))&&function(){if(a.h&&a.h.audioTracks){var l=_s(a.Rb(),e,t||"",!1)[0];l&&a.Be(l)}}()},h.hg=function(e,t,n){function i(){r.Tb=e,r.Hd=t||"",r.Fd=n||!1;var o=_s(r.i.textStreams,r.Tb,r.Hd,r.Fd)[0]||null;o&&o!=r.j.u&&(Qh(r.B.h,o,!1),r.g.streaming.alwaysStreamText||r.Pf())&&(gc(r.j,o),bc(r),Sa(r))}var r=this;n=n===void 0?!1:n,!(this.i&&this.G&&(i(),!this.Pa()))&&function(){var o=_s(r.vc(),e,t||"",n||!1)[0];o&&r.th(o)}()},h.yj=function(e,t,n){function i(){for(var o=null,s=v(r.i.variants),u=s.next();!u.done;u=s.next())if(u=u.value,u.audio.label==e){o=u;break}o!=null&&(r.W=r.g.adaptationSetCriteriaFactory(),r.W.configure({language:o.language,role:"",channelCount:0,Sc:"",spatialAudio:!1,videoLayout:"",fd:"",Kc:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),nu(r,t,n))}var r=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.Pa()))&&function(){if(r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks),s=null;o=v(o);for(var u=o.next();!u.done;u=o.next())u=u.value,u.label==e&&(s=u);s&&s1(r,s)}}()},h.Pf=function(){var e=this.oa;return this.u?this.u.isTextVisible():e},h.Rg=function(){return this.h&&this.h.currentSrc&&this.h.textTracks?t1(this).map(function(e){return Vv(e)}):[]},h.ji=function(e){if(!this.h||!this.h.currentSrc||!this.h.textTracks)return[];var t=ct(e),n=t1(this).filter(function(u){return ct(u.language)==t});if(!n||!n.length)return[];e=[];var i=new Set;n=v(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value)&&r.cues){r=v(r.cues);for(var o=r.next();!o.done;o=r.next()){var s=o.value;(o=s.id)&&o!=""||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},i.has(o)||(e.push(s),i.add(o))}}return e};function Ta(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function e1(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function UM(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function t1(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}h.zh=function(e){e=!!e,this.oa!=e&&(this.oa=e,this.m==Tn?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.u||(e=_s(this.i.textStreams,this.Tb,this.Hd,this.Fd),0<e.length&&(gc(this.j,e[0]),bc(this),Sa(this))):wI(this.j))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),c1(this))},h.yi=function(){if(this.G)var e=this.G.Od();else{if(this.Z==null)return new Date;e=this.Z}if(this.i&&!this.Pa()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},h.Wg=function(){if(this.i&&!this.Pa()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},h.ae=function(){return this.U()&&this.i?this.i.presentationTimeline.ae():null},h.Fb=function(){if(this.m==Tn)return this.I.Fb();var e={total:[],audio:[],video:[],text:[]};return this.m==ui&&(e.total=Rr(this.h.buffered)),e},h.Zd=function(){if(!this.h||!this.h.currentTime)return null;var e=this.Wg().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},h.getStats=function(){if(this.m!=Tn&&this.m!=ui)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};hp(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.U()){var n=this.B;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.B.P=this.G.zg(),this.B.T=this.G.Ag()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.B;var i=Number(n.totalVideoFrames);t.O=Number(n.droppedVideoFrames),t.M=i,this.B.L=Number(n.corruptedVideoFrames)}if(this.C?(n=this.C,n=n.H?n.H:NaN):n=NaN,this.B.o=n,this.m==Tn){if(n=this.j.l,t=this.j.u,n){i=this.K?this.K.i:1;var r=i*n.bandwidth;t&&t.bandwidth&&(r+=i*t.bandwidth),this.B.A=r}n&&n.video&&(t=this.B,i=n.video.height||NaN,t.m=n.video.width||NaN,t.l=i),this.U()&&(n=this.Zd()||0,this.B.B=n/1e3),this.i&&(this.B.G=this.i.periodCount,this.B.F=this.i.gapCount,this.i.presentationTimeline&&(this.B.I=this.i.presentationTimeline.h)),n=this.o.getBandwidthEstimate(),this.B.u=n}this.m==ui&&(n=this.B,n.mc=isNaN(n.mc)?NaN:n.mc+NaN,n=this.B,t=e.videoHeight||NaN,n.m=e.videoWidth||NaN,n.l=t);var o=this.B;e=o.m,n=o.l,t=o.A,i=o.M,r=o.O;var s=o.L,u=o.T,a=o.P,l=o.u,f=o.i,d=o.C,g=o.H,m=o.j,y=$h(o.g,"playing"),x=$h(o.g,"paused"),S=$h(o.g,"buffering"),E=o.o,M=o.B,L=o.I,P=o.bh,b=o.mc,D=o.K,k=o.G,N=o.F,j=XI(o.g),V=[];o=v(o.h.g);for(var F=o.next();!F.done;F=o.next())F=F.value,V.push({timestamp:F.timestamp,id:F.id,type:F.type,fromAdaptation:F.fromAdaptation,bandwidth:F.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:r,corruptedFrames:s,stallsDetected:u,gapsJumped:a,estimatedBandwidth:l,completionPercent:f,loadLatency:d,manifestTimeSeconds:g,drmTimeSeconds:m,playTime:y,pauseTime:x,bufferingTime:S,licenseTime:E,liveLatency:M,maxSegmentDuration:L,manifestSizeBytes:P,bytesDownloaded:b,nonFatalErrorCount:D,manifestPeriodCount:k,manifestGapCount:N,stateHistory:j,switchHistory:V}},h.Rh=function(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=this,a,l,f,d,g,m,y,x,S,E,M,L,P;return U(function(b){switch(b.g){case 1:if(u.m!=Tn&&u.m!=ui)throw new _(1,7,7004);if(n!="subtitles"&&n!="captions"&&J("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){b.s(2);break}return A(b,cp(u,e),3);case 3:i=b.h;case 2:if(a=[],u.A&&(a=u.A.getCuePoints()),u.m!=ui){b.s(4);break}return s&&(n="forced"),A(b,n1(u,e,t,n,i,o||"",a),5);case 5:if(l=ct(t),f=u.vc(),d=f.find(function(D){return ct(D.language)==l&&D.label==(o||"")&&D.kind==n}))return bn(u),b.return(d);throw new _(1,2,2012);case 4:if(g=zt,m=u.Ra(),y=m.end-m.start,u.i&&(y=u.i.presentationTimeline.getDuration()),y==1/0)throw new _(1,4,4033);if(!a.length){b.s(6);break}return A(b,fp(u,e,u.F,u.g.streaming.retryParameters),7);case 7:x=b.h,S=i1(u,x,i,a),E=new Blob([S],{type:"text/vtt"}),e=kh(E),i="text/vtt";case 6:if(M={id:u.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:fc(0,y,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:g.za,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ot(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},L=Ot(M.mimeType,M.codecs),P=Ps(L),!P)throw new _(2,2,2014,i);return u.i.textStreams.push(M),bn(u),b.return(qu(M))}})},h.Sh=function(e,t){var n=this,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P;return U(function(b){switch(b.g){case 1:if(n.m!=Tn&&n.m!=ui)throw new _(1,7,7004);if(t){b.s(2);break}return A(b,cp(n,e),3);case 3:t=b.h;case 2:if(t!="text/vtt")throw new _(1,2,2017,e);if(i=zt,r=n.Ra(),o=r.end-r.start,n.i&&(o=n.i.presentationTimeline.getDuration()),o==1/0)throw new _(1,4,4045);return A(b,fp(n,e,n.F,n.g.streaming.retryParameters),4);case 4:if(s=b.h,u=Bl(t),!u)throw new _(2,2,2014,t);for(a=u(),l={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},f=De(s),d=a.parseMedia(f,l,e,[]),g=[],m=v(d),y=m.next(),x={};!y.done;x={Ne:void 0,Mc:void 0},y=m.next())x.Mc=y.value,x.Ne=null,S=function(D){return function(){return D.Ne==null&&(D.Ne=Jt([e],[D.Mc.payload])),D.Ne||[]}}(x),E=new ye(x.Mc.startTime,x.Mc.endTime,S,0,null,null,0,0,1/0),x.Mc.payload.includes("#xywh")&&(M=x.Mc.payload.split("#xywh=")[1].split(","),M.length===4&&E.De({height:parseInt(M[3],10),positionX:parseInt(M[0],10),positionY:parseInt(M[1],10),width:parseInt(M[2],10)})),g.push(E);if(L=t,!g.length){b.s(5);break}return A(b,Zo(g[0].N()[0],n.F,n.g.manifest.retryParameters),6);case 6:L=b.h;case 5:return P={id:n.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ze(g),mimeType:L||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.$e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ot(L||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==ui?n.Oe.push(P):n.i.imageStreams.push(P),bn(n),b.return(eh(P))}})},h.Qh=function(e,t,n){var i=this,r,o,s,u;return U(function(a){switch(a.g){case 1:if(i.m!=Tn&&i.m!=ui)throw new _(1,7,7004);if(n){a.s(2);break}return A(a,cp(i,e),3);case 3:n=a.h;case 2:return r=[],i.A&&(r=i.A.getCuePoints()),A(a,n1(i,e,t,"chapters",n,"",r),4);case 4:if(o=a.h,s=i.Rg(),u=s.find(function(l){return l.language==t}),!u){a.s(5);break}return A(a,new Promise(function(l,f){i.l.ma(o,"load",l),i.l.ma(o,"error",function(){f(new _(1,2,2015))})}),6);case 6:return bn(i),a.return(u);case 5:throw new _(1,2,2012)}})};function cp(e,t){var n;return U(function(i){switch(i.g){case 1:return ge(i,2),A(i,Zo(t,e.F,e.g.streaming.retryParameters),4);case 4:n=i.h,Pe(i,3);break;case 2:Se(i);case 3:if(n)return i.return(n);throw new _(1,2,2011,t)}})}function n1(e,t,n,i,r,o,s){var u,a,l,f;return U(function(d){if(d.g==1)return r!="text/vtt"||s.length?A(d,fp(e,t,e.F,e.g.streaming.retryParameters),3):d.s(2);d.g!=2&&(u=d.h,a=i1(e,u,r,s),l=new Blob([a],{type:"text/vtt"}),t=kh(l),r="text/vtt"),f=document.createElement("track");var g=e.L,m=t;try{if(g.g.enabled){var y=ip(g);y.ot=op,y.su=!0;var x=Cc(y),S=rp(m,x)}else S=m}catch(E){ue("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",E),S=m}return f.src=S,f.label=o,f.kind=i,f.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(f),d.return(f)})}function fp(e,t,n,i){var r,o,s;return U(function(u){if(u.g==1){r=Fi,o=qt([t],i),o.method="GET";var a=e.L;try{a.g.enabled&&eu(a,o,{ot:op,su:!0})}catch(l){ue("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return A(u,n.request(r,o).promise,2)}return s=u.h,u.return(s.data)})}function i1(e,t,n,i){var r=Bl(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=De(t),t=n.parseMedia(t,e,null,[]),lM(t,i);throw new _(2,2,2014,n)}h.Dj=function(e,t){this.ka.width=e,this.ka.height=t},h.eg=function(e){if(this.m==Tn){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.B)t=!1;else{for(var n=v(t.i.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.sd||i.Da||i.kb||(i.sd=!1,Mn(t,i,e));t=!0}}else t=!1;return t},h.Hf=function(){return J("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},h.ui=function(){return this.Qb},h.ni=function(){var e={video:null,audio:null,text:null};if(this.m!=Tn)return e;var t=this.j.l,n=this.h.currentTime;t=v([t.video,t.audio,this.j.u]);for(var i=t.next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r=i.segmentIndex.get(r),r={codecs:r.codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},i.type=="video"?(r.width=i.width,r.height=i.height,e.video=r):i.type=="audio"?e.audio=r:i.type==be&&(e.text=r)}return e};function Nr(e){var t=Js();return t.streaming.failureCallback=function(n){if(e.U()){var i=null;n.code==1001||n.code==1002?(i=1,e.g.streaming.lowLatencyMode&&(i=.1)):n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.eg(i))}},t.textDisplayFactory=function(){return!e.ue||sn()&&!document.fullscreenEnabled?"addTextTrack"in e.h?new hn(e.h,"Shaka Player TextTrack"):new pn:new gn(e.h,e.ue)},t}h.Ch=function(e){this.ue=e};function bM(e,t){for(var n=new Set,i=v(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=v(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var o=v(r.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new kt,l=r.closedCaptions.get(s);u={id:e.We++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:be,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ot(u,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(u),n.add(s)}}}function FM(e,t){var n,i,r,o,s;return U(function(u){return u.g==1?(n=e.audio,i=e.video,r=function(a,l){var f,d,g;return U(function(m){return m.g==1?a?a.segmentIndex?m.s(2):A(m,a.createSegmentIndex(),2):m.return(null):(d=(f=a.segmentIndex.Gb(l))?f.next().value:null,d?(g=d.startTime,m.return(g)):m.return(null))})},A(u,r(n,t),2)):u.g!=3?(o=u.h,A(u,r(i,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function dp(e){var t=e.Of();if(e.B&&e.M&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.K;n.j=!1,Ph(n)}else n=e.K,n.j=t,Ph(n);if(e.L&&(n=e.L,t||n.u||(n.u=!0),n.u&&t&&(n.B=!0),n.F=t),hp(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ue<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.P&&(e.P=Math.min(e.P+ ++e.Ue*r,n-i))}}t=new Map().set("buffering",t),e.dispatchEvent(gt("buffering",t))}function r1(e,t){e.Na.Qa(),e.Na.D(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.Ra(),r=e.U()?e.g.streaming.safeSeekOffset:0;0<t?Math.floor(n)>=Math.floor(i.end)&&e.gd():Math.floor(n)<=Math.floor(i.start+r)&&e.gd()})}function hp(e){if(e.B&&e.M){var t=e.B.g,n="playing";e.M.g==bs?n="buffering":e.Uc()?n="ended":e.h.paused&&(n="paused");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(gt("statechanged",n)))}}function o1(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.Qg();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.Md(i,!1):r==1&&t!==e.K.sc()&&e.gd()}if(n&&(n=e.Ra(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var o=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,u=s+i,a=Math.max(0,s-i),l=e.g.streaming.liveSync.maxPlaybackRate,f=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?u=e.i.serviceDescription.targetLatency+i:e.i.serviceDescription.maxLatency!=null&&(u=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?a=Math.max(0,e.i.serviceDescription.targetLatency-i):e.i.serviceDescription.minLatency!=null&&(a=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,f=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.P||typeof s!="number"||(e.P=s);var d=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.Ma&&e.P!==null&&typeof s=="number"&&e.Ue<d&&Date.now()-e.Ma>1e3*o&&(o=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.P=Math.max(e.P-(s-o)/2,o+i),e.Ma=Date.now()),r&&e.P!==null&&(u=e.P+i,a=e.P-i),s=n.end-e.h.currentTime,i=0,e.m==ui&&(r=e.h.buffered,0<r.length&&(i=r.end(r.length-1),i=Math.max(l,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=1e3*e.g.streaming.liveSync.panicThreshold,o=Date.now()-e.M.h,n&&!f&&(f=e.g.streaming.liveSync.minPlaybackRate),n&&f&&o<=r?t!=f&&e.Md(f,!1):u!=null&&l&&s-i>u?(t!=l&&e.Md(l,!1),e.Ma=null):a!=null&&f&&s-i<a?(t!=f&&e.Md(f,!1),e.Ma=null):t!==e.K.sc()&&(e.gd(),e.Ma=Date.now())}}function Uc(e){if(e.h){var t=function(r,o){var s=s===void 0?Number.EPSILON:s;if(r===o)s=!0;else{var u=Math.abs(r-o);s=u<=s?!0:s!==Number.EPSILON?Math.abs(u-s)<=Number.EPSILON:!1}return(s||o>r)&&e.Ve<r?(e.Ve=r,!0):!1},n=e.Ra();if(n=n.end-n.start,n=0<n?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var i=gt("started");else t(25,n)?i=gt("firstquartile"):t(50,n)?i=gt("midpoint"):t(75,n)?i=gt("thirdquartile"):(t(100,n)&&(i=gt("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.Uc()&&e.h.pause());i&&e.dispatchEvent(i)}}}function es(e){try{Iy(e.te,e.i)}catch(n){return iu(e,n),!1}var t=Gl(e.i.variants);return t=e.W.create(t),e.o.setVariants(Array.from(t.values())),!0}function nu(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var o;(o=es(e)?e.o.chooseVariant():null)&&wa(e,o,r,t,n,i)}function wa(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e.j.l;if(t==s)i&&m0(e.j,t,i,r,!0);else{var u=e.B.h;if(u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),m0(e.j,t,i,r,o,n),i=null,s&&(i=Vo(s)),s=Vo(t),s.active=!0,e.O&&(r=e.O,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),o=0,u=-1,t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(e.Tg()){case"DASH":u=1;break;case"HLS":u=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(o),r.j||r.g.setStreamingFormat(u))}n?(n=new Map().set("oldTrack",i).set("newTrack",s),n=gt("adaptation",n),ts(e,n)):u1(e,i,s),a1(e,i,s)}}function s1(e,t){var n=Array.from(e.h.audioTracks).find(function(i){return i.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=nh(n),t=nh(t),u1(e,n,t),a1(e,n,t))}function bn(e){var t=gt("trackschanged");ts(e,t),l1(e)}function u1(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=gt("variantchanged",t),ts(e,t)}function a1(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&l1(e)}function l1(e){var t=gt("audiotrackschanged");ts(e,t)}function bc(e){var t=gt("textchanged");ts(e,t)}function c1(e){var t=gt("texttrackvisibility");ts(e,t)}function f1(e){e.g.abr.enabled||pp(e);var t=new Map().set("newStatus",e.g.abr.enabled);ts(e,gt("abrstatuschanged",t))}function Sa(e){var t=e.vc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function pp(e,t){if(t=t===void 0?!0:t,e.m==Tn){e.xe.stop();for(var n=v(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&es(e)}}h.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Bi||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(u){var a=u[e.type];return a&&a.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===a.language:!0:!1})){for(var n=!1,i=!1,r=v(this.i.variants),o=r.next();!o.done;o=r.next()){o=o.value;var s=o[e.type];s&&(s.id===e.id?(o.disabledUntilTime=Date.now()/1e3+t,n=!0):s.trickModeVideo&&s.trickModeVideo.id==e.id&&(i=!0))}return!n&&i?!1:(this.xe.ua(1),t=this.Fb().video.reduce(function(u,a){return u+a.end-a.start},0),nu(this,!1,t,!0,!1),!0)}return!1};function iu(e,t){var n,i,r,o;return U(function(s){switch(s.g){case 1:if(e.m==Bi)return s.return();if(t.severity===1&&e.B.K++,n=!0,!(e.sa&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){s.s(2);break}return sn()&&t.code==3016?s.return():(ge(s,3),A(s,Tc(e.j),5));case 5:i=s.h,n=!i,i&&(r=gt("mediasourcerecovered"),e.dispatchEvent(r)),Pe(s,2);break;case 3:Se(s),n=!0;case 2:if(!n)return s.return();t.severity===2&&pp(e,!1),o=gt("error",new Map().set("detail",t)),e.dispatchEvent(o),o.defaultPrevented&&(t.handled=!0),ie(s)}})}h.addFont=function(e,t){var n,i,r,o,s;return U(function(u){if(u.g==1)return"fonts"in document&&"FontFace"in w?A(u,document.fonts.ready,3):u.s(0);if(!("entries"in document.fonts))return u.return();for(n=function(a){a=a.entries();for(var l=[],f=a.next();f.done===!1;)l.push(f.value),f=a.next();return l},i=v(n(document.fonts)),r=i.next();!r.done;r=i.next())if(o=r.value,o.family==e&&o.display=="swap")return u.return();s=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(s),ie(u)})};function xa(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(gt(t,e))}function d1(e,t,n,i){i=i===void 0?!1:i,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(gt(i?"audiotrackchanged":"mediaqualitychanged",t))}function gp(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new _(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new _(2,3,3016,n,t,e.h.error.message))}function mp(e,t,n){0<t&&(e.U()||e.Bh(t)),t=e.getDuration(),n<t&&(e.U()||e.bb(n))}function ts(e,t){U(function(n){if(n.g==1)return A(n,Promise.resolve(),2);e.m!=Bi&&e.dispatchEvent(t),ie(n)})}function h1(e){var t=new Set;e=v(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(ct(n.language)):t.add("und");return t}function p1(e){var t=new Map,n=new Map;e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r="und",o=[];i.language&&(r=ct(i.language)),i.type=="variant"?o=i.audioRoles:o=i.roles,o&&o.length||(o=[""]),t.has(r)||t.set(r,new Set),o=v(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(r).add(s),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(s,i.label))}var u=[];return t.forEach(function(a,l){a=v(a);for(var f=a.next();!f.done;f=a.next()){f=f.value;var d=null;n.has(l)&&n.get(l).has(f)&&(d=n.get(l).get(f)),u.push({language:l,role:f,label:d})}}),u}h.Pa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},h.Uc=function(){return!this.h||this.h.ended?!0:this.sa&&!this.U()&&this.h.currentTime>=this.Ra().end},R("shaka.Player",q),q.prototype.isEnded=q.prototype.Uc,q.prototype.isRemotePlayback=q.prototype.Pa,q.prototype.addFont=q.prototype.addFont,q.prototype.setVideoContainer=q.prototype.Ch,q.prototype.getFetchedPlaybackInfo=q.prototype.ni,q.prototype.getManifestParserFactory=q.prototype.ui,q.prototype.getManifest=q.prototype.Hf,q.prototype.retryStreaming=q.prototype.eg,q.prototype.setMaxHardwareResolution=q.prototype.Dj,q.prototype.addChaptersTrack=q.prototype.Qh,q.prototype.addThumbnailsTrack=q.prototype.Sh,q.prototype.addTextTrackAsync=q.prototype.Rh,q.prototype.getStats=q.prototype.getStats,q.prototype.getBufferedInfo=q.prototype.Fb,q.prototype.getSegmentAvailabilityDuration=q.prototype.ae,q.prototype.getPresentationStartTimeAsDate=q.prototype.Wg,q.prototype.getPlayheadTimeAsDate=q.prototype.yi,q.prototype.setTextTrackVisibility=q.prototype.zh,q.prototype.getChapters=q.prototype.ji,q.prototype.getChaptersTracks=q.prototype.Rg,q.prototype.isTextTrackVisible=q.prototype.Pf,q.prototype.selectVariantsByLabel=q.prototype.yj,q.prototype.selectTextLanguage=q.prototype.hg,q.prototype.selectAudioLanguage=q.prototype.sh,q.prototype.getTextLanguages=q.prototype.Ei,q.prototype.getAudioLanguages=q.prototype.gi,q.prototype.getTextLanguagesAndRoles=q.prototype.Fi,q.prototype.getAudioLanguagesAndRoles=q.prototype.hi,q.prototype.getAudioTracks=q.prototype.getAudioTracks,q.prototype.selectAudioTrack=q.prototype.xj,q.prototype.selectVariantTrack=q.prototype.Be,q.prototype.selectTextTrack=q.prototype.th,q.prototype.getThumbnails=q.prototype.Hi,q.prototype.getAllThumbnails=q.prototype.fi,q.prototype.getImageTracks=q.prototype.pi,q.prototype.getTextTracks=q.prototype.vc,q.prototype.getVariantTracks=q.prototype.Rb,q.prototype.cancelTrickPlay=q.prototype.gd,q.prototype.trickPlay=q.prototype.Md,q.prototype.getPlaybackRate=q.prototype.gb,q.prototype.isBuffering=q.prototype.Of,q.prototype.getKeyStatuses=q.prototype.Yd,q.prototype.getActiveSessionsMetadata=q.prototype.Gf,q.prototype.getExpiration=q.prototype.pd,q.prototype.drmInfo=q.prototype.drmInfo,q.prototype.keySystem=q.prototype.keySystem,q.prototype.isFullyLoaded=q.prototype.Ri,q.prototype.goToLive=q.prototype.Ni,q.prototype.seekRange=q.prototype.Ra,q.prototype.isAudioOnly=q.prototype.Qi,q.prototype.isInProgress=q.prototype.yc,q.prototype.isLive=q.prototype.U,q.prototype.getAdManager=q.prototype.Pg,q.prototype.getAssetUri=q.prototype.Qc,q.prototype.getNetworkingEngine=q.prototype.xb,q.prototype.getMediaElement=q.prototype.xi,q.prototype.getManifestType=q.prototype.Tg,q.prototype.getLoadMode=q.prototype.ti,q.prototype.resetConfiguration=q.prototype.sj,q.prototype.getBufferFullness=q.prototype.Qg,q.prototype.getNonDefaultConfiguration=q.prototype.Vg,q.prototype.getConfigurationForLowLatency=q.prototype.ki,q.prototype.getConfiguration=q.prototype.getConfiguration,q.prototype.configurationForLowLatency=q.prototype.ci,q.prototype.configure=q.prototype.configure,q.prototype.releaseAllMutexes=q.prototype.oj,q.prototype.destroyAllPreloads=q.prototype.pf,q.prototype.preload=q.prototype.preload,q.prototype.detachAndSavePreload=q.prototype.Lg,q.prototype.unloadAndSavePreload=q.prototype.Gj,q.prototype.load=q.prototype.load,q.prototype.updateStartTime=q.prototype.Kj,q.prototype.unload=q.prototype.kc,q.prototype.detach=q.prototype.detach,q.prototype.attachCanvas=q.prototype.Vh,q.prototype.attach=q.prototype.Lb,q.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,o,s;return U(function(u){switch(u.g){case 1:if(t={},!e){u.s(2);break}return A(u,l2(),3);case 3:t=u.h;case 2:return n=y2(),i=K2(),A(u,ov(),4);case 4:return r=u.h,o={manifest:n,media:i,drm:t,hardwareResolution:r},s=m1,s.forEach(function(a,l){o[l]=a()}),u.return(o)}})},q.isBrowserSupported=function(){return w.Promise||J("A Promise implementation or polyfill is required"),w.Promise&&w.Uint8Array&&Array.prototype.forEach&&!Ft("Trident/")?er()?!0:Lu("application/x-mpegurl"):!1},q.setAdManagerFactory=function(e){Bc=e},q.registerSupportPlugin=b0,q.prototype.destroy=q.prototype.destroy;var Bi=0,Fc=1,Tn=2,ui=3;q.LoadMode={DESTROYED:Bi,NOT_LOADED:Fc,MEDIA_SOURCE:Tn,SRC_EQUALS:ui},q.version="v4.14.9";var g1=["4","14"];vi=new function(e){this.g=e,this.i=xl,this.h=Kn}(new ri(Number(g1[0]),Number(g1[1])));var m1=new Map,Bc=null;function v1(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function BM(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function xe(e,t,n){var i=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new ke,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}h=xe.prototype,h.needsSkipUI=function(){return!1},h.isClientRendering=function(){return!0},h.hasCustomClick=function(){return!0},h.isUsingAnotherMediaElement=function(){return!0},h.getDuration=function(){return this.g.getDuration()},h.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},h.getRemainingTime=function(){return this.h.getRemainingTime()},h.isPaused=function(){return this.i},h.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},h.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},h.canSkipNow=function(){return this.h.getAdSkippableState()},h.skip=function(){return this.h.skip()},h.pause=function(){return this.h.pause()},h.play=function(){return this.h.resume()},h.getVolume=function(){return this.h.getVolume()},h.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},h.isMuted=function(){return this.h.getVolume()==0},h.isLinear=function(){return this.g.isLinear()},h.resize=function(e,t){var n=!1,i=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},h.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},h.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},h.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},h.getTitle=function(){return this.g.getTitle()},h.getDescription=function(){return this.g.getDescription()},h.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},h.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},h.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},h.getAdId=function(){return this.g.getAdId()},h.getCreativeAdId=function(){return this.g.getCreativeAdId()},h.getAdvertiserName=function(){return this.g.getAdvertiserName()},h.getMediaUrl=function(){return this.g.getMediaUrl()},h.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},h.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},h.release=function(){this.h=this.g=null},R("shaka.ads.ClientSideAd",xe),xe.prototype.release=xe.prototype.release,xe.prototype.getPodIndex=xe.prototype.getPodIndex,xe.prototype.getTimeOffset=xe.prototype.getTimeOffset,xe.prototype.getMediaUrl=xe.prototype.getMediaUrl,xe.prototype.getAdvertiserName=xe.prototype.getAdvertiserName,xe.prototype.getCreativeAdId=xe.prototype.getCreativeAdId,xe.prototype.getAdId=xe.prototype.getAdId,xe.prototype.getVastMediaWidth=xe.prototype.getVastMediaWidth,xe.prototype.getVastMediaHeight=xe.prototype.getVastMediaHeight,xe.prototype.getVastMediaBitrate=xe.prototype.getVastMediaBitrate,xe.prototype.getDescription=xe.prototype.getDescription,xe.prototype.getTitle=xe.prototype.getTitle,xe.prototype.getPositionInSequence=xe.prototype.getPositionInSequence,xe.prototype.getSequenceLength=xe.prototype.getSequenceLength,xe.prototype.setMuted=xe.prototype.setMuted,xe.prototype.resize=xe.prototype.resize,xe.prototype.isLinear=xe.prototype.isLinear,xe.prototype.isMuted=xe.prototype.isMuted,xe.prototype.setVolume=xe.prototype.setVolume,xe.prototype.getVolume=xe.prototype.getVolume,xe.prototype.play=xe.prototype.play,xe.prototype.pause=xe.prototype.pause,xe.prototype.skip=xe.prototype.skip,xe.prototype.canSkipNow=xe.prototype.canSkipNow,xe.prototype.getTimeUntilSkippable=xe.prototype.getTimeUntilSkippable,xe.prototype.isSkippable=xe.prototype.isSkippable,xe.prototype.isPaused=xe.prototype.isPaused,xe.prototype.getRemainingTime=xe.prototype.getRemainingTime,xe.prototype.getMinSuggestedDuration=xe.prototype.getMinSuggestedDuration,xe.prototype.getDuration=xe.prototype.getDuration,xe.prototype.isUsingAnotherMediaElement=xe.prototype.isUsingAnotherMediaElement,xe.prototype.hasCustomClick=xe.prototype.hasCustomClick,xe.prototype.isClientRendering=xe.prototype.isClientRendering,xe.prototype.needsSkipUI=xe.prototype.needsSkipUI;function Tt(){}function y1(e,t){var n=[];e=v(nt(e,"Ad"));for(var i=e.next();!i.done;i=e.next())if((i=Bt(i.value,"InLine"))&&(i=Bt(i,"Creatives"))){i=v(nt(i,"Creative"));for(var r=i.next();!r.done;r=i.next()){r=r.value;var o=Bt(r,"Linear");if(o&&VM(n,t,o),r=Bt(r,"NonLinearAds")){r=nt(r,"NonLinear"),r=v(r);for(var s=r.next();!s.done;s=r.next())e:{o=n;var u=t,a=s.value,l=Bt(a,"StaticResource");if(l)s=l.attributes.creativeType;else{if(l=Bt(a,"HTMLResource"),!l)break e;s="text/html"}if(l=si(l)){s==="text/html"&&(l="data:text/html;charset=UTF-8,"+encodeURIComponent(l));var f=Le(a,"width",In)||Le(a,"expandedWidth",In),d=Le(a,"height",In)||Le(a,"expandedHeight",In);if(f||d){var g=null;(a=a.attributes.minSuggestedDuration)&&(g=Cs(a)),a=0,u!=null&&(a=u),o.push({id:null,groupId:null,startTime:a,endTime:null,uri:l,mimeType:s,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:g,once:!0,pre:u==null,post:u==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:f||0,y:d||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}}}return n}function VM(e,t,n){var i=0;t!=null&&(i=t);var r=null;if(n.attributes.skipoffset&&(r=Cs(n.attributes.skipoffset),isNaN(r)&&(r=null)),n=Bt(n,"MediaFiles")){var o=nt(n,"MediaFile");for(n=o,o=o.filter(function(u){return u.attributes.delivery=="streaming"}),o.length&&(n=o),n=n.sort(function(u,a){return(parseInt(a.attributes.height,10)||0)-(parseInt(u.attributes.height,10)||0)}),n=v(n),o=n.next();!o.done;o=n.next())if(o=o.value,!o.attributes.apiFramework){var s=si(o);if(s){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:s,mimeType:o.attributes.type||null,isSkippable:r!=null,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}R("shaka.ads.Utils",Tt),Tt.ADS_LOADED="ads-loaded",Tt.AD_STARTED="ad-started",Tt.AD_FIRST_QUARTILE="ad-first-quartile",Tt.AD_MIDPOINT="ad-midpoint",Tt.AD_THIRD_QUARTILE="ad-third-quartile",Tt.AD_COMPLETE="ad-complete",Tt.AD_STOPPED="ad-stopped",Tt.AD_SKIPPED="ad-skipped",Tt.AD_VOLUME_CHANGED="ad-volume-changed",Tt.AD_MUTED="ad-muted",Tt.AD_PAUSED="ad-paused",Tt.AD_RESUMED="ad-resumed",Tt.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Tt.CUEPOINTS_CHANGED="ad-cue-points-changed",Tt.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Tt.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Tt.AD_CLICKED="ad-clicked",Tt.AD_PROGRESS="ad-progress",Tt.AD_BUFFERING="ad-buffering",Tt.AD_IMPRESSION="ad-impression",Tt.AD_DURATION_CHANGED="ad-duration-changed",Tt.AD_CLOSED="ad-closed",Tt.AD_LOADED="ad-loaded",Tt.ALL_ADS_COMPLETED="all-ads-completed",Tt.AD_LINEAR_CHANGED="ad-linear-changed",Tt.AD_METADATA="ad-metadata",Tt.AD_RECOVERABLE_ERROR="ad-recoverable-error",Tt.AD_ERROR="ad-error",Tt.AD_BREAK_READY="ad-break-ready",Tt.AD_INTERACTION="ad-interaction",Tt.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Tt.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Tt.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Vc(e,t,n,i,r){var o=this;this.u=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=r,this.j=null,this.h=new ke,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.u,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.14.9"),this.g=null,this.B=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){HM(o,s)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){T1(o,s)}),this.h.D(this.i,"ended",function(){o.m.contentComplete()}),this.h.ma(this.i,"play",function(){o.F=!0})}Vc.prototype.configure=function(e){this.o=e},Vc.prototype.stop=function(){this.g&&this.g.stop(),this.u&&ao(this.u)},Vc.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function T1(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new re("ad-error",t)),Gc(e,null),e.l(new re("ad-cue-points-changed",new Map().set("cuepoints",[])))}function HM(e,t){if(e.l(new re("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new re("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=v(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.l(new re("ad-cue-points-changed",new Map().set("cuepoints",t)))}GM(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Hc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Hc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in w?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Hc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Hc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ma(e.i,"play",function(){e.F=!0,e.g.start()})}catch{Gc(e,null)}}function Hc(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function GM(e){function t(n,i){n=new Map().set("originalEvent",n),e.l(new re(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){T1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){w1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){w1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Gc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Gc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function w1(e,t){var n=t.getAd();n?(e.j=new xe(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new re("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new re("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):J("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Gc(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new re("ad-content-resume-requested")),e.l(new re("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function Ee(e,t,n,i,r,o){this.g=e,this.i=t,this.j=(this.h=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.A=n,this.o=i,this.m=r,this.u=o,this.B=t.overlay}h=Ee.prototype,h.needsSkipUI=function(){return!0},h.isClientRendering=function(){return!0},h.hasCustomClick=function(){return!1},h.isUsingAnotherMediaElement=function(){return this.u},h.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},h.getMinSuggestedDuration=function(){return this.getDuration()},h.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},h.isPaused=function(){return this.g.paused},h.isSkippable=function(){return this.h&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},h.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},h.canSkipNow=function(){return this.h&&this.getTimeUntilSkippable()==0},h.skip=function(){this.canSkipNow()&&this.A()},h.pause=function(){return this.g.pause()},h.play=function(){return this.g.play()},h.getVolume=function(){return this.g.volume},h.setVolume=function(e){this.g.volume=e},h.isMuted=function(){return this.g.muted},h.isLinear=function(){return this.B==null},h.resize=function(){},h.setMuted=function(e){this.g.muted=e},h.getSequenceLength=function(){return this.o},h.getPositionInSequence=function(){return this.m},h.getTitle=function(){return""},h.getDescription=function(){return""},h.getVastMediaBitrate=function(){return 0},h.getVastMediaHeight=function(){return 0},h.getVastMediaWidth=function(){return 0},h.getAdId=function(){return this.i.id||""},h.getCreativeAdId=function(){return""},h.getAdvertiserName=function(){return""},h.getMediaUrl=function(){return this.i.uri},h.getTimeOffset=function(){return 0},h.getPodIndex=function(){return 0},h.release=function(){this.g=null},R("shaka.ads.InterstitialAd",Ee),Ee.prototype.release=Ee.prototype.release,Ee.prototype.getPodIndex=Ee.prototype.getPodIndex,Ee.prototype.getTimeOffset=Ee.prototype.getTimeOffset,Ee.prototype.getMediaUrl=Ee.prototype.getMediaUrl,Ee.prototype.getAdvertiserName=Ee.prototype.getAdvertiserName,Ee.prototype.getCreativeAdId=Ee.prototype.getCreativeAdId,Ee.prototype.getAdId=Ee.prototype.getAdId,Ee.prototype.getVastMediaWidth=Ee.prototype.getVastMediaWidth,Ee.prototype.getVastMediaHeight=Ee.prototype.getVastMediaHeight,Ee.prototype.getVastMediaBitrate=Ee.prototype.getVastMediaBitrate,Ee.prototype.getDescription=Ee.prototype.getDescription,Ee.prototype.getTitle=Ee.prototype.getTitle,Ee.prototype.getPositionInSequence=Ee.prototype.getPositionInSequence,Ee.prototype.getSequenceLength=Ee.prototype.getSequenceLength,Ee.prototype.setMuted=Ee.prototype.setMuted,Ee.prototype.resize=Ee.prototype.resize,Ee.prototype.isLinear=Ee.prototype.isLinear,Ee.prototype.isMuted=Ee.prototype.isMuted,Ee.prototype.setVolume=Ee.prototype.setVolume,Ee.prototype.getVolume=Ee.prototype.getVolume,Ee.prototype.play=Ee.prototype.play,Ee.prototype.pause=Ee.prototype.pause,Ee.prototype.skip=Ee.prototype.skip,Ee.prototype.canSkipNow=Ee.prototype.canSkipNow,Ee.prototype.getTimeUntilSkippable=Ee.prototype.getTimeUntilSkippable,Ee.prototype.isSkippable=Ee.prototype.isSkippable,Ee.prototype.isPaused=Ee.prototype.isPaused,Ee.prototype.getRemainingTime=Ee.prototype.getRemainingTime,Ee.prototype.getMinSuggestedDuration=Ee.prototype.getMinSuggestedDuration,Ee.prototype.getDuration=Ee.prototype.getDuration,Ee.prototype.isUsingAnotherMediaElement=Ee.prototype.isUsingAnotherMediaElement,Ee.prototype.hasCustomClick=Ee.prototype.hasCustomClick,Ee.prototype.isClientRendering=Ee.prototype.isClientRendering,Ee.prototype.needsSkipUI=Ee.prototype.needsSkipUI;function Ae(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}h=Ae.prototype,h.needsSkipUI=function(){return!0},h.isClientRendering=function(){return!0},h.hasCustomClick=function(){return!1},h.isUsingAnotherMediaElement=function(){return!1},h.getDuration=function(){return-1},h.getMinSuggestedDuration=function(){return this.getDuration()},h.getRemainingTime=function(){return-1},h.isPaused=function(){return!1},h.isSkippable=function(){return!1},h.getTimeUntilSkippable=function(){return 0},h.canSkipNow=function(){return!1},h.skip=function(){},h.pause=function(){},h.play=function(){},h.getVolume=function(){return 1},h.setVolume=function(){},h.isMuted=function(){return!1},h.isLinear=function(){return this.i},h.resize=function(){},h.setMuted=function(){},h.getSequenceLength=function(){return this.j},h.getPositionInSequence=function(){return this.h},h.getTitle=function(){return""},h.getDescription=function(){return""},h.getVastMediaBitrate=function(){return 0},h.getVastMediaHeight=function(){return 0},h.getVastMediaWidth=function(){return 0},h.getAdId=function(){return this.g.id||""},h.getCreativeAdId=function(){return""},h.getAdvertiserName=function(){return""},h.getMediaUrl=function(){return this.g.uri},h.getTimeOffset=function(){return 0},h.getPodIndex=function(){return 0},h.release=function(){},R("shaka.ads.InterstitialStaticAd",Ae),Ae.prototype.release=Ae.prototype.release,Ae.prototype.getPodIndex=Ae.prototype.getPodIndex,Ae.prototype.getTimeOffset=Ae.prototype.getTimeOffset,Ae.prototype.getMediaUrl=Ae.prototype.getMediaUrl,Ae.prototype.getAdvertiserName=Ae.prototype.getAdvertiserName,Ae.prototype.getCreativeAdId=Ae.prototype.getCreativeAdId,Ae.prototype.getAdId=Ae.prototype.getAdId,Ae.prototype.getVastMediaWidth=Ae.prototype.getVastMediaWidth,Ae.prototype.getVastMediaHeight=Ae.prototype.getVastMediaHeight,Ae.prototype.getVastMediaBitrate=Ae.prototype.getVastMediaBitrate,Ae.prototype.getDescription=Ae.prototype.getDescription,Ae.prototype.getTitle=Ae.prototype.getTitle,Ae.prototype.getPositionInSequence=Ae.prototype.getPositionInSequence,Ae.prototype.getSequenceLength=Ae.prototype.getSequenceLength,Ae.prototype.setMuted=Ae.prototype.setMuted,Ae.prototype.resize=Ae.prototype.resize,Ae.prototype.isLinear=Ae.prototype.isLinear,Ae.prototype.isMuted=Ae.prototype.isMuted,Ae.prototype.setVolume=Ae.prototype.setVolume,Ae.prototype.getVolume=Ae.prototype.getVolume,Ae.prototype.play=Ae.prototype.play,Ae.prototype.pause=Ae.prototype.pause,Ae.prototype.skip=Ae.prototype.skip,Ae.prototype.canSkipNow=Ae.prototype.canSkipNow,Ae.prototype.getTimeUntilSkippable=Ae.prototype.getTimeUntilSkippable,Ae.prototype.isSkippable=Ae.prototype.isSkippable,Ae.prototype.isPaused=Ae.prototype.isPaused,Ae.prototype.getRemainingTime=Ae.prototype.getRemainingTime,Ae.prototype.getMinSuggestedDuration=Ae.prototype.getMinSuggestedDuration,Ae.prototype.getDuration=Ae.prototype.getDuration,Ae.prototype.isUsingAnotherMediaElement=Ae.prototype.isUsingAnotherMediaElement,Ae.prototype.hasCustomClick=Ae.prototype.hasCustomClick,Ae.prototype.isClientRendering=Ae.prototype.isClientRendering,Ae.prototype.needsSkipUI=Ae.prototype.needsSkipUI;function S1(e,t,n,i){var r=this;this.T=null,this.A=e,this.H=t,this.g=n,this.F=null,this.B=!0,this.h=this.g,this.i=i,this.W=new Set,this.G=new Set,this.C=new Map,this.L=new Map,this.j=new q,wp(this),this.I=new ke,this.l=new ke,this.K=!1,this.ea=this.m=this.u=this.o=null,this.fa=!1,this.O=-1,this.$=function(){if(!r.K&&r.o&&!r.H.Pa()){r.o=r.g.currentTime,r.u&&!r.u.pre&&!r.u.post&&r.o<r.u.startTime&&(r.u=null);var o=Aa(r);o&&Kc(r,o,1,1,Date.now())}},this.Z=function(){if(!(r.K||r.o||r.H.Pa())){r.o=r.g.currentTime;var o=Aa(r,!0);o&&Kc(r,o,1,1,Date.now())}},this.P=new Be(this.$),this.M=new Be(function(){var o,s,u,a,l,f,d,g,m,y,x;return U(function(S){switch(S.g){case 1:if(!r.G.size||r.o==null){S.s(0);break}if(o=r.H.m,o==Bi||o==Fc)return S.return();s=!1,u=Array.from(r.G),a=r.H.Ra(),l=v(u),f=l.next();case 3:if(f.done){S.s(5);break}if(d=f.value,d==r.u){S.s(4);break}if(g=d.endTime||d.startTime,!(1<=a.start-g)){m=d.startTime-r.o,0<m&&10>=m&&(!r.C.has(d)&&E1(d)&&r.C.set(d,r.j.preload(d.uri,null,d.mimeType||void 0)),A1(r,d)),S.s(4);break}if(!r.C.has(d)){S.s(7);break}return A(S,r.C.get(d),8);case 8:(y=S.h)&&y.destroy(),r.C.delete(d);case 7:I1(r,d),x=JSON.stringify(d),r.W.has(x)&&r.W.delete(x),r.G.delete(d),vp(r),d.overlay||(s=!0);case 4:f=l.next(),S.s(3);break;case 5:s&&Wc(r),ie(S)}})})}h=S1.prototype,h.configure=function(e){this.T=e,yp(this)};function KM(e){if(!e.fa&&e.G.size){if(e.I.D(e.g,"playing",e.Z),e.I.D(e.g,"timeupdate",e.Z),e.I.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!Id()){var t=e.g,n=function(){e.O!=-1&&(e.$(),e.O!=-1&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.P.ua(.025);e.M&&e.M.ua(1),e.fa=!0}}function vp(e){e.fa&&!e.G.size&&(e.I.Ja(e.g,"playing",e.Z),e.I.Ja(e.g,"timeupdate",e.Z),e.I.Ja(e.g,"ended",e.$),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.P&&e.P.stop(),e.M&&e.M.stop(),e.fa=!1)}function yp(e){if(e.A&&e.T&&!e.K){var t=e.T.supportsMultipleMediaElements,n=e.g;n.webkitSupportsFullscreen&&n.webkitDisplayingFullscreen&&(t=!1),e.B==t&&(e.B=!t,e.B?(e.h=e.g,e.F&&(e.F.parentElement&&e.A.removeChild(e.F),e.F=null)):(e.F||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.F=t),e.h=e.F))}}h.stop=function(){if(this.l&&this.l.Qa(),this.W.clear(),this.G.clear(),this.j.pf(),this.C.size){var e=Array.from(this.C.values());e=v(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.C.clear(),this.L.size)for(e=Array.from(this.L.keys()),e=v(e),t=e.next();!t.done;t=e.next())I1(this,t.value);this.L.clear(),this.j.detach(),this.K=!1,this.u=this.o=null,this.B=!0,this.h=this.g,this.F=null,Tp(this),vp(this),this.A&&ao(this.A),this.m&&(this.m.stop(),this.m=null)},h.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.P&&(this.P.stop(),this.P=null),this.M&&(this.M.stop(),this.M=null),this.j.destroy()},h.If=function(){return this.j};function WM(e,t){var n;U(function(i){if(i.g==1)return wp(e),A(i,YM(e,t),2);n=i.h,n.length?Ea(e,n):J("Unsupported HLS interstitial",t),ie(i)})}function XM(e,t){var n=Bt(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,o=n.attributes.loop=="true",s=Le(n,"z",In);if(i&&s!=0){var u={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920,y:1080}},a=Bt(n,"Viewport"),l=Bt(n,"TopLeft"),f=Bt(n,"Size");if(a&&l&&f){if(u=Le(a,"x",In),u==null||(a=Le(a,"y",In),a==null))return;var d=Le(l,"x",In);if(d==null||(l=Le(l,"y",In),l==null))return;var g=Le(f,"x",In);if(g==null||(f=Le(f,"y",In),f==null))return;u={viewport:{x:u,y:a},topLeft:{x:d,y:l},size:{x:g,y:f}}}f=Bt(n,"SqueezeCurrent"),n=null,f&&(f=Le(f,"percentage",Fu))&&(n={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*f,y:1080*f}}),Ea(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:o,overlay:u,displayOnBackground:s==-1,currentVideo:n,background:null}])}}h.addAdUrlInterstitial=function(e){var t=this,n,i,r,o,s,u,a,l,f;return U(function(d){switch(d.g){case 1:return n={type:12},A(d,Sp(t,e,n),2);case 2:if(i=d.h,r=bu(i,"VAST,vmap:VMAP"),!r)throw new _(2,10,10007);if(o=[],r.tagName=="VAST"){o=y1(r,t.o),d.s(3);break}if(r.tagName!="vmap:VMAP"){d.s(3);break}for(var g=[],m=v(nt(r,"vmap:AdBreak")),y=m.next();!y.done;y=m.next()){var x=y.value,S=x.attributes.timeOffset;S&&(y=null,S=="start"?y=0:S=="end"?y=1/0:y=Cs(S),(x=Bt(x,"vmap:AdSource"))&&(x=Bt(x,"vmap:AdTagURI"))&&(x=Gt(x))&&g.push({time:y,uri:x}))}s=v(g),u=s.next();case 5:if(u.done){d.s(3);break}return a=u.value,A(d,Sp(t,a.uri,n),8);case 8:if(l=d.h,f=bu(l,"VAST"),!f)throw new _(2,10,10007);o.push.apply(o,Q(y1(f,a.time))),u=s.next(),d.s(5);break;case 3:Ea(t,o),ie(d)}})};function Ea(e,t){var n,i,r,o,s,u,a,l;U(function(f){switch(f.g){case 1:n=!1,i=v(t),r=i.next();case 2:if(r.done){f.s(4);break}if(o=r.value,!o.uri){J("Missing URL in interstitial",o),f.s(3);break}if(o.mimeType){f.s(5);break}return ge(f,6),s=e.j.xb(),A(f,Zo(o.uri,s,e.H.getConfiguration().streaming.retryParameters),8);case 8:o.mimeType=f.h,Pe(f,5);break;case 6:Se(f);case 5:if(u=o.id||JSON.stringify(o),e.W.has(u)){f.s(3);break}o.loop&&!o.overlay&&J("Loop is only supported in overlay interstitials",o),o.overlay||(n=!0),e.W.add(u),e.G.add(o),a=!1,o.pre&&e.o==null?a=!0:o.startTime!=0||o.canJump?e.o!=null&&(l=o.startTime-e.o,0<l&&10>=l&&(a=!0)):a=!0,a&&(!e.C.has(o)&&E1(o)&&e.C.set(o,e.j.preload(o.uri,null,o.mimeType||void 0)),A1(e,o));case 3:r=i.next(),f.s(2);break;case 4:n&&Wc(e),KM(e),ie(f)}})}function Aa(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var i=0,r=null;if(e.G.size&&e.o!=null){var o=e.g.ended,s=Array.from(e.G).sort(function(f,d){return d.startTime-f.startTime}),u=s;for(u=t?s.filter(function(f){return f.pre}):o?s.filter(function(f){return f.post}):s.filter(function(f){return!f.pre&&!f.post}),s=v(u),u=s.next();!u.done;u=s.next()){u=u.value;var a=!1;if(t)a=u.pre;else if(o)a=u.post;else if(!u.pre&&!u.post){var l=e.o-Math.round(1e3*u.startTime)/1e3;0<l&&(1>=l||!u.canJump)&&(a=!(n==null&&e.u&&!e.u.pre&&!e.u.post&&e.u.startTime>=u.startTime))}a&&(!e.u||u.startTime>=e.u.startTime)&&(i==(n||0)?r=u:r&&!u.canJump&&.001<Math.round(1e3*u.startTime)/1e3-Math.round(1e3*r.startTime)/1e3&&(r=u,i=0),i++)}}return r}function Kc(e,t,n,i,r,o){o=o===void 0?0:o,e.u=t,yp(e),!e.h.parentElement&&e.A&&e.A.appendChild(e.h),i==1&&n==1&&(n=Array.from(e.G).filter(function(s){return t.pre?s.pre==t.pre:t.post?s.post==t.post:.001>Math.abs(s.startTime-t.startTime)}).length),t.once&&(o++,e.G.delete(t),vp(e),t.overlay||Wc(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?zM(e,t,n,i,o):J("Unsupported interstitial",t):e.B&&t.overlay?J("Unsupported interstitial",t):qM(e,t,n,i,r,o)}function zM(e,t,n,i,r){function o(){e.m&&(e.m.stop(),e.m=null),e.A.removeChild(a),Tp(e,t),e.i(new re("ad-stopped"));var g=Aa(e,t.pre,i-r);g?(e.l.Qa(),Kc(e,g,n,++i,Date.now(),r)):e.K=!1}var s=t.overlay,u=t.mimeType=="text/html"?"iframe":"img",a=document.createElement(u);a.style.objectFit="contain",a.style.position="absolute",a.style.border="none",x1(e,t),e.i(new re("ad-started",new Map().set("ad",new Ae(t,n,i)))),u=="iframe"?a.src=t.uri:(a.src=t.uri,a.onerror=function(g){e.i(new re("ad-error",new Map().set("originalEvent",g))),o()});var l=s.viewport,f=s.topLeft;s=s.size,l.x==0&&l.y==0?(a.width=t.overlay.size.x,a.height=t.overlay.size.y,a.style.bottom="10%",a.style.left="0",a.style.right="0",a.style.width="100%",t.overlay.size.y||u!="iframe"||(a.style.height="auto")):(a.style.height=s.y/l.y*100+"%",a.style.left=f.x/l.x*100+"%",a.style.top=f.y/l.y*100+"%",a.style.width=s.x/l.x*100+"%"),e.A.appendChild(a);var d=Date.now();e.m&&e.m.stop(),e.m=new Be(function(){t.playoutLimit&&(Date.now()-d)/1e3>t.playoutLimit?(e.i(new re("ad-complete")),o()):t.endTime&&e.g.currentTime>t.endTime?(e.i(new re("ad-complete")),o()):e.g.currentTime<t.startTime&&(e.i(new re("ad-skipped")),o())}),t.playoutLimit&&!t.endTime?e.m.da(t.playoutLimit):t.endTime&&e.m.ua(.025),e.l.D(e.g,"seeked",function(){var g=e.g.currentTime;(g<t.startTime||t.endTime&&g>t.endTime)&&(e.m&&e.m.stop(),e.i(new re("ad-skipped")),o())})}function qM(e,t,n,i,r,o){var s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D;U(function(k){switch(k.g){case 1:if(s=Date.now(),e.K=!0,!e.B||i!=1){k.s(2);break}return e.i(new re("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),u=new st,a=function(N){return U(function(j){if(j.g==1)return N.state!="detach"?j.s(0):Id()?A(j,new Promise(function(V){return new Be(V).da(.1)}),3):j.s(3);u.resolve(),e.l.Ja(e.H,"onstatechange",a),ie(j)})},e.l.D(e.H,"onstatechange",a),A(k,u,2);case 2:return x1(e,t),e.B||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,l=t.overlay.viewport,f=t.overlay.topLeft,d=t.overlay.size,e.h.style.height=d.y/l.y*100+"%",e.h.style.left=f.x/l.x*100+"%",e.h.style.top=f.y/l.y*100+"%",e.h.style.width=d.x/l.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),g=!1,m=function(){if(!e.B&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var N=Date.now();e.g.currentTime+=(N-r)/1e3,r=N}},y=function(N){var j,V;return U(function(F){if(F.g==1){if(m(),j=Aa(e,t.pre,i-o),N&&t.groupId)for(;j&&j.groupId==t.groupId;)i++,j=Aa(e,t.pre,i-o);return e.m&&(!t.groupId||j&&j.groupId!=t.groupId)&&(e.m.stop(),e.m=null),Tp(e,t),j&&!j.overlay?F.s(2):(t.post&&(e.o=null,e.u=null),e.B?A(F,e.j.detach(),4):A(F,e.j.kc(),4))}F.g!=2&&(e.B&&(V=t.resumeOffset,V==null&&(V=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.o||0):(Date.now()-r)/1e3),e.i(new re("ad-content-resume-requested",new Map().set("offset",V)))),e.i(new re("ad-stopped")),e.l.Qa(),e.K=!1,e.B?Wc(e):(e.h.style.display="none",m(),e.g.ended||e.g.play())),yp(e),j&&(e.i(new re("ad-stopped")),e.l.Qa(),Kc(e,j,n,++i,r,o)),ie(F)})},x=function(N){return U(function(j){return g?j.return():(g=!0,e.i(new re("ad-error",new Map().set("originalEvent",N))),A(j,y(!1),0))})},S=function(){return U(function(N){if(N.g==1)return g?N.return():(g=!0,A(N,y(!1),2));e.i(new re("ad-complete")),ie(N)})},e.ea=function(){return U(function(N){return g?N.return():(g=!0,e.i(new re("ad-skipped")),A(N,y(!0),0))})},E=new Ee(e.h,t,e.ea,n,i,!e.B),e.B||(E.setMuted(e.g.muted),E.setVolume(e.g.volume)),e.i(new re("ad-started",new Map().set("ad",E))),(M=E.canSkipNow())&&e.i(new re("ad-skip-state-changed")),e.l.ma(e.j,"error",x),e.l.D(e.h,"timeupdate",function(){if(e.h.duration){var N=E.canSkipNow();M!=N&&0<E.getRemainingTime()&&0<E.getDuration()&&e.i(new re("ad-skip-state-changed")),M=N}}),e.l.ma(e.j,"firstquartile",function(){m(),e.i(new re("ad-first-quartile"))}),e.l.ma(e.j,"midpoint",function(){m(),e.i(new re("ad-midpoint"))}),e.l.ma(e.j,"thirdquartile",function(){m(),e.i(new re("ad-third-quartile"))}),e.l.ma(e.j,"complete",S),e.l.D(e.h,"play",function(){e.i(new re("ad-resumed"))}),e.l.D(e.h,"pause",function(){var N=e.j.getConfiguration();e.h.currentTime>=N.playRangeEnd?S():e.i(new re("ad-paused"))}),e.l.D(e.h,"volumechange",function(){e.h.muted?e.i(new re("ad-muted")):e.i(new re("ad-volume-changed"))}),ge(k,4),wp(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(L=t.endTime-t.startTime,0<L&&e.j.configure("playRangeEnd",L)),t.playoutLimit&&!e.m&&(e.m=new Be(function(){e.ea()}).da(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),A(k,e.j.Lb(e.h),6);case 6:return e.C.has(t)?A(k,e.C.get(t),10):A(k,e.j.load(t.uri,null,t.mimeType||void 0),8);case 10:return P=k.h,e.C.delete(t),P?A(k,e.j.load(P),8):A(k,e.j.load(t.uri,null,t.mimeType||void 0),8);case 8:e.h.play(),b=(Date.now()-s)/1e3,e.i(new re("ads-loaded",new Map().set("loadTime",b))),e.B&&e.g.play(),t.overlay&&(e.l.D(e.g,"seeking",function(){var N=e.g.currentTime-t.startTime;.1<Math.abs(N-e.h.currentTime)&&(e.h.currentTime=N)}),e.l.D(e.g,"seeked",function(){var N=e.g.currentTime;(N<t.startTime||t.endTime&&N>t.endTime)&&e.ea()})),Pe(k,0);break;case 4:if(D=Se(k),!e.K)return k.return();x(D),ie(k)}})}function x1(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],o=n.topLeft.x/n.viewport.x*100;0<o&&100>=o&&(r.push("translateX("+o+"%)"),i=!1),o=n.topLeft.y/n.viewport.y*100,0<o&&100>=o&&(r.push("translateY("+o+"%)"),i=!1),o=n.size.x/n.viewport.x,1>o&&r.push("scaleX("+o+")"),n=n.size.y/n.viewport.y,1>o&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.A&&(e.A.style.pointerEvents="none",t.background&&(e.A.style.background=t.background)),e.F&&(e.F.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Tp(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.A&&(e.A.style.pointerEvents="",!t||t.background)&&(e.A.style.background=""),e.F&&(e.F.style.background="")}function YM(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me,he,et,Ve,Oe,Ue,Qe,Ne,Ge;return U(function(Re){switch(Re.g){case 1:if(n=[],!t||(i=t.values.find(function(je){return je.key=="X-ASSET-URI"}),r=t.values.find(function(je){return je.key=="X-ASSET-LIST"}),!i&&!r))return Re.return(n);if(o=null,(s=t.values.find(function(je){return je.key=="ID"}))&&(o=s.data),u=o==null?Math.floor(10*t.startTime)/10:t.startTime,(a=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(a=o==null?Math.floor(10*t.endTime)/10:t.endTime),l=t.values.find(function(je){return je.key=="X-RESTRICT"}),d=f=!0,l&&l.data&&(g=l.data,f=!g.includes("SKIP"),d=!g.includes("JUMP")),m=f?0:null,(y=t.values.find(function(je){return je.key=="X-ENABLE-SKIP-AFTER"}))&&(x=y.data,m=parseFloat(x),isNaN(m)&&(m=f?0:null)),S=null,(E=t.values.find(function(je){return je.key=="X-ENABLE-SKIP-FOR"}))&&(M=E.data,S=parseFloat(M),isNaN(m)&&(S=null)),L=null,(P=t.values.find(function(je){return je.key=="X-RESUME-OFFSET"}))&&(b=P.data,L=parseFloat(b),isNaN(L)&&(L=null)),D=null,(k=t.values.find(function(je){return je.key=="X-PLAYOUT-LIMIT"}))&&(N=k.data,D=parseFloat(N),isNaN(D)&&(D=null)),F=V=j=!1,(B=t.values.find(function(je){return je.key=="CUE"}))&&(H=B.data,j=H.includes("ONCE"),V=H.includes("PRE"),F=H.includes("POST")),G=!1,(z=t.values.find(function(je){return je.key=="X-TIMELINE-OCCUPIES"}))?(W=z.data,G=W.includes("RANGE")):!P&&e.H.U()&&(G=!V&&!F),i){if($=i.data,!$)return Re.return(n);n.push({id:o,groupId:null,startTime:u,endTime:a,uri:$,mimeType:null,isSkippable:f,skipOffset:m,skipFor:S,canJump:d,resumeOffset:L,playoutLimit:D,once:j,pre:V,post:F,timelineRange:G,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),Re.s(2);break}if(!r){Re.s(2);break}return te=r.data,te?(ge(Re,4),Me={type:11},A(Re,Sp(e,te,Me),6)):Re.return(n);case 6:for(he=Re.h,et=St(he),Ve=JSON.parse(et),(Oe=Ve["SKIP-CONTROL"])&&(Ue=Oe["ENABLE-SKIP-AFTER"],typeof Ue=="number"&&(m=parseFloat(Ue),isNaN(Ue)&&(m=f?0:null)),Qe=Oe["ENABLE-SKIP-FOR"],typeof Qe=="number"&&(S=parseFloat(Qe),isNaN(Qe)&&(S=null))),Ne=0;Ne<Ve.ASSETS.length;Ne++)Ge=Ve.ASSETS[Ne],Ge.URI&&n.push({id:o+"_shaka_asset_"+Ne,groupId:o,startTime:u,endTime:a,uri:Ge.URI,mimeType:null,isSkippable:f,skipOffset:m,skipFor:S,canJump:d,resumeOffset:L,playoutLimit:D,once:j,pre:V,post:F,timelineRange:G,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});Pe(Re,2);break;case 4:Se(Re);case 2:return Re.return(n)}})}function Wc(e){for(var t=[],n=v(e.G),i=n.next(),r={};!i.done;r={$b:void 0},i=n.next())i=i.value,i.overlay||(r.$b={start:i.startTime,end:null},i.pre?(r.$b.start=0,r.$b.end=null):i.post?(r.$b.start=-1,r.$b.end=null):i.timelineRange&&(r.$b.end=i.endTime),t.find(function(o){return function(s){return o.$b.start==s.start&&o.$b.end==s.end}}(r))||t.push(r.$b));e.i(new re("ad-cue-points-changed",new Map().set("cuepoints",t)))}function wp(e){e.j.configure(e.H.Vg()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),Zv(e.H.xb(),e.j.xb())}function Sp(e,t,n){var i,r,o;return U(function(s){return s.g==1?(i=qt([t],qi()),r=e.H.xb().request(7,i,n),A(s,r.promise,2)):(o=s.h,s.return(o.data))})}function E1(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function A1(e,t){if(!(e.L.has(t)||e.T&&!e.T.allowPreloadOnDomElements)){var n=function(o){var s=document.createElement("link");return s.rel="preload",s.href=o,s.as="image",document.head.appendChild(s),s},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.L.set(t,i)}}function I1(e,t){if(e.L.has(t)){var n=e.L.get(t);n=v(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.parentNode.removeChild(i);e.L.delete(t)}}function we(e,t,n,i,r){this.h=e,this.j=Cs(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.o=i,this.m=!1}h=we.prototype,h.needsSkipUI=function(){return!0},h.isClientRendering=function(){return!1},h.hasCustomClick=function(){return!1},h.isUsingAnotherMediaElement=function(){return!1},h.getDuration=function(){return this.h.durationInSeconds},h.getMinSuggestedDuration=function(){return this.getDuration()},h.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},h.isPaused=function(){return this.g.paused},h.isSkippable=function(){return typeof this.j=="number"},h.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},h.canSkipNow=function(){return this.getTimeUntilSkippable()==0},h.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},h.pause=function(){return this.g.pause()},h.play=function(){return this.g.play()},h.getVolume=function(){return this.g.volume},h.setVolume=function(e){this.g.volume=e},h.isMuted=function(){return this.g.muted},h.isLinear=function(){return this.o},h.resize=function(){},h.setMuted=function(e){this.g.muted=e},h.getSequenceLength=function(){return this.l?this.l:1},h.getPositionInSequence=function(){return this.i?this.i:1},h.getTitle=function(){return this.h.adTitle},h.getDescription=function(){return""},h.getVastMediaBitrate=function(){return 0},h.getVastMediaHeight=function(){return 0},h.getVastMediaWidth=function(){return 0},h.getAdId=function(){return this.h.adId},h.getCreativeAdId=function(){return this.h.creativeId},h.getAdvertiserName=function(){return""},h.getMediaUrl=function(){return null},h.getTimeOffset=function(){return 0},h.getPodIndex=function(){return 0},h.release=function(){this.l=this.i=this.g=this.h=null},R("shaka.ads.MediaTailorAd",we),we.prototype.release=we.prototype.release,we.prototype.getPodIndex=we.prototype.getPodIndex,we.prototype.getTimeOffset=we.prototype.getTimeOffset,we.prototype.getMediaUrl=we.prototype.getMediaUrl,we.prototype.getAdvertiserName=we.prototype.getAdvertiserName,we.prototype.getCreativeAdId=we.prototype.getCreativeAdId,we.prototype.getAdId=we.prototype.getAdId,we.prototype.getVastMediaWidth=we.prototype.getVastMediaWidth,we.prototype.getVastMediaHeight=we.prototype.getVastMediaHeight,we.prototype.getVastMediaBitrate=we.prototype.getVastMediaBitrate,we.prototype.getDescription=we.prototype.getDescription,we.prototype.getTitle=we.prototype.getTitle,we.prototype.getPositionInSequence=we.prototype.getPositionInSequence,we.prototype.getSequenceLength=we.prototype.getSequenceLength,we.prototype.setMuted=we.prototype.setMuted,we.prototype.resize=we.prototype.resize,we.prototype.isLinear=we.prototype.isLinear,we.prototype.isMuted=we.prototype.isMuted,we.prototype.setVolume=we.prototype.setVolume,we.prototype.getVolume=we.prototype.getVolume,we.prototype.play=we.prototype.play,we.prototype.pause=we.prototype.pause,we.prototype.skip=we.prototype.skip,we.prototype.canSkipNow=we.prototype.canSkipNow,we.prototype.getTimeUntilSkippable=we.prototype.getTimeUntilSkippable,we.prototype.isSkippable=we.prototype.isSkippable,we.prototype.isPaused=we.prototype.isPaused,we.prototype.getRemainingTime=we.prototype.getRemainingTime,we.prototype.getMinSuggestedDuration=we.prototype.getMinSuggestedDuration,we.prototype.getDuration=we.prototype.getDuration,we.prototype.isUsingAnotherMediaElement=we.prototype.isUsingAnotherMediaElement,we.prototype.hasCustomClick=we.prototype.hasCustomClick,we.prototype.isClientRendering=we.prototype.isClientRendering,we.prototype.needsSkipUI=we.prototype.needsSkipUI;function Ia(e,t,n,i){this.B=e,this.K=t,this.h=n,this.l=null,this.P=NaN,this.i=i,this.I=!1,this.A=null,this.j=[],this.M=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.o=new ke}Ia.prototype.stop=function(){for(var e=v(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ja(t.target,t.type,t.listener);ru(this),this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.A=null,this.j=[],this.M=[],this.F.clear()},Ia.prototype.release=function(){this.stop(),this.o&&this.o.release()},Ia.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(QM(this,this.G,this.O),this.O=!1)},Ia.prototype.getCuePoints=function(){for(var e=[],t=v(this.j),n=t.next();!n.done;n=t.next()){n=v(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function $M(e,t,n){var i,r,o,s,u,a,l,f,d,g,m,y;U(function(x){if(x.g==1)return i={type:7},r=qt([t],qi()),r.method="POST",n&&(o=JSON.stringify(n),r.body=ji(o)),s=e.K.request(7,r,i),ge(x,2),A(x,s.promise,4);if(x.g!=2){if(u=x.h,a=St(u.data),l=JSON.parse(a),l.manifestUrl&&l.trackingUrl)f=new _t(t),d=new _t(l.trackingUrl),e.G=f.resolve(d).toString(),g=Date.now()/1e3,m=g-e.P,e.i(new re("ads-loaded",new Map().set("loadTime",m))),y=new _t(l.manifestUrl),e.l.resolve(f.resolve(y).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return Pe(x,0)}if(Se(x),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,x.return();e.l.resolve(e.H),e.l=null,ie(x)})}function QM(e,t,n){var i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M;U(function(L){if(L.g==1)return i={type:8},r=qt([t],qi()),o=e.K.request(7,r,i),ge(L,2),A(L,o.promise,4);if(L.g!=2){if(s=L.h,u=[],a=St(s.data),l=JSON.parse(a),0<l.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,f=v(e.j),d=f.next();!d.done;d=f.next())for(g=d.value,m=v(g.nonLinearAdsList),y=m.next();!y.done;y=m.next())for(x=y.value,S=v(x.nonLinearAdList),E=S.next();!E.done;E=S.next())M=E.value,JM(e,M);u=e.getCuePoints(),e.i(new re("ad-cue-points-changed",new Map().set("cuepoints",u)))}}else e.j.length&&e.i(new re("ad-cue-points-changed",new Map().set("cuepoints",u))),ru(e),e.j=[];return n&&(e.I||0<u.length)&&ZM(e),Pe(L,0)}Se(L),ie(L)})}function JM(e,t){var n,i,r,o,s,u,a,l;U(function(f){if(f.g==1)return!t.staticResource||(n=M1(t),e.F.get(n))?f.return():(i={type:9},r=qt([t.staticResource],qi()),o=e.K.request(7,r,i),ge(f,2),e.F.set(n,[]),A(f,o.promise,4));if(f.g!=2)return s=f.h,u=St(s.data),a=JSON.parse(u),l=a.apps,e.F.set(n,l),Pe(f,0);Se(f),e.F.delete(n),ie(f)})}function M1(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function ZM(e){k1(e),e.I||(C1(e),e.o.D(e.h,"seeked",function(){C1(e)}),e.o.D(e.h,"ended",function(){ru(e)})),e.o.D(e.h,"timeupdate",function(){k1(e)})}function C1(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,i,r=v(e.j),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=v(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,!i)u.startTimeInSeconds<t&&(i=u,n=o);else if(u.startTimeInSeconds<t&&u.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=u,n=o;break}}n&&i&&!e.M.includes(i.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function k1(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.C,r=i.startTimeInSeconds+.5*i.durationInSeconds,o=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),Cn(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),Cn(e,"midpoint")):t>=o&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),Cn(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&0<i&&0<r&&Cn(e,"skipStateChanged"),0<r&&(0>=i||i>r)&&ru(e)}if(!e.g||!e.g.isLinear()){e:for(i=v(e.j),r=i.next();!r.done&&(r=r.value,!(e.g&&e.g.isLinear()));r=i.next())for(o=0;o<r.ads.length;o++){var s=r.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.M.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=u;break e}ru(e),e.L=r,e.g=new we(s,o+1,r.ads.length,!0,e.h),e.C=s,o===0&&Cn(e,"breakStart"),D1(e);break}}if(!e.g){for(i=v(e.j),r=i.next();!r.done&&(r=r.value,!e.g);r=i.next())for(o=0;o<r.nonLinearAdsList.length;o++)if(s=r.nonLinearAdsList[o],s.nonLinearAdList.length){u=r.startTimeInSeconds;var a=e.F.get(M1(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){ru(e),u=e,a=v(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.data.source.length){var f=document.createElement("img");f.src=l.data.source[0].url,f.style.top=(l.placeholder.top||0)+"%",f.style.height=100-(l.placeholder.top||0)+"%",f.style.left=(l.placeholder.left||0)+"%",f.style.maxWidth=100-(l.placeholder.left||0)+"%",f.style.objectFit="contain",f.style.position="absolute",u.B.appendChild(f)}e.L=r,e.g=new we(s,o+1,r.ads.length,!1,e.h),e.C=s,o===0&&Cn(e,"breakStart"),D1(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function ru(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.M.push(e.C.adId);var t=e.g.m;t!==void 0&&t?Cn(e,"skip"):Cn(e,"complete"),t=v(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ja(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Cn(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function D1(e){var t=!1;e.h.paused?t=!0:(Cn(e,"impression"),Cn(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Cn(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Cn(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Cn(e,"impression"),Cn(e,"start"),t=!1):Cn(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Cn(e,"pause")}});for(var n=v(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function Cn(e,t){var n=e.C.trackingEvents.find(function(o){return o.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(o){return o.eventType==t})),n){var i={type:10};n=v(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=qt([r],qi()),r.method="POST",e.K.request(7,r,i))}switch(t){case"impression":e.i(new re("ad-impression"));break;case"start":e.i(new re("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new re("ad-muted"));break;case"unmute":e.i(new re("ad-volume-changed"));break;case"resume":e.i(new re("ad-resumed"));break;case"pause":e.i(new re("ad-paused"));break;case"firstQuartile":e.i(new re("ad-first-quartile"));break;case"midpoint":e.i(new re("ad-midpoint"));break;case"thirdQuartile":e.i(new re("ad-third-quartile"));break;case"complete":e.i(new re("ad-complete")),e.i(new re("ad-stopped"));break;case"skip":e.i(new re("ad-skipped")),e.i(new re("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new re("ad-skip-state-changed"))}}function Ie(e,t){this.g=e,this.i=null,this.h=t}h=Ie.prototype,h.needsSkipUI=function(){return!0},h.isClientRendering=function(){return!1},h.hasCustomClick=function(){return!0},h.isUsingAnotherMediaElement=function(){return!1},h.getDuration=function(){return this.i?this.i.duration:-1},h.getMinSuggestedDuration=function(){return this.getDuration()},h.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},h.isPaused=function(){return this.h.paused},h.isSkippable=function(){return this.g.isSkippable()},h.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},h.canSkipNow=function(){return this.getTimeUntilSkippable()==0},h.skip=function(){this.h.currentTime+=this.getRemainingTime()},h.pause=function(){return this.h.pause()},h.play=function(){return this.h.play()},h.getVolume=function(){return this.h.volume},h.setVolume=function(e){this.h.volume=e},h.isMuted=function(){return this.h.muted},h.isLinear=function(){return!0},h.resize=function(){},h.setMuted=function(e){this.h.muted=e},h.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},h.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},h.getTitle=function(){return this.g.getTitle()},h.getDescription=function(){return this.g.getDescription()},h.getVastMediaBitrate=function(){return 0},h.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},h.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},h.getAdId=function(){return this.g.getAdId()},h.getCreativeAdId=function(){return this.g.getCreativeAdId()},h.getAdvertiserName=function(){return this.g.getAdvertiserName()},h.getMediaUrl=function(){return null},h.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},h.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},h.release=function(){this.h=this.i=this.g=null},R("shaka.ads.ServerSideAd",Ie),Ie.prototype.release=Ie.prototype.release,Ie.prototype.getPodIndex=Ie.prototype.getPodIndex,Ie.prototype.getTimeOffset=Ie.prototype.getTimeOffset,Ie.prototype.getMediaUrl=Ie.prototype.getMediaUrl,Ie.prototype.getAdvertiserName=Ie.prototype.getAdvertiserName,Ie.prototype.getCreativeAdId=Ie.prototype.getCreativeAdId,Ie.prototype.getAdId=Ie.prototype.getAdId,Ie.prototype.getVastMediaWidth=Ie.prototype.getVastMediaWidth,Ie.prototype.getVastMediaHeight=Ie.prototype.getVastMediaHeight,Ie.prototype.getVastMediaBitrate=Ie.prototype.getVastMediaBitrate,Ie.prototype.getDescription=Ie.prototype.getDescription,Ie.prototype.getTitle=Ie.prototype.getTitle,Ie.prototype.getPositionInSequence=Ie.prototype.getPositionInSequence,Ie.prototype.getSequenceLength=Ie.prototype.getSequenceLength,Ie.prototype.setMuted=Ie.prototype.setMuted,Ie.prototype.resize=Ie.prototype.resize,Ie.prototype.isLinear=Ie.prototype.isLinear,Ie.prototype.isMuted=Ie.prototype.isMuted,Ie.prototype.setVolume=Ie.prototype.setVolume,Ie.prototype.getVolume=Ie.prototype.getVolume,Ie.prototype.play=Ie.prototype.play,Ie.prototype.pause=Ie.prototype.pause,Ie.prototype.skip=Ie.prototype.skip,Ie.prototype.canSkipNow=Ie.prototype.canSkipNow,Ie.prototype.getTimeUntilSkippable=Ie.prototype.getTimeUntilSkippable,Ie.prototype.isSkippable=Ie.prototype.isSkippable,Ie.prototype.isPaused=Ie.prototype.isPaused,Ie.prototype.getRemainingTime=Ie.prototype.getRemainingTime,Ie.prototype.getMinSuggestedDuration=Ie.prototype.getMinSuggestedDuration,Ie.prototype.getDuration=Ie.prototype.getDuration,Ie.prototype.isUsingAnotherMediaElement=Ie.prototype.isUsingAnotherMediaElement,Ie.prototype.hasCustomClick=Ie.prototype.hasCustomClick,Ie.prototype.isClientRendering=Ie.prototype.isClientRendering,Ie.prototype.needsSkipUI=Ie.prototype.needsSkipUI;function R1(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new ke,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new re("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){eC(r,o)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.B.length?r.j.resolve(r.B):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),r.m=new Ie(o,r.l),r.A&&(r.m.i=r.A),r.i(new re("ad-started",new Map().set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var o=r.l.currentTime;r.o&&r.o>o&&(r.l.currentTime=r.o,r.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){r.A=o.getStreamData().adProgressData,r.m&&(r.m.i=r.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new re("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new re("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new re("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new re("ad-complete")),r.i(new re("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new re("ad-skipped")),r.i(new re("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=v(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});r.C=o,r.i(new re("ad-cue-points-changed",new Map().set("cuepoints",o)))})}h=R1.prototype,h.configure=function(){},h.stop=function(){this.B="",this.o=null,this.C=[]},h.release=function(){this.stop(),this.h&&this.h.release()},h.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},h.getCuePoints=function(){return this.C};function eC(e,t){e.i(new re("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function de(){ut.call(this),this.h=this.i=this.j=this.g=null,this.m=new v1,this.o=navigator.language,this.l=null}At(de,ut),h=de.prototype,h.setLocale=function(e){this.o=e},h.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},h.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new S1(e,t,n,function(r){return Xc(i,r)}),this.g.configure(this.l)},h.initClientSide=function(e,t,n){var i=this;if(!w.google||!google.ima||!google.ima.AdsLoader)throw new _(2,10,1e4);this.j&&this.j.release(),this.j=new Vc(e,t,this.o,n,function(r){return Xc(i,r)}),this.j.configure(this.l)},h.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),ut.prototype.release.call(this)},h.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new re("ad-stopped")),this.dispatchEvent(new re("ad-content-attach-requested")),this.m=new v1},h.requestClientSideAds=function(e){if(!this.j)throw new _(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},h.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new _(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},h.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new Ia(e,t,n,function(r){return Xc(i,r)})},h.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new _(1,10,10005);var i=this.i;return n=n===void 0?"":n,i.l?e=Promise.reject(new _(1,10,10004)):(i.l=new st,$M(i,e,t),i.H=n||"",i.P=Date.now()/1e3,e=i.l),e},h.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new _(1,10,10005);var t=this.i;t.G=e,t.i(new re("ads-loaded",new Map().set("loadTime",0)))},h.initServerSide=function(e,t){var n=this;if(!w.google||!google.ima||!google.ima.dai)throw new _(2,10,10002);this.h&&this.h.release(),this.h=new R1(e,t,this.o,function(i){return Xc(n,i)}),this.h.configure(this.l)},h.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new _(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&J('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.14.9",n=this.h,n.j?e=Promise.reject(new _(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new st,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},h.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new _(1,10,10003);(e.mpt||e.mpv)&&J('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.14.9",this.h.g.replaceAdTagParameters(e)},h.getServerSideCuePoints=function(){return Ye("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},h.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},h.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:BM(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},h.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},h.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},h.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},h.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},h.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&WM(this.g,n))},h.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if(i=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||i=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",i=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||i)){for(var r=n.startTime,o=n.endTime,s=null,u=0,a,l=v(n.eventNode.children),f=l.next();!f.done;f=l.next())if(f=f.value,f.tagName=="AlternativeMPD"){if(f=f.attributes.uri){a=f;break}}else if(f.tagName=="InsertPresentation"||f.tagName=="ReplacePresentation"){var d=f.attributes.url;if(d){a=d,(l=Le(f,"maxDuration",In))&&(s=l/n.timescale),(l=Le(f,"returnOffset",In))&&(u=l/n.timescale),t&&u&&(o=r+u);break}}a&&Ea(e,[{id:n.id,groupId:null,startTime:r,endTime:o,uri:a,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?u:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else(i=="urn:mpeg:dash:event:2012"||i=="urn:scte:dash:scte214-events")&&n.eventNode&&Bt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&XM(this.g,n))}},h.addCustomInterstitial=function(e){if(!this.g)throw new _(1,10,10006);Ea(this.g,[e])},h.addAdUrlInterstitial=function(e){if(!this.g)throw new _(1,10,10006);return this.g.addAdUrlInterstitial(e)},h.getInterstitialPlayer=function(){if(!this.g)throw new _(1,10,10006);return this.g.If()};function Xc(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}R("shaka.ads.AdManager",de),de.prototype.getInterstitialPlayer=de.prototype.getInterstitialPlayer,de.prototype.addAdUrlInterstitial=de.prototype.addAdUrlInterstitial,de.prototype.addCustomInterstitial=de.prototype.addCustomInterstitial,de.prototype.onDASHInterstitialMetadata=de.prototype.onDASHInterstitialMetadata,de.prototype.onHLSInterstitialMetadata=de.prototype.onHLSInterstitialMetadata,de.prototype.onCueMetadataChange=de.prototype.onCueMetadataChange,de.prototype.onHlsTimedMetadata=de.prototype.onHlsTimedMetadata,de.prototype.onDashTimedMetadata=de.prototype.onDashTimedMetadata,de.prototype.onManifestUpdated=de.prototype.onManifestUpdated,de.prototype.getStats=de.prototype.getStats,de.prototype.getCuePoints=de.prototype.getCuePoints,de.prototype.getServerSideCuePoints=de.prototype.getServerSideCuePoints,de.prototype.replaceServerSideAdTagParameters=de.prototype.replaceServerSideAdTagParameters,de.prototype.requestServerSideStream=de.prototype.requestServerSideStream,de.prototype.initServerSide=de.prototype.initServerSide,de.prototype.addMediaTailorTrackingUrl=de.prototype.addMediaTailorTrackingUrl,de.prototype.requestMediaTailorStream=de.prototype.requestMediaTailorStream,de.prototype.initMediaTailor=de.prototype.initMediaTailor,de.prototype.updateClientSideAdsRenderingSettings=de.prototype.updateClientSideAdsRenderingSettings,de.prototype.requestClientSideAds=de.prototype.requestClientSideAds,de.prototype.onAssetUnload=de.prototype.onAssetUnload,de.prototype.release=de.prototype.release,de.prototype.initClientSide=de.prototype.initClientSide,de.prototype.initInterstitial=de.prototype.initInterstitial,de.prototype.configure=de.prototype.configure,de.prototype.setLocale=de.prototype.setLocale,de.ADS_LOADED="ads-loaded",de.AD_STARTED="ad-started",de.AD_FIRST_QUARTILE="ad-first-quartile",de.AD_MIDPOINT="ad-midpoint",de.AD_THIRD_QUARTILE="ad-third-quartile",de.AD_COMPLETE="ad-complete",de.AD_STOPPED="ad-stopped",de.AD_SKIPPED="ad-skipped",de.AD_VOLUME_CHANGED="ad-volume-changed",de.AD_MUTED="ad-muted",de.AD_PAUSED="ad-paused",de.AD_RESUMED="ad-resumed",de.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",de.CUEPOINTS_CHANGED="ad-cue-points-changed",de.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",de.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",de.AD_CLICKED="ad-clicked",de.AD_PROGRESS="ad-progress",de.AD_BUFFERING="ad-buffering",de.AD_IMPRESSION="ad-impression",de.AD_DURATION_CHANGED="ad-duration-changed",de.AD_CLOSED="ad-closed",de.AD_LOADED="ad-loaded",de.ALL_ADS_COMPLETED="all-ads-completed",de.AD_LINEAR_CHANGED="ad-linear-changed",de.AD_METADATA="ad-metadata",de.AD_RECOVERABLE_ERROR="ad-recoverable-error",de.AD_ERROR="ad-error",de.AD_BREAK_READY="ad-break-ready",de.AD_INTERACTION="ad-interaction",de.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",de.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",de.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Bc=function(){return new de};function P1(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof re){var i={};for(r in n)(t=n[r])&&typeof t=="object"?r=="detail"&&(i[r]=t):r in Event||(i[r]=t);return i}if(n instanceof Error){var r=new Set(["name","message","stack"]);for(i in n)r.add(i);for(i=v(Object.getOwnPropertyNames(n)),t=i.next();!t.done;t=i.next())r.add(t.value);for(i={},r=v(r),t=r.next();!t.done;t=r.next())t=t.value,i[t]=n[t];n={__type__:"Error",contents:i}}else if(n instanceof TimeRanges){for(r={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=v(Rr(n)),i=n.next();!i.done;i=n.next())i=i.value,t=i.end,r.start.push(i.start),r.end.push(t);n=r}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function xp(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=tC(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n;return i})}function tC(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var L1="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),nC="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Ep=["loop","playbackRate"],iC=["pause","play"],Ap=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("getImageTracks",2).set("getThumbnails",2).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),Ip=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getTextTracks",2).set("getVariantTracks",2),_1=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),N1=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],j1=[["isTextTrackVisible","setTextTrackVisibility"]],rC="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure configurationForLowLatency getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),oC=["attach","attachCanvas","detach","load","unload"];function Mp(e,t,n,i,r,o,s){var u=this;this.G=e,this.K=s,this.l=new Be(t),this.L=n,this.u=!1,this.A=i,this.F=r,this.M=o,this.i=this.m=!1,this.I="",this.o=null,this.B=function(){return Cp(u)},this.C=function(a,l){switch(a=xp(l),a.type){case"event":var f=a.targetName,d=Jv(a.event);u.A(f,d);break;case"update":f=a.update;for(d in f){a=u.g[d]||{};for(var g in f[d])a[g]=f[d][g]}u.u&&(u.L(),u.u=!1);break;case"asyncComplete":if(d=a.id,g=a.error,a=u.h.get(d),u.h.delete(d),a)if(g){d=new _(g.severity,g.category,g.code);for(f in g)d[f]=g[f];a.reject(d)}else a.resolve()}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,Ca.add(this)}h=Mp.prototype,h.destroy=function(){return Ca.delete(this),kp(this),Vi&&U1(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.i=this.m=!1,this.C=this.B=this.j=this.h=this.g=this.o=null,Promise.resolve()},h.qb=function(){return this.i},h.ag=function(){return this.I},h.init=function(){if(this.G.length)if(w.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.sb();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=v(Ca),i=n.next();!i.done;i=n.next()){i=i.value;var r=t;i.j=new st,i.u=!0,zc(i,r)}},function(t){for(var n=v(Ca),i=n.next();!i.done;i=n.next())i=i.value,qc=t=="available",i.l.sb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),qc&&this.l.da(uC),(e=Vi)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new st,this.u=!0,zc(this,e)):Vi=null}else w.__onGCastApiAvailable!==b1&&(Yc=w.__onGCastApiAvailable||null,w.__onGCastApiAvailable=b1)},h.ig=function(e){this.o=e,this.i&&Ma(this,{type:"appData",appData:this.o})},h.cast=function(){var e=this;return U(function(t){if(!e.m)throw new _(1,8,8e3);if(!qc)throw new _(1,8,8001);if(e.i)throw new _(1,8,8002);return e.j=new st,chrome.cast.requestSession(function(n){return zc(e,n)},function(n){return O1(e,n)}),A(t,e.j,0)})};function sC(e){e.i&&chrome.cast.requestSession(function(t){return zc(e,t)},function(t){return O1(e,t)})}h.Pc=function(){if(this.i){if(kp(this),Vi){U1(this);try{Vi.stop(function(){},function(){})}catch{}Vi=null}Cp(this)}},h.get=function(e,t){var n=this;if(e=="video"){if(iC.includes(t))return function(){return n.oh.apply(n,[e,t].concat(Q(tn.apply(0,arguments))))}}else if(e=="player"){if(_1.has(t)&&!this.get("player","isLive")())return function(){};if(rC.includes(t))return function(){return n.oh.apply(n,[e,t].concat(Q(tn.apply(0,arguments))))};if(oC.includes(t))return function(){return n.pj.apply(n,[e,t].concat(Q(tn.apply(0,arguments))))};if(Ap.has(t)||Ip.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},h.set=function(e,t,n){this.g[e][t]=n,Ma(this,{type:"set",targetName:e,property:t,value:n})};function zc(e,t){var n=e.M();Vi=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Cp(e),Ma(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function O1(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new _(2,8,n,t))}h.oh=function(e,t){Ma(this,{type:"call",targetName:e,methodName:t,args:tn.apply(2,arguments)})},h.pj=function(e,t){var n=tn.apply(2,arguments),i=new st,r=this.H.toString();this.H++,this.h.set(r,i);try{Ma(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(o){i.reject(o)}return i};function U1(e){var t=Vi;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Cp(e){var t=Vi?Vi.status=="connected":!1;if(e.i&&!t){e.F();for(var n in e.g)e.g[n]={};kp(e)}e.i=t,e.I=t?Vi.receiver.friendlyName:"",e.l.sb()}function kp(e){if(e.h)for(var t=v(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new _(1,7,7e3))}}function Ma(e,t){t=P1(t);var n=Vi;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Xe)}catch(i){throw t=new _(2,8,8005,i),n=new re("error",new Map().set("detail",t)),e.A("player",n),e.Pc(),t}}var uC=.02,qc=!1,Vi=null,Yc=null,Ca=new Set;function b1(e){if(Yc?w.__onGCastApiAvailable=Yc:delete w.__onGCastApiAvailable,Yc=null,e)for(var t=v(Ca),n=t.next();!n.done;n=t.next())n.value.init();typeof w.__onGCastApiAvailable=="function"&&w.__onGCastApiAvailable(e)}function Kt(e,t,n,i){i=i===void 0?!1:i,ut.call(this);var r=this;this.i=e,this.h=t,this.m=this.o=this.l=this.u=this.j=null,this.C=n,this.B=i,this.A=new Map,this.g=null,w.chrome?(this.g=new Mp(n,function(){return V1(r)},function(){return H1(r)},function(o,s){return K1(r,o,s)},function(){return G1(r)},function(){return B1(r)},i),aC(this)):(this.j=this.i,this.u=this.h)}At(Kt,ut),h=Kt.prototype,h.destroy=function(e){return this.g&&e&&this.g.Pc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,ut.prototype.release.call(this),Promise.all(e)},h.Li=function(){return this.j},h.If=function(){return this.u},h.Xh=function(){return this.g?this.g.m&&qc:!1},h.qb=function(){return this.g?this.g.qb():!1},h.ag=function(){return this.g?this.g.ag():""},h.cast=function(){var e=this;return U(function(t){return t.g==1?e.g?A(t,e.g.cast(),2):t.return():e.h?A(t,e.h.kc(),0):t.return()})},h.ig=function(e){this.g&&this.g.ig(e)},h.Ej=function(){this.g&&sC(this.g)},h.Pc=function(){this.g&&this.g.Pc()},h.Yh=function(e,t){t=t===void 0?!1:t;var n=this;return U(function(i){if(i.g==1)return e==n.C&&t==n.B||(n.C=e,n.B=t,!n.g)?i.return():(n.g.Pc(),A(i,n.g.destroy(),2));n.g=null,n.g=new Mp(e,function(){return V1(n)},function(){return H1(n)},function(r,o){return K1(n,r,o)},function(){return G1(n)},function(){return B1(n)},t),n.g.init(),ie(i)})};function aC(e){e.g.init(),e.m=new ke;for(var t=v(L1),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(o){e.g.qb()||(o=Jv(o),e.l.dispatchEvent(o))});for(var i in Xl)e.m.D(e.h,Xl[i],function(o){e.g.qb()||e.o.dispatchEvent(o)});e.j={},t={};for(var r in e.i)t={wd:t.wd},t.wd=r,Object.defineProperty(e.j,t.wd,{configurable:!1,enumerable:!0,get:function(o){return function(){return cC(e,o.wd)}}(t),set:function(o){return function(s){var u=o.wd;e.g.qb()?e.g.set("video",u,s):e.i[u]=s}}(t)});e.u={},F1(e,function(o){Object.defineProperty(e.u,o,{configurable:!1,enumerable:!0,get:function(){return fC(e,o)}})}),lC(e),e.l=new ut,e.l.Ge=e.j,e.o=new ut,e.o.Ge=e.u}function lC(e){var t=new Map;F1(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.A.set(n,i):e.A.set(i,n)):t.set(i,n)})}function F1(e,t){function n(a){return a=="constructor"||typeof i[a]!="function"?!1:!r.has(a)}var i=e.h,r=new Set,o;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=v(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(r.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function B1(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Qc(),startTime:null};e.i.pause();for(var n=v(Ep),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=v(N1),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=v(j1),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function V1(e){var t=new re("caststatuschanged");e.dispatchEvent(t)}function H1(e){var t=new re(e.j.paused?"pause":"play");e.l.dispatchEvent(t)}function G1(e){for(var t=v(N1),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var s;(i=e.g.get("player","getTextTracks")())&&i.length&&(s=i.find(function(l){return l.active}));var u=e.g.get("player","isTextTrackVisible")();r&&(e.i.autoplay=!1,t=e.h.load(r,n));var a={};for(n=v(Ep),i=n.next();!i.done;i=n.next())i=i.value,a[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var l=v(Ep),f=l.next();!f.done;f=l.next())f=f.value,e.i[f]=a[f];for(l=v(j1),f=l.next();!f.done;f=l.next()){var d=f.value;f=d[1],d=e.g.get("player",d[0])(),e.h[f](d)}e.h.zh(u),s&&e.h.hg(s.language,s.roles,s.forced),e.i.autoplay=o,r&&e.i.play()}},function(l){l=new Map().set("detail",l),l=new re("error",l),e.h.dispatchEvent(l)})}function cC(e,t){if(t=="addEventListener")return function(i,r,o){return e.l.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.l.removeEventListener(i,r,o)};if(e.g.qb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.qb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function fC(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,i,r){return e.o.addEventListener(n,i,r)};if(t=="removeEventListener")return function(n,i,r){return e.o.removeEventListener(n,i,r)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.xb()};if(t=="getDrmEngine")return function(){return e.h.C};if(t=="getAdManager")return function(){return e.h.Pg()};if(t=="setVideoContainer")return function(n){return e.h.Ch(n)};if(e.g.qb()){if(t=="getManifest"||t=="drmInfo")return function(){return J(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return J(t+"() does not work while casting!"),Promise.resolve()}}return e.g.qb()&&Object.keys(e.g.g.video).length==0&&(Ap.has(t)||Ip.has(t))||!e.g.qb()?e.h[t].bind(e.h):e.g.get("player",t)}function K1(e,t,n){e.g.qb()&&(t=="video"?e.l.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}R("shaka.cast.CastProxy",Kt),Kt.prototype.changeReceiverId=Kt.prototype.Yh,Kt.prototype.forceDisconnect=Kt.prototype.Pc,Kt.prototype.suggestDisconnect=Kt.prototype.Ej,Kt.prototype.setAppData=Kt.prototype.ig,Kt.prototype.cast=Kt.prototype.cast,Kt.prototype.receiverName=Kt.prototype.ag,Kt.prototype.isCasting=Kt.prototype.qb,Kt.prototype.canCast=Kt.prototype.Xh,Kt.prototype.getPlayer=Kt.prototype.If,Kt.prototype.getVideo=Kt.prototype.Li,Kt.prototype.destroy=Kt.prototype.destroy;function mn(e,t,n,i){ut.call(this);var r=this;this.g=e,this.h=t,this.j=new ke,this.H={video:e,player:t},this.F=n||function(){},this.I=i||function(o){return o},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.u=this.l=null,this.C=new Be(function(){Dp(r)}),dC(this)}At(mn,ut),h=mn.prototype,h.isConnected=function(){return this.G},h.Si=function(){return this.o},h.Bj=function(e){this.i=e},h.bi=function(){this.i=null},h.Cj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},h.Aj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},h.zj=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},h.destroy=function(){var e=this,t,n;return U(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.u=null,ut.prototype.release.call(e),A(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),ie(i)})};function dC(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return W1(e)},t.onSenderDisconnected=function(){return W1(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&jr(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),jr(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(r){return gC(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return pC(e,r)},t.start(),t=v(L1);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(r){return X1(e,"video",r)});for(var i in Xl)e.j.D(e.h,Xl[i],function(r){return X1(e,"player",r)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,ou(e)}),e.j.D(e.g,"playing",function(){e.o=!1,ou(e)}),e.j.D(e.g,"pause",function(){ou(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,ou(e)}),e.j.D(e.g,"ended",function(){new Be(function(){e.g&&e.g.ended&&(e.o=!0,ou(e))}).da(vC)})}function W1(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,ou(e)}function ou(e){var t;U(function(n){if(n.g==1)return A(n,Promise.resolve(),2);if(!e.h)return n.return();t=new re("caststatuschanged"),e.dispatchEvent(t),z1(e)||Or(e),ie(n)})}function hC(e,t,n){var i,r,o,s,u,a,l,f,d,g;U(function(m){switch(m.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.F(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ge(m,5),A(m,e.h.load(t.manifest,t.startTime),7)):A(m,Promise.resolve(),3);case 7:Pe(m,3);break;case 5:return s=Se(m),u=new Map().set("detail",s),a=new re("error",u),e.h&&e.h.dispatchEvent(a),m.return();case 3:if(!e.h)return m.return();for(l in t.video)f=t.video[l],e.g[l]=f;for(d in t.playerAfterLoad)g=t.playerAfterLoad[d],e.h[d](g);e.g.autoplay=o,t.manifest&&(e.g.play(),Or(e)),ie(m)}})}function X1(e,t,n){e.h&&(Dp(e),jr(e,{type:"event",targetName:t,event:n},e.l))}function Dp(e){e.C.da(mC);for(var t={video:{},player:{}},n=v(nC),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];e.h.U()&&_1.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.h[o]())}),Ap.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.h[o]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),jr(e,{type:"update",update:t},e.l),Ip.forEach(function(r,o){e.m%r==0&&(r={player:{}},r.player[o]=e.h[o](),jr(e,{type:"update",update:r},e.l))}),e.B&&(e.m+=1),z1(e)}function z1(e){return e.A&&(e.g.duration||e.h.U())?(Rp(e),e.A=!1,!0):!1}function Rp(e,t){var n={contentId:e.h.Qc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Or(e,t===void 0?0:t,n)}function pC(e,t){var n=xp(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,hC(e,n.initState,n.appData),Dp(e);break;case"appData":e.F(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":i=e.H[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.B=!1);var o=n.id,s=t.senderId;t=e.H[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return q1(e,s,o,null)},function(u){return q1(e,s,o,u)})}}function gC(e,t){var n=xp(t.data);switch(n.type){case"PLAY":e.g.play(),Or(e);break;case"PAUSE":e.g.pause(),Or(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.g.play(),Or(e)):i&&i=="PLAYBACK_PAUSE"&&(e.g.pause(),Or(e));break;case"STOP":e.h.kc().then(function(){e.h&&Or(e)});break;case"GET_STATUS":Rp(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.g.volume,o=e.g.muted;t!=null&&(e.g.volume=Number(t)),i!=null&&(e.g.muted=i),r==e.g.volume&&o==e.g.muted||Or(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,i=n.currentTime,r=e.I(t.contentId),o=n.autoplay||!0,e.F(t.customData),o&&(e.g.autoplay=!0),e.h.load(r,i).then(function(){e.h&&Rp(e)}).catch(function(s){var u="LOAD_FAILED";s.category==7&&s.code==7e3&&(u="LOAD_CANCELLED"),jr(e,{requestId:Number(n.requestId),type:u},e.u)});break;default:jr(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function q1(e,t,n,i){e.h&&jr(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function jr(e,t,n,i){e.G&&(e=P1(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Or(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?yC:e.h.Of()?wC:e.g.paused?SC:TC,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),jr(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}R("shaka.cast.CastReceiver",mn),mn.prototype.destroy=mn.prototype.destroy,mn.prototype.setContentArtist=mn.prototype.zj,mn.prototype.setContentImage=mn.prototype.Aj,mn.prototype.setContentTitle=mn.prototype.Cj,mn.prototype.clearContentMetadata=mn.prototype.bi,mn.prototype.setContentMetadata=mn.prototype.Bj,mn.prototype.isIdle=mn.prototype.Si,mn.prototype.isConnected=mn.prototype.isConnected;var mC=.5,vC=5,yC="IDLE",TC="PLAYING",wC="BUFFERING",SC="PAUSED";function Y1(e,t,n,i,r){if(i>=r)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(P){return P!=null&&P.g.trim()!=""})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(P){return P!=null&&P.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,l="white",f="black",d=Pp(i,r,u,a,l,f);o<=s;o++){for(var g=n[o],m=-1,y=-1,x=0;x<g.length;x++)if(g[x]!=null&&g[x].g.trim()!==""){m=x;break}for(x=g.length-1;0<=x;x--)if(g[x]!=null&&g[x].g.trim()!==""){y=x;break}if(m===-1||y===-1)g=$1(i,r),e.nestedCues.push(g);else{for(;m<=y;m++)if(x=g[m]){var S=x.l,E=x.i,M=x.j,L=x.h;(S!=u||E!=a||M!=l||L!=f)&&(d.payload&&e.nestedCues.push(d),d=Pp(i,r,S,E,M,L),u=S,a=E,l=M,f=L),d.payload+=x.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),o!==s&&(d=$1(i,r),e.nestedCues.push(d)),d=Pp(i,r,u,a,l,f)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Pp(e,t,n,i,r,o){return e=new mt(e,t,""),n&&e.textDecoration.push(Er),i&&(e.fontStyle=Ds),e.color=r,e.backgroundColor=o,e}function $1(e,t){return e=new mt(e,t,""),e.lineBreak=!0,e}function Q1(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function Lp(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.A=null,ka(this)}function $c(e,t,n){var i="CC"+((e.C<<1|e.B)+1),r=new mt(t,n,"");r.lineInterpretation=1;var o=eT.get(e.g);return o&&(r.line=o),e.u!=null&&e.A!=null&&(r.position=10+Math.min(70,10*e.u)+2.5*e.A),(t=Y1(r,i,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(o=eT.get(e.g+3-t.cue.nestedCues.length))&&(r.line=o),t}function ka(e){Ur(e,0,15),e.g=1}function su(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case 0:i=Z1.has(n)?Z1.get(n):String.fromCharCode(n);break;case 1:i=xC.get(n);break;case 2:e.i[e.g].pop(),i=EC.get(n);break;case 3:e.i[e.g].pop(),i=AC.get(n)}i&&e.i[e.g].push(new Q1(i,e.m,e.j,e.o,e.l))}}function J1(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(o){return o});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(o){return o})}function Ur(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Z1=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),xC=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),EC=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),AC=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),eT=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Qc(e,t){this.h=0,this.o=new Lp(e,t),this.i=new Lp(e,t),this.g=this.j=new Lp(e,t),this.l=0,this.m=null}function _p(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==3&&e.h!==4&&(r=$c(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Ur(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Ur(n,0,15),i.g=15),e.h=3,i.h=t,r}function tT(e){e.h=1,e.g=e.j,e.g.h=0}function nT(e){ue("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var IC="black green blue cyan red yellow magenta black".split(" "),iT="white green blue cyan red yellow magenta white_italics".split(" ");function Np(e,t){this.I=t,this.M=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.u="black",jp(this)}function jp(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Op())}function Op(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function fo(e,t){rT(e)&&(e.i[e.h][e.g]=new Q1(t,e.C,e.A,e.u,e.B),e.g++)}function rT(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}Np.prototype.isVisible=function(){return this.l};function MC(e){for(var t=0,n=1;16>n;n++,t++)e.i[t]=e.i[n];for(n=0;1>n;n++,t++)e.i[t]=Op()}function ns(e,t,n){var i=new mt(e.j,t,"");i.textAlign=e.F===0?"left":e.F===1?"right":rr;var r=i.region;switch(e.I&&(r.id+="svc"+e.I),r.id+="win"+e.M,r.height=e.o,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.H,r.viewportAnchorY=e.L,r.viewportAnchorUnits=e.K?Wn:2,e.G){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=Y1(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Np.prototype.display=function(){this.l=!0};function CC(){this.i=[],this.h=null,this.g=0}function kC(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Da(e.h)),e.h=null,e.g=0))}function Da(e){this.g=0,this.h=e}Da.prototype.ta=function(){return this.g<this.h.length},Da.prototype.Ba=function(){return this.g};function Yt(e){if(!e.ta())throw new _(2,2,3e3);return e.h[e.g++]}Da.prototype.skip=function(e){if(this.g+e>this.h.length)throw new _(2,2,3e3);this.g+=e},Da.prototype.qh=function(e){if(0>this.g-e)throw new _(2,2,3e3);this.g-=e};function DC(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function RC(e,t,n,i){if(!e.g)return[];if(n==24)return n=Yt(t).value,i=Yt(t).value,n=function(o){return o.map(function(s){return("0"+(s&255).toString(16)).slice(-2)}).join("")}([n,i]),fo(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!rT(t)||0>=t.g&&0>=t.h||(0>=t.g?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=ns(t,i,e.i)),t.h+1>=t.o?MC(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=ns(t,i,e.i)),t.i[t.h]=Op(),t.g=0;break;case 12:t.isVisible()&&(r=ns(t,i,e.i)),jp(t),t.h=0,t.g=0}return r?[r]:[]}function PC(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=Yt(t).value,t=[],n=v(Ra(e,n));for(var r=n.next();!r.done;r=n.next()){if(r=e.h[r.value],r.isVisible()){var o=ns(r,i,e.i);o&&t.push(o)}jp(r)}return t}if(n===137)for(t=Yt(t).value,t=v(Ra(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.display();else{if(n===138){for(n=Yt(t).value,t=null,n=v(Ra(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=ns(r,i,e.i)),r.l=!1;return t?[t]:[]}if(n===139){for(n=Yt(t).value,t=null,n=v(Ra(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=ns(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(n===140)return t=Yt(t).value,oT(e,t,i);if(n===143)return i=oT(e,255,i),sT(e),i;if(n===144)t.skip(1),i=Yt(t).value,e.g&&(e.g.A=0<(i&128),e.g.C=0<(i&64));else if(n===145)i=Yt(t).value,n=Yt(t).value,t.skip(1),e.g&&(t=uT((n&48)>>4,(n&12)>>2,n&3),e.g.B=uT((i&48)>>4,(i&12)>>2,i&3),e.g.u=t);else if(n===146)i=Yt(t).value,t=Yt(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=Yt(t).value,t.skip(1),e.g&&(e.g.F=i&3);else if(152<=n&&159>=n){n=(n&15)-8,r=e.h[n]!==null,r||(o=new Np(n,e.i),o.j=i,e.h[n]=o),i=Yt(t).value,o=Yt(t).value;var s=Yt(t).value,u=Yt(t).value,a=Yt(t).value;t=Yt(t).value,r&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.u="black"),t=e.h[n],t.l=0<(i&32),t.L=o&127,t.H=s,t.G=(u&240)>>4,t.K=0<(o&128),t.o=(u&15)+1,t.m=(a&63)+1,e.g=e.h[n]}}}return[]}function Ra(e,t){for(var n=[],i=0;8>i;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function oT(e,t,n){var i=[];t=v(Ra(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=e.h[r];o.isVisible()&&(o=ns(o,n,e.i))&&i.push(o),e.h[r]=null}return i}function sT(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function uT(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],LC[e<<2|t<<1|n]}var aT=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),LC="black blue green cyan red magenta yellow white".split(" ");function uu(){this.h=[],this.g=[],this.i=new CC,this.l=0,this.m=new Map([["CC1",new Qc(0,0)],["CC2",new Qc(0,1)],["CC3",new Qc(1,0)],["CC4",new Qc(1,1)]]),this.u=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,Up(this)}uu.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Up(this),e=v(this.j.values());for(var t=e.next();!t.done;t=e.next())sT(t.value)};function Up(e){e.o=0,e.u=0;for(var t=v(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,ka(n.i),ka(n.j),ka(n.o);e.B=!0}uu.prototype.extract=function(e,t){if(this.B){for(var n=v(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.B=!1}if(e=new vt(e,0),!(8>e.getLength())&&e.X()===181&&e.na()===49&&e.S()===1195456820&&e.X()===3&&(n=e.X(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.X(),o=(r&4)>>2,s=e.X(),u=e.X();o&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,mb:s,Mb:u,order:this.h.length}):(this.g.push({pts:t,type:r,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},uu.prototype.decode=function(){function e(r,o){return r.pts-o.pts||r.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=v(this.h),i=n.next();!i.done;i=n.next())(i=_C(this,i.value))&&t.push(i);for(n=v(this.g),i=n.next();!i.done;i=n.next())kC(this.i,i.value);for(n=v(this.i.i),i=n.next();!i.done;i=n.next())i=NC(this,i.value),t.push.apply(t,Q(i));return this.i.i=[],this.h=[],this.g=[],t};function _C(e,t){var n=t.type;if((t.mb&112)===16){var i=t.mb>>3&1;n===0?e.o=i:e.u=i}if(i="CC"+((n<<1|(n?e.u:e.o))+1),n=e.m.get(i),t.mb===255&&t.Mb===255||!t.mb&&!t.Mb||!lT(t.mb)||!lT(t.Mb))return 45<=++e.l&&Up(e),null;e.l=0,t.mb&=127,t.Mb&=127;var r=t.mb;if(1<=r&&15>=r||!t.mb&&!t.Mb)return null;if(r=null,(t.mb&112)===16)e:{if(e.A.add(i),i=t.mb,e=t.Mb,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1],i="white",r=!1;var o=null,s=95<e?e-96:e-64;13>=s?i=iT[Math.floor(s/2)]:15>=s?r=!0:o=Math.floor((s-16)/2),e=(e&1)===1,n.h!==4&&(s=n.g,n.h===3&&t!==s.g&&(n=1+t-s.h,J1(s,n,1+s.g-s.h,s.h),Ur(s,0,n-1),Ur(s,t+1,15-t)),s.g=t,s.m=e,s.j=r,s.l=i,s.u=o,s.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",su(n.g,0,32),i=!1,t=iT[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",(i&7)===0&&(t=IC[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)su(n.g,1,e);else if((i&246)===18&&(e&224)===32)su(n.g,i&1?3:2,e);else{if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.Mb){case 32:tT(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=_p(n,2,e);break;case 38:i=_p(n,3,e);break;case 39:i=_p(n,4,e);break;case 40:su(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:ka(n.o),nT(n);break;case 43:nT(n);break;case 44:t=n.i,i=null,n.h!==4&&(i=$c(t,n.l,e)),Ur(t,0,15);break;case 45:t=n.g,n.h!==3?i=null:(i=$c(t,n.l,e),r=t.g-t.h+1,J1(t,r-1,r,t.h),Ur(t,0,r-1),Ur(t,t.g,15-t.g),n.l=e);break;case 46:Ur(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=$c(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,tT(n),n.l=e,i=t}r=i;break e}(i==23||i==31)&&33<=e&&35>=e&&(n.g.A=e-32)}r=null}else e=t.Mb,su(n.g,0,t.mb),su(n.g,0,e);return r}function NC(e,t){var n=[];try{for(;t.ta();){var i=Yt(t).value,r=(i&224)>>5,o=i&31;if(r===7&&o!=0&&(r=Yt(t).value&63),r!=0){e.A.add("svc"+r),e.j.has(r)||e.j.set(r,new DC(r));for(var s=e.j.get(r),u=t.Ba();t.Ba()-u<o;){r=s;var a=t,l=Yt(a),f=l.value,d=l.pts;if(f===16){var g=Yt(a);f=f<<16|g.value}if(0<=f&&31>=f)var m=RC(r,a,f,d);else if(128<=f&&159>=f)m=PC(r,a,f,d);else{if(4096<=f&&4127>=f)r=a,a=f&255,8<=a&&15>=a?r.skip(1):16<=a&&23>=a?r.skip(2):24<=a&&31>=a&&r.skip(3);else if(4224<=f&&4255>=f)r=a,a=f&255,128<=a&&135>=a?r.skip(4):136<=a&&143>=a&&r.skip(5);else if(32<=f&&127>=f)a=f,r.g&&(a===127?fo(r.g,"♪"):fo(r.g,String.fromCharCode(a)));else if(160<=f&&255>=f)r.g&&fo(r.g,String.fromCharCode(f));else if(4128<=f&&4223>=f){if(a=f&255,r.g)if(aT.has(a)){var y=aT.get(a);fo(r.g,y)}else fo(r.g,"_")}else 4256<=f&&4351>=f&&r.g&&((f&255)!=160?fo(r.g,"_"):fo(r.g,"[CC]"));m=[]}n.push.apply(n,Q(m))}}}}catch(x){if(x instanceof _&&x.code===3e3)ue("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw x}return n}function lT(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}uu.prototype.getStreams=function(){return Array.from(this.A)},R("shaka.cea.CeaDecoder",uu),Es=function(){return new uu};function cT(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(Q(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function Jc(){this.j=new Map,this.i=this.h=0,this.g=bp}Jc.prototype.init=function(e){function t(o){o=o.name,Zc.has(o)&&(n.g=Zc.get(o))}var n=this,i=[],r=[];if(new ft().box("moov",Fe).box("mvex",Fe).R("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.S(),s=s.S(),n.h=o,n.i=s}).box("trak",Fe).R("tkhd",function(o){var s=o.reader;o=o.version,o==1?(s.skip(8),s.skip(8)):(s.skip(4),s.skip(4));var u=s.S();o==1?s.skip(8):s.skip(4),s.skip(4),s.skip(8),s.skip(2),s.skip(2),s.skip(2),s.skip(2),s.skip(36),s.na(),s.na(),s.na(),s.na(),i.push(u)}).box("mdia",Fe).R("mdhd",function(o){o=tc(o.reader,o.version),r.push(o.timescale)}).box("minf",Fe).box("stbl",Fe).R("stsd",oo).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",qn).box("sinf",Fe).box("frma",function(o){o=ky(o.reader).codec,Zc.has(o)&&(n.g=Zc.get(o))}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new _(2,2,2010);this.g==bp&&J("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(o,s){n.j.set(o,r[s])})},Jc.prototype.parse=function(e){var t=this;if(this.g==bp)return[];var n=[],i=0,r=[];return new ft().box("moof",function(o){i=o.start,r=[],Fe(o)}).box("traf",function(o){r.push({baseMediaDecodeTime:null,ld:t.h,md:t.i,lh:[],timescale:9e4}),Fe(o)}).R("trun",function(o){var s=r[r.length-1];o=nc(o.reader,o.version,o.flags),s.lh.push(o)}).R("tfhd",function(o){var s=r[r.length-1];o=Zl(o.reader,o.flags),s.ld=o.ld||t.h,s.md=o.md||t.i,o=o.trackId,t.j.has(o)&&(s.timescale=t.j.get(o))}).R("tfdt",function(o){var s=r[r.length-1];o=ec(o.reader,o.version),s.baseMediaDecodeTime=o.baseMediaDecodeTime}).box("mdat",function(o){for(var s=i-o.start-8,u=o.reader.Ba(),a=v(r),l=a.next();!l.done;l=a.next()){if(l=l.value,l.baseMediaDecodeTime===null)throw J("Unable to find base media decode time for CEA captions!"),new _(2,2,2010);o.reader.seek(u),jC(t,o.reader,l.baseMediaDecodeTime,l.timescale,l.ld,l.md,s,l.lh,n)}}).parse(e,!1),n};function jC(e,t,n,i,r,o,s,u,a){var l=0,f=o,d=u.map(function(y){return y.fg});for(d=[].concat.apply([],Q(d)),d.length&&(f=d[0].sampleSize||o),t.skip(s+u[0].nf);t.ta();){s=t.S();var g=t.X(),m=null;switch(m=!1,u=1,e.g){case Pa:m=g&31,m=m==6;break;case La:u=2,t.skip(1),m=g>>1&63,m=m==39||m==40;break;case _a:u=2,t.skip(1),m=g>>1&63,m=m==23||m==24;break;default:return}if(m)for(g=0,l<d.length&&(g=d[l].ye||0),g=(n+g)/i,u=v(cT(t.Cb(s-u))),m=u.next();!m.done;m=u.next())a.push({packet:m.value,pts:g});else try{t.skip(s-u)}catch{break}f-=s+4,f==0&&(n=l<d.length?n+(d[l].gg||r):n+r,l++,l<d.length?f=d[l].sampleSize||o:f=o)}}R("shaka.cea.Mp4CeaParser",Jc);var bp=0,Pa=1,La=2,_a=3,Zc=new Map().set("avc1",Pa).set("avc3",Pa).set("dvav",Pa).set("dva1",Pa).set("hev1",La).set("hvc1",La).set("dvh1",La).set("dvhe",La).set("vvc1",_a).set("vvi1",_a).set("dvc1",_a).set("dvi1",_a);_d("video/mp4",function(){return new Jc});function ef(){this.g=null}ef.prototype.init=function(){},ef.prototype.parse=function(e){this.g?this.g.clearData():this.g=new yt;var t=[];if(e=De(e),!Gs(e))return t;e=this.g.parse(e);var n=e.od(),i=e.be();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=v(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=v(cT(i.data)),o=r.next();!o.done;o=r.next())t.push({packet:o.value,pts:i.time});return t},R("shaka.cea.TsCeaParser",ef),_d("video/mp2t",function(){return new ef});function OC(e){var t=0,n=Ln(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,(r&1)!=0||r+e>n.byteLength){n=[];break e}var o=De(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function fT(e){return e=Ti(Gt(e)),e=OC(e).filter(function(t){return t.type===UC})[0],e?(e=Qr(e.value,!0),(e=Uo(e,"WRMHEADER"))?e:null):null}function tf(e){try{var t=fT(e);if(t)e:{for(var n=v(zi(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var o=v(r.children),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.tagName=="LA_URL"){var a=Gt(u);break e}}}a=""}else a="";return a}catch{return""}}var UC=1;function dT(e,t,n){var i=BC(e),r=null;e=[];var o=[],s=null,u=new Set(i.map(function(l){return l.keyId}));u.delete(null);var a="cenc";if(1<u.size)throw new _(2,4,4010);if(!t){if(o=i.filter(function(l){return l.cd=="urn:mpeg:dash:sea:2012"}),1<o.length)throw new _(2,4,4050);o.length&&(s=HC(o[0])),(o=i.find(function(l){return l.cd=="urn:mpeg:dash:mp4protection:2011"}))&&o.encryptionScheme&&(a=o.encryptionScheme),o=i.filter(function(l){return l.cd=="urn:mpeg:dash:mp4protection:2011"?(r=l.init||r,!1):l.cd!="urn:mpeg:dash:sea:2012"}),o.length&&(e=FC(r,a,o,n,u),e.length==0&&(e=[Jr("",a,r)]))}if(i.length&&!s&&(t||!o.length))for(e=[],t=v(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Jr(n,a,r));if(u=Array.from(u)[0]||null)for(a=v(e),t=a.next();!t.done;t=a.next())for(t=v(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=u;return{Jg:u,Pk:r,drmInfos:e,cf:s,Og:!0}}function bC(e,t,n,i){var r=dT(e,n,i);if(t.Og)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=r.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=r.drmInfos),t.Og=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return r.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),t.drmInfos.length==0))throw new _(2,4,4008);return r.Jg||t.Jg}function nf(e){var t=Ui(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=Gt(t)))return t;if((t=Ui(e.node,"urn:microsoft:playready","pro"))&&Gt(t))return tf(t);if((e=Ui(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=Gt(e))){t=Ti(e),e=8,t=Ln(t);var n=t.getUint8(e);return e+=20,0<n&&(e+=4+16*t.getUint32(e)),e=De(t,e+4),e=Pl(e),e=Uo("<pro>"+e+"</pro>"),tf(e)}return""}function FC(e,t,n,i,r){var o=[];n=v(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=i[s.cd];if(u){var a;if((a=Ui(s.node,"urn:microsoft:playready","pro"))&&Gt(a)){a=Gt(a),a=Ti(a);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);a=[{initData:$l(a,l,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else a=null;if(l=null,s.cd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){l=s;var f=r;if(f.size==0)l=null;else{var d=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),g=new Uint8Array([]);l=[{initData:$l(g,d,f,1),initDataType:"cenc",keyId:l.keyId}]}}a=Jr(u,t,s.init||e||a||l),(u=GC.get(u))&&(a.licenseServerUri=u(s)),o.push(a)}}return o}function BC(e){var t=[];e=v(e);for(var n=e.next();!n.done;n=e.next())(n=VC(n.value))&&t.push(n);return t}function VC(e){var t=e.attributes.schemeIdUri,n=Sr(e,"urn:mpeg:cenc:2013","default_KID"),i=vv(e,"urn:mpeg:cenc:2013","pssh").map(si),r=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new _(2,4,4009);var o=[];try{o=i.map(function(s){return{initDataType:"cenc",initData:Ti(s),keyId:null}})}catch{throw new _(2,4,4007)}return{node:e,cd:t,keyId:n,init:0<o.length?o:null,encryptionScheme:r}}function HC(e){if(!w.crypto||!w.crypto.subtle)throw J("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new _(2,4,4042);var t=Ui(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new _(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new _(2,4,4051);if(t=Ui(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new _(2,4,4051);if(e=t.attributes.IV,t=_n(t.attributes.keyUriTemplate),!e||!t)throw new _(2,4,4051);if(e=Po(e.substr(2)),e.byteLength!=16)throw new _(2,4,4048);return{Xi:t,iv:e}}var GC=new Map().set("com.apple.fps",function(e){if(w.shakaMediaKeysPolyfill==="apple")throw new _(2,4,4054);return(e=Ui(e.node,"https://dashif.org/CPS","Laurl"))&&(e=Gt(e))?e:""}).set("com.widevine.alpha",function(e){var t=Ui(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gt(t))?t:(e=Ui(e.node,"urn:microsoft","laurl"))&&_n(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",nf).set("com.microsoft.playready.recommendation",nf).set("com.microsoft.playready.software",nf).set("com.microsoft.playready.hardware",nf).set("org.w3.clearkey",function(e){var t=Ui(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gt(t))?t:(e=Ui(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Gt(e))?e:""});function Na(e,t,n,i,r,o){var s=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",i).set("Bandwidth",r).set("Time",o);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(u,a,l,f){if(u=="$$")return"$";var d=s.get(a);if(d==null)return u;switch(a=="RepresentationID"&&l&&(l=void 0),a=="Time"&&typeof d!="bigint"&&(.2<=Math.abs(d-Math.round(d))&&J("Calculated $Time$ values must be close to integers"),d=Math.round(d)),f){case void 0:case"d":case"i":case"u":u=d.toString();break;case"o":u=d.toString(8);break;case"x":u=d.toString(16);break;case"X":u=d.toString(16).toUpperCase();break;default:u=d.toString()}return l=w.parseInt(l,10)||1,Array(Math.max(0,l-u.length)+1).join("0")+u})}function hT(e,t){var n=Hi(e,t,"timescale"),i=1;n&&(i=xr(n)||1),n=Hi(e,t,"duration");var r=(n=xr(n||""))?n/i:null,o=Hi(e,t,"startNumber"),s=Number(Hi(e,t,"presentationTimeOffset"))||0,u=yn(o||"");if((o==null||u==null)&&(u=1),o=null,t=au(e,t,"SegmentTimeline")){t=nt(t,"S"),o=i,e=e.ha.duration||1/0;for(var a=u,l=[],f=-s,d=0;d<t.length;++d){var g=t[d],m=t[d+1],y=Le(g,"t",yn),x=Le(g,"d",yn),S=Le(g,"r",In);if(g=Le(g,"k",In)||0,y!=null&&(y-=s),x){if(y=y??f,S=S||0,0>S)if(m){if(m=Le(m,"t",yn),m==null)break;if(y>=m)break;S=Math.ceil((m-y)/x)-1}else{if(e==1/0)break;if(y/o>=e)break;S=Math.ceil((e*o-y)/x)-1}for(0<l.length&&y!=f&&(l[l.length-1].end=y/o),m=0;m<=S;++m)f=y+x,l.push({start:y/o,end:f/o,xg:y,Jb:g,wj:l.length+a}),y=f}}o=l}return{timescale:i,He:n,Wa:r,Ld:u,hc:s/i||0,wg:s,timeline:o}}function pT(e,t){return[t(e.J),t(e.ga),t(e.qa)].filter(ro)}function Hi(e,t,n){t=pT(e,t),e=null,t=v(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function au(e,t,n){t=pT(e,t),e=null,t=v(t);for(var i=t.next();!i.done&&!(e=Bt(i.value,n));i=t.next());return e}function KC(e,t,n,i,r,o){for(var s=Sr(e,"http://www.w3.org/1999/xlink","href"),u=Sr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=v(Object.keys(e.attributes)),l=a.next();!l.done;l=a.next()){l=l.value;var f=l.split(":"),d=Ud("http://www.w3.org/1999/xlink");f[0]==d&&delete e.attributes[l]}if(5<=o)return Ho(new _(2,4,4028));if(u!="onLoad")return Ho(new _(2,4,4027));var g=Jt([i],[s]);return r.request(0,qt(g,t)).Ha(function(m){if(m=bu(m.data,e.tagName),!m)return Ho(new _(2,4,4001,s));for(e.children=[];m.children.length;){var y=m.children.shift();e.children.push(y)}y=v(Object.keys(m.attributes));for(var x=y.next();!x.done;x=y.next())x=x.value,e.attributes[x]=m.attributes[x];return rf(e,t,n,g[0],r,o+1)})}function rf(e,t,n,i,r,o){if(o=o===void 0?0:o,Sr(e,"http://www.w3.org/1999/xlink","href")){var s=KC(e,t,n,i,r,o);return n&&(s=s.Ha(void 0,function(){return rf(e,t,n,i,r,o)})),s}s=[];for(var u=v(mv(e)),a=u.next(),l={};!a.done;l={hd:void 0},a=u.next())l.hd=a.value,Sr(l.hd,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(f){return function(d){return d!==f.hd}}(l)):l.hd.tagName!="SegmentTimeline"&&s.push(rf(l.hd,t,n,i,r,o));return Qv(s).Ha(function(){return e})}function WC(e,t,n,i,r,o,s){var u,a=new ft().R("sidx",function(l){u=XC(t,i,r,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new _(2,3,3004)}function XC(e,t,n,i,r,o,s){var u=[];s.reader.skip(4);var a=s.reader.S();if(a==0)throw new _(2,3,3005);if(s.version==0)var l=s.reader.S(),f=s.reader.S();else l=s.reader.bd(),f=s.reader.bd();s.reader.skip(2);var d=s.reader.na();for(e=e+s.size+f,f=0;f<d;f++){var g=s.reader.S(),m=(g&2147483648)>>>31;g&=2147483647;var y=s.reader.S();if(s.reader.skip(4),m==1)throw new _(2,3,3006);u.push(new ye(l/a+n,(l+y)/a+n,function(){return o},e,e+g-1,t,n,i,r)),l+=y,e+=g}return s.parser.stop(),u}function ho(e){this.h=Ln(e),this.g=new vt(this.h,0)}ho.prototype.ta=function(){return this.g.ta()};function br(e){var t=gT(e);if(7<t.length)throw new _(2,3,3002);var n=0;t=v(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=gT(e);e:{i=v(zC);for(var r=i.next();!r.done;r=i.next())if(mr(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Ba();else{if(t.length==8&&t[1]&224)throw new _(2,3,3001);for(r=i=0;r<t.length;r++){var o=t[r];i=r==0?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.Ba()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ba(),i=Ln(e.h,e.g.Ba(),t),e.g.skip(t),new qC(n,i)}function gT(e){var t=e.g.Ba(),n=e.g.X();if(n==0)throw new _(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),De(e.h,t,n)}var zC=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function qC(e,t){this.id=e,this.g=t}function Fp(e){if(8<e.g.byteLength)throw new _(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new _(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function YC(e,t,n,i,r,o,s,u,a){function l(){return r}var f=[];e=new ho(e.g);for(var d=null,g=null;e.ta();){var m=br(e);if(m.id==187){var y=$C(m);y&&(m=n*y.Jj,y=t+y.nj,d!=null&&f.push(new ye(d+s,m+s,l,g,y-1,o,s,u,a)),d=m,g=y)}}return d!=null&&f.push(new ye(d+s,i+s,l,g,null,o,s,u,a)),f}function $C(e){var t=new ho(e.g);if(e=br(t),e.id!=179)throw new _(2,3,3013);if(e=Fp(e),t=br(t),t.id!=183)throw new _(2,3,3012);t=new ho(t.g);for(var n=0;t.ta();){var i=br(t);if(i.id==241){n=Fp(i);break}}return{Jj:e,nj:n}}function mT(e,t,n){if(t=au(e,t,"Initialization"),!t)return null;var i=e.J.Ua(),r=t.attributes.sourceURL;r&&(i=Jt(i,[_n(r)],e.vb())),r=0;var o=null;return(t=Le(t,"range",_l))&&(r=t.start,o=t.end),n=new jn(function(){return i},r,o,wT(e),null,null,n,e.ga.encrypted),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,e.ha&&(n.g=e.ha.start+e.ha.duration),n}function QC(e,t,n){var i=Number(Hi(e,lu,"presentationTimeOffset"))||0,r=Hi(e,lu,"timescale"),o=1;r&&(o=xr(r)||1);var s=i/o||0,u=mT(e,lu,n);JC(e,u);var a=Oo(e);return{rc:function(){var l=au(a,lu,"RepresentationIndex"),f=a.J.Ua();return l&&(l=_n(l.attributes.sourceURL))&&(f=Jt(f,[l],a.vb())),l=yT(a),vT(a,t,u,f,l.start,l.end,s)}}}function vT(e,t,n,i,r,o,s){var u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N;return U(function(j){if(j.g==1)return u=e.presentationTimeline,a=!e.Ob||!e.ha.$g,l=e.ha.start,f=e.ha.duration,d=e.J.mimeType.split("/")[1],g=t,m=null,y=[g(i,r,o,!1),d=="webm"?g(n.N(),n.Sa,n.wa,!0):null],g=null,A(j,Promise.all(y),2);if(x=j.h,S=x[0],E=x[1]||null,M=null,L=l-s,P=l,b=f?l+f:1/0,d=="mp4")var V=WC(S,r,i,n,L,P,b);else{V=S;var F=new ho(E);if(br(F).id!=440786851)throw new _(2,3,3008);var B=br(F);if(B.id!=408125543)throw new _(2,3,3009);F=B.g.byteOffset,B=new ho(B.g);for(var H=null;B.ta();){var G=br(B);if(G.id==357149030){H=G;break}}if(!H)throw new _(2,3,3010);for(H=new ho(H.g),G=1e6,B=null;H.ta();){var z=br(H);if(z.id==2807729)G=Fp(z);else if(z.id==17545)if(z.g.byteLength==4)B=z.g.getFloat32(0);else if(z.g.byteLength==8)B=z.g.getFloat64(0);else throw new _(2,3,3003)}if(B==null)throw new _(2,3,3011);if(H=G/1e9,B*=H,V=br(new ho(V)),V.id!=475249515)throw new _(2,3,3007);V=YC(V,F,H,B,i,n,L,P,b)}for(M=V,D=v(M),k=D.next();!k.done;k=D.next())N=k.value,N.codecs=e.J.codecs,N.mimeType=e.J.mimeType,N.bandwidth=e.bandwidth;return u.Ed(M),m=new Ze(M),a&&m.Oc(P,b,!0),j.return(m)})}function lu(e){return e.dd}function yT(e){var t=au(e,lu,"RepresentationIndex");return e=Hi(e,lu,"indexRange"),e=_l(e||""),t&&(e=Le(t,"range",_l,e)),e}function JC(e,t){if(TT(e,t),!yT(e))throw new _(2,4,4002)}function TT(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=be&&n!="mp4"&&n!="webm")throw new _(2,4,4006);if(n=="webm"&&!t)throw new _(2,4,4005)}function wT(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.oe,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ga.label||null,roles:e.roles||null,language:e.ga.language||null}}function ZC(e,t,n){var i=mT(e,ST,n),r=ek(e);if(!r.Wa&&!r.timeline&&1<r.Xc.length)throw new _(2,4,4002);if(!r.Wa&&!e.ha.duration&&!r.timeline&&r.Xc.length==1)throw new _(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new _(2,4,4002);var o=null,s=null;e.qa.id&&e.J.id&&(s=t.get(e.qa.id+","+e.J.id))&&(o=s.segmentIndex);var u=tk(e.ha.start,e.ha.duration,e.J.Ua,r,i,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.vb);return t=!o,o?o.Bd(u,e.presentationTimeline.pb()):o=new Ze(u),e.presentationTimeline.Ed(u),e.Ob&&e.ha.$g||o.Oc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),s&&(s.segmentIndex=o),{rc:function(){return o&&o.getNumReferences()!=0||o.ke(u),Promise.resolve(o)}}}function ST(e){return e.Zb}function ek(e){var t=nk(e);e=hT(e,ST);var n=e.Ld;n==0&&(n=1);var i=0;return e.Wa?i=e.Wa*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Wa:e.Wa,startTime:i,Ld:n,hc:e.hc,timeline:e.timeline,Xc:t}}function tk(e,t,n,i,r,o,s,u,a,l){var f=i.Xc.length;i.timeline&&i.timeline.length!=i.Xc.length&&(f=Math.min(i.timeline.length,i.Xc.length));for(var d=e-i.hc,g=t?e+t:1/0,m=[],y=i.startTime,x={},S=0;S<f;x={Je:void 0,ze:void 0},S++){x.ze=i.Xc[S];var E=y;y=void 0,y=i.Wa!=null?E+i.Wa:i.timeline?i.timeline[S].end:E+t,x.Je=null,x=new ye(e+E,e+y,function(M){return function(){return M.Je==null&&(M.Je=Jt(n(),[M.ze.cj],l())),M.Je}}(x),x.ze.start,x.ze.end,r,d,e,g,[],"",null,null,Dr,o),x.codecs=u,x.mimeType=s,x.bandwidth=a,m.push(x)}return m}function nk(e){return[e.J.Zb,e.ga.Zb,e.qa.Zb].filter(ro).map(function(t){return nt(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.Lf&&(e.Lf=!0);var n=_n(t.attributes.media);return t=Le(t,"mediaRange",_l,{start:0,end:null}),{cj:n,start:t.start,end:t.end}})}function xT(e,t,n,i,r,o,s,u,a){a||e.J.de||(e.J.de=Hi(e,po,"initialization"));var l=e.J.de?sk(e,s):null,f=ik(e);rk(f);var d=Oo(e);if(f.vd)return TT(e,l),{rc:function(){var x=Na(f.vd,d.J.originalId,null,null,d.bandwidth||null,null);return x=Jt(d.J.Ua(),[x]),vT(d,t,l,x,0,null,f.hc)}};if(f.Wa)return i||e.ga.contentType==="image"||e.ga.contentType==="text"||(n=e.ha.start,i=e.qa.id,a=e.ha.duration,i=(i=i!=null&&o.get(i)||a)?n+i:1/0,e.presentationTimeline.Tf(f.Wa),e.presentationTimeline.jh(n,i)),{rc:function(){return ok(d,f,r,l,o,s,u,e.J.Ae)}};var g=null;i=i=null,e.qa.id&&e.J.id&&(i=e.qa.id+","+e.J.id,i=n.get(i))&&(g=i.segmentIndex);var m=e.ha.start,y=e.ha.duration?m+e.ha.duration:1/0;return g?(n=g,ET(n,f,m,y,l),n.Oa(e.presentationTimeline.pb())):g=new of(f,e.J.originalId,e.bandwidth,e.J.Ua,e.vb,m,y,l,s,e.J.Ae),f.timeline&&e.ga.contentType!=="image"&&e.ga.contentType!=="text"&&e.presentationTimeline.kh(g.h?g.h.timeline:[],m),i&&e.Ob&&(i.segmentIndex=g),{rc:function(){return g instanceof of&&g.getNumReferences()==0&&ET(g,f,m,y,l),Promise.resolve(g)}}}function po(e){return e.ic}function ik(e){var t=hT(e,po),n=Hi(e,po,"media"),i=Hi(e,po,"index"),r=Hi(e,po,"k"),o=0;return r&&(o=parseInt(r,10)),{He:t.He,Wa:t.Wa,timescale:t.timescale,Ld:t.Ld,hc:t.hc,wg:t.wg,timeline:t.timeline,ec:n&&_n(n),vd:i,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,dj:o}}function rk(e){var t=e.vd?1:0;if(t+=e.timeline?1:0,t+=e.Wa?1:0,t==0)throw new _(2,4,4002);if(t!=1&&(e.vd&&(e.timeline=null),e.He=null,e.Wa=null),!e.vd&&!e.ec)throw new _(2,4,4002)}function ok(e,t,n,i,r,o,s,u){function a(B){var H=B-S,G=H*x,z=t.He,W=H*z;"BigInt"in w&&W>Number.MAX_SAFE_INTEGER&&(W=BigInt(H)*BigInt(z)),G+=g,H=G+x,z=Math.min(H,f());var $=[],te=t.dj;if(te)for(var Me=(z-G)/te,he={},et=0;et<te;he={Eh:void 0},et++){var Ve=G+Me*et,Oe=Ve+Me;he.Eh=et+1,he=new ye(Ve,Oe,function(Ue){return function(){var Qe=Na(E,L,B,Ue.Eh,M,W);return Jt(P(),[Qe],b())}}(he),0,null,i,D,g,f(),[],"",null,null,Dr,o),he.codecs=e.J.codecs,he.mimeType=e.J.mimeType,u==0?0<et&&he.Vc():et%u!=0&&he.Vc(),$.push(he)}return G=new ye(G,z,function(){if(te)return[];var Ue=Na(E,L,B,null,M,W);return Jt(P(),[Ue],b())},0,null,i,D,g,f(),$,"",null,null,Dr,o,0<$.length),G.codecs=e.J.codecs,G.mimeType=e.J.mimeType,G.bandwidth=e.bandwidth,G.j=H,G}function l(){var B=[Math.max(d.pb(),g),Math.min(d.cc(),f())].map(function(H){return H-g});return B=[Math.ceil(B[0]/x),Math.ceil(B[1]/x)-1],e.J.cb&&B[1]++,B.map(function(H){return H+S})}function f(){var B=m!=null&&r.get(m)||y;return B?g+B:1/0}var d=e.presentationTimeline,g=e.ha.start,m=e.qa.id,y=e.ha.duration,x=t.Wa,S=t.Ld,E=t.ec,M=e.bandwidth||null,L=e.J.id,P=e.J.Ua,b=e.vb,D=g-t.hc,k=l();n=e.Ob?Math.max(k[0],k[1]-n+1):k[0],s=s||k[1],k=[];for(var N=n;N<=s;++N){var j=a(N);k.push(j)}var V=new Ze(k);if(k=d.cc()<f(),N=d.U(),k||N){var F=Math.max(n,s+1);n=x,e.J.cb&&(n=.1),V.Ie(n,function(){var B=d.pb();V.Oa(B);var H=v(l());H.next(),H=H.next().value;for(var G=[];F<=H;){var z=a(F);G.push(z),F++}return B>f()&&!G.length?null:G})}return Promise.resolve(V)}function sk(e,t){var n=e.J.de;if(n||(n=Hi(e,po,"initialization")),!n)return null;n=_n(n);var i=e.J.originalId,r=e.bandwidth||null,o=e.J.Ua,s=e.vb;return t=new jn(function(){var u=Na(n,i,null,null,r,null);return Jt(o(),[u],s())},0,null,wT(e),null,null,t,e.ga.encrypted),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,e.ha&&(t.g=e.ha.start+e.ha.duration),t}function of(e,t,n,i,r,o,s,u,a,l){Ze.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=i,this.H=r,this.j=o,this.l=s,this.u=u,this.A=a,this.G=l,Bp(this)}At(of,Ze),h=of.prototype,h.getNumReferences=function(){return this.h?this.h.timeline.length:0},h.release=function(){Ze.prototype.release.call(this),this.h=null},h.Oa=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function ET(e,t,n,i,r){if(uk(e,r),e.h){if(n=e.h.timeline,e.h.ec!==t.ec&&(e.h.ec=t.ec),n.length){var o=n[n.length-1];t=t.timeline.filter(function(s){return s.end>o.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,Q(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;Bp(e)}function uk(e,t){if(e.u!==t){e.u=t,e=v(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&jy(n,t)}}function Bp(e){if(e.h&&!e.o){for(var t=[],n=v(e.h.timeline),i=n.next();!i.done;i=n.next())i=i.value,i.start>=e.l||0>=i.end||t.push(i);e.h.timeline=t,e.Oa(e.j)}}h.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],o=r.start+this.j;if(r=i<n?t[i+1].start+this.j:this.l===1/0?r.end+this.j:this.l,e>=o&&e<r)return i+this.i}return null},h.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var i=this.h.timeline[e],r=i.wj,o=i.xg+this.h.wg;n=this.j-this.h.hc;var s=this.j+i.end,u=s;e===this.getNumReferences()-1&&this.l!==1/0&&(u=this.l);for(var a=this.h.codecs,l=this.h.mimeType,f=this.h.bandwidth,d=[],g=(i.end-i.start)/i.Jb,m={},y=0;y<i.Jb;m={Ke:void 0,Fh:void 0},y++){var x=i.start+g*y,S=x+g;m.Fh=y+1,m.Ke=null,m=new ye(this.j+x,this.j+S,function(E){return function(){return t.h?(E.Ke==null&&(E.Ke=AT(t.h.ec,t.F,r,t.B,o,E.Fh,t.C,t.H)),E.Ke):[]}}(m),0,null,this.u,n,this.j,this.l,[],"",null,null,Dr,this.A),m.codecs=a,m.mimeType=l,m.bandwidth=f,this.G==0?0<y&&m.Vc():y%this.G!=0&&m.Vc(),d.push(m)}n=new ye(this.j+i.start,u,function(){return 0<i.Jb||!t.h?[]:AT(t.h.ec,t.F,r,t.B,o,null,t.C,t.H)},0,null,this.u,n,this.j,this.l,d,"",null,null,Dr,this.A,0<i.Jb),n.codecs=a,n.mimeType=l,n.j=s,n.bandwidth=f,this.g[e]=n}return n},h.Eb=function(e){Bp(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function AT(e,t,n,i,r,o,s,u){return e=Na(e,t,n,o,i||null,r),Jt(s(),[e],u()).map(function(a){return a.toString()})}function cu(e){this.o=null,this.A=e,this.G=new js,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}cu.prototype.configure=function(e){this.o=e},cu.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},cu.prototype.setManifestType=function(e){this.u=e};function ja(e,t){var n,i,r,o,s,u,a;return U(function(l){if(l.g==1)return n=Jt(e.i,[ak(e,t)]),i=qt(n,e.o.retryParameters),r=e.A.networkingEngine.request(8,i),Go(e.G,r),ge(l,2),A(l,r.promise,4);if(l.g!=2)return o=l.h,s=St(o.data),u=JSON.parse(s),u.VERSION==1&&lk(e,u,o.uri),Pe(l,0);if((a=Se(l))&&a.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new Be(function(){ja(e,t)}),e.g.da(e.C),ie(l)})}function ak(e,t){if(!e.m.length)return t;t=new _t(t);var n=e.B||e.m[0],i=Math.round(e.A.getBandwidthEstimate()),r=t.g;return e.u=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.u=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),Zm(r)&&Do(t,r),t.toString()}function lk(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new Be(function(){ja(e,i)}),(n=t.TTL)&&(e.C=n),e.g.da(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function fu(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}cu.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Oa(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r=v(e.m),o=r.next(),s={};!o.done;s={Zc:void 0},o=r.next())if(s.Zc=o.value,o=t.get(s.Zc))i.push({Yf:s.Zc,location:o});else if(o=e.F.find(function(a){return function(l){return l.ek==a.Zc}}(s))){var u=t.get(o["BASE-ID"]);u&&(o["URI-REPLACEMENT"].Oh?(u=new _t(u),Il(u,o["URI-REPLACEMENT"].Oh),i.push({Yf:s.Zc,location:u.toString()})):i.push({Yf:s.Zc,location:u}))}for(r=Date.now(),s=v(e.j.keys()),o=s.next();!o.done;o=s.next())o=o.value,u=e.j.get(o),r>u&&e.j.delete(o);if(i=i.filter(function(a){for(var l=v(e.j.keys()),f=l.next();!f.done;f=l.next())if(f.value.includes(new _t(a.location).nb))return!1;return!0}),i.length&&(e.B=i[0].Yf),i=i.map(function(a){return a.location}),!i.length&&e.h)for(r=v(e.h.split(",")),s=r.next();!s.done;s=r.next())(s=t.get(s.value))&&(e.B=e.h,i.push(s));if(!i.length)for(t=v(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:Jt(e.i,i)}function wn(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.u=this.o=!1,this.m=new Set}h=wn.prototype,h.release=function(){for(var e=v(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.u=this.o=!1,this.m.clear()},h.Ki=function(){return this.l},h.Jf=function(){return this.j.slice()},h.oi=function(){return this.i},h.Kg=function(e,t){if(e){if(e.type=="audio")for(var n=v(this.h),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="video")for(n=v(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(r){return r!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(r){return r!==e}));else if(e.type==be)for(n=v(this.j),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="image")for(n=v(this.i),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function IT(e,t){var n=[],i=[],r=[],o=[];e=v(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(d){return[Kp(d),d]}));var a=new Map(u.videoStreams.map(function(d){return[Gp(d),d]})),l=new Map(u.textStreams.map(function(d){return[Fa(d),d]}));if(u=new Map(u.imageStreams.map(function(d){return[Ba(d),d]})),t){var f=PT(be);l.set(Fa(f),f),f=PT("image"),u.set(Ba(f),f)}n.push(s),i.push(a),r.push(l),o.push(u)}return{Dg:n,Mh:i,Ih:r,Yg:o}}h.gf=function(e,t,n){n=n===void 0?!1:n;var i=this,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me;return U(function(he){if(he.g==1){if(r=zt,!t&&e.length==1)return o=IT(e,!1),s=o.Dg,u=o.Mh,a=o.Ih,l=o.Yg,i.h=Array.from(s[0].values()),i.g=Array.from(u[0].values()),i.j=Array.from(a[0].values()),i.i=Array.from(l[0].values()),he.s(2);for(f=n?i.m.size:0,d=-1,g=0;g<e.length;g++)m=e[g],i.m.has(m.id)||(i.m.add(m.id),d==-1&&(d=g));return d==-1?he.return():(y=IT(e,!0),x=y.Dg,S=y.Mh,E=y.Ih,M=y.Yg,A(he,Promise.all([go(i,i.h,x,d,du,mo,f),go(i,i.g,S,d,du,mo,f),go(i,i.j,E,d,du,mo,f),go(i,i.i,M,d,du,mo,f)]),2))}if(L=0,P=[],i.g.length&&i.h.length)for(F=v(i.h),B=F.next();!B.done;B=F.next())for(H=B.value,G=v(i.g),z=G.next();!z.done;z=G.next())W=z.value,$=Sd(H.drmInfos,W.drmInfos),H.drmInfos.length&&W.drmInfos.length&&!$.length||(te=(H.bandwidth||0)+(W.bandwidth||0),H.dependencyStream&&(te+=H.dependencyStream.bandwidth||0),W.dependencyStream&&(te+=W.dependencyStream.bandwidth||0),Me=L++,P.push({id:Me,language:H.language,disabledUntilTime:0,primary:H.primary,audio:H,video:W,bandwidth:te,drmInfos:$,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(b=i.g.length?i.g:i.h,D=v(b),k=D.next();!k.done;k=D.next())N=k.value,j=L++,V=N.bandwidth||0,N.dependencyStream&&(V+=N.dependencyStream.bandwidth||0),P.push({id:j,language:N.language,disabledUntilTime:0,primary:N.primary,audio:N.type==r.V?N:null,video:N.type==r.la?N:null,bandwidth:V,drmInfos:N.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});i.l=P,ie(he)})};function MT(e){var t,n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G;return U(function(z){switch(z.g){case 1:if(t=zt,e.length==1)return z.return(e[0]);for(n=e.map(function(W){return new Map(W.filter(function($){return $.type===t.V}).map(function($){return[Kp($),$]}))}),i=e.map(function(W){return new Map(W.filter(function($){return $.type===t.la}).map(function($){return[Gp($),$]}))}),r=e.map(function(W){return new Map(W.filter(function($){return $.type===t.za}).map(function($){return[Fa($),$]}))}),o=e.map(function(W){return new Map(W.filter(function($){return $.type===t.$e}).map(function($){return[Ba($),$]}))}),s=v(r),u=s.next();!u.done;u=s.next())a=u.value,l=RT(t.za),a.set(Fa(l),l);for(f=v(o),d=f.next();!d.done;d=f.next())g=d.value,m=RT(t.$e),g.set(Ba(m),m);return y=new wn,A(z,go(y,[],n,0,sf,uf,0),2);case 2:return x=z.h,A(z,go(y,[],i,0,sf,uf,0),3);case 3:return S=z.h,A(z,go(y,[],r,0,sf,uf,0),4);case 4:return E=z.h,A(z,go(y,[],o,0,sf,uf,0),5);case 5:if(M=z.h,L=0,S.length&&x.length)for(N=v(x),j=N.next();!j.done;j=N.next())for(V=j.value,F=v(S),B=F.next();!B.done;B=F.next())H=B.value,G=L++,H.variantIds.push(G),V.variantIds.push(G);else for(P=S.concat(x),b=v(P),D=b.next();!D.done;D=b.next())k=D.value,k.variantIds=[L++];return z.return(S.concat(x).concat(E).concat(M))}})}function go(e,t,n,i,r,o,s){var u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j;return U(function(V){switch(V.g){case 1:for(u=[],a=0;a<n.length;a++)a>=i?u.push(new Set(n[a].values())):u.push(new Set);l=v(t),f=l.next();case 2:if(f.done){V.s(4);break}return d=f.value,A(V,ck(e,d,n,i,o,u,s),5);case 5:if(g=V.h,!g)throw new _(2,4,4037);f=l.next(),V.s(2);break;case 4:for(m=v(u),y=m.next();!y.done;y=m.next())for(x=y.value,S=v(x),E=S.next();!E.done;E=S.next())M=E.value,(L=fk(e,M,n,r,o,u))&&t.push(L);for(P=v(u),b=P.next();!b.done;b=P.next())for(D=b.value,k=v(D),N=k.next(),j={};!N.done;j={ng:void 0},N=k.next())if(j.ng=N.value,!Hp(j.ng)&&t.some(function(F){return function(B){return Vp(e,F.ng,B)}}(j)))throw new _(2,4,4037);return V.return(t)}})}function ck(e,t,n,i,r,o,s){return U(function(u){return u.g==1?(DT(e,n,t,0<s),t.matchedStreams?t.segmentIndex?A(u,CT(t,i+s),2):u.s(2):u.return(!1)):(kT(t,i,r,o,s),u.return(!0))})}function CT(e,t){var n,i,r,o,s,u;return U(function(a){if(a.g==1){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)o=i[r],n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex()),o.dependencyStream&&!o.dependencyStream.segmentIndex&&n.push(o.dependencyStream.createSegmentIndex());return A(a,Promise.all(n),2)}if(e.segmentIndex instanceof kt)for(s=t;s<i.length;s++)u=i[s],u.segmentIndex&&e.segmentIndex.h.push(u.segmentIndex);ie(a)})}function fk(e,t,n,i,r,o){if(Hp(t))return null;var s=i(t);return DT(e,n,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return U(function(u){return s.segmentIndex?u.s(0):(s.segmentIndex=new kt,A(u,CT(s,0),0))})}),!s.matchedStreams||!s.matchedStreams.length?null:(kT(s,0,r,o,0),s)}function kT(e,t,n,i,r){var o=e.matchedStreams;for(t+=r;t<o.length;t++){var s=o[t];n(e,s);var u=!0;if(e.type=="audio"&&Bo(e.language,s.language)==0&&(u=!1),u&&(i[t-r].delete(s),s.fullMimeTypes))for(s=v(s.fullMimeTypes.values()),u=s.next();!u.done;u=s.next())e.fullMimeTypes.add(u.value)}}function du(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=v(t.matchedStreams),i=n.next();!i.done;i=n.next())i=i.value,i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function sf(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function mo(e,t){function n(s,u){s||(s=[]),u=v(u);for(var a=u.next();!a.done;a=u.next())a=a.value,s.includes(a)||s.push(a);return s}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=v(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=Sd(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new _(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=v(t.closedCaptions),r=i.next();!r.done;r=i.next()){var o=v(r.value);r=o.next().value,o=o.next().value,e.closedCaptions.set(r,o)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=du(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var s=new kt,u=v(e.trickModeVideo.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.trickModeVideo.segmentIndex=s,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),mo(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),mo(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=du(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var s=new kt,u=v(e.dependencyStream.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.dependencyStream.segmentIndex=s,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),mo(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),mo(e.dependencyStream,t))}function uf(e,t){var n=e.roles;n||(n=[]);for(var i=v(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=v(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,Q(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=v(t.closedCaptions),n=t.next();!n.done;n=t.next())i=v(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function DT(e,t,n,i){i=i!==void 0&&i?n.matchedStreams:[],t=v(t);for(var r=t.next();!r.done;r=t.next()){if(r=dk(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function dk(e,t,n){var i={audio:Kp,video:Gp,text:Fa,image:Ba}[n.type],r=null,o=i(n);if(t.has(o))r=t.get(o);else{o={audio:function(l,f){return Vp(e,l,f)},video:function(l,f){return Vp(e,l,f)},text:hk,image:pk}[n.type];for(var s={audio:gk,video:mk,text:vk,image:yk}[n.type],u=v(t.values()),a=u.next();!a.done;a=u.next())a=a.value,!o(n,a)||n.fastSwitching!=a.fastSwitching||r&&!s(n,r,a)||(r=a)}return e.u&&!Hp(r)&&t.delete(i(r)),r}function Ua(e,t){return e.mimeType!=t.mimeType?!1:af(e.codecs)===af(t.codecs)}h.uh=function(e){this.o=e},h.Ah=function(e){this.u=e};function Vp(e,t,n){return!(!Ua(t,n)&&!e.o||t.drmInfos&&!tv(t.drmInfos,n.drmInfos))}function hk(e,t){return t.language?!(e.forced!==t.forced||Bo(e.language,t.language)==0||t.kind!=e.kind):!0}function pk(){return!0}function gk(e,t,n){var i=Ua(e,t),r=Ua(e,n);if(i&&!r)return!1;if(!i&&r||(i=Bo(e.language,t.language),r=Bo(e.language,n.language),r>i))return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=ba(e.channelsCount,t.channelsCount,n.channelsCount),i==Qi?!0:i==Fr?!1:(i=ba(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==Qi?!0:i==Fr?!1:!!(e.bandwidth&&LT(e.bandwidth,t.bandwidth,n.bandwidth)==Qi)))}function mk(e,t,n){var i=Ua(e,t),r=Ua(e,n);if(i&&!r)return!1;if(!i&&r||(i=ba(e.width*e.height,t.width*t.height,n.width*n.height),i==Qi))return!0;if(i==Fr)return!1;if(e.frameRate){if(i=ba(e.frameRate,t.frameRate,n.frameRate),i==Qi)return!0;if(i==Fr)return!1}return!!(e.bandwidth&&LT(e.bandwidth,t.bandwidth,n.bandwidth)==Qi)}function vk(e,t,n){var i=Bo(e.language,t.language),r=Bo(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function yk(e,t,n){return ba(e.width*e.height,t.width*t.height,n.width*n.height)==Qi}function RT(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function PT(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ze([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ba(e,t,n){if(t==e&&e!=n)return Fr;if(n==e&&e!=t)return Qi;if(t>e){if(n<=e||n-e<t-e)return Qi;if(n-e>t-e)return Fr}else{if(n>e)return Fr;if(e-n<e-t)return Qi;if(e-n>e-t)return Fr}return _T}function LT(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Qi:t<e?Fr:_T}function Hp(e){switch(e.type){case be:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Gp(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,af(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Kp(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,af(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Fa(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Ba(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function af(e){if(!Wp.has(e)){var t=dn(e);Wp.set(e,t)}return Wp.get(e)}R("shaka.util.PeriodCombiner",wn),wn.prototype.setUseStreamOnce=wn.prototype.Ah,wn.prototype.setAllowMultiTypeVariants=wn.prototype.uh,wn.prototype.combinePeriods=wn.prototype.gf,wn.prototype.deleteStream=wn.prototype.Kg,wn.prototype.getImageStreams=wn.prototype.oi,wn.prototype.getTextStreams=wn.prototype.Jf,wn.prototype.getVariants=wn.prototype.Ki;var Qi=1,_T=0,Fr=-1,Wp=new Map;function Tk(e,t){var n=new DOMParser,i=wk.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function NT(e,t){try{var n=tr(e);return Tk(n,t)}catch{return null}}var wk=new Ru(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function lf(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.pa=1,this.F=[],this.l={me:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.u=new Map,this.o=new Map,this.B=new Map,this.ka=new Map,this.m=new wn,this.I=0,this.oa=new ae(5),this.K=new Be(function(){if(e.H&&!e.g.continueLoadingWhenPaused&&(e.G.Ja(e.H,"timeupdate"),e.H.paused)){e.G.ma(e.H,"timeupdate",function(){return VT(e)});return}VT(e)}),this.O=new js,this.M=null,this.C=[],this.$=1/0,this.fa=!1,this.h=null,this.L=0,this.P=!1,this.G=new ke,this.H=null,this.T=!1,this.Z="",this.ea=function(){return!1},this.W=[]}h=lf.prototype,h.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.ea=t),n&&this.i&&this.i.presentationTimeline.U()&&this.K.sb(),this.h&&this.h.configure(this.g),this.m&&(this.m.uh(this.g.dash.multiTypeVariantsAllowed&&Lo()),this.m.Ah(this.g.dash.useStreamOnceInPeriodFlattening))},h.start=function(e,t){var n=this,i;return U(function(r){if(r.g==1)return n.fa=t.isLowLatencyMode(),n.A=[e],n.j=t,A(r,Xp(n),2);if(i=r.h,n.j&&zp(n,i),!n.j)throw new _(2,7,7001);return r.return(n.i)})},h.stop=function(){for(var e=v(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o.clear(),this.B.clear(),this.u.clear(),this.l={me:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.m=null,this.K!=null&&(this.K.stop(),this.K=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.O.destroy()},h.update=function(){var e=this,t;return U(function(n){if(n.g==1)return ge(n,2),A(n,Xp(e),4);if(n.g!=2)return Pe(n,0);if(t=Se(n),!e.j||!t)return n.return();e.j.onError(t),ie(n)})},h.onExpirationUpdated=function(){},h.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.cc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.I=t.endTime-e,zp(this,0))}}},h.banLocation=function(e){this.h&&this.h.banLocation(e)},h.setMediaElement=function(e){this.H=e};function Xp(e){var t,n,i,r,o,s,u,a,l,f,d;return U(function(g){return g.g==1?(t=4,n="MPD",i=Ok(e),r=e.A,i.length?(r=i,n="Patch",t=6):1<e.A.length&&e.h&&(o=Oa(e.h,"Location",!0),o.length&&(r=o)),s=qt(r,e.g.retryParameters),u=Date.now(),A(g,Yp(e,s,0,{type:t}),2)):g.g!=3?(a=g.h,e.j?(a.uri&&a.uri!=a.originalUri&&!e.A.includes(a.uri)&&e.A.unshift(a.uri),l=new _t(a.uri),e.Z=l.g.toString(),A(g,Sk(e,a.data,a.uri,n),3)):g.return(0)):(f=Date.now(),d=(f-u)/1e3,e.oa.sample(1,d),g.return(d))})}function Sk(e,t,n,i){var r,o,s,u,a,l,f,d,g,m;return U(function(y){if(y.g==1){if(r=t,o=e.g.dash.manifestPreprocessor,s=Ac,o!=s){if(Ye("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),u=NT(r,i),!u)throw new _(2,4,4001,n);o(u),r=ji(u.outerHTML)}if(a=bu(r,i),!a)throw new _(2,4,4001,n);return l=e.g.dash.manifestPreprocessorTXml,f=Ic,l!=f&&l(a),i==="Patch"?y.return(xk(e,a)):e.g.dash.disableXlinkProcessing?y.return(jT(e,a,n)):(d=e.g.dash.xlinkFailGracefully,g=rf(a,e.g.retryParameters,d,n,e.j.networkingEngine),Go(e.O,g),A(y,g.promise,2))}return m=y.h,y.return(jT(e,m,n))})}function jT(e,t,n){var i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me,he,et,Ve,Oe,Ue,Qe,Ne,Ge,Re,je,dt,Qt,Mt,Dt,Wt,en,ss,Vr,yo;return U(function(Di){switch(Di.g){case 1:for(e.h&&e.h.l.clear(),i=[n],r=[],o=new Map,s=nt(t,"Location"),u=v(s),a=u.next();!a.done;a=u.next())l=a.value,f=l.attributes.serviceLocation,(d=si(l))&&(g=Jt(i,[d])[0],f&&(e.h?fu(e.h,"Location",f,g):o.set(f,g)),r.push(g));if(e.h?(m=Oa(e.h,"Location",!0),0<m.length&&(i=e.A=m)):r.length&&(i=e.A=r),e.l.me=t.attributes.id||"",e.l.Id=Le(t,"publishTime",Zr)||0,e.F=nt(t,"PatchLocation"),y=Promise.resolve(),(x=Bt(t,"ContentSteering"))&&e.j)for(S=x.attributes.defaultServiceLocation,e.h?(e.h.i=i,e.h.h=S):(e.h=new cu(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=i,e.h.h=S,(E=si(x))&&(Le(x,"queryBeforeStart",Nl,!1)?y=ja(e.h,E):ja(e.h,E))),M=v(o.keys()),L=M.next();!L.done;L=M.next())P=L.value,b=o.get(P),fu(e.h,"Location",P,b);if(D=nt(t,"BaseURL"),k=!1,e.h)for(N=v(D),j=N.next();!j.done;j=N.next())V=j.value,F=V.attributes.serviceLocation,B=si(V),F&&B&&(fu(e.h,"BaseURL",F,B),k=!0);if(e.W=null,k&&e.h||(H=D.map(si),e.W=Jt(i,H)),G=function(){return e.h&&k?Oa(e.h,"BaseURL"):e.W?e.W:[]},e.l.Ua=G,z=0,D&&D.length&&(z=Le(D[0],"availabilityTimeOffset",Fu)||0),e.l.cb=z,e.I=Le(t,"minimumUpdatePeriod",ir,-1),W=Le(t,"availabilityStartTime",Zr),$=Le(t,"timeShiftBufferDepth",ir),te=e.g.dash.ignoreSuggestedPresentationDelay,Me=null,te||(Me=Le(t,"suggestedPresentationDelay",ir)),he=e.g.dash.ignoreMaxSegmentDuration,et=null,he||(et=Le(t,"maxSegmentDuration",ir)),Ve=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.T=e.i.presentationTimeline.U()&&Ve=="static"),e.l.type=Ve,e.i)for(Oe=e.i.presentationTimeline,Ue=Oe.pb(),Qe=v(e.o.values()),Ne=Qe.next();!Ne.done;Ne=Qe.next())Ge=Ne.value,Ge.segmentIndex&&Ge.segmentIndex.Oa(Ue);else Re=e.g.dash.ignoreMinBufferTime,je=0,Re||(je=Le(t,"minBufferTime",ir)||0),dt=0,dt=Me!=null?Math.min(Me,$||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*je,$||1/0),Oe=new Te(W,dt,e.g.dash.autoCorrectDrift);return Oe.Gc(Ve=="static"),Oe.U()&&!isNaN(e.g.availabilityWindowOverride)&&($=e.g.availabilityWindowOverride),$==null&&($=1/0),Oe.Ce($),Qt=t.attributes.profiles||"",e.l.profiles=Qt.split(","),Mt={Ob:Ve!="static",presentationTimeline:Oe,qa:null,ha:null,ga:null,J:null,bandwidth:0,Lf:!1,cb:z,Wb:null,profiles:Qt.split(","),roles:null,vb:function(){return""}},A(Di,y,2);case 2:return e.L=0,Dt=FT(e,Mt,G,t,!1),Wt=Dt.duration,en=Dt.periods,(Ve!="static"||e.T)&&Dt.Mg||Oe.bb(Wt||1/0),e.P&&e.fa&&Oe.vh(e.$),Oe.Tf(et||1),e.P&&e.fa&&(ss=Me??e.g.defaultPresentationDelay,Oe.jg(ss)),e.i?(e.i.periodCount=en.length,e.i.gapCount=e.L,A(Di,OT(e,en,!1),4)):A(Di,e.m.gf(en,Mt.Ob),6);case 6:if(e.i={presentationTimeline:Oe,variants:e.m.l,textStreams:e.m.Jf(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Ik(t),nextUrl:Mk(t),periodCount:en.length,gapCount:e.L,isLowLatency:e.P,startTime:null},!Oe.Kh()){Di.s(7);break}return Vr=nt(t,"UTCTiming"),A(Di,Nk(e,G,Vr),8);case 8:if(yo=Di.h,!e.j)return Di.return();Oe.wh(yo);case 7:Oe.ie(),e.m&&!e.i.presentationTimeline.U()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),Ck(e),ie(Di)}})}function OT(e,t,n){var i;return U(function(r){if(r.g==1)return A(r,e.m.gf(t,!0,n),2);e.i.variants=e.m.l,i=e.m.Jf(),0<i.length&&(e.i.textStreams=i),e.i.imageStreams=e.m.i,e.j.filter(e.i),ie(r)})}function xk(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B;return U(function(H){if(H.g==1){if(n=t.attributes.mpdId,i=Le(t,"originalPublishTime",Zr),!n||n!==e.l.me||i!==e.l.Id)throw e.F=[],new _(1,4,4052);for(r=[],o=[],s=new Set,u=v(mv(t)),a=u.next();!a.done;a=u.next())if(l=a.value,f=jl(l.attributes.sel||""),d=f[f.length-1],g=si(l)||"",d.name==="MPD")if(d.ac==="mediaPresentationDuration"){m=si(l)||"";var G=ir(m);if(G!=null){e.l.Wb=G;for(var z=v(e.u.values()),W=z.next();!W.done;W=z.next())W.value.Wb=G}}else if(d.ac==="type"){for(e.i.presentationTimeline.Gc(g=="static"),e.l.type=g,G=v(e.u.values()),z=G.next();!z.done;z=G.next())z.value.Ob=g=="dynamic";g=="static"&&(e.I=-1)}else d.ac==="publishTime"?e.l.Id=Zr(g)||0:d.ac===null&&l.tagName==="add"&&o.push(l);else if(d.name==="PatchLocation")yv(e.F,l);else if(d.name==="Period")l.tagName==="add"?o.push(l):l.tagName==="remove"&&d.id&&Ak(e,d.id);else if(d.name==="SegmentTemplate"){if(z=jl(l.attributes.sel||""),G=z[z.length-1],G.ac){z=UT(e,z),W=si(l)||"";for(var $=v(z),te=$.next();!te.done;te=$.next())te=e.u.get(te.value),wv(te.J.ic,l.tagName,G.ac,W);G=z}else G=[];for(y=G,x=v(y),S=x.next();!S.done;S=x.next())E=S.value,s.add(E)}else if(d.name==="SegmentTimeline"||d.name==="S"){for(G=jl(l.attributes.sel||""),G=UT(e,G),z=v(G),W=z.next();!W.done;W=z.next())W=e.u.get(W.value),W=au(W,po,"SegmentTimeline"),$=nt(W,"S"),yv($,l),W.children=$;for(M=G,L=v(M),P=L.next();!P.done;P=L.next())b=P.value,s.add(b)}for(D=v(s),k=D.next();!k.done;k=D.next())N=k.value,bT(e,N);for(j=v(o),V=j.next();!V.done;V=j.next())F=V.value,r.push.apply(r,Q(Ek(e,F)));return r.length?(e.i.periodCount+=r.length,e.i.gapCount=e.L,A(H,OT(e,r,!0),2)):H.s(2)}e.l.type=="static"&&(B=e.l.Wb,e.i.presentationTimeline.bb(B||1/0)),ie(H)})}function Ek(e,t){return FT(e,{Ob:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,qa:null,ha:null,ga:null,J:null,bandwidth:0,Lf:!1,cb:e.l.cb,profiles:e.l.profiles,Wb:e.l.Wb,roles:null,vb:function(){return""}},e.l.Ua,t,!0).periods}function Ak(e,t){e.i.periodCount--;for(var n=v(e.u.keys()),i=n.next();!i.done;i=n.next())if(i=i.value,i.startsWith(t)){var r=e.u.get(i);au(r,po,"SegmentTimeline").children=[],bT(e,i),e.u.delete(i)}e.C=e.C.filter(function(o){return o!==t})}function UT(e,t){var n="",i="",r=-1,o="";t=v(t);for(var s=t.next();!s.done;s=t.next())s=s.value,s.name==="Period"?n=s.id:s.name==="AdaptationSet"?(i=s.id,s.position!==null&&(r=s.position)):s.name==="Representation"&&(o=s.id);if(t=[],o)t.push(n+","+o);else if(i)for(r=v(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.qa.id===n&&e.ga.id===i&&e.J.id&&t.push(n+","+e.J.id);else if(-1<r)for(i=v(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.qa.id===n&&e.ga.position===r&&e.J.id&&t.push(n+","+e.J.id);return t}function bT(e,t){var n=e.u.get(t),i=e.o.get(t);i.segmentIndex&&i.segmentIndex.Oa(e.i.presentationTimeline.pb());try{var r=xT(n,function(o,s,u,a){return GT(e,o,s,u,a)},e.o,!0,e.g.dash.initialSegmentLimit,e.ka,n.J.aesKey,null,!0);i.createSegmentIndex=function(){return U(function(o){if(o.g==1)return i.segmentIndex?o.s(0):A(o,r.rc(),3);i.segmentIndex=o.h,ie(o)})}}catch(o){if(t=n.J.contentType,t!=be&&t!="application"&&t!="image"||o.code!=4002)throw o}}function Ik(e){var t=Bt(e,"ServiceDescription");if(!t||(e=Bt(t,"Latency"),t=Bt(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function Mk(e){if(e=nt(e,"SupplementalProperty"),!e.length)return null;e=v(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function FT(e,t,n,i,r){var o=t.Wb;o||(o=Le(i,"mediaPresentationDuration",ir),e.l.Wb=o);var s=0;e.i&&e.i.presentationTimeline&&e.T&&(s=e.i.presentationTimeline.Hb());var u=[],a=s;i=nt(i,"Period");for(var l=0;l<i.length;l++){var f=i[l],d=i[l+1],g=Le(f,"start",ir,a),m=f.attributes.id,y=Le(f,"duration",ir);g=l==0&&g==0&&e.T?s:g;var x=null;if(d){var S=Le(d,"start",ir);S!=null&&(x=S-g+s)}else o!=null&&(x=o-g+s);if(S=SA,x&&y&&Math.abs(x-y)>S&&x>y&&e.L++,x==null&&(x=y),!(e.M!==null&&m!==null&&g!==null&&g<e.M)||e.C.includes(m)||l+1==i.length){if(g!==null&&(e.M===null||g>e.M)&&(e.M=g),a=kk(e,t,n,{start:g,duration:x,node:f,$g:x==null||!d}),u.push(a),t.qa.id&&x&&e.ka.set(t.qa.id,x),x==null){a=null;break}a=g+x}}if(r)for(t=v(u),n=t.next();!n.done;n=t.next())n=n.value.id,e.C.includes(n)||e.C.push(n);else e.C=u.map(function(E){return E.id});return o!=null?{periods:u,duration:o+s,Mg:!1}:{periods:u,duration:a,Mg:!0}}function Ck(e){var t=Array.from(e.B.keys()).filter(function(u){return!e.C.includes(u)});t=v(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=v(e.B.get(n)),o=r.next();!o.done;o=r.next()){o=o.value;var s=e.o.get(o);s&&(s.segmentIndex&&s.segmentIndex.getNumReferences()!=0?i=!1:(e.m&&e.m.Kg(s,n),e.o.delete(o)))}i&&e.B.delete(n)}}function kk(e,t,n,i){t.qa=qp(e,i.node,null,n),t.ha=i,t.qa.cb=t.cb,t.qa.id||(t.qa.id="__shaka_period_"+i.start);var r=nt(i.node,"EventStream");n=t.presentationTimeline.pb(),r=v(r);for(var o=r.next();!o.done;o=r.next())jk(e,i.start,i.duration,o.value,n);for(n=nt(i.node,"SupplementalProperty"),n=v(n),r=n.next();!r.done;r=n.next())r=r.value,r.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(r=Va(e,r))&&(t.vb=r);if(n=nt(i.node,"AdaptationSet").map(function(m,y){return BT(e,t,y,m)}).filter(ro),t.Ob){r=[],o=v(n);for(var s=o.next();!s.done;s=o.next()){s=v(s.value.rj);for(var u=s.next();!u.done;u=s.next())r.push(u.value)}if(r.length!=new Set(r).size)throw new _(2,4,4018)}for(r=new Map,o=v(n),s=o.next();!s.done;s=o.next())for(s=v(s.value.ei),u=s.next();!u.done;u=s.next()){var a=v(u.value);u=a.next().value,a=a.next().value,r.set(u,a)}if(r.size)for(o=null,s=v(n),u=s.next();!u.done;u=s.next()){u=u.value,a=[];for(var l=v(u.streams),f=l.next(),d={};!f.done;d={og:void 0},f=l.next())if(d.og=f.value,r.has(d.og.originalId)){o||(o=nt(i.node,"AdaptationSet").map(function(m,y){return BT(e,t,y,m)}).filter(ro)),f=v(o);for(var g=f.next();!g.done;g=f.next())(g=g.value.streams.find(function(m){return function(y){return y.originalId==m.og.originalId}}(d)))&&(g.dependencyStream=r.get(g.originalId),a.push(g))}a.length&&u.streams.push.apply(u.streams,Q(a))}if(i=n.filter(function(m){return!m.vg}),n=n.filter(function(m){return m.vg}),!e.g.disableIFrames){for(n=v(n),r=n.next();!r.done;r=n.next())for(r=r.value,o=r.vg.split(" "),s=v(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.includes(u.id))for(u=v(u.streams),a=u.next();!a.done;a=u.next())Kv(a.value,r.streams)}if(n=cf(e.g.disableAudio,i,"audio"),r=cf(e.g.disableVideo,i,"video"),o=cf(e.g.disableText,i,be),i=cf(e.g.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new _(2,4,4004);return{id:t.qa.id,audioStreams:n,videoStreams:r,textStreams:o,imageStreams:i}}function cf(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,Q(r.streams)),i},[])}function BT(e,t,n,i){function r(B){var H=B.attributes["dvb:fontFamily"];B=B.attributes["dvb:url"],H&&B&&(B=Jt(t.ga.Ua(),[B],t.vb()),e.j.addFont(H,B[0]))}function o(B){switch(B){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(B){switch(B){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ga=qp(e,i,t.qa,null),t.ga.position=n;var u=!1;n=nt(i,"Role");var a=n.map(function(B){return B.attributes.value}).filter(ro),l=void 0,f=t.ga.contentType==be;f&&(l="subtitle"),n=v(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var g=d.attributes.schemeIdUri;if(g==null||g=="urn:mpeg:dash:role:2011")switch(d=d.attributes.value,d){case"main":u=!0;break;case"caption":case"subtitle":l=d}}var m=nt(i,"EssentialProperty");n=null;var y=!1;d=null,g=!1,m=v(m);for(var x=m.next();!x.done;x=m.next()){x=x.value;var S=x.attributes.schemeIdUri;if(S=="http://dashif.org/guidelines/trickmode")n=x.attributes.value;else if(S=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var E=s(parseInt(x.attributes.value,10));else if(S=="urn:mpeg:mpegB:cicp:ColourPrimaries")var M=o(parseInt(x.attributes.value,10));else S!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(S=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?y=!0:S=="urn:dvb:dash:fontdownload:2014"?r(x):S=="urn:mpeg:dash:urlparam:2014"&&(d=Va(e,x))||(g=!0))}if(g)return null;var L=null;for(g=nt(i,"SupplementalProperty"),g=v(g),m=g.next();!m.done;m=g.next())m=m.value,x=m.attributes.schemeIdUri,x=="http://dashif.org/guidelines/last-segment-number"?L=parseInt(m.attributes.value,10)-1:x=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?E=s(parseInt(m.attributes.value,10)):x=="urn:mpeg:mpegB:cicp:ColourPrimaries"?M=o(parseInt(m.attributes.value,10)):x=="urn:dvb:dash:fontdownload:2014"?r(m):x=="urn:mpeg:dash:urlparam:2014"&&(d=Va(e,m));d&&(t.vb=d),d=nt(i,"Accessibility");var P=new Map,b;for(d=v(d),g=d.next();!g.done;g=d.next())if(m=g.value,g=m.attributes.schemeIdUri,m=m.attributes.value,g!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(g!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)g=="urn:mpeg:dash:role:2011"?m!=null&&(a.push(m),m=="captions"&&(l="caption")):g=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(m=="1"?b="visually impaired":m=="2"&&(b="hard of hearing"));else if(g=1,m!=null)for(m=v(m.split(";")),x=m.next();!x.done;x=m.next()){S=x.value;var D=x=void 0;S.includes("=")?(S=S.split("="),x="svc"+S[0],D=S[1].split(",")[0].split(":").pop()):(x="svc"+g,g++,D=S),P.set(x,ct(D))}else P.set("svc1","und");else if(g=1,m!=null)for(m=m.split(";"),x=v(m),S=x.next();!S.done;S=x.next()){D=S.value;var k=S=void 0;D.includes("=")?(D=D.split("="),S=D[0].startsWith("CC")?D[0]:"CC"+D[0],k=D[1]||"und"):(S="CC"+g,m.length==2?g+=2:g++,k=D),P.set(S,ct(k))}else P.set("CC1","und");d=nt(i,"ContentProtection");var N=dT(d,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.ga.encrypted=0<d.length;var j=ct(t.ga.language||"und"),V=t.ga.label,F=new Map;if(i=nt(i,"Representation"),!e.g.ignoreSupplementalCodecs){for(d=[],g=v(i),m=g.next();!m.done;m=g.next())x=m.value,(m=Sr(x,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(x=Xi(x),x.attributes.codecs=m.split(" ").join(","),x.attributes.id&&(x.attributes.supplementalId=x.attributes.id+"_supplementalCodecs"),d.push(x));i.push.apply(i,Q(d))}if(d=i.map(function(B){var H=Dk(e,t,N,l,j,V,u,a,P,B,b,L);return H&&(H.hdr=H.hdr||E,H.colorGamut=H.colorGamut||M,H.fastSwitching=y,B=B.attributes.dependencyId)?(H.baseOriginalId=B,F.set(B,H),null):H}).filter(function(B){return!!B}),d.length==0&&F.size==0){if(n=t.ga.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||f||n)return null;throw new _(2,4,4003)}if(!t.ga.contentType||t.ga.contentType=="application")for(t.ga.contentType=KT(d[0].mimeType,d[0].codecs),f=v(d),g=f.next();!g.done;g=f.next())g.value.type=t.ga.contentType;for(f=t.ga.id||"__fake__"+e.pa++,g=v(d),m=g.next();!m.done;m=g.next()){for(m=m.value,x=v(N.drmInfos),S=x.next();!S.done;S=x.next())S=S.value,S.keyIds=S.keyIds&&m.keyIds?new Set([].concat(Q(S.keyIds),Q(m.keyIds))):S.keyIds||m.keyIds;m.groupId=f}return i=i.map(function(B){return B.attributes.supplementalId||B.attributes.id}).filter(ro),{id:f,contentType:t.ga.contentType,language:j,Qk:u,streams:d,drmInfos:N.drmInfos,vg:n,rj:i,ei:F}}function Va(e,t){if((t=Ui(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Le(t,"useMPDUrlQuery",Nl,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.Z:n.split("&").map(function(i){if(i=="$querypart$")return e.Z;var r=/\$query:(.*?)\$/g.exec(i);if(r&&r.length==2){r=r[1];var o=new ms(e.Z).get(r);if(o.length)return r+"="+o[0]}return i}).join("&")}}return null}function Dk(e,t,n,i,r,o,s,u,a,l,f,d){t.J=qp(e,l,t.ga,null);var g=t.J.id;if(e.$=Math.min(e.$,t.J.cb),e.P=0<e.$,!_k(t.J))return null;var m=t.ha.start;t.bandwidth=Le(l,"bandwidth",xr)||0,t.roles=u;var y=nt(l,"SupplementalProperty"),x=nt(l,"EssentialProperty"),S=nt(l,"ContentProtection");l=null;var E=x.find(function(z){return z.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(E||(E=y.find(function(z){return z.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(l=Va(e,E)),l&&(t.vb=l),E=t.J.contentType,l=E==be||E=="application",E=E=="image",S.length&&(t.ga.encrypted=!0);try{var M=void 0;if(n.cf){var L=t.J.Ua,P=t.vb,b=Jt(L(),[n.cf.Xi],P()),D=qt(b,e.g.retryParameters);M={bitsKey:128,blockCipherMode:"CBC",iv:n.cf.iv,firstMediaSequenceNumber:0,fetchKey:function(){var z,W,$;return U(function(te){if(te.g==1)return A(te,Yp(e,D,6),2);if(te.g!=3){if(z=te.h,!z.data||z.data.byteLength!=16)throw new _(2,4,4049);return W={name:"AES-CBC"},$=M,A(te,w.crypto.subtle.importKey("raw",z.data,W,!0,["decrypt"]),3)}$.cryptoKey=te.h,M.fetchKey=void 0,ie(te)})}}}if(t.J.aesKey=M,L=function(z,W,$,te){return GT(e,z,W,$,te)},t.J.dd)var k=QC(t,L,M);else if(t.J.Zb)k=ZC(t,e.o,M);else if(t.J.ic)k=xT(t,L,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.ka,M,d,!1);else{var N=t.ha.duration||0,j=t.J.Ua,V=t.J.mimeType,F=t.J.codecs;k={rc:function(){var z=fc(m,N,j());return z.Eb(function(W){W.mimeType=V,W.codecs=F}),Promise.resolve(z)}}}}catch(z){if((l||E)&&z.code==4002)return null;throw z}d=bC(S,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),d=new Set(d?[d]:[]),S=!1,y.some(function(z){return z.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&z.attributes.value=="JOC"})&&(S=!0),y=!1,l&&(y=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var B;if(E&&((x=x.find(function(z){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(z.attributes.schemeIdUri)}))&&(B=x.attributes.value),!B))return null;var H;l=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(H="PQ"),x=t.J.id?t.qa.id+","+t.J.id:"",e.F.length&&g&&e.u.set(t.qa.id+","+g,Rk(t));var G=x&&e.o.has(x)?e.o.get(x):{id:e.pa++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){G.segmentIndex&&(G.segmentIndex.release(),G.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:l,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:d,language:r,originalLanguage:t.ga.language,label:o,type:t.ga.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:u,forced:y,channelsCount:t.J.oe,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:S,closedCaptions:a,hdr:H,colorGamut:void 0,videoLayout:void 0,tilesLayout:B,accessibilityPurpose:f,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ot(t.J.mimeType,t.J.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return G.createSegmentIndex=function(){var z;return U(function(W){if(W.g==1)return G.segmentIndex?W.s(0):(z=G,A(W,k.rc(),3));z.segmentIndex=W.h,ie(W)})},x&&t.Ob&&!e.o.has(x)&&(t=t.qa.id||"",e.B.has(t)||e.B.set(t,[]),e.o.set(x,G),e.B.get(t).push(x)),G}function Rk(e){function t(n){return n?(n=Oo(n),n.dd=null,n.Zb=null,n.ic=bd(n.ic),n):null}return e=Oo(e),e.qa=t(e.qa),e.ga=t(e.ga),e.J=t(e.J),e.ha&&(e.ha=Oo(e.ha),e.ha.node=null),e}function VT(e){var t,n;return U(function(i){switch(i.g){case 1:return t=0,ge(i,2),A(i,Xp(e),4);case 4:t=i.h,Pe(i,3);break;case 2:if(n=Se(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),zp(e,t),ie(i)}})}function zp(e,t){if(!(0>e.I)){var n=e.I;0<=e.g.updatePeriod&&(n=e.g.updatePeriod),e.K.da(Math.max(n-t,oe(e.oa)))}}function qp(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,oe:null,audioSamplingRate:null,cb:0,Ae:0,encrypted:!1},i=i||n.Ua;var r=t.attributes.id,o=t.attributes.supplementalId,s=nt(t,"BaseURL"),u,a=!1;if(e.h)for(var l=v(s),f=l.next();!f.done;f=l.next()){var d=f.value;f=d.attributes.serviceLocation,d=si(d),f&&d&&(fu(e.h,r,f,d),a=!0)}a&&e.h||(u=s.map(si)),l=t.attributes.contentType||n.contentType,f=t.attributes.mimeType||n.mimeType,d=Uh([t.attributes.codecs||n.codecs]).join(",");var g=Le(t,"frameRate",AA)||n.frameRate,m=t.attributes.sar||n.pixelAspectRatio,y=Pk(nt(t,"InbandEventStream"),n.emsgSchemeIdUris),x=nt(t,"AudioChannelConfiguration");x=Lk(x)||n.oe;var S=Le(t,"audioSamplingRate",yn)||n.audioSamplingRate;l||(l=KT(f,d));var E=Bt(t,"SegmentBase"),M=Bt(t,"SegmentTemplate"),L=E&&Le(E,"availabilityTimeOffset",Fu)||0,P=M&&Le(M,"availabilityTimeOffset",Fu)||0,b=s&&s.length&&Le(s[0],"availabilityTimeOffset",Fu)||0;L=n.cb+b+L+P,P=null,(b=Bt(t,"SegmentSequenceProperties"))&&(b=Bt(b,"SAP"))&&(P=Le(b,"cadence",In)),b=t.attributes.label;var D=nt(t,"Label");return D&&D.length&&(D=D[0],Gt(D)&&(b=Gt(D))),{Ua:function(){return Jt(i(),s.length?e.h&&a?Oa(e.h,r):u||[]:[])},dd:E||n.dd,Zb:Bt(t,"SegmentList")||n.Zb,ic:M||n.ic,width:Le(t,"width",yn)||n.width,height:Le(t,"height",yn)||n.height,contentType:l,mimeType:f,codecs:d,frameRate:g,pixelAspectRatio:m,emsgSchemeIdUris:y,id:o||r,originalId:r,language:t.attributes.lang,oe:x,audioSamplingRate:S,cb:L,de:null,Ae:P||n.Ae,label:b||null,encrypted:!1}}function Pk(e,t){t=t.slice(),e=v(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function Lk(e){e=v(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&0<t&&t<n.length)return n[t]}}return null}function _k(e){var t=e.dd?1:0;return t+=e.Zb?1:0,t+=e.ic?1:0,t==0?e.contentType==be||e.contentType=="application":(t!=1&&(e.dd&&(e.Zb=null),e.ic=null),!0)}function HT(e,t,n,i){var r,o,s,u,a,l,f;return U(function(d){if(d.g==1)return r=[_n(n)],o=Jt(t(),r),s=qt(o,e.g.retryParameters),s.method=i,u=e.j.networkingEngine.request(4,s,{isPreload:e.ea()}),Go(e.O,u),A(d,u.promise,2);if(a=d.h,i=="HEAD"){if(!a.headers||!a.headers.date)return d.return(0);l=a.headers.date}else l=St(a.data);return f=Date.parse(l),isNaN(f)?d.return(0):d.return(f-Date.now())})}function Nk(e,t,n){var i,r,o,s,u,a,l,f;return U(function(d){switch(d.g){case 1:i=n.map(function(g){return{scheme:g.attributes.schemeIdUri,value:g.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),o=v(i),s=o.next();case 2:if(s.done){d.s(4);break}switch(u=s.value,ge(d,5),a=u.scheme,l=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.s(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.s(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return f=Date.parse(l),d.return(isNaN(f)?0:f-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":J("NTP UTCTiming scheme is not supported");break;default:J("Unrecognized scheme in UTCTiming element",a)}d.s(9);break;case 7:return A(d,HT(e,t,l,"HEAD"),10);case 10:return d.return(d.h);case 8:return A(d,HT(e,t,l,"GET"),11);case 11:return d.return(d.h);case 9:Pe(d,3);break;case 5:Se(d);case 3:s=o.next(),d.s(2);break;case 4:return J("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}})}function jk(e,t,n,i,r){var o=i.attributes.schemeIdUri||"",s=i.attributes.value||"",u=Le(i,"timescale",yn)||1,a=Le(i,"presentationTimeOffset",yn)||0;i=v(nt(i,"Event"));for(var l=i.next();!l.done;l=i.next()){l=l.value;var f=Le(l,"presentationTime",yn)||0,d=Le(l,"duration",yn)||0;f=Math.max((f-a)/u+t,t),d=f+d/u,n!=null&&(f=Math.min(f,t+n),d=Math.min(d,t+n)),d<r||(l={schemeIdUri:o,value:s,startTime:f,endTime:d,id:l.attributes.id||"",timescale:u,eventElement:Sv(l),eventNode:bd(l)},e.j.onTimelineRegionAdded(l))}}function GT(e,t,n,i,r){var o,s,u,a;return U(function(l){return l.g==1?(o=Fi,s=r?0:1,u=fa(t,n,i,e.g.retryParameters),A(l,Yp(e,u,o,{type:s}),2)):(a=l.h,l.return(a.data))})}function KT(e,t){return t=Ot(e,t),Ps(t)?be:e.split("/")[0]}function Yp(e,t,n,i){return i||(i={}),i.isPreload=e.ea(),t=e.j.networkingEngine.request(n,t,i),Go(e.O,t),t.promise}function Ok(e){var t=e.l.Id;if(!e.l.me||!t||!e.F.length)return[];var n=Date.now()/1e3,i=e.F.filter(function(r){return r=yn(r.attributes.ttl),!r||t+r>n}).map(si).filter(ro);return i.length?Jt(e.A,i):[]}R("shaka.dash.DashParser",lf),Wo("application/dash+xml",function(){return new lf}),Wo("video/vnd.mpeg.dash.mpd",function(){return new lf});function ff(){}R("shaka.dependencies",ff),ff.has=function(e){return $p.has(e)},ff.add=function(e,t){if(!XT[e])throw Error(e+" is not supported");e==WT?Ye("mux.js","mux.js is no longer used in Shaka Player."):$p.set(e,function(){return t})};var WT="muxjs",XT={Rk:WT,ISOBoxer:"ISOBoxer"};ff.Allowed=XT;var $p=new Map([["ISOBoxer",function(){return w.ISOBoxer}]]);function zT(e,t,n){this.type=e,this.ca=t,this.segments=n||null}function df(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}df.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};function qT(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function hu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function pe(e,t,n){return(e=hu(e,t))?e.value:n||null}function it(e,t){if(e=hu(e,t),!e)throw new _(2,4,4023,t);return e.value}function YT(e,t,n){n=n===void 0?[]:n,this.ca=t,this.g=e,this.Jb=n}function hf(e,t){this.name=e,this.value=t}function Ei(e,t){return e.filter(function(n){return n.name==t})}function $T(e,t){return e.filter(function(n){return it(n,"TYPE")==t})}function rn(e,t){e=v(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function pu(e,t,n){return n=n===void 0?0:n,(e=rn(e,t))?Number(e.value):n}function vo(e,t,n){return t?QT(e,[t],n):[]}function QT(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(r){return JT(r,n)})),Jt(e,i)}function JT(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=v(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),o=t.get(r);if(o)e=e.replace(i,o);else throw new _(2,4,4039,r)}}return e}function Uk(){this.g=0}function Qp(e,t){t=St(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new _(2,4,4015);t=0;for(var i=!0,r=v(n),o=r.next();!o.done;o=r.next())if(o=o.value,/^#(?!EXT)/m.test(o)||i)i=!1;else if(o=Jp(e,o),--e.g,ZT.includes(o.name)){t=1;break}else o.name=="EXT-X-STREAM-INF"&&(i=!0);for(r=[],i=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{if(s=Jp(e,s),bk.includes(s.name)){if(t!=1)throw new _(2,4,4017);s=n.splice(o,n.length-o),n=[],i=[],o=[],u=null,s=v(s);for(var a=s.next();!a.done;a=s.next())a=a.value,/^(#EXT)/.test(a)?(a=Jp(e,a),ZT.includes(a.name)?r.push(a):a.name=="EXT-X-MAP"?u=a:a.name=="EXT-X-PART"?o.push(a):a.name=="EXT-X-PRELOAD-HINT"?pe(a,"TYPE")=="PART"?o.push(a):pe(a,"TYPE")=="MAP"&&(a.name="EXT-X-MAP",u=a):i.push(a)):/^#(?!EXT)/m.test(a)||(a=a.trim(),u&&i.push(u),n.push(new YT(a,i,o)),i=[],o=[]);return o.length&&(u&&i.push(u),n.push(new YT("",i,o))),new zT(t,r,n)}r.push(s),s.name=="EXT-X-STREAM-INF"&&(s.attributes.push(new hf("URI",u)),i=!0)}}return new zT(t,r)}function Jp(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new _(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new Is(i);var o;(o=No(i,/^([^,=]+)(?:,|$)/g))&&(r=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=No(i,s);)n.push(new hf(o[1],o[2]||o[3])),Ms(i)}return new df(e,t,n,r)}var ZT="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),bk="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function ew(){}function tw(e,t){try{var n=pf(e);return Ns({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(i){return Ho(i)}}function pf(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new _(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new _(2,1,1004,e);var n=t[0];e=w.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;1<t.length&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=Ti(e):r=ji(e),{data:r,contentType:n}}R("shaka.net.DataUriPlugin",ew),ew.parse=tw,Cr("data",tw);function gf(){var e=this;this.g=this.h=null,this.F=1,this.A=new Map,this.I=new Map,this.M=new Map,this.M.set("video",new Map),this.M.set("audio",new Map),this.M.set(be,new Map),this.M.set("image",new Map),this.Sb=new Map().set("com.apple.streamingkeydelivery",function(t,n,i){return aD(e,t,n,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=it(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=it(t,"URI"),n=pf(n.split("?")[0]),n=De(n.data),i=Jr("com.widevine.alpha",i,[{initDataType:"cenc",initData:n}]),(t=pe(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=it(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),t=it(t,"URI"),t=pf(t.split("?")[0]),t=De(t.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n=$l(t,n,new Set,0),i=Jr("com.microsoft.playready",i,[{initDataType:"cenc",initData:n}]),(t=Uo(["<PLAYREADY>",Tr(t),"</PLAYREADY>"].join(`
`)))&&(i.licenseServerUri=tf(t)),i=Promise.resolve(i)}else i=Promise.resolve(null);return i}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=it(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=it(t,"URI"),n=pf(n.split("?")[0]),n=De(n.data),i=Jr("com.huawei.wiseplay",i,[{initDataType:"cenc",initData:n}]),(t=pe(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}),this.Na=new Set,this.i=new Map,this.l=null,this.C="",this.Ga=new Uk,this.K=-1,this.ea=1/0,this.$=this.Ub=this.Ma=!1,this.B=new Be(function(){if(e.W&&!e.g.continueLoadingWhenPaused&&(e.T.Ja(e.W,"timeupdate"),e.W.paused)){e.T.ma(e.W,"timeupdate",function(){return xw(e)});return}xw(e)}),this.Ea=wf,this.m=null,this.La=0,this.o=1/0,this.Fa=this.Aa=this.P=0,this.Z=new js,this.G=new Map,this.H=new Map,this.sa=new Map,this.ka=new Map,this.L=new Map,this.oa=new Map,this.pa=new Map,this.Tb=this.fa=!1,this.Pb=new ae(5),this.j=null,this.O=!0,this.ya=new Set,this.T=new ke,this.u=this.W=null,this.Qb=function(){return!1}}h=gf.prototype,h.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.Qb=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.U()&&this.B.sb()},h.start=function(e,t){var n=this,i;return U(function(r){return r.g==1?(n.h=t,n.fa=t.isLowLatencyMode(),A(r,sg(n,[e]).promise,2)):r.g!=3?(i=r.h,n.C=i.uri,A(r,Vk(n,i.data),3)):r.return(n.m)})},h.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.Z&&(e.push(this.Z.destroy()),this.Z=null),this.g=this.h=null,this.Na.clear(),this.m=null,this.i.clear(),this.I.clear(),this.H.clear(),this.A.clear(),this.sa.clear(),this.ka.clear(),this.L.clear(),this.oa.clear(),this.pa.clear(),this.ya.clear(),this.j&&this.j.destroy(),this.T&&(this.T.release(),this.T=null),Promise.all(e)},h.update=function(){var e=this,t,n,i,r,o,s,u,a,l,f,d,g;return U(function(m){if(m.g==1){if(!kn(e))return m.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,i=n.filter(function(y){return y.stream.segmentIndex}),r=v(i),o=r.next();!o.done;o=r.next())s=o.value,t.push(Fk(e,s));return A(m,Promise.all(t),2)}for(lw(e,i.map(function(y){return y.stream})),u=i.some(function(y){return y.rd==0}),i.length&&!u&&(a=hD,yf(e,a.Ph),l=i.map(function(y){return y.Vb}),e.l.bb(Math.min.apply(Math,Q(l))),e.h.updateDuration()),u&&eg(e),f=v(i),d=f.next();!d.done;d=f.next())g=d.value,g.stream.isAudioMuxedInVideo||!g.stream.segmentIndex||Yi(g.stream.segmentIndex)||e.h.disableStream(g.stream);ie(m)})};function Zp(e,t){return kn(e)?e.M.get(t.type):t.je}function Fk(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me,he,et;return U(function(Ve){switch(Ve.g){case 1:if(t.stream.isAudioMuxedInVideo)return Ve.return();for(n=[],i=v(t.N()),r=i.next();!r.done;r=i.next())o=r.value,s=new _t(o),u=s.g,t.Td&&(0<=t.Ab&&u.add("_HLS_msn",String(t.Ab)),0<=t.Bb&&u.add("_HLS_part",String(t.Bb))),t.Ud&&u.add("_HLS_skip","YES"),Zm(u)&&Do(s,gs(u.toString())),n.push(s.toString());return ge(Ve,2),A(Ve,sg(e,n,!0).promise,4);case 4:a=Ve.h,Pe(Ve,3);break;case 2:throw l=Se(Ve),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return Ve.return();if(f=Qp(e.Ga,a.data),f.type!=1)throw new _(2,4,4017);return d=a.uri,d==a.originalUri||t.N().includes(d)||t.ve.push(d),g=Ei(f.ca,"EXT-X-DEFINE"),m=tg(e,g,d),y=t.stream,x=Zp(e,t),A(Ve,hw(e,f,y.mimeType,t.N,m),5);case 5:for(S=Ve.h,E=S.keyIds,M=S.drmInfos,L=S.encrypted,P=S.Bg,y.encrypted||!L||P||(y.encrypted=!0),b=function(Oe,Ue){return Oe.size===Ue.size&&[].concat(Q(Oe)).every(function(Qe){return Ue.has(Qe)})},b(y.keyIds,E)||(y.keyIds=E,y.drmInfos=M,e.h.newDrmInfo(y)),D=Tw(e,f,x,m,t.N,t.type),k=D.segments,(N=D.bandwidth)&&(y.bandwidth=N),j=hc(y),V=v(k),F=V.next();!F.done;F=V.next())B=F.value,B.Y&&(B.Y.Wc=j);y.segmentIndex.Bd(k,e.l.pb()),k.length&&(H=pu(f.ca,"EXT-X-MEDIA-SEQUENCE",0),z=(G=rn(f.ca,"EXT-X-SKIP"))?Number(pe(G,"SKIPPED-SEGMENTS")):0,W=fw(H,k),$=W.Ab,te=W.Bb,t.Ab=$+z,t.Bb=te,Me=x.get(H),y.segmentIndex.Oa(Me)),(he=Yi(y.segmentIndex))&&(t.Bc=he.startTime,et=k[k.length-1],t.Vb=et.endTime),rn(f.ca,"EXT-X-ENDLIST")&&(t.rd=!0),ig(e,f),rg(e,f.ca,y.type,m,t.N),ie(Ve)}})}h.onExpirationUpdated=function(){},h.onInitialVariantChosen=function(){},h.banLocation=function(e){this.j&&this.j.banLocation(e)},h.setMediaElement=function(e){this.W=e};function nw(e,t,n){n=n===void 0?!1:n;for(var i=e.K==-1,r=v(t),o=r.next();!o.done;o=r.next()){o=o.value;var s=o.stream.segmentIndex,u=Zp(e,o);if(s=Yi(s)){u=v(u);for(var a=u.next();!a.done;a=u.next()){a=v(a.value);var l=a.next().value;if(a.next().value==s.startTime){i&&(e.K=Math.max(e.K,l)),o.qf=l;break}}}}if(!(0>e.K))for(t=v(t),i=t.next();!i.done;i=t.next())i=i.value,(Ha(e,i.type)||n)&&(r=i.stream.segmentIndex)&&(o=e.K-i.qf,0<o&&(r.g.splice(0,o),r=Yi(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),iw(e,i,r)))}function Bk(e,t){if(e.ea==1/0){t=v(t);for(var n=t.next();!n.done;n=t.next())n=Yi(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ea=Math.min(e.ea,n.h))}if(t=e.ea,t!=1/0){n=v(e.i.values());for(var i=n.next();!i.done;i=n.next())if(i=i.value,!Ha(e,i.type)){var r=i.stream.segmentIndex;if(r!=null){var o=Yi(r);if(o)if(o.h==null)fe("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.N(),"Expect AV sync issues!");else for(iw(e,i,o.h-t-o.startTime),i=v(r),r=i.next();!r.done;r=i.next())r.value.qg(t)}}}}function iw(e,t,n){if(!(.001>Math.abs(n))){t.Bc+=n,t.Vb+=n,e=Zp(e,t);for(var i=v(e),r=i.next();!r.done;r=i.next()){var o=v(r.value);r=o.next().value,o=o.next().value,e.set(r,o+n)}t.N()}}function Vk(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me,he,et,Ve,Oe,Ue,Qe,Ne,Ge;return U(function(Re){switch(Re.g){case 1:return n=zt,i=Qp(e.Ga,t),r=Ei(i.ca,"EXT-X-DEFINE"),o=[],s=[],u=[],e.l=new Te(null,0),e.l.Gc(!0),a=function(){return[e.C]},l=null,f=new Map,i.type==1?(e.O=!1,$=Ei(i.ca,"EXT-X-DEFINE"),f=tg(e,$,e.C),l=n.la,te="",Me=new Map,A(Re,cw(e,e.F++,f,i,a,"",l,te,!0,"Media Playlist",null,Me,null,!1,null,!1),7)):(Gk(e,r),d=Ei(i.ca,"EXT-X-MEDIA"),g=Ei(i.ca,"EXT-X-STREAM-INF"),m=Ei(i.ca,"EXT-X-IMAGE-STREAM-INF"),y=Ei(i.ca,"EXT-X-I-FRAME-STREAM-INF"),x=Ei(i.ca,"EXT-X-SESSION-KEY"),S=Ei(i.ca,"EXT-X-SESSION-DATA"),E=Ei(i.ca,"EXT-X-CONTENT-STEERING"),Wk(e,S),A(Re,Xk(e,E),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(M=[],L=v(g),P=L.next(),b={};!P.done;b={Gh:void 0},P=L.next())D=P.value,(k=pe(D,"SUPPLEMENTAL-CODECS"))&&(b.Gh=k.split(/\s*,\s*/).map(function(je){return je.split("/")[0]}),N=D.attributes.map(function(je){return function(dt){var Qt=dt.name,Mt=dt.value;return Qt=="CODECS"&&(Mt=je.Gh.join(","),dt=dt.value.split(","),1<dt.length&&(dt=Nn("audio",dt))&&(Mt+=","+dt)),new hf(Qt,Mt)}}(b)),M.push(new df(D.id,D.name,N,null)));for(g.push.apply(g,Q(M)),j=[],V=v(y),F=V.next(),B={};!F.done;B={Hh:void 0},F=V.next())H=F.value,(G=pe(H,"SUPPLEMENTAL-CODECS"))&&(B.Hh=G.split(/\s*,\s*/).map(function(je){return je.split("/")[0]}),z=H.attributes.map(function(je){return function(dt){var Qt=dt.name;return dt=dt.value,Qt=="CODECS"&&(dt=je.Hh.join(",")),new hf(Qt,dt)}}(B)),j.push(new df(H.id,H.name,z,null)));y.push.apply(y,Q(j))}return Kk(e,g),eD(e,d),W=$k(e,y),A(Re,Qk(e,g,x,d,a,e.A,W),5);case 5:return o=Re.h,s=zk(e,d),A(Re,qk(e,m,y),6);case 6:u=Re.h,Re.s(3);break;case 7:he=Re.h,e.i.set(e.C,he),he.stream&&(et=hc(he.stream),he.stream.segmentIndex.Eb(function(je){je.Y&&(je.Y.Wc=et)})),l=he.stream.type,o.push({id:0,language:ct(te||"und"),disabledUntilTime:0,primary:!0,audio:l=="audio"?he.stream:null,video:l=="video"?he.stream:null,bandwidth:he.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new _(2,7,7001);if(gw(e,i),i.type==1&&(kn(e)&&(mw(e,i),Ve=e.o,e.B.da(Ve)),Oe=Array.from(e.i.values()),ng(e,Oe),eg(e),rg(e,i.ca,l,f,a)),e.m={presentationTimeline:e.l,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.$||!e.g.hls.disableCodecGuessing){Re.s(8);break}for(Ue=[],Qe=v(e.m.variants),Ne=Qe.next();!Ne.done;Ne=Qe.next())Ge=Ne.value,Ge.audio&&Ge.audio.codecs===""&&Ue.push(Ge.audio.createSegmentIndex()),Ge.video&&Ge.video.codecs===""&&Ue.push(Ge.video.createSegmentIndex());return A(Re,Promise.all(Ue),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),ie(Re)}})}function Hk(e,t){var n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M;return U(function(L){if(L.g==1)return n=Oh(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=ww(e,t),r=i.segment,o=i.segmentIndex,s=r.N(),u=s[0],a=new _t(u),l=a.ab.split(".").pop(),(f=ug.get(l))?L.return(Oh(f)):A(L,Promise.all([rw(e,r.Y,0),rw(e,r,o)]),2)):L.return(n);if(d=L.h,g=d[1].mimeType,m=d[0].data,y=d[1].data,x="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),S=["audio/mp4","video/mp4","video/iso.segment"],Gs(De(y))){var P=y,b=e.g.disableAudio,D=e.g.disableVideo,k=e.g.disableText,N=De(P),j=new yt().parse(N),V=j.od();N=j.Kf();var F=[],B=!1,H=!1;if(!b)switch(V.audio){case"aac":case"aac-loas":j.fb().length&&(F.push("mp4a.40.2"),B=!0);break;case"mp3":j.fb().length&&(F.push("mp4a.40.34"),B=!0);break;case"ac3":j.fb().length&&(F.push("ac-3"),B=!0);break;case"ec3":j.fb().length&&(F.push("ec-3"),B=!0);break;case"opus":j.fb().length&&(F.push("opus"),B=!0)}if(!D)switch(V.video){case"avc":N.codec?F.push(N.codec):F.push("avc1.42E01E"),H=!0;break;case"hvc":N.codec?F.push(N.codec):F.push("hvc1.1.6.L93.90"),H=!0;break;case"av1":F.push("av01.0.01M.08"),H=!0}if(F.length){if(b=B&&!H,D=new Map,H&&!k){for(k=new oi("video/mp2t"),k.i(P),P=v(k.j()),H=P.next();!H.done;H=P.next())H=H.value,D.set(H,H);k.g()}N={type:b?"audio":"video",mimeType:"video/mp2t",codecs:F.join(", "),language:null,height:N.height,width:N.width,channelCount:null,sampleRate:null,closedCaptions:D,Nd:null,colorGamut:null,frameRate:N.frameRate}}else N=null;if(E=N)return L.return(E)}else if((r.Y||x.includes(l)||S.includes(g))&&(M=pI(m,y,e.g.disableText)))return L.return(M);return g?L.return(Oh(g)):L.return(n)})}function rw(e,t,n){var i,r,o,s,u,a;return U(function(l){switch(l.g){case 1:return t?(i=Fi,r=fa(t.N(),t.uc(),t.tc(),e.g.retryParameters),o=t instanceof ye?1:0,A(l,Br(e,r,i,{type:o}).promise,2)):l.return({mimeType:null,data:null});case 2:if(s=l.h,u=s.data,!t.aesKey){l.s(3);break}return A(l,bh(u,t.aesKey,n),4);case 4:u=l.h;case 3:return t instanceof ye?t.Kd(u,!0):t.Kd(u),(a=s.headers["content-type"])&&(a=a.split(";")[0].toLowerCase()),l.return({mimeType:a,data:u})}})}function eg(e){if(kn(e)){if(e.Ea==Sf){for(var t=1/0,n=1/0,i=v(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.Vb),n=Math.min(n,r.Bc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Ce(t)}}else e.l.bb(aw(e));if(!e.l.u)for(t=v(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=Yi(n.stream.segmentIndex))&&n.h&&e.l.xh(n.h);e.l.ie()}function Gk(e,t){var n=new _t(e.C).g;t=v(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=pe(r,"NAME");var o=pe(r,"VALUE");r=pe(r,"QUERYPARAM"),i&&o&&(e.A.has(i)||e.A.set(i,o)),r&&(i=n.get(r)[0])&&!e.A.has(i)&&e.A.set(r,i)}}function tg(e,t,n){n=new _t(n).g;var i=new Map;t=v(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value,s=pe(o,"NAME"),u=pe(o,"VALUE");r=pe(o,"QUERYPARAM"),o=pe(o,"IMPORT"),s&&u&&(i.has(s)||i.set(s,u)),r&&(s=n.get(r)[0])&&!i.has(s)&&i.set(r,s),o&&(r=e.A.get(o))&&i.set(o,r)}return i}function Kk(e,t){t=v(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=pe(i,"AUDIO");n=pe(i,"VIDEO");var o=pe(i,"SUBTITLES");if(i=ow(e,i),o){var s=Nn(be,i);e.H.set(o,s),Oi(i,s)}r&&(o=Nn("audio",i),o||(o=e.g.hls.defaultAudioCodec),e.H.set(r,o)),n&&(r=Nn("video",i),r||(r=e.g.hls.defaultVideoCodec),e.H.set(n,r))}}function Wk(e,t){t=v(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=pe(i,"DATA-ID");n=pe(i,"URI");var o=pe(i,"LANGUAGE");i=pe(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",vo([e.C],n,e.A)[0]),o&&r.set("language",o),i&&r.set("value",i),n=new re("sessiondata",r),e.h&&e.h.onEvent(n)}}function Xk(e,t){var n,i,r,o,s,u;return U(function(a){if(!e.h||!e.g)return a.return();for(i=v(t),r=i.next();!r.done;r=i.next())if(o=r.value,s=pe(o,"PATHWAY-ID"),u=pe(o,"SERVER-URI"),s&&u){e.j=new cu(e.h),e.j.configure(e.g),e.j.i=[e.C],e.j.setManifestType("HLS"),e.j.h=s,n=ja(e.j,u);break}return A(a,n,0)})}function zk(e,t){var n=$T(t,"SUBTITLES");t=n.map(function(s){if(e.g.disableText)return null;try{return sw(e,[s],new Map).stream}catch(u){if(e.g.hls.ignoreTextStreamFailures)return null;throw u}}),n=v(n);for(var i=n.next();!i.done;i=n.next()){var r=it(i.value,"GROUP-ID");if((i=e.H.get(r))&&(r=e.I.get(r))){r=v(r);for(var o=r.next();!o.done;o=r.next())o=o.value,o.stream.codecs=i,o.stream.mimeType=og(be,i)||vf(be),is(o.stream)}}return t.filter(function(s){return s})}function is(e){var t=new Set([Ot(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Eb(function(n){n.mimeType&&t.add(Ot(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function qk(e,t,n){var i,r;return U(function(o){return o.g==1?(i=t.map(function(s){var u,a;return U(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(ge(l,2),A(l,tD(e,s),4));if(l.g!=2)return u=l.h,l.return(u.stream);if(a=Se(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}).concat(n.map(function(s){if(e.g.disableThumbnails)return null;try{var u=uw(e,s);return u.stream.type!=="image"?null:u.stream}catch(a){if(e.g.hls.ignoreImageStreamFailures)return null;throw a}})),A(o,Promise.all(i),2)):(r=o.h,o.return(r.filter(function(s){return s})))})}function Yk(e,t,n){t=t.filter(function(u){var a=pe(u,"URI")||"";return u=pe(u,"TYPE"),u!="SUBTITLES"&&(a!=""||u=="AUDIO")});var i={};t=v(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=qT(r,!e.j);i[o]?i[o].push(r):i[o]=[r]}for(var s in i)sw(e,i[s],n,!1)}function $k(e,t){return t.map(function(n){return n=uw(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function Qk(e,t,n,i,r,o,s){var u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me,he,et,Ve,Oe,Ue,Qe,Ne;return U(function(Ge){switch(Ge.g){case 1:if(u=[],a=new Set,e.g.ignoreDrmInfo||!(0<n.length)){Ge.s(2);break}l=v(n),f=l.next();case 3:if(f.done){Ge.s(2);break}if(d=f.value,g=it(d,"METHOD"),m=pe(d,"KEYFORMAT")||"identity",y=null,g=="NONE"){Ge.s(4);break}if(Tf(g)){x=vo(r(),it(d,"URI"),o),S=x.sort().join(""),e.L.has(S)||(E=qt(x,e.g.retryParameters),M=Br(e,E,6).promise,e.L.set(S,M)),Ge.s(4);break}if(m=="identity")return A(Ge,Ew(e,d,"",r,null,o),12);if(L=e.Sb.get(m),!L){P=null,Ge.s(10);break}return A(Ge,L(d,"",null),11);case 11:P=Ge.h;case 10:y=P,Ge.s(6);break;case 12:y=Ge.h;case 6:if(y){if(y.keyIds)for(b=v(y.keyIds),D=b.next();!D.done;D=b.next())k=D.value,a.add(k);u.push(y)}case 4:f=l.next(),Ge.s(3);break;case 2:for(N={},j=v(t),V=j.next();!V.done;V=j.next())F=V.value,B=qT(F,!e.j),N[B]?N[B].push(F):N[B]=[F];H=[];for(G in N)z=N[G],W=z[0],$=pe(W,"FRAME-RATE"),te=Number(pe(W,"AVERAGE-BANDWIDTH"))||Number(it(W,"BANDWIDTH")),Me=pe(W,"RESOLUTION"),he=v(Me?Me.split("x"):[null,null]),et=he.next().value,Ve=he.next().value,Oe=pe(W,"VIDEO-RANGE"),(Ue=pe(W,"REQ-VIDEO-LAYOUT"))&&Ue.includes(",")&&(Qe=Ue.split(",").filter(function(Re){return Re=="CH-STEREO"||Re=="CH-MONO"}),Ue=Qe[0]),Ue=Ue||"CH-MONO",Ne=Jk(e,z,i),H.push.apply(H,Q(Zk(e,Ne.audio,Ne.video,te,et,Ve,$,Oe,Ue,u,a,s)));return Ge.return(H.filter(function(Re){return Re!=null}))}})}function Jk(e,t,n){for(var i={audio:[],video:[]},r=new Map,o=[],s=!1,u=!1,a=v(t),l=a.next();!l.done;l=a.next()){var f=l.value;l=pe(f,"AUDIO");var d=pe(f,"VIDEO"),g=l||d;g&&(o.includes(g)||o.push(g),(f=pe(f,"PATHWAY-ID"))&&r.set(g,f),l?s=!0:d&&(u=!0))}o.length&&n.length&&(n=n.filter(function(y){return o.includes(it(y,"GROUP-ID"))}),Yk(e,n,r)),n=(r=o.sort().join(","))&&e.I.has(r)?e.I.get(r):[],s?i.audio.push.apply(i.audio,Q(n)):u&&i.video.push.apply(i.video,Q(n)),s=!1;var m=t.map(function(y){return it(y,"URI")});return l=i.audio.find(function(y){return y&&y.N().find(function(x){return m.includes(x)})}),u=ow(e,t[0]),n=Nn("video",u),(a=Nn("audio",u))&&!n?(l="audio",s=0<i.audio.length):!i.audio.length&&!i.video.length&&a&&n?(l="video",u=[[n,a].join()]):i.audio.length&&l?(l="audio",s=!0):l=i.video.length&&!i.audio.length?"audio":"video",s||(e=nD(e,t,u,l),r&&(e.stream.groupId=r),i[e.stream.type]=[e]),i}function ow(e,t){return t=pe(t,"CODECS")||"",e.$=0<t.length,e.$||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Uh(t.split(/\s*,\s*/))}function Zk(e,t,n,i,r,o,s,u,a,l,f,d){for(var g=v(n),m=g.next();!m.done;m=g.next())Sw(m.value.stream,r,o,s,u,a,null);for(r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r=[],t=v(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=v(n),u=s.next();!u.done;u=s.next()){var y=u.value;(u=o?o.stream:null)&&(u.drmInfos=l,u.keyIds=f),(a=y?y.stream:null)&&(a.drmInfos=l,a.keyIds=f,e.g.disableIFrames||Kv(a,d)),a&&!u&&(a.bandwidth=i),!a&&u&&(u.bandwidth=i),g=o?o.stream.drmInfos:null,m=y?y.stream.drmInfos:null,y=y?y.N().sort().join(","):"";var x=o?o.N().sort().join(","):"",S=[];u&&u.codecs&&S.push(u.codecs),a&&a.codecs&&S.push(a.codecs),y=[y,x,S.sort()].join("-"),u&&a&&!tv(g,m)||e.Na.has(y)||(u={id:e.F++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!a&&a.primary,audio:u,video:a,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(u),e.Na.add(y))}return r}function eD(e,t){t=$T(t,"CLOSED-CAPTIONS"),e.O=t.length==0,t=v(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=pe(i,"LANGUAGE");n=ct(r||"und"),r||(r=pe(i,"NAME"))&&(n=r),r=it(i,"GROUP-ID"),i=it(i,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(r)||e.G.set(r,new Map),e.G.get(r).set(i,n)}}function sw(e,t,n,i){i=i===void 0?!0:i;for(var r=[],o=[],s=new Map,u=v(t),a=u.next();!a.done;a=u.next()){var l=a.value;a=i?it(l,"URI"):pe(l,"URI")||"shaka://hls-muxed",l=it(l,"GROUP-ID"),r.push(a),o.push(l),s.set(l,a)}if(i=o.sort().join(","),a=t[0],t="",u=it(a,"TYPE").toLowerCase(),u=="subtitles"&&(u=be),u==be)t=pe(a,"CODECS")||"";else for(o=v(o),l=o.next();!l.done;l=o.next())if(l=l.value,e.H.has(l)){t=e.H.get(l);break}if(o=r.sort().join(","),e.i.has(o))return e.i.get(o);if(l=e.F++,e.j){s=v(s);for(var f=s.next();!f.done;f=s.next()){var d=v(f.value);f=d.next().value,d=d.next().value,(f=n.get(f))&&fu(e.j,l,f,d)}}n=pe(a,"LANGUAGE"),s=pe(a,"NAME"),f=pe(a,"DEFAULT")=="YES",u=="audio"?d=(d=pe(a,"CHANNELS"))?parseInt(d.split("/")[0],10):null:d=null;var g;u=="audio"&&(g=pe(a,"CHANNELS"))?(g=g.split("/"),g=g.length!=2?!1:g[1]==="JOC"||g[1].includes("ATMOS")):g=!1;var m=pe(a,"CHARACTERISTICS"),y=pe(a,"FORCED")=="YES";return u=="audio"?a=(a=pe(a,"SAMPLE-RATE"))?parseInt(a,10):null:a=null,r=mf(e,l,r,t,u,n,f,s,d,null,m,y,a,g),r.stream&&(r.stream.groupId=i),e.I.has(i)?e.I.get(i).push(r):e.I.set(i,[r]),e.i.set(o,r),r}function tD(e,t){var n,i,r,o,s,u,a,l,f,d;return U(function(g){return g.g==1?(n=it(t,"URI"),i=pe(t,"CODECS","jpeg")||"",e.i.has(n)?g.return(e.i.get(n)):(r=pe(t,"LANGUAGE"),o=pe(t,"NAME"),s=pe(t,"CHARACTERISTICS"),u=mf(e,e.F++,[n],i,"image",r,!1,o,null,null,s,!1,null,!1),(a=pe(t,"RESOLUTION"))?A(g,u.stream.createSegmentIndex(),3):g.s(2))):(g.g!=2&&(l=Yi(u.stream.segmentIndex),f=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(f.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(f.split("x")[1])),(d=pe(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(d)),e.i.set(n,u),g.return(u))})}function uw(e,t){var n="video",i=it(t,"URI"),r=pe(t,"CODECS")||"";if(r=="mjpg"&&(n="image"),e.i.has(i))return e.i.get(i);var o=pe(t,"LANGUAGE"),s=pe(t,"NAME"),u=pe(t,"CHARACTERISTICS");return n=mf(e,e.F++,[i],r,n,o,!1,s,null,null,u,!1,null,!1),r=pe(t,"RESOLUTION"),o=v(r?r.split("x"):[null,null]),r=o.next().value,o=o.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(o)||void 0,(t=pe(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function nD(e,t,n,i){for(var r=e.F++,o=[],s=v(t),u=s.next();!u.done;u=s.next()){var a=u.value;u=it(a,"URI"),a=pe(a,"PATHWAY-ID"),e.j&&a&&fu(e.j,r,a,u),o.push(u)}if(s=o.sort().join(",")+n.sort().join(","),e.i.has(s))return e.i.get(s);u=o.join(",");e:{if(t=pe(t[0],"CLOSED-CAPTIONS"),i=="video"){if(e.g.disableText){e.O=!1,t=null;break e}if(t){if(t!="NONE"){t=e.G.get(t);break e}e.O=!1}else if(!t&&e.G.size)for(t=v(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}}t=null}return n=xs(i,n),i=mf(e,r,o,n,i,null,!1,u,null,t,null,!1,null,!1),e.i.set(s,i),i}function mf(e,t,n,i,r,o,s,u,a,l,f,d,g,m){function y(P){var b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me,he,et,Ve,Oe,Ue,Qe,Ne,Ge;return U(function(Re){switch(Re.g){case 1:return b=zt,ge(Re,2),A(Re,P.promise,4);case 4:if(D=Re.h,P.aborted)return Re.return();if(k=D.uri,k!=D.originalUri&&(N=E.N(),N.includes(k)||E.ve.push(k)),j=Qp(e.Ga,D.data),j.type!=1)throw new _(2,4,4017);return V=Ei(j.ca,"EXT-X-DEFINE"),F=tg(e,V,k),B=!1,(!e.$&&e.g.hls.disableCodecGuessing||e.O&&r==b.la&&!e.g.hls.disableClosedCaptionsDetection)&&0<j.segments.length&&(e.O=!1,B=!0),H=!e.$&&e.g.hls.disableCodecGuessing,G=kn(e),A(Re,cw(e,0,F,j,x,i,r,o,s,u,a,l,f,d,g,m,void 0,B,H),5);case 5:if(z=Re.h,P.aborted)return Re.return();if(W=z.stream,gw(e,j),kn(e)&&!G&&mw(e,j),E.Bc=z.Bc,E.Vb=z.Vb,E.Ud=z.Ud,E.Td=z.Td,E.rd=z.rd,E.je=z.je,E.Ab=z.Ab,E.Bb=z.Bb,E.Rf=!0,S.segmentIndex=W.segmentIndex,S.encrypted=W.encrypted,S.drmInfos=W.drmInfos,S.keyIds=W.keyIds,S.mimeType=W.mimeType,S.bandwidth=S.bandwidth||W.bandwidth,S.codecs=S.codecs||W.codecs,S.closedCaptions=S.closedCaptions||W.closedCaptions,S.width=S.width||W.width,S.height=S.height||W.height,S.hdr=S.hdr||W.hdr,S.colorGamut=S.colorGamut||W.colorGamut,S.frameRate=S.frameRate||W.frameRate,S.language=="und"&&W.language!="und"&&(S.language=W.language),S.language=S.language||W.language,S.channelsCount=S.channelsCount||W.channelsCount,S.audioSamplingRate=S.audioSamplingRate||W.audioSamplingRate,is(S),S.drmInfos.length&&e.h.newDrmInfo(S),$=!1,(!l&&S.closedCaptions||l&&S.closedCaptions&&l.size!=S.closedCaptions.size)&&($=!0),e.m&&$&&e.h.makeTextStreamsForClosedCaptions(e.m),r==b.la||r==b.V)for(te=v(e.i.values()),Me=te.next();!Me.done;Me=te.next())he=Me.value,he.Rf||he.type!=r||(he.stream.mimeType=W.mimeType,is(he.stream));r==b.za&&(et=Yi(W.segmentIndex))&&et.Y&&(S.mimeType="application/mp4",is(S)),Ve=hc(S),S.segmentIndex.Eb(function(je){je.Y&&(je.Y.Wc=Ve)}),iD(e)&&(e.Ub?ng(e,[E]):(e.Ub=!0,Oe=Array.from(e.i.values()),Ue=Oe.filter(function(je){return je.stream.segmentIndex}),ng(e,Ue),eg(e),Qe=e.o,0<Qe&&e.B.da(Qe))),rg(e,j.ca,S.type,F,x),e.m&&(e.m.startTime=e.u),Pe(Re,0);break;case 2:if(Ne=Se(Re),S.closeSegmentIndex(),Ne.code===7001)return Re.return();if(Ge=e.h.disableStream(S),!Ge)throw Ne;ie(Re)}})}function x(){return e.j&&1<n.length?Oa(e.j,t):E.ve.concat(QT([e.C],n,e.A))}var S=dw(e,i,r,o,s,u,a,l,f,d,g,m);n.includes("shaka://hls-muxed")&&(S.isAudioMuxedInVideo=!0,S.mimeType="video/mp2t",is(S));var E={stream:S,type:r,ve:[],Bc:0,Vb:0,je:new Map,Ud:!1,Td:!1,rd:!1,qf:-1,Ab:-1,Bb:-1,Rf:!1,N:x},M=null,L;return S.createSegmentIndex=function(){return M||(S.isAudioMuxedInVideo?(S.segmentIndex=new Ze([]),Promise.resolve()):(L=sg(e,E.N(),!0),M=new Promise(function(P){P(y(L))})))},S.closeSegmentIndex=function(){M&&!S.segmentIndex&&L.abort(),S.segmentIndex&&(S.segmentIndex.release(),S.segmentIndex=null),M=null},E}function aw(e){var t=1/0;e=v(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Vb));return t}function lw(e,t){var n=[];t=v(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.Eb(function(r){n.push(r)});e.l.Ed(n)}function ng(e,t){if(!kn(e))for(var n=aw(e),i=v(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Oc(0,n);lw(e,t.map(function(o){return o.stream})),i=Array.from(e.i.values()).filter(function(o){return o.stream.segmentIndex}),n=i.some(function(o){return o.stream.type=="audio"}),r=i.some(function(o){return o.stream.type=="video"}),i=kn(e)&&!e.Ma,n=!kn(e)&&e.Ma&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?nw(e,t,i):(Bk(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&nw(e,t))}function Ha(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function iD(e){if(!e.m)return!1;var t=[],n=[];e=v(e.m.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(r){return r.segmentIndex})||0<n.length&&!n.some(function(r){return r.segmentIndex}))}function cw(e,t,n,i,r,o,s,u,a,l,f,d,g,m,y,x,S,E,M){E=E===void 0?!0:E,M=M===void 0?!0:M;var L,P,b,D,k,N,j,V,F,B,H,G,z,W,$,te,Me,he,et,Ve,Oe,Ue,Qe,Ne,Ge,Re,je,dt,Qt;return U(function(Mt){switch(Mt.g){case 1:if(L=i.segments||[],P=L.every(function(Dt){return!!rn(Dt.ca,"EXT-X-GAP")}),!L.length||P)throw new _(2,4,4053);if(rD(e,i),kn(e)&&ig(e,i),b=kn(e)?e.M.get(s):new Map,D=Tw(e,i,b,n,r,s),k=D.segments,N=D.bandwidth,H=B=F=V=j=null,!(0<k.length&&E)){Mt.s(2);break}return A(Mt,Hk(e,k),3);case 3:G=Mt.h,s=G.type,u=G.language,f=G.channelCount,y=G.sampleRate,e.g.disableText||(d=G.closedCaptions),V=G.height,j=G.width,F=G.Nd,B=G.colorGamut,H=G.frameRate,M&&(S=G.mimeType,o=G.codecs);case 2:if(S){Mt.s(4);break}return A(Mt,uD(e,s,o,k),5);case 5:S=Mt.h,s!=be||o||S!="application/mp4"||!k[0]||k[0].Y||(S="text/vtt");case 4:return A(Mt,hw(e,i,S,r,n),6);case 6:if(z=Mt.h,W=z.drmInfos,$=z.keyIds,te=z.encrypted,Me=z.Bg,te&&!W.length&&!Me)throw new _(2,4,4026);return he=dw(e,o,s,u,a,l,f,d,g,m,y,x),he.encrypted=te&&!Me,he.drmInfos=W,he.keyIds=$,he.mimeType=S,N&&(he.bandwidth=N),is(he),s=="video"&&(j||V||F||B)&&Sw(he,j,V,H,F,null,B),kn(e)&&ig(e,i),et=k[0].startTime,Ve=k[k.length-1],Oe=Ve.endTime,Ue=new Ze(k),he.segmentIndex=Ue,Ne=(Qe=rn(i.ca,"EXT-X-SERVER-CONTROL"))?hu(Qe,"CAN-SKIP-UNTIL")!=null:!1,Ge=Qe?hu(Qe,"CAN-BLOCK-RELOAD")!=null:!1,Re=pu(i.ca,"EXT-X-MEDIA-SEQUENCE",0),je=fw(Re,k),dt=je.Ab,Qt=je.Bb,Mt.return({stream:he,type:s,ve:[],N:r,Bc:et,Vb:Oe,Ud:Ne,Td:Ge,rd:!1,qf:-1,Ab:dt,Bb:Qt,je:b,Rf:!1})}})}function fw(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Ab:e,Bb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Ab:e,Bb:n}):(e++,t.m&&(n=0),{Ab:e,Bb:n})}function dw(e,t,n,i,r,o,s,u,a,l,f,d){var g=og(n,t)||vf(n),m=[];if(a){a=v(a.split(","));for(var y=a.next();!y.done;y=a.next())m.push(y.value)}return a=void 0,y=null,n==be?a=m.includes("public.accessibility.transcribes-spoken-dialog")&&m.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":m.includes("public.accessibility.describes-video")&&(y="visually impaired"),m.length||a!=="subtitle"||m.push("subtitle"),e={id:e.F++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:g,codecs:t,kind:n==be?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:ct(i||"und"),originalLanguage:i,label:o,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:m,forced:l,channelsCount:s,audioSamplingRate:f,spatialAudio:d,closedCaptions:u,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:y,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},is(e),e}function hw(e,t,n,i,r){var o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$;return U(function(te){switch(te.g){case 1:if(o=new Map,!e.g.ignoreDrmInfo&&t.segments){for(s=v(t.segments),u=s.next();!u.done;u=s.next())if(a=u.value,l=Ei(a.ca,"EXT-X-KEY"),f=null,l.length)for(f=vw(e,t,a.ca,i,r),d=v(l),g=d.next();!g.done;g=d.next())m=g.value,o.set(m,f)}x=y=!1,S=[],E=new Set,M=v(o),L=M.next();case 2:if(L.done){te.s(4);break}if(P=L.value,b=v(P),D=b.next().value,k=b.next().value,N=D,j=k,V=it(N,"METHOD"),V=="NONE"){te.s(3);break}if(y=!0,F=pe(N,"KEYFORMAT")||"identity",B=null,Tf(V)){x=!0,te.s(3);break}if(F=="identity")return A(te,Ew(e,N,n,i,j,r),11);if(H=e.Sb.get(F),!H){G=null,te.s(9);break}return A(te,H(N,n,j),10);case 10:G=te.h;case 9:B=G,te.s(6);break;case 11:B=te.h;case 6:if(B){if(B.keyIds)for(z=v(B.keyIds),W=z.next();!W.done;W=z.next())$=W.value,E.add($);S.push(B)}case 3:L=M.next(),te.s(2);break;case 4:return te.return({drmInfos:S,keyIds:E,encrypted:y,Bg:x})}})}function pw(e,t,n,i,r){if(!w.crypto||!w.crypto.subtle)throw J("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new _(2,4,4042);var o=0,s=pe(t,"IV","");if(s){var u=Po(s.substr(2));if(u.byteLength!=16)throw new _(2,4,4048)}else o=pu(n.ca,"EXT-X-MEDIA-SEQUENCE",0);var a=vo(i(),it(t,"URI"),r),l=a.sort().join("");if(n=t.toString()+"-"+o+"-"+l,!e.ka.has(n)){var f={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(it(t,"METHOD")){case"AES-256":f.bitsKey=256;break;case"AES-256-CTR":f.bitsKey=256,f.blockCipherMode="CTR"}f.fetchKey=function(){var d,g,m,y;return U(function(x){if(x.g==1)return e.L.has(l)||(d=qt(a,e.g.retryParameters),g=Br(e,d,6).promise,e.L.set(l,g)),A(x,e.L.get(l),2);if(x.g!=3){if(m=x.h,!m.data||m.data.byteLength!=f.bitsKey/8)throw new _(2,4,4049);return y={name:f.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:f.bitsKey},A(x,w.crypto.subtle.importKey("raw",m.data,y,!0,["decrypt"]),3)}f.cryptoKey=x.h,f.fetchKey=void 0,ie(x)})},e.ka.set(n,f)}return e.ka.get(n)}function gw(e,t){e.u==null&&(t=rn(t.ca,"EXT-X-START"))&&(e.u=Number(it(t,"TIME-OFFSET")))}function rD(e,t){var n=rn(t.ca,"EXT-X-PLAYLIST-TYPE");t=rn(t.ca,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?yf(e,wf):n?yf(e,Sf):yf(e,Mw)}function ig(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var o=rn(i[r].ca,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}r--}if(i=rn(t.ca,"EXT-X-TARGETDURATION"),!i)throw new _(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=rn(t.ca,"EXT-X-PART-INF"))&&(e.P=Number(it(r,"PART-TARGET"))),t=rn(t.ca,"EXT-X-SERVER-CONTROL"),e.fa&&e.P?(e.o=e.Tb?5*e.P<=n?Math.min(e.P,e.o):Math.min(n,e.o):Math.min(e.P,e.o),e.Fa=t?Number(it(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?hu(t,"HOLD-BACK"):null,e.Aa=n?Number(n.value):0),e.La=Math.max(i,e.La)}function mw(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Fa)n=e.Fa;else if(e.Aa)n=e.Aa;else{var i=t.segments.length,r=e.g.hls.liveSegmentsDelay;for(r>i-2&&(r=Math.max(1,i-2)),r=i-r;r<i;r++){var o=rn(t.segments[r].ca,"EXTINF");n=o?n+Math.ceil(Number(o.value.split(",")[0])):n+e.La}}e.u&&0>e.u&&(n=Math.min(-e.u,n),e.u+=n),e.l.yh(0),e.l.jg(n),e.l.Gc(!1)}function vw(e,t,n,i,r){var o=rn(n,"EXT-X-MAP");if(!o)return null;var s=it(o,"URI"),u=vo(i(),s,r);if(s=[u.toString(),pe(o,"BYTERANGE","")].join("-"),!e.sa.has(s)){var a=void 0,l=null,f=!1;n=v(n);for(var d=n.next();!d.done;d=n.next())d=d.value,d.name=="EXT-X-KEY"?(f=it(d,"METHOD"),Tf(f)&&d.id<o.id?(f=!1,a=pw(e,d,t,i,r)):f=f!="NONE"):d.name=="EXT-X-BYTERANGE"&&d.id<o.id&&(l=d);t=oD(u,o,l,a,f),e.sa.set(s,t)}return e.sa.get(s)}function oD(e,t,n,i,r){var o=0,s=null;return t=pe(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(o=t.split("@"),s=Number(o[0]),o=Number(o[1]),s=o+s-1,i&&(n=s+1-o,n%16&&(s+=16-n%16))),new jn(function(){return e},o,s,null,null,null,i,r)}function sD(e,t,n,i,r,o,s,u,a){function l(te){te=new _t(te).ab.split(".").pop();var Me=ag.get(s).get(te);return Me||(Me=ug.get(te)),Me}var f=i.ca,d=rn(f,"EXTINF"),g=0,m=0,y=null;i.Jb.length&&(e.m.isLowLatency=!0);var x=null;if(!e.g.hls.ignoreManifestProgramDateTime){var S=rn(f,"EXT-X-PROGRAM-DATE-TIME");S&&S.value&&(x=Zr(S.value),e.Ma=!0)}var E=Dr;if(rn(f,"EXT-X-GAP")&&(e.m.gapCount++,E=2),!d){if(i.Jb.length==0)throw new _(2,4,4024,"EXTINF");if(!e.fa)return null}var M=[];S=!1;var L=null,P=!1,b=!1;if(e.fa&&i.Jb.length){g=t&&w.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var D=x,k={},N=0;N<i.Jb.length;k={Le:void 0,re:void 0},N++){var j=i.Jb[N],V=N==0?n:M[M.length-1],F=N==0?r:V.endTime,B=Number(pe(j,"DURATION"))||e.P;if(B){var H=F+B,G=0,z=null;if(j.name=="EXT-X-PRELOAD-HINT"?(G=(G=pe(j,"BYTERANGE-START"))?Number(G):0,(V=pe(j,"BYTERANGE-LENGTH"))?z=G+Number(V)-1:G&&(z=Number.MAX_SAFE_INTEGER)):(G=pe(j,"BYTERANGE"),z=v(yw(V,G)),G=z.next().value,z=z.next().value),k.re=pe(j,"URI"),k.re){V=Dr,pe(j,"GAP")=="YES"&&(e.m.gapCount++,V=2,P=!0),k.Le=null;var W=function(te){return function(){return te.Le==null&&(te.Le=vo(u(),te.re,o)),te.Le}}(k);g&&0<=G&&z!=null&&(L=W,S=!0),F=new ye(F,H,W,G,z,t,0,0,1/0,[],"",null,D,V,a),j.name=="EXT-X-PRELOAD-HINT"&&(F.Sf(),b=!0),pe(j,"INDEPENDENT")!="YES"&&0<N&&F.Vc(),(k=l(k.re))&&(F.mimeType=k,Iw.has(k)&&(F.Y=null)),M.push(F),D&&(D+=B)}}}}if(d){if(d=Number(d.value.split(",")[0]),d==0)return null;g=r+d}else if(M.length)g=M[M.length-1].endTime;else return null;S&&(P||M[0].Sa!=0?(S=!1,L=null):M=[]),(d=rn(f,"EXT-X-BYTERANGE"))?(y=v(yw(n,d.value)),m=y.next().value,y=y.next().value):M.length&&(m=M[0].Sa,y=M[M.length-1].wa),n="",d=null,s=="image"&&(n="1x1",f=rn(f,"EXT-X-TILES"))&&(n=it(f,"LAYOUT"),(f=pe(f,"DURATION"))&&(d=Number(f)));var $=null;return t=new ye(r,g,function(){return L?L():($==null&&($=vo(u(),i.g,o)),$||[])},m,y,t,0,0,1/0,M,n,d,x,E,a,0<M.length&&!!i.g),(r=l(i.g))&&(t.mimeType=r,Iw.has(r)&&(t.Y=null)),S&&(e.Tb=!0,t.dh(),b&&t.Sf()),t}function yw(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.wa+1,i=n+t-1),[n,i]}function rg(e,t,n,i,r){if(n=="video"||n=="audio"){var o=e.l.m;if(o&&!Ha(e,n))for(t=Ei(t,"EXT-X-DATERANGE"),t=t.filter(function(F){return hu(F,"START-DATE")!=null}).sort(function(F,B){return F=it(F,"START-DATE"),B=it(B,"START-DATE"),F<B?-1:F>B?1:0}),n=0;n<t.length;n++){var s=t[n];try{var u=it(s,"ID");if(!e.ya.has(u)){var a=it(s,"START-DATE"),l=Zr(a);if(!isNaN(l)){var f=Math.max(0,l-o),d=null,g=pe(s,"END-DATE");if(g){var m=Zr(g);if(!isNaN(m)&&(d=m-o,0>d))continue}if(d==null){var y=pe(s,"DURATION")||pe(s,"PLANNED-DURATION");if(y){var x=parseFloat(y);if(isNaN(x)||(d=f+x),0>l-o+x)continue}}var S=pe(s,"CLASS")||"com.apple.quicktime.HLS",E=pe(s,"END-ON-NEXT")=="YES";if(d==null&&E){for(var M=n+1;M<t.length;M++){var L=pe(t[M],"CLASS")||"com.apple.quicktime.HLS";if(S==L){var P=it(t[M],"START-DATE"),b=Zr(P);if(!isNaN(b)&&b&&b>l){d=Math.max(0,b-o);break}}}if(d==null)continue}M=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var D=[],k=v(s.attributes),N=k.next();!N.done;N=k.next()){var j=N.value;if(!M.includes(j.name)){var V=JT(j.value,i);(j.name=="X-ASSET-URI"||j.name=="X-ASSET-LIST")&&(V=vo(r(),j.value,i)[0]),D.push({key:j.name,description:"",data:V,mimeType:null,pictureType:null})}}1<D.length&&e.h.onMetadata(S,f,d,D),e.ya.add(u)}}}catch{}}}}function Tw(e,t,n,i,r,o){var s=t.segments,u=void 0,a=pu(t.ca,"EXT-X-DISCONTINUITY-SEQUENCE",-1),l=pu(t.ca,"EXT-X-MEDIA-SEQUENCE",0),f=rn(t.ca,"EXT-X-SKIP"),d=f?Number(pe(f,"SKIPPED-SEGMENTS")):0,g=l+d,m=0;kn(e)&&n.has(g)&&(m=n.get(g)),m===0&&e.Ea==Sf&&0<n.size&&!n.has(g)&&e.l.i!=null&&(m=e.l.pb());var y=[],x=null;f=[];for(var S=0;S<s.length;S++){var E=s[S],M=S==0?m:x.endTime;g=l+d+S,rn(E.ca,"EXT-X-DISCONTINUITY")&&(a++,x&&x.Y&&(x.Y.g=M));for(var L=v(E.ca),P=L.next();!P.done;P=L.next())P=P.value,P.name=="EXT-X-KEY"&&(Tf(it(P,"METHOD"))?u=pw(e,P,t,r,i):u=void 0);n.set(g,M),L=vw(e,t,E.ca,r,i),(M=sD(e,L,x,E,M,i,o,r,u))&&((x=pu(E.ca,"EXT-X-BITRATE"))?f.push({bitrate:x,duration:M.endTime-M.startTime}):f.length&&(x=f.pop(),x.duration+=M.endTime-M.startTime,f.push(x)),x=M,M.i=a,Ha(e,o)&&e.K!=null&&g<e.K||y.push(M))}if(t=void 0,f.length&&(t=f.reduce(function(b,D){return b+D.duration},0),t=Math.round(f.reduce(function(b,D){return b+D.bitrate*D.duration},0)/t*1e3)),f=y.some(function(b){return b.h!=null})){for(n={},i=0;i<y.length;n={Xd:void 0,Wd:void 0,Qd:void 0,Dc:void 0,Pd:void 0},i++)if(n.Dc=y[i],n.Dc.h==null)for(n.Wd=0,n.Xd=i,r=function(b){return function(){var D=y[b.Xd];if(D){if(D.h!=null)return D.h+b.Wd;b.Wd-=D.endTime-D.startTime,b.Xd+=1}return null}}(n),n.Pd=0,n.Qd=i,s=function(b){return function(){var D=y[b.Qd];if(D){if(D!=b.Dc&&(b.Pd+=D.endTime-D.startTime),D.h!=null)return D.h+b.Pd;--b.Qd}return null}}(n);n.Dc.h==null;)n.Dc.h=s(),n.Dc.h==null&&(n.Dc.h=r())}if(f)for(n=v(y),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=v(r.g),s=r.next();!s.done;s=r.next())s=s.value,s.h=i,i+=s.endTime-s.startTime;if(n=e.ea,f&&n!=1/0&&!Ha(e,o))for(e=v(y),o=e.next();!o.done;o=e.next())o.value.qg(n);return{segments:y,bandwidth:t}}function og(e,t){if(e==be){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function vf(e){return e==be?"text/vtt":ag.get(e).get("mp4")}function ww(e,t){e=kn(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.dc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function uD(e,t,n,i){var r,o,s,u,a,l,f,d,g,m,y,x,S;return U(function(E){switch(E.g){case 1:return r=Fi,o=ww(e,i),s=o.segment,s.status==2?E.return(vf(t)):(u=s.N(),a=new _t(u[0]),l=a.ab.split(".").pop(),f=ag.get(t),(d=f.get(l))||(d=ug.get(l))||(d=og(t,n))?E.return(d):(m=1,y=qt(u,e.g.retryParameters),ge(E,2),y.method="HEAD",A(E,Br(e,y,r,{type:m}).promise,4)));case 4:x=E.h,g=x.headers["content-type"],Pe(E,3);break;case 2:if(S=Se(E),!S||S.code!=1002&&S.code!=1001){E.s(3);break}return y.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(y.headers.Range="bytes=0-0"),A(E,Br(e,y,r,{type:m}).promise,6);case 6:x=E.h,g=x.headers["content-type"];case 3:if(!g){E.s(7);break}if(d=g.toLowerCase().split(";")[0],d!="application/octet-stream"){E.s(8);break}if(x.data.byteLength){E.s(9);break}return y.method="GET",A(E,Br(e,y,r,{type:m}).promise,10);case 10:x=E.h;case 9:Gs(De(x.data))&&(d="video/mp2t");case 8:if(d!="application/octet-stream")return E.return(d);case 7:return E.return(vf(t))}})}function Sw(e,t,n,i,r,o,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=o||void 0,e.colorGamut=s||void 0)}function sg(e,t,n){return Br(e,qt(t,e.g.retryParameters),0,{type:n?2:3})}function xw(e){var t,n,i,r,o,s;return U(function(u){switch(u.g){case 1:return e.h?(ge(u,2),t=Date.now(),A(u,e.update(),4)):u.return();case 4:n=Date.now(),kn(e)&&(i=(n-t)/1e3,e.Pb.sample(1,i),r=0<e.g.updatePeriod?e.g.updatePeriod:e.o,o=Math.max(0,r-oe(e.Pb)),e.B.da(o)),Pe(u,3);break;case 2:if(s=Se(u),!e.h)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),u.return();s.severity=1,e.h.onError(s),e.B.da(.1);case 3:if(!e.h)return u.return();e.h.onManifestUpdated(),ie(u)}})}function kn(e){return e.Ea!=wf}function yf(e,t){e.Ea=t,e.l&&e.l.Gc(!kn(e)),kn(e)||e.B.stop()}function Br(e,t,n,i){if(!e.Z)throw new _(2,7,7001);return i||(i={}),i.isPreload=e.Qb(),t=e.h.networkingEngine.request(n,t,i),Go(e.Z,t),t}function Tf(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function aD(e,t,n,i){var r,o,s,u,a,l;return U(function(f){if(f.g==1){if(n=="video/mp2t")throw new _(2,4,4040);if(w.shakaMediaKeysPolyfill==="apple")throw new _(2,4,4041);if(r=it(t,"METHOD"),o=["SAMPLE-AES","SAMPLE-AES-CTR"],!o.includes(r))return f.return(null);s="cenc",r=="SAMPLE-AES"&&(s="cbcs"),u=it(t,"URI"),a=Jr("com.apple.fps",s,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],u);var d=new _t(u).nb.replace(/-/g,"").toLowerCase();return(l=d.length===32&&/^[0-9a-f]+$/.test(d)?d:null)||!i?f.s(2):A(f,Aw(e,i),3)}return f.g!=2&&(l=f.h),l&&a.keyIds.add(l),f.return(a)})}function Ew(e,t,n,i,r,o){var s,u,a,l,f,d,g,m,y,x,S,E;return U(function(M){switch(M.g){case 1:if(n=="video/mp2t")throw new _(2,4,4040);if(w.shakaMediaKeysPolyfill==="apple")throw new _(2,4,4041);if(s=it(t,"METHOD"),u=["SAMPLE-AES","SAMPLE-AES-CTR"],!u.includes(s))return M.return(null);if(a=vo(i(),it(t,"URI"),o),a[0].startsWith("data:text/plain;base64,")){l=wr(Ti(a[0].split("data:text/plain;base64,").pop())),M.s(2);break}return f=a.sort().join(""),e.oa.has(f)||(d=qt(a,e.g.retryParameters),g=Br(e,d,6).promise,e.oa.set(f,g)),A(M,e.oa.get(f),3);case 3:m=M.h,l=wr(m.data);case 2:if(y="00000000000000000000000000000000",!r){M.s(4);break}return A(M,Aw(e,r),5);case 5:(x=M.h)&&(y=x);case 4:return S=new Map,S.set(y,l),E="cenc",s=="SAMPLE-AES"&&(E="cbcs"),M.return(av(S,E))}})}function Aw(e,t){var n,i,r,o;return U(function(s){return s.g==1?(n=null,e.pa.has(t)?(n=e.pa.get(t),s.s(2)):(i=fa(t.N(),t.uc(),t.tc(),e.g.retryParameters),r=Fi,A(s,Br(e,i,r,{type:0}).promise,3))):(s.g!=2&&(o=s.h,t.Kd(o.data),n=mI(o.data),e.pa.set(t,n)),s.return(n))})}R("shaka.hls.HlsParser",gf);var ug=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),lD=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),cD=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),fD=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),dD=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),ag=new Map().set("audio",lD).set("video",cD).set("text",fD).set("image",dD),Iw=new Set(["video/mp2t"].concat(Q(Ir))),wf="VOD",Mw="EVENT",Sf="LIVE",hD={Ph:wf,Zj:Mw,gk:Sf};Wo("application/x-mpegurl",function(){return new gf}),Wo("application/vnd.apple.mpegurl",function(){return new gf});function xf(e){return tf(e)}var pD=new Map().set("com.microsoft.playready",xf).set("com.microsoft.playready.recommendation",xf).set("com.microsoft.playready.software",xf).set("com.microsoft.playready.hardware",xf);function lg(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.C=new ae(5),this.o=new Be(function(){gD(e)}),this.B=new js,this.m=new Map,this.A=function(){return!1}}h=lg.prototype,h.configure=function(e,t){this.g=e,t&&(this.A=t)},h.start=function(e,t){var n=this;return U(function(i){if(i.g==1)return n.l=[e],n.h=t,A(i,cg(n),2);if(!n.h)throw new _(2,7,7001);return i.return(n.j)})};function gD(e){var t;U(function(n){switch(n.g){case 1:return ge(n,2),A(n,cg(e),4);case 4:Pe(n,3);break;case 2:t=Se(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();ie(n)}})}h.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},h.update=function(){var e=this,t;return U(function(n){if(n.g==1)return ge(n,2),A(n,cg(e),4);if(n.g!=2)return Pe(n,0);if(t=Se(n),!e.h||!t)return n.return();e.h.onError(t),ie(n)})},h.onExpirationUpdated=function(){},h.onInitialVariantChosen=function(){},h.banLocation=function(){},h.setMediaElement=function(){};function cg(e){var t,n,i,r,o,s,u;return U(function(a){if(a.g==1)return t=qt(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.A()}),Go(e.B,r),A(a,r.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var l=o.uri,f=o.data,d=e.g.mss.manifestPreprocessor;if(d!=Ac){if(Ye("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),f=NT(f,"SmoothStreamingMedia"),!f)throw new _(2,4,4046,l);d(f),f=ji(f.outerHTML)}var g=bu(f,"SmoothStreamingMedia");if(!g)throw new _(2,4,4046,l);if(l=e.g.mss.manifestPreprocessorTXml,l!=Ic&&l(g),e.i||(e.i=new Te(null,0)),l=Le(g,"IsLive",Nl,!1))throw new _(2,4,4047);e.i.Gc(!l),d=Le(g,"TimeScale",yn,1e7),f=Le(g,"DVRWindowLength",yn),l&&(f===0||isNaN(f))&&(f=1/0);var m=Le(g,"CanSeek",Nl,!1);f===0&&m&&(f=1/0),m=null,f&&0<f&&(m=f/d),l&&!isNaN(e.g.availabilityWindowOverride)&&(m=e.g.availabilityWindowOverride),m==null&&(m=1/0),e.i.Ce(m),f=Le(g,"Duration",yn,1/0),l||e.i.bb(f/d),l={variants:[],textStreams:[],timescale:d,duration:f/d};var y;for(m=nt(g,"Protection"),d=e.g.mss.keySystemsBySystemId,f=[],m=v(m),y=m.next();!y.done;y=m.next())f=f.concat(nt(y.value,"ProtectionHeader"));if(f.length){for(m=[],y=0;y<f.length;y++){var x=f[y],S=x.attributes.SystemID.toLowerCase(),E=d[S];if(E){var M;e:{if(M=fT(x)){M=v(zi(M,"DATA"));for(var L=M.next();!L.done;L=M.next())if(L=Bt(L.value,"KID")){M=Ti(Gt(L)),M=new Uint8Array([M[3],M[2],M[1],M[0],M[5],M[4],M[7],M[6]].concat(Q(M.slice(8)))),M=wr(M);break e}}M=null}L=Ti(Gt(x)),S=Po(S.replace(/-/g,"")),S=[{initData:$l(L,S,new Set,0),initDataType:"cenc",keyId:M}],S=Jr(E,"cenc",S),M&&S.keyIds.add(M),(E=pD.get(E))&&(S.licenseServerUri=E(x)),m.push(S)}}d=m}else d=[];for(y=d,m=[],d=[],f=[],g=nt(g,"StreamIndex"),g=v(g),x=g.next();!x.done;x=g.next()){x=x.value,E=nt(x,"QualityLevel"),S=l.timescale,M=l.duration,L=nt(x,"c");for(var P=[],b=0,D=0;D<L.length;++D){var k=L[D],N=L[D+1],j=Le(k,"t",yn),V=Le(k,"d",yn);if(k=Le(k,"r",In),!V)break;if(j=j??b,(k=k||0)&&k--,0>k)if(N){if(N=Le(N,"t",yn),N==null)break;if(j>=N)break;k=Math.ceil((N-j)/V)-1}else{if(M==1/0)break;if(j/S>=M)break;k=Math.ceil((M*S-j)/V)-1}for(N=0;N<=k;++N)b=j+V,P.push({start:j/S,end:b/S,xg:j}),j=b}for(S=P,E=v(E),M=E.next();!M.done;M=E.next())(M=mD(e,x,M.value,S,y,l))&&(M.type!="audio"||e.g.disableAudio?M.type!="video"||e.g.disableVideo?M.type!=be||e.g.disableText||f.push(M):d.push(M):m.push(M))}for(g=[],m=v(0<m.length?m:[null]),y=m.next();!y.done;y=m.next())for(y=y.value,x=v(0<d.length?d:[null]),P=x.next();!P.done;P=x.next())E=g,S=E.push,M=e,L=y,P=P.value,D=0,L&&L.bandwidth&&0<L.bandwidth&&(D+=L.bandwidth),P&&P.bandwidth&&0<P.bandwidth&&(D+=P.bandwidth),M={id:M.u++,language:L?L.language:"und",disabledUntilTime:0,primary:!!L&&L.primary||!!P&&P.primary,audio:L,video:P,bandwidth:D,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},S.call(E,M);l.variants=g,l.textStreams=f,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.ie()),Promise.resolve(),s=Date.now(),u=(s-i)/1e3,e.C.sample(1,u),ie(a)})}function mD(e,t,n,i,r,o){var s=t.attributes.Type;if(s!=="audio"&&s!=="video"&&s!=="text")return J("Ignoring unrecognized type:",s),null;var u=t.attributes.Language,a=e.u++,l=Le(n,"Bitrate",xr),f=Le(n,"MaxWidth",xr),d=Le(n,"MaxHeight",xr),g=Le(n,"Channels",xr),m=Le(n,"SamplingRate",xr),y=o.duration;i.length&&(y=i[i.length-1].end-i[0].start);var x=e.i.getDuration();e.i.bb(Math.min(y,x));var S={id:a,originalId:t.attributes.Name||String(a),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:f||void 0,height:d||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:ct(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:g,audioSamplingRate:m,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:y,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=xD.get(r))&&S.roles.push(r),r==="main"&&(S.primary=!0)),r=n.attributes.FourCC,(r===null||r==="")&&(r=t.attributes.FourCC),!r){if(s==="audio")r="AAC";else if(s==="video")return J('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!SD.includes(r.toUpperCase()))return J("Codec not supported:",r),null;switch(n=vD(n,s,r,S),S.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return J("Quality unsupported without CodecPrivateData",s),null;S.type="audio",S.mimeType="mss/audio/mp4",S.codecs=yD(r,n);break;case"video":if(!n)return J("Quality unsupported without CodecPrivateData",s),null;S.type="video",S.mimeType="mss/video/mp4",S.codecs=TD(n);break;case"text":S.type=be,S.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(S.codecs="stpp")}return S.fullMimeTypes.add(Ot(S.mimeType,S.codecs)),S.createSegmentIndex=function(){if(S.segmentIndex)return Promise.resolve();if(e.m.has(S.id))var E=e.m.get(S.id);else E=[],S.type=="video"&&(E=S.mssPrivateData.codecPrivateData.split("00000001").slice(1)),E={id:S.id,type:S.type,codecs:S.codecs,encrypted:S.encrypted,timescale:S.mssPrivateData.timescale,duration:S.mssPrivateData.duration,lb:E,ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:null,stream:S},E=Bs(new Xo([E])),e.m.set(S.id,E);return E=wD(e,new jn(function(){return[]},0,null,hc(S),S.mssPrivateData.timescale,E,null,S.encrypted),S,t,i),S.segmentIndex=new Ze(E),Promise.resolve()},S.closeSegmentIndex=function(){S.segmentIndex&&(S.segmentIndex.release(),S.segmentIndex=null)},S}function vD(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function yD(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function TD(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function wD(e,t,n,i,r){var o=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[],r=v(r);for(var s=r.next(),u={};!s.done;u={Fe:void 0},s=r.next())u.Fe=s.value,i.push(new ye(u.Fe.start,u.Fe.end,function(a){return function(){return Jt(e.l,[o.replace("{start time}",String(a.Fe.xg))])}}(u),0,null,t,0,0,n.mssPrivateData.duration));return i}R("shaka.mss.MssParser",lg);var SD="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),xD=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");Wo("application/vnd.ms-sstr+xml",function(){return new lg});function Cw(e,t,n,i,r,o,s){if(200<=n&&299>=n&&n!=202||n==304)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:o};o=null;try{o=tr(t)}catch{}throw new _(n==401||n==403?2:1,1,1001,i,n,o,e,s,r||i)}function fg(){}function Ef(e,t,n,i,r,o){var s=new CD;Ko(t.headers).forEach(function(f,d){s.append(d,f)});var u=new ID,a={Gg:!1,Jh:!1};if(e=ED(e,t,n,{body:t.body||void 0,headers:s,method:t.method,signal:u.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,i,r,t.streamDataCallback,o.minBytesForProgressEvents||0),e=new Ut(e,function(){return a.Gg=!0,u.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new Be(function(){a.Jh=!0,u.abort()});l.da(t/1e3),e.finally(function(){l.stop()})}return e}function ED(e,t,n,i,r,o,s,u,a){var l,f,d,g,m,y,x,S,E,M,L,P,b,D;return U(function(k){switch(k.g){case 1:return l=AD,f=MD,g=new ArrayBuffer(0),y=m=0,x=Date.now(),ge(k,2),A(k,l(e,i),4);case 4:if(d=k.h,s(kw(d.headers)),i.method=="HEAD"){k.s(5);break}return E=(S=d.headers.get("Content-Length"))?parseInt(S,10):0,d.body?(M=d.clone().body.getReader(),L=function(N){function j(){var V,F,B,H;return U(function(G){switch(G.g){case 1:return ge(G,2),A(G,M.read(),4);case 4:V=G.h,Pe(G,3);break;case 2:return Se(G),G.return();case 3:if(V.done){G.s(5);break}if(m+=V.value.byteLength,!u){G.s(5);break}return A(G,u(V.value),5);case 5:F=Date.now(),B=m-y,(100<F-x&&B>=a||V.done)&&(H=V.done?0:E-m,o(F-x,B,H),y=m,x=F),V.done?N.close():(N.enqueue(V.value),j()),ie(G)}})}j()},new f({start:L}),A(k,d.arrayBuffer(),8)):A(k,d.arrayBuffer(),9);case 8:g=k.h,k.s(5);break;case 9:g=k.h,P=Date.now(),o(P-x,g.byteLength,0);case 5:Pe(k,3);break;case 2:throw b=Se(k),r.Gg?new _(1,1,7001,e,n):r.Jh?new _(1,1,1003,e,n):new _(1,1,1002,e,b,n);case 3:return D=kw(d.headers),k.return(Cw(D,g,d.status,e,d.url,t,n))}})}function kw(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function Dw(){if(w.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(w.Response){if(!new Response("").body)return!1}else return!1;return!(!w.fetch||"polyfill"in w.fetch||!w.AbortController)}R("shaka.net.HttpFetchPlugin",fg),fg.isSupported=Dw,fg.parse=Ef;var AD=w.fetch,ID=w.AbortController,MD=w.ReadableStream,CD=w.Headers;Dw()&&(Cr("http",Ef,2,!0),Cr("https",Ef,2,!0),Cr("blob",Ef,2,!0));function Rw(){}function Af(e,t,n,i,r,o){var s=new kD,u=Date.now(),a=0,l=new Promise(function(f,d){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials,s.onabort=function(){d(new _(1,1,7001,e,n))};var g=!1;s.onreadystatechange=function(){if(s.readyState==2&&!g){var y=Pw(s);r(y),g=!0}},s.onload=function(y){var x=Pw(s),S=s.response;try{i(Date.now()-u,y.loaded-a,0);var E=Cw(x,S,s.status,e,s.responseURL,t,n);f(E)}catch(M){d(M)}},s.onerror=function(y){d(new _(1,1,1002,e,y,n))},s.ontimeout=function(){d(new _(1,1,1003,e,n))},s.onprogress=function(y){var x=Date.now(),S=o.minBytesForProgressEvents||0,E=y.loaded-a;(100<x-u&&E>=S||y.lengthComputable&&y.loaded==y.total)&&(i(x-u,E,s.readyState==4?0:y.total-y.loaded),a=y.loaded,u=x)};for(var m in t.headers)s.setRequestHeader(m.toLowerCase(),t.headers[m]);s.send(t.body)});return new Ut(l,function(){return s.abort(),Promise.resolve()})}function Pw(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}R("shaka.net.HttpXHRPlugin",Rw),Rw.parse=Af;var kD=w.XMLHttpRequest;Cr("http",Af,1,!0),Cr("https",Af,1,!0),Cr("blob",Af,1,!0);function Lw(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function dg(e){var t=e.Ib(!1);return t?Tr(t):e.N().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.Sa+":"+e.wa}function DD(e,t){return fa(e.g.N(),e.g.Sa,e.g.wa,t.streaming.retryParameters)}function _w(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function Nw(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}_w.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function jw(e){return e.i==0?0:e.j/e.i}function Ow(e){var t=this;this.u=e,this.i=new Map,this.h=new Os(function(){return hg(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new _w,this.l=!1}Ow.prototype.destroy=function(){return this.h.destroy()};function RD(e,t,n){e.o=t,e.m=n}function hg(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}function PD(e,t,n,i,r,o){ht(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){var u,a,l,f,d,g,m;return U(function(y){if(y.g==1)return A(y,ND(e,n),2);if(u=y.h,e.h.g)throw new _(2,9,7001);if(r)for(f in a=De(u),l=new ah(a),l.data)d=Number(f),g=l.data[d],m=l.g[d],e.m(g,m);return e.g.close(i,u.byteLength),e.o(jw(e.g),e.g.g),y.return(o(u))})});e.i.set(t,s)}function LD(e,t,n,i,r,o){ht(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new _(2,9,7001);if(r){var u=De(n);u=new ah(u);for(var a in u.data){var l=Number(a);e.m(u.data[l],u.g[l])}}return e.g.close(i,n.byteLength),e.o(jw(e.g),e.g.g),o(n)});e.i.set(t,s)}function _D(e){return U(function(t){return t.g==1?A(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function ND(e,t){var n,i,r,o;return U(function(s){return s.g==1?(n=Fi,i=e.u.request(n,t),r=function(){return i.abort()},e.j.push(r),A(s,i.promise,2)):(o=s.h,Oi(e.j,r),s.return(o.data))})}function If(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new st,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}If.prototype.abort=function(){var e=this;return U(function(t){if(t.g==1){try{e.i.abort()}catch{}return ge(t,2),A(t,e.g,4)}if(t.g!=2)return Pe(t,0);Se(t),ie(t)})};function pg(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var o;return U(function(s){if(s.g==1)return r.result==null?(n(),s.return()):(o=r.result,A(s,t(o.key,o.value,o),2));o.continue(),ie(s)})}})}If.prototype.store=function(){return this.h},If.prototype.promise=function(){return this.g};function gg(e){this.h=e,this.g=[]}gg.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function rs(e,t){return Mf(e,t,"readwrite")}function Mf(e,t,n){n=e.h.transaction([t],n);var i=new If(n,t);return e.g.push(i),i.promise().then(function(){Oi(e.g,i)},function(){Oi(e.g,i)}),i}function os(e,t,n){this.h=new gg(e),this.i=t,this.g=n}h=os.prototype,h.destroy=function(){return this.h.destroy()},h.hasFixedKeySpace=function(){return!0},h.addSegments=function(){return Uw(this.i)},h.removeSegments=function(e,t){return bw(this,this.i,e,t)},h.getSegments=function(e){var t=this,n;return U(function(i){return i.g==1?A(i,Fw(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Ig(r)})))})},h.addManifests=function(){return Uw(this.g)},h.updateManifest=function(){return Promise.reject(new _(2,9,9016,"Cannot modify values in "+this.g))};function jD(e,t,n){e=rs(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}h.updateManifestExpiration=function(e,t){var n=rs(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},h.removeManifests=function(e,t){return bw(this,this.g,e,t)},h.getManifests=function(e){var t=this,n;return U(function(i){return i.g==1?A(i,Fw(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.jd(r)}))))})},h.getAllManifests=function(){var e=this,t,n;return U(function(i){return i.g==1?(t=Mf(e.h,e.g,"readonly"),n=new Map,A(i,pg(t,function(r,o){var s;return U(function(u){if(u.g==1)return A(u,e.jd(o),2);s=u.h,n.set(r,s),ie(u)})}),2)):i.g!=3?A(i,t.promise(),3):i.return(n)})},h.Ig=function(e){return e},h.jd=function(e){return Promise.resolve(e)};function Uw(e){return Promise.reject(new _(2,9,9011,"Cannot add new value to "+e))}h.add=function(e,t){var n=this,i,r,o,s,u,a,l;return U(function(f){if(f.g==1){for(i=rs(n.h,e),r=i.store(),o=[],s=v(t),u=s.next(),a={};!u.done;a={cg:void 0},u=s.next())l=u.value,a.cg=r.add(l),a.cg.onsuccess=function(d){return function(){o.push(d.cg.result)}}(a);return A(f,i.promise(),2)}return f.return(o)})};function bw(e,t,n,i){e=rs(e.h,t),t=e.store(),n=v(n);for(var r=n.next(),o={};!r.done;o={Qf:void 0},r=n.next())o.Qf=r.value,t.delete(o.Qf).onsuccess=function(s){return function(){return i(s.Qf)}}(o);return e.promise()}function Fw(e,t,n){var i,r,o,s,u,a,l;return U(function(f){if(f.g==1){for(i=Mf(e.h,t,"readonly"),r=i.store(),o={},s=[],u=v(n),a=u.next(),l={};!a.done;l={we:void 0,ee:void 0},a=u.next())l.ee=a.value,l.we=r.get(l.ee),l.we.onsuccess=function(d){return function(){d.we.result==null&&s.push(d.ee),o[d.ee]=d.we.result}}(l);return A(f,i.promise(),2)}if(s.length)throw new _(2,9,9012,"Could not find values for "+s);return f.return(n.map(function(d){return o[d]}))})}function Ga(e){this.g=new gg(e)}Ga.prototype.destroy=function(){return this.g.destroy()},Ga.prototype.getAll=function(){var e=this,t,n;return U(function(i){return i.g==1?(t=Mf(e.g,"session-ids","readonly"),n=[],A(i,pg(t,function(r,o){n.push(o)}),2)):i.g!=3?A(i,t.promise(),3):i.return(n)})},Ga.prototype.add=function(e){var t=rs(this.g,"session-ids"),n=t.store();e=v(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},Ga.prototype.remove=function(e){var t=this,n;return U(function(i){return i.g==1?(n=rs(t.g,"session-ids"),A(i,pg(n,function(r,o,s){e.includes(o.sessionId)&&s.delete()}),2)):A(i,n.promise(),0)})};function Fn(){this.g=new Map}Fn.prototype.destroy=function(){for(var e=[],t=v(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Fn.prototype.init=function(){var e=this;Ka.forEach(function(r,o){(r=r())&&e.g.set(o,r)});for(var t=[],n=v(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function Bw(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){r.hasFixedKeySpace()||t||(t={path:{zb:i,Ta:o},Ta:r})})}),t)return t;throw new _(2,9,9013,"Could not find a cell that supports add-operations")}function OD(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){t({zb:i,Ta:o},r)})})}function Cf(e,t,n){if(e=e.g.get(t),!e)throw new _(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new _(2,9,9013,"Could not find cell with name "+n);return t}function UD(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function bD(e){var t=Array.from(e.g.keys());if(!t.length)throw new _(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function FD(e){var t,n,i;return U(function(r){return r.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(i=Ka,i.forEach(function(o){(o=o())&&t.push(o)})),A(r,Promise.all(t.map(function(o){return o.erase()})),2)):n?r.s(0):A(r,Promise.all(t.map(function(o){return o.destroy()})),0)})}function Vw(e,t){Ka.set(e,t)}R("shaka.offline.StorageMuxer",Fn),Fn.unregister=function(e){Ka.delete(e)},Fn.register=Vw,Fn.prototype.destroy=Fn.prototype.destroy;var Ka=new Map;function Wa(){os.apply(this,arguments)}At(Wa,os),Wa.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,o;return U(function(s){return i=rs(n.h,n.g),r=i.store(),o=new st,r.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,r.put(u),o.resolve()):o.reject(new _(2,9,9012,"Could not find values for "+e))},A(s,Promise.all([i.promise(),o]),0)})},Wa.prototype.jd=function(e){var t,n,i,r,o,s;return U(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,o=BD(e.periods[n],r),t.push(o);return A(u,MT(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function BD(e,t){HD(e);for(var n=v(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return VD(r,e.startTime,t)})}function VD(e,t,n){var i=e.initSegmentUri?Hw(e.initSegmentUri):null,r=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=Hw(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:o,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}Wa.prototype.Ig=function(e){return{data:e.data}};function Hw(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new _(2,9,9004,"Could not parse uri "+e)}function HD(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=v(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=v(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=v(e),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=v(t),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i);if(e.length&&t.length)for(t=v(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=v(e),o=r.next();!o.done;o=r.next()){o=o.value;var s=n++;i.variantIds.push(s),o.variantIds.push(s)}}}function kf(){os.apply(this,arguments)}At(kf,os),kf.prototype.jd=function(e){var t,n,i,r,o,s;return U(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var a=e.periods[n],l=[],f=v(a.streams),d=f.next();!d.done;d=f.next())d=d.value,d.variantIds.length!=0&&l.push(GD(d,a.startTime,a.startTime+r));o=l,t.push(o)}return A(u,MT(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})};function GD(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function mg(){os.apply(this,arguments)}At(mg,os),h=mg.prototype,h.hasFixedKeySpace=function(){return!1},h.addSegments=function(e){return this.add(this.i,e)},h.addManifests=function(e){return this.add(this.g,e)},h.updateManifest=function(e,t){return jD(this,e,t)},h.jd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function Gw(){this.m=this.j=this.i=this.h=this.g=this.l=null}h=Gw.prototype,h.init=function(){var e=this,t=new st,n=!1,i=new Be(function(){n=!0,t.reject(new _(2,9,9017))});i.da(5);var r=w.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){var o=r.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new Wa(o,"segment","manifest"):null,e.g=s,s=o.objectStoreNames,s=s.contains("manifest-v2")&&s.contains("segment-v2")?new kf(o,"segment-v2","manifest-v2"):null,e.h=s,s=o.objectStoreNames,s=s.contains("manifest-v3")&&s.contains("segment-v3")?new kf(o,"segment-v3","manifest-v3"):null,e.i=s,s=o.objectStoreNames,s=s.contains("manifest-v5")&&s.contains("segment-v5")?new mg(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new Ga(o):null,e.m=o,i.stop(),t.resolve()}},r.onupgradeneeded=function(){for(var o=r.result,s=v(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())u=u.value,o.objectStoreNames.contains(u)||o.createObjectStore(u,{autoIncrement:!0})},r.onerror=function(o){n||(t.reject(new _(2,9,9001,r.error)),i.stop(),o.preventDefault())},t},h.destroy=function(){var e=this;return U(function(t){switch(t.g){case 1:if(!e.g){t.s(2);break}return A(t,e.g.destroy(),2);case 2:if(!e.h){t.s(4);break}return A(t,e.h.destroy(),4);case 4:if(!e.i){t.s(6);break}return A(t,e.i.destroy(),6);case 6:if(!e.j){t.s(8);break}return A(t,e.j.destroy(),8);case 8:if(!e.m){t.s(10);break}return A(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),ie(t)}})},h.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},h.getEmeSessionCell=function(){return this.m},h.erase=function(){var e=this;return U(function(t){switch(t.g){case 1:if(!e.g){t.s(2);break}return A(t,e.g.destroy(),2);case 2:if(!e.h){t.s(4);break}return A(t,e.h.destroy(),4);case 4:if(!e.i){t.s(6);break}return A(t,e.i.destroy(),6);case 6:if(!e.j){t.s(8);break}return A(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),A(t,KD(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,A(t,e.init(),0)}})};function KD(){var e=new st,t=w.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new _(2,9,9001,t.error)),n.preventDefault()},e}Vw("idb",function(){return(!Ni()||Ni()&&$r())&&!Gi()&&w.indexedDB?new Gw:null});function sr(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}sr.prototype.zb=function(){return this.i},sr.prototype.Ta=function(){return this.h},sr.prototype.key=function(){return this.l},sr.prototype.toString=function(){return this.j};function vg(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new sr(t,n,i,Number(e[4])):null}function Kw(e,t){this.h=e,this.g=t}function Ww(e,t){var n=new Te(null,0);n.bb(t.duration);var i=t.streams.filter(function(l){return l.type=="audio"}),r=t.streams.filter(function(l){return l.type=="video"});i=WD(e,i,r,n),r=t.streams.filter(function(l){return l.type==be}).map(function(l){return Df(e,l,n)});var o=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return Df(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=v(i.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function WD(e,t,n,i){for(var r=new Set,o=v(t),s=o.next();!s.done;s=o.next()){s=v(s.value.variantIds);for(var u=s.next();!u.done;u=s.next())r.add(u.value)}for(o=v(n),s=o.next();!s.done;s=o.next())for(s=v(s.value.variantIds),u=s.next();!u.done;u=s.next())r.add(u.value);for(o=new Map,r=v(r),s=r.next();!s.done;s=r.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=v(t),r=t.next();!r.done;r=t.next())for(s=r.value,r=Df(e,s,i),s=v(s.variantIds),u=s.next();!u.done;u=s.next())u=o.get(u.value),u.language=r.language,u.primary=u.primary||r.primary,u.audio=r;for(n=v(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Df(e,r,i),r=v(r.variantIds),s=r.next();!s.done;s=r.next())s=o.get(s.value),s.primary=s.primary||t.primary,s.video=t;return o}function Df(e,t,n){var i=t.segments.map(function(r){return XD(e,r,t)});return n.Ed(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ze(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Ot(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function XD(e,t,n){var i=new sr("segment",e.h,e.g,t.dataKey);return e=new ye(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?zD(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.De(t.thumbnailSprite),e}function zD(e,t){var n=new sr("segment",e.h,e.g,t);return new jn(function(){return[n.toString()]},0,null)}function Xw(){this.g=null}h=Xw.prototype,h.configure=function(){},h.start=function(e,t){var n=this,i,r,o,s,u,a,l;return U(function(f){switch(f.g){case 1:if(i=vg(e),n.g=i,i==null||i.g!="manifest")throw new _(2,1,9004,e);return r=new Fn,En(f,2),A(f,r.init(),4);case 4:return A(f,Cf(r,i.zb(),i.Ta()),5);case 5:return o=f.h,A(f,o.getManifests([i.key()]),6);case 6:return s=f.h,u=s[0],a=new Kw(i.zb(),i.Ta()),l=Ww(a,u),t.makeTextStreamsForClosedCaptions(l),f.return(l);case 2:return Ct(f),A(f,r.destroy(),7);case 7:lt(f,0)}})},h.stop=function(){return Promise.resolve()},h.update=function(){},h.onExpirationUpdated=function(e,t){var n=this,i,r,o,s,u,a,l;return U(function(f){switch(f.g){case 1:return i=n.g,r=new Fn,ge(f,2,3),A(f,r.init(),5);case 5:return A(f,Cf(r,i.zb(),i.Ta()),6);case 6:return o=f.h,A(f,o.getManifests([i.key()]),7);case 7:if(s=f.h,u=s[0],a=u.sessionIds.includes(e),l=u.expiration==null||u.expiration>t,!a||!l){f.s(3);break}return A(f,o.updateManifestExpiration(i.key(),t),3);case 3:return Ct(f),A(f,r.destroy(),10);case 10:lt(f,0);break;case 2:Se(f),f.s(3)}})},h.onInitialVariantChosen=function(){},h.banLocation=function(){},h.setMediaElement=function(){},Wo("application/x-offline-manifest",function(){return new Xw});function zw(){}function qw(e,t){var n=vg(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=Ns(e)):e=n&&n.g=="segment"?qD(n.key(),n,t):Ho(new _(2,1,9004,e)),e}function qD(e,t,n){var i=new Fn;return Ns(void 0).Ha(function(){return i.init()}).Ha(function(){return Cf(i,t.zb(),t.Ta())}).Ha(function(r){return r.getSegments([t.key()])}).Ha(function(r){return{uri:t,data:r[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}R("shaka.offline.OfflineScheme",zw),zw.plugin=qw,Cr("offline",qw);function Yw(e,t,n){var i,r,o,s,u,a;return U(function(l){switch(l.g){case 1:i=[];for(var f=[],d=v(n),g=d.next();!g.done;g=d.next()){g=g.value;for(var m=!1,y=v(f),x=y.next();!x.done;x=y.next())if(x=x.value,$D(x.info,g)){x.sessionIds.push(g.sessionId),m=!0;break}m||f.push({info:g,sessionIds:[g.sessionId]})}r=v(f),o=r.next();case 2:if(o.done){l.s(4);break}return s=o.value,u=YD(e,t,s),A(l,u,5);case 5:a=l.h,i=i.concat(a),o=r.next(),l.s(2);break;case 4:return l.return(i)}})}function YD(e,t,n){var i,r;return U(function(o){switch(o.g){case 1:return i=new Ql({Xb:t,onError:function(){},pe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ge(o,2),i.configure(e),A(o,e2(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:Pe(o,3);break;case 2:return Se(o),A(o,i.destroy(),5);case 5:return o.return([]);case 3:return r=[],A(o,Promise.all(n.sessionIds.map(function(s){return U(function(u){if(u.g==1)return ge(u,2),A(u,i2(i,s),4);if(u.g!=2)return r.push(s),Pe(u,0);Se(u),ie(u)})})),6);case 6:return A(o,i.destroy(),7);case 7:return o.return(r)}})}function $D(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&jd(e.audioCapabilities,t.audioCapabilities,n)&&jd(e.videoCapabilities,t.videoCapabilities,n)}function QD(e,t,n){var i=t.presentationTimeline.getDuration();return t=$w(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function yg(e,t){var n=Ww(new Kw(e.zb(),e.Ta()),t),i=t.appMetadata||{};return n=$w(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function $w(e){var t=[],n=Gl(e.variants);n=v(n);for(var i=n.next();!i.done;i=n.next())t.push(Vo(i.value));for(e=v(e.textStreams),n=e.next();!n.done;n=e.next())t.push(qu(n.value));return t}function JD(){this.g=new Map}function ZD(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||t.bandwidth-r;0>=o&&(o=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,o)}}function e4(e,t){e.g.set(t.id,t.bandwidth||2048)}function Qw(e,t){return e=e.g.get(t),e==null&&(e=0),e}function on(e){var t=this;if(e&&e.constructor!=q)throw new _(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=Js(),this.g=new pt),this.i=[],this.l=[];var n=!e;this.j=new Os(function(){var i,r,o,s,u;return U(function(a){switch(a.g){case 1:return A(a,Promise.all(t.l.map(function(l){return hg(l)})),2);case 2:for(i=function(){},r=[],o=v(t.i),s=o.next();!s.done;s=o.next())u=s.value,r.push(u.then(i,i));return A(a,Promise.all(r),3);case 3:if(!n){a.s(4);break}return A(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,ie(a)}})}),this.m=1e9}function Tg(){if(er())e:{for(var e=v(Ka.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}h=on.prototype,h.destroy=function(){return this.j.destroy()},h.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Sc(e,t)),lo(this.h,e)},h.getConfiguration=function(){var e=Js();return lo(e,this.h,Js()),e},h.xb=function(){return this.g},h.store=function(e,t,n,i,r){var o=this,s=this.getConfiguration(),u=new Ow(this.g);return this.l.push(u),t=t4(this,e,t||{},i||[],r||[],function(){var a;return U(function(l){return l.g==1?n?l.s(2):A(l,Zo(e,o.g,s.manifest.retryParameters),3):(l.g!=2&&(n=l.h),a=My(e,n||null),l.return(a()))})},s,u),t=new Ut(t,function(){return hg(u)}),t.finally(function(){Oi(o.l,u)}),v4(this,t)};function t4(e,t,n,i,r,o,s,u){var a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z;return U(function(W){switch(W.g){case 1:return Rf(),l=a=null,f=new Fn,m=g=d=null,ge(W,2,3),A(W,o(),5);case 5:return a=W.h,A(W,c4(e,t,a,s),6);case 6:if(y=W.h,ai(e),x=!y.presentationTimeline.U()&&!y.presentationTimeline.yc(),!x)throw new _(2,9,9005,t);S=v(i),E=S.next();case 7:if(E.done){W.s(9);break}return M=E.value,A(W,f4(e,M,y),10);case 10:L=W.h,y.imageStreams.push(L),ai(e),E=S.next(),W.s(7);break;case 9:P=v(r),b=P.next();case 11:return b.done?(Ty(s.drm.clearKeys,y.variants),N=y.variants.some(function($){if($.audio){for(var te=v($.audio.drmInfos),Me=te.next();!Me.done;Me=te.next())if(Me.value.licenseServerUri.startsWith("data:"))return!0}if($.video){for($=v($.video.drmInfos),te=$.next();!te.done;te=$.next())if(te.value.licenseServerUri.startsWith("data:"))return!0}return!1}),j=s.offline.usePersistentLicense,N&&(j=!1),A(W,e.Lc(y,function($){m=m||$},s,j),15)):(D=b.value,A(W,d4(e,y,D.uri,D.language,D.kind,D.mime,D.codecs),14));case 14:k=W.h,y.textStreams.push(k),ai(e),b=P.next(),W.s(11);break;case 15:if(l=W.h,ai(e),m)throw m;return A(W,i4(y,l,s,j),16);case 16:return A(W,f.init(),17);case 17:return ai(e),A(W,Bw(f),18);case 18:return d=W.h,ai(e),V=r4(l,y,t,n,s,u,j),F=V.Yi,B=V.tg,A(W,d.Ta.addManifests([F]),19);case 19:if(H=W.h,ai(e),g=H[0],ai(e),m)throw m;return A(W,n4(e,B,g,F,u,s,d.Ta,y,l,j),20);case 20:return ai(e),tS(y,F,l,j),A(W,d.Ta.updateManifest(g,F),21);case 21:return ai(e),G=new sr("manifest",d.path.zb,d.path.Ta,g),W.return(yg(G,F));case 3:return Ct(W),A(W,f.destroy(),22);case 22:if(!a){W.s(23);break}return A(W,a.stop(),23);case 23:if(!l){W.s(25);break}return A(W,l.destroy(),25);case 25:lt(W,0);break;case 2:if(z=Se(W),g==null){W.s(27);break}return A(W,Jw(g),27);case 27:throw m||z}})}function n4(e,t,n,i,r,o,s,u,a,l){var f,d,g,m,y,x,S,E,M,L,P;return U(function(b){switch(b.g){case 1:if(f={},d=0,g=function(){if(e.j.g||r.l)throw new _(2,9,7001)},m=function(D,k){var N,j,V,F,B,H,G,z,W;return U(function($){if($.g==1){for(N=v(D),j=N.next(),V={};!j.done;V={Nb:void 0},j=N.next())V.Nb=j.value,g(),F=DD(V.Nb,o),B=V.Nb.i,H=V.Nb.h,G=function(te){return function(Me){var he,et,Ve,Oe;return U(function(Ue){switch(Ue.g){case 1:if(he=te.Nb.g,et=he.Ib(!1),!he.aesKey||et){Ue.s(2);break}return A(Ue,bh(Me,he.aesKey,te.Nb.j),3);case 3:Me=Ue.h;case 2:return Ve=dg(he),A(Ue,s.addSegments([{data:Me}]),4);case 4:Oe=Ue.h,g(),f[Ve]=Oe[0],d+=Me.byteLength,ie(Ue)}})}}(V),z=V.Nb.g,(W=z.Ib(!1))?LD(r,V.Nb.groupId,W,B,H,G):PD(r,V.Nb.groupId,F,B,H,G);return A($,_D(r),2)}return g(),!k||r.l?$.s(0):(tS(u,i,a,l),A($,s.updateManifest(n,i),0))})},y=!1,ge(b,2),!wg(u)||!y||eS(u)){b.s(4);break}return A(b,m(t.filter(function(D){return D.h}),!0),5);case 5:return g(),t=t.filter(function(D){return!D.h}),x=f,S=d,f={},d=0,A(b,Zw(s,n,i,x,S,function(){return ai(e)}),6);case 6:g();case 4:if(y){b.s(7);break}return A(b,m(t,!1),8);case 8:return g(),E=f,M=d,f={},d=0,A(b,Zw(s,n,i,E,M,function(){return g()}),9);case 9:g();case 7:Pe(b,0);break;case 2:return L=Se(b),P=Object.values(f),A(b,s.removeSegments(P,function(){}),10);case 10:throw L}})}function Jw(e){var t,n,i,r;return U(function(o){switch(o.g){case 1:return t=new Fn,A(o,t.init(),2);case 2:return A(o,Bw(t),3);case 3:return n=o.h,i=new sr("manifest",n.path.zb,n.path.Ta,e),A(o,t.destroy(),4);case 4:return r=new on,A(o,r.remove(i.toString()),0)}})}function Zw(e,t,n,i,r,o){var s,u,a,l,f,d,g,m,y,x,S;return U(function(E){switch(E.g){case 1:for(s=!1,ge(E,2),u=!0,a=v(n.streams),l=a.next();!l.done;l=a.next())for(f=l.value,d=v(f.segments),g=d.next();!g.done;g=d.next())m=g.value,y=m.pendingSegmentRefId?i[m.pendingSegmentRefId]:null,y!=null&&(m.dataKey=y,m.pendingSegmentRefId=void 0),y=m.pendingInitSegmentRefId?i[m.pendingInitSegmentRefId]:null,y!=null&&(m.initSegmentKey=y,m.pendingInitSegmentRefId=void 0),m.pendingSegmentRefId&&(u=!1),m.pendingInitSegmentRefId&&(u=!1);return n.size+=r,u&&(n.isIncomplete=!1),A(E,e.updateManifest(t,n),4);case 4:s=!0,o(),Pe(E,0);break;case 2:return x=Se(E),A(E,Jw(t),5);case 5:if(s){E.s(6);break}return S=Object.values(i),A(E,e.removeSegments(S,function(){}),6);case 6:throw x}})}function i4(e,t,n,i){var r,o,s,u,a,l,f,d,g,m,y,x,S,E,M,L,P,b,D,k,N,j,V,F,B,H,G,z,W,$;return U(function(te){switch(te.g){case 1:return r={width:1/0,height:1/0},jA(e,n.restrictions,r),A(te,Uv(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(o=[],s=n.preferredDecodingAttributes,u=n.preferredVideoCodecs,a=n.preferredAudioCodecs,l=n.preferredTextFormats,Ov(e,u,a,s,l),f=v(e.variants),d=f.next();!d.done;d=f.next())g=d.value,o.push(Vo(g));for(m=v(e.textStreams),y=m.next();!y.done;y=m.next())x=y.value,o.push(qu(x));for(S=v(e.imageStreams),E=S.next();!E.done;E=S.next())M=E.value,o.push(eh(M));return A(te,n.offline.trackSelectionCallback(o),3);case 3:for(L=te.h,P=e.presentationTimeline.getDuration(),b=0,D=v(L),k=D.next();!k.done;k=D.next())N=k.value,j=N.bandwidth*P/8,b+=j;return ge(te,4),A(te,n.offline.downloadSizeCallback(b),6);case 6:if(V=te.h,!V)throw new _(2,9,9014);Pe(te,5);break;case 4:throw F=Se(te),F instanceof _?F:new _(2,9,9015);case 5:for(B=new Set,H=new Set,G=new Set,z=v(L),W=z.next();!W.done;W=z.next())$=W.value,$.type=="variant"&&B.add($.id),$.type=="text"&&H.add($.id),$.type=="image"&&G.add($.id);e.variants=e.variants.filter(function(Me){return B.has(Me.id)}),e.textStreams=e.textStreams.filter(function(Me){return H.has(Me.id)}),e.imageStreams=e.imageStreams.filter(function(Me){return G.has(Me.id)}),w4(e),ie(te)}})}function r4(e,t,n,i,r,o,s){var u=QD(n,t,i),a=r.offline.progressCallback;RD(o,function(y,x){u.size=x,a(u,y)},function(y,x){l&&s&&f==x&&$u(e,"cenc",y)});var l=wg(t)&&!eS(t),f=null;l&&(f=S4.get(e.h.keySystem));for(var d=new JD,g=v(t.textStreams),m=g.next();!m.done;m=g.next())d.g.set(m.value.id,52);for(g=v(t.imageStreams),m=g.next();!m.done;m=g.next())e4(d,m.value);for(g=v(t.variants),m=g.next();!m.done;m=g.next())ZD(d,m.value);return o=p4(o,d,t,r),r=o.streams,o=o.tg,(d=e.h)&&s&&(d.initData=[]),{Yi:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.pd(),streams:r,sessionIds:s?fy(e):[],drmInfo:d,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},tg:o}}function wg(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function eS(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function tS(e,t,n,i){if(t.expiration=n.pd(),n=fy(n),t.sessionIds=i?n:[],wg(e)&&i&&!n.length)throw new _(2,9,9007)}h.remove=function(e){return Sg(this,o4(this,e))};function o4(e,t){var n,i,r,o,s,u;return U(function(a){switch(a.g){case 1:if(Rf(),n=vg(t),n==null||n.g!="manifest")throw new _(2,9,9004,t);return i=n,r=new Fn,En(a,2),A(a,r.init(),4);case 4:return A(a,Cf(r,i.zb(),i.Ta()),5);case 5:return o=a.h,A(a,o.getManifests([i.key()]),6);case 6:return s=a.h,u=s[0],A(a,Promise.all([s4(e,u,r),u4(o,i,u)]),2);case 2:return Ct(a),A(a,r.destroy(),8);case 8:lt(a,0)}})}function nS(e,t){for(var n=[],i=v(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:Ot(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:Ot(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function s4(e,t,n){return U(function(i){return A(i,T4(e.g,e.h.drm,n,t),0)})}function u4(e,t,n){function i(){}var r=y4(n);return yg(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}h.qj=function(){return Sg(this,a4(this))};function a4(e){var t,n,i,r,o,s,u,a,l,f;return U(function(d){switch(d.g){case 1:return Rf(),t=e.g,n=e.h.drm,i=new Fn,r=!1,En(d,2),A(d,i.init(),4);case 4:o=[],UD(i,function(g){return o.push(g)}),s=v(o),u=s.next();case 5:if(u.done){d.s(2);break}return a=u.value,A(d,a.getAll(),8);case 8:return l=d.h,A(d,Yw(n,t,l),9);case 9:return f=d.h,A(d,a.remove(f),10);case 10:f.length!=l.length&&(r=!0),u=s.next(),d.s(5);break;case 2:return Ct(d),A(d,i.destroy(),11);case 11:lt(d,3);break;case 3:return d.return(!r)}})}h.list=function(){return Sg(this,l4())};function l4(){var e,t,n;return U(function(i){switch(i.g){case 1:return Rf(),e=[],t=new Fn,En(i,2),A(i,t.init(),4);case 4:return n=Promise.resolve(),OD(t,function(r,o){n=n.then(function(){var s;return U(function(u){if(u.g==1)return A(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,l){a=yg(new sr("manifest",r.zb,r.Ta,l),a),e.push(a)}),ie(u)})})}),A(i,n,2);case 2:return Ct(i),A(i,t.destroy(),6);case 6:lt(i,3);break;case 3:return i.return(e)}})}function c4(e,t,n,i){var r,o,s,u,a;return U(function(l){if(l.g==1)return r=null,o=e.g,s={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(f){r=f},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),ai(e),A(l,n.start(t,s),2);if(l.g!=3)return u=l.h,ai(e),a=rS(u),A(l,Promise.all(oh(a,function(f){return f.createSegmentIndex()})),3);if(ai(e),r)throw r;return l.return(u)})}function f4(e,t,n){var i,r,o,s,u,a,l,f,d,g,m,y,x,S,E;return U(function(M){switch(M.g){case 1:return A(M,iS(e,t),2);case 2:if(i=M.h,i!="text/vtt")throw new _(1,2,2017,t);return A(M,h4(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=M.h,o=Bl(i),!o)throw new _(2,2,2014,i);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},a=De(r),l=s.parseMedia(a,u,t,[]),f=[],d=v(l),g=d.next(),m={};!g.done;m={Me:void 0,Nc:void 0},g=d.next())m.Nc=g.value,m.Me=null,y=function(L){return function(){return L.Me==null&&(L.Me=Jt([t],[L.Nc.payload])),L.Me||[]}}(m),x=new ye(m.Nc.startTime,m.Nc.endTime,y,0,null,null,0,0,1/0),m.Nc.payload.includes("#xywh")&&(S=m.Nc.payload.split("#xywh=")[1].split(","),S.length===4&&x.De({height:parseInt(S[3],10),positionX:parseInt(S[0],10),positionY:parseInt(S[1],10),width:parseInt(S[2],10)})),f.push(x);if(E=i,!f.length){M.s(4);break}return A(M,Zo(f[0].N()[0],e.g,e.h.manifest.retryParameters),5);case 5:E=M.h;case 4:return M.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ze(f),mimeType:E||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ot(E||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function d4(e,t,n,i,r,o,s){var u,a,l;return U(function(f){if(f.g==1)return o?f.s(2):A(f,iS(e,n),3);if(f.g!=2&&(o=f.h),u={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:fc(0,t.presentationTimeline.getDuration(),[n]),mimeType:o||"",codecs:s||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:be,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ot(o||"",s||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},a=Ot(u.mimeType,u.codecs),l=Ps(a),!l)throw new _(2,2,2014,o);return f.return(u)})}function iS(e,t){var n;return U(function(i){switch(i.g){case 1:return ge(i,2),A(i,Zo(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,Pe(i,3);break;case 2:Se(i);case 3:if(n)return i.return(n);throw new _(1,2,2011,t)}})}function h4(e,t,n){var i,r,o;return U(function(s){return s.g==1?(i=Fi,r=qt([e],n),r.method="GET",A(s,t.request(i,r).promise,2)):(o=s.h,s.return(o.data))})}h.Lc=function(e,t,n,i){var r=this,o;return U(function(s){return s.g==1?(o=new Ql({Xb:r.g,onError:t,pe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o.configure(n.drm),A(s,ZA(o,e.variants,i),2)):s.g!=3?A(s,cy(o),3):s.return(o)})};function p4(e,t,n,i){var r=new Map,o=rS(n),s=new Map;o=v(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=g4(e,t,n,u,i,r);s.set(u.id,a)}for(e=v(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),tg:Array.from(r.values())}}function g4(e,t,n,i,r,o){var s={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},u=r.offline.numberOfParallelDownloads,a=u===0?i.id:0;return m4(i,n.presentationTimeline.pb(),function(l,f){var d=dg(l),g=void 0;if(!o.has(d)){var m=l.endTime-l.startTime;m=Qw(t,i.id)*m,m=Nw(e.g,m),o.set(d,new Lw(l,m,a,!1,f))}l.Y&&(g=dg(l.Y),o.has(g)||(m=.5*Qw(t,i.id),m=Nw(e.g,m),o.set(g,new Lw(l.Y,m,a,!0,f)))),s.segments.push({pendingInitSegmentRefId:g,initSegmentKey:g?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:d,dataKey:0,mimeType:l.mimeType,codecs:l.codecs,thumbnailSprite:l.thumbnailSprite}),u!==0&&(a=(a+1)%u)}),s}function m4(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}function ai(e){if(e.j.g)throw new _(2,9,7001)}function Rf(){if(!Tg())throw new _(2,9,9e3)}function Sg(e,t){return U(function(n){return n.g==1?(e.i.push(t),En(n,2),A(n,t,4)):n.g!=2?n.return(n.h):(Ct(n),Oi(e.i,t),lt(n,0))})}function v4(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Oi(e.i,n)})}function y4(e){var t=new Set;e=v(e.streams);for(var n=e.next();!n.done;n=e.next()){n=v(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function T4(e,t,n,i){var r,o,s;return U(function(u){return u.g==1?i.drmInfo?(r=bD(n),o=i.sessionIds.map(function(a){return{sessionId:a,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:nS(i,!1),videoCapabilities:nS(i,!0)}}),A(u,Yw(t,e,o),2)):u.return():u.g!=3?(s=u.h,A(u,r.remove(s),3)):A(u,r.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function rS(e){for(var t=new Set,n=v(e.variants),i=n.next();!i.done;i=n.next())i=i.value,i.audio&&t.add(i.audio),i.video&&t.add(i.video);for(n=v(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=v(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function w4(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=v(t),i=n.next();!i.done;i=n.next()){i=v(t);for(var r=i.next();!r.done;r=i.next());}for(t=v(e),n=t.next();!n.done;n=t.next())for(n=v(e),i=n.next();!i.done;i=n.next());}R("shaka.offline.Storage",on),on.deleteAll=function(){var e;return U(function(t){return t.g==1?(e=new Fn,En(t,2),A(t,FD(e),2)):t.g!=5?(Ct(t),A(t,e.destroy(),5)):lt(t,0)})},on.prototype.list=on.prototype.list,on.prototype.removeEmeSessions=on.prototype.qj,on.prototype.remove=on.prototype.remove,on.prototype.store=on.prototype.store,on.prototype.getNetworkingEngine=on.prototype.xb,on.prototype.getConfiguration=on.prototype.getConfiguration,on.prototype.configure=on.prototype.configure,on.prototype.destroy=on.prototype.destroy,on.support=Tg;var S4=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");b0("offline",Tg);function Sn(){}function Bn(e,t){for(e={priority:t||0,callback:e},t=0;t<Xa.length;t++)if(Xa[t].priority<e.priority){Xa.splice(t,0,e);return}Xa.push(e)}R("shaka.polyfill",Sn),Sn.register=Bn,Sn.installAll=function(){for(var e=v(Xa),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){J("Error installing polyfill!",n)}}};var Xa=[];function oS(){}function sS(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=v(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())x4(t.value)}function x4(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Sn.Aria=oS,oS.install=sS,Bn(sS);function uS(){}function aS(){Wi()||Ft("Sky_STB")||Sx()}Sn.EncryptionScheme=uS,uS.install=aS,Bn(aS,-2);function lS(){}function cS(){if(w.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",gu),document.addEventListener("webkitfullscreenerror",gu),document.addEventListener("mozfullscreenchange",gu),document.addEventListener("mozfullscreenerror",gu),document.addEventListener("MSFullscreenChange",gu),document.addEventListener("MSFullscreenError",gu)}}function gu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Sn.Fullscreen=lS,lS.install=cS,Bn(cS);function xg(){}function fS(){var e=!0;(Ni()&&!$r()&&!Ad()||sn()||Ts()||Wi()||yr()||Ki()||Rl()||ws()&&!sn())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),dS=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=E4)}function E4(e){var t,n,i,r,o,s,u,a,l,f,d;return U(function(g){switch(g.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,i=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(r=n.contentType,o=Lu(r),!o)||i&&(s=i.contentType,u=Lu(s),!u))return g.return(t)}else return g.return(t);g.s(2);break}if(!er())return g.return(t);if(!n){g.s(3);break}return A(g,A4(n),4);case 4:if(a=g.h,!a)return g.return(t);case 3:if(i){var m=i.contentType;if(Ni()&&i.spatialRendering&&(m+="; spatialRendering=true"),l=nn(m),!l)return g.return(t)}case 2:return e.keySystemConfiguration?(f=e.keySystemConfiguration,A(g,I4(n,i,f),6)):(t.supported=!0,g.return(t));case 6:(d=g.h)&&(t.supported=!0,t.keySystemAccess=d);case 5:return g.return(t)}})}function A4(e){var t,n;return U(function(i){return i.g==1?Ni()?A(i,M4(e),3):Ki()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),i.return(nn(t))):i.s(2):i.g!=2?(n=i.h,i.return(n)):i.return(nn(e.contentType))})}function I4(e,t,n){var i,r,o,s,u,a,l,f,d,g,m;return U(function(y){switch(y.g){case 1:if(i=[],r=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},Ki()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme),i.push(o)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),r.push(s)),u={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(u.audioCapabilities=i),r.length&&(u.videoCapabilities=r),a=e?e.contentType:"",l=t?t.contentType:"",f=Xn(a)+";"+io(a),d=Xn(l)+";"+io(l),g=n.keySystem,m=null,ge(y,2),ys.has(f+"#"+d+"#"+g)){m=ys.get(f+"#"+d+"#"+g)||null,y.s(4);break}return A(y,navigator.requestMediaKeySystemAccess(n.keySystem,[u]),5);case 5:m=y.h,ys.set(f+"#"+d+"#"+g,m);case 4:Pe(y,3);break;case 2:Se(y);case 3:return y.return(m)}})}function M4(e){var t,n,i,r,o;return U(function(s){if(s.g==1){if(!(w.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return s.return(nn(e.contentType));switch(t=e.contentType,e.width&&e.height&&1280<e.width&&720<e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),24>n||30<n)&&(t+="; framerate="+e.framerate),i=e.transferFunction||"",i){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return s.return(!1)}return r=!1,o=C4,o.has(t)?(r=o.get(t),s.s(2)):A(s,cast.__platform__.canDisplayType(t),3)}return s.g!=2&&(r=s.h,o.set(t,r)),s.return(r)})}Sn.MediaCapabilities=xg,xg.install=fS;var dS=null;xg.originalMcap=dS;var C4=new Map;Bn(fS,-1);function hS(){}function pS(){var e=iv();(w.MediaSource||w.ManagedMediaSource)&&(e&&w.MediaSource?12>=e?(Eg(),gS()):15>=e&&Eg():Ft("DT_STB_BCM")?(Eg(),gS()):(Ft("Tizen 2")||vr()||Ft("Tizen 4"))&&D4()),(w.MediaSource||w.ManagedMediaSource)&&k4(),w.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&R4()}function Eg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,tn.apply(0,arguments));return t.abort=function(){},t}}function gS(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function k4(){if(w.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Fl(n)!="mp2t"&&e(n)}}if(w.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);w.ManagedMediaSource.isTypeSupported=function(n){return Fl(n)!="mp2t"&&t(n)}}}function D4(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return io(n)!="opus"&&e(n)},w.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);w.ManagedMediaSource.isTypeSupported=function(n){return io(n)!="opus"&&t(n)}}}function R4(){var e=MediaSource.isTypeSupported;yr()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=r.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(r[o]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}Sn.MediaSource=hS,hS.install=pS,Bn(pS);function mS(){}function vS(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?P4():w.orientation!=null&&L4())}function P4(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function L4(){function e(){switch(w.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Pf;screen.orientation=t,e(),w.addEventListener("orientationchange",function(){e();var n=new re("change");t.dispatchEvent(n)})}Sn.Orientation=mS,mS.install=vS;function Pf(){ut.call(this),this.type="",this.angle=0}At(Pf,ut),Pf.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):screen.msLockOrientation?screen.msLockOrientation(i):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Pf.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Bn(vS);function Ag(){}var Ig,Mg,Cg,kg,Dg,Rg;function yS(e){w.HTMLVideoElement&&w.WebKitMediaKeys&&(e!==void 0&&e&&(Ig=!0,Mg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Cg=HTMLMediaElement.prototype.setMediaKeys,kg=w.MediaKeys,Dg=w.MediaKeySystemAccess,Rg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=N4,w.MediaKeys=za,w.MediaKeySystemAccess=Lf,navigator.requestMediaKeySystemAccess=_4,w.shakaMediaKeysPolyfill=O4,Kl.clear(),ys.clear())}function _4(e,t){try{var n=new Lf(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function N4(e){var t=this.mediaKeys;return t&&t!=e&&TS(t,null),delete this.mediaKeys,(this.mediaKeys=e)?TS(e,this):Promise.resolve()}function j4(e){if(e=De(e.initData),Ln(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Qr(e.subarray(4),!0),e=ji(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=yi(e),this.dispatchEvent(t)}Sn.PatchedMediaKeysApple=Ag,Ag.uninstall=function(){Ig&&(Ig=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Mg),HTMLMediaElement.prototype.setMediaKeys=Cg,w.MediaKeys=kg,w.MediaKeySystemAccess=Dg,navigator.requestMediaKeySystemAccess=Rg,Mg=Rg=Cg=Dg=kg=null,w.shakaMediaKeysPolyfill="",Kl.clear(),ys.clear())},Ag.install=yS;function Lf(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=v(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var o=v(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(n=v(n.videoCapabilities),o=n.next();!o.done;o=n.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Lf.prototype.createMediaKeys=function(){var e=new za(this.keySystem);return Promise.resolve(e)},Lf.prototype.getConfiguration=function(){return this.g};function za(e){this.h=new WebKitMediaKeys(e),this.g=new ke}za.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Pg(this.h)},za.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function TS(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",j4);try{return qs(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}za.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Pg(e){ut.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new ke,this.sessionId="",this.expiration=NaN,this.closed=new st,this.keyStatuses=new wS}At(Pg,ut),h=Pg.prototype,h.generateRequest=function(e,t){var n=this;this.h=new st;try{var i=this.l.createSession("video/mp4",De(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.dc()==null?"license-request":"license-renewal").set("message",yi(r.message)),r=new re("message",r),n.dispatchEvent(r)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(_f(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:_f(n,"output-not-allowed");break;default:_f(n,"internal-error")}}),_f(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},h.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},h.update=function(e){this.g=new st;try{this.i.update(De(e))}catch(t){this.g.reject(t)}return this.g},h.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},h.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function _f(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new re("keystatuseschange"),e.dispatchEvent(t)}function wS(){this.size=0,this.g=void 0}h=wS.prototype,h.dc=function(){return this.g},h.forEach=function(e){this.g&&e(this.g,kl.value())},h.get=function(e){if(this.has(e))return this.g},h.has=function(e){var t=kl.value();return!!(this.g&&mr(e,t))},h.entries=function(){},h.keys=function(){},h.values=function(){};var O4="apple";Bn(function(){w.HTMLVideoElement&&w.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||yS())});function SS(){}function xS(){w.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||vr()||Ft("Tizen 4")||Ft("Tizen 5.0")||Dl())&&(MediaKeys.prototype.setServerCertificate=U4)}function U4(){return Promise.resolve(!1)}Sn.PatchedMediaKeysCert=SS,SS.install=xS,Bn(xS);function ES(){}function AS(){if(!(!w.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Og="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=b4,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=F4,w.MediaKeys=qa,w.MediaKeySystemAccess=Nf,w.shakaMediaKeysPolyfill=B4}}function Lg(e){var t=Og;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function b4(e,t){try{var n=new Nf(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function F4(e){var t=this.mediaKeys;return t&&t!=e&&IS(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&IS(e,this),Promise.resolve()}Sn.PatchedMediaKeysWebkit=ES,ES.install=AS;function Nf(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=v(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=v(o.audioCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),i=!0));if(o.videoCapabilities)for(a=v(o.videoCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),o.persistentState=="required"&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i){this.h=s;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Nf.prototype.createMediaKeys=function(){var e=new qa(this.g);return Promise.resolve(e)},Nf.prototype.getConfiguration=function(){return this.h};function qa(e){this.l=e,this.h=null,this.g=new ke,this.i=[],this.j=new Map}function IS(e,t){e.h=t,e.g.Qa();var n=Og;t&&(e.g.D(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=yi(i.initData),e.h.dispatchEvent(r)}),e.g.D(t,n+"keymessage",function(i){var r=_g(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.dc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new re("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=_g(e,i.sessionId))&&i.ready()}),e.g.D(t,n+"keyerror",function(i){var r=_g(e,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(i.systemCode==45&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?jf(r,"output-restricted"):o==1?jf(r,"expired"):jf(r,"internal-error"))}}))}qa.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Ng(t,this.l,e),this.i.push(e),e},qa.prototype.setServerCertificate=function(){return Promise.resolve(!1)},qa.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function _g(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Ng(e,t,n){ut.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new st,this.keyStatuses=new CS}At(Ng,ut),h=Ng.prototype,h.ready=function(){jf(this,"usable"),this.g&&this.g.resolve(),this.g=null};function MS(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=De(ji("LOAD_SESSION|"+n));else{var r=ji("PERSISTENT|");i=Nt(r,t)}else i=De(t)}catch(s){return Promise.reject(s)}e.h=new st;var o=Lg("generateKeyRequest");try{e.j[o](e.i,i)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new Be(function(){try{e.j[o](e.i,i)}catch(u){e.h.reject(u),e.h=null}}).da(.01)}return e.h}function jg(e,t,n){if(e.g)e.g.then(function(){return jg(e,t,n)}).catch(function(){return jg(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=St(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=Ti(r.keys[0].k),r=Ti(r.keys[0].kid)}else i=De(n),r=null;var o=Lg("addKey");try{e.j[o](e.i,i,r,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function jf(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new re("keystatuseschange"),e.dispatchEvent(t)}h.generateRequest=function(e,t){return MS(this,t,null)},h.load=function(e){return this.l=="persistent-license"?MS(this,null,e):Promise.reject(Error("Not a persistent session."))},h.update=function(e){var t=new st;return jg(this,t,e),t},h.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Lg("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},h.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function CS(){this.size=0,this.g=void 0}h=CS.prototype,h.dc=function(){return this.g},h.forEach=function(e){this.g&&e(this.g,kl.value())},h.get=function(e){if(this.has(e))return this.g},h.has=function(e){var t=kl.value();return!!(this.g&&mr(e,t))},h.entries=function(){},h.keys=function(){},h.values=function(){};var Og="",B4="webkit";Bn(AS);function kS(){}function DS(){if(w.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=H4,Object.defineProperty(e,"disablePictureInPicture",{get:K4,set:W4,enumerable:!0,configurable:!0}),document.exitPictureInPicture=G4,document.addEventListener("webkitpresentationmodechanged",V4,!0))}}function V4(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function H4(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function G4(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function K4(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function W4(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Sn.PiPWebkit=kS,kS.install=DS,Bn(DS);function RS(){}function PS(){w.crypto&&("randomUUID"in w.crypto||(w.crypto.randomUUID=X4))}function X4(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Sn.RandomUUID=RS,RS.install=PS,Bn(PS);function LS(){}function _S(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:z4})}function z4(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Sn.Symbol=LS,LS.install=_S,Bn(_S);function NS(){}function jS(){if(w.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Sn.VideoPlayPromise=NS,NS.install=jS,Bn(jS);function OS(){}function US(){if(w.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||Dl())&&(e.getVideoPlaybackQuality=q4)}}function q4(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Sn.VideoPlaybackQuality=OS,OS.install=US,Bn(US);function bS(){}function FS(){if(!w.VTTCue&&w.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Ug;else if(t==6)e=Y4;else{try{var n=!!Ug(1,2,"")}catch{n=!1}n&&(e=Ug)}e&&(w.VTTCue=function(i,r,o){return e(i,r,o)})}}function Ug(e,t,n){return new w.TextTrackCue(e,t,n)}function Y4(e,t,n){return new w.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Sn.VTTCue=bS,bS.install=FS,Bn(FS);function li(){}li.prototype.parseInit=function(){},li.prototype.setSequenceMode=function(){},li.prototype.setManifestType=function(){},li.prototype.parseMedia=function(e,t){var n=null,i=[];e=St(e).split(/\r?\n/),e=v(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=$4.exec(r))){var o=Q4.exec(r[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),r=new mt(o,t.segmentEnd?t.segmentEnd:o+2,r[2]),n&&(n.endTime=o,i.push(n)),n=r}return n&&i.push(n),i},R("shaka.text.LrcTextParser",li),li.prototype.parseMedia=li.prototype.parseMedia,li.prototype.setManifestType=li.prototype.setManifestType,li.prototype.setSequenceMode=li.prototype.setSequenceMode,li.prototype.parseInit=li.prototype.parseInit;var $4=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Q4=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;un("application/x-subtitle-lrc",function(){return new li});function Qn(){}Qn.prototype.parseInit=function(){},Qn.prototype.setSequenceMode=function(){},Qn.prototype.setManifestType=function(){},Qn.prototype.parseMedia=function(e,t,n,i){var r=St(e);if(e=[],r=="")return e;var o=Uo(r,"tt",!0);if(!o)throw new _(2,2,2005,"Failed to parse TTML.");if(r=zi(o,"body")[0],!r)return[];var s=nr(o,Ya,"frameRate"),u=nr(o,Ya,"subFrameRate"),a=nr(o,Ya,"frameRateMultiplier"),l=nr(o,Ya,"tickRate"),f=nr(o,Ya,"cellResolution"),d=o.attributes["xml:space"]||"default",g=nr(o,bf,"extent");if(d!="default"&&d!="preserve")throw new _(2,2,2005,"Invalid xml:space value: "+d);d=d=="default",s=new nR(s,u,a,l),f=tR(f),u=zi(o,"metadata")[0],u=(u?u.children:[]).filter(function(x){return x!=`
`}),a=zi(o,"style"),o=zi(o,"region"),l=[];for(var m=v(o),y=m.next();!y.done;y=m.next())(y=J4(y.value,a,g))&&l.push(y);if(nt(r,"p").length)throw new _(2,2,2001,"<p> can only be inside <div> in TTML");for(g=v(nt(r,"div")),m=g.next();!m.done;m=g.next())if(nt(m.value,"span").length)throw new _(2,2,2001,"<span> can only be inside <p> in TTML");return(t=BS(r,t,s,u,a,o,l,d,f,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function BS(e,t,n,i,r,o,s,u,a,l,f,d,g){var m=l;if(Ll(e)){if(!f)return null;var y={tagName:"span",children:[Gt(e)],attributes:{},parent:null}}else y=e;for(var x=null,S=v($S),E=S.next();!E.done&&!(x=Uf(y,"backgroundImage",i,"#",E.value)[0]);E=S.next());S=null,E=nr(y,$S,"backgroundImage");var M=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(E&&M.test(E)){if(S=parseInt(E.split(":").pop(),10)-1,S>=g.length)return null;S=g[S]}else d&&E&&!E.startsWith("#")&&(M=new _t(d),E=new _t(E),(E=M.resolve(E).toString())&&(S=E));if((e.tagName=="p"||x||S)&&(f=!0),e=f,E=(y.attributes["xml:space"]||(u?"default":"preserve"))=="default",M=y.children.every(Ll),u=[],!M)for(var L=v(y.children),P=L.next();!P.done;P=L.next())(P=BS(P.value,t,n,i,r,o,s,E,a,y,f,d,g))&&u.push(P);if(i=l!=null,d=Gt(y),d=y.children.length&&d&&/\S/.test(d),L=y.attributes.begin||y.attributes.end||y.attributes.dur,!(L||d||y.tagName=="br"||u.length!=0||i&&!E))return null;for(g=GS(y,n),d=g.start,g=g.end;m&&m.tagName&&m.tagName!="tt";)g=eR(m,n,d,g),d=g.start,g=g.end,m=m.parent;if(d==null&&(d=0),d+=t.periodStart,g=g==null?1/0:g+t.periodStart,d=Math.max(d,t.segmentStart),g=Math.min(g,t.segmentEnd),!L&&0<u.length)for(d=1/0,g=0,t=v(u),n=t.next();!n.done;n=t.next())n=n.value,d=Math.min(d,n.startTime),g=Math.max(g,n.endTime);if(y.tagName=="br")return r=new mt(d,g,""),r.lineBreak=!0,r;if(t="",M&&(t=_n(Gt(y)||""),E&&(t=t.replace(/\s+/g," "))),t=new mt(d,g,t),t.nestedCues=u,f||(t.isContainer=!0),a&&(t.cellResolution=a),a=Uf(y,"region",o,"")[0],y.attributes.region&&a&&a.attributes["xml:id"]){var b=a.attributes["xml:id"];t.region=s.filter(function(D){return D.id==b})[0]}return s=a,l&&i&&!y.attributes.region&&!y.attributes.style&&(s=Uf(l,"region",o,"")[0]),Z4(t,y,s,x,S,r,e,u.length==0),t}function J4(e,t,n){var i=new _o,r=e.attributes["xml:id"];if(!r)return null;i.id=r,r=null,n&&(r=Hg.exec(n)||Gg.exec(n)),n=r?Number(r[1]):null,r=r?Number(r[2]):null;var o,s=Of(e,t,"extent");if(s){var u=(o=Hg.exec(s))||Gg.exec(s);u!=null&&(i.width=Number(u[1]),i.height=Number(u[2]),o||(n!=null&&(i.width=100*i.width/n),r!=null&&(i.height=100*i.height/r)),i.widthUnits=o||n!=null?Wn:0,i.heightUnits=o||r!=null?Wn:0)}return(e=Of(e,t,"origin"))&&(u=(o=Hg.exec(e))||Gg.exec(e),u!=null&&(i.viewportAnchorX=Number(u[1]),i.viewportAnchorY=Number(u[2]),o?s||(i.width=100-i.viewportAnchorX,i.widthUnits=Wn,i.height=100-i.viewportAnchorY,i.heightUnits=Wn):(r!=null&&(i.viewportAnchorY=100*i.viewportAnchorY/r),n!=null&&(i.viewportAnchorX=100*i.viewportAnchorX/n)),i.viewportAnchorUnits=o||n!=null?Wn:0)),i}function bg(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function Z4(e,t,n,i,r,o,s,u){if(s=s||u,vn(t,n,o,"direction",s)=="rtl"&&(e.direction="rtl"),u=vn(t,n,o,"writingMode",s),u=="tb"||u=="tblr"?e.writingMode="vertical-lr":u=="tbrl"?e.writingMode="vertical-rl":u=="rltb"||u=="rl"?e.direction="rtl":u&&(e.direction=Hu),(u=vn(t,n,o,"textAlign",!0))?(e.positionAlign=oR.get(u),e.lineAlign=rR.get(u),e.textAlign=Vd[u.toUpperCase()]):e.textAlign=rr,(u=vn(t,n,o,"displayAlign",!0))&&(e.displayAlign=Iv[u.toUpperCase()]),(u=vn(t,n,o,"color",s))&&(e.color=bg(u)),(u=vn(t,n,o,"backgroundColor",s))&&(e.backgroundColor=bg(u)),(u=vn(t,n,o,"border",s))&&(e.border=u),u=vn(t,n,o,"fontFamily",s))switch(u){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=u.split(",").filter(function(a){return a!="default"}).join(",")}switch((u=vn(t,n,o,"fontWeight",s))&&u=="bold"&&(e.fontWeight=ks),u=vn(t,n,o,"wrapOption",s),e.wrapLine=!(u&&u=="noWrap"),(u=vn(t,n,o,"lineHeight",s))&&u.match(mu)&&(e.lineHeight=u),(u=vn(t,n,o,"fontSize",s))&&(u.match(mu)||u.match(iR))&&(e.fontSize=u),(u=vn(t,n,o,"fontStyle",s))&&(e.fontStyle=Dv[u.toUpperCase()]),i?(r=i.attributes.imageType||i.attributes.imagetype,u=i.attributes.encoding,i=Gt(i).trim(),r=="PNG"&&u=="Base64"&&i&&(e.backgroundImage="data:image/png;base64,"+i)):r&&(e.backgroundImage=r),(i=vn(t,n,o,"textOutline",s))&&(i=i.split(" "),i[0].match(mu)?e.textStrokeColor=e.color:(e.textStrokeColor=bg(i[0]),i.shift()),i[0]&&i[0].match(mu)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=vn(t,n,o,"letterSpacing",s))&&i.match(mu)&&(e.letterSpacing=i),(i=vn(t,n,o,"linePadding",s))&&i.match(mu)&&(e.linePadding=i),(i=vn(t,n,o,"opacity",s))&&(e.opacity=parseFloat(i)),(i=Of(n,o,"textDecoration"))&&VS(e,i),(i=Fg(t,o,"textDecoration"))&&VS(e,i),(i=vn(t,n,o,"textCombine",s))&&(e.textCombineUpright=i),vn(t,n,o,"ruby",s)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function VS(e,t){t=v(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Er)||e.textDecoration.push(Er);break;case"noUnderline":e.textDecoration.includes(Er)&&Oi(e.textDecoration,Er);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Oi(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Oi(e.textDecoration,"overline")}}function vn(e,t,n,i,r){return r=r===void 0?!0:r,(e=Fg(e,n,i))?e:r?Of(t,n,i):null}function Of(e,t,n){if(!e)return null;var i=nr(e,bf,n);return i||HS(e,t,n)}function Fg(e,t,n){var i=nr(e,bf,n);return i||HS(e,t,n)}function HS(e,t,n){e=Uf(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var o=Sr(e[r],"urn:ebu:tt:style",n);o||(o=nr(e[r],bf,n)),o||(o=Fg(e[r],t,n)),o&&(i=o)}return i}function Uf(e,t,n,i,r){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;!e&&!(e=r?Sr(s,r,t):s.attributes[t])&&(s=s.parent,s););if(t=e){for(t=v(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=v(n),s=e.next();!s.done;s=e.next())if(s=s.value,i+s.attributes["xml:id"]==r){o.push(s);break}}return o}function eR(e,t,n,i){return e=GS(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function GS(e,t){var n=Bg(e.attributes.begin,t),i=Bg(e.attributes.end,t);return e=Bg(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function Bg(e,t){var n=null;if(KS.test(e)){e=KS.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,r+=o/t.frameRate,n=r+60*i+3600*n}else if(WS.test(e))n=Vg(WS,e);else if(XS.test(e))n=Vg(XS,e);else if(zS.test(e))e=zS.exec(e),n=Number(e[1])/t.frameRate;else if(qS.test(e))e=qS.exec(e),n=Number(e[1])/t.g;else if(YS.test(e))n=Vg(YS,e);else if(e)throw new _(2,2,2001,"Could not parse cue time range in TTML");return n}function Vg(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function tR(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}R("shaka.text.TtmlTextParser",Qn),Qn.prototype.parseMedia=Qn.prototype.parseMedia,Qn.prototype.setManifestType=Qn.prototype.setManifestType,Qn.prototype.setSequenceMode=Qn.prototype.setSequenceMode,Qn.prototype.parseInit=Qn.prototype.parseInit;function nR(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var Hg=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,iR=/^(\d{1,4}(?:\.\d+)?|100)%$/,mu=/^(\d+px|\d+em|\d*\.?\d+c)$/,Gg=/^(\d+)px (\d+)px$/,KS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,WS=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,XS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,zS=/^(\d*(?:\.\d*)?)f$/,qS=/^(\d*(?:\.\d*)?)t$/,YS=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),rR=new Map().set("left",Fo).set("center","center").set("right","end").set("start",Fo).set("end","end"),oR=new Map().set("left","line-left").set("center","center").set("right","line-right"),Ya=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],bf=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],$S=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];un("application/ttml+xml",function(){return new Qn});function $t(){this.g=new Qn}$t.prototype.parseInit=function(e){var t=!1;if(new ft().box("moov",Fe).box("trak",Fe).box("mdia",Fe).box("minf",Fe).box("stbl",Fe).R("stsd",oo).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new _(2,2,2007)},$t.prototype.setSequenceMode=function(){},$t.prototype.setManifestType=function(){},$t.prototype.parseMedia=function(e,t,n){var i=[],r=null,o=[],s=new Map,u=[];if(new ft().box("moof",Fe).box("traf",Fe).R("tfhd",function(E){r=Zl(E.reader,E.flags).md}).R("trun",function(E){E=nc(E.reader,E.version,E.flags),E=v(E.fg);for(var M=E.next();!M.done;M=E.next())u.push(M.value.sampleSize||r||0)}).R("subs",function(E){for(var M=E.reader,L=M.S(),P=-1,b=0;b<L;b++){var D=M.S();P+=D,D=M.na();for(var k=[],N=0;N<D;N++)E.version==1?k.push(M.S()):k.push(M.na()),M.X(),M.X(),M.S();s.set(P,k)}}).box("mdat",Us(function(E){o.push(E)})).parse(e,!1),o.length==0)throw new _(2,2,2007);for(var a=Nt.apply(fn,Q(o)),l=0,f=0;f<u.length;f++){var d=De(a,l,u[f]);l+=u[f];var g=s.get(f);if(g&&g.length){d=De(d,0,g[0]);for(var m=[],y=g[0],x=1;x<g.length;x++){var S=De(e,y,g[x]);S=Pl(S),m.push("data:image/png;base64,"+S),y+=g[x]}i=i.concat(this.g.parseMedia(d,t,n,m))}else i=i.concat(this.g.parseMedia(d,t,n,[]))}return i},R("shaka.text.Mp4TtmlParser",$t),$t.prototype.parseMedia=$t.prototype.parseMedia,$t.prototype.setManifestType=$t.prototype.setManifestType,$t.prototype.setSequenceMode=$t.prototype.setSequenceMode,$t.prototype.parseInit=$t.prototype.parseInit,un('application/mp4; codecs="stpp"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml.im1i"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml.im1t"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml.im2i"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml.im2t"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml.etd1"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new $t}),un('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new $t}),un('application/mp4; codecs="stpp.TTML.im1t"',function(){return new $t});function Dn(){this.g="UNKNOWN"}Dn.prototype.parseInit=function(){},Dn.prototype.setSequenceMode=function(){},Dn.prototype.setManifestType=function(e){this.g=e},Dn.prototype.parseMedia=function(e,t){e=St(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new _(2,2,2e3);if(e=t.vttOffset,this.g=="HLS")if(n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new _(2,2,2e3);if(e=Cs(e[1]),e==null)throw new _(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],i=v(n[0].split(`
`)),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new Is(r);var o=new _o;jo(r),Ms(r);for(var s=jo(r);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),Ms(r),s=jo(r)}t.push(o)}for(i=new Map,Ev(i),r=[],n=v(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split(`
`),(o.length!=1||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&o[0]=="STYLE"){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),s!=-1&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(u=v(u),s=u.next();!s.done;s=u.next()){var l=s.value;s="global",(a=l[0].match(/\((.*)\)/))&&(s=a.pop()),a=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(a=l[1].split(";")),(l=i.get(s))||(l=new mt(0,0,""));for(var f=!1,d=0;d<a.length;d++){var g=/^\s*([^:]+):\s*(.*)/.exec(a[d]);if(g){var m=g[2].trim().replace(";","");switch(g[1].trim()){case"background-color":case"background":f=!0,l.backgroundColor=m;break;case"color":f=!0,l.color=m;break;case"font-family":f=!0,l.fontFamily=m;break;case"font-size":f=!0,l.fontSize=m;break;case"font-weight":(700<=parseInt(m,10)||m=="bold")&&(f=!0,l.fontWeight=ks);break;case"font-style":switch(m){case"normal":f=!0,l.fontStyle=Gd;break;case"italic":f=!0,l.fontStyle=Ds;break;case"oblique":f=!0,l.fontStyle="oblique"}break;case"opacity":f=!0,l.opacity=parseFloat(m);break;case"text-combine-upright":f=!0,l.textCombineUpright=m;break;case"text-shadow":f=!0,l.textShadow=m;break;case"white-space":f=!0,l.wrapLine=m!="noWrap"}}}f&&i.set(s,l)}}if(l=o,f=e,l.length==1&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||l[0]=="STYLE"||l[0]=="REGION")o=null;else if(o=null,l[0].includes("-->")||(o=l[0],l.splice(0,1)),u=new Is(l[0]),s=Uu(u),d=No(u,/[ \t]+--\x3e[ \t]+/g),a=Uu(u),s==null||d==null||a==null)J("Failed to parse VTT time code. Cue skipped:",o,l),o=null;else{for(s+=f,a+=f,f=l.slice(1).join(`
`).trim(),i.has("global")?(l=i.get("global").clone(),l.startTime=s,l.endTime=a,l.payload=f):l=new mt(s,a,f),Ms(u),s=jo(u);s;)QS(l,s,t),Ms(u),s=jo(u);Ul(l,i),o!=null&&(l.id=o),o=l}o&&r.push(o)}return r};function QS(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=rr:e.textAlign=Vd[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":bl)):(i=/^region:(.*)$/.exec(t))?(t=sR(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Hd[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Gu,e.line=Number(n[1]),n[2]&&(e.lineAlign=Hd[n[2].toUpperCase()]))}function sR(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}R("shaka.text.VttTextParser",Dn),Dn.prototype.parseMedia=Dn.prototype.parseMedia,Dn.prototype.setManifestType=Dn.prototype.setManifestType,Dn.prototype.setSequenceMode=Dn.prototype.setSequenceMode,Dn.prototype.parseInit=Dn.prototype.parseInit,un("text/vtt",function(){return new Dn}),un('text/vtt; codecs="vtt"',function(){return new Dn}),un('text/vtt; codecs="wvtt"',function(){return new Dn});function ci(){this.g=null}ci.prototype.parseInit=function(e){var t=this,n=!1;if(new ft().box("moov",Fe).box("trak",Fe).box("mdia",Fe).R("mdhd",function(i){i=tc(i.reader,i.version),t.g=i.timescale}).box("minf",Fe).box("stbl",Fe).R("stsd",oo).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new _(2,2,2008);if(!n)throw new _(2,2,2008)},ci.prototype.setSequenceMode=function(){},ci.prototype.setManifestType=function(){},ci.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new _(2,2,2008);var n=0,i=[],r,o=[],s=!1,u=!1,a=!1,l=null;if(new ft().box("moof",Fe).box("traf",Fe).R("tfdt",function(L){s=!0,n=ec(L.reader,L.version).baseMediaDecodeTime}).R("tfhd",function(L){l=Zl(L.reader,L.flags).ld}).R("trun",function(L){u=!0,i=nc(L.reader,L.version,L.flags).fg}).box("mdat",Us(function(L){a=!0,r=L})).parse(e,!1),!a&&!s&&!u)throw new _(2,2,2008);e=n;for(var f=new vt(r,0),d=v(i),g=d.next();!g.done;g=d.next()){g=g.value;var m=g.gg||l,y=g.ye?n+g.ye:e;e=y+(m||0);var x=0;do{var S=f.S();x+=S;var E=f.S(),M=null;Yl(E)=="vttc"?8<S&&(M=f.Cb(S-8)):f.skip(S-8),m&&M&&(S=uR(M,t.periodStart+y/this.g,t.periodStart+e/this.g),o.push(S))}while(g.sampleSize&&x<g.sampleSize)}return o.filter(ro)};function uR(e,t,n){var i,r,o;return new ft().box("payl",Us(function(s){i=St(s)})).box("iden",Us(function(s){r=St(s)})).box("sttg",Us(function(s){o=St(s)})).parse(e),i?aR(i,r,o,t,n):null}function aR(e,t,n,i,r){if(e=new mt(i,r,e),Ul(e),t&&(e.id=t),n)for(t=new Is(n),n=jo(t);n;)QS(e,n,[]),Ms(t),n=jo(t);return e}R("shaka.text.Mp4VttParser",ci),ci.prototype.parseMedia=ci.prototype.parseMedia,ci.prototype.setManifestType=ci.prototype.setManifestType,ci.prototype.setSequenceMode=ci.prototype.setSequenceMode,ci.prototype.parseInit=ci.prototype.parseInit,un('application/mp4; codecs="wvtt"',function(){return new ci});function fi(){}fi.prototype.parseInit=function(){},fi.prototype.setSequenceMode=function(){},fi.prototype.setManifestType=function(){},fi.prototype.parseMedia=function(e){var t=St(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=v(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var i=new Is(n[0]),r=Uu(i),o=No(i,/,/g);if(i=Uu(i),r==null||o==null||i==null)throw new _(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new mt(r,i,n.slice(1).join(`
`).trim()))}return e},R("shaka.text.SbvTextParser",fi),fi.prototype.parseMedia=fi.prototype.parseMedia,fi.prototype.setManifestType=fi.prototype.setManifestType,fi.prototype.setSequenceMode=fi.prototype.setSequenceMode,fi.prototype.parseInit=fi.prototype.parseInit,un("text/x-subviewer",function(){return new fi});function Jn(){this.g=new Dn}Jn.prototype.parseInit=function(){},Jn.prototype.setSequenceMode=function(){},Jn.prototype.setManifestType=function(){},Jn.prototype.parseMedia=function(e,t,n){return e=St(e),e=JS(e),e=De(ji(e)),this.g.parseMedia(e,t,n,[])};function JS(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=v(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}R("shaka.text.SrtTextParser",Jn),Jn.srt2webvtt=JS,Jn.prototype.parseMedia=Jn.prototype.parseMedia,Jn.prototype.setManifestType=Jn.prototype.setManifestType,Jn.prototype.setSequenceMode=Jn.prototype.setSequenceMode,Jn.prototype.parseInit=Jn.prototype.parseInit,un("text/srt",function(){return new Jn});function di(){}di.prototype.parseInit=function(){},di.prototype.setSequenceMode=function(){},di.prototype.setManifestType=function(){},di.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=St(e).split(/\r?\n\s*\r?\n/),e=v(r),r=e.next();!r.done;r=e.next()){var o=r.value;r=o,(o=cR.exec(o))&&(i=o[1],r=o[2]),i=="V4 Styles"||i=="V4+ Styles"?(t=r,t=n?t+(`
`+r):r):i=="Events"&&(n=n?n+(`
`+r):r)}for(i=[],r=null,t=v(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(o=tx.exec(e))){if(e=o[1].trim(),o=o[2].trim(),e=="Format")r=o.split(Ff);else if(e=="Style"){e=o.split(Ff),o={};for(var s=0;s<r.length&&s<e.length;s++)o[r[s]]=e[s];i.push(o)}}for(r=[],t=null,n=v(n.split(/\r?\n/)),o=n.next(),e={};!o.done;e={Dh:void 0},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=tx.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(Ff);else if(o=="Dialogue"){s=s.split(Ff),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=ex(o.Start);var a=ex(o.End);s=new mt(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Dh=o.Style,(e=i.find(function(l){return function(f){return f.Name==l.Dh}}(e)))&&lR(s,e),r.push(s)}}return r};function lR(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ZS(n))&&(e.color=n),(n=t.BackColour)&&(n=ZS(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=ks),t.Italic&&(e.fontStyle=Ds),t.Underline&&e.textDecoration.push(Er),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Vu,e.textAlign="start";break;case 2:e.displayAlign=Vu,e.textAlign=rr;break;case 3:e.displayAlign=Vu,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=rr;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=rr;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function ZS(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function ex(e){return e=fR.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}R("shaka.text.SsaTextParser",di),di.prototype.parseMedia=di.prototype.parseMedia,di.prototype.setManifestType=di.prototype.setManifestType,di.prototype.setSequenceMode=di.prototype.setSequenceMode,di.prototype.parseInit=di.prototype.parseInit;var cR=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,tx=/^\s*([^:]+):\s*(.*)/,Ff=/\s*,\s*/,fR=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;un("text/x-ssa",function(){return new di});function nx(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{ud:n,ia:e}:null}function ix(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;return o|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:o,codec:"mp4a.40."+r}}function rx(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function dR(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function hi(e){this.j=e,this.h=0,this.g=new Map,this.i=null}h=hi.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?nn(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(zn(t)||"mp4a.40.2")+'"':t},h.getOriginalMimeType=function(){return this.j},h.transmux=function(e,t,n,i){for(var r=De(e),o=Vs(r),s=o.length;s<r.length&&!rx(r,s);s++);if(e=1e3*n.endTime,o=qo(o),o.length&&n&&(o=o.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=o.data),o=ix(r,s),!o)return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=o.sampleRate,t.channelsCount=o.channelCount;for(var u=[];s<r.length;){var a=nx(r,s);if(!a)return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));var l=a.ud+a.ia;s+l<=r.length&&u.push({data:r.subarray(s+a.ud,s+l),size:a.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),s+=l}return r=o.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:o.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:e,jb:u},stream:t},i=new Xo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Bs(i),this.g.set(n,t)),n=this.i!==t,i=ia(i),this.i=t,this.h++,n?(t=Nt(t,i),Promise.resolve(t)):Promise.resolve(i)},R("shaka.transmuxer.AacTransmuxer",hi),hi.prototype.transmux=hi.prototype.transmux,hi.prototype.getOriginalMimeType=hi.prototype.getOriginalMimeType,hi.prototype.convertCodecs=hi.prototype.convertCodecs,hi.prototype.isSupported=hi.prototype.isSupported,hi.prototype.destroy=hi.prototype.destroy,Ar("audio/aac",function(){return new hi("audio/aac")},no);function ox(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var o=e[t+6]>>5,s=0;o===2?s+=2:(o&1&&o!==1&&(s+=2),o&4&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(u&3)<<6|o<<3|s<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,ra:e,ia:r}}function hR(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,o;0<i;){o=e[t];var s=Math.min(i,8),u=8-s;r=4278190080>>>24+u<<u,r=(o&r)>>u,n=n?n<<s|r:r,t+=1,i-=s}if(16>n)return!0}return!1}function Ai(e){this.j=e,this.h=0,this.g=new Map,this.i=null}h=Ai.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?nn(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?vr()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},h.getOriginalMimeType=function(){return this.j},h.transmux=function(e,t,n,i){e=De(e);for(var r=Vs(e),o=r.length;o<e.length&&!hR(e,o);o++);var s=1e3*n.endTime;r=qo(r),r.length&&n&&(r=r.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=ox(e,o);if(!l)return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.ra,a.push({data:e.subarray(o,o+l.ia),size:l.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),o+=l.ia}return e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,lb:[],ra:u,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:e,jb:a},stream:t},i=new Xo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Bs(i),this.g.set(n,t)),n=this.i!==t,i=ia(i),this.i=t,this.h++,n?(t=Nt(t,i),Promise.resolve(t)):Promise.resolve(i)},R("shaka.transmuxer.Ac3Transmuxer",Ai),Ai.prototype.transmux=Ai.prototype.transmux,Ai.prototype.getOriginalMimeType=Ai.prototype.getOriginalMimeType,Ai.prototype.convertCodecs=Ai.prototype.convertCodecs,Ai.prototype.isSupported=Ai.prototype.isSupported,Ai.prototype.destroy=Ai.prototype.destroy,Ar("audio/ac3",function(){return new Ai("audio/ac3")},no);function sx(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Pr(e.subarray(t+2));$n(n,2),$n(n,3);var i=Ke(n,11)+1<<1,r=Ke(n,2);if(r==3){r=Ke(n,2),r=[24e3,22060,16e3][r];var o=3}else r=[48e3,44100,32e3][r],o=Ke(n,2);var s=Ke(n,3),u=Ke(n,1);return n=Ke(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][o])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][s]+u,ra:e,ia:i})}function Ii(e){this.j=e,this.h=0,this.g=new Map,this.i=null}h=Ii.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?nn(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},h.getOriginalMimeType=function(){return this.j},h.transmux=function(e,t,n,i){e=De(e);for(var r=Vs(e),o=r.length;o<e.length&&(e[o]<<8|e[o+1]<<0)!==2935;o++);var s=1e3*n.endTime;r=qo(r),r.length&&n&&(r=r.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=sx(e,o);if(!l)return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.ra,a.push({data:e.subarray(o,o+l.ia),size:l.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),o+=l.ia}return e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,lb:[],ra:u,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:e,jb:a},stream:t},i=new Xo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Bs(i),this.g.set(n,t)),n=this.i!==t,i=ia(i),this.i=t,this.h++,n?(t=Nt(t,i),Promise.resolve(t)):Promise.resolve(i)},R("shaka.transmuxer.Ec3Transmuxer",Ii),Ii.prototype.transmux=Ii.prototype.transmux,Ii.prototype.getOriginalMimeType=Ii.prototype.getOriginalMimeType,Ii.prototype.convertCodecs=Ii.prototype.convertCodecs,Ii.prototype.isSupported=Ii.prototype.isSupported,Ii.prototype.destroy=Ii.prototype.destroy,Ar("audio/ec3",function(){return new Ii("audio/ec3")},no);function pR(e){if(!e.length)return null;var t=e.find(function(x){return x.type==7});if(e=e.find(function(x){return x.type==8}),!t||!e)return null;var n=new Pr(t.data),i=tt(n);if(tt(n),tt(n),On(n),mR.includes(i)&&(i=ce(n),i===3&&$n(n,1),On(n),On(n),$n(n,1),ve(n))){i=i!==3?8:12;for(var r=0;r<i;r++)ve(n)&&(6>r?sc(n,16):sc(n,64))}if(On(n),i=ce(n),i===0)ce(n);else if(i===1)for($n(n,1),On(n),On(n),i=ce(n),r=0;r<i;r++)On(n);On(n),$n(n,1);var o=ce(n),s=ce(n),u=Ke(n,1);u===0&&$n(n,1),$n(n,1);var a=0,l=0,f=0,d=0;if(ve(n)&&(a=ce(n),l=ce(n),f=ce(n),d=ce(n)),r=i=1,ve(n)&&ve(n)){var g=tt(n),m=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],y=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<g&&16>=g?(i=m[g-1],r=y[g-1]):g===255&&(i=Ke(n,16),r=Ke(n,16))}return n=(2-u)*(s+1)*16-2*f-2*d,o=16*(o+1)-2*a-2*l,a=[],t=t.fullData,a.push(t.byteLength>>>8&255),a.push(t.byteLength&255),a=a.concat.apply(a,Q(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,Q(e)),e=new Uint8Array([1,a[3],a[4],a[5],255,225].concat(a,[1],t)),{height:n,width:o,Ca:e,Ia:i,Ka:r}}function gR(e){function t(y){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:y.pts,dts:y.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var y=[],x=v(r.nalus),S=x.next();!S.done;S=x.next()){S=S.value;var E=S.fullData.byteLength,M=new Uint8Array(4);M[0]=E>>24&255,M[1]=E>>16&255,M[2]=E>>8&255,M[3]=E&255,y.push(M),y.push(S.fullData)}r.data=Nt.apply(fn,Q(y)),i.push(r)}}for(var i=[],r=null,o=!1,s=0;s<e.length;s++){var u=e[s],a=u.nalus,l=!1;r&&a.length&&!o&&(n(),t(u)),a=v(u.nalus);for(var f=a.next();!f.done;f=a.next()){f=f.value;var d=!1;switch(f.type){case 1:var g=!1;d=!0;var m=f.data;l&&4<m.length&&(m=b2(new Pr(m)),m===2||m===4||m===7||m===9)&&(g=!0),g&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=g;break;case 5:d=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=!0;break;case 6:d=!0;break;case 7:l=d=!0;break;case 8:d=!0;break;case 9:o=d=!0,r&&r.frame&&(n(),r=null),r||t(u);break;case 12:d=!0;break;default:d=!1}r&&d&&r.nalus.push(f)}}return n(),i}var mR=[100,110,122,244,44,83,86,118,128,138,139,134];function vR(e){if(!e.length)return null;var t=e.find(function(s){return s.type==32}),n=e.find(function(s){return s.type==33}),i=e.find(function(s){return s.type==34});if(!t||!n||!i)return null;var r=yR(t.fullData);e=TR(n.fullData);var o=wR(i.fullData);return t=SR(t.fullData,n.fullData,i.fullData,{Uf:r.Uf,rg:r.rg,Ef:e.Ef,Ff:e.Ff,yf:e.yf,Df:e.Df,zf:e.zf,Af:e.Af,Bf:e.Bf,Cf:e.Cf,rf:e.rf,tf:e.tf,uf:e.uf,vf:e.vf,wf:e.wf,xf:e.xf,hf:e.hf,le:e.le,ff:e.ff,ef:e.ef,df:e.df,Wf:o.Wf}),{height:e.height,width:e.width,Ca:t,Ia:e.vj,Ka:e.uj}}function yR(e){var t=new Pr(e,!0);return tt(t),tt(t),Ke(t,4),Ke(t,2),Ke(t,6),e=Ke(t,3),t=ve(t),{Uf:e+1,rg:t}}function TR(e){e=new Pr(e,!0),tt(e),tt(e);var t=0,n=0,i=0,r=0;Ke(e,4);var o=Ke(e,3);ve(e);for(var s=Ke(e,2),u=Ke(e,1),a=Ke(e,5),l=tt(e),f=tt(e),d=tt(e),g=tt(e),m=tt(e),y=tt(e),x=tt(e),S=tt(e),E=tt(e),M=tt(e),L=tt(e),P=[],b=[],D=0;D<o;D++)P.push(ve(e)),b.push(ve(e));if(0<o)for(D=o;8>D;D++)Ke(e,2);for(D=0;D<o;D++)P[D]&&Ke(e,88),b[D]&&tt(e);ce(e),P=ce(e),P==3&&Ke(e,1),b=ce(e),D=ce(e),ve(e)&&(t+=ce(e),n+=ce(e),i+=ce(e),r+=ce(e));var k=ce(e),N=ce(e),j=ce(e);if(ve(e))for(var V=0;V<=o;V++)ce(e),ce(e),ce(e);else ce(e),ce(e),ce(e);if(ce(e),ce(e),ce(e),ce(e),ce(e),ce(e),ve(e)&&ve(e))for(V=0;4>V;V++)for(var F=0;F<(V===3?2:6);F++)if(ve(e)){var B=Math.min(64,1<<4+(V<<1));1<V&&Hs(e);for(var H=0;H<B;H++)Hs(e)}else ce(e);for(ve(e),ve(e),ve(e)&&(tt(e),ce(e),ce(e),ve(e)),V=ce(e),B=F=0;B<V;B++)if(H=!1,B!==0&&(H=ve(e)),H){B===V&&ce(e),ve(e),ce(e);for(var G=H=0;G<=F;G++){var z=ve(e),W=!1;z||(W=ve(e)),(z||W)&&H++}F=H}else{for(G=ce(e),H=ce(e),F=G+H,z=0;z<G;z++)ce(e),ve(e);for(G=0;G<H;G++)ce(e),ve(e)}if(ve(e))for(V=ce(e),F=0;F<V;F++){for(B=0;B<j+4;B++)Ke(e,1);Ke(e,1)}if(V=j=1,F=0,ve(e),ve(e),ve(e)){if(ve(e)&&(B=tt(e),H=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],G=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<B&&16>=B?(j=H[B-1],V=G[B-1]):B===255&&(j=Ke(e,16),V=Ke(e,16))),ve(e)&&ve(e),ve(e)&&(Ke(e,3),ve(e),ve(e)&&(tt(e),tt(e),tt(e))),ve(e)&&(ce(e),ce(e)),ve(e),ve(e),ve(e),(B=ve(e))&&(ce(e),ce(e),ce(e),ce(e)),ve(e)&&(Ke(e,32),Ke(e,32),ve(e)&&ce(e),ve(e)))for(G=!1,B=ve(e),H=ve(e),(B||H)&&((G=ve(e))&&(tt(e),Ke(e,5),ve(e),Ke(e,5)),Ke(e,4),Ke(e,4),G&&Ke(e,4),Ke(e,5),Ke(e,5),Ke(e,5)),z=0;z<=o;z++){var $=!0;W=1,ve(e)||($=ve(e));var te=!1;if($?ce(e):te=ve(e),te||(W=ce(e)+1),B){for($=0;$<W;$++)ce(e),ce(e),G&&(ce(e),ce(e));ve(e)}if(H){for($=0;$<W;$++)ce(e),ce(e),G&&(ce(e),ce(e));ve(e)}}ve(e)&&(ve(e),ve(e),ve(e),F=ce(e),ce(e),ce(e),ce(e),ce(e))}return{yf:L,Ef:s,Ff:u,Df:a,zf:l,Af:f,Bf:d,Cf:g,rf:m,tf:y,uf:x,vf:S,wf:E,xf:M,le:F,hf:0,ff:P,ef:k,df:N,width:b-(t+n)*(P===1||P===2?2:1),height:D-(i+r)*(P===1?2:1),vj:j,uj:V}}function wR(e){var t=new Pr(e,!0);tt(t),tt(t),ce(t),ce(t),ve(t),ve(t),Ke(t,3),ve(t),ve(t),ce(t),ce(t),Hs(t),ve(t),ve(t),ve(t)&&ce(t),Hs(t),Hs(t),ve(t),ve(t),ve(t),ve(t),e=ve(t),t=ve(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Wf:n}}function SR(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(i.Ef&3)<<6|(i.Ff?1:0)<<5|i.Df&31,r[2]=i.zf,r[3]=i.Af,r[4]=i.Bf,r[5]=i.Cf,r[6]=i.rf,r[7]=i.tf,r[8]=i.uf,r[9]=i.vf,r[10]=i.wf,r[11]=i.xf,r[12]=i.yf,r[13]=240|(i.le&3840)>>8,r[14]=i.le&255,r[15]=252|i.Wf&3,r[16]=252|i.ff&3,r[17]=248|i.ef&7,r[18]=248|i.df&7,r[19]=0,r[20]=0,r[21]=(i.hf&3)<<6|(i.Uf&7)<<3|(i.rg?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(e.byteLength&65280)>>8,r[27]=(e.byteLength&255)>>0,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(t.byteLength&65280)>>8,r[e.byteLength+32]=(t.byteLength&255)>>0,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,r[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,r.set(n,e.byteLength+10+t.byteLength+28),r}function Bf(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&o!==3){var s=e[t+3]>>6;r=1e3*xR[14*(n===3?3-i:i===3?3:4)+r-1],o=ER[3*(n===3?0:n===2?1:2)+o],n=AR[n][i];var u=IR[i],a=Math.floor(n*r/o+(e[t+2]>>1&1))*u,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&i===2&&224e3<=r&&s===0&&(e[t+3]|=128),{sampleRate:o,channelCount:s===3?1:2,ia:a,tj:8*n*u}}return null}function ux(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function ax(e,t){if(t+1<e.length&&ux(e,t)){var n=Bf(e,t),i=4;return n&&n.ia&&(i=n.ia),t+=i,t===e.length||t+1<e.length&&ux(e,t)}return!1}var xR=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],ER=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],AR=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],IR=[0,1,1,4];function Mi(e){this.j=e,this.h=0,this.g=new Map,this.i=null}h=Mi.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?nn(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},h.getOriginalMimeType=function(){return this.j},h.transmux=function(e,t,n,i){for(var r=De(e),o=Vs(r).length;o<r.length&&!ax(r,o);o++);var s;for(e=[];o<r.length;){var u=Bf(r,o);if(!u)return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));s||(s=u),o+u.ia<=r.length&&e.push({data:r.subarray(o,o+u.ia),size:u.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),o+=u.ia}return s?(r=9e4*s.tj/s.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:r,jb:e},stream:t},i=new Xo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Bs(i),this.g.set(n,t)),n=this.i!==t,i=ia(i),this.i=t,this.h++,n?(t=Nt(t,i),Promise.resolve(t)):Promise.resolve(i)):Promise.reject(new _(2,3,3018,n?n.N()[0]:null))},R("shaka.transmuxer.Mp3Transmuxer",Mi),Mi.prototype.transmux=Mi.prototype.transmux,Mi.prototype.getOriginalMimeType=Mi.prototype.getOriginalMimeType,Mi.prototype.convertCodecs=Mi.prototype.convertCodecs,Mi.prototype.isSupported=Mi.prototype.isSupported,Mi.prototype.destroy=Mi.prototype.destroy,Ar("audio/mpeg",function(){return new Mi("audio/mpeg")},no);function Ci(e){this.h=e,this.g=null}h=Ci.prototype,h.destroy=function(){},h.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=zn(e).split(","),n=Nn("audio",t);return t=Nn("video",t),!n||t||dn(n)!="mp3"?!1:nn(this.convertCodecs("audio",e))},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},h.getOriginalMimeType=function(){return this.h},h.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new yt,e=De(e),e=this.g.parse(e),e.od().audio!="mp3"||r!="audio")return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));for(n=new Uint8Array([]),r=v(e.fb()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=Bf(e,t))?(t+i.ia<=e.length&&(n=Nt(n,e.subarray(t,t+i.ia))),t+=i.ia):t++;return Promise.resolve(n)},R("shaka.transmuxer.MpegTsTransmuxer",Ci),Ci.prototype.transmux=Ci.prototype.transmux,Ci.prototype.getOriginalMimeType=Ci.prototype.getOriginalMimeType,Ci.prototype.convertCodecs=Ci.prototype.convertCodecs,Ci.prototype.isSupported=Ci.prototype.isSupported,Ci.prototype.destroy=Ci.prototype.destroy,Ar("video/mp2t",function(){return new Ci("video/mp2t")},Wd);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function pi(e){this.h=e,(this.g=$p.get("ISOBoxer")())&&MR(this)}function MR(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==CR[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}h=pi.prototype,h.destroy=function(){},h.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?nn(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),nn(t)||nn(e))},h.convertCodecs=function(e,t){return t.replace("mss/","")},h.getOriginalMimeType=function(){return this.h},h.transmux=function(e,t,n){if(!n)return Promise.resolve(De(e));if(!t.mssPrivateData)return Promise.reject(new _(2,3,3020,n?n.N()[0]:null));try{var i,r=this.g.parseBuffer(e),o=r.fetch("tfhd");o.track_ID=t.id+1;var s=r.fetch("tfdt"),u=r.fetch("traf");s===null&&(s=this.g.createFullBox("tfdt",u,o),s.version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var f=r.fetch("tfrf");f&&f._parent.boxes.splice(f._parent.boxes.indexOf(f),1);var d=r.fetch("sepiff");if(d!==null){d.type="senc",d.usertype=void 0;var g=r.fetch("saio");if(g===null){g=this.g.createFullBox("saio",u),g.version=0,g.flags=0,g.entry_count=1,g.offset=[0];var m=this.g.createFullBox("saiz",u);if(m.version=0,m.flags=0,m.sample_count=d.sample_count,m.default_sample_info_size=0,m.sample_info_size=[],d.flags&2)for(i=0;i<d.sample_count;i+=1)m.sample_info_size[i]=10+6*d.entry[i].NumberOfEntries;else m.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var y=r.fetch("moof");a.data_offset=y.getLength()+8;var x=r.fetch("saio");x!==null&&(x.offset[0]=lx(y,"traf")+lx(u,"senc")+16);var S=De(r.write());return Promise.resolve(S)}catch(E){return E instanceof _?Promise.reject(E):Promise.reject(new _(2,3,3022,n?n.N()[0]:null))}};function lx(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}R("shaka.transmuxer.MssTransmuxer",pi),pi.prototype.transmux=pi.prototype.transmux,pi.prototype.getOriginalMimeType=pi.prototype.getOriginalMimeType,pi.prototype.convertCodecs=pi.prototype.convertCodecs,pi.prototype.isSupported=pi.prototype.isSupported,pi.prototype.destroy=pi.prototype.destroy;var CR=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ar("mss/audio/mp4",function(){return new pi("mss/audio/mp4")},no),Ar("mss/video/mp4",function(){return new pi("mss/video/mp4")},no);function ki(e){this.m=e,this.g=0,this.i=new Map,this.l=this.h=this.j=null}h=ki.prototype,h.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},h.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=zn(n).split(",");return n=Nn("audio",i),i=Nn("video",i),n&&(n=dn(n),!kR.includes(n))||i&&(n=dn(i),!DR.includes(n))?!1:t?nn(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),nn(t)||nn(e))},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=zn(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return zu(n,"audio/mp4")}).map(Zd).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},h.getOriginalMimeType=function(){return this.m},h.transmux=function(e,t,n,i,r){var o=De(e);if(r=="audio"&&!Gs(o)){for(var s=Vs(o),u=s.length;u<o.length;u++)if(ax(o,u))return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));for(u=s.length;u<o.length;u++)if(rx(o,u))return this.h||(this.h=new hi("audio/aac")),this.h.transmux(e,t,n,i,r);return Promise.reject(new _(2,3,3018,n?n.N()[0]:null))}this.j?this.j.clearData():this.j=new yt;var a=this.j.parse(o),l=[],f=a.od();try{var d=null;if(r=="video"){switch(f.video){case"avc":var g=[],m=null,y=a.wc(),x=gR(y);if(!x.length)throw new _(2,3,3023,n?n.N()[0]:null);for(var S=0;S<x.length;S++){var E=x[S];m==null&&(m=E.dts);var M=void 0;M=S+1<x.length?(x[S+1].dts||0)-(E.dts||0):1<x.length?(E.dts||0)-(x[S-1].dts||0):9e4*(n.endTime-n.startTime),g.push({data:E.data,size:E.data.byteLength,duration:M,eb:Math.round((E.pts||0)-(E.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:E.isKeyframe?2:1,ib:E.isKeyframe?0:1}})}for(var L=[],P=v(y),b=P.next();!b.done;b=P.next())L.push.apply(L,Q(b.value.nalus));var D=pR(L);if(!D||m==null)throw new _(2,3,3018,n?n.N()[0]:null);t.height=D.height,t.width=D.width,d={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,lb:[],ra:new Uint8Array([]),Ca:D.Ca,Ia:D.Ia,Ka:D.Ka,data:{Db:this.g,baseMediaDecodeTime:m,jb:g},stream:t};break;case"hvc":var k=[],N=null,j=[],V=a.wc();if(!V.length)throw new _(2,3,3023,n?n.N()[0]:null);for(var F=0;F<V.length;F++){var B=V[F],H=B.nalus;j.push.apply(j,Q(H));for(var G=!1,z=[],W=!1,$=v(H),te=$.next();!te.done;te=$.next()){var Me=te.value;switch(Me.type){case 1:case 0:var he=W=!0;break;case 19:case 20:case 21:G=he=W=!0;break;case 32:he=!0;break;case 33:he=!0;break;case 34:he=!0;break;case 35:W=he=!0;break;case 39:case 40:he=!0;break;default:he=!1}if(W&&he){var et=Me.fullData.byteLength,Ve=new Uint8Array(4);Ve[0]=et>>24&255,Ve[1]=et>>16&255,Ve[2]=et>>8&255,Ve[3]=et&255,z.push(Ve),z.push(Me.fullData)}}var Oe=z.length?{data:Nt.apply(fn,Q(z)),isKeyframe:G}:null;if(Oe){N==null&&B.dts!=null&&(N=B.dts);var Ue=void 0;Ue=F+1<V.length?(V[F+1].dts||0)-(B.dts||0):1<V.length?(B.dts||0)-(V[F-1].dts||0):9e4*(n.endTime-n.startTime),k.push({data:Oe.data,size:Oe.data.byteLength,duration:Ue,eb:Math.round((B.pts||0)-(B.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:Oe.isKeyframe?2:1,ib:Oe.isKeyframe?0:1}})}}var Qe=vR(j);if(!Qe||N==null)throw new _(2,3,3018,n?n.N()[0]:null);t.height=Qe.height,t.width=Qe.width,d={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,lb:[],ra:new Uint8Array([]),Ca:Qe.Ca,Ia:Qe.Ia,Ka:Qe.Ka,data:{Db:this.g,baseMediaDecodeTime:N,jb:k},stream:t}}d&&(l.push(d),d=null)}if(r=="audio"){switch(f.audio){case"aac":for(var Ne=[],Ge,Re=null,je=null,dt=null,Qt=v(a.fb()),Mt=Qt.next();!Mt.done;Mt=Qt.next()){var Dt=Mt.value,Wt=Dt.data;if(Wt){var en=0;if(je==-1&&dt)Wt=Nt(dt,Dt.data),je=null;else if(je!=null&&dt){en=Math.max(0,je);var ss=Nt(dt,Wt.subarray(0,en));Ne.push({data:ss,size:ss.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),je=dt=null}if(Ge=ix(Wt,en),!Ge)throw new _(2,3,3018,n?n.N()[0]:null);for(t.audioSamplingRate=Ge.sampleRate,t.channelsCount=Ge.channelCount,Re==null&&Dt.pts!==null&&(Re=Dt.pts);en<Wt.length;){var Vr=nx(Wt,en);if(!Vr){dt=Wt.subarray(en,Wt.length),je=-1;break}var yo=Vr.ud+Vr.ia;je=Math.max(0,en+yo-Wt.length),je!=0?dt=Wt.subarray(en+Vr.ud,en+yo):en+yo<=Wt.length&&Ne.push({data:Wt.subarray(en+Vr.ud,en+yo),size:Vr.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),en+=yo}}}if(!Ge||Re==null){if(!a.wc().length)throw new _(2,3,3018,n?n.N()[0]:null);Re=9e4*n.startTime;var Di=Nn("audio",t.codecs.split(","));if(!Di||!t.channelsCount||!t.audioSamplingRate)throw new _(2,3,3018,n?n.N()[0]:null);Ge={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Di};var zg=dR(Di,t.channelsCount);if(!zg)throw new _(2,3,3018,n?n.N()[0]:null);for(var jR=Re+9e4*(n.endTime-n.startTime),Ax=Re;Ax<jR;)Ne.push({data:zg,size:zg.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),Ax+=1024/Ge.sampleRate*9e4}var Ix=Ge.sampleRate,OR=Re/9e4*Ix;d={id:t.id,type:"audio",codecs:Ge.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ix,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:OR,jb:Ne},stream:t};break;case"ac3":for(var Mx=[],Hf=0,qg=new Uint8Array([]),Gf=null,Cx=v(a.fb()),Yg=Cx.next();!Yg.done;Yg=Cx.next()){var $g=Yg.value,Qg=$g.data;Gf==null&&$g.pts!==null&&(Gf=$g.pts);for(var vu=0;vu<Qg.length;){var To=ox(Qg,vu);To?(t.audioSamplingRate=To.sampleRate,t.channelsCount=To.channelCount,Hf=To.sampleRate,qg=To.ra,Mx.push({data:Qg.subarray(vu,vu+To.ia),size:To.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),vu+=To.ia):vu++}}if(Hf==0||qg.byteLength==0||Gf==null)throw new _(2,3,3018,n?n.N()[0]:null);var UR=Gf/9e4*Hf;d={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Hf,duration:i,lb:[],ra:qg,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:UR,jb:Mx},stream:t};break;case"ec3":for(var kx=[],Kf=0,Jg=new Uint8Array([]),Wf=null,Dx=v(a.fb()),Zg=Dx.next();!Zg.done;Zg=Dx.next()){var em=Zg.value,tm=em.data;Wf==null&&em.pts!==null&&(Wf=em.pts);for(var yu=0;yu<tm.length;){var wo=sx(tm,yu);wo?(t.audioSamplingRate=wo.sampleRate,t.channelsCount=wo.channelCount,Kf=wo.sampleRate,Jg=wo.ra,kx.push({data:tm.subarray(yu,yu+wo.ia),size:wo.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),yu+=wo.ia):yu++}}if(Kf==0||Jg.byteLength==0||Wf==null)throw new _(2,3,3018,n?n.N()[0]:null);var bR=Wf/9e4*Kf;d={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Kf,duration:i,lb:[],ra:Jg,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:bR,jb:kx},stream:t};break;case"mp3":for(var Rx=[],Xf,zf=null,Px=v(a.fb()),nm=Px.next();!nm.done;nm=Px.next()){var im=nm.value,Ja=im.data;if(Ja){zf==null&&im.pts!==null&&(zf=im.pts);for(var us=0;us<Ja.length;){var Tu=Bf(Ja,us);Tu?(Xf||(Xf=Tu),us+Tu.ia<=Ja.length&&Rx.push({data:Ja.subarray(us,us+Tu.ia),size:Tu.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),us+=Tu.ia):us++}}}if(!Xf||zf==null)throw new _(2,3,3018,n?n.N()[0]:null);var Lx=Xf.sampleRate,FR=zf/9e4*Lx;d={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Lx,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:FR,jb:Rx},stream:t};break;case"opus":var _x=[],qf=null,ur=a.F;if(!ur)throw new _(2,3,3018,n?n.N()[0]:null);var Rn=[];switch(ur.Zh){case 1:case 2:Rn=[0];break;case 0:Rn=[255,1,1,0,1];break;case 128:Rn=[255,2,0,0,1];break;case 3:Rn=[1,2,1,0,2,1];break;case 4:Rn=[1,2,2,0,1,2,3];break;case 5:Rn=[1,3,2,0,4,1,2,3];break;case 6:Rn=[1,4,2,0,4,1,2,3,5];break;case 7:Rn=[1,4,2,0,4,1,2,3,5,6];break;case 8:Rn=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Rn=[1,1,2,0,1];break;case 131:Rn=[1,1,3,0,1,2];break;case 132:Rn=[1,1,4,0,1,2,3];break;case 133:Rn=[1,1,5,0,1,2,3,4];break;case 134:Rn=[1,1,6,0,1,2,3,4,5];break;case 135:Rn=[1,1,7,0,1,2,3,4,5,6];break;case 136:Rn=[1,1,8,0,1,2,3,4,5,6,7]}for(var Nx=new Uint8Array([0,ur.channelCount,0,0,ur.sampleRate>>>24&255,ur.sampleRate>>>17&255,ur.sampleRate>>>8&255,ur.sampleRate>>>0&255,0,0].concat(Q(Rn))),jx=ur.sampleRate,Ox=v(a.fb()),rm=Ox.next();!rm.done;rm=Ox.next()){var om=rm.value,wu=om.data;qf==null&&om.pts!==null&&(qf=om.pts);for(var Za=0;Za<wu.length;){for(var BR=(wu[Za+1]&16)!==0,VR=(wu[Za+1]&8)!==0,Hr=Za+2,Yf=0;wu[Hr]===255;)Yf+=255,Hr+=1;Yf+=wu[Hr],Hr+=1,Hr+=BR?2:0,Hr+=VR?2:0;var Ux=wu.slice(Hr,Hr+Yf);_x.push({data:Ux,size:Ux.byteLength,duration:960,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),Za=Hr+Yf}}if(Nx.byteLength==0||qf==null)throw new _(2,3,3018,n?n.N()[0]:null);t.audioSamplingRate=ur.sampleRate,t.channelsCount=ur.channelCount;var HR=qf/9e4*jx;d={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:jx,duration:i,lb:[],ra:Nx,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:HR,jb:_x},stream:t}}d&&(l.push(d),d=null)}}catch(um){return um&&um.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(um)}if(!l.length)return Promise.reject(new _(2,3,3018,n?n.N()[0]:null));var bx=new Xo(l),sm=t.id+"_"+n.i;if(this.i.has(sm))var el=this.i.get(sm);else el=Bs(bx),this.i.set(sm,el);var GR=this.l!==el,Fx=ia(bx);if(this.l=el,this.g++,GR){var KR=Nt(el,Fx);return Promise.resolve(KR)}return Promise.resolve(Fx)},R("shaka.transmuxer.TsTransmuxer",ki),ki.prototype.transmux=ki.prototype.transmux,ki.prototype.getOriginalMimeType=ki.prototype.getOriginalMimeType,ki.prototype.convertCodecs=ki.prototype.convertCodecs,ki.prototype.isSupported=ki.prototype.isSupported,ki.prototype.destroy=ki.prototype.destroy;var kR=["aac","ac-3","ec-3","mp3","opus"],DR=["avc","hevc"];Ar("video/mp2t",function(){return new ki("video/mp2t")},Xd);function cx(){}At(cx,Un),R("shaka.util.FairPlayUtils",cx);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function fx(){}var $a;function dx(){$a||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?($a=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=RR,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function RR(e,t){var n=this,i;return U(function(r){return r.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),A(r,$a.call(n,e,t),2)):(i=r.h,wx(i)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=$a,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=hx,r.return(hx.call(n,e,t))))})}function hx(e,t){var n=this,i,r,o,s,u,a,l,f,d,g,m,y;return U(function(x){if(x.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=Tx(e),r=[],o=v(t),s=o.next();!s.done;s=o.next())u=s.value,a=px(u.videoCapabilities,i),l=px(u.audioCapabilities,i),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||(f=Object.assign({},u),f.videoCapabilities=a,f.audioCapabilities=l,r.push(f));if(!r.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return A(x,$a.call(n,e,r),2)}return g=x.h,y=m=null,r[0]&&(r[0].videoCapabilities&&(m=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(y=r[0].audioCapabilities[0].encryptionScheme)),x.return(new Vf(g,m,y))})}function px(e,t){return e&&e.filter(function(n){return Kg(n.encryptionScheme,t)})}R("EmeEncryptionSchemePolyfill",fx),fx.install=dx;function gx(){}var Qa;function mx(){Qa||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Qa=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=PR,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function PR(e){var t=this,n,i;return U(function(r){switch(r.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),A(r,Qa.call(t,e),2);case 2:if(n=r.h,!n.supported||!e.keySystemConfiguration)return r.return(n);if((i=n.keySystemAccess)&&wx(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Qa,r.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=vx,i){r.s(3);break}return A(r,yx(e),4);case 4:return n.keySystemAccess=r.h,r.return(n);case 3:return r.return(vx.call(t,e))}})}function vx(e){var t=this,n,i,r,o,s,u,a;return U(function(l){switch(l.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=n=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,o=r.keySystem,i=r.audio&&r.audio.encryptionScheme,n=r.video&&r.video.encryptionScheme,s=Tx(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Kg(i,s)&&Kg(n,s))?A(l,Qa.call(t,e),2):l.return(u);case 2:if(a=l.h,a.keySystemAccess){a.keySystemAccess=new Vf(a.keySystemAccess,n,i),l.s(3);break}if(!e.keySystemConfiguration){l.s(3);break}return A(l,yx(e),5);case 5:a.keySystemAccess=l.h;case 3:return l.return(a)}})}function yx(e){var t,n;return U(function(i){if(i.g==1){var r=e.keySystemConfiguration,o=[],s=[];return r.audio&&o.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},o.length&&(r.audioCapabilities=o),s.length&&(r.videoCapabilities=s),t=r,A(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}R("McEncryptionSchemePolyfill",gx),gx.install=mx;function Vf(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Vf.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=v(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=v(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Vf.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function Tx(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":e.startsWith("com.huawei")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function wx(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Kg(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(_R||NR||LR))}function Wg(){}function Sx(){dx(),mx()}R("EncryptionSchemePolyfills",Wg),Wg.install=Sx;var LR=navigator.userAgent.includes("CrKey"),_R=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10),Xg,xx=navigator.userAgent||"";if(xx.includes("Web0S")){var Ex=xx.match(/Chrome\/(\d+)/);Xg=Ex?79<=parseInt(Ex[1],10):!1}else Xg=!1;var NR=Xg;typeof O<"u"&&O.exports&&(O.exports=Wg)}).call(T,p,p,void 0);for(var I in T.shaka)c[I]=T.shaka[I]})()}(Tm)),Tm}var xL=SL();const il=wL(xL);var Zf={exports:{}},gE;function EL(){return gE||(gE=1,function(c,p){p=c.exports=T,p.getSerialize=I;function T(w,C,O,h){return JSON.stringify(w,I(C,h),O)}function I(w,C){var O=[],h=[];return C==null&&(C=function(X,ee){return O[0]===ee?"[Circular ~]":"[Circular ~."+h.slice(0,O.indexOf(ee)).join(".")+"]"}),function(X,ee){if(O.length>0){var Y=O.indexOf(this);~Y?O.splice(Y+1):O.push(this),~Y?h.splice(Y,1/0,X):h.push(X),~O.indexOf(ee)&&(ee=C.call(this,X,ee))}else O.push(ee);return w==null?ee:w.call(this,X,ee)}}}(Zf,Zf.exports)),Zf.exports}EL();const AL="[BILILITE_PLAYER_EVENT]";function ed(c,p){window.chrome.webview.postMessage({type:AL,event:c,data:p})}const IL={__name:"App",setup(c){window.shaka=il;let p=!0,T=!0;const I=()=>{const cn=new URLSearchParams(window.location.search).get("playData");console.log("playDataBase64：",cn);const A=atob(cn),ie=Uint8Array.from(A,Pe=>Pe.codePointAt(0)),ge=new TextDecoder("utf-8").decode(ie),En=JSON.parse(ge);return console.log("playData:",En),En},w=We=>{console.log("positionChanged",Et.value.currentTime),ed("positionChanged",Et.value.currentTime),Xt()},C=()=>{let We=Et.value.duration;console.log("duration:",We),We==1/0&&(We=0),ed("loaded",{duration:We})},O=()=>{ed("ended")},h=We=>{console.log("volumeChanged",Je.value.volume),ed("volumeChanged",Je.value.volume)},X=()=>{Et.value.play(),Je.value.play()};window.resume=X;const ee=We=>{Et.value.currentTime=We,Je.value.currentTime=We};window.seek=ee;const Y=We=>{Je.value.volume=We,Et.value.volume=We};window.setVolume=Y;const ne=()=>Je.value.volume;window.getVolume=ne;const le=We=>{Et.value.playbackRate=We,Je.value.playbackRate=We};window.setRate=le;const _e=()=>{Et.value.pause(),Je.value.pause()};window.pause=_e;const v={video:{url:"",contentType:"video/mp4"},audio:{url:"",contentType:"audio/mp3"}};let Q=I();Q={video:{...v.video,...Q.video},audio:{...v.audio,...Q.audio}},window.playData=Q;const Et=Gx(null);window.videoElementRef=Et;const Je=Gx(null);window.audioElementRef=Je;const Lt=()=>{il.polyfill.installAll(),il.Player.isBrowserSupported()?(bt(),qe()):console.error("Browser not supported!")},bt=async()=>{if(Q.video.url==""){p=!1;return}const We=new il.Player;await We.attach(Et.value),window.videoPlayer=We,We.configure({streaming:{bufferingGoal:30}}),We.addEventListener("error",At);try{await We.load(Q.video.url,null,Q.video.contentType),console.log("The video has now been loaded!")}catch(cn){ln(cn)}},qe=async()=>{if(Q.audio.url==""){T=!1;return}const We=new il.Player;await We.attach(Je.value),window.audioPlayer=We,We.configure({streaming:{bufferingGoal:30}}),We.addEventListener("error",At);try{await We.load(Q.audio.url,null,Q.audio.contentType),console.log("The audio has now been loaded!")}catch(cn){ln(cn)}},Xt=()=>{if(!T||!p)return;const We=Et.value.currentTime,cn=Je.value.currentTime,A=Math.abs(We-cn);A>.2&&(console.warn(`音视频不同步！视频位置: ${We}, 音频位置: ${cn}, 差异: ${A}s`),Je.value.currentTime=We)},At=We=>{ln(We.detail)},ln=We=>{console.error("Error code",We.code,"object",We)};return KE(()=>{Lt()}),window.initApp=Lt,(We,cn)=>(RP(),_P(cr,null,[ld("video",{ref_key:"videoElement",ref:Et,id:"videoElement",width:"100%",height:"100%",onLoadedmetadata:C,onTimeupdate:w,onVolumechange:h,onEnded:O},null,544),ld("video",{ref_key:"audioElement",ref:Je,id:"audioElement",width:"0",height:"0",onVolumechange:h},null,544)],64))}};mL(IL).mount("#app");</script>
    <style rel="stylesheet" crossorigin>:root{--vt-c-white: #ffffff;--vt-c-white-soft: #f8f8f8;--vt-c-white-mute: #f2f2f2;--vt-c-black: #181818;--vt-c-black-soft: #222222;--vt-c-black-mute: #282828;--vt-c-indigo: #2c3e50;--vt-c-divider-light-1: rgba(60, 60, 60, .29);--vt-c-divider-light-2: rgba(60, 60, 60, .12);--vt-c-divider-dark-1: rgba(84, 84, 84, .65);--vt-c-divider-dark-2: rgba(84, 84, 84, .48);--vt-c-text-light-1: var(--vt-c-indigo);--vt-c-text-light-2: rgba(60, 60, 60, .66);--vt-c-text-dark-1: var(--vt-c-white);--vt-c-text-dark-2: rgba(235, 235, 235, .64)}:root{--color-background: var(--vt-c-white);--color-background-soft: var(--vt-c-white-soft);--color-background-mute: var(--vt-c-white-mute);--color-border: var(--vt-c-divider-light-2);--color-border-hover: var(--vt-c-divider-light-1);--color-heading: var(--vt-c-text-light-1);--color-text: var(--vt-c-text-light-1);--section-gap: 160px}@media (prefers-color-scheme: dark){:root{--color-background: var(--vt-c-black);--color-background-soft: var(--vt-c-black-soft);--color-background-mute: var(--vt-c-black-mute);--color-border: var(--vt-c-divider-dark-2);--color-border-hover: var(--vt-c-divider-dark-1);--color-heading: var(--vt-c-text-dark-1);--color-text: var(--vt-c-text-dark-2)}}*,*:before,*:after{box-sizing:border-box;margin:0;font-weight:400}body{min-height:100vh;color:var(--color-text);background:var(--color-background);transition:color .5s,background-color .5s;line-height:1.6;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:15px;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app{width:100%;height:100dvh;overflow:hidden;background:#000}#videoElement{width:100%;height:100%;background:#000}</style>
  </head>
  <body>
    <div id="app"></div>
    <script src="https://cdn.dashjs.org/latest/modern/umd/dash.all.min.js"></script>
  </body>
</html>
