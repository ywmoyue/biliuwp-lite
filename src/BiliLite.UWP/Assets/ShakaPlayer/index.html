<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="./favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
    <script type="module" crossorigin>var lL=Object.defineProperty;var cL=(l,f,S)=>f in l?lL(l,f,{enumerable:!0,configurable:!0,writable:!0,value:S}):l[f]=S;var Sw=(l,f,S)=>cL(l,typeof f!="symbol"?f+"":f,S);(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))I(_);new MutationObserver(_=>{for(const k of _)if(k.type==="childList")for(const D of k.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&I(D)}).observe(document,{childList:!0,subtree:!0});function S(_){const k={};return _.integrity&&(k.integrity=_.integrity),_.referrerPolicy&&(k.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?k.credentials="include":_.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function I(_){if(_.ep)return;_.ep=!0;const k=S(_);fetch(_.href,k)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ey(l){const f=Object.create(null);for(const S of l.split(","))f[S]=1;return S=>S in f}const Bn={},Su=[],fs=()=>{},dL=()=>!1,ah=l=>l.charCodeAt(0)===111&&l.charCodeAt(1)===110&&(l.charCodeAt(2)>122||l.charCodeAt(2)<97),wy=l=>l.startsWith("onUpdate:"),Vi=Object.assign,Ay=(l,f)=>{const S=l.indexOf(f);S>-1&&l.splice(S,1)},fL=Object.prototype.hasOwnProperty,bn=(l,f)=>fL.call(l,f),Zt=Array.isArray,nc=l=>uh(l)==="[object Map]",hL=l=>uh(l)==="[object Set]",tn=l=>typeof l=="function",vi=l=>typeof l=="string",Mu=l=>typeof l=="symbol",ei=l=>l!==null&&typeof l=="object",gA=l=>(ei(l)||tn(l))&&tn(l.then)&&tn(l.catch),pL=Object.prototype.toString,uh=l=>pL.call(l),mL=l=>uh(l).slice(8,-1),gL=l=>uh(l)==="[object Object]",xy=l=>vi(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,ic=Ey(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lh=l=>{const f=Object.create(null);return S=>f[S]||(f[S]=l(S))},yL=/-(\w)/g,Ao=lh(l=>l.replace(yL,(f,S)=>S?S.toUpperCase():"")),vL=/\B([A-Z])/g,da=lh(l=>l.replace(vL,"-$1").toLowerCase()),yA=lh(l=>l.charAt(0).toUpperCase()+l.slice(1)),Wg=lh(l=>l?`on${yA(l)}`:""),wo=(l,f)=>!Object.is(l,f),Xg=(l,...f)=>{for(let S=0;S<l.length;S++)l[S](...f)},vA=(l,f,S,I=!1)=>{Object.defineProperty(l,f,{configurable:!0,enumerable:!1,writable:I,value:S})},_L=l=>{const f=parseFloat(l);return isNaN(f)?l:f};let Tw;const ch=()=>Tw||(Tw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Iy(l){if(Zt(l)){const f={};for(let S=0;S<l.length;S++){const I=l[S],_=vi(I)?wL(I):Iy(I);if(_)for(const k in _)f[k]=_[k]}return f}else if(vi(l)||ei(l))return l}const SL=/;(?![^(]*\))/g,TL=/:([^]+)/,EL=/\/\*[^]*?\*\//g;function wL(l){const f={};return l.replace(EL,"").split(SL).forEach(S=>{if(S){const I=S.split(TL);I.length>1&&(f[I[0].trim()]=I[1].trim())}}),f}function My(l){let f="";if(vi(l))f=l;else if(Zt(l))for(let S=0;S<l.length;S++){const I=My(l[S]);I&&(f+=I+" ")}else if(ei(l))for(const S in l)l[S]&&(f+=S+" ");return f.trim()}const AL="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xL=Ey(AL);function _A(l){return!!l||l===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mr;class IL{constructor(f=!1){this.detached=f,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mr,!f&&Mr&&(this.index=(Mr.scopes||(Mr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let f,S;if(this.scopes)for(f=0,S=this.scopes.length;f<S;f++)this.scopes[f].pause();for(f=0,S=this.effects.length;f<S;f++)this.effects[f].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let f,S;if(this.scopes)for(f=0,S=this.scopes.length;f<S;f++)this.scopes[f].resume();for(f=0,S=this.effects.length;f<S;f++)this.effects[f].resume()}}run(f){if(this._active){const S=Mr;try{return Mr=this,f()}finally{Mr=S}}}on(){Mr=this}off(){Mr=this.parent}stop(f){if(this._active){this._active=!1;let S,I;for(S=0,I=this.effects.length;S<I;S++)this.effects[S].stop();for(this.effects.length=0,S=0,I=this.cleanups.length;S<I;S++)this.cleanups[S]();if(this.cleanups.length=0,this.scopes){for(S=0,I=this.scopes.length;S<I;S++)this.scopes[S].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!f){const _=this.parent.scopes.pop();_&&_!==this&&(this.parent.scopes[this.index]=_,_.index=this.index)}this.parent=void 0}}}function ML(){return Mr}let Un;const Yg=new WeakSet;class SA{constructor(f){this.fn=f,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mr&&Mr.active&&Mr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yg.has(this)&&(Yg.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||EA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ew(this),wA(this);const f=Un,S=Qr;Un=this,Qr=!0;try{return this.fn()}finally{AA(this),Un=f,Qr=S,this.flags&=-3}}stop(){if(this.flags&1){for(let f=this.deps;f;f=f.nextDep)ky(f);this.deps=this.depsTail=void 0,Ew(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yg.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){uy(this)&&this.run()}get dirty(){return uy(this)}}let TA=0,rc,sc;function EA(l,f=!1){if(l.flags|=8,f){l.next=sc,sc=l;return}l.next=rc,rc=l}function Cy(){TA++}function Ry(){if(--TA>0)return;if(sc){let f=sc;for(sc=void 0;f;){const S=f.next;f.next=void 0,f.flags&=-9,f=S}}let l;for(;rc;){let f=rc;for(rc=void 0;f;){const S=f.next;if(f.next=void 0,f.flags&=-9,f.flags&1)try{f.trigger()}catch(I){l||(l=I)}f=S}}if(l)throw l}function wA(l){for(let f=l.deps;f;f=f.nextDep)f.version=-1,f.prevActiveLink=f.dep.activeLink,f.dep.activeLink=f}function AA(l){let f,S=l.depsTail,I=S;for(;I;){const _=I.prevDep;I.version===-1?(I===S&&(S=_),ky(I),CL(I)):f=I,I.dep.activeLink=I.prevActiveLink,I.prevActiveLink=void 0,I=_}l.deps=f,l.depsTail=S}function uy(l){for(let f=l.deps;f;f=f.nextDep)if(f.dep.version!==f.version||f.dep.computed&&(xA(f.dep.computed)||f.dep.version!==f.version))return!0;return!!l._dirty}function xA(l){if(l.flags&4&&!(l.flags&16)||(l.flags&=-17,l.globalVersion===fc))return;l.globalVersion=fc;const f=l.dep;if(l.flags|=2,f.version>0&&!l.isSSR&&l.deps&&!uy(l)){l.flags&=-3;return}const S=Un,I=Qr;Un=l,Qr=!0;try{wA(l);const _=l.fn(l._value);(f.version===0||wo(_,l._value))&&(l._value=_,f.version++)}catch(_){throw f.version++,_}finally{Un=S,Qr=I,AA(l),l.flags&=-3}}function ky(l,f=!1){const{dep:S,prevSub:I,nextSub:_}=l;if(I&&(I.nextSub=_,l.prevSub=void 0),_&&(_.prevSub=I,l.nextSub=void 0),S.subs===l&&(S.subs=I,!I&&S.computed)){S.computed.flags&=-5;for(let k=S.computed.deps;k;k=k.nextDep)ky(k,!0)}!f&&!--S.sc&&S.map&&S.map.delete(S.key)}function CL(l){const{prevDep:f,nextDep:S}=l;f&&(f.nextDep=S,l.prevDep=void 0),S&&(S.prevDep=f,l.nextDep=void 0)}let Qr=!0;const IA=[];function xo(){IA.push(Qr),Qr=!1}function Io(){const l=IA.pop();Qr=l===void 0?!0:l}function Ew(l){const{cleanup:f}=l;if(l.cleanup=void 0,f){const S=Un;Un=void 0;try{f()}finally{Un=S}}}let fc=0;class RL{constructor(f,S){this.sub=f,this.dep=S,this.version=S.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class by{constructor(f){this.computed=f,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(f){if(!Un||!Qr||Un===this.computed)return;let S=this.activeLink;if(S===void 0||S.sub!==Un)S=this.activeLink=new RL(Un,this),Un.deps?(S.prevDep=Un.depsTail,Un.depsTail.nextDep=S,Un.depsTail=S):Un.deps=Un.depsTail=S,MA(S);else if(S.version===-1&&(S.version=this.version,S.nextDep)){const I=S.nextDep;I.prevDep=S.prevDep,S.prevDep&&(S.prevDep.nextDep=I),S.prevDep=Un.depsTail,S.nextDep=void 0,Un.depsTail.nextDep=S,Un.depsTail=S,Un.deps===S&&(Un.deps=I)}return S}trigger(f){this.version++,fc++,this.notify(f)}notify(f){Cy();try{for(let S=this.subs;S;S=S.prevSub)S.sub.notify()&&S.sub.dep.notify()}finally{Ry()}}}function MA(l){if(l.dep.sc++,l.sub.flags&4){const f=l.dep.computed;if(f&&!l.dep.subs){f.flags|=20;for(let I=f.deps;I;I=I.nextDep)MA(I)}const S=l.dep.subs;S!==l&&(l.prevSub=S,S&&(S.nextSub=l)),l.dep.subs=l}}const ly=new WeakMap,ua=Symbol(""),cy=Symbol(""),hc=Symbol("");function ji(l,f,S){if(Qr&&Un){let I=ly.get(l);I||ly.set(l,I=new Map);let _=I.get(S);_||(I.set(S,_=new by),_.map=I,_.key=S),_.track()}}function Ks(l,f,S,I,_,k){const D=ly.get(l);if(!D){fc++;return}const d=L=>{L&&L.trigger()};if(Cy(),f==="clear")D.forEach(d);else{const L=Zt(l),B=L&&xy(S);if(L&&S==="length"){const N=Number(I);D.forEach((j,V)=>{(V==="length"||V===hc||!Mu(V)&&V>=N)&&d(j)})}else switch((S!==void 0||D.has(void 0))&&d(D.get(S)),B&&d(D.get(hc)),f){case"add":L?B&&d(D.get("length")):(d(D.get(ua)),nc(l)&&d(D.get(cy)));break;case"delete":L||(d(D.get(ua)),nc(l)&&d(D.get(cy)));break;case"set":nc(l)&&d(D.get(ua));break}}Ry()}function gu(l){const f=kn(l);return f===l?f:(ji(f,"iterate",hc),Jr(l)?f:f.map(tr))}function Dy(l){return ji(l=kn(l),"iterate",hc),l}const kL={__proto__:null,[Symbol.iterator](){return $g(this,Symbol.iterator,tr)},concat(...l){return gu(this).concat(...l.map(f=>Zt(f)?gu(f):f))},entries(){return $g(this,"entries",l=>(l[1]=tr(l[1]),l))},every(l,f){return Hs(this,"every",l,f,void 0,arguments)},filter(l,f){return Hs(this,"filter",l,f,S=>S.map(tr),arguments)},find(l,f){return Hs(this,"find",l,f,tr,arguments)},findIndex(l,f){return Hs(this,"findIndex",l,f,void 0,arguments)},findLast(l,f){return Hs(this,"findLast",l,f,tr,arguments)},findLastIndex(l,f){return Hs(this,"findLastIndex",l,f,void 0,arguments)},forEach(l,f){return Hs(this,"forEach",l,f,void 0,arguments)},includes(...l){return Qg(this,"includes",l)},indexOf(...l){return Qg(this,"indexOf",l)},join(l){return gu(this).join(l)},lastIndexOf(...l){return Qg(this,"lastIndexOf",l)},map(l,f){return Hs(this,"map",l,f,void 0,arguments)},pop(){return Ql(this,"pop")},push(...l){return Ql(this,"push",l)},reduce(l,...f){return ww(this,"reduce",l,f)},reduceRight(l,...f){return ww(this,"reduceRight",l,f)},shift(){return Ql(this,"shift")},some(l,f){return Hs(this,"some",l,f,void 0,arguments)},splice(...l){return Ql(this,"splice",l)},toReversed(){return gu(this).toReversed()},toSorted(l){return gu(this).toSorted(l)},toSpliced(...l){return gu(this).toSpliced(...l)},unshift(...l){return Ql(this,"unshift",l)},values(){return $g(this,"values",tr)}};function $g(l,f,S){const I=Dy(l),_=I[f]();return I!==l&&!Jr(l)&&(_._next=_.next,_.next=()=>{const k=_._next();return k.value&&(k.value=S(k.value)),k}),_}const bL=Array.prototype;function Hs(l,f,S,I,_,k){const D=Dy(l),d=D!==l&&!Jr(l),L=D[f];if(L!==bL[f]){const j=L.apply(l,k);return d?tr(j):j}let B=S;D!==l&&(d?B=function(j,V){return S.call(this,tr(j),V,l)}:S.length>2&&(B=function(j,V){return S.call(this,j,V,l)}));const N=L.call(D,B,I);return d&&_?_(N):N}function ww(l,f,S,I){const _=Dy(l);let k=S;return _!==l&&(Jr(l)?S.length>3&&(k=function(D,d,L){return S.call(this,D,d,L,l)}):k=function(D,d,L){return S.call(this,D,tr(d),L,l)}),_[f](k,...I)}function Qg(l,f,S){const I=kn(l);ji(I,"iterate",hc);const _=I[f](...S);return(_===-1||_===!1)&&Oy(S[0])?(S[0]=kn(S[0]),I[f](...S)):_}function Ql(l,f,S=[]){xo(),Cy();const I=kn(l)[f].apply(l,S);return Ry(),Io(),I}const DL=Ey("__proto__,__v_isRef,__isVue"),CA=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(Mu));function LL(l){Mu(l)||(l=String(l));const f=kn(this);return ji(f,"has",l),f.hasOwnProperty(l)}class RA{constructor(f=!1,S=!1){this._isReadonly=f,this._isShallow=S}get(f,S,I){if(S==="__v_skip")return f.__v_skip;const _=this._isReadonly,k=this._isShallow;if(S==="__v_isReactive")return!_;if(S==="__v_isReadonly")return _;if(S==="__v_isShallow")return k;if(S==="__v_raw")return I===(_?k?GL:LA:k?DA:bA).get(f)||Object.getPrototypeOf(f)===Object.getPrototypeOf(I)?f:void 0;const D=Zt(f);if(!_){let L;if(D&&(L=kL[S]))return L;if(S==="hasOwnProperty")return LL}const d=Reflect.get(f,S,Fi(f)?f:I);return(Mu(S)?CA.has(S):DL(S))||(_||ji(f,"get",S),k)?d:Fi(d)?D&&xy(S)?d:d.value:ei(d)?_?OA(d):dh(d):d}}class kA extends RA{constructor(f=!1){super(!1,f)}set(f,S,I,_){let k=f[S];if(!this._isShallow){const L=ca(k);if(!Jr(I)&&!ca(I)&&(k=kn(k),I=kn(I)),!Zt(f)&&Fi(k)&&!Fi(I))return L?!1:(k.value=I,!0)}const D=Zt(f)&&xy(S)?Number(S)<f.length:bn(f,S),d=Reflect.set(f,S,I,Fi(f)?f:_);return f===kn(_)&&(D?wo(I,k)&&Ks(f,"set",S,I):Ks(f,"add",S,I)),d}deleteProperty(f,S){const I=bn(f,S);f[S];const _=Reflect.deleteProperty(f,S);return _&&I&&Ks(f,"delete",S,void 0),_}has(f,S){const I=Reflect.has(f,S);return(!Mu(S)||!CA.has(S))&&ji(f,"has",S),I}ownKeys(f){return ji(f,"iterate",Zt(f)?"length":ua),Reflect.ownKeys(f)}}class PL extends RA{constructor(f=!1){super(!0,f)}set(f,S){return!0}deleteProperty(f,S){return!0}}const OL=new kA,NL=new PL,UL=new kA(!0);const dy=l=>l,Wf=l=>Reflect.getPrototypeOf(l);function BL(l,f,S){return function(...I){const _=this.__v_raw,k=kn(_),D=nc(k),d=l==="entries"||l===Symbol.iterator&&D,L=l==="keys"&&D,B=_[l](...I),N=S?dy:f?fy:tr;return!f&&ji(k,"iterate",L?cy:ua),{next(){const{value:j,done:V}=B.next();return V?{value:j,done:V}:{value:d?[N(j[0]),N(j[1])]:N(j),done:V}},[Symbol.iterator](){return this}}}}function Xf(l){return function(...f){return l==="delete"?!1:l==="clear"?void 0:this}}function jL(l,f){const S={get(_){const k=this.__v_raw,D=kn(k),d=kn(_);l||(wo(_,d)&&ji(D,"get",_),ji(D,"get",d));const{has:L}=Wf(D),B=f?dy:l?fy:tr;if(L.call(D,_))return B(k.get(_));if(L.call(D,d))return B(k.get(d));k!==D&&k.get(_)},get size(){const _=this.__v_raw;return!l&&ji(kn(_),"iterate",ua),Reflect.get(_,"size",_)},has(_){const k=this.__v_raw,D=kn(k),d=kn(_);return l||(wo(_,d)&&ji(D,"has",_),ji(D,"has",d)),_===d?k.has(_):k.has(_)||k.has(d)},forEach(_,k){const D=this,d=D.__v_raw,L=kn(d),B=f?dy:l?fy:tr;return!l&&ji(L,"iterate",ua),d.forEach((N,j)=>_.call(k,B(N),B(j),D))}};return Vi(S,l?{add:Xf("add"),set:Xf("set"),delete:Xf("delete"),clear:Xf("clear")}:{add(_){!f&&!Jr(_)&&!ca(_)&&(_=kn(_));const k=kn(this);return Wf(k).has.call(k,_)||(k.add(_),Ks(k,"add",_,_)),this},set(_,k){!f&&!Jr(k)&&!ca(k)&&(k=kn(k));const D=kn(this),{has:d,get:L}=Wf(D);let B=d.call(D,_);B||(_=kn(_),B=d.call(D,_));const N=L.call(D,_);return D.set(_,k),B?wo(k,N)&&Ks(D,"set",_,k):Ks(D,"add",_,k),this},delete(_){const k=kn(this),{has:D,get:d}=Wf(k);let L=D.call(k,_);L||(_=kn(_),L=D.call(k,_)),d&&d.call(k,_);const B=k.delete(_);return L&&Ks(k,"delete",_,void 0),B},clear(){const _=kn(this),k=_.size!==0,D=_.clear();return k&&Ks(_,"clear",void 0,void 0),D}}),["keys","values","entries",Symbol.iterator].forEach(_=>{S[_]=BL(_,l,f)}),S}function Ly(l,f){const S=jL(l,f);return(I,_,k)=>_==="__v_isReactive"?!l:_==="__v_isReadonly"?l:_==="__v_raw"?I:Reflect.get(bn(S,_)&&_ in I?S:I,_,k)}const FL={get:Ly(!1,!1)},VL={get:Ly(!1,!0)},HL={get:Ly(!0,!1)};const bA=new WeakMap,DA=new WeakMap,LA=new WeakMap,GL=new WeakMap;function zL(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function KL(l){return l.__v_skip||!Object.isExtensible(l)?0:zL(mL(l))}function dh(l){return ca(l)?l:Py(l,!1,OL,FL,bA)}function PA(l){return Py(l,!1,UL,VL,DA)}function OA(l){return Py(l,!0,NL,HL,LA)}function Py(l,f,S,I,_){if(!ei(l)||l.__v_raw&&!(f&&l.__v_isReactive))return l;const k=_.get(l);if(k)return k;const D=KL(l);if(D===0)return l;const d=new Proxy(l,D===2?I:S);return _.set(l,d),d}function oc(l){return ca(l)?oc(l.__v_raw):!!(l&&l.__v_isReactive)}function ca(l){return!!(l&&l.__v_isReadonly)}function Jr(l){return!!(l&&l.__v_isShallow)}function Oy(l){return l?!!l.__v_raw:!1}function kn(l){const f=l&&l.__v_raw;return f?kn(f):l}function qL(l){return!bn(l,"__v_skip")&&Object.isExtensible(l)&&vA(l,"__v_skip",!0),l}const tr=l=>ei(l)?dh(l):l,fy=l=>ei(l)?OA(l):l;function Fi(l){return l?l.__v_isRef===!0:!1}function pc(l){return NA(l,!1)}function WL(l){return NA(l,!0)}function NA(l,f){return Fi(l)?l:new XL(l,f)}class XL{constructor(f,S){this.dep=new by,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=S?f:kn(f),this._value=S?f:tr(f),this.__v_isShallow=S}get value(){return this.dep.track(),this._value}set value(f){const S=this._rawValue,I=this.__v_isShallow||Jr(f)||ca(f);f=I?f:kn(f),wo(f,S)&&(this._rawValue=f,this._value=I?f:tr(f),this.dep.trigger())}}function la(l){return Fi(l)?l.value:l}const YL={get:(l,f,S)=>f==="__v_raw"?l:la(Reflect.get(l,f,S)),set:(l,f,S,I)=>{const _=l[f];return Fi(_)&&!Fi(S)?(_.value=S,!0):Reflect.set(l,f,S,I)}};function UA(l){return oc(l)?l:new Proxy(l,YL)}class $L{constructor(f,S,I){this.fn=f,this.setter=S,this._value=void 0,this.dep=new by(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!S,this.isSSR=I}notify(){if(this.flags|=16,!(this.flags&8)&&Un!==this)return EA(this,!0),!0}get value(){const f=this.dep.track();return xA(this),f&&(f.version=this.dep.version),this._value}set value(f){this.setter&&this.setter(f)}}function QL(l,f,S=!1){let I,_;return tn(l)?I=l:(I=l.get,_=l.set),new $L(I,_,S)}const Yf={},eh=new WeakMap;let aa;function JL(l,f=!1,S=aa){if(S){let I=eh.get(S);I||eh.set(S,I=[]),I.push(l)}}function ZL(l,f,S=Bn){const{immediate:I,deep:_,once:k,scheduler:D,augmentJob:d,call:L}=S,B=oe=>_?oe:Jr(oe)||_===!1||_===0?Eo(oe,1):Eo(oe);let N,j,V,K,v=!1,z=!1;if(Fi(l)?(j=()=>l.value,v=Jr(l)):oc(l)?(j=()=>B(l),v=!0):Zt(l)?(z=!0,v=l.some(oe=>oc(oe)||Jr(oe)),j=()=>l.map(oe=>{if(Fi(oe))return oe.value;if(oc(oe))return B(oe);if(tn(oe))return L?L(oe,2):oe()})):tn(l)?f?j=L?()=>L(l,2):l:j=()=>{if(V){xo();try{V()}finally{Io()}}const oe=aa;aa=N;try{return L?L(l,3,[K]):l(K)}finally{aa=oe}}:j=fs,f&&_){const oe=j,Be=_===!0?1/0:_;j=()=>Eo(oe(),Be)}const Te=ML(),ye=()=>{N.stop(),Te&&Te.active&&Ay(Te.effects,N)};if(k&&f){const oe=f;f=(...Be)=>{oe(...Be),ye()}}let Se=z?new Array(l.length).fill(Yf):Yf;const Le=oe=>{if(!(!(N.flags&1)||!N.dirty&&!oe))if(f){const Be=N.run();if(_||v||(z?Be.some((He,xe)=>wo(He,Se[xe])):wo(Be,Se))){V&&V();const He=aa;aa=N;try{const xe=[Be,Se===Yf?void 0:z&&Se[0]===Yf?[]:Se,K];L?L(f,3,xe):f(...xe),Se=Be}finally{aa=He}}}else N.run()};return d&&d(Le),N=new SA(j),N.scheduler=D?()=>D(Le,!1):Le,K=oe=>JL(oe,!1,N),V=N.onStop=()=>{const oe=eh.get(N);if(oe){if(L)L(oe,4);else for(const Be of oe)Be();eh.delete(N)}},f?I?Le(!0):Se=N.run():D?D(Le.bind(null,!0),!0):N.run(),ye.pause=N.pause.bind(N),ye.resume=N.resume.bind(N),ye.stop=ye,ye}function Eo(l,f=1/0,S){if(f<=0||!ei(l)||l.__v_skip||(S=S||new Set,S.has(l)))return l;if(S.add(l),f--,Fi(l))Eo(l.value,f,S);else if(Zt(l))for(let I=0;I<l.length;I++)Eo(l[I],f,S);else if(hL(l)||nc(l))l.forEach(I=>{Eo(I,f,S)});else if(gL(l)){for(const I in l)Eo(l[I],f,S);for(const I of Object.getOwnPropertySymbols(l))Object.prototype.propertyIsEnumerable.call(l,I)&&Eo(l[I],f,S)}return l}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tc(l,f,S,I){try{return I?l(...I):l()}catch(_){fh(_,f,S)}}function hs(l,f,S,I){if(tn(l)){const _=Tc(l,f,S,I);return _&&gA(_)&&_.catch(k=>{fh(k,f,S)}),_}if(Zt(l)){const _=[];for(let k=0;k<l.length;k++)_.push(hs(l[k],f,S,I));return _}}function fh(l,f,S,I=!0){const _=f?f.vnode:null,{errorHandler:k,throwUnhandledErrorInProduction:D}=f&&f.appContext.config||Bn;if(f){let d=f.parent;const L=f.proxy,B=`https://vuejs.org/error-reference/#runtime-${S}`;for(;d;){const N=d.ec;if(N){for(let j=0;j<N.length;j++)if(N[j](l,L,B)===!1)return}d=d.parent}if(k){xo(),Tc(k,null,10,[l,L,B]),Io();return}}eP(l,S,_,I,D)}function eP(l,f,S,I=!0,_=!1){if(_)throw l;console.error(l)}const nr=[];let ls=-1;const Tu=[];let _o=null,yu=0;const BA=Promise.resolve();let th=null;function jA(l){const f=th||BA;return l?f.then(this?l.bind(this):l):f}function tP(l){let f=ls+1,S=nr.length;for(;f<S;){const I=f+S>>>1,_=nr[I],k=mc(_);k<l||k===l&&_.flags&2?f=I+1:S=I}return f}function Ny(l){if(!(l.flags&1)){const f=mc(l),S=nr[nr.length-1];!S||!(l.flags&2)&&f>=mc(S)?nr.push(l):nr.splice(tP(f),0,l),l.flags|=1,FA()}}function FA(){th||(th=BA.then(HA))}function nP(l){Zt(l)?Tu.push(...l):_o&&l.id===-1?_o.splice(yu+1,0,l):l.flags&1||(Tu.push(l),l.flags|=1),FA()}function Aw(l,f,S=ls+1){for(;S<nr.length;S++){const I=nr[S];if(I&&I.flags&2){if(l&&I.id!==l.uid)continue;nr.splice(S,1),S--,I.flags&4&&(I.flags&=-2),I(),I.flags&4||(I.flags&=-2)}}}function VA(l){if(Tu.length){const f=[...new Set(Tu)].sort((S,I)=>mc(S)-mc(I));if(Tu.length=0,_o){_o.push(...f);return}for(_o=f,yu=0;yu<_o.length;yu++){const S=_o[yu];S.flags&4&&(S.flags&=-2),S.flags&8||S(),S.flags&=-2}_o=null,yu=0}}const mc=l=>l.id==null?l.flags&2?-1:1/0:l.id;function HA(l){try{for(ls=0;ls<nr.length;ls++){const f=nr[ls];f&&!(f.flags&8)&&(f.flags&4&&(f.flags&=-2),Tc(f,f.i,f.i?15:14),f.flags&4||(f.flags&=-2))}}finally{for(;ls<nr.length;ls++){const f=nr[ls];f&&(f.flags&=-2)}ls=-1,nr.length=0,VA(),th=null,(nr.length||Tu.length)&&HA()}}let ds=null,GA=null;function nh(l){const f=ds;return ds=l,GA=l&&l.type.__scopeId||null,f}function iP(l,f=ds,S){if(!f||l._n)return l;const I=(..._)=>{I._d&&Lw(-1);const k=nh(f);let D;try{D=l(..._)}finally{nh(k),I._d&&Lw(1)}return D};return I._n=!0,I._c=!0,I._d=!0,I}function sa(l,f,S,I){const _=l.dirs,k=f&&f.dirs;for(let D=0;D<_.length;D++){const d=_[D];k&&(d.oldValue=k[D].value);let L=d.dir[I];L&&(xo(),hs(L,S,8,[l.el,d,l,f]),Io())}}const rP=Symbol("_vte"),sP=l=>l.__isTeleport;function Uy(l,f){l.shapeFlag&6&&l.component?(l.transition=f,Uy(l.component.subTree,f)):l.shapeFlag&128?(l.ssContent.transition=f.clone(l.ssContent),l.ssFallback.transition=f.clone(l.ssFallback)):l.transition=f}/*! #__NO_SIDE_EFFECTS__ */function zA(l,f){return tn(l)?Vi({name:l.name},f,{setup:l}):l}function KA(l){l.ids=[l.ids[0]+l.ids[2]+++"-",0,0]}function ih(l,f,S,I,_=!1){if(Zt(l)){l.forEach((v,z)=>ih(v,f&&(Zt(f)?f[z]:f),S,I,_));return}if(ac(I)&&!_){I.shapeFlag&512&&I.type.__asyncResolved&&I.component.subTree.component&&ih(l,f,S,I.component.subTree);return}const k=I.shapeFlag&4?Hy(I.component):I.el,D=_?null:k,{i:d,r:L}=l,B=f&&f.r,N=d.refs===Bn?d.refs={}:d.refs,j=d.setupState,V=kn(j),K=j===Bn?()=>!1:v=>bn(V,v);if(B!=null&&B!==L&&(vi(B)?(N[B]=null,K(B)&&(j[B]=null)):Fi(B)&&(B.value=null)),tn(L))Tc(L,d,12,[D,N]);else{const v=vi(L),z=Fi(L);if(v||z){const Te=()=>{if(l.f){const ye=v?K(L)?j[L]:N[L]:L.value;_?Zt(ye)&&Ay(ye,k):Zt(ye)?ye.includes(k)||ye.push(k):v?(N[L]=[k],K(L)&&(j[L]=N[L])):(L.value=[k],l.k&&(N[l.k]=L.value))}else v?(N[L]=D,K(L)&&(j[L]=D)):z&&(L.value=D,l.k&&(N[l.k]=D))};D?(Te.id=-1,Ir(Te,S)):Te()}}}ch().requestIdleCallback;ch().cancelIdleCallback;const ac=l=>!!l.type.__asyncLoader,qA=l=>l.type.__isKeepAlive;function oP(l,f){WA(l,"a",f)}function aP(l,f){WA(l,"da",f)}function WA(l,f,S=ir){const I=l.__wdc||(l.__wdc=()=>{let _=S;for(;_;){if(_.isDeactivated)return;_=_.parent}return l()});if(hh(f,I,S),S){let _=S.parent;for(;_&&_.parent;)qA(_.parent.vnode)&&uP(I,f,S,_),_=_.parent}}function uP(l,f,S,I){const _=hh(f,l,I,!0);XA(()=>{Ay(I[f],_)},S)}function hh(l,f,S=ir,I=!1){if(S){const _=S[l]||(S[l]=[]),k=f.__weh||(f.__weh=(...D)=>{xo();const d=Ec(S),L=hs(f,S,l,D);return d(),Io(),L});return I?_.unshift(k):_.push(k),k}}const Ws=l=>(f,S=ir)=>{(!vc||l==="sp")&&hh(l,(...I)=>f(...I),S)},lP=Ws("bm"),By=Ws("m"),cP=Ws("bu"),dP=Ws("u"),fP=Ws("bum"),XA=Ws("um"),hP=Ws("sp"),pP=Ws("rtg"),mP=Ws("rtc");function gP(l,f=ir){hh("ec",l,f)}const yP=Symbol.for("v-ndc"),hy=l=>l?gx(l)?Hy(l):hy(l.parent):null,uc=Vi(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>hy(l.parent),$root:l=>hy(l.root),$host:l=>l.ce,$emit:l=>l.emit,$options:l=>$A(l),$forceUpdate:l=>l.f||(l.f=()=>{Ny(l.update)}),$nextTick:l=>l.n||(l.n=jA.bind(l.proxy)),$watch:l=>BP.bind(l)}),Jg=(l,f)=>l!==Bn&&!l.__isScriptSetup&&bn(l,f),vP={get({_:l},f){if(f==="__v_skip")return!0;const{ctx:S,setupState:I,data:_,props:k,accessCache:D,type:d,appContext:L}=l;let B;if(f[0]!=="$"){const K=D[f];if(K!==void 0)switch(K){case 1:return I[f];case 2:return _[f];case 4:return S[f];case 3:return k[f]}else{if(Jg(I,f))return D[f]=1,I[f];if(_!==Bn&&bn(_,f))return D[f]=2,_[f];if((B=l.propsOptions[0])&&bn(B,f))return D[f]=3,k[f];if(S!==Bn&&bn(S,f))return D[f]=4,S[f];py&&(D[f]=0)}}const N=uc[f];let j,V;if(N)return f==="$attrs"&&ji(l.attrs,"get",""),N(l);if((j=d.__cssModules)&&(j=j[f]))return j;if(S!==Bn&&bn(S,f))return D[f]=4,S[f];if(V=L.config.globalProperties,bn(V,f))return V[f]},set({_:l},f,S){const{data:I,setupState:_,ctx:k}=l;return Jg(_,f)?(_[f]=S,!0):I!==Bn&&bn(I,f)?(I[f]=S,!0):bn(l.props,f)||f[0]==="$"&&f.slice(1)in l?!1:(k[f]=S,!0)},has({_:{data:l,setupState:f,accessCache:S,ctx:I,appContext:_,propsOptions:k}},D){let d;return!!S[D]||l!==Bn&&bn(l,D)||Jg(f,D)||(d=k[0])&&bn(d,D)||bn(I,D)||bn(uc,D)||bn(_.config.globalProperties,D)},defineProperty(l,f,S){return S.get!=null?l._.accessCache[f]=0:bn(S,"value")&&this.set(l,f,S.value,null),Reflect.defineProperty(l,f,S)}};function xw(l){return Zt(l)?l.reduce((f,S)=>(f[S]=null,f),{}):l}let py=!0;function _P(l){const f=$A(l),S=l.proxy,I=l.ctx;py=!1,f.beforeCreate&&Iw(f.beforeCreate,l,"bc");const{data:_,computed:k,methods:D,watch:d,provide:L,inject:B,created:N,beforeMount:j,mounted:V,beforeUpdate:K,updated:v,activated:z,deactivated:Te,beforeDestroy:ye,beforeUnmount:Se,destroyed:Le,unmounted:oe,render:Be,renderTracked:He,renderTriggered:xe,errorCaptured:J,serverPrefetch:Y,expose:T,inheritAttrs:H,components:ve,directives:Ye,filters:Me}=f;if(B&&SP(B,I,null),D)for(const ct in D){const it=D[ct];tn(it)&&(I[ct]=it.bind(S))}if(_){const ct=_.call(S,S);ei(ct)&&(l.data=dh(ct))}if(py=!0,k)for(const ct in k){const it=k[ct],de=tn(it)?it.bind(S,S):tn(it.get)?it.get.bind(S,S):fs,Z=!tn(it)&&tn(it.set)?it.set.bind(S):fs,we=Yr({get:de,set:Z});Object.defineProperty(I,ct,{enumerable:!0,configurable:!0,get:()=>we.value,set:Fe=>we.value=Fe})}if(d)for(const ct in d)YA(d[ct],I,S,ct);if(L){const ct=tn(L)?L.call(S):L;Reflect.ownKeys(ct).forEach(it=>{$f(it,ct[it])})}N&&Iw(N,l,"c");function tt(ct,it){Zt(it)?it.forEach(de=>ct(de.bind(S))):it&&ct(it.bind(S))}if(tt(lP,j),tt(By,V),tt(cP,K),tt(dP,v),tt(oP,z),tt(aP,Te),tt(gP,J),tt(mP,He),tt(pP,xe),tt(fP,Se),tt(XA,oe),tt(hP,Y),Zt(T))if(T.length){const ct=l.exposed||(l.exposed={});T.forEach(it=>{Object.defineProperty(ct,it,{get:()=>S[it],set:de=>S[it]=de})})}else l.exposed||(l.exposed={});Be&&l.render===fs&&(l.render=Be),H!=null&&(l.inheritAttrs=H),ve&&(l.components=ve),Ye&&(l.directives=Ye),Y&&KA(l)}function SP(l,f,S=fs){Zt(l)&&(l=my(l));for(const I in l){const _=l[I];let k;ei(_)?"default"in _?k=qs(_.from||I,_.default,!0):k=qs(_.from||I):k=qs(_),Fi(k)?Object.defineProperty(f,I,{enumerable:!0,configurable:!0,get:()=>k.value,set:D=>k.value=D}):f[I]=k}}function Iw(l,f,S){hs(Zt(l)?l.map(I=>I.bind(f.proxy)):l.bind(f.proxy),f,S)}function YA(l,f,S,I){let _=I.includes(".")?cx(S,I):()=>S[I];if(vi(l)){const k=f[l];tn(k)&&Qf(_,k)}else if(tn(l))Qf(_,l.bind(S));else if(ei(l))if(Zt(l))l.forEach(k=>YA(k,f,S,I));else{const k=tn(l.handler)?l.handler.bind(S):f[l.handler];tn(k)&&Qf(_,k,l)}}function $A(l){const f=l.type,{mixins:S,extends:I}=f,{mixins:_,optionsCache:k,config:{optionMergeStrategies:D}}=l.appContext,d=k.get(f);let L;return d?L=d:!_.length&&!S&&!I?L=f:(L={},_.length&&_.forEach(B=>rh(L,B,D,!0)),rh(L,f,D)),ei(f)&&k.set(f,L),L}function rh(l,f,S,I=!1){const{mixins:_,extends:k}=f;k&&rh(l,k,S,!0),_&&_.forEach(D=>rh(l,D,S,!0));for(const D in f)if(!(I&&D==="expose")){const d=TP[D]||S&&S[D];l[D]=d?d(l[D],f[D]):f[D]}return l}const TP={data:Mw,props:Cw,emits:Cw,methods:tc,computed:tc,beforeCreate:er,created:er,beforeMount:er,mounted:er,beforeUpdate:er,updated:er,beforeDestroy:er,beforeUnmount:er,destroyed:er,unmounted:er,activated:er,deactivated:er,errorCaptured:er,serverPrefetch:er,components:tc,directives:tc,watch:wP,provide:Mw,inject:EP};function Mw(l,f){return f?l?function(){return Vi(tn(l)?l.call(this,this):l,tn(f)?f.call(this,this):f)}:f:l}function EP(l,f){return tc(my(l),my(f))}function my(l){if(Zt(l)){const f={};for(let S=0;S<l.length;S++)f[l[S]]=l[S];return f}return l}function er(l,f){return l?[...new Set([].concat(l,f))]:f}function tc(l,f){return l?Vi(Object.create(null),l,f):f}function Cw(l,f){return l?Zt(l)&&Zt(f)?[...new Set([...l,...f])]:Vi(Object.create(null),xw(l),xw(f??{})):f}function wP(l,f){if(!l)return f;if(!f)return l;const S=Vi(Object.create(null),l);for(const I in f)S[I]=er(l[I],f[I]);return S}function QA(){return{app:null,config:{isNativeTag:dL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let AP=0;function xP(l,f){return function(I,_=null){tn(I)||(I=Vi({},I)),_!=null&&!ei(_)&&(_=null);const k=QA(),D=new WeakSet,d=[];let L=!1;const B=k.app={_uid:AP++,_component:I,_props:_,_container:null,_context:k,_instance:null,version:o3,get config(){return k.config},set config(N){},use(N,...j){return D.has(N)||(N&&tn(N.install)?(D.add(N),N.install(B,...j)):tn(N)&&(D.add(N),N(B,...j))),B},mixin(N){return k.mixins.includes(N)||k.mixins.push(N),B},component(N,j){return j?(k.components[N]=j,B):k.components[N]},directive(N,j){return j?(k.directives[N]=j,B):k.directives[N]},mount(N,j,V){if(!L){const K=B._ceVNode||jr(I,_);return K.appContext=k,V===!0?V="svg":V===!1&&(V=void 0),l(K,N,V),L=!0,B._container=N,N.__vue_app__=B,Hy(K.component)}},onUnmount(N){d.push(N)},unmount(){L&&(hs(d,B._instance,16),l(null,B._container),delete B._container.__vue_app__)},provide(N,j){return k.provides[N]=j,B},runWithContext(N){const j=Eu;Eu=B;try{return N()}finally{Eu=j}}};return B}}let Eu=null;function $f(l,f){if(ir){let S=ir.provides;const I=ir.parent&&ir.parent.provides;I===S&&(S=ir.provides=Object.create(I)),S[l]=f}}function qs(l,f,S=!1){const I=ir||ds;if(I||Eu){const _=Eu?Eu._context.provides:I?I.parent==null?I.vnode.appContext&&I.vnode.appContext.provides:I.parent.provides:void 0;if(_&&l in _)return _[l];if(arguments.length>1)return S&&tn(f)?f.call(I&&I.proxy):f}}const JA={},ZA=()=>Object.create(JA),ex=l=>Object.getPrototypeOf(l)===JA;function IP(l,f,S,I=!1){const _={},k=ZA();l.propsDefaults=Object.create(null),tx(l,f,_,k);for(const D in l.propsOptions[0])D in _||(_[D]=void 0);S?l.props=I?_:PA(_):l.type.props?l.props=_:l.props=k,l.attrs=k}function MP(l,f,S,I){const{props:_,attrs:k,vnode:{patchFlag:D}}=l,d=kn(_),[L]=l.propsOptions;let B=!1;if((I||D>0)&&!(D&16)){if(D&8){const N=l.vnode.dynamicProps;for(let j=0;j<N.length;j++){let V=N[j];if(ph(l.emitsOptions,V))continue;const K=f[V];if(L)if(bn(k,V))K!==k[V]&&(k[V]=K,B=!0);else{const v=Ao(V);_[v]=gy(L,d,v,K,l,!1)}else K!==k[V]&&(k[V]=K,B=!0)}}}else{tx(l,f,_,k)&&(B=!0);let N;for(const j in d)(!f||!bn(f,j)&&((N=da(j))===j||!bn(f,N)))&&(L?S&&(S[j]!==void 0||S[N]!==void 0)&&(_[j]=gy(L,d,j,void 0,l,!0)):delete _[j]);if(k!==d)for(const j in k)(!f||!bn(f,j))&&(delete k[j],B=!0)}B&&Ks(l.attrs,"set","")}function tx(l,f,S,I){const[_,k]=l.propsOptions;let D=!1,d;if(f)for(let L in f){if(ic(L))continue;const B=f[L];let N;_&&bn(_,N=Ao(L))?!k||!k.includes(N)?S[N]=B:(d||(d={}))[N]=B:ph(l.emitsOptions,L)||(!(L in I)||B!==I[L])&&(I[L]=B,D=!0)}if(k){const L=kn(S),B=d||Bn;for(let N=0;N<k.length;N++){const j=k[N];S[j]=gy(_,L,j,B[j],l,!bn(B,j))}}return D}function gy(l,f,S,I,_,k){const D=l[S];if(D!=null){const d=bn(D,"default");if(d&&I===void 0){const L=D.default;if(D.type!==Function&&!D.skipFactory&&tn(L)){const{propsDefaults:B}=_;if(S in B)I=B[S];else{const N=Ec(_);I=B[S]=L.call(null,f),N()}}else I=L;_.ce&&_.ce._setProp(S,I)}D[0]&&(k&&!d?I=!1:D[1]&&(I===""||I===da(S))&&(I=!0))}return I}const CP=new WeakMap;function nx(l,f,S=!1){const I=S?CP:f.propsCache,_=I.get(l);if(_)return _;const k=l.props,D={},d=[];let L=!1;if(!tn(l)){const N=j=>{L=!0;const[V,K]=nx(j,f,!0);Vi(D,V),K&&d.push(...K)};!S&&f.mixins.length&&f.mixins.forEach(N),l.extends&&N(l.extends),l.mixins&&l.mixins.forEach(N)}if(!k&&!L)return ei(l)&&I.set(l,Su),Su;if(Zt(k))for(let N=0;N<k.length;N++){const j=Ao(k[N]);Rw(j)&&(D[j]=Bn)}else if(k)for(const N in k){const j=Ao(N);if(Rw(j)){const V=k[N],K=D[j]=Zt(V)||tn(V)?{type:V}:Vi({},V),v=K.type;let z=!1,Te=!0;if(Zt(v))for(let ye=0;ye<v.length;++ye){const Se=v[ye],Le=tn(Se)&&Se.name;if(Le==="Boolean"){z=!0;break}else Le==="String"&&(Te=!1)}else z=tn(v)&&v.name==="Boolean";K[0]=z,K[1]=Te,(z||bn(K,"default"))&&d.push(j)}}const B=[D,d];return ei(l)&&I.set(l,B),B}function Rw(l){return l[0]!=="$"&&!ic(l)}const ix=l=>l[0]==="_"||l==="$stable",jy=l=>Zt(l)?l.map(cs):[cs(l)],RP=(l,f,S)=>{if(f._n)return f;const I=iP((..._)=>jy(f(..._)),S);return I._c=!1,I},rx=(l,f,S)=>{const I=l._ctx;for(const _ in l){if(ix(_))continue;const k=l[_];if(tn(k))f[_]=RP(_,k,I);else if(k!=null){const D=jy(k);f[_]=()=>D}}},sx=(l,f)=>{const S=jy(f);l.slots.default=()=>S},ox=(l,f,S)=>{for(const I in f)(S||I!=="_")&&(l[I]=f[I])},kP=(l,f,S)=>{const I=l.slots=ZA();if(l.vnode.shapeFlag&32){const _=f._;_?(ox(I,f,S),S&&vA(I,"_",_,!0)):rx(f,I)}else f&&sx(l,f)},bP=(l,f,S)=>{const{vnode:I,slots:_}=l;let k=!0,D=Bn;if(I.shapeFlag&32){const d=f._;d?S&&d===1?k=!1:ox(_,f,S):(k=!f.$stable,rx(f,_)),D=f}else f&&(sx(l,f),D={default:1});if(k)for(const d in _)!ix(d)&&D[d]==null&&delete _[d]},Ir=KP;function DP(l){return LP(l)}function LP(l,f){const S=ch();S.__VUE__=!0;const{insert:I,remove:_,patchProp:k,createElement:D,createText:d,createComment:L,setText:B,setElementText:N,parentNode:j,nextSibling:V,setScopeId:K=fs,insertStaticContent:v}=l,z=(G,ue,Ae,je=null,Oe=null,Ve=null,st=void 0,$e=null,Ne=!!ue.dynamicChildren)=>{if(G===ue)return;G&&!Jl(G,ue)&&(je=ce(G),Fe(G,Oe,Ve,!0),G=null),ue.patchFlag===-2&&(Ne=!1,ue.dynamicChildren=null);const{type:We,ref:Ut,shapeFlag:dt}=ue;switch(We){case mh:Te(G,ue,Ae,je);break;case gc:ye(G,ue,Ae,je);break;case ey:G==null&&Se(ue,Ae,je,st);break;case Xr:ve(G,ue,Ae,je,Oe,Ve,st,$e,Ne);break;default:dt&1?Be(G,ue,Ae,je,Oe,Ve,st,$e,Ne):dt&6?Ye(G,ue,Ae,je,Oe,Ve,st,$e,Ne):(dt&64||dt&128)&&We.process(G,ue,Ae,je,Oe,Ve,st,$e,Ne,Ke)}Ut!=null&&Oe&&ih(Ut,G&&G.ref,Ve,ue||G,!ue)},Te=(G,ue,Ae,je)=>{if(G==null)I(ue.el=d(ue.children),Ae,je);else{const Oe=ue.el=G.el;ue.children!==G.children&&B(Oe,ue.children)}},ye=(G,ue,Ae,je)=>{G==null?I(ue.el=L(ue.children||""),Ae,je):ue.el=G.el},Se=(G,ue,Ae,je)=>{[G.el,G.anchor]=v(G.children,ue,Ae,je,G.el,G.anchor)},Le=({el:G,anchor:ue},Ae,je)=>{let Oe;for(;G&&G!==ue;)Oe=V(G),I(G,Ae,je),G=Oe;I(ue,Ae,je)},oe=({el:G,anchor:ue})=>{let Ae;for(;G&&G!==ue;)Ae=V(G),_(G),G=Ae;_(ue)},Be=(G,ue,Ae,je,Oe,Ve,st,$e,Ne)=>{ue.type==="svg"?st="svg":ue.type==="math"&&(st="mathml"),G==null?He(ue,Ae,je,Oe,Ve,st,$e,Ne):Y(G,ue,Oe,Ve,st,$e,Ne)},He=(G,ue,Ae,je,Oe,Ve,st,$e)=>{let Ne,We;const{props:Ut,shapeFlag:dt,transition:Pt,dirs:Gt}=G;if(Ne=G.el=D(G.type,Ve,Ut&&Ut.is,Ut),dt&8?N(Ne,G.children):dt&16&&J(G.children,Ne,null,je,Oe,Zg(G,Ve),st,$e),Gt&&sa(G,null,je,"created"),xe(Ne,G,G.scopeId,st,je),Ut){for(const _t in Ut)_t!=="value"&&!ic(_t)&&k(Ne,_t,null,Ut[_t],Ve,je);"value"in Ut&&k(Ne,"value",null,Ut.value,Ve),(We=Ut.onVnodeBeforeMount)&&us(We,je,G)}Gt&&sa(G,null,je,"beforeMount");const Qt=PP(Oe,Pt);Qt&&Pt.beforeEnter(Ne),I(Ne,ue,Ae),((We=Ut&&Ut.onVnodeMounted)||Qt||Gt)&&Ir(()=>{We&&us(We,je,G),Qt&&Pt.enter(Ne),Gt&&sa(G,null,je,"mounted")},Oe)},xe=(G,ue,Ae,je,Oe)=>{if(Ae&&K(G,Ae),je)for(let Ve=0;Ve<je.length;Ve++)K(G,je[Ve]);if(Oe){let Ve=Oe.subTree;if(ue===Ve||fx(Ve.type)&&(Ve.ssContent===ue||Ve.ssFallback===ue)){const st=Oe.vnode;xe(G,st,st.scopeId,st.slotScopeIds,Oe.parent)}}},J=(G,ue,Ae,je,Oe,Ve,st,$e,Ne=0)=>{for(let We=Ne;We<G.length;We++){const Ut=G[We]=$e?So(G[We]):cs(G[We]);z(null,Ut,ue,Ae,je,Oe,Ve,st,$e)}},Y=(G,ue,Ae,je,Oe,Ve,st)=>{const $e=ue.el=G.el;let{patchFlag:Ne,dynamicChildren:We,dirs:Ut}=ue;Ne|=G.patchFlag&16;const dt=G.props||Bn,Pt=ue.props||Bn;let Gt;if(Ae&&oa(Ae,!1),(Gt=Pt.onVnodeBeforeUpdate)&&us(Gt,Ae,ue,G),Ut&&sa(ue,G,Ae,"beforeUpdate"),Ae&&oa(Ae,!0),(dt.innerHTML&&Pt.innerHTML==null||dt.textContent&&Pt.textContent==null)&&N($e,""),We?T(G.dynamicChildren,We,$e,Ae,je,Zg(ue,Oe),Ve):st||it(G,ue,$e,null,Ae,je,Zg(ue,Oe),Ve,!1),Ne>0){if(Ne&16)H($e,dt,Pt,Ae,Oe);else if(Ne&2&&dt.class!==Pt.class&&k($e,"class",null,Pt.class,Oe),Ne&4&&k($e,"style",dt.style,Pt.style,Oe),Ne&8){const Qt=ue.dynamicProps;for(let _t=0;_t<Qt.length;_t++){const yn=Qt[_t],_i=dt[yn],fi=Pt[yn];(fi!==_i||yn==="value")&&k($e,yn,_i,fi,Oe,Ae)}}Ne&1&&G.children!==ue.children&&N($e,ue.children)}else!st&&We==null&&H($e,dt,Pt,Ae,Oe);((Gt=Pt.onVnodeUpdated)||Ut)&&Ir(()=>{Gt&&us(Gt,Ae,ue,G),Ut&&sa(ue,G,Ae,"updated")},je)},T=(G,ue,Ae,je,Oe,Ve,st)=>{for(let $e=0;$e<ue.length;$e++){const Ne=G[$e],We=ue[$e],Ut=Ne.el&&(Ne.type===Xr||!Jl(Ne,We)||Ne.shapeFlag&70)?j(Ne.el):Ae;z(Ne,We,Ut,null,je,Oe,Ve,st,!0)}},H=(G,ue,Ae,je,Oe)=>{if(ue!==Ae){if(ue!==Bn)for(const Ve in ue)!ic(Ve)&&!(Ve in Ae)&&k(G,Ve,ue[Ve],null,Oe,je);for(const Ve in Ae){if(ic(Ve))continue;const st=Ae[Ve],$e=ue[Ve];st!==$e&&Ve!=="value"&&k(G,Ve,$e,st,Oe,je)}"value"in Ae&&k(G,"value",ue.value,Ae.value,Oe)}},ve=(G,ue,Ae,je,Oe,Ve,st,$e,Ne)=>{const We=ue.el=G?G.el:d(""),Ut=ue.anchor=G?G.anchor:d("");let{patchFlag:dt,dynamicChildren:Pt,slotScopeIds:Gt}=ue;Gt&&($e=$e?$e.concat(Gt):Gt),G==null?(I(We,Ae,je),I(Ut,Ae,je),J(ue.children||[],Ae,Ut,Oe,Ve,st,$e,Ne)):dt>0&&dt&64&&Pt&&G.dynamicChildren?(T(G.dynamicChildren,Pt,Ae,Oe,Ve,st,$e),(ue.key!=null||Oe&&ue===Oe.subTree)&&ax(G,ue,!0)):it(G,ue,Ae,Ut,Oe,Ve,st,$e,Ne)},Ye=(G,ue,Ae,je,Oe,Ve,st,$e,Ne)=>{ue.slotScopeIds=$e,G==null?ue.shapeFlag&512?Oe.ctx.activate(ue,Ae,je,st,Ne):Me(ue,Ae,je,Oe,Ve,st,Ne):Ce(G,ue,Ne)},Me=(G,ue,Ae,je,Oe,Ve,st)=>{const $e=G.component=e3(G,je,Oe);if(qA(G)&&($e.ctx.renderer=Ke),t3($e,!1,st),$e.asyncDep){if(Oe&&Oe.registerDep($e,tt,st),!G.el){const Ne=$e.subTree=jr(gc);ye(null,Ne,ue,Ae)}}else tt($e,G,ue,Ae,Oe,Ve,st)},Ce=(G,ue,Ae)=>{const je=ue.component=G.component;if(GP(G,ue,Ae))if(je.asyncDep&&!je.asyncResolved){ct(je,ue,Ae);return}else je.next=ue,je.update();else ue.el=G.el,je.vnode=ue},tt=(G,ue,Ae,je,Oe,Ve,st)=>{const $e=()=>{if(G.isMounted){let{next:dt,bu:Pt,u:Gt,parent:Qt,vnode:_t}=G;{const ki=ux(G);if(ki){dt&&(dt.el=_t.el,ct(G,dt,st)),ki.asyncDep.then(()=>{G.isUnmounted||$e()});return}}let yn=dt,_i;oa(G,!1),dt?(dt.el=_t.el,ct(G,dt,st)):dt=_t,Pt&&Xg(Pt),(_i=dt.props&&dt.props.onVnodeBeforeUpdate)&&us(_i,Qt,dt,_t),oa(G,!0);const fi=bw(G),Hi=G.subTree;G.subTree=fi,z(Hi,fi,j(Hi.el),ce(Hi),G,Oe,Ve),dt.el=fi.el,yn===null&&zP(G,fi.el),Gt&&Ir(Gt,Oe),(_i=dt.props&&dt.props.onVnodeUpdated)&&Ir(()=>us(_i,Qt,dt,_t),Oe)}else{let dt;const{el:Pt,props:Gt}=ue,{bm:Qt,m:_t,parent:yn,root:_i,type:fi}=G,Hi=ac(ue);oa(G,!1),Qt&&Xg(Qt),!Hi&&(dt=Gt&&Gt.onVnodeBeforeMount)&&us(dt,yn,ue),oa(G,!0);{_i.ce&&_i.ce._injectChildStyle(fi);const ki=G.subTree=bw(G);z(null,ki,Ae,je,G,Oe,Ve),ue.el=ki.el}if(_t&&Ir(_t,Oe),!Hi&&(dt=Gt&&Gt.onVnodeMounted)){const ki=ue;Ir(()=>us(dt,yn,ki),Oe)}(ue.shapeFlag&256||yn&&ac(yn.vnode)&&yn.vnode.shapeFlag&256)&&G.a&&Ir(G.a,Oe),G.isMounted=!0,ue=Ae=je=null}};G.scope.on();const Ne=G.effect=new SA($e);G.scope.off();const We=G.update=Ne.run.bind(Ne),Ut=G.job=Ne.runIfDirty.bind(Ne);Ut.i=G,Ut.id=G.uid,Ne.scheduler=()=>Ny(Ut),oa(G,!0),We()},ct=(G,ue,Ae)=>{ue.component=G;const je=G.vnode.props;G.vnode=ue,G.next=null,MP(G,ue.props,je,Ae),bP(G,ue.children,Ae),xo(),Aw(G),Io()},it=(G,ue,Ae,je,Oe,Ve,st,$e,Ne=!1)=>{const We=G&&G.children,Ut=G?G.shapeFlag:0,dt=ue.children,{patchFlag:Pt,shapeFlag:Gt}=ue;if(Pt>0){if(Pt&128){Z(We,dt,Ae,je,Oe,Ve,st,$e,Ne);return}else if(Pt&256){de(We,dt,Ae,je,Oe,Ve,st,$e,Ne);return}}Gt&8?(Ut&16&&Ct(We,Oe,Ve),dt!==We&&N(Ae,dt)):Ut&16?Gt&16?Z(We,dt,Ae,je,Oe,Ve,st,$e,Ne):Ct(We,Oe,Ve,!0):(Ut&8&&N(Ae,""),Gt&16&&J(dt,Ae,je,Oe,Ve,st,$e,Ne))},de=(G,ue,Ae,je,Oe,Ve,st,$e,Ne)=>{G=G||Su,ue=ue||Su;const We=G.length,Ut=ue.length,dt=Math.min(We,Ut);let Pt;for(Pt=0;Pt<dt;Pt++){const Gt=ue[Pt]=Ne?So(ue[Pt]):cs(ue[Pt]);z(G[Pt],Gt,Ae,null,Oe,Ve,st,$e,Ne)}We>Ut?Ct(G,Oe,Ve,!0,!1,dt):J(ue,Ae,je,Oe,Ve,st,$e,Ne,dt)},Z=(G,ue,Ae,je,Oe,Ve,st,$e,Ne)=>{let We=0;const Ut=ue.length;let dt=G.length-1,Pt=Ut-1;for(;We<=dt&&We<=Pt;){const Gt=G[We],Qt=ue[We]=Ne?So(ue[We]):cs(ue[We]);if(Jl(Gt,Qt))z(Gt,Qt,Ae,null,Oe,Ve,st,$e,Ne);else break;We++}for(;We<=dt&&We<=Pt;){const Gt=G[dt],Qt=ue[Pt]=Ne?So(ue[Pt]):cs(ue[Pt]);if(Jl(Gt,Qt))z(Gt,Qt,Ae,null,Oe,Ve,st,$e,Ne);else break;dt--,Pt--}if(We>dt){if(We<=Pt){const Gt=Pt+1,Qt=Gt<Ut?ue[Gt].el:je;for(;We<=Pt;)z(null,ue[We]=Ne?So(ue[We]):cs(ue[We]),Ae,Qt,Oe,Ve,st,$e,Ne),We++}}else if(We>Pt)for(;We<=dt;)Fe(G[We],Oe,Ve,!0),We++;else{const Gt=We,Qt=We,_t=new Map;for(We=Qt;We<=Pt;We++){const Si=ue[We]=Ne?So(ue[We]):cs(ue[We]);Si.key!=null&&_t.set(Si.key,We)}let yn,_i=0;const fi=Pt-Qt+1;let Hi=!1,ki=0;const Vt=new Array(fi);for(We=0;We<fi;We++)Vt[We]=0;for(We=Gt;We<=dt;We++){const Si=G[We];if(_i>=fi){Fe(Si,Oe,Ve,!0);continue}let Gi;if(Si.key!=null)Gi=_t.get(Si.key);else for(yn=Qt;yn<=Pt;yn++)if(Vt[yn-Qt]===0&&Jl(Si,ue[yn])){Gi=yn;break}Gi===void 0?Fe(Si,Oe,Ve,!0):(Vt[Gi-Qt]=We+1,Gi>=ki?ki=Gi:Hi=!0,z(Si,ue[Gi],Ae,null,Oe,Ve,st,$e,Ne),_i++)}const fa=Hi?OP(Vt):Su;for(yn=fa.length-1,We=fi-1;We>=0;We--){const Si=Qt+We,Gi=ue[Si],ha=Si+1<Ut?ue[Si+1].el:je;Vt[We]===0?z(null,Gi,Ae,ha,Oe,Ve,st,$e,Ne):Hi&&(yn<0||We!==fa[yn]?we(Gi,Ae,ha,2):yn--)}}},we=(G,ue,Ae,je,Oe=null)=>{const{el:Ve,type:st,transition:$e,children:Ne,shapeFlag:We}=G;if(We&6){we(G.component.subTree,ue,Ae,je);return}if(We&128){G.suspense.move(ue,Ae,je);return}if(We&64){st.move(G,ue,Ae,Ke);return}if(st===Xr){I(Ve,ue,Ae);for(let dt=0;dt<Ne.length;dt++)we(Ne[dt],ue,Ae,je);I(G.anchor,ue,Ae);return}if(st===ey){Le(G,ue,Ae);return}if(je!==2&&We&1&&$e)if(je===0)$e.beforeEnter(Ve),I(Ve,ue,Ae),Ir(()=>$e.enter(Ve),Oe);else{const{leave:dt,delayLeave:Pt,afterLeave:Gt}=$e,Qt=()=>I(Ve,ue,Ae),_t=()=>{dt(Ve,()=>{Qt(),Gt&&Gt()})};Pt?Pt(Ve,Qt,_t):_t()}else I(Ve,ue,Ae)},Fe=(G,ue,Ae,je=!1,Oe=!1)=>{const{type:Ve,props:st,ref:$e,children:Ne,dynamicChildren:We,shapeFlag:Ut,patchFlag:dt,dirs:Pt,cacheIndex:Gt}=G;if(dt===-2&&(Oe=!1),$e!=null&&ih($e,null,Ae,G,!0),Gt!=null&&(ue.renderCache[Gt]=void 0),Ut&256){ue.ctx.deactivate(G);return}const Qt=Ut&1&&Pt,_t=!ac(G);let yn;if(_t&&(yn=st&&st.onVnodeBeforeUnmount)&&us(yn,ue,G),Ut&6)zt(G.component,Ae,je);else{if(Ut&128){G.suspense.unmount(Ae,je);return}Qt&&sa(G,null,ue,"beforeUnmount"),Ut&64?G.type.remove(G,ue,Ae,Ke,je):We&&!We.hasOnce&&(Ve!==Xr||dt>0&&dt&64)?Ct(We,ue,Ae,!1,!0):(Ve===Xr&&dt&384||!Oe&&Ut&16)&&Ct(Ne,ue,Ae),je&&Et(G)}(_t&&(yn=st&&st.onVnodeUnmounted)||Qt)&&Ir(()=>{yn&&us(yn,ue,G),Qt&&sa(G,null,ue,"unmounted")},Ae)},Et=G=>{const{type:ue,el:Ae,anchor:je,transition:Oe}=G;if(ue===Xr){X(Ae,je);return}if(ue===ey){oe(G);return}const Ve=()=>{_(Ae),Oe&&!Oe.persisted&&Oe.afterLeave&&Oe.afterLeave()};if(G.shapeFlag&1&&Oe&&!Oe.persisted){const{leave:st,delayLeave:$e}=Oe,Ne=()=>st(Ae,Ve);$e?$e(G.el,Ve,Ne):Ne()}else Ve()},X=(G,ue)=>{let Ae;for(;G!==ue;)Ae=V(G),_(G),G=Ae;_(ue)},zt=(G,ue,Ae)=>{const{bum:je,scope:Oe,job:Ve,subTree:st,um:$e,m:Ne,a:We}=G;kw(Ne),kw(We),je&&Xg(je),Oe.stop(),Ve&&(Ve.flags|=8,Fe(st,G,ue,Ae)),$e&&Ir($e,ue),Ir(()=>{G.isUnmounted=!0},ue),ue&&ue.pendingBranch&&!ue.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===ue.pendingId&&(ue.deps--,ue.deps===0&&ue.resolve())},Ct=(G,ue,Ae,je=!1,Oe=!1,Ve=0)=>{for(let st=Ve;st<G.length;st++)Fe(G[st],ue,Ae,je,Oe)},ce=G=>{if(G.shapeFlag&6)return ce(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const ue=V(G.anchor||G.el),Ae=ue&&ue[rP];return Ae?V(Ae):ue};let ke=!1;const Pe=(G,ue,Ae)=>{G==null?ue._vnode&&Fe(ue._vnode,null,null,!0):z(ue._vnode||null,G,ue,null,null,null,Ae),ue._vnode=G,ke||(ke=!0,Aw(),VA(),ke=!1)},Ke={p:z,um:Fe,m:we,r:Et,mt:Me,mc:J,pc:it,pbc:T,n:ce,o:l};return{render:Pe,hydrate:void 0,createApp:xP(Pe)}}function Zg({type:l,props:f},S){return S==="svg"&&l==="foreignObject"||S==="mathml"&&l==="annotation-xml"&&f&&f.encoding&&f.encoding.includes("html")?void 0:S}function oa({effect:l,job:f},S){S?(l.flags|=32,f.flags|=4):(l.flags&=-33,f.flags&=-5)}function PP(l,f){return(!l||l&&!l.pendingBranch)&&f&&!f.persisted}function ax(l,f,S=!1){const I=l.children,_=f.children;if(Zt(I)&&Zt(_))for(let k=0;k<I.length;k++){const D=I[k];let d=_[k];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=_[k]=So(_[k]),d.el=D.el),!S&&d.patchFlag!==-2&&ax(D,d)),d.type===mh&&(d.el=D.el)}}function OP(l){const f=l.slice(),S=[0];let I,_,k,D,d;const L=l.length;for(I=0;I<L;I++){const B=l[I];if(B!==0){if(_=S[S.length-1],l[_]<B){f[I]=_,S.push(I);continue}for(k=0,D=S.length-1;k<D;)d=k+D>>1,l[S[d]]<B?k=d+1:D=d;B<l[S[k]]&&(k>0&&(f[I]=S[k-1]),S[k]=I)}}for(k=S.length,D=S[k-1];k-- >0;)S[k]=D,D=f[D];return S}function ux(l){const f=l.subTree.component;if(f)return f.asyncDep&&!f.asyncResolved?f:ux(f)}function kw(l){if(l)for(let f=0;f<l.length;f++)l[f].flags|=8}const NP=Symbol.for("v-scx"),UP=()=>qs(NP);function Qf(l,f,S){return lx(l,f,S)}function lx(l,f,S=Bn){const{immediate:I,deep:_,flush:k,once:D}=S,d=Vi({},S),L=f&&I||!f&&k!=="post";let B;if(vc){if(k==="sync"){const K=UP();B=K.__watcherHandles||(K.__watcherHandles=[])}else if(!L){const K=()=>{};return K.stop=fs,K.resume=fs,K.pause=fs,K}}const N=ir;d.call=(K,v,z)=>hs(K,N,v,z);let j=!1;k==="post"?d.scheduler=K=>{Ir(K,N&&N.suspense)}:k!=="sync"&&(j=!0,d.scheduler=(K,v)=>{v?K():Ny(K)}),d.augmentJob=K=>{f&&(K.flags|=4),j&&(K.flags|=2,N&&(K.id=N.uid,K.i=N))};const V=ZL(l,f,d);return vc&&(B?B.push(V):L&&V()),V}function BP(l,f,S){const I=this.proxy,_=vi(l)?l.includes(".")?cx(I,l):()=>I[l]:l.bind(I,I);let k;tn(f)?k=f:(k=f.handler,S=f);const D=Ec(this),d=lx(_,k.bind(I),S);return D(),d}function cx(l,f){const S=f.split(".");return()=>{let I=l;for(let _=0;_<S.length&&I;_++)I=I[S[_]];return I}}const jP=(l,f)=>f==="modelValue"||f==="model-value"?l.modelModifiers:l[`${f}Modifiers`]||l[`${Ao(f)}Modifiers`]||l[`${da(f)}Modifiers`];function FP(l,f,...S){if(l.isUnmounted)return;const I=l.vnode.props||Bn;let _=S;const k=f.startsWith("update:"),D=k&&jP(I,f.slice(7));D&&(D.trim&&(_=S.map(N=>vi(N)?N.trim():N)),D.number&&(_=S.map(_L)));let d,L=I[d=Wg(f)]||I[d=Wg(Ao(f))];!L&&k&&(L=I[d=Wg(da(f))]),L&&hs(L,l,6,_);const B=I[d+"Once"];if(B){if(!l.emitted)l.emitted={};else if(l.emitted[d])return;l.emitted[d]=!0,hs(B,l,6,_)}}function dx(l,f,S=!1){const I=f.emitsCache,_=I.get(l);if(_!==void 0)return _;const k=l.emits;let D={},d=!1;if(!tn(l)){const L=B=>{const N=dx(B,f,!0);N&&(d=!0,Vi(D,N))};!S&&f.mixins.length&&f.mixins.forEach(L),l.extends&&L(l.extends),l.mixins&&l.mixins.forEach(L)}return!k&&!d?(ei(l)&&I.set(l,null),null):(Zt(k)?k.forEach(L=>D[L]=null):Vi(D,k),ei(l)&&I.set(l,D),D)}function ph(l,f){return!l||!ah(f)?!1:(f=f.slice(2).replace(/Once$/,""),bn(l,f[0].toLowerCase()+f.slice(1))||bn(l,da(f))||bn(l,f))}function bw(l){const{type:f,vnode:S,proxy:I,withProxy:_,propsOptions:[k],slots:D,attrs:d,emit:L,render:B,renderCache:N,props:j,data:V,setupState:K,ctx:v,inheritAttrs:z}=l,Te=nh(l);let ye,Se;try{if(S.shapeFlag&4){const oe=_||I,Be=oe;ye=cs(B.call(Be,oe,N,j,K,V,v)),Se=d}else{const oe=f;ye=cs(oe.length>1?oe(j,{attrs:d,slots:D,emit:L}):oe(j,null)),Se=f.props?d:VP(d)}}catch(oe){lc.length=0,fh(oe,l,1),ye=jr(gc)}let Le=ye;if(Se&&z!==!1){const oe=Object.keys(Se),{shapeFlag:Be}=Le;oe.length&&Be&7&&(k&&oe.some(wy)&&(Se=HP(Se,k)),Le=Au(Le,Se,!1,!0))}return S.dirs&&(Le=Au(Le,null,!1,!0),Le.dirs=Le.dirs?Le.dirs.concat(S.dirs):S.dirs),S.transition&&Uy(Le,S.transition),ye=Le,nh(Te),ye}const VP=l=>{let f;for(const S in l)(S==="class"||S==="style"||ah(S))&&((f||(f={}))[S]=l[S]);return f},HP=(l,f)=>{const S={};for(const I in l)(!wy(I)||!(I.slice(9)in f))&&(S[I]=l[I]);return S};function GP(l,f,S){const{props:I,children:_,component:k}=l,{props:D,children:d,patchFlag:L}=f,B=k.emitsOptions;if(f.dirs||f.transition)return!0;if(S&&L>=0){if(L&1024)return!0;if(L&16)return I?Dw(I,D,B):!!D;if(L&8){const N=f.dynamicProps;for(let j=0;j<N.length;j++){const V=N[j];if(D[V]!==I[V]&&!ph(B,V))return!0}}}else return(_||d)&&(!d||!d.$stable)?!0:I===D?!1:I?D?Dw(I,D,B):!0:!!D;return!1}function Dw(l,f,S){const I=Object.keys(f);if(I.length!==Object.keys(l).length)return!0;for(let _=0;_<I.length;_++){const k=I[_];if(f[k]!==l[k]&&!ph(S,k))return!0}return!1}function zP({vnode:l,parent:f},S){for(;f;){const I=f.subTree;if(I.suspense&&I.suspense.activeBranch===l&&(I.el=l.el),I===l)(l=f.vnode).el=S,f=f.parent;else break}}const fx=l=>l.__isSuspense;function KP(l,f){f&&f.pendingBranch?Zt(l)?f.effects.push(...l):f.effects.push(l):nP(l)}const Xr=Symbol.for("v-fgt"),mh=Symbol.for("v-txt"),gc=Symbol.for("v-cmt"),ey=Symbol.for("v-stc"),lc=[];let Cr=null;function Fy(l=!1){lc.push(Cr=l?null:[])}function qP(){lc.pop(),Cr=lc[lc.length-1]||null}let yc=1;function Lw(l,f=!1){yc+=l,l<0&&Cr&&f&&(Cr.hasOnce=!0)}function hx(l){return l.dynamicChildren=yc>0?Cr||Su:null,qP(),yc>0&&Cr&&Cr.push(l),l}function px(l,f,S,I,_,k){return hx(wu(l,f,S,I,_,k,!0))}function WP(l,f,S,I,_){return hx(jr(l,f,S,I,_,!0))}function sh(l){return l?l.__v_isVNode===!0:!1}function Jl(l,f){return l.type===f.type&&l.key===f.key}const mx=({key:l})=>l??null,Jf=({ref:l,ref_key:f,ref_for:S})=>(typeof l=="number"&&(l=""+l),l!=null?vi(l)||Fi(l)||tn(l)?{i:ds,r:l,k:f,f:!!S}:l:null);function wu(l,f=null,S=null,I=0,_=null,k=l===Xr?0:1,D=!1,d=!1){const L={__v_isVNode:!0,__v_skip:!0,type:l,props:f,key:f&&mx(f),ref:f&&Jf(f),scopeId:GA,slotScopeIds:null,children:S,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:k,patchFlag:I,dynamicProps:_,dynamicChildren:null,appContext:null,ctx:ds};return d?(Vy(L,S),k&128&&l.normalize(L)):S&&(L.shapeFlag|=vi(S)?8:16),yc>0&&!D&&Cr&&(L.patchFlag>0||k&6)&&L.patchFlag!==32&&Cr.push(L),L}const jr=XP;function XP(l,f=null,S=null,I=0,_=null,k=!1){if((!l||l===yP)&&(l=gc),sh(l)){const d=Au(l,f,!0);return S&&Vy(d,S),yc>0&&!k&&Cr&&(d.shapeFlag&6?Cr[Cr.indexOf(l)]=d:Cr.push(d)),d.patchFlag=-2,d}if(s3(l)&&(l=l.__vccOpts),f){f=YP(f);let{class:d,style:L}=f;d&&!vi(d)&&(f.class=My(d)),ei(L)&&(Oy(L)&&!Zt(L)&&(L=Vi({},L)),f.style=Iy(L))}const D=vi(l)?1:fx(l)?128:sP(l)?64:ei(l)?4:tn(l)?2:0;return wu(l,f,S,I,_,D,k,!0)}function YP(l){return l?Oy(l)||ex(l)?Vi({},l):l:null}function Au(l,f,S=!1,I=!1){const{props:_,ref:k,patchFlag:D,children:d,transition:L}=l,B=f?QP(_||{},f):_,N={__v_isVNode:!0,__v_skip:!0,type:l.type,props:B,key:B&&mx(B),ref:f&&f.ref?S&&k?Zt(k)?k.concat(Jf(f)):[k,Jf(f)]:Jf(f):k,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:d,target:l.target,targetStart:l.targetStart,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:f&&l.type!==Xr?D===-1?16:D|16:D,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:L,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Au(l.ssContent),ssFallback:l.ssFallback&&Au(l.ssFallback),el:l.el,anchor:l.anchor,ctx:l.ctx,ce:l.ce};return L&&I&&Uy(N,L.clone(N)),N}function $P(l=" ",f=0){return jr(mh,null,l,f)}function cs(l){return l==null||typeof l=="boolean"?jr(gc):Zt(l)?jr(Xr,null,l.slice()):sh(l)?So(l):jr(mh,null,String(l))}function So(l){return l.el===null&&l.patchFlag!==-1||l.memo?l:Au(l)}function Vy(l,f){let S=0;const{shapeFlag:I}=l;if(f==null)f=null;else if(Zt(f))S=16;else if(typeof f=="object")if(I&65){const _=f.default;_&&(_._c&&(_._d=!1),Vy(l,_()),_._c&&(_._d=!0));return}else{S=32;const _=f._;!_&&!ex(f)?f._ctx=ds:_===3&&ds&&(ds.slots._===1?f._=1:(f._=2,l.patchFlag|=1024))}else tn(f)?(f={default:f,_ctx:ds},S=32):(f=String(f),I&64?(S=16,f=[$P(f)]):S=8);l.children=f,l.shapeFlag|=S}function QP(...l){const f={};for(let S=0;S<l.length;S++){const I=l[S];for(const _ in I)if(_==="class")f.class!==I.class&&(f.class=My([f.class,I.class]));else if(_==="style")f.style=Iy([f.style,I.style]);else if(ah(_)){const k=f[_],D=I[_];D&&k!==D&&!(Zt(k)&&k.includes(D))&&(f[_]=k?[].concat(k,D):D)}else _!==""&&(f[_]=I[_])}return f}function us(l,f,S,I=null){hs(l,f,7,[S,I])}const JP=QA();let ZP=0;function e3(l,f,S){const I=l.type,_=(f?f.appContext:l.appContext)||JP,k={uid:ZP++,vnode:l,type:I,parent:f,appContext:_,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new IL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:f?f.provides:Object.create(_.provides),ids:f?f.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nx(I,_),emitsOptions:dx(I,_),emit:null,emitted:null,propsDefaults:Bn,inheritAttrs:I.inheritAttrs,ctx:Bn,data:Bn,props:Bn,attrs:Bn,slots:Bn,refs:Bn,setupState:Bn,setupContext:null,suspense:S,suspenseId:S?S.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return k.ctx={_:k},k.root=f?f.root:k,k.emit=FP.bind(null,k),l.ce&&l.ce(k),k}let ir=null,oh,yy;{const l=ch(),f=(S,I)=>{let _;return(_=l[S])||(_=l[S]=[]),_.push(I),k=>{_.length>1?_.forEach(D=>D(k)):_[0](k)}};oh=f("__VUE_INSTANCE_SETTERS__",S=>ir=S),yy=f("__VUE_SSR_SETTERS__",S=>vc=S)}const Ec=l=>{const f=ir;return oh(l),l.scope.on(),()=>{l.scope.off(),oh(f)}},Pw=()=>{ir&&ir.scope.off(),oh(null)};function gx(l){return l.vnode.shapeFlag&4}let vc=!1;function t3(l,f=!1,S=!1){f&&yy(f);const{props:I,children:_}=l.vnode,k=gx(l);IP(l,I,k,f),kP(l,_,S);const D=k?n3(l,f):void 0;return f&&yy(!1),D}function n3(l,f){const S=l.type;l.accessCache=Object.create(null),l.proxy=new Proxy(l.ctx,vP);const{setup:I}=S;if(I){xo();const _=l.setupContext=I.length>1?r3(l):null,k=Ec(l),D=Tc(I,l,0,[l.props,_]),d=gA(D);if(Io(),k(),(d||l.sp)&&!ac(l)&&KA(l),d){if(D.then(Pw,Pw),f)return D.then(L=>{Ow(l,L)}).catch(L=>{fh(L,l,0)});l.asyncDep=D}else Ow(l,D)}else yx(l)}function Ow(l,f,S){tn(f)?l.type.__ssrInlineRender?l.ssrRender=f:l.render=f:ei(f)&&(l.setupState=UA(f)),yx(l)}function yx(l,f,S){const I=l.type;l.render||(l.render=I.render||fs);{const _=Ec(l);xo();try{_P(l)}finally{Io(),_()}}}const i3={get(l,f){return ji(l,"get",""),l[f]}};function r3(l){const f=S=>{l.exposed=S||{}};return{attrs:new Proxy(l.attrs,i3),slots:l.slots,emit:l.emit,expose:f}}function Hy(l){return l.exposed?l.exposeProxy||(l.exposeProxy=new Proxy(UA(qL(l.exposed)),{get(f,S){if(S in f)return f[S];if(S in uc)return uc[S](l)},has(f,S){return S in f||S in uc}})):l.proxy}function s3(l){return tn(l)&&"__vccOpts"in l}const Yr=(l,f)=>QL(l,f,vc);function Gy(l,f,S){const I=arguments.length;return I===2?ei(f)&&!Zt(f)?sh(f)?jr(l,null,[f]):jr(l,f):jr(l,null,f):(I>3?S=Array.prototype.slice.call(arguments,2):I===3&&sh(S)&&(S=[S]),jr(l,f,S))}const o3="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vy;const Nw=typeof window<"u"&&window.trustedTypes;if(Nw)try{vy=Nw.createPolicy("vue",{createHTML:l=>l})}catch{}const vx=vy?l=>vy.createHTML(l):l=>l,a3="http://www.w3.org/2000/svg",u3="http://www.w3.org/1998/Math/MathML",zs=typeof document<"u"?document:null,Uw=zs&&zs.createElement("template"),l3={insert:(l,f,S)=>{f.insertBefore(l,S||null)},remove:l=>{const f=l.parentNode;f&&f.removeChild(l)},createElement:(l,f,S,I)=>{const _=f==="svg"?zs.createElementNS(a3,l):f==="mathml"?zs.createElementNS(u3,l):S?zs.createElement(l,{is:S}):zs.createElement(l);return l==="select"&&I&&I.multiple!=null&&_.setAttribute("multiple",I.multiple),_},createText:l=>zs.createTextNode(l),createComment:l=>zs.createComment(l),setText:(l,f)=>{l.nodeValue=f},setElementText:(l,f)=>{l.textContent=f},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>zs.querySelector(l),setScopeId(l,f){l.setAttribute(f,"")},insertStaticContent(l,f,S,I,_,k){const D=S?S.previousSibling:f.lastChild;if(_&&(_===k||_.nextSibling))for(;f.insertBefore(_.cloneNode(!0),S),!(_===k||!(_=_.nextSibling)););else{Uw.innerHTML=vx(I==="svg"?`<svg>${l}</svg>`:I==="mathml"?`<math>${l}</math>`:l);const d=Uw.content;if(I==="svg"||I==="mathml"){const L=d.firstChild;for(;L.firstChild;)d.appendChild(L.firstChild);d.removeChild(L)}f.insertBefore(d,S)}return[D?D.nextSibling:f.firstChild,S?S.previousSibling:f.lastChild]}},c3=Symbol("_vtc");function d3(l,f,S){const I=l[c3];I&&(f=(f?[f,...I]:[...I]).join(" ")),f==null?l.removeAttribute("class"):S?l.setAttribute("class",f):l.className=f}const Bw=Symbol("_vod"),f3=Symbol("_vsh"),h3=Symbol(""),p3=/(^|;)\s*display\s*:/;function m3(l,f,S){const I=l.style,_=vi(S);let k=!1;if(S&&!_){if(f)if(vi(f))for(const D of f.split(";")){const d=D.slice(0,D.indexOf(":")).trim();S[d]==null&&Zf(I,d,"")}else for(const D in f)S[D]==null&&Zf(I,D,"");for(const D in S)D==="display"&&(k=!0),Zf(I,D,S[D])}else if(_){if(f!==S){const D=I[h3];D&&(S+=";"+D),I.cssText=S,k=p3.test(S)}}else f&&l.removeAttribute("style");Bw in l&&(l[Bw]=k?I.display:"",l[f3]&&(I.display="none"))}const jw=/\s*!important$/;function Zf(l,f,S){if(Zt(S))S.forEach(I=>Zf(l,f,I));else if(S==null&&(S=""),f.startsWith("--"))l.setProperty(f,S);else{const I=g3(l,f);jw.test(S)?l.setProperty(da(I),S.replace(jw,""),"important"):l[I]=S}}const Fw=["Webkit","Moz","ms"],ty={};function g3(l,f){const S=ty[f];if(S)return S;let I=Ao(f);if(I!=="filter"&&I in l)return ty[f]=I;I=yA(I);for(let _=0;_<Fw.length;_++){const k=Fw[_]+I;if(k in l)return ty[f]=k}return f}const Vw="http://www.w3.org/1999/xlink";function Hw(l,f,S,I,_,k=xL(f)){I&&f.startsWith("xlink:")?S==null?l.removeAttributeNS(Vw,f.slice(6,f.length)):l.setAttributeNS(Vw,f,S):S==null||k&&!_A(S)?l.removeAttribute(f):l.setAttribute(f,k?"":Mu(S)?String(S):S)}function Gw(l,f,S,I,_){if(f==="innerHTML"||f==="textContent"){S!=null&&(l[f]=f==="innerHTML"?vx(S):S);return}const k=l.tagName;if(f==="value"&&k!=="PROGRESS"&&!k.includes("-")){const d=k==="OPTION"?l.getAttribute("value")||"":l.value,L=S==null?l.type==="checkbox"?"on":"":String(S);(d!==L||!("_value"in l))&&(l.value=L),S==null&&l.removeAttribute(f),l._value=S;return}let D=!1;if(S===""||S==null){const d=typeof l[f];d==="boolean"?S=_A(S):S==null&&d==="string"?(S="",D=!0):d==="number"&&(S=0,D=!0)}try{l[f]=S}catch{}D&&l.removeAttribute(_||f)}function y3(l,f,S,I){l.addEventListener(f,S,I)}function v3(l,f,S,I){l.removeEventListener(f,S,I)}const zw=Symbol("_vei");function _3(l,f,S,I,_=null){const k=l[zw]||(l[zw]={}),D=k[f];if(I&&D)D.value=I;else{const[d,L]=S3(f);if(I){const B=k[f]=w3(I,_);y3(l,d,B,L)}else D&&(v3(l,d,D,L),k[f]=void 0)}}const Kw=/(?:Once|Passive|Capture)$/;function S3(l){let f;if(Kw.test(l)){f={};let I;for(;I=l.match(Kw);)l=l.slice(0,l.length-I[0].length),f[I[0].toLowerCase()]=!0}return[l[2]===":"?l.slice(3):da(l.slice(2)),f]}let ny=0;const T3=Promise.resolve(),E3=()=>ny||(T3.then(()=>ny=0),ny=Date.now());function w3(l,f){const S=I=>{if(!I._vts)I._vts=Date.now();else if(I._vts<=S.attached)return;hs(A3(I,S.value),f,5,[I])};return S.value=l,S.attached=E3(),S}function A3(l,f){if(Zt(f)){const S=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{S.call(l),l._stopped=!0},f.map(I=>_=>!_._stopped&&I&&I(_))}else return f}const qw=l=>l.charCodeAt(0)===111&&l.charCodeAt(1)===110&&l.charCodeAt(2)>96&&l.charCodeAt(2)<123,x3=(l,f,S,I,_,k)=>{const D=_==="svg";f==="class"?d3(l,I,D):f==="style"?m3(l,S,I):ah(f)?wy(f)||_3(l,f,S,I,k):(f[0]==="."?(f=f.slice(1),!0):f[0]==="^"?(f=f.slice(1),!1):I3(l,f,I,D))?(Gw(l,f,I),!l.tagName.includes("-")&&(f==="value"||f==="checked"||f==="selected")&&Hw(l,f,I,D,k,f!=="value")):l._isVueCE&&(/[A-Z]/.test(f)||!vi(I))?Gw(l,Ao(f),I,k,f):(f==="true-value"?l._trueValue=I:f==="false-value"&&(l._falseValue=I),Hw(l,f,I,D))};function I3(l,f,S,I){if(I)return!!(f==="innerHTML"||f==="textContent"||f in l&&qw(f)&&tn(S));if(f==="spellcheck"||f==="draggable"||f==="translate"||f==="form"||f==="list"&&l.tagName==="INPUT"||f==="type"&&l.tagName==="TEXTAREA")return!1;if(f==="width"||f==="height"){const _=l.tagName;if(_==="IMG"||_==="VIDEO"||_==="CANVAS"||_==="SOURCE")return!1}return qw(f)&&vi(S)?!1:f in l}const M3=Vi({patchProp:x3},l3);let Ww;function C3(){return Ww||(Ww=DP(M3))}const R3=(...l)=>{const f=C3().createApp(...l),{mount:S}=f;return f.mount=I=>{const _=b3(I);if(!_)return;const k=f._component;!tn(k)&&!k.render&&!k.template&&(k.template=_.innerHTML),_.nodeType===1&&(_.textContent="");const D=S(_,!1,k3(_));return _ instanceof Element&&(_.removeAttribute("v-cloak"),_.setAttribute("data-v-app","")),D},f};function k3(l){if(l instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&l instanceof MathMLElement)return"mathml"}function b3(l){return vi(l)?document.querySelector(l):l}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const vu=typeof document<"u";function _x(l){return typeof l=="object"||"displayName"in l||"props"in l||"__vccOpts"in l}function D3(l){return l.__esModule||l[Symbol.toStringTag]==="Module"||l.default&&_x(l.default)}const Rn=Object.assign;function iy(l,f){const S={};for(const I in f){const _=f[I];S[I]=Zr(_)?_.map(l):l(_)}return S}const cc=()=>{},Zr=Array.isArray,Sx=/#/g,L3=/&/g,P3=/\//g,O3=/=/g,N3=/\?/g,Tx=/\+/g,U3=/%5B/g,B3=/%5D/g,Ex=/%5E/g,j3=/%60/g,wx=/%7B/g,F3=/%7C/g,Ax=/%7D/g,V3=/%20/g;function zy(l){return encodeURI(""+l).replace(F3,"|").replace(U3,"[").replace(B3,"]")}function H3(l){return zy(l).replace(wx,"{").replace(Ax,"}").replace(Ex,"^")}function _y(l){return zy(l).replace(Tx,"%2B").replace(V3,"+").replace(Sx,"%23").replace(L3,"%26").replace(j3,"`").replace(wx,"{").replace(Ax,"}").replace(Ex,"^")}function G3(l){return _y(l).replace(O3,"%3D")}function z3(l){return zy(l).replace(Sx,"%23").replace(N3,"%3F")}function K3(l){return l==null?"":z3(l).replace(P3,"%2F")}function _c(l){try{return decodeURIComponent(""+l)}catch{}return""+l}const q3=/\/$/,W3=l=>l.replace(q3,"");function ry(l,f,S="/"){let I,_={},k="",D="";const d=f.indexOf("#");let L=f.indexOf("?");return d<L&&d>=0&&(L=-1),L>-1&&(I=f.slice(0,L),k=f.slice(L+1,d>-1?d:f.length),_=l(k)),d>-1&&(I=I||f.slice(0,d),D=f.slice(d,f.length)),I=Q3(I??f,S),{fullPath:I+(k&&"?")+k+D,path:I,query:_,hash:_c(D)}}function X3(l,f){const S=f.query?l(f.query):"";return f.path+(S&&"?")+S+(f.hash||"")}function Xw(l,f){return!f||!l.toLowerCase().startsWith(f.toLowerCase())?l:l.slice(f.length)||"/"}function Y3(l,f,S){const I=f.matched.length-1,_=S.matched.length-1;return I>-1&&I===_&&xu(f.matched[I],S.matched[_])&&xx(f.params,S.params)&&l(f.query)===l(S.query)&&f.hash===S.hash}function xu(l,f){return(l.aliasOf||l)===(f.aliasOf||f)}function xx(l,f){if(Object.keys(l).length!==Object.keys(f).length)return!1;for(const S in l)if(!$3(l[S],f[S]))return!1;return!0}function $3(l,f){return Zr(l)?Yw(l,f):Zr(f)?Yw(f,l):l===f}function Yw(l,f){return Zr(f)?l.length===f.length&&l.every((S,I)=>S===f[I]):l.length===1&&l[0]===f}function Q3(l,f){if(l.startsWith("/"))return l;if(!l)return f;const S=f.split("/"),I=l.split("/"),_=I[I.length-1];(_===".."||_===".")&&I.push("");let k=S.length-1,D,d;for(D=0;D<I.length;D++)if(d=I[D],d!==".")if(d==="..")k>1&&k--;else break;return S.slice(0,k).join("/")+"/"+I.slice(D).join("/")}const vo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Sc;(function(l){l.pop="pop",l.push="push"})(Sc||(Sc={}));var dc;(function(l){l.back="back",l.forward="forward",l.unknown=""})(dc||(dc={}));function J3(l){if(!l)if(vu){const f=document.querySelector("base");l=f&&f.getAttribute("href")||"/",l=l.replace(/^\w+:\/\/[^\/]+/,"")}else l="/";return l[0]!=="/"&&l[0]!=="#"&&(l="/"+l),W3(l)}const Z3=/^[^#]+#/;function e4(l,f){return l.replace(Z3,"#")+f}function t4(l,f){const S=document.documentElement.getBoundingClientRect(),I=l.getBoundingClientRect();return{behavior:f.behavior,left:I.left-S.left-(f.left||0),top:I.top-S.top-(f.top||0)}}const gh=()=>({left:window.scrollX,top:window.scrollY});function n4(l){let f;if("el"in l){const S=l.el,I=typeof S=="string"&&S.startsWith("#"),_=typeof S=="string"?I?document.getElementById(S.slice(1)):document.querySelector(S):S;if(!_)return;f=t4(_,l)}else f=l;"scrollBehavior"in document.documentElement.style?window.scrollTo(f):window.scrollTo(f.left!=null?f.left:window.scrollX,f.top!=null?f.top:window.scrollY)}function $w(l,f){return(history.state?history.state.position-f:-1)+l}const Sy=new Map;function i4(l,f){Sy.set(l,f)}function r4(l){const f=Sy.get(l);return Sy.delete(l),f}let s4=()=>location.protocol+"//"+location.host;function Ix(l,f){const{pathname:S,search:I,hash:_}=f,k=l.indexOf("#");if(k>-1){let d=_.includes(l.slice(k))?l.slice(k).length:1,L=_.slice(d);return L[0]!=="/"&&(L="/"+L),Xw(L,"")}return Xw(S,l)+I+_}function o4(l,f,S,I){let _=[],k=[],D=null;const d=({state:V})=>{const K=Ix(l,location),v=S.value,z=f.value;let Te=0;if(V){if(S.value=K,f.value=V,D&&D===v){D=null;return}Te=z?V.position-z.position:0}else I(K);_.forEach(ye=>{ye(S.value,v,{delta:Te,type:Sc.pop,direction:Te?Te>0?dc.forward:dc.back:dc.unknown})})};function L(){D=S.value}function B(V){_.push(V);const K=()=>{const v=_.indexOf(V);v>-1&&_.splice(v,1)};return k.push(K),K}function N(){const{history:V}=window;V.state&&V.replaceState(Rn({},V.state,{scroll:gh()}),"")}function j(){for(const V of k)V();k=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",N)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",N,{passive:!0}),{pauseListeners:L,listen:B,destroy:j}}function Qw(l,f,S,I=!1,_=!1){return{back:l,current:f,forward:S,replaced:I,position:window.history.length,scroll:_?gh():null}}function a4(l){const{history:f,location:S}=window,I={value:Ix(l,S)},_={value:f.state};_.value||k(I.value,{back:null,current:I.value,forward:null,position:f.length-1,replaced:!0,scroll:null},!0);function k(L,B,N){const j=l.indexOf("#"),V=j>-1?(S.host&&document.querySelector("base")?l:l.slice(j))+L:s4()+l+L;try{f[N?"replaceState":"pushState"](B,"",V),_.value=B}catch(K){console.error(K),S[N?"replace":"assign"](V)}}function D(L,B){const N=Rn({},f.state,Qw(_.value.back,L,_.value.forward,!0),B,{position:_.value.position});k(L,N,!0),I.value=L}function d(L,B){const N=Rn({},_.value,f.state,{forward:L,scroll:gh()});k(N.current,N,!0);const j=Rn({},Qw(I.value,L,null),{position:N.position+1},B);k(L,j,!1),I.value=L}return{location:I,state:_,push:d,replace:D}}function u4(l){l=J3(l);const f=a4(l),S=o4(l,f.state,f.location,f.replace);function I(k,D=!0){D||S.pauseListeners(),history.go(k)}const _=Rn({location:"",base:l,go:I,createHref:e4.bind(null,l)},f,S);return Object.defineProperty(_,"location",{enumerable:!0,get:()=>f.location.value}),Object.defineProperty(_,"state",{enumerable:!0,get:()=>f.state.value}),_}function l4(l){return typeof l=="string"||l&&typeof l=="object"}function Mx(l){return typeof l=="string"||typeof l=="symbol"}const Cx=Symbol("");var Jw;(function(l){l[l.aborted=4]="aborted",l[l.cancelled=8]="cancelled",l[l.duplicated=16]="duplicated"})(Jw||(Jw={}));function Iu(l,f){return Rn(new Error,{type:l,[Cx]:!0},f)}function Gs(l,f){return l instanceof Error&&Cx in l&&(f==null||!!(l.type&f))}const Zw="[^/]+?",c4={sensitive:!1,strict:!1,start:!0,end:!0},d4=/[.+*?^${}()[\]/\\]/g;function f4(l,f){const S=Rn({},c4,f),I=[];let _=S.start?"^":"";const k=[];for(const B of l){const N=B.length?[]:[90];S.strict&&!B.length&&(_+="/");for(let j=0;j<B.length;j++){const V=B[j];let K=40+(S.sensitive?.25:0);if(V.type===0)j||(_+="/"),_+=V.value.replace(d4,"\\$&"),K+=40;else if(V.type===1){const{value:v,repeatable:z,optional:Te,regexp:ye}=V;k.push({name:v,repeatable:z,optional:Te});const Se=ye||Zw;if(Se!==Zw){K+=10;try{new RegExp(`(${Se})`)}catch(oe){throw new Error(`Invalid custom RegExp for param "${v}" (${Se}): `+oe.message)}}let Le=z?`((?:${Se})(?:/(?:${Se}))*)`:`(${Se})`;j||(Le=Te&&B.length<2?`(?:/${Le})`:"/"+Le),Te&&(Le+="?"),_+=Le,K+=20,Te&&(K+=-8),z&&(K+=-20),Se===".*"&&(K+=-50)}N.push(K)}I.push(N)}if(S.strict&&S.end){const B=I.length-1;I[B][I[B].length-1]+=.7000000000000001}S.strict||(_+="/?"),S.end?_+="$":S.strict&&!_.endsWith("/")&&(_+="(?:/|$)");const D=new RegExp(_,S.sensitive?"":"i");function d(B){const N=B.match(D),j={};if(!N)return null;for(let V=1;V<N.length;V++){const K=N[V]||"",v=k[V-1];j[v.name]=K&&v.repeatable?K.split("/"):K}return j}function L(B){let N="",j=!1;for(const V of l){(!j||!N.endsWith("/"))&&(N+="/"),j=!1;for(const K of V)if(K.type===0)N+=K.value;else if(K.type===1){const{value:v,repeatable:z,optional:Te}=K,ye=v in B?B[v]:"";if(Zr(ye)&&!z)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const Se=Zr(ye)?ye.join("/"):ye;if(!Se)if(Te)V.length<2&&(N.endsWith("/")?N=N.slice(0,-1):j=!0);else throw new Error(`Missing required param "${v}"`);N+=Se}}return N||"/"}return{re:D,score:I,keys:k,parse:d,stringify:L}}function h4(l,f){let S=0;for(;S<l.length&&S<f.length;){const I=f[S]-l[S];if(I)return I;S++}return l.length<f.length?l.length===1&&l[0]===80?-1:1:l.length>f.length?f.length===1&&f[0]===80?1:-1:0}function Rx(l,f){let S=0;const I=l.score,_=f.score;for(;S<I.length&&S<_.length;){const k=h4(I[S],_[S]);if(k)return k;S++}if(Math.abs(_.length-I.length)===1){if(eA(I))return 1;if(eA(_))return-1}return _.length-I.length}function eA(l){const f=l[l.length-1];return l.length>0&&f[f.length-1]<0}const p4={type:0,value:""},m4=/[a-zA-Z0-9_]/;function g4(l){if(!l)return[[]];if(l==="/")return[[p4]];if(!l.startsWith("/"))throw new Error(`Invalid path "${l}"`);function f(K){throw new Error(`ERR (${S})/"${B}": ${K}`)}let S=0,I=S;const _=[];let k;function D(){k&&_.push(k),k=[]}let d=0,L,B="",N="";function j(){B&&(S===0?k.push({type:0,value:B}):S===1||S===2||S===3?(k.length>1&&(L==="*"||L==="+")&&f(`A repeatable param (${B}) must be alone in its segment. eg: '/:ids+.`),k.push({type:1,value:B,regexp:N,repeatable:L==="*"||L==="+",optional:L==="*"||L==="?"})):f("Invalid state to consume buffer"),B="")}function V(){B+=L}for(;d<l.length;){if(L=l[d++],L==="\\"&&S!==2){I=S,S=4;continue}switch(S){case 0:L==="/"?(B&&j(),D()):L===":"?(j(),S=1):V();break;case 4:V(),S=I;break;case 1:L==="("?S=2:m4.test(L)?V():(j(),S=0,L!=="*"&&L!=="?"&&L!=="+"&&d--);break;case 2:L===")"?N[N.length-1]=="\\"?N=N.slice(0,-1)+L:S=3:N+=L;break;case 3:j(),S=0,L!=="*"&&L!=="?"&&L!=="+"&&d--,N="";break;default:f("Unknown state");break}}return S===2&&f(`Unfinished custom RegExp for param "${B}"`),j(),D(),_}function y4(l,f,S){const I=f4(g4(l.path),S),_=Rn(I,{record:l,parent:f,children:[],alias:[]});return f&&!_.record.aliasOf==!f.record.aliasOf&&f.children.push(_),_}function v4(l,f){const S=[],I=new Map;f=rA({strict:!1,end:!0,sensitive:!1},f);function _(j){return I.get(j)}function k(j,V,K){const v=!K,z=nA(j);z.aliasOf=K&&K.record;const Te=rA(f,j),ye=[z];if("alias"in j){const oe=typeof j.alias=="string"?[j.alias]:j.alias;for(const Be of oe)ye.push(nA(Rn({},z,{components:K?K.record.components:z.components,path:Be,aliasOf:K?K.record:z})))}let Se,Le;for(const oe of ye){const{path:Be}=oe;if(V&&Be[0]!=="/"){const He=V.record.path,xe=He[He.length-1]==="/"?"":"/";oe.path=V.record.path+(Be&&xe+Be)}if(Se=y4(oe,V,Te),K?K.alias.push(Se):(Le=Le||Se,Le!==Se&&Le.alias.push(Se),v&&j.name&&!iA(Se)&&D(j.name)),kx(Se)&&L(Se),z.children){const He=z.children;for(let xe=0;xe<He.length;xe++)k(He[xe],Se,K&&K.children[xe])}K=K||Se}return Le?()=>{D(Le)}:cc}function D(j){if(Mx(j)){const V=I.get(j);V&&(I.delete(j),S.splice(S.indexOf(V),1),V.children.forEach(D),V.alias.forEach(D))}else{const V=S.indexOf(j);V>-1&&(S.splice(V,1),j.record.name&&I.delete(j.record.name),j.children.forEach(D),j.alias.forEach(D))}}function d(){return S}function L(j){const V=T4(j,S);S.splice(V,0,j),j.record.name&&!iA(j)&&I.set(j.record.name,j)}function B(j,V){let K,v={},z,Te;if("name"in j&&j.name){if(K=I.get(j.name),!K)throw Iu(1,{location:j});Te=K.record.name,v=Rn(tA(V.params,K.keys.filter(Le=>!Le.optional).concat(K.parent?K.parent.keys.filter(Le=>Le.optional):[]).map(Le=>Le.name)),j.params&&tA(j.params,K.keys.map(Le=>Le.name))),z=K.stringify(v)}else if(j.path!=null)z=j.path,K=S.find(Le=>Le.re.test(z)),K&&(v=K.parse(z),Te=K.record.name);else{if(K=V.name?I.get(V.name):S.find(Le=>Le.re.test(V.path)),!K)throw Iu(1,{location:j,currentLocation:V});Te=K.record.name,v=Rn({},V.params,j.params),z=K.stringify(v)}const ye=[];let Se=K;for(;Se;)ye.unshift(Se.record),Se=Se.parent;return{name:Te,path:z,params:v,matched:ye,meta:S4(ye)}}l.forEach(j=>k(j));function N(){S.length=0,I.clear()}return{addRoute:k,resolve:B,removeRoute:D,clearRoutes:N,getRoutes:d,getRecordMatcher:_}}function tA(l,f){const S={};for(const I of f)I in l&&(S[I]=l[I]);return S}function nA(l){const f={path:l.path,redirect:l.redirect,name:l.name,meta:l.meta||{},aliasOf:l.aliasOf,beforeEnter:l.beforeEnter,props:_4(l),children:l.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in l?l.components||null:l.component&&{default:l.component}};return Object.defineProperty(f,"mods",{value:{}}),f}function _4(l){const f={},S=l.props||!1;if("component"in l)f.default=S;else for(const I in l.components)f[I]=typeof S=="object"?S[I]:S;return f}function iA(l){for(;l;){if(l.record.aliasOf)return!0;l=l.parent}return!1}function S4(l){return l.reduce((f,S)=>Rn(f,S.meta),{})}function rA(l,f){const S={};for(const I in l)S[I]=I in f?f[I]:l[I];return S}function T4(l,f){let S=0,I=f.length;for(;S!==I;){const k=S+I>>1;Rx(l,f[k])<0?I=k:S=k+1}const _=E4(l);return _&&(I=f.lastIndexOf(_,I-1)),I}function E4(l){let f=l;for(;f=f.parent;)if(kx(f)&&Rx(l,f)===0)return f}function kx({record:l}){return!!(l.name||l.components&&Object.keys(l.components).length||l.redirect)}function w4(l){const f={};if(l===""||l==="?")return f;const I=(l[0]==="?"?l.slice(1):l).split("&");for(let _=0;_<I.length;++_){const k=I[_].replace(Tx," "),D=k.indexOf("="),d=_c(D<0?k:k.slice(0,D)),L=D<0?null:_c(k.slice(D+1));if(d in f){let B=f[d];Zr(B)||(B=f[d]=[B]),B.push(L)}else f[d]=L}return f}function sA(l){let f="";for(let S in l){const I=l[S];if(S=G3(S),I==null){I!==void 0&&(f+=(f.length?"&":"")+S);continue}(Zr(I)?I.map(k=>k&&_y(k)):[I&&_y(I)]).forEach(k=>{k!==void 0&&(f+=(f.length?"&":"")+S,k!=null&&(f+="="+k))})}return f}function A4(l){const f={};for(const S in l){const I=l[S];I!==void 0&&(f[S]=Zr(I)?I.map(_=>_==null?null:""+_):I==null?I:""+I)}return f}const x4=Symbol(""),oA=Symbol(""),Ky=Symbol(""),bx=Symbol(""),Ty=Symbol("");function Zl(){let l=[];function f(I){return l.push(I),()=>{const _=l.indexOf(I);_>-1&&l.splice(_,1)}}function S(){l=[]}return{add:f,list:()=>l.slice(),reset:S}}function To(l,f,S,I,_,k=D=>D()){const D=I&&(I.enterCallbacks[_]=I.enterCallbacks[_]||[]);return()=>new Promise((d,L)=>{const B=V=>{V===!1?L(Iu(4,{from:S,to:f})):V instanceof Error?L(V):l4(V)?L(Iu(2,{from:f,to:V})):(D&&I.enterCallbacks[_]===D&&typeof V=="function"&&D.push(V),d())},N=k(()=>l.call(I&&I.instances[_],f,S,B));let j=Promise.resolve(N);l.length<3&&(j=j.then(B)),j.catch(V=>L(V))})}function sy(l,f,S,I,_=k=>k()){const k=[];for(const D of l)for(const d in D.components){let L=D.components[d];if(!(f!=="beforeRouteEnter"&&!D.instances[d]))if(_x(L)){const N=(L.__vccOpts||L)[f];N&&k.push(To(N,S,I,D,d,_))}else{let B=L();k.push(()=>B.then(N=>{if(!N)throw new Error(`Couldn't resolve component "${d}" at "${D.path}"`);const j=D3(N)?N.default:N;D.mods[d]=N,D.components[d]=j;const K=(j.__vccOpts||j)[f];return K&&To(K,S,I,D,d,_)()}))}}return k}function aA(l){const f=qs(Ky),S=qs(bx),I=Yr(()=>{const L=la(l.to);return f.resolve(L)}),_=Yr(()=>{const{matched:L}=I.value,{length:B}=L,N=L[B-1],j=S.matched;if(!N||!j.length)return-1;const V=j.findIndex(xu.bind(null,N));if(V>-1)return V;const K=uA(L[B-2]);return B>1&&uA(N)===K&&j[j.length-1].path!==K?j.findIndex(xu.bind(null,L[B-2])):V}),k=Yr(()=>_.value>-1&&k4(S.params,I.value.params)),D=Yr(()=>_.value>-1&&_.value===S.matched.length-1&&xx(S.params,I.value.params));function d(L={}){if(R4(L)){const B=f[la(l.replace)?"replace":"push"](la(l.to)).catch(cc);return l.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>B),B}return Promise.resolve()}return{route:I,href:Yr(()=>I.value.href),isActive:k,isExactActive:D,navigate:d}}function I4(l){return l.length===1?l[0]:l}const M4=zA({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:aA,setup(l,{slots:f}){const S=dh(aA(l)),{options:I}=qs(Ky),_=Yr(()=>({[lA(l.activeClass,I.linkActiveClass,"router-link-active")]:S.isActive,[lA(l.exactActiveClass,I.linkExactActiveClass,"router-link-exact-active")]:S.isExactActive}));return()=>{const k=f.default&&I4(f.default(S));return l.custom?k:Gy("a",{"aria-current":S.isExactActive?l.ariaCurrentValue:null,href:S.href,onClick:S.navigate,class:_.value},k)}}}),C4=M4;function R4(l){if(!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)&&!l.defaultPrevented&&!(l.button!==void 0&&l.button!==0)){if(l.currentTarget&&l.currentTarget.getAttribute){const f=l.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(f))return}return l.preventDefault&&l.preventDefault(),!0}}function k4(l,f){for(const S in f){const I=f[S],_=l[S];if(typeof I=="string"){if(I!==_)return!1}else if(!Zr(_)||_.length!==I.length||I.some((k,D)=>k!==_[D]))return!1}return!0}function uA(l){return l?l.aliasOf?l.aliasOf.path:l.path:""}const lA=(l,f,S)=>l??f??S,b4=zA({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(l,{attrs:f,slots:S}){const I=qs(Ty),_=Yr(()=>l.route||I.value),k=qs(oA,0),D=Yr(()=>{let B=la(k);const{matched:N}=_.value;let j;for(;(j=N[B])&&!j.components;)B++;return B}),d=Yr(()=>_.value.matched[D.value]);$f(oA,Yr(()=>D.value+1)),$f(x4,d),$f(Ty,_);const L=pc();return Qf(()=>[L.value,d.value,l.name],([B,N,j],[V,K,v])=>{N&&(N.instances[j]=B,K&&K!==N&&B&&B===V&&(N.leaveGuards.size||(N.leaveGuards=K.leaveGuards),N.updateGuards.size||(N.updateGuards=K.updateGuards))),B&&N&&(!K||!xu(N,K)||!V)&&(N.enterCallbacks[j]||[]).forEach(z=>z(B))},{flush:"post"}),()=>{const B=_.value,N=l.name,j=d.value,V=j&&j.components[N];if(!V)return cA(S.default,{Component:V,route:B});const K=j.props[N],v=K?K===!0?B.params:typeof K=="function"?K(B):K:null,Te=Gy(V,Rn({},v,f,{onVnodeUnmounted:ye=>{ye.component.isUnmounted&&(j.instances[N]=null)},ref:L}));return cA(S.default,{Component:Te,route:B})||Te}}});function cA(l,f){if(!l)return null;const S=l(f);return S.length===1?S[0]:S}const Dx=b4;function D4(l){const f=v4(l.routes,l),S=l.parseQuery||w4,I=l.stringifyQuery||sA,_=l.history,k=Zl(),D=Zl(),d=Zl(),L=WL(vo);let B=vo;vu&&l.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const N=iy.bind(null,ce=>""+ce),j=iy.bind(null,K3),V=iy.bind(null,_c);function K(ce,ke){let Pe,Ke;return Mx(ce)?(Pe=f.getRecordMatcher(ce),Ke=ke):Ke=ce,f.addRoute(Ke,Pe)}function v(ce){const ke=f.getRecordMatcher(ce);ke&&f.removeRoute(ke)}function z(){return f.getRoutes().map(ce=>ce.record)}function Te(ce){return!!f.getRecordMatcher(ce)}function ye(ce,ke){if(ke=Rn({},ke||L.value),typeof ce=="string"){const Ae=ry(S,ce,ke.path),je=f.resolve({path:Ae.path},ke),Oe=_.createHref(Ae.fullPath);return Rn(Ae,je,{params:V(je.params),hash:_c(Ae.hash),redirectedFrom:void 0,href:Oe})}let Pe;if(ce.path!=null)Pe=Rn({},ce,{path:ry(S,ce.path,ke.path).path});else{const Ae=Rn({},ce.params);for(const je in Ae)Ae[je]==null&&delete Ae[je];Pe=Rn({},ce,{params:j(Ae)}),ke.params=j(ke.params)}const Ke=f.resolve(Pe,ke),at=ce.hash||"";Ke.params=N(V(Ke.params));const G=X3(I,Rn({},ce,{hash:H3(at),path:Ke.path})),ue=_.createHref(G);return Rn({fullPath:G,hash:at,query:I===sA?A4(ce.query):ce.query||{}},Ke,{redirectedFrom:void 0,href:ue})}function Se(ce){return typeof ce=="string"?ry(S,ce,L.value.path):Rn({},ce)}function Le(ce,ke){if(B!==ce)return Iu(8,{from:ke,to:ce})}function oe(ce){return xe(ce)}function Be(ce){return oe(Rn(Se(ce),{replace:!0}))}function He(ce){const ke=ce.matched[ce.matched.length-1];if(ke&&ke.redirect){const{redirect:Pe}=ke;let Ke=typeof Pe=="function"?Pe(ce):Pe;return typeof Ke=="string"&&(Ke=Ke.includes("?")||Ke.includes("#")?Ke=Se(Ke):{path:Ke},Ke.params={}),Rn({query:ce.query,hash:ce.hash,params:Ke.path!=null?{}:ce.params},Ke)}}function xe(ce,ke){const Pe=B=ye(ce),Ke=L.value,at=ce.state,G=ce.force,ue=ce.replace===!0,Ae=He(Pe);if(Ae)return xe(Rn(Se(Ae),{state:typeof Ae=="object"?Rn({},at,Ae.state):at,force:G,replace:ue}),ke||Pe);const je=Pe;je.redirectedFrom=ke;let Oe;return!G&&Y3(I,Ke,Pe)&&(Oe=Iu(16,{to:je,from:Ke}),we(Ke,Ke,!0,!1)),(Oe?Promise.resolve(Oe):T(je,Ke)).catch(Ve=>Gs(Ve)?Gs(Ve,2)?Ve:Z(Ve):it(Ve,je,Ke)).then(Ve=>{if(Ve){if(Gs(Ve,2))return xe(Rn({replace:ue},Se(Ve.to),{state:typeof Ve.to=="object"?Rn({},at,Ve.to.state):at,force:G}),ke||je)}else Ve=ve(je,Ke,!0,ue,at);return H(je,Ke,Ve),Ve})}function J(ce,ke){const Pe=Le(ce,ke);return Pe?Promise.reject(Pe):Promise.resolve()}function Y(ce){const ke=X.values().next().value;return ke&&typeof ke.runWithContext=="function"?ke.runWithContext(ce):ce()}function T(ce,ke){let Pe;const[Ke,at,G]=L4(ce,ke);Pe=sy(Ke.reverse(),"beforeRouteLeave",ce,ke);for(const Ae of Ke)Ae.leaveGuards.forEach(je=>{Pe.push(To(je,ce,ke))});const ue=J.bind(null,ce,ke);return Pe.push(ue),Ct(Pe).then(()=>{Pe=[];for(const Ae of k.list())Pe.push(To(Ae,ce,ke));return Pe.push(ue),Ct(Pe)}).then(()=>{Pe=sy(at,"beforeRouteUpdate",ce,ke);for(const Ae of at)Ae.updateGuards.forEach(je=>{Pe.push(To(je,ce,ke))});return Pe.push(ue),Ct(Pe)}).then(()=>{Pe=[];for(const Ae of G)if(Ae.beforeEnter)if(Zr(Ae.beforeEnter))for(const je of Ae.beforeEnter)Pe.push(To(je,ce,ke));else Pe.push(To(Ae.beforeEnter,ce,ke));return Pe.push(ue),Ct(Pe)}).then(()=>(ce.matched.forEach(Ae=>Ae.enterCallbacks={}),Pe=sy(G,"beforeRouteEnter",ce,ke,Y),Pe.push(ue),Ct(Pe))).then(()=>{Pe=[];for(const Ae of D.list())Pe.push(To(Ae,ce,ke));return Pe.push(ue),Ct(Pe)}).catch(Ae=>Gs(Ae,8)?Ae:Promise.reject(Ae))}function H(ce,ke,Pe){d.list().forEach(Ke=>Y(()=>Ke(ce,ke,Pe)))}function ve(ce,ke,Pe,Ke,at){const G=Le(ce,ke);if(G)return G;const ue=ke===vo,Ae=vu?history.state:{};Pe&&(Ke||ue?_.replace(ce.fullPath,Rn({scroll:ue&&Ae&&Ae.scroll},at)):_.push(ce.fullPath,at)),L.value=ce,we(ce,ke,Pe,ue),Z()}let Ye;function Me(){Ye||(Ye=_.listen((ce,ke,Pe)=>{if(!zt.listening)return;const Ke=ye(ce),at=He(Ke);if(at){xe(Rn(at,{replace:!0,force:!0}),Ke).catch(cc);return}B=Ke;const G=L.value;vu&&i4($w(G.fullPath,Pe.delta),gh()),T(Ke,G).catch(ue=>Gs(ue,12)?ue:Gs(ue,2)?(xe(Rn(Se(ue.to),{force:!0}),Ke).then(Ae=>{Gs(Ae,20)&&!Pe.delta&&Pe.type===Sc.pop&&_.go(-1,!1)}).catch(cc),Promise.reject()):(Pe.delta&&_.go(-Pe.delta,!1),it(ue,Ke,G))).then(ue=>{ue=ue||ve(Ke,G,!1),ue&&(Pe.delta&&!Gs(ue,8)?_.go(-Pe.delta,!1):Pe.type===Sc.pop&&Gs(ue,20)&&_.go(-1,!1)),H(Ke,G,ue)}).catch(cc)}))}let Ce=Zl(),tt=Zl(),ct;function it(ce,ke,Pe){Z(ce);const Ke=tt.list();return Ke.length?Ke.forEach(at=>at(ce,ke,Pe)):console.error(ce),Promise.reject(ce)}function de(){return ct&&L.value!==vo?Promise.resolve():new Promise((ce,ke)=>{Ce.add([ce,ke])})}function Z(ce){return ct||(ct=!ce,Me(),Ce.list().forEach(([ke,Pe])=>ce?Pe(ce):ke()),Ce.reset()),ce}function we(ce,ke,Pe,Ke){const{scrollBehavior:at}=l;if(!vu||!at)return Promise.resolve();const G=!Pe&&r4($w(ce.fullPath,0))||(Ke||!Pe)&&history.state&&history.state.scroll||null;return jA().then(()=>at(ce,ke,G)).then(ue=>ue&&n4(ue)).catch(ue=>it(ue,ce,ke))}const Fe=ce=>_.go(ce);let Et;const X=new Set,zt={currentRoute:L,listening:!0,addRoute:K,removeRoute:v,clearRoutes:f.clearRoutes,hasRoute:Te,getRoutes:z,resolve:ye,options:l,push:oe,replace:Be,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:k.add,beforeResolve:D.add,afterEach:d.add,onError:tt.add,isReady:de,install(ce){const ke=this;ce.component("RouterLink",C4),ce.component("RouterView",Dx),ce.config.globalProperties.$router=ke,Object.defineProperty(ce.config.globalProperties,"$route",{enumerable:!0,get:()=>la(L)}),vu&&!Et&&L.value===vo&&(Et=!0,oe(_.location).catch(at=>{}));const Pe={};for(const at in vo)Object.defineProperty(Pe,at,{get:()=>L.value[at],enumerable:!0});ce.provide(Ky,ke),ce.provide(bx,PA(Pe)),ce.provide(Ty,L);const Ke=ce.unmount;X.add(ce),ce.unmount=function(){X.delete(ce),X.size<1&&(B=vo,Ye&&Ye(),Ye=null,L.value=vo,Et=!1,ct=!1),Ke()}}};function Ct(ce){return ce.reduce((ke,Pe)=>ke.then(()=>Y(Pe)),Promise.resolve())}return zt}function L4(l,f){const S=[],I=[],_=[],k=Math.max(f.matched.length,l.matched.length);for(let D=0;D<k;D++){const d=f.matched[D];d&&(l.matched.find(B=>xu(B,d))?I.push(d):S.push(d));const L=l.matched[D];L&&(f.matched.find(B=>xu(B,L))||_.push(L))}return[S,I,_]}const P4={__name:"App",setup(l){return(f,S)=>(Fy(),WP(la(Dx)))}};var O4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lx(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var oy={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var dA;function N4(){return dA||(dA=1,function(l){(function(){var f=typeof window<"u"?window:O4,S={};(function(_,k,D){var d;function L(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var B=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function N(e){e=[typeof globalThis=="object"&&globalThis,e,typeof _=="object"&&_,typeof self=="object"&&self,typeof k=="object"&&k];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var j=N(this);function V(e,t){if(t)e:{var n=j;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&B(n,e,{configurable:!0,writable:!0,value:t})}}V("Symbol",function(e){function t(s){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(s||"")+"_"+r++,s)}function n(s,o){this.g=s,B(this,"description",{configurable:!0,writable:!0,value:o})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}),V("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=j[t[n]];typeof i=="function"&&typeof i.prototype[e]!="function"&&B(i.prototype,e,{configurable:!0,writable:!0,value:function(){return K(L(this))}})}return e});function K(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function v(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:L(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function z(e){if(!(e instanceof Array)){e=v(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var Te=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},ye;if(typeof Object.setPrototypeOf=="function")ye=Object.setPrototypeOf;else{var Se;e:{var Le={a:!0},oe={};try{oe.__proto__=Le,Se=oe.a;break e}catch{}Se=!1}ye=Se?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Be=ye;function He(e,t){if(e.prototype=Te(t.prototype),e.prototype.constructor=e,Be)Be(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Vk=t.prototype}function xe(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function J(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}xe.prototype.u=function(e){this.h=e};function Y(e,t){e.i={Pg:t,$g:!0},e.g=e.m||e.j}xe.prototype.return=function(e){this.i={return:e},this.g=this.j};function T(e,t,n){return e.g=n,{value:t}}xe.prototype.s=function(e){this.g=e};function H(e){e.g=0}function ve(e,t,n){e.m=t,n!=null&&(e.j=n)}function Ye(e,t){e.m=0,e.j=t||0}function Me(e,t,n){e.g=t,e.m=n||0}function Ce(e,t){return e.m=t||0,t=e.i.Pg,e.i=null,t}function tt(e){e.A=[e.i],e.m=0,e.j=0}function ct(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.$g?e.g=e.m||e.j:n.s!=null&&e.j<n.s?(e.g=n.s,e.i=null):e.g=e.j:e.g=t}function it(e){this.g=new xe,this.h=e}function de(e,t){J(e.g);var n=e.g.l;return n?Z(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),we(e))}function Z(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var s=r.value}catch(o){return e.g.l=null,Y(e.g,o),we(e)}return e.g.l=null,i.call(e.g,s),we(e)}function we(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Y(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.$g)throw t.Pg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Fe(e){this.next=function(t){return J(e.g),e.g.l?t=Z(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=we(e)),t},this.throw=function(t){return J(e.g),e.g.l?t=Z(e,e.g.l.throw,t,e.g.u):(Y(e.g,t),t=we(e)),t},this.return=function(t){return de(e,t)},this[Symbol.iterator]=function(){return this}}function Et(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function s(o){o.done?i(o.value):Promise.resolve(o.value).then(t,n).then(s,r)}s(e.next())})}function X(e){return Et(new Fe(new it(e)))}function zt(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}V("Promise",function(e){function t(o){this.h=0,this.i=void 0,this.g=[],this.o=!1;var a=this.j();try{o(a.resolve,a.reject)}catch(u){a.reject(u)}}function n(){this.g=null}function i(o){return o instanceof t?o:new t(function(a){a(o)})}if(e)return e;n.prototype.h=function(o){if(this.g==null){this.g=[];var a=this;this.i(function(){a.l()})}this.g.push(o)};var r=j.setTimeout;n.prototype.i=function(o){r(o,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var o=this.g;this.g=[];for(var a=0;a<o.length;++a){var u=o[a];o[a]=null;try{u()}catch(c){this.j(c)}}}this.g=null},n.prototype.j=function(o){this.i(function(){throw o})},t.prototype.j=function(){function o(c){return function(h){u||(u=!0,c.call(a,h))}}var a=this,u=!1;return{resolve:o(this.F),reject:o(this.l)}},t.prototype.F=function(o){if(o===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof t)this.H(o);else{e:switch(typeof o){case"object":var a=o!=null;break e;case"function":a=!0;break e;default:a=!1}a?this.C(o):this.m(o)}},t.prototype.C=function(o){var a=void 0;try{a=o.then}catch(u){this.l(u);return}typeof a=="function"?this.I(a,o):this.m(o)},t.prototype.l=function(o){this.u(2,o)},t.prototype.m=function(o){this.u(1,o)},t.prototype.u=function(o,a){if(this.h!=0)throw Error("Cannot settle("+o+", "+a+"): Promise already settled in state"+this.h);this.h=o,this.i=a,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var o=this;r(function(){if(o.B()){var a=j.console;typeof a<"u"&&a.error(o.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var o=j.CustomEvent,a=j.Event,u=j.dispatchEvent;return typeof u>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof a=="function"?o=new a("unhandledrejection",{cancelable:!0}):(o=j.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.i,u(o))},t.prototype.A=function(){if(this.g!=null){for(var o=0;o<this.g.length;++o)s.h(this.g[o]);this.g=null}};var s=new n;return t.prototype.H=function(o){var a=this.j();o.Vd(a.resolve,a.reject)},t.prototype.I=function(o,a){var u=this.j();try{o.call(a,u.resolve,u.reject)}catch(c){u.reject(c)}},t.prototype.then=function(o,a){function u(E,A){return typeof E=="function"?function(M){try{c(E(M))}catch(R){h(R)}}:A}var c,h,p=new t(function(E,A){c=E,h=A});return this.Vd(u(o,c),u(a,h)),p},t.prototype.catch=function(o){return this.then(void 0,o)},t.prototype.Vd=function(o,a){function u(){switch(c.h){case 1:o(c.i);break;case 2:a(c.i);break;default:throw Error("Unexpected state: "+c.h)}}var c=this;this.g==null?s.h(u):this.g.push(u),this.o=!0},t.resolve=i,t.reject=function(o){return new t(function(a,u){u(o)})},t.race=function(o){return new t(function(a,u){for(var c=v(o),h=c.next();!h.done;h=c.next())i(h.value).Vd(a,u)})},t.all=function(o){var a=v(o),u=a.next();return u.done?i([]):new t(function(c,h){function p(M){return function(R){E[M]=R,A--,A==0&&c(E)}}var E=[],A=0;do E.push(void 0),A++,i(u.value).Vd(p(E.length-1),h),u=a.next();while(!u.done)})},t});function Ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}V("WeakMap",function(e){function t(u){if(this.g=(a+=Math.random()+1).toString(),u){u=v(u);for(var c;!(c=u.next()).done;)c=c.value,this.set(c[0],c[1])}}function n(){}function i(u){var c=typeof u;return c==="object"&&u!==null||c==="function"}function r(u){if(!Ct(u,o)){var c=new n;B(u,o,{value:c})}}function s(u){var c=Object[u];c&&(Object[u]=function(h){return h instanceof n?h:(Object.isExtensible(h)&&r(h),c(h))})}if(function(){if(!e||!Object.seal)return!1;try{var u=Object.seal({}),c=Object.seal({}),h=new e([[u,2],[c,3]]);return h.get(u)!=2||h.get(c)!=3?!1:(h.delete(u),h.set(c,4),!h.has(u)&&h.get(c)==4)}catch{return!1}}())return e;var o="$jscomp_hidden_"+Math.random();s("freeze"),s("preventExtensions"),s("seal");var a=0;return t.prototype.set=function(u,c){if(!i(u))throw Error("Invalid WeakMap key");if(r(u),!Ct(u,o))throw Error("WeakMap key fail: "+u);return u[o][this.g]=c,this},t.prototype.get=function(u){return i(u)&&Ct(u,o)?u[o][this.g]:void 0},t.prototype.has=function(u){return i(u)&&Ct(u,o)&&Ct(u[o],this.g)},t.prototype.delete=function(u){return i(u)&&Ct(u,o)&&Ct(u[o],this.g)?delete u[o][this.g]:!1},t}),V("Map",function(e){function t(){var a={};return a.Yb=a.next=a.head=a}function n(a,u){var c=a[1];return K(function(){if(c){for(;c.head!=a[1];)c=c.Yb;for(;c.next!=c.head;)return c=c.next,{done:!1,value:u(c)};c=null}return{done:!0,value:void 0}})}function i(a,u){var c=u&&typeof u;c=="object"||c=="function"?s.has(u)?c=s.get(u):(c=""+ ++o,s.set(u,c)):c="p_"+u;var h=a[0][c];if(h&&Ct(a[0],c))for(a=0;a<h.length;a++){var p=h[a];if(u!==u&&p.key!==p.key||u===p.key)return{id:c,list:h,index:a,entry:p}}return{id:c,list:h,index:-1,entry:void 0}}function r(a){if(this[0]={},this[1]=t(),this.size=0,a){a=v(a);for(var u;!(u=a.next()).done;)u=u.value,this.set(u[0],u[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var a=Object.seal({x:4}),u=new e(v([[a,"s"]]));if(u.get(a)!="s"||u.size!=1||u.get({x:4})||u.set({x:4},"t")!=u||u.size!=2)return!1;var c=u.entries(),h=c.next();return h.done||h.value[0]!=a||h.value[1]!="s"?!1:(h=c.next(),!(h.done||h.value[0].x!=4||h.value[1]!="t"||!c.next().done))}catch{return!1}}())return e;var s=new WeakMap;r.prototype.set=function(a,u){a=a===0?0:a;var c=i(this,a);return c.list||(c.list=this[0][c.id]=[]),c.entry?c.entry.value=u:(c.entry={next:this[1],Yb:this[1].Yb,head:this[1],key:a,value:u},c.list.push(c.entry),this[1].Yb.next=c.entry,this[1].Yb=c.entry,this.size++),this},r.prototype.delete=function(a){return a=i(this,a),a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this[0][a.id],a.entry.Yb.next=a.entry.next,a.entry.next.Yb=a.entry.Yb,a.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this[0]={},this[1]=this[1].Yb=t(),this.size=0},r.prototype.has=function(a){return!!i(this,a).entry},r.prototype.get=function(a){return(a=i(this,a).entry)&&a.value},r.prototype.entries=function(){return n(this,function(a){return[a.key,a.value]})},r.prototype.keys=function(){return n(this,function(a){return a.key})},r.prototype.values=function(){return n(this,function(a){return a.value})},r.prototype.forEach=function(a,u){for(var c=this.entries(),h;!(h=c.next()).done;)h=h.value,a.call(u,h[1],h[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r}),V("Set",function(e){function t(n){if(this.g=new Map,n){n=v(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(v([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),s=r.next();return s.done||s.value[0]!=n||s.value[1]!=n?!1:(s=r.next(),s.done||s.value[0]==n||s.value[0].x!=4||s.value[1]!=s.value[0]?!1:r.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(s){return n.call(i,s,s,r)})},t)});function ce(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}V("Array.prototype.values",function(e){return e||function(){return ce(this,function(t,n){return n})}}),V("Array.from",function(e){return e||function(t,n,i){n=n??function(a){return a};var r=[],s=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof s=="function"){t=s.call(t);for(var o=0;!(s=t.next()).done;)r.push(n.call(i,s.value,o++))}else for(s=t.length,o=0;o<s;o++)r.push(n.call(i,t[o],o));return r}}),V("Array.prototype.keys",function(e){return e||function(){return ce(this,function(t){return t})}}),V("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),V("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,0>n&&(n=Math.max(n+r,0));n<r;n++){var s=i[n];if(s===t||Object.is(s,t))return!0}return!1}});function ke(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}V("String.prototype.includes",function(e){return e||function(t,n){return ke(this,t,"includes").indexOf(t,n||0)!==-1}}),V("String.fromCodePoint",function(e){return e||function(t){for(var n="",i=0;i<arguments.length;i++){var r=Number(arguments[i]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),n+=String.fromCharCode(r&1023|56320))}return n}});function Pe(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var s=e[r];if(t.call(n,s,r,e))return{Yg:r,v:s}}return{Yg:-1,v:void 0}}V("Array.prototype.findIndex",function(e){return e||function(t,n){return Pe(this,t,n).Yg}}),V("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=v(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),V("Array.prototype.find",function(e){return e||function(t,n){return Pe(this,t,n).v}}),V("String.prototype.startsWith",function(e){return e||function(t,n){var i=ke(this,t,"startsWith"),r=i.length,s=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var o=0;o<s&&n<r;)if(i[n++]!=t[o++])return!1;return o>=s}}),V("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)Ct(t,i)&&n.push([i,t[i]]);return n}});var Ke=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Ct(i,r)&&(e[r]=i[r])}return e};V("Object.assign",function(e){return e||Ke}),V("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),V("Array.prototype.entries",function(e){return e||function(){return ce(this,function(t,n){return[t,n]})}}),V("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),V("String.prototype.repeat",function(e){return e||function(t){var n=ke(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),V("Number.EPSILON",function(){return Math.pow(2,-52)}),V("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),V("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),V("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)Ct(t,i)&&n.push(t[i]);return n}}),V("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),V("String.prototype.endsWith",function(e){return e||function(t,n){var i=ke(this,t,"endsWith");n===void 0&&(n=i.length),n=Math.max(0,Math.min(n|0,i.length));for(var r=t.length;0<r&&0<n;)if(i[--n]!=t[--r])return!1;return 0>=r}}),V("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var at=this||self;function G(e,t){e=e.split(".");var n=at;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function ue(){}function Ae(){}function je(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}je.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function Oe(e){return e.h/(1-Math.pow(e.g,e.i))}function Ve(){this.h=new je(2),this.j=new je(5),this.g=0,this.i=128e3,this.l=16e3}Ve.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Ve.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},Ve.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Oe(this.h),Oe(this.j))};function st(){}function $e(){}function Ne(){}function We(e){var t=zt.apply(1,arguments);Gt.has(e)||(Gt.add(e),Ne.apply(st,z(t)))}function Ut(){}function dt(){}function Pt(){}var Gt=new Set;_.console&&(new Map().set(1,function(){return console.error.apply(console,z(zt.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,z(zt.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,z(zt.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,z(zt.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,z(zt.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,z(zt.apply(0,arguments)))}),Ne=function(){return console.warn.apply(console,z(zt.apply(0,arguments)))},$e=function(){console.error.apply(console,z(zt.apply(0,arguments)))});function Qt(){this.g=new Map}d=Qt.prototype,d.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},d.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},d.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(i){return i!=t});this.g.set(e,n),n.length||this.g.delete(e)}},d.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},d.size=function(){return this.g.size},d.keys=function(){return Array.from(this.g.keys())};function _t(){this.g=new Qt}d=_t.prototype,d.release=function(){this.Ra(),this.g=null},d.D=function(e,t,n,i){this.g&&(e=new yn(e,t,n,i),this.g.push(t,e))},d.qa=function(e,t,n,i){function r(o){s.Ka(e,t,r),n(o)}var s=this;this.D(e,t,r,i)},d.Ka=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=v(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Ka(),this.g.remove(t,r))}},d.Ra=function(){if(this.g){for(var e=[],t=v(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,z(n.value));for(e=v(e),t=e.next();!t.done;t=e.next())t.value.Ka();this.g.g.clear()}},G("shaka.util.EventManager",_t),_t.prototype.removeAll=_t.prototype.Ra,_t.prototype.unlisten=_t.prototype.Ka,_t.prototype.listenOnce=_t.prototype.qa,_t.prototype.listen=_t.prototype.D,_t.prototype.release=_t.prototype.release;function yn(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=_i(e,i),this.target.addEventListener(t,n,this.g)}yn.prototype.Ka=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function _i(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),fi(e)?t:t.capture||!1}function fi(e){var t=Hi;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch{t=!1}Hi=t}return t||!1}var Hi=void 0;G("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function ki(e,t){this.g=e,this.h=t}ki.prototype.toString=function(){return"v"+this.g+"."+this.h};function Vt(e,t){var n=new ki(5,0),i=Gi,r=i.g,s=n.h-r.h;(0<(n.g-r.g||s)?i.i:i.h)(i.g,n,e,t)}function fa(e,t,n,i){Ne([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Si(e,t,n,i){$e([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var Gi=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function An(e){var t;e instanceof An?(pa(this,e.Kb),this.Hc=e.Hc,ma(this,e.nb),Cu(this,e.$c),this.ab=e.ab,ps(this,e.g.clone()),this.qc=e.qc):e&&(t=String(e).match(ha))?(pa(this,t[1]||"",!0),this.Hc=Xs(t[2]||""),ma(this,t[3]||"",!0),Cu(this,t[4]),this.ab=Xs(t[5]||"",!0),ps(this,t[6]||"",!0),this.qc=Xs(t[7]||"")):this.g=new ms(null)}d=An.prototype,d.Kb="",d.Hc="",d.nb="",d.$c=null,d.ab="",d.qc="",d.toString=function(){var e=[],t=this.Kb;if(t&&e.push(Mo(t,es,!0),":"),t=this.nb){e.push("//");var n=this.Hc;n&&e.push(Mo(n,es,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.$c,t!=null&&e.push(":",String(t))}return(t=this.ab)&&(this.nb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mo(t,t.charAt(0)=="/"?Ac:wc,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.qc)&&e.push("#",Mo(t,Ys)),e.join("")},d.resolve=function(e){var t=this.clone();t.Kb==="data"&&(t=new An);var n=!!e.Kb;n?pa(t,e.Kb):n=!!e.Hc,n?t.Hc=e.Hc:n=!!e.nb,n?ma(t,e.nb):n=e.$c!=null;var i=e.ab;if(n)Cu(t,e.$c);else if(n=!!e.ab){if(i.charAt(0)!="/")if(this.nb&&!this.ab)i="/"+i;else{var r=t.ab.lastIndexOf("/");r!=-1&&(i=t.ab.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var s=[],o=0;o<i.length;){var a=i[o++];a=="."?r&&o==i.length&&s.push(""):a==".."?((1<s.length||s.length==1&&s[0]!="")&&s.pop(),r&&o==i.length&&s.push("")):(s.push(a),r=!0)}i=s.join("/")}}return n?t.ab=i:n=e.g.toString()!=="",n?ps(t,e.g.clone()):n=!!e.qc,n&&(t.qc=e.qc),t},d.clone=function(){return new An(this)};function pa(e,t,n){e.Kb=n?Xs(t,!0):t,e.Kb&&(e.Kb=e.Kb.replace(/:$/,""))}function ma(e,t,n){e.nb=n?Xs(t,!0):t}function Cu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.$c=t}else e.$c=null}function ps(e,t,n){t instanceof ms?e.g=t:(n||(t=Mo(t,xc)),e.g=new ms(t))}function Xs(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mo(e,t,n){return e!=null?(e=encodeURI(e).replace(t,yh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yh(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var es=/[#\/\?@]/g,wc=/[#\?:]/g,Ac=/[#\?]/g,xc=/[#\?@]/g,Ys=/#/g;function ms(e){this.g=e||null}function rr(e){if(!e.Va&&(e.Va=new Map,e.kd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];s=decodeURIComponent(s.replace(/\+/g," ")),r=r||"",e.add(s,decodeURIComponent(r.replace(/\+/g," ")))}}d=ms.prototype,d.Va=null,d.kd=null;function Ru(e){return rr(e),e.kd}d.add=function(e,t){rr(this),this.g=null;var n=this.Va.has(e)?this.Va.get(e):null;return n||this.Va.set(e,n=[]),n.push(t),this.kd++,this},d.set=function(e,t){return rr(this),this.g=null,this.Va.has(e)?this.Va.set(e,[t]):this.add(e,t),this},d.get=function(e){return rr(this),this.Va.get(e)||[]},d.toString=function(){if(this.g)return this.g;if(!this.Va||!this.Va.size)return"";for(var e=[],t=v(this.Va.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.Va.get(i);for(var r=0;r<i.length;r++){var s=n;i[r]!==""&&(s+="="+encodeURIComponent(i[r])),e.push(s)}}return this.g=e.join("&")},d.clone=function(){var e=new ms;if(e.g=this.g,this.Va){for(var t=new Map,n=v(this.Va),i=n.next();!i.done;i=n.next()){var r=v(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.Va=t,e.kd=this.kd}return e};function $s(){}function Dn(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=x(e);t=x(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function zi(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function x(e,t,n){return n=n===void 0?1/0:n,m(e,t===void 0?0:t,n,Uint8Array)}function w(e,t,n){return n=n===void 0?1/0:n,m(e,t===void 0?0:t,n,Uint16Array)}function y(e,t,n){return n=n===void 0?1/0:n,m(e,t===void 0?0:t,n,DataView)}function m(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,s=1;"BYTES_PER_ELEMENT"in i&&(s=i.BYTES_PER_ELEMENT);var o=((e.byteOffset||0)+e.byteLength)/s;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/s,o))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),o))-e)}G("shaka.util.BufferUtils",$s),$s.toDataView=y,$s.toUint16=w,$s.toUint8=x,$s.toArrayBuffer=zi,$s.equal=Dn;function g(e,t,n){var i=zt.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}g.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},G("shaka.util.Error",g),g.Severity={RECOVERABLE:1,CRITICAL:2},g.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},g.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function P(e){this.h=e,this.g=void 0}P.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function O(e,t){return e.length&&t.length&&e!==t?0<F(e,t).length:!0}function F(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=v(t),s=r.next();!s.done;s=r.next())if(s=s.value,i.keySystem==s.keySystem){r=new Map;for(var o=v((i.initData||[]).concat(s.initData||[])),a=o.next();!a.done;a=o.next())a=a.value,r.set(a.keyId,a);r=Array.from(r.values()),o=i.keyIds&&s.keyIds?new Set([].concat(z(i.keyIds),z(s.keyIds))):i.keyIds||s.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||s.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||s.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||s.persistentStateRequired,videoRobustness:i.videoRobustness||s.videoRobustness,audioRobustness:i.audioRobustness||s.audioRobustness,serverCertificate:i.serverCertificate||s.serverCertificate,serverCertificateUri:i.serverCertificateUri||s.serverCertificateUri,initData:r,keyIds:o});break}}return n}function te(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function ee(e){return e?!!e.match(/^com\.apple\.fps/):!1}var ae=new P(function(){return zi(new Uint8Array([0]))}),he=new Map;function fe(e){this.h=e,this.g=null}fe.prototype.da=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){_.clearTimeout(i),n=!1},i=_.setTimeout(function(){n&&t.h()},1e3*e),this},fe.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function se(e){this.h=e,this.g=null}se.prototype.sb=function(){return this.stop(),this.h(),this},se.prototype.da=function(e){var t=this;return this.stop(),this.g=new fe(function(){t.h()}).da(e),this},se.prototype.ua=function(e){var t=this;return this.stop(),this.g=new fe(function(){t.g.da(e),t.h()}).da(e),this},se.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},G("shaka.util.Timer",se),se.prototype.stop=se.prototype.stop,se.prototype.tickEvery=se.prototype.ua,se.prototype.tickAfter=se.prototype.da,se.prototype.tickNow=se.prototype.sb;function be(){var e=_.ManagedMediaSource||_.MediaSource;return!!(e&&e.isTypeSupported)}function ze(e){return bi().canPlayType(e)!=""}function Ue(){return!!navigator.userAgent.match(/Edge?\//)}function nt(){return an("Xbox One")}function Je(){return an("Tizen")}function Xe(){return an("Tizen 3")}function wt(){return an("Web0S")}function Kt(){return wt()&&xt()===38}function Ze(){return an("CrKey")&&!an("VIZIO SmartCast")}function xt(){if(!an("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function At(){return zn()&&((navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="macos":navigator.platform?navigator.platform.toLowerCase().includes("mac"):!1)||(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?!0:zn()&&1<navigator.maxTouchPoints))}function Rt(){return an("PlayStation 5")}function It(){return an("PlayStation 4")}function nn(){return an("Hisense")||an("VIDAA")}function Sn(){if(!At()&&(!zn()||At()))return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Bt(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}function qt(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":an("Android")}function Tn(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="fuchsia":an("Fuchsia")}function Gn(){return!!(Je()||wt()||nt()||It()||Rt()||Ze()||nn()||an("VIZIO SmartCast")||zn()&&!At())}function an(e){return(navigator.userAgent||"").includes(e)}function zn(){return(navigator.vendor||"").includes("Apple")}function bi(){return Di||(fn||(fn=new se(function(){Di=null})),(Di=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Di=document.createElement("video")),fn.da(1),Di)}function Ti(){if(Xe()||an("Tizen 2")||Kt()||It()||Rt())return!1;var e=Sn();return!(zn()&&!At()&&e!=null&&15>e)}function ii(){var e,t,n,i,r,s,o,a,u,c,h,p,E,A,M,R,C;return X(function(b){switch(b.g){case 1:if(e={width:1/0,height:1/0},Ze()){if(A=_.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,ve(b,14),!(M=A)){b.s(16);break}return T(b,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),17)}if(Je()){t=_.devicePixelRatio,e.width=1920<_.screen.width*t?3840:1920,e.height=1080<_.screen.height*t?2160:1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(n=webapis.systeminfo.getMaxVideoResolution(),e.width=n.width,e.height=n.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{Ne("Tizen: Error detecting screen size, default screen size 1920x1080.")}b.s(3);break}if(wt()){try{i=JSON.parse(_.PalmSystem.deviceInfo),e.width=Math.max(1920,i.screenWidth),e.height=Math.max(1080,i.screenHeight)}catch{Ne("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}b.s(3);break}if(nn()){if(r=null,_.Hisense_Get4KSupportState)try{r=_.Hisense_Get4KSupportState()}catch{}r==null&&(r=an("UHD")),r?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),b.s(3);break}if(!It()&&!Rt()){s=void 0;try{s=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}if(s){e.width=1920,e.height=1080;try{o=new s.Media.Protection.ProtectionCapabilities,a=s.Media.Protection.ProtectionCapabilityResult,u=null;do u=o.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===a.maybe);u===a.probably&&(e.width=3840,e.height=2160)}catch{Ne("Xbox: Error detecting screen size, default screen size 1920x1080.")}}else nt()&&(e.width=1920,e.height=1080,Ne("Xbox: Error detecting screen size, default screen size 1920x1080."));b.s(3);break}return c=!1,ve(b,8),T(b,_.msdk.device.getDisplayInfo(),10);case 10:h=b.h,c=h.resolution==="4K",Me(b,9);break;case 8:return Ce(b),ve(b,11),T(b,_.msdk.device.getDisplayInfoImmediate(),13);case 13:p=b.h,c=p.resolution==="4K",Me(b,9);break;case 11:E=Ce(b),Ne("PlayStation: Failed to get the display info:",E);case 9:c?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),b.s(3);break;case 17:M=b.h;case 16:if(M){e.width=3840,e.height=2160,b.s(18);break}if(!(R=A)){b.s(19);break}return T(b,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),20);case 20:R=b.h;case 19:R&&(e.width=1920,e.height=1080);case 18:Me(b,3);break;case 14:C=Ce(b),$e("Failed to check canDisplayType:",C);case 3:return b.return(e)}})}function hi(e){return _.matchMedia!==void 0&&_.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"}var fn=null,Di=null;function Ei(){}function cn(e){if(!e)return"";if(e=x(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),_.TextDecoder&&!It())return e=new TextDecoder().decode(e),e.includes("�")&&$e('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if((e[n]&128)==0?i=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),65535>=i)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function Fr(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new g(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=y(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return ys(i)}function Rr(e){function t(i){return n.byteLength<=i||9<=n[i]&&126>=n[i]}if(!e)return"";var n=x(e);if(n[0]==239&&n[1]==187&&n[2]==191)return cn(n);if(n[0]==254&&n[1]==255)return Fr(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Fr(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Fr(e,!1);if(n[1]==0&&n[3]==0)return Fr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return cn(e);throw new g(2,2,2003)}function Ki(e){if(_.TextEncoder&&!It()){var t=new TextEncoder;return zi(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return zi(t)}function gs(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}function ys(e){return ga.value()(e)}function ri(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return r[1]=="#"?(r=r[2]=="x"||r[2]=="X"?parseInt(r.substring(3),16):parseInt(r.substring(2),10),0<=r&&1114111>=r?String.fromCodePoint(r):""):t[r]||"'"}):e||""}G("shaka.util.StringUtils",Ei),Ei.resetFromCharCode=function(){ga.g=void 0},Ei.toUTF16=gs,Ei.toUTF8=Ki,Ei.fromBytesAutoDetect=Rr,Ei.fromUTF16=Fr,Ei.fromUTF8=cn;var ga=new P(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch{return!1}}for(var t={jc:65536};0<t.jc;t={jc:t.jc},t.jc/=2)if(e(t.jc))return function(n){return function(i){for(var r="",s=0;s<i.length;s+=n.jc)r+=String.fromCharCode.apply(null,i.subarray(s,s+n.jc));return r}}(t);return null});function Kn(){}function ts(e){return e=ys(x(e)),btoa(e)}function mr(e,t){return t=t??!0,e=ts(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function wi(e){e=_.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function kr(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=_.parseInt(e.substr(2*i,2),16);return n}function br(e){var t=x(e);e="",t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function En(){for(var e=zt.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&r.BYTES_PER_ELEMENT===1?t.set(r,n):t.set(x(r),n),n+=r.byteLength}return t}G("shaka.util.Uint8ArrayUtils",Kn),Kn.concat=En,Kn.toHex=br,Kn.fromHex=kr,Kn.fromBase64=wi,Kn.toBase64=mr,Kn.toStandardBase64=ts;function On(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var i=new An(e[0]);return t=new An(t[0]),t=i.resolve(t),n&&ps(t,n),[t.toString()]}t=t.map(function(a){return new An(a)}),i=[],e=v(e);for(var r=e.next();!r.done;r=e.next()){r=new An(r.value);for(var s=v(t),o=s.next();!o.done;o=s.next())o=r.resolve(o.value),n&&ps(o,n),i.push(o.toString())}return i}function Vr(e,t,n,i){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},i&&(e.keySystemUris=new Set([i])),e}function Ic(e,t){t=t===void 0?"cenc":t;var n=[],i=[],r=[];e.forEach(function(o,a){var u=a;u.length!=22&&(u=mr(kr(a),!1));var c=o;c.length!=22&&(c=mr(kr(o),!1)),o={kty:"oct",kid:u,k:c},n.push(o),i.push(o.kid),r.push(a)}),e=JSON.stringify({keys:n});var s=JSON.stringify({kids:i});return s=[{initData:x(Ki(s)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+_.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s,keyIds:new Set(r)}}function vs(e,t){if(t.length==1)return t[0];if(e=si(e,t),e!=null)return e;throw new g(2,4,4025,t)}function si(e,t){var n=qy.get(e);n=v(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;for(var r=v(t),s=r.next();!s.done;s=r.next())if(s=s.value,i.test(s.trim()))return s.trim()}return e==Ot?"":null}function ya(e,t){var n=[];e=qy.get(e),e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=v(t),s=r.next();!s.done;s=r.next())s=s.value,i.test(s.trim())&&n.push(s.trim())}return n}var Ot="text",jn={la:"video",V:"audio",va:Ot,bf:"image",Oj:"application"},Ux=1/15,qy=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function ku(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.o=i,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ne("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Vt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ne("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ne("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ne(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function vh(e,t,n,i){i.type!=="video"||e.o&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.o)}function Wy(e){e.g&&e.i.classList.add("shaka-hidden")}ku.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Xy(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}G("shaka.lcevc.Dec",ku),ku.prototype.release=ku.prototype.release;function ti(e){if(_h.has(e))return _h.get(e);var t=_.ManagedMediaSource||_.MediaSource;return t?(t=t.isTypeSupported(e),_h.set(e,t),t):!1}function Co(){var e=_.ManagedSourceBuffer||_.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType}function Yy(){var e=_.ManagedMediaSource||_.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var _h=new Map;function bu(){}bu.prototype.extract=function(){},bu.prototype.decode=function(){return[]},bu.prototype.clear=function(){},bu.prototype.getStreams=function(){return[]};function Sh(){}Sh.prototype.init=function(){},Sh.prototype.parse=function(){return[]};function Du(){}Du.prototype.init=function(){},Du.prototype.i=function(){},Du.prototype.g=function(){},Du.prototype.j=function(){},G("shaka.media.IClosedCaptionParser",Du);function sr(e){this.l=new Sh,(e=$y(e.toLowerCase()))&&(this.l=e()),this.h=new bu,(e=va)&&(this.h=e())}sr.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},sr.prototype.i=function(e){e=this.l.parse(e),e=v(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=x(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},sr.prototype.g=function(){this.h.clear()},sr.prototype.j=function(){return this.h.getStreams()};function Th(e,t){Eh.set(e,t)}function $y(e){return Eh.get(e)}G("shaka.media.ClosedCaptionParser",sr),sr.findDecoder=function(){return va},sr.unregisterDecoder=function(){va=null},sr.registerDecoder=function(e){va=e},sr.findParser=$y,sr.unregisterParser=function(e){Eh.delete(e)},sr.registerParser=Th;var Eh=new Map,va=null;function Ro(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qi,this.scroll=Qy}G("shaka.text.CueRegion",Ro);var qi=1;Ro.units={PX:0,PERCENTAGE:qi,LINES:2};var Qy="";Ro.scrollMode={NONE:Qy,UP:"up"};function Jy(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Dr(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function wh(e,t,n){if(n||(n=Jy),e.length!=t.length)return!1;t=t.slice(),e=v(e);for(var i=e.next(),r={};!i.done;r={bh:void 0},i=e.next()){if(r.bh=i.value,i=t.findIndex(function(s){return function(o){return n(s.bh,o)}}(r)),i==-1)return!1;t[i]=t[t.length-1],t.pop()}return t.length==0}function _a(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Jy),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Sa(e){this.h=e||"",this.g=0}function Ta(e){ko(e,/[ \t]+/gm)}function ko(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function bo(e){return e.g==e.h.length?null:(e=ko(e,/[^ \t\n]*/gm))?e[0]:null}function Lu(e){if(e=ko(e,Bx),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Ea(e){return e?Lu(new Sa(e)):null}var Bx=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Hr(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||ArrayBuffer.isView(i))return i;if(n.has(i))return null;var r=i.constructor==Array;if(i.constructor!=Object&&!r)return null;n.add(i);var s=r?[]:{},o;for(o in i)s[o]=t(i[o]);return r&&(s.length=i.length),s}}var n=new WeakSet;return t(e)}function Do(e){var t={},n;for(n in e)t[n]=e[n];return t}function Ah(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];r!==void 0&&(r=Ah(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=v(n),i=n.next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),r=e[r],r!==void 0&&(r=Ah(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}function Pu(e,t){var n=n===void 0?!1:n;return e=Rr(e),Lo(e,t,n)}function Lo(e,t,n){return e=jx(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(i){return t.split(",").includes(i.tagName)}))?e:null}function xh(e){return Mh.has(e)?Mh.get(e):""}function jx(e,t){function n(s,o){o=o===void 0?!1:o;for(var a=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){o=r+2,r=e.indexOf(">",r),o=e.substring(o,r);var u=o.indexOf(s);if(u==-1){var c=s.indexOf(".");0<c&&(u=o.indexOf(s.substring(0,c)))}if(u==-1)throw s=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(s.length-1)+`
Column: `+(s[s.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){u=e.indexOf("]]>",r),u==-1?(a.push(e.substr(r+9)),r=e.length):(a.push(e.substring(r+9,u)),r=u+3);continue}r++;continue}e:{c=o,r++;var h=i(),p={};for(u=[];e.charCodeAt(r)!==62&&e[r];){var E=e.charCodeAt(r);if(64<E&&91>E||96<E&&123>E){E=i();for(var A=e.charCodeAt(r);A&&A!==39&&A!==34&&!(64<A&&91>A||96<A&&123>A)&&A!==62;)r++,A=e.charCodeAt(r);var M=r+1;if(r=e.indexOf(e[r],M),M=e.slice(M,r),A===39||A===34){if(r===-1){if(c={tagName:h,attributes:p,children:u,parent:null},t)for(h=0;h<u.length;h++)typeof u[h]!="string"&&(u[h].parent=c);u=c;break e}}else M=null,r--;if(E.startsWith("xmlns:")){A=M;var R=E.split(":")[1];Mh.set(A,R),Ch.set(R,A)}h==="tt"&&E==="xml:space"&&M==="preserve"&&(c=!0),p[E]=M}r++}for(e.charCodeAt(r-1)!==47?(r++,u=n(h,c)):r++,c={tagName:h,attributes:p,children:u,parent:null},h=u.length,p=0;p<h;p++)E=u[p],typeof E!="string"?t&&(E.parent=c):p==h-1&&E==`
`&&u.pop();u=c}if(a.push(u),typeof u=="string")break;u.tagName[0]==="?"&&u.children&&(a.push.apply(a,z(u.children)),u.children=[])}else u=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),u=e.slice(u,r+1),o?0<u.length&&a.push(u):(a.length&&u.length==1&&u[0]==`
`||0<u.trim().length)&&a.push(u),r++;return a}function i(){for(var s=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(s,r)}var r=0;return n("")}function Mc(e){return typeof e=="string"}function Zy(e){var t=[];if(!e.children)return[];e=v(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Jt(e,t){var n=[];if(!e.children)return[];e=v(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function Fn(e){return typeof e=="string"?ri(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:ri(e))}function or(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Fn(e))&&(e=e.trim()),e):null}function Gr(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=v(e.children);for(var i=e.next();!i.done;i=e.next())Gr(i.value,t,n)}return n}function Nn(e,t){return e=Jt(e,t),e.length!=1?null:e[0]}function Lr(e,t,n){return e=ev(e,t,n),e.length!=1?null:e[0]}function Tt(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.attributes[t],e!=null&&(r=n(e)),r??i}function _s(e,t,n){return t=xh(t),e.attributes[t+":"+n]||null}function ev(e,t,n){var i=xh(t);if(t=[],e.children)for(n=i?i+":"+n:n,e=v(e.children),i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function ns(e,t,n){t=v(t);for(var i=t.next();!i.done;i=t.next())if(i=_s(e,i.value,n))return i;return null}function Qs(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function is(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Cc(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Ai(e){return e=Number(e),e%1===0?e:null}function Ss(e){return e=Number(e),e%1===0&&0<e?e:null}function pi(e){return e=Number(e),e%1===0&&0<=e?e:null}function Ou(e){return e=Number(e),isNaN(e)?null:e}function Rc(e){return e?e.toLowerCase()==="true":!1}function Fx(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function kc(e){var t=[];e=ri(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=v(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),s=n.match(/(@t='(\d+)')/),o=n.match(/(@n='(\d+)')/),a=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:a?Number(a[1])-1:null,ac:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].ac=n.slice(1))}return t}function tv(e,t){var n=kc(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,n==null&&(i.t!==null&&(n=nv(e,"t",i.t)),i.n!==null&&(n=nv(e,"n",i.n))),n===null?n=r==="prepend"?0:e.length:r==="prepend"?--n:r==="after"&&++n,r=t.tagName,(i=i.ac)&&e[n]?iv(e[n],r,i,or(t)||""):(r!=="remove"&&r!=="replace"||e.splice(n,1),r!=="add"&&r!=="replace"||e.splice.apply(e,[n,0].concat(z(t.children))))}}function nv(e,t,n){var i=0;e=v(e);for(var r=e.next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function iv(e,t,n,i){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=i)}function rv(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=Ch.has(t)?Ch.get(t):""),t=document.createElementNS(t,e.tagName);for(var i in e.attributes)t.setAttribute(i,e.attributes[i]);for(e=v(e.children),i=e.next();!i.done;i=e.next())i=i.value,n=void 0,typeof i=="string"?n=new Text(i):n=rv(i),t.appendChild(n);return t}function Ih(e){if(!e)return null;var t={tagName:e.tagName,attributes:Do(e.attributes),children:[],parent:null};e=v(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=Ih(n),n.parent=t),t.children.push(n);return t}var Mh=new Map,Ch=new Map;function mn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ro,this.position=null,this.positionAlign=Lc,this.size=0,this.textAlign=rs,this.direction=Bu,this.writingMode=Po,this.lineInterpretation=ju,this.line=null,this.lineHeight="",this.lineAlign=Oo,this.displayAlign=Uu,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=dv,this.fontStyle=bh,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={oc:32,rows:15}}function sv(e,t){return e=new mn(e,t,""),e.lineBreak=!0,e}mn.prototype.clone=function(){var e=new mn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function bc(e,t){if(e.payload!=t.payload||!(.001>Math.abs(e.startTime-t.startTime)&&.001>Math.abs(e.endTime-t.endTime)))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!_a(e.nestedCues,t.nestedCues,bc))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!_a(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function Dc(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&ov(t);var i=n;n=[];for(var r=-1,s=0;s<i.length;s++)i[s]==="<"?r=s+1:i[s]===">"&&0<r&&(r=i.substr(r,s-r),r.match(Hx)&&n.push(r),r=-1);for(n=v(n),s=n.next();!s.done;s=n.next())s=s.value,i=i.replace("<"+s+">",'<div time="'+s+'">'),i+="</div>";e:{s=i,r=[];var o=-1;n="",i=!1;for(var a=0;a<s.length;a++)if(s[a]==="/"){var u=s.indexOf(">",a);if(u===-1){n=s;break e}if((u=s.substring(a+1,u))&&u=="v"){i=!0;var c=null;if(r.length&&(c=r[r.length-1]),c){if(c===u)n+="/"+u+">";else{if(!c.startsWith("v")){n+=s[a];continue}n+="/"+c+">"}a+=u.length+1}else n+=s[a]}else n+=s[a]}else s[a]==="<"?(o=a+1,s[o]!="v"&&(o=-1)):s[a]===">"&&0<o&&(r.push(s.substr(o,a-o)),o=-1),n+=s[a];for(s=v(r),r=s.next();!r.done;r=s.next())r=r.value,o=r.replace(" ",".voice-"),n=n.replace("<"+r+">","<"+o+">"),n=n.replace("</"+r+">","</"+o+">"),i||(n+="</"+o+">")}n=Vx(n),e.payload="";try{var h=Lo("<span>"+n+"</span>","span")}catch{}if(h)if(h=h.children,h.length!=1||h[0].tagName)for(h=v(h),n=h.next();!n.done;n=h.next())av(n.value,e,t);else e.payload=ri(n);else e.payload=ri(n)}else e.payload=ri(n)}function ov(e){for(var t=v(Object.entries(lv)),n=t.next();!n.done;n=t.next()){var i=v(n.value);n=i.next().value,i=i.next().value;var r=new mn(0,0,"");r.color=i,e.set("."+n,r)}for(t=v(Object.entries(cv)),n=t.next();!n.done;n=t.next())i=v(n.value),n=i.next().value,i=i.next().value,r=new mn(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function Vx(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||""}):e||""}function av(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new Ro,i.position=null,i.size=0,i.textAlign=rs,e.tagName)for(var r=v(e.tagName.split(/(?=[ .])+/g)),s=r.next();!s.done;s=r.next()){var o=s=s.value;if(o.startsWith(".voice-")){var a=o.split("-").pop();o='v[voice="'+a+'"]',n.has(o)||(o="v[voice="+a+"]")}switch(n.has(o)&&(a=i,o=n.get(o))&&(a.backgroundColor=Nu(o.backgroundColor,a.backgroundColor),a.color=Nu(o.color,a.color),a.fontFamily=Nu(o.fontFamily,a.fontFamily),a.fontSize=Nu(o.fontSize,a.fontSize),a.textShadow=Nu(o.textShadow,a.textShadow),a.fontWeight=o.fontWeight,a.fontStyle=o.fontStyle,a.opacity=o.opacity,a.rubyTag=o.rubyTag,a.textCombineUpright=o.textCombineUpright,a.wrapLine=o.wrapLine),s){case"br":i=sv(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=wa;break;case"i":i.fontStyle=Aa;break;case"u":i.textDecoration.push(Ts);break;case"font":(s=e.attributes.color)&&(i.color=s);break;case"div":if(s=e.attributes.time,!s)break;(s=Ea(s))&&(i.startTime=s);break;case"ruby":case"rp":case"rt":i.rubyTag=s}}if(r=e.children,Mc(e)||r.length==1&&Mc(r[0]))for(n=Fn(e).split(`
`),e=!0,n=v(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=sv(i.startTime,i.endTime),t.nestedCues.push(e)),0<r.length&&(e=i.clone(),e.payload=ri(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=v(r),e=t.next();!e.done;e=t.next())av(e.value,i,n)}function Nu(e,t){return e&&0<e.length?e:t}G("shaka.text.Cue",mn),mn.parseCuePayload=Dc,mn.equal=bc,mn.prototype.clone=mn.prototype.clone;var Lc="auto";mn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Lc};var rs="center",Rh={LEFT:"left",RIGHT:"right",CENTER:rs,START:"start",END:"end"};mn.textAlign=Rh;var Uu="after",uv={BEFORE:"before",CENTER:"center",AFTER:Uu};mn.displayAlign=uv;var Bu="ltr";mn.direction={HORIZONTAL_LEFT_TO_RIGHT:Bu,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Po="horizontal-tb";mn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Po,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ju=0;mn.lineInterpretation={LINE_NUMBER:ju,PERCENTAGE:1};var Oo="start",kh={CENTER:"center",START:Oo,END:"end"};mn.lineAlign=kh;var lv={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};mn.defaultTextColor=lv;var cv={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};mn.defaultTextBackgroundColor=cv;var dv=400,wa=700;mn.fontWeight={NORMAL:dv,BOLD:wa};var bh="normal",Aa="italic",fv={NORMAL:bh,ITALIC:Aa,OBLIQUE:"oblique"};mn.fontStyle=fv;var Ts="underline";mn.textDecoration={UNDERLINE:Ts,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Hx=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Js(){}Js.prototype.destroy=function(){};function Es(e,t,n){Dh.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,we:t})}function Zs(e,t){for(var n=e.toLowerCase().split(";")[0],i=v([hv,Ph,Lh,eo]),r=i.next();!r.done;r=i.next())if(r=Dh.get(n+"-"+r.value)){var s=r.we(),o=s.isSupported(e,t);if(s.destroy(),o)return r.we}return null}G("shaka.transmuxer.TransmuxerEngine",Js),Js.findTransmuxer=Zs,Js.unregisterTransmuxer=function(e,t){Dh.delete(e.toLowerCase().split(";")[0]+"-"+t)},Js.registerTransmuxer=Es,Js.prototype.destroy=Js.prototype.destroy;var Dh=new Map,eo=1,Lh=2,Ph=3,hv=4;Js.PluginPriority={FALLBACK:eo,PREFERRED_SECONDARY:Lh,PREFERRED:Ph,APPLICATION:hv};function Oh(){}function Ln(e,t){var n=e;return t&&!ws.includes(e)&&(n+='; codecs="'+t+'"'),n}function xa(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Nh(e,t,n){var i=Ln(e,t);return t=xa(e,t),Zs(t)?(e=Zs(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function Gx(e,t,n){var i=[t];return zx.forEach(function(r,s){var o=e[s];s=="codecs"?ws.includes(e.mimeType)||i.push('codecs="'+n+'"'):o&&i.push(r+'="'+o+'"')}),e.hdr=="PQ"&&i.push('eotf="smpte2084"'),i.join(";")}function Pc(e){return e.split(";")[0].split("/")[1]}function oi(e){var t=pv(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function to(e){var t=[];e=v(e.split(","));for(var n=e.next();!n.done;n=e.next())n=pv(n.value),t.push(n[0]);return t.sort().join(",")}function Wi(e){return e.split(";")[0]}function Xi(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Uh(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function pv(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}G("shaka.util.MimeUtils",Oh),Oh.getFullTypeWithAllCodecs=xa,Oh.getFullType=Ln;var zx=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),ws=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function As(e){this.i=null,this.j=e,this.B=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function ni(e,t){Vu.set(e,t)}function Fu(e){return Vu.get(e)}function Ia(e){return Vu.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!va:!1}As.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function Kx(e,t,n,i,r){var s,o,a,u,c,h,p;return X(function(E){if(E.g==1)return T(E,Promise.resolve(),2);if(!e.i||!e.j)return E.return();if(n==null||i==null)return e.i.parseInit(x(t)),E.return();for(s=e.B?n:e.u,o={periodStart:e.u,segmentStart:n,segmentEnd:i,vttOffset:s},a=e.i.parseMedia(x(t),o,r,[]),u=v(a),c=u.next();!c.done;c=u.next())h=c.value,e.A(h,r||null,o);p=a.filter(function(A){return A.startTime>=e.l&&A.startTime<e.m}),e.j.append(p),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),H(E)})}As.prototype.remove=function(e,t){var n=this;return X(function(i){if(i.g==1)return T(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),H(i)})};function qx(e,t,n){e.l=t,e.m=n}function mv(e,t,n){if(e.C=t,t=e.o.get(t))for(var i=v(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(s){return s.endTime<=n}))&&e.j.append(r)}function gv(e,t,n){t.startTime+=n,t.endTime+=n,t=v(t.nestedCues);for(var i=t.next();!i.done;i=t.next())gv(e,i.value,n)}function Wx(e,t,n,i,r){var s=n+" "+i,o=new Map;t=v(t);for(var a=t.next();!a.done;a=t.next()){var u=a.value;a=u.stream,u=u.cue,o.has(a)||o.set(a,new Map),o.get(a).has(s)||o.get(a).set(s,[]),gv(e,u,r),u.startTime>=e.l&&u.startTime<e.m&&(o.get(a).get(s).push(u),a==e.C&&e.j.append([u]))}for(r=v(o.keys()),s=r.next();!s.done;s=r.next())for(s=s.value,e.o.has(s)||e.o.set(s,new Map),t=v(o.get(s).keys()),a=t.next();!a.done;a=t.next())a=a.value,u=o.get(s).get(a),e.o.get(s).set(a,u);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}G("shaka.text.TextEngine",As),As.prototype.destroy=As.prototype.destroy,As.findParser=Fu,As.unregisterParser=function(e){Vu.delete(e)},As.registerParser=ni;var Vu=new Map;function Xx(e,t){return e.concat(t)}function Yx(){}function no(e){return e!=null}function Hu(e,t){return Promise.race([t,new Promise(function(n,i){new se(i).da(e)})])}function Pr(){}function Ma(e,t){return e=un(e),t=un(t),e.split("-")[0]==t.split("-")[0]}function Gu(e,t){return e=un(e),t=un(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Bh(e,t){return e=un(e),t=un(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function un(e){e=v(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=v(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=yv.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function No(e,t){return e=un(e),t=un(t),t==e?4:Gu(t,e)?3:Bh(t,e)?2:Gu(e,t)?1:0}function jh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=yv.get(e)||e}function Fh(e){return e.language?un(e.language):e.audio&&e.audio.language?un(e.audio.language):e.video&&e.video.language?un(e.video.language):"und"}function Oc(e,t){e=un(e);var n=new Set;t=v(t);for(var i=t.next();!i.done;i=t.next())n.add(un(i.value));for(t=v(n),i=t.next();!i.done;i=t.next())if(i=i.value,i==e)return i;for(t=v(n),i=t.next();!i.done;i=t.next())if(i=i.value,Gu(i,e))return i;for(t=v(n),i=t.next();!i.done;i=t.next())if(i=i.value,Bh(i,e))return i;for(n=v(n),t=n.next();!t.done;t=n.next())if(t=t.value,Gu(e,t))return t;return null}G("shaka.util.LanguageUtils",Pr),Pr.findClosestLocale=Oc,Pr.getLocaleForVariant=Fh,Pr.getLocaleForText=function(e){return un(e.language||"und")},Pr.getBase=jh,Pr.relatedness=No,Pr.areSiblings=function(e,t){var n=jh(e),i=jh(t);return e!=n&&t!=i&&n==i},Pr.normalize=un,Pr.isSiblingOf=Bh,Pr.isParentOf=Gu,Pr.areLanguageCompatible=Ma,Pr.areLocaleCompatible=function(e,t){return e=un(e),t=un(t),e==t};var yv=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function vv(){}function _v(e,t,n,i,r){function s(b){var U=String(b.width||"")+String(b.height||"")+String(Math.round(b.frameRate||0))+(b.hdr||"")+b.fastSwitching;return b.dependencyStream&&(U+=b.dependencyStream.baseOriginalId||""),U}function o(b){var U=b.language+(b.channelsCount||0)+(b.audioSamplingRate||0)+b.roles.join(",")+b.label+b.groupId+b.fastSwitching;return b.dependencyStream&&(U+=b.dependencyStream.baseOriginalId||""),U}if(r.length){var a=e.textStreams;r=v(r);for(var u=r.next(),c={};!u.done;c={ug:void 0},u=r.next())if(c.ug=u.value,u=a.filter(function(b){return function(U){return!!(U.codecs.startsWith(b.ug)||U.mimeType.startsWith(b.ug))}}(c)),u.length){a=u;break}e.textStreams=a}if(a=e.variants,(t.length||n.length)&&(a=$x(a,t,n)),i.length){for(t=new Qt,n=v(a),a=n.next();!a.done;a=n.next())a=a.value,t.push(String(a.video.width||0),a);var h=[];t.forEach(function(b,U){b=0;var $=[];U=v(U);for(var Q=U.next(),re={};!Q.done;re={Se:void 0},Q=U.next())re.Se=Q.value,Q=i.filter(function(W){return function(q){return W.Se.decodingInfos[0][q]}}(re)).length,Q>b?(b=Q,$=[re.Se]):Q==b&&$.push(re.Se);h.push.apply(h,z($))}),a=h}for(n=new Set,t=new Set,a=v(a),r=a.next();!r.done;r=a.next())r=r.value,r.audio&&n.add(r.audio),r.video&&t.add(r.video);a=Array.from(n).sort(function(b,U){return b.bandwidth-U.bandwidth});var p=[];for(n=new Map,a=v(a),r=a.next();!r.done;r=a.next()){if(r=r.value,u=o(r),c=n.get(u)||[],c.length){var E=c[c.length-1],A=oi(E.codecs),M=oi(r.codecs);A!=M||r.bandwidth&&E.bandwidth&&!(r.bandwidth>E.bandwidth)||(c.push(r),p.push(r.id))}else c.push(r),p.push(r.id);n.set(u,c)}var R={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};a=Array.from(t).sort(function(b,U){if(!b.bandwidth||!U.bandwidth||b.bandwidth==U.bandwidth){if(b.codecs&&U.codecs&&b.codecs!=U.codecs&&b.width==U.width){var $=oi(b.codecs),Q=oi(U.codecs);if($!=Q)return(R[$]||1)-(R[Q]||1)}return b.width-U.width}return b.bandwidth-U.bandwidth}),t=Co();var C=[];for(n=new Map,a=v(a),r=a.next();!r.done;r=a.next()){if(r=r.value,u=s(r),c=n.get(u)||[],c.length){if(E=c[c.length-1],!t&&(A=oi(E.codecs),M=oi(r.codecs),A!==M))continue;A=oi(E.codecs),M=oi(r.codecs),A!=M||r.bandwidth&&E.bandwidth&&!(r.bandwidth>E.bandwidth)||(c.push(r),C.push(r.id))}else c.push(r),C.push(r.id);n.set(u,c)}e.variants=e.variants.filter(function(b){var U=b.audio;return b=b.video,!(U&&!p.includes(U.id)||b&&!C.includes(b.id))})}function $x(e,t,n){t=v(t);for(var i=t.next(),r={};!i.done;r={Mh:void 0},i=t.next())if(r.Mh=i.value,i=e.filter(function(s){return function(o){return o.video&&o.video.codecs.startsWith(s.Mh)}}(r)),i.length){e=i;break}for(n=v(n),t=n.next(),i={};!t.done;i={Eg:void 0},t=n.next())if(i.Eg=t.value,t=e.filter(function(s){return function(o){return o.audio&&o.audio.codecs.startsWith(s.Eg)}}(i)),t.length){e=t;break}return e}function Qx(e,t,n){e.variants=e.variants.filter(function(i){return Nc(i,t,n)})}function Nc(e,t,n){function i(a,u,c){return a>=u&&a<=c}var r=e.video;if(r&&r.width&&r.height){var s=r.width,o=r.height;if(o>s&&(o=v([o,s]),s=o.next().value,o=o.next().value),!i(s,t.minWidth,Math.min(t.maxWidth,n.width))||!i(o,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Jx(e,t,n,i){return n=n===void 0?[]:n,i=i===void 0?{}:i,X(function(r){return r.g==1?T(r,Sv(e,t,0<t.offlineSessionIds.length,n,i),2):(n2(t),T(r,i2(t),0))})}function Sv(e,t,n,i,r){var s,o;return X(function(a){if(a.g==1)return nt()&&Zx(t.variants),T(a,Ev(t.variants,n,!1,i),2);s=null,e&&(o=e.h)&&(s=o.keySystem),t.variants=t.variants.filter(function(u){var c=e2(u,s,r);if(!c){var h=[];u.audio&&h.push(Mv(u.audio)),u.video&&h.push(Mv(u.video))}return c}),H(a)})}function Zx(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=v(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&n.add(i.video);for(n=v(n),e=n.next();!e.done;e=n.next()){e=e.value,i=v(t);for(var r=i.next();!r.done;r=i.next()){var s=v(r.value);if(r=s.next().value,s=s.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,s);break}}}}function e2(e,t,n){if(!e.decodingInfos.some(function(u){return!(!u.supported||t&&(u=u.keySystemAccess)&&(n[u.keySystem]||u.keySystem)!=t)}))return!1;var i=nt(),r=an("Firefox")&&qt(),s=e.video,o=s&&s.width||0,a=s&&s.height||0;return i&&s&&(1920<o||1080<a)&&(s.codecs.includes("avc1.")||s.codecs.includes("avc3."))||(i=s&&s.dependencyStream)&&!Xy(i)?!1:(e=e.audio,!(r&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function Tv(e,t){var n,i,r,s,o,a,u;return X(function(c){if(c.g==1){for(n=function(h,p){if(h){var E=Do(h);return E.supported=h.supported&&p.supported,E.powerEfficient=h.powerEfficient&&p.powerEfficient,E.smooth=h.smooth&&p.smooth,p.keySystemAccess&&!E.keySystemAccess&&(E.keySystemAccess=p.keySystemAccess),E}return p},i=null,r=[],s=v(t),o=s.next(),a={};!o.done;a={cache:void 0,Ud:void 0},o=s.next())u=o.value,a.Ud=Ah(u),a.cache=Bc,a.cache.has(a.Ud)?i=n(i,a.cache.get(a.Ud)):r.push(t2(u).then(function(h){return function(p){var E=null;p=v(p||[]);for(var A=p.next();!A.done;A=p.next())E=n(E,A.value);E&&(h.cache.set(h.Ud,E),i=n(i,E))}}(a)));return T(c,Promise.all(r),2)}i&&e.decodingInfos.push(i),H(c)})}function t2(e){var t=[""];e.video&&(t=Xi(e.video.contentType).split(","));var n=[""];e.audio&&(n=Xi(e.audio.contentType).split(","));var i=[];t=v(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var s=v(n),o=s.next(),a={};!o.done;a={pc:void 0},o=s.next())o=o.value,a.pc=Hr(e),e.video&&(a.pc.video.contentType=Ln(Wi(a.pc.video.contentType),r)),e.audio&&(a.pc.audio.contentType=Ln(Wi(a.pc.audio.contentType),o)),i.push(new Promise(function(u){return function(c,h){(qt()?Hu(5,navigator.mediaCapabilities.decodingInfo(u.pc)):navigator.mediaCapabilities.decodingInfo(u.pc)).then(function(p){c(p)}).catch(h)}}(a)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function Ev(e,t,n,i){var r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re;return X(function(W){switch(W.g){case 1:if(e.some(function(q){return q.decodingInfos.length}))return W.return();r=v(i),s=r.next(),o={};case 2:if(s.done){W.s(4);break}o.nh=s.value,a=!1,u=v(e),c=u.next();case 5:if(c.done){W.s(7);break}h=c.value,p=wv(h,t,n).filter(function(q){return function(ne){return ne=ne[0],(ne.keySystemConfiguration&&ne.keySystemConfiguration.keySystem)===q.nh}}(o)),E=v(p),A=E.next();case 8:if(A.done){W.s(10);break}return M=A.value,T(W,Tv(h,M),9);case 9:A=E.next(),W.s(8);break;case 10:h.decodingInfos.length&&(a=!0),c=u.next(),W.s(5);break;case 7:if(a)return W.return();o={nh:void 0},s=r.next(),W.s(2);break;case 4:R=v(e),C=R.next();case 12:if(C.done){W.s(0);break}b=C.value,U=wv(b,t,n).filter(function(q){return q=q[0],q=q.keySystemConfiguration&&q.keySystemConfiguration.keySystem,!q||!i.includes(q)}),$=v(U),Q=$.next();case 15:if(Q.done){C=R.next(),W.s(12);break}return re=Q.value,T(W,Tv(b,re),16);case 16:Q=$.next(),W.s(15)}})}function wv(e,t,n){var i=e.audio,r=e.video,s=[],o=[];if(r)for(var a=v(r.fullMimeTypes),u=a.next();!u.done;u=a.next()){u=u.value;var c=Xi(u);if(c.includes(",")&&!i){var h=c.split(","),p=Wi(u);c=vs("video",h),h=vs("audio",h),h=zu(h,p),p=Nh(p,h,"audio"),o.push({contentType:p,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(c=Vh(c),u={contentType:Nh(Wi(u),c,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":u.transferFunction="srgb";break;case"PQ":u.transferFunction="pq";break;case"HLG":u.transferFunction="hlg"}r.colorGamut&&(u.colorGamut=r.colorGamut),s.push(u)}if(i)for(a=v(i.fullMimeTypes),u=a.next();!u.done;u=a.next())c=u.value,u=Wi(c),c=zu(Xi(c),u),u=Nh(u,c,"audio"),o.push({contentType:u,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(a=[],s.length==0&&s.push(null),o.length==0&&o.push(null),s=v(s),u=s.next();!u.done;u=s.next())for(u=u.value,c=v(o),p=c.next();!p.done;p=c.next())p=p.value,h={type:n?"file":"media-source"},u&&(h.video=u),p&&(h.audio=p),a.push(h);if(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!o.length)return[a];for(e=[],n=new Map,o=v(o),s=o.next();!s.done;s=o.next())s=s.value,n.get(s.keySystem)||n.set(s.keySystem,[]),n.get(s.keySystem).push(s);for(o=t?"required":"optional",t=t?["persistent-license"]:["temporary"],s=v(n.keys()),u=s.next();!u.done;u=s.next()){for(u=u.value,p=n.get(u),c=new Map,p=v(p),h=p.next();!h.done;h=p.next()){h=h.value;var E=h.videoRobustness+","+h.audioRobustness;c.get(E)||c.set(E,[]),c.get(E).push(h)}for(c=v(c.values()),p=c.next();!p.done;p=c.next()){p=p.value,h=[],E=v(a);for(var A=E.next();!A.done;A=E.next()){A=Object.assign({},A.value);for(var M={keySystem:u,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},R=v(p),C=R.next();!C.done;C=R.next()){if(C=C.value,C.initData&&C.initData.length){for(var b=new Set,U=v(C.initData),$=U.next();!$.done;$=U.next())b.add($.value.initDataType);M.initDataType=C.initData[0].initDataType}C.distinctiveIdentifierRequired&&(M.distinctiveIdentifier="required"),C.persistentStateRequired&&(M.persistentState="required"),C.sessionType&&(M.sessionTypes=[C.sessionType]),i&&(M.audio?(C.encryptionScheme&&(M.audio.encryptionScheme=M.audio.encryptionScheme||C.encryptionScheme),M.audio.robustness=M.audio.robustness||C.audioRobustness):(M.audio={robustness:C.audioRobustness},C.encryptionScheme&&(M.audio.encryptionScheme=C.encryptionScheme)),M.audio.robustness==""&&delete M.audio.robustness),r&&(M.video?(C.encryptionScheme&&(M.video.encryptionScheme=M.video.encryptionScheme||C.encryptionScheme),M.video.robustness=M.video.robustness||C.videoRobustness):(M.video={robustness:C.videoRobustness},C.encryptionScheme&&(M.video.encryptionScheme=C.encryptionScheme)),M.video.robustness==""&&delete M.video.robustness)}A.keySystemConfiguration=M,h.push(A)}e.push(h)}}return e}function zu(e,t){return e.toLowerCase()=="flac"?At()?"fLaC":"flac":e.toLowerCase()==="opus"?At()&&Pc(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&Xe()?"ec-3":e}function Vh(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function n2(e){e.textStreams=e.textStreams.filter(function(t){return t=Ln(t.mimeType,t.codecs),Ia(t)})}function i2(e){var t,n,i,r,s,o,a;return X(function(u){switch(u.g){case 1:t=[],n=v(e.imageStreams),i=n.next();case 2:if(i.done){u.s(4);break}if(r=i.value,s=r.mimeType,s=="application/mp4"&&r.codecs=="mjpg"&&(s="image/jpg"),jc.has(s)){u.s(5);break}if(o=o2.get(s),!o){jc.set(s,!1),u.s(5);break}return T(u,r2(o),7);case 7:a=u.h,jc.set(s,a);case 5:jc.get(s)&&t.push(r),i=n.next(),u.s(2);break;case 4:e.imageStreams=t,H(u)}})}function r2(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Uo(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,s=t?t.codecs:null,o=n?n.codecs:null,a=t?t.groupId:null,u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var c=[];t&&c.push(t.kind),n&&c.push(n.kind),c=c[0]||null;var h=new Set;if(t)for(var p=v(t.roles),E=p.next();!E.done;E=p.next())h.add(E.value);if(n)for(p=v(n.roles),E=p.next();!E.done;E=p.next())h.add(E.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:u,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:s,videoCodec:o,primary:e.primary,roles:Array.from(h),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec),o.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,n=o.split(",");try{e.videoCodec=vs("video",n),e.audioCodec=vs("audio",n)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Bo(e){return{id:e.id,active:!1,type:Ot,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Hh(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=Kr(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Gh(e){return e.__shaka_id||(e.__shaka_id=s2++),e.__shaka_id}function zh(e){var t=Av(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Av(e){var t=e.language;return{id:Gh(e),active:!1,type:"",bandwidth:0,language:un(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Ku(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Uc(e){return e.filter(function(t){return Ku(t)})}function Ca(e,t,n,i){var r=e,s=e.filter(function(u){return u.primary});s.length&&(r=s);var o=r.length?r[0].language:"";if(r=r.filter(function(u){return u.language==o}),t){var a=Oc(un(t),e.map(function(u){return u.language}));a&&(r=e.filter(function(u){return un(u.language)==a}))}if(r=r.filter(function(u){return u.forced==i}),n){if(e=xv(r,n),e.length)return e}else if(e=r.filter(function(u){return u.roles.length==0}),e.length)return e;return e=r.map(function(u){return u.roles}).reduce(Xx,[]),e.length?xv(r,e[0]):r}function xv(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Iv(e,t){t.length&&(t=t.filter(function(n){return oi(e.codecs)==oi(n.codecs)}).sort(function(n,i){return n.bandwidth&&i.bandwidth&&n.bandwidth!=i.bandwidth?n.bandwidth-i.bandwidth:(n.width||0)-(i.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function Mv(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function Cv(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var i=un(n.preferredTextLanguage);return t=un(t.language),n.autoShowText==2?Ma(t,i):n.autoShowText==3?e?(e=un(e.language),Ma(t,i)&&!Ma(e,t)):!1:(Ne("Invalid autoShowText setting!"),!1)}G("shaka.util.StreamUtils",vv),vv.meetsRestrictions=Nc;var Bc=new Map,s2=0,jc=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),o2=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function xn(){var e=this;this.G=null,this.o=!1,this.m=new Ve,this.j=new _t,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.m=new Ve,e.g&&e.m.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.l=this.g=this.u=null,this.A=new se(function(){if(e.o&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.B=_,"documentPictureInPicture"in _&&this.j.D(_.documentPictureInPicture,"enter",function(){e.B=_.documentPictureInPicture.window,e.A&&e.A.sb(),e.j.qa(e.B,"pagehide",function(){e.B=_,e.A&&e.A.sb()})}),this.C=this.i=null}d=xn.prototype,d.stop=function(){this.G=null,this.o=!1,this.F=[],this.H=1,this.l=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.A.stop(),this.C=this.i=null},d.release=function(){this.j.release(),this.A=null},d.init=function(e){this.G=e},d.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;e=this.B.screen.height*n,t=this.B.screen.width*n}if(this.h&&this.g.restrictToElementSize){n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;var i=this.l.clientHeight,r=this.l.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.l&&(i=this.i.height,r=this.i.width),e=Math.min(e,i*n),t=Math.min(t,r*n)}if(n=this.F.filter(function(c){return c&&!(c.audio&&c.audio.fastSwitching||c.video&&c.video.fastSwitching)}),n.length||(n=this.F),i=n,n.length!=this.F.length&&(i=this.F.filter(function(c){return c&&!!(c.audio&&c.audio.fastSwitching||c.video&&c.video.fastSwitching)})),n=Kh(this,this.g.restrictions,i,1/0,1/0),e!=1/0||t!=1/0){for(n=a2(n),n=v(n),r=n.next();!r.done;r=n.next())if(r=r.value,r.height>=e&&r.width>=t){e=r.height,t=r.width;break}n=Kh(this,this.g.restrictions,i,e,t)}for(e=this.getBandwidthEstimate(),i.length&&!n.length&&(n=Kh(this,null,i,1/0,1/0),n=[n[0]]),t=n[0]||null,i=0;i<n.length;i++){r=n[i];for(var s=isNaN(this.H)?1:Math.abs(this.H),o=s*r.bandwidth/this.g.bandwidthDowngradeTarget,a={bandwidth:1/0},u=i+1;u<n.length;u++)if(r.bandwidth!=n[u].bandwidth){a=n[u];break}s=s*a.bandwidth/this.g.bandwidthUpgradeTarget,e>=o&&e<=s&&(t.bandwidth!=r.bandwidth||t.bandwidth==r.bandwidth&&t.video&&r.video&&(t.video.width<r.video.width||t.video.height<r.video.height))&&(t=r)}return this.u=Date.now(),t},d.enable=function(){this.o=!0},d.disable=function(){this.o=!1},d.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.m.sample(e,t),n&&this.u!=null&&this.o&&Rv(this))},d.trySuggestStreams=function(){this.u!=null&&this.o&&Rv(this)},d.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.m.getBandwidthEstimate(e),this.C?this.C.getBandwidthEstimate(e):e)},d.setVariants=function(e){this.F=e},d.playbackRateChanged=function(e){this.H=e},d.setMediaElement=function(e){function t(){n.A.da(u2)}var n=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in _&&(this.h=new ResizeObserver(t),this.h.observe(this.l)),this.j.D(e,"enterpictureinpicture",function(i){i.pictureInPictureWindow&&(n.i=i.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ka(n.i,"resize",t),n.i=null})},d.setCmsdManager=function(e){this.C=e},d.configure=function(e){this.g=e,this.m&&this.g&&this.m.configure(this.g.advanced)};function Rv(e){if(!e.I){var t=e.m;if(!(t.g>=t.i))return;e.I=!0,e.u-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.u<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Kh(e,t,n,i,r){if(e.C){var s=e.C.Vg();s&&(n=n.filter(function(o){return o.bandwidth&&s?o.bandwidth<=s:!0}))}return t&&(n=n.filter(function(o){return Nc(o,t,{width:r,height:i})})),n.sort(function(o,a){return o.bandwidth-a.bandwidth})}function a2(e){var t=[];e=v(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}G("shaka.abr.SimpleAbrManager",xn),xn.prototype.configure=xn.prototype.configure,xn.prototype.setCmsdManager=xn.prototype.setCmsdManager,xn.prototype.setMediaElement=xn.prototype.setMediaElement,xn.prototype.playbackRateChanged=xn.prototype.playbackRateChanged,xn.prototype.setVariants=xn.prototype.setVariants,xn.prototype.getBandwidthEstimate=xn.prototype.getBandwidthEstimate,xn.prototype.trySuggestStreams=xn.prototype.trySuggestStreams,xn.prototype.segmentDownloaded=xn.prototype.segmentDownloaded,xn.prototype.disable=xn.prototype.disable,xn.prototype.enable=xn.prototype.enable,xn.prototype.chooseVariant=xn.prototype.chooseVariant,xn.prototype.init=xn.prototype.init,xn.prototype.release=xn.prototype.release,xn.prototype.stop=xn.prototype.stop;var u2=1;G("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function kv(e,t){var n=zr();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function bv(e){var t,n;return X(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new g(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),T(i,new Promise(function(r){new se(r).da(n/1e3)}),2))}e.h*=e.m,H(i)})}function zr(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function rn(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}rn.prototype.resolve=function(){},rn.prototype.reject=function(){};function Pn(e,t){this.promise=e,this.i=t,this.g=null}function jo(e){return new Pn(Promise.reject(e),function(){return Promise.resolve()})}function qh(){var e=Promise.reject(new g(2,7,7001));return e.catch(function(){}),new Pn(e,function(){return Promise.resolve()})}function Ra(e){return new Pn(Promise.resolve(e),function(){return Promise.resolve()})}function Dv(e){return new Pn(e,function(){return e.catch(function(){})})}Pn.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function Lv(e){return new Pn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Pn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Pn.prototype.Ha=function(e,t){function n(a){return function(u){if(r.g&&a)s.reject(o);else{var c=a?e:t;c?i=l2(c,u,s):(a?s.resolve:s.reject)(u)}}}function i(){return s.reject(o),r.abort()}var r=this,s=new rn;s.catch(function(){});var o=new g(2,7,7001);return this.promise.then(n(!0),n(!1)),new Pn(s,function(){return i()})};function l2(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}j.Object.defineProperties(Pn.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),G("shaka.util.AbortableOperation",Pn),Pn.prototype.chain=Pn.prototype.Ha,Pn.prototype.finally=Pn.prototype.finally,Pn.all=Lv,Pn.prototype.abort=Pn.prototype.abort,Pn.notAbortable=Dv,Pn.completed=Ra,Pn.aborted=qh,Pn.failed=jo;function qe(e,t){if(t)if(t instanceof Map)for(var n=v(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=_.performance&&_.performance.now?_.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Pv(e){var t=new qe(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}qe.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},qe.prototype.stopImmediatePropagation=function(){this.g=!0},qe.prototype.stopPropagation=function(){},G("shaka.util.FakeEvent",qe);var Fc={Qj:"abrstatuschanged",Rj:"adaptation",Sj:"audiotrackchanged",Tj:"audiotrackschanged",Uj:"boundarycrossed",Vj:"buffering",Wj:"complete",Xj:"downloadcompleted",Yj:"downloadfailed",Zj:"downloadheadersreceived",$j:"drmsessionupdate",bk:"emsg",wk:"prft",Error:"error",ck:"expirationupdated",dk:"firstquartile",ek:"gapjumped",hk:"keystatuschanged",lk:"loaded",mk:"loading",pk:"manifestparsed",qk:"manifestupdated",rk:"mediaqualitychanged",sk:"mediasourcerecovered",Metadata:"metadata",tk:"midpoint",uk:"nospatialvideoinfo",vk:"onstatechange",xk:"ratechange",zk:"segmentappended",Ak:"sessiondata",Bk:"spatialvideoinfo",Ck:"stalldetected",Dk:"started",Ek:"statechanged",Fk:"streaming",Gk:"textchanged",Hk:"texttrackvisibility",Ik:"thirdquartile",Jk:"timelineregionadded",Kk:"timelineregionenter",Lk:"timelineregionexit",Mk:"trackschanged",Ok:"unloading",Qk:"variantchanged"};function sn(){this.Ea=new Qt,this.Te=this}sn.prototype.addEventListener=function(e,t){this.Ea&&this.Ea.push(e,t)},sn.prototype.removeEventListener=function(e,t){this.Ea&&this.Ea.remove(e,t)},sn.prototype.dispatchEvent=function(e){if(!this.Ea)return!0;var t=this.Ea.get(e.type)||[],n=this.Ea.get("All");for(n&&(t=t.concat(n)),t=v(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Te,e.currentTarget=this.Te;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},sn.prototype.release=function(){this.Ea=null};function ka(){this.g=[]}function Fo(e,t){e.g.push(t.finally(function(){Dr(e.g,t)}))}ka.prototype.destroy=function(){for(var e=[],t=v(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function hn(e,t,n,i,r,s,o){sn.call(this),this.i=!1,this.u=new ka,this.g=new Set,this.h=new Set,this.m=e||null,this.l=t||null,this.C=n||null,this.F=i||null,this.G=r||null,this.I=s||null,this.H=o||null,this.A=this.B=!1,this.o=16e3,this.j=new Map}He(hn,sn),d=hn.prototype,d.mg=function(e){this.B=e},d.ng=function(e){this.A=e};function xs(e,t,n,i){i=i===void 0?!1:i,n=n||jv;var r=Hc.get(e);(!r||n>=r.priority)&&Hc.set(e,{priority:n,we:t,kj:i})}function Ov(e,t){for(var n=v(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=v(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}d.nj=function(e){this.g.add(e)},d.Jj=function(e){this.g.delete(e)},d.ai=function(){this.g.clear()},d.oj=function(e){this.h.add(e)},d.Kj=function(e){this.h.delete(e)},d.bi=function(){this.h.clear()},d.Jg=function(){this.j.clear()};function qn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}d.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),this.j.clear(),sn.prototype.release.call(this),this.u.destroy()},d.request=function(e,t,n){var i=this,r=new Bv;if(this.i){var s=Promise.reject(new g(2,7,7001));return s.catch(function(){}),new Vc(s,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Hr(t.retryParameters):zr(),t.uris=Hr(t.uris),s=c2(this,e,t,n);var o=s.Ha(function(){return Nv(i,e,t,n,new kv(t.retryParameters,!1),0,null,r)}),a=o.Ha(function(E){return d2(i,e,E,n)}),u=Date.now(),c=0;s.promise.then(function(){c=Date.now()-u},function(){});var h=0;o.promise.then(function(){h=Date.now()},function(){});var p=a.Ha(function(E){var A=Date.now()-h,M=E.response;return M.timeMs+=c,M.timeMs+=A,E.Qi||!i.m||M.fromCache||t.method=="HEAD"||e!=Or||i.m(M.timeMs,M.data.byteLength,Uv(n)),i.H&&i.H(e,M,n),M},function(E){throw E&&(E.severity=2),E});return s=new Vc(p.promise,function(){return p.abort()},r),Fo(this.u,s),s};function c2(e,t,n,i){function r(a){s=s.Ha(function(){return n.body&&(n.body=zi(n.body)),a(t,n,i)})}var s=Ra(void 0);e.G&&r(e.G),e=v(e.g);for(var o=e.next();!o.done;o=e.next())r(o.value);return s.Ha(void 0,function(a){throw a instanceof g&&a.code==7001?a:new g(2,1,1006,a)})}function Nv(e,t,n,i,r,s,o,a){e.B&&(n.uris[s]=n.uris[s].replace("https://","http://")),e.A&&(n.uris[s]=n.uris[s].replace("http://","https://")),0<s&&e.I&&e.I(t,i,n.uris[s],n.uris[s-1]);var u=new An(n.uris[s]),c=u.Kb,h=!1;c||(c=location.protocol,c=c.slice(0,-1),pa(u,c),n.uris[s]=u.toString()),c=c.toLowerCase();var p=(c=Hc.get(c))?c.we:null;if(!p)return jo(new g(2,1,1e3,u));var E=c.kj;(u=e.j.get(u.nb))&&(n.headers["common-access-token"]=u);var A=null,M=null,R=!1,C=!1,b;return Dv(bv(r)).Ha(function(){if(e.i)return qh();b=Date.now();var U=0;n.requestStartTime=Date.now();var $=p(n.uris[s],n,t,function(W,q,ne){A&&A.stop(),M&&M.da(re/1e3),e.m&&t==Or&&(U++,n.packetNumber=U,e.m(W,q,Uv(i),n),h=!0,a.g=ne)},function(W){C=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.l&&e.l(W,n,t)},{minBytesForProgressEvents:e.o});if(!E)return $;var Q=n.retryParameters.connectionTimeout;Q&&(A=new se(function(){R=!0,$.abort()}),A.da(Q/1e3));var re=n.retryParameters.stallTimeout;return re&&(M=new se(function(){R=!0,$.abort()})),$}).Ha(function(U){A&&A.stop(),M&&M.stop(),U.timeMs==null&&(U.timeMs=Date.now()-b);var $=U.headers["common-access-token"];if($){var Q=new An(U.uri);e.j.set(Q.nb,$)}return $={response:U,Qi:h},!C&&e.l&&e.l(U.headers,n,t),e.C&&e.C(n,U),$},function(U){if(A&&A.stop(),M&&M.stop(),e.F){var $=null,Q=0;U instanceof g&&($=U,U.code==1001&&(Q=U.data[1])),e.F(n,$,Q,R)}if(e.i)return qh();if(R&&(U=new g(1,1,1003,n.uris[s],t)),U instanceof g){if(U.code==7001)throw U;if(U.code==1010)throw o;if(U.severity==1){if($=new Map().set("error",U),$=new qe("retry",$),$.cancelable=!0,e.dispatchEvent($),$.defaultPrevented)throw U;return s=(s+1)%n.uris.length,Nv(e,t,n,i,r,s,U,a)}}throw U})}function d2(e,t,n,i){var r=Ra(void 0);e=v(e.h);for(var s=e.next(),o={};!s.done;o={qh:void 0},s=e.next())o.qh=s.value,r=r.Ha(function(a){return function(){var u=n.response;return u.data&&(u.data=zi(u.data)),(0,a.qh)(t,u,i)}}(o));return r.Ha(function(){return n},function(a){var u=2;if(a instanceof g){if(a.code==7001)throw a;u=a.severity}throw new g(u,1,1007,a)})}function Uv(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.o)return!1}return!0}G("shaka.net.NetworkingEngine",hn),hn.prototype.request=hn.prototype.request,hn.prototype.destroy=hn.prototype.destroy,hn.makeRequest=qn,hn.defaultRetryParameters=function(){return zr()},hn.prototype.clearCommonAccessTokenMap=hn.prototype.Jg,hn.prototype.clearAllResponseFilters=hn.prototype.bi,hn.prototype.unregisterResponseFilter=hn.prototype.Kj,hn.prototype.registerResponseFilter=hn.prototype.oj,hn.prototype.clearAllRequestFilters=hn.prototype.ai,hn.prototype.unregisterRequestFilter=hn.prototype.Jj,hn.prototype.registerRequestFilter=hn.prototype.nj,hn.unregisterScheme=function(e){Hc.delete(e)},hn.registerScheme=xs,hn.prototype.setForceHTTPS=hn.prototype.ng,hn.prototype.setForceHTTP=hn.prototype.mg;function Bv(){this.g=0}hn.NumBytesRemainingClass=Bv;function Vc(e,t,n){Pn.call(this,e,t),this.h=n}He(Vc,Pn),hn.PendingRequest=Vc;var Or=1;hn.RequestType={MANIFEST:0,SEGMENT:Or,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},hn.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var jv=3;hn.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:jv};var Hc=new Map;function ba(e){this.g=!1,this.h=new rn,this.i=e}ba.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function dn(e,t){if(e.g)throw t instanceof g&&t.code==7003?t:new g(2,7,7003,t)}function Wh(e,t){var n=[];e=v(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function f2(e,t){e=v(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Vo(e){for(var t=new Map,n=v(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Xh(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function gn(e,t){this.h=y(e),this.i=t==Fv,this.g=0}d=gn.prototype,d.ta=function(){return this.g<this.h.byteLength},d.Ba=function(){return this.g},d.getLength=function(){return this.h.byteLength},d.X=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Is()}},d.ma=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Is()}},d.S=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Is()}},d.bg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Is()}},d.bd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Is()}if(2097151<t)throw new g(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},d.Db=function(e){if(this.g+e>this.h.byteLength)throw Is();var t=x(this.h,this.g,e);return this.g+=e,t},d.skip=function(e){if(this.g+e>this.h.byteLength)throw Is();this.g+=e},d.rh=function(e){if(this.g<e)throw Is();this.g-=e},d.seek=function(e){if(0>e||e>this.h.byteLength)throw Is();this.g=e},d.Cc=function(){for(var e=this.g;this.ta()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=x(this.h,e,this.g-e),this.g+=1,cn(e)};function Is(){return new g(2,3,3e3)}G("shaka.util.DataViewReader",gn),gn.prototype.readTerminatedString=gn.prototype.Cc,gn.prototype.seek=gn.prototype.seek,gn.prototype.rewind=gn.prototype.rh,gn.prototype.skip=gn.prototype.skip,gn.prototype.readBytes=gn.prototype.Db,gn.prototype.readUint64=gn.prototype.bd,gn.prototype.readInt32=gn.prototype.bg,gn.prototype.readUint32=gn.prototype.S,gn.prototype.readUint16=gn.prototype.ma,gn.prototype.readUint8=gn.prototype.X,gn.prototype.getLength=gn.prototype.getLength,gn.prototype.getPosition=gn.prototype.Ba,gn.prototype.hasMoreData=gn.prototype.ta;var Fv=1;gn.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Fv};function on(){this.i=new Map,this.h=new Map,this.g=!1}d=on.prototype,d.box=function(e,t){return e=Vv(e),this.i.set(e,h2),this.h.set(e,t),this},d.R=function(e,t){return e=Vv(e),this.i.set(e,Hv),this.h.set(e,t),this},d.stop=function(){this.g=!0},d.parse=function(e,t,n){for(e=new gn(e,0),this.g=!1;e.ta()&&!this.g;)this.Yc(0,e,t,n)},d.Yc=function(e,t,n,i){var r=t.Ba();if(i&&r+8>t.getLength())this.g=!0;else{var s=t.S(),o=t.S(),a=zc(o),u=!1;switch(s){case 0:s=t.getLength()-r;break;case 1:if(i&&t.Ba()+8>t.getLength()){this.g=!0;return}s=t.bd(),u=!0}var c=this.h.get(o);if(c){var h=null,p=null;if(this.i.get(o)==Hv){if(i&&t.Ba()+4>t.getLength()){this.g=!0;return}p=t.S(),h=p>>>24,p&=16777215}o=r+s,n&&o>t.getLength()&&(o=t.getLength()),i&&o>t.getLength()?this.g=!0:(i=o-t.Ba(),t=0<i?t.Db(i):new Uint8Array(0),t=new gn(t,0),c({name:a,parser:this,partialOkay:n||!1,version:h,flags:p,reader:t,size:s,start:r+e,has64BitSize:u}))}else t.skip(Math.min(r+s-t.Ba(),t.getLength()-t.Ba()))}};function Mt(e){for(var t=io(e);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function Ms(e){for(var t=io(e),n=e.reader.S(),i=0;i<n&&(e.parser.Yc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function Yi(e){var t=io(e);for(e.reader.skip(78);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function Gc(e){var t=io(e);e.reader.skip(8);var n=e.reader.ma();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function Da(e){return function(t){e(t.reader.Db(t.reader.getLength()-t.reader.Ba()))}}function Vv(e){var t=0;e=v(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function zc(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function io(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}G("shaka.util.Mp4Parser",on),on.headerSize=io,on.typeToString=zc,on.allData=Da,on.audioSampleEntry=Gc,on.visualSampleEntry=Yi,on.sampleDescription=Ms,on.children=Mt,on.prototype.parseNext=on.prototype.Yc,on.prototype.parse=on.prototype.parse,on.prototype.stop=on.prototype.stop,on.prototype.fullBox=on.prototype.R,on.prototype.box=on.prototype.box;var h2=0,Hv=1;function Yh(e){var t=this;this.g=[],this.h=[],this.data=[],new on().box("moov",Mt).box("moof",Mt).R("pssh",function(n){if(!(1<n.version)){var i=x(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(br(n.reader.Db(16))),0<n.version){i=n.reader.S();for(var r=0;r<i;r++){var s=br(n.reader.Db(16));t.h.push(s)}}}}).parse(e)}function Kc(e,t,n,i){var r=e.length,s=t.length+16+r;0<i&&(s+=4+16*n.size);var o=new Uint8Array(s),a=y(o),u=0;if(a.setUint32(u,s),u+=4,a.setUint32(u,1886614376),u+=4,1>i?a.setUint32(u,0):a.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,0<i)for(a.setUint32(u,n.size),u+=4,t=v(n),n=t.next();!n.done;n=t.next())n=kr(n.value),o.set(n,u),u+=n.length;return a.setUint32(u,r),o.set(e,u+4),o}function qc(e){var t=this;this.C=e,this.j=this.A=null,this.ka=this.ea=!1,this.H=0,this.h=null,this.o=new _t,this.i=new Map,this.T=[],this.B=new Map,this.K=!1,this.m=new rn,this.g=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.Z=new Map,this.fa=new Map,this.L=new se(function(){return A2(t)}),this.O=!1,this.M=[],this.W=!1,this.I=new se(function(){I2(t)}),this.m.catch(function(){}),this.l=new ba(function(){return p2(t)}),this.$=!1,this.F=this.G=null,this.P=function(){return!1}}d=qc.prototype,d.destroy=function(){return this.l.destroy()};function p2(e){return X(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.I.stop(),e.I=null,e.L.stop(),e.L=null,T(t,Wu(e),2);case 2:if(!e.j){t.s(3);break}return ve(t,4),T(t,e.j.setMediaKeys(null),6);case 6:Me(t,5);break;case 4:Ce(t);case 5:e.j=null;case 3:e.h=null,e.A=null,e.B=new Map,e.g=null,e.u=function(){},e.C=null,e.$=!1,e.G=null,H(t)}})}d.configure=function(e,t){this.g=e,t&&(this.P=t),this.I&&this.I.ua(this.g.updateExpirationTime)};function m2(e,t,n){return e.ka=!0,e.B=new Map,e.O=n,zv(e,t,!1)}function Gv(e,t,n,i){i=i===void 0?!0:i,e.B=new Map,n=v(n);for(var r=n.next();!r.done;r=n.next())e.B.set(r.value,{initData:null,initDataType:null});for(n=v(e.g.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.B.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.O=0<e.B.size,zv(e,t,i)}function g2(e,t,n,i,r,s){var o=new Map;return r={audioCapabilities:r,videoCapabilities:s,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],o.set(t,r),Xv(e,o,[])}function zv(e,t,n){var i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W;return X(function(q){if(q.g==1){for(t0(e.g.clearKeys,t),i=t.some(function(ne){return!!(ne.video&&ne.video.drmInfos.length||ne.audio&&ne.audio.drmInfos.length)}),!i&&n&&(r=Vo(e.g.servers),C2(t,r)),s=new Set,o=v(t),a=o.next();!a.done;a=o.next())for(u=a.value,c=Zv(u),h=v(c),p=h.next();!p.done;p=h.next())E=p.value,s.add(E);for(A=v(s),M=A.next();!M.done;M=A.next())R=M.value,R2(R,Vo(e.g.servers),Vo(e.g.advanced||{}),e.g.keySystemsMapping);for(C=function(ne,ie){var me=[];ne=v(ne);for(var le=ne.next();!le.done;le=ne.next()){le=le.value;var pe=le[ie]||e.g.advanced&&e.g.advanced[le.keySystem]&&e.g.advanced[le.keySystem][ie]||"",ge;if((ge=pe=="")&&(ge=(ge=le.keySystem)?!!ge.match(/^com\.widevine\.alpha/):!1),ge&&(ie=="audioRobustness"?pe=[e.g.defaultAudioRobustnessForWidevine]:ie=="videoRobustness"&&(pe=[e.g.defaultVideoRobustnessForWidevine])),typeof pe=="string")me.push(le);else if(Array.isArray(pe))for(pe.length===0&&(pe=[""]),pe=v(pe),ge=pe.next();!ge.done;ge=pe.next()){var _e={};me.push(Object.assign({},le,(_e[ie]=ge.value,_e)))}}return me},b=new Set,U=v(t),$=U.next();!$.done;$=U.next())Q=$.value,Q.video&&!b.has(Q.video)&&(Q.video.drmInfos=C(Q.video.drmInfos,"videoRobustness"),Q.video.drmInfos=C(Q.video.drmInfos,"audioRobustness"),b.add(Q.video)),Q.audio&&!b.has(Q.audio)&&(Q.audio.drmInfos=C(Q.audio.drmInfos,"videoRobustness"),Q.audio.drmInfos=C(Q.audio.drmInfos,"audioRobustness"),b.add(Q.audio));return b.clear(),T(q,Ev(t,e.O,e.$,e.g.preferredKeySystems),2)}return dn(e.l),re=i||Object.keys(e.g.servers).length,re?(W=Xv(e,void 0,t),q.return(i?W:W.catch(function(){}))):(e.ea=!0,q.return(Promise.resolve()))})}function Kv(e){var t;return X(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.G){n.s(2);break}return T(n,e.G,3);case 3:return dn(e.l),n.return();case 2:return ve(n,4),e.G=e.j.setMediaKeys(e.A),T(n,e.G,6);case 6:Me(n,5);break;case 4:t=Ce(n),e.u(new g(2,6,6003,t.message));case 5:dn(e.l),H(n)}})}function y2(e,t){return X(function(n){if(n.g==1)return T(n,Kv(e),2);qu(e,t.initDataType,x(t.initData)),H(n)})}d.Lb=function(e){var t=this,n;return X(function(i){if(i.g==1)return t.j===e?i.return():t.A?(t.j=e,t.o.qa(t.j,"play",function(){for(var r=v(t.M),s=r.next();!s.done;s=r.next())Qh(t,s.value);t.W=!0,t.M=[]}),t.j.remote?(t.o.D(t.j.remote,"connect",function(){return Wu(t)}),t.o.D(t.j.remote,"connecting",function(){return Wu(t)}),t.o.D(t.j.remote,"disconnect",function(){return Wu(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.j&&t.o.D(t.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Wu(t)}),t.F=t.h&&t.h.initData.find(function(r){return 0<r.initData.length})||null,n=t.h.keySystem,n.startsWith("com.microsoft.playready.recommendation")||n=="com.apple.fps"||!(t.F||t.B.size||t.g.parseInbandPsshEnabled)?(t.o.D(t.j,"encrypted",function(r){return y2(t,r)}),i.s(2)):T(i,Kv(t),2)):(t.o.qa(e,"encrypted",function(){t.u(new g(2,6,6010))}),i.return());qv(t).catch(function(){}),H(i)})};function v2(e){var t,n,i,r,s;return X(function(o){switch(o.g){case 1:if(!e.A||!e.h)return o.return();if(!e.h.serverCertificateUri||e.h.serverCertificate&&e.h.serverCertificate.length){o.s(2);break}return t=qn([e.h.serverCertificateUri],e.g.retryParameters),ve(o,3),n=e.C.Xb.request(5,t,{isPreload:e.P()}),T(o,n.promise,5);case 5:i=o.h,e.h.serverCertificate=x(i.data),Me(o,4);break;case 3:throw r=Ce(o),new g(2,6,6017,r);case 4:if(e.l.g)return o.return();case 2:return!e.h.serverCertificate||!e.h.serverCertificate.length?o.return():(ve(o,6),T(o,e.A.setServerCertificate(e.h.serverCertificate),8));case 8:Me(o,0);break;case 6:throw s=Ce(o),new g(2,6,6004,s.message)}})}function _2(e,t){var n,i,r;return X(function(s){if(s.g==1)return T(s,$v(e,t,{initData:null,initDataType:null}),2);if(s.g!=3)return n=s.h,n?(i=[],(r=e.i.get(n))&&(r.ub=new rn,i.push(r.ub)),i.push(n.remove()),T(s,Promise.all(i),3)):s.return();e.i.delete(n),H(s)})}function qv(e){var t,n,i,r,s;return X(function(o){if(o.g==1)return e.B.size?(e.B.forEach(function(a,u){$v(e,u,a)}),T(o,e.m,3)):o.s(2);if(o.g!=2){if(t=e.h&&e.h.keyIds||new Set([]),0<t.size&&M2(e))return o.return(e.m);e.K=!1,e.m=new rn,e.m.catch(function(){})}for(n=(e.h?e.h.initData:[])||[],i=v(n),r=i.next();!r.done;r=i.next())s=r.value,qu(e,s.initDataType,s.initData);return Xu(e)&&e.m.resolve(),o.return(e.m)})}function qu(e,t,n){if(n.length){if(e.g.ignoreDuplicateInitData){var i=e.i.values();i=v(i);for(var r=i.next();!r.done;r=i.next())if(Dn(n,r.value.initData))return;var s=!1;if(e.B.forEach(function(o){!s&&Dn(n,o.initData)&&(s=!0)}),s)return}e.K=!0,0<e.i.size&&Xu(e)&&(e.m.resolve(),e.K=!1,e.m=new rn,e.m.catch(function(){})),E2(e,t,n,e.h.sessionType)}}function Wv(e){return e=e.i.keys(),e=Wh(e,function(t){return t.sessionId}),Array.from(e)}d.If=function(){var e=this,t=this.i.keys();return t=Wh(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},d.pd=function(){var e=1/0,t=this.i.keys();t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},d.be=function(){return Xh(this.fa)};function Xv(e,t,n){var i,r,s,o,a,u,c,h;return X(function(p){switch(p.g){case 1:if(i=new Map,n.length){r=S2(e,n,i),p.s(2);break}return T(p,T2(e,t),3);case 3:r=p.h;case 2:if(s=r,!s)throw navigator.requestMediaKeySystemAccess?new g(2,6,6001):new g(2,6,6020);if(dn(e.l),ve(p,4),s.getConfiguration(),o=e.g.keySystemsMapping[s.keySystem]||s.keySystem,n.length){var E=o,A=i.get(o),M=[],R=[],C=[],b=[],U=[],$=new Set,Q=new Set;e0(A,M,R,b,C,U,$,Q);var re=e.O?"persistent-license":"temporary";for(E={keySystem:E,encryptionScheme:M[0],licenseServerUri:R[0],distinctiveIdentifierRequired:A[0].distinctiveIdentifierRequired,persistentStateRequired:A[0].persistentStateRequired,sessionType:A[0].sessionType||re,audioRobustness:A[0].audioRobustness||"",videoRobustness:A[0].videoRobustness||"",serverCertificate:b[0],serverCertificateUri:C[0],initData:U,keyIds:$},0<Q.size&&(E.keySystemUris=Q),A=v(A),Q=A.next();!Q.done;Q=A.next())Q=Q.value,Q.distinctiveIdentifierRequired&&(E.distinctiveIdentifierRequired=Q.distinctiveIdentifierRequired),Q.persistentStateRequired&&(E.persistentStateRequired=Q.persistentStateRequired);A=E}else A=o,Q=t.get(o),E=[],M=[],R=[],C=[],b=[],U=new Set,e0(Q.drmInfos,E,M,C,R,b,U),A={keySystem:A,encryptionScheme:E[0],licenseServerUri:M[0],distinctiveIdentifierRequired:Q.distinctiveIdentifier=="required",persistentStateRequired:Q.persistentState=="required",sessionType:Q.sessionTypes[0]||"temporary",audioRobustness:(Q.audioCapabilities?Q.audioCapabilities[0].robustness:"")||"",videoRobustness:(Q.videoCapabilities?Q.videoCapabilities[0].robustness:"")||"",serverCertificate:C[0],serverCertificateUri:R[0],initData:b,keyIds:U};if(e.h=A,!e.h.licenseServerUri)throw new g(2,6,6012,e.h.keySystem);return T(p,s.createMediaKeys(),6);case 6:if(a=p.h,dn(e.l),e.A=a,!(e.g.minHdcpVersion!=""&&"getStatusForPolicy"in e.A)){p.s(7);break}return ve(p,8),T(p,e.A.getStatusForPolicy({minHdcpVersion:e.g.minHdcpVersion}),10);case 10:if(u=p.h,u!="usable")throw new g(2,6,6018);dn(e.l),Me(p,7,4);break;case 8:throw c=Ce(p,4),c instanceof g?c:new g(2,6,6019,c.message);case 7:return e.ea=!0,T(p,v2(e),11);case 11:dn(e.l),Me(p,0);break;case 4:throw h=Ce(p),dn(e.l,h),e.h=null,h instanceof g?h:new g(2,6,6002,h.message)}})}function S2(e,t,n){for(var i=v(t),r=i.next();!r.done;r=i.next()){r=v(Zv(r.value));for(var s=r.next();!s.done;s=r.next())s=s.value,n.has(s.keySystem)||n.set(s.keySystem,[]),n.get(s.keySystem).push(s)}if(n.size==1&&n.has(""))throw new g(2,6,6e3);i=e.g.preferredKeySystems,i.length||(r=Vo(e.g.servers),r.size==1&&(i=Array.from(r.keys()))),r=v(i);var o=r.next();for(s={};!o.done;s={oh:void 0},o=r.next()){s.oh=o.value,o=v(t);for(var a=o.next();!a.done;a=o.next())if(a=a.value.decodingInfos.find(function(p){return function(E){return E.supported&&E.keySystemAccess!=null&&E.keySystemAccess.keySystem==p.oh}}(s)))return a.keySystemAccess}for(r=v([!0,!1]),s=r.next();!s.done;s=r.next())for(s=s.value,o=v(t),a=o.next();!a.done;a=o.next()){a=v(a.value.decodingInfos);for(var u=a.next();!u.done;u=a.next())if(u=u.value,u.supported&&u.keySystemAccess){var c=u.keySystemAccess.keySystem;if(!i.includes(c)){var h=n.get(c);for(!h&&e.g.keySystemsMapping[c]&&(h=n.get(e.g.keySystemsMapping[c])),c=v(h),h=c.next();!h.done;h=c.next())if(!!h.value.licenseServerUri==s)return u.keySystemAccess}}}return null}function T2(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b;return X(function(U){switch(U.g){case 1:if(t.size==1&&t.has(""))throw new g(2,6,6e3);for(i=v(t.values()),r=i.next();!r.done;r=i.next())s=r.value,s.audioCapabilities.length==0&&delete s.audioCapabilities,s.videoCapabilities.length==0&&delete s.videoCapabilities;o=v(e.g.preferredKeySystems),a=o.next();case 2:if(a.done){U.s(4);break}if(u=a.value,!t.has(u)){U.s(3);break}return c=t.get(u),ve(U,6),T(U,navigator.requestMediaKeySystemAccess(u,[c]),8);case 8:return n=U.h,U.return(n);case 6:Ce(U);case 7:dn(e.l);case 3:a=o.next(),U.s(2);break;case 4:h=v([!0,!1]),p=h.next();case 9:if(p.done){U.s(11);break}E=p.value,A=v(t.keys()),M=A.next();case 12:if(M.done){p=h.next(),U.s(9);break}if(R=M.value,C=t.get(R),b=C.drmInfos.some(function($){return!!$.licenseServerUri}),b!=E){U.s(13);break}return ve(U,15),T(U,navigator.requestMediaKeySystemAccess(R,[C]),17);case 17:return n=U.h,U.return(n);case 15:Ce(U);case 16:dn(e.l);case 13:M=A.next(),U.s(12);break;case 11:return U.return(n)}})}function $h(e){Xu(e)&&e.m.resolve()}function Yv(e,t){new se(function(){t.loaded=!0,$h(e)}).da(b2)}function $v(e,t,n){var i,r,s,o,a,u,c;return X(function(h){switch(h.g){case 1:try{i=e.A.createSession("persistent-license")}catch(p){return r=new g(2,6,6005,p.message),e.u(r),h.return(Promise.reject(r))}return e.o.D(i,"message",function(p){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(p):Qh(e,p)}),e.o.D(i,"keystatuseschange",function(p){return Qv(e,p)}),s={initData:n.initData,initDataType:n.initDataType,loaded:!1,Xf:1/0,ub:null,type:"persistent-license"},e.i.set(i,s),ve(h,2),T(h,i.load(t),4);case 4:return o=h.h,dn(e.l),o||(e.i.delete(i),a=e.g.persistentSessionOnlinePlayback?1:2,e.u(new g(a,6,6013)),s.loaded=!0),Yv(e,s),$h(e),h.return(i);case 2:u=Ce(h),dn(e.l,u),e.i.delete(i),c=e.g.persistentSessionOnlinePlayback?1:2,e.u(new g(c,6,6005,u.message)),s.loaded=!0,$h(e);case 3:return h.return(Promise.resolve())}})}function E2(e,t,n,i){try{var r=e.A.createSession(i)}catch(s){e.u(new g(2,6,6005,s.message));return}e.o.D(r,"message",function(s){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(s):Qh(e,s)}),e.o.D(r,"keystatuseschange",function(s){return Qv(e,s)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Xf:1/0,ub:null,type:i});try{n=e.g.initDataTransform(n,t,e.h)}catch(s){t=s,s instanceof g||(t=new g(2,6,6016,s)),e.u(t);return}e.g.logLicenseExchange&&mr(n),r.generateRequest(t,n).catch(function(s){if(!e.l.g){e.i.delete(r);var o=s.errorCode;if(o&&o.systemCode){var a=o.systemCode;0>a&&(a+=Math.pow(2,32)),a="0x"+a.toString(16)}e.u(new g(2,6,6006,s.message,s,a))}})}function w2(e){return X(function(t){return t.g==1?e.K?T(t,e.m,3):t.s(0):T(t,Promise.all(e.T.map(function(n){return n.promise})),0)})}function Qh(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R;X(function(C){switch(C.g){case 1:if(n=t.target,e.g.logLicenseExchange&&mr(t.message),i=e.i.get(n),r=e.h.licenseServerUri,s=e.g.advanced[e.h.keySystem],t.messageType=="individualization-request"&&s&&s.individualizationServer&&(r=s.individualizationServer),o=qn([r],e.g.retryParameters),o.body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.h,i&&(o.initData=i.initData,o.initDataType=i.initDataType),s&&s.headers)for(a in s.headers)o.headers[a]=s.headers[a];if(e.h.keySystem==="org.w3.clearkey"){var b=o,U=e.h;try{var $=Rr(b.body);if($){var Q=JSON.parse($);Q.type||(Q.type=U.sessionType,b.body=Ki(JSON.stringify(Q)))}}catch{}}if(te(e.h.keySystem))if(b=Fr(o.body,!0,!0),b.includes("PlayReadyKeyMessage")){for(b=Lo(b,"PlayReadyKeyMessage"),U=Gr(b,"HttpHeader"),U=v(U),$=U.next();!$.done;$=U.next())Q=$.value,$=Gr(Q,"name")[0],Q=Gr(Q,"value")[0],o.headers[Fn($)]=Fn(Q);b=Gr(b,"Challenge")[0],o.body=wi(Fn(b))}else o.headers["Content-Type"]="text/xml; charset=utf-8";return u=Date.now(),ve(C,2),h=e.C.Xb.request(2,o,{isPreload:e.P()}),e.T.push(h),T(C,h.promise,4);case 4:c=C.h,Dr(e.T,h),Me(C,3);break;case 2:return p=Ce(C),e.l.g||(E=new g(2,6,6007,p),e.i.size==1?(e.u(E),i&&i.ub&&i.ub.reject(E)):(i&&i.ub&&i.ub.reject(E),e.i.delete(n),Xu(e)&&(e.m.resolve(),e.L.da(.1)))),C.return();case 3:return e.l.g?C.return():(e.H+=(Date.now()-u)/1e3,e.g.logLicenseExchange&&mr(c.data),ve(C,5),T(C,n.update(c.data),7));case 7:Me(C,6);break;case 5:return A=Ce(C),M=new g(2,6,6008,A.message),e.u(M),i&&i.ub&&i.ub.reject(M),C.return();case 6:if(e.l.g)return C.return();R=new qe("drmsessionupdate"),e.C.onEvent(R),i&&(i.ub&&i.ub.resolve(),Yv(e,i)),H(C)}})}function Qv(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(s,o){if(typeof o=="string"){var a=o;o=s,s=a}if(te(e.h.keySystem)&&o.byteLength==16&&(Ue()||It())){a=y(o);var u=a.getUint32(0,!0),c=a.getUint16(4,!0),h=a.getUint16(6,!0);a.setUint32(0,u,!1),a.setUint16(4,c,!1),a.setUint16(6,h,!1)}s!="status-pending"&&(n.loaded=!0),s=="expired"&&(i=!0),o=br(o).slice(0,32),e.Z.set(o,s)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.ub&&(e.i.delete(t),Jv(t)),Xu(e)&&(e.m.resolve(),e.L.da(D2))}function A2(e){var t=e.Z,n=e.fa;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.u(new g(2,6,6014)),e.C.te(Xh(n))}function x2(){var e,t,n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De;return X(function(Ge){if(Ge.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(_.MediaKeys&&_.navigator&&_.navigator.requestMediaKeySystemAccess&&_.MediaKeySystemAccess&&_.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=v(e),i=n.next();!i.done;i=n.next())r=i.value,t[r]=null;return Ge.return(t)}for(s="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),o=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],a=["150","2000","3000"],u={"com.widevine.alpha":o,"com.widevine.alpha.experiment":o,"com.microsoft.playready.recommendation":a},c=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],h=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],p={videoCapabilities:c,audioCapabilities:h,initDataTypes:["cenc","sinf","skd","keyids"]},E=[null,"cenc","cbcs","cbcs-1-9"],A=new Map,M=function(vt,rt){var Yt,Nt,Dt,Lt,Xt,kt,jt,St,bt,ln,Yn,In,Cn;return X(function(Hn){switch(Hn.g){case 1:return ve(Hn,2),T(Hn,rt.createMediaKeys(),5);case 5:Yt=Hn.h;case 4:Me(Hn,3);break;case 2:return Ce(Hn),Hn.return();case 3:if(Dt=(Nt=rt.getConfiguration().sessionTypes)?Nt.includes("persistent-license"):!1,Xe()&&(Dt=!1),Lt=rt.getConfiguration().videoCapabilities,Xt=rt.getConfiguration().audioCapabilities,kt={persistentState:Dt,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},A.has(vt)&&A.get(vt)?kt=A.get(vt):A.set(vt,kt),(jt=Lt[0].encryptionScheme)&&!kt.encryptionSchemes.includes(jt)&&kt.encryptionSchemes.push(jt),(St=Lt[0].robustness)&&!kt.videoRobustnessLevels.includes(St)&&kt.videoRobustnessLevels.push(St),(bt=Xt[0].robustness)&&!kt.audioRobustnessLevels.includes(bt)&&kt.audioRobustnessLevels.push(bt),"getStatusForPolicy"in Yt){for(ln=[],Yn=v(s),In=Yn.next(),Cn={};!In.done;Cn={td:void 0},In=Yn.next())Cn.td=In.value,kt.minHdcpVersions.includes(Cn.td)||ln.push(Yt.getStatusForPolicy({minHdcpVersion:Cn.td}).then(function(Qn){return function(ia){ia!="usable"||kt.minHdcpVersions.includes(Qn.td)||kt.minHdcpVersions.push(Qn.td)}}(Cn)));return T(Hn,Promise.all(ln),0)}Hn.s(0)}})},R=function(vt,rt,Yt,Nt){var Dt,Lt,Xt,kt,jt,St,bt,ln,Yn,In;return X(function(Cn){switch(Cn.g){case 1:for(ve(Cn,2),Dt=Hr(p),Lt=v(Dt.videoCapabilities),Xt=Lt.next();!Xt.done;Xt=Lt.next())kt=Xt.value,kt.encryptionScheme=rt,kt.robustness=Yt;for(jt=v(Dt.audioCapabilities),St=jt.next();!St.done;St=jt.next())bt=St.value,bt.encryptionScheme=rt,bt.robustness=Nt;return ln=Hr(Dt),ln.persistentState="required",ln.sessionTypes=["persistent-license"],Yn=[ln,Dt],qt()?T(Cn,Hu(5,navigator.requestMediaKeySystemAccess(vt,Yn)),7):T(Cn,navigator.requestMediaKeySystemAccess(vt,Yn),6);case 6:In=Cn.h,Cn.s(5);break;case 7:In=Cn.h;case 5:return T(Cn,M(vt,In),8);case 8:Me(Cn,0);break;case 2:Ce(Cn),H(Cn)}})},C=function(vt,rt,Yt,Nt){var Dt,Lt,Xt;return X(function(kt){switch(kt.g){case 1:return ve(kt,2),Dt={type:"media-source",video:{contentType:c[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:h[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:vt,video:{encryptionScheme:rt,robustness:Yt},audio:{encryptionScheme:rt,robustness:Nt}}},qt()?T(kt,Hu(5,navigator.mediaCapabilities.decodingInfo(Dt)),7):T(kt,navigator.mediaCapabilities.decodingInfo(Dt),6);case 6:Lt=kt.h,kt.s(5);break;case 7:Lt=kt.h;case 5:return Xt=Lt.keySystemAccess,T(kt,M(vt,Xt),8);case 8:Me(kt,0);break;case 2:Ce(kt),H(kt)}})},b=v(e),U=b.next();!U.done;U=b.next())$=U.value,A.set($,null);for(Q=function(vt){return!(vt==="org.w3.clearkey"&&At())},re=[],W=v(E),q=W.next();!q.done;q=W.next())for(ne=q.value,ie=v(e),me=ie.next();!me.done;me=ie.next())le=me.value,Q(le)&&(re.push(R(le,ne,"","")),re.push(C(le,ne,"","")));for(pe=v(e),ge=pe.next();!ge.done;ge=pe.next())for(_e=ge.value,Ie=v(u[_e]||[]),Ee=Ie.next();!Ee.done;Ee=Ie.next())De=Ee.value,Q(_e)&&(re.push(R(_e,null,De,"")),re.push(R(_e,null,"",De)),re.push(C(_e,null,De,"")),re.push(C(_e,null,"",De)));return T(Ge,Promise.all(re),2)}return Ge.return(Xh(A))})}function Jv(e){return X(function(t){if(t.g==1)return ve(t,2),T(t,Hu(k2,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return Me(t,0);Ce(t),H(t)})}function Wu(e){var t;return X(function(n){return t=Array.from(e.i.entries()),e.i.clear(),T(n,Promise.all(t.map(function(i){i=v(i);var r=i.next().value,s=i.next().value;return X(function(o){if(o.g==1)return ve(o,2),e.ka||e.B.has(r.sessionId)||s.type!=="persistent-license"||e.g.persistentSessionOnlinePlayback?T(o,Jv(r),5):T(o,r.remove(),5);if(o.g!=2)return Me(o,0);Ce(o),H(o)})})),0)})}function Zv(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function I2(e){e.i.forEach(function(t,n){var i=t.Xf,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.C.onExpirationUpdated(n.sessionId,r),t.Xf=r)})}function Xu(e){return e=e.i.values(),f2(e,function(t){return t.loaded})}function M2(e){for(var t=v(e.h&&e.h.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function C2(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=v(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function e0(e,t,n,i,r,s,o,a){var u=[];e=v(e);for(var c=e.next(),h={};!c.done;h={wa:void 0},c=e.next()){if(h.wa=c.value,t.includes(h.wa.encryptionScheme)||t.push(h.wa.encryptionScheme),h.wa.keySystem=="org.w3.clearkey"&&h.wa.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(h.wa.licenseServerUri)||u.push(h.wa.licenseServerUri):n.includes(h.wa.licenseServerUri)||n.push(h.wa.licenseServerUri),r.includes(h.wa.serverCertificateUri)||r.push(h.wa.serverCertificateUri),h.wa.serverCertificate&&(i.some(function(A){return function(M){return Dn(M,A.wa.serverCertificate)}}(h))||i.push(h.wa.serverCertificate)),h.wa.initData){c=v(h.wa.initData);for(var p=c.next(),E={};!p.done;E={Of:void 0},p=c.next())E.Of=p.value,s.some(function(A){return function(M){var R=A.Of;return M.keyId&&M.keyId==R.keyId?!0:M.initDataType==R.initDataType&&Dn(M.initData,R.initData)}}(E))||s.push(E.Of)}if(h.wa.keyIds)for(c=v(h.wa.keyIds),p=c.next();!p.done;p=c.next())o.add(p.value);if(h.wa.keySystemUris&&a)for(h=v(h.wa.keySystemUris),c=h.next();!c.done;c=h.next())a.add(c.value)}if(u.length==1)n.push(u[0]);else if(0<u.length){for(t=[],u=v(u),i=u.next();!i.done;i=u.next())i=_.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,z(i.keys));u=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+_.btoa(u))}}function R2(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(r)&&(t=t.get(r),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),_.cast&&_.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function t0(e,t){if(e=Vo(e),e.size!=0){e=Ic(e),t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var k2=1,b2=5,D2=.5;function Wc(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=v(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}Wc.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var i;if(!(i=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(i=n.audio&&e.audio)){i=n.audio;var r=e.audio;i=!(!((!i.channelsCount||!r.channelsCount||2<i.channelsCount||2<r.channelsCount)&&i.channelsCount!=r.channelsCount||i.spatialAudio!==r.spatialAudio||t&&!n0(i,r))&&i0(i.roles,r.roles)&&i.groupId===r.groupId)}return!i&&(i=n.video&&e.video)&&(n=n.video,i=e.video,i=!((!t||n0(n,i))&&i0(n.roles,i.roles))),i?!1:(this.g.add(e),!0)},Wc.prototype.values=function(){return this.g.values()};function n0(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return to(i)}),t=t.codecs.split(",").map(function(i){return to(i)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function i0(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=v(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}G("shaka.media.AdaptationSet",Wc),G("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Jh(){}Jh.prototype.create=function(){},Jh.prototype.configure=function(){},G("shaka.media.AdaptationSetCriteria",Jh);function L2(){this.g=Yu,this.i=new Map().set(Yu,2).set(La,1),this.h=0}var La=0,Yu=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Zh(e,t,n){this.g=e,this.i=t,this.h=n}function r0(e,t){return X(function(n){if(n.g==1)return T(n,Jx(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||_v(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(Ku))throw new g(2,4,4032);return n.return(o0(e,t))})}function s0(e,t){var n=e.g.restrictions;e=e.i;var i=!1;t=v(t.variants);for(var r=t.next();!r.done;r=t.next()){r=r.value;var s=r.allowedByApplication;r.allowedByApplication=Nc(r,n,e),s!=r.allowedByApplication&&(i=!0)}return i}function o0(e,t){var n=s0(e,t);if(t){var i=e.h?e.h.h:null;if(i&&e.h.A){for(var r=new Set,s=v(t.variants),o=s.next();!o.done;o=s.next())o=o.value,o.audio&&r.add(o.audio),o.video&&r.add(o.video);for(r=v(r),s=r.next();!s.done;s=r.next())a0(e,i.keySystem,s.value)}u0(e,t)}return n}function a0(e,t,n){n=v(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=v(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,qu(e.h,r.initDataType,r.initData)}}function u0(e,t){e=e.h?e.h.be():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var i=!1,r=!1,s=new Set,o=new Set,a=new Set;t=v(t.variants);for(var u=t.next();!u.done;u=t.next())u=u.value,u.audio&&a.add(u.audio),u.video&&a.add(u.video),u.allowedByApplication?u.allowedByKeySystem&&(i=!0):r=!0;for(a=v(a),t=a.next();!t.done;t=a.next())if(t=t.value,t.keyIds.size)for(t=v(t.keyIds),u=t.next();!u.done;u=t.next()){u=u.value;var c=e[n?"00":u];c?ep.includes(c)&&o.add(c):s.add(u)}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(s),restrictedKeyStatuses:Array.from(o)},new g(2,4,4012,e)}var ep=["output-restricted","internal-error"];function $u(){}function Ho(e,t){Pa.set(e,t)}function P2(){var e={};if(be())for(var t=v(Pa.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=v(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=be()?Pa.has(n):ze(n);return e}function l0(e,t){if(t){var n=Pa.get(t.toLowerCase());if(n)return n}throw new g(2,4,4e3,e,t)}G("shaka.media.ManifestParser",$u),$u.unregisterParserByMime=function(e){Pa.delete(e)},$u.registerParserByMime=Ho,$u.registerParserByExtension=function(){Vt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},$u.AccessibilityPurpose={Pk:"visually impaired",fk:"hard of hearing"};var Pa=new Map;function Xc(e,t){var n=null,i=null,r=null,s=null,o=e.S();return t&1&&(r=e.bd()),t&2&&(s=e.S()),t&8&&(n=e.S()),t&16&&(i=e.S()),{trackId:o,ld:n,md:i,Xh:r,sh:s}}function Yc(e,t){return t==1?(t=e.S(),e=e.S(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.S()}}function $c(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.S(),e.skip(4),e=e.ma(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Qc(e,t,n){var i=e.S(),r=[],s=null;n&1&&(s=e.bg()),n&4&&e.skip(4);for(var o=0;o<i;o++){var a={ig:null,sampleSize:null,Be:null};n&256&&(a.ig=e.S()),n&512&&(a.sampleSize=e.S()),n&1024&&e.skip(4),n&2048&&(a.Be=t==0?e.S():e.bg()),r.push(a)}return{Uk:i,hg:r,qf:s}}function c0(e){e.skip(6),e.skip(2),e.skip(8);var t=e.ma();return e.skip(2),e.skip(2),e.skip(2),e=e.ma()+e.ma()/65536,{channelCount:t,sampleRate:e}}function tp(e){return e=e.S(),{codec:zc(e)}}function O2(e){var t=null,n=null,i=e.Db(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),r==="nclx"){switch(e.ma()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.ma(),e.ma(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,Od:n}}function Qu(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function $i(e){return(10>e?"0":"")+e}function Go(e){if(!m0){m0=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);Jc=Ht("ftyp",t,i,t,n),t=Ht("dref",q2),np=Ht("dinf",t)}this.g=e}function Oa(e){for(var t=[],n=v(e.g),i=n.next();!i.done;i=n.next()){var r=t,s=r.push,o=i.value;i=Ht;var a=o.id+1,u=o.stream.width||0,c=o.stream.height||0;o.type=="audio"&&(c=u=0);var h=o.duration*o.timescale,p=Math.floor(h/(ro+1));switch(h=Math.floor(h%(ro+1)),a=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(z(wn(a,4)),[0,0,0,0],z(wn(p,4)),z(wn(h,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],z(wn(u,2)),[0,0],z(wn(c,2)),[0,0])),a=Ht("tkhd",a),u=Ht,p=o.duration*o.timescale,c=Math.floor(p/(ro+1)),p=Math.floor(p%(ro+1)),h=o.stream.language,h=h.charCodeAt(0)-96<<10|h.charCodeAt(1)-96<<5|h.charCodeAt(2)-96,c=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(z(wn(o.timescale,4)),z(wn(c,4)),z(wn(p,4)),z(wn(h,2)),[0,0])),c=Ht("mdhd",c),p=o,h=new Uint8Array([]),p.type){case"video":h=U2;break;case"audio":h=B2}p=Ht("hdlr",h);e:{switch(o.type){case"video":o=Ht("minf",Ht("vmhd",G2),np,d0(o));break e;case"audio":o=Ht("minf",Ht("smhd",z2),np,d0(o));break e}o=new Uint8Array([])}o=u("mdia",c,p,o),i=i("trak",a,o),s.call(r,i)}for(t=En.apply(Kn,z(t)),s=e.g[0],n=Ht,i=s.duration*s.timescale,r=Math.floor(i/(ro+1)),i=Math.floor(i%(ro+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(z(wn(s.timescale,4)),z(wn(r,4)),z(wn(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=Ht("mvhd",r),i=[],e=v(e.g),u=e.next();!u.done;u=e.next())o=i,a=o.push,u=new Uint8Array([0,0,0,0].concat(z(wn(u.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=Ht("trex",u),a.call(o,u);if(e=En.apply(Kn,z(i)),e=Ht("mvex",e),i=[],s.encrypted){for(s=v(s.stream.drmInfos),o=s.next();!o.done;o=s.next())if(o=o.value,o.initData)for(o=v(o.initData),a=o.next();!a.done;a=o.next())i.push(a.value.initData);s=En.apply(Kn,z(i))}else s=new Uint8Array([]);return e=n("moov",r,t,e,s),t=new Uint8Array(Jc.byteLength+e.byteLength),t.set(Jc),t.set(e,Jc.byteLength),t}function d0(e){var t=Ht,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=Xe()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,0<e.Ca.byteLength)var r=Ht("avcC",e.Ca);else{r=Ht;for(var s=7,o=[],a=[],u=0,c=0,h=0,p=0;p<e.lb.length;p++){var E=h0(e.lb[p]);switch(E[0]&31){case 7:o.push(E),s+=E.length+2;break;case 8:a.push(E),s+=E.length+2}}for(0<o.length&&(u=o[0][1],h=o[0][2],c=o[0][3]),s=new Uint8Array(s),p=0,s[p++]=1,s[p++]=u,s[p++]=h,s[p++]=c,s[p++]=255,s[p++]=224|o.length,u=0;u<o.length;u++)s[p++]=(o[u].length&65280)>>8,s[p++]=o[u].length&255,s.set(o[u],p),p+=o[u].length;for(s[p++]=a.length,o=0;o<a.length;o++)s[p++]=(a[o].length&65280)>>8,s[p++]=a[o].length&255,s.set(a[o],p),p+=a[o].length;r=r("avcC",s)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(z(wn(n,2)),z(wn(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",a=f0(e),o=new Uint8Array([]),e.encrypted&&(o=zo(0,e.stream,e.codecs),i="encv"),i=Ht(i,n,r,a,o)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Ca.byteLength&&(n=Ht("hvcC",e.Ca)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(z(wn(i,2)),z(wn(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",a=f0(e),o=new Uint8Array([]),e.encrypted&&(o=zo(0,e.stream,e.codecs),r="encv"),i=Ht(r,i,n,a,o));break;case"audio":n=="mp3"?e=Ht(".mp3",Ju(e)):n=="ac-3"?(n=Ht("dac3",e.ra),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=Ht(i,Ju(e),n,r)):n=="ec-3"?(n=Ht("dec3",e.ra),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=Ht(i,Ju(e),n,r)):n=="opus"?(n=Ht("dOps",e.ra),i="Opus",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=Ht(i,Ju(e),n,r)):(0<e.ra.byteLength?n=Ht("esds",e.ra):(n=Ht,i=e.id+1,r=e.stream.channelsCount||2,o=e.stream.audioSamplingRate||44100,u=vs("audio",e.codecs.split(",")),c={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},a=c[o],(u==="mp4a.40.5"||u==="mp4a.40.29")&&(a=c[2*o]),o=parseInt(u.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(z(wn(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,o<<3|a>>>1,a<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=zo(0,e.stream,e.codecs),i="enca"),e=Ht(i,Ju(e),n,r)),i=e}return e=Ht("stsd",K2,i),t("stbl",e,Ht("stts",j2),Ht("stsc",F2),Ht("stsz",H2),Ht("stco",V2))}function f0(e){if(!e.Ia&&!e.La)return new Uint8Array([]);var t=e.La;return e=new Uint8Array([].concat(z(wn(e.Ia,4)),z(wn(t,4)))),Ht("pasp",e)}function Ju(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(z(wn(e.stream.audioSamplingRate||44100,2)),[0,0]))}function zo(e,t,n){e=Ht,n=new Uint8Array([].concat(z(wn(p0(n.split(".")[0]),4)))),n=Ht("frma",n);var i="cenc",r=t.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=new Uint8Array([0,0,0,0].concat(z(wn(p0(i),4)),[0,1,0,0])),i=Ht("schm",i),r=Ht;var s=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t=v(t.drmInfos);for(var o=t.next();!o.done;o=t.next())if((o=o.value)&&o.keyIds&&o.keyIds.size){o=v(o.keyIds);for(var a=o.next();!a.done;a=o.next())s=h0(a.value)}return t=new Uint8Array([0,0,0,0,0,0,1,8]),t=Ht("tenc",t,s),e("sinf",n,i,r("schi",t))}function Zu(e){var t=[];e=v(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,s=Ht,o=new Uint8Array([0,0,0,0].concat(z(wn(n.data?n.data.Eb:0,4))));o=Ht("mfhd",o);var a,u=n.data?n.data.jb:[],c=new Uint8Array(4+u.length);for(a=0;a<u.length;a++){var h=u[a].flags;c[a+4]=h.Ya<<4|h.$a<<2|h.Za}u=Ht("sdtp",c);var p=u.length+92;c=Ht,a=new Uint8Array([0,0,0,58].concat(z(wn(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Ht("tfhd",a),h=n.data?n.data.baseMediaDecodeTime:0;var E=Math.floor(h%(ro+1));h=new Uint8Array([1,0,0,0].concat(z(wn(Math.floor(h/(ro+1)),4)),z(wn(E,4)))),h=Ht("tfdt",h);var A=p;p=n.data?n.data.jb:[],E=p.length;var M=12+16*E,R=new Uint8Array(M);for(A+=8+M,R.set([n.type==="video"?1:0,0,15,1].concat(z(wn(E,4)),z(wn(A,4))),0),A=0;A<E;A++){var C=p[A];M=wn(C.duration,4);var b=wn(C.size,4),U=C.flags;C=wn(C.eb,4),R.set([].concat(z(M),z(b),[U.hb<<2|U.Ya,U.$a<<6|U.Za<<4|U.ib,U.Xa&61440,U.Xa&15],z(C)),12+16*A)}p=Ht("trun",R),u=c("traf",a,h,p,u),s=s("moof",o,u),r.call(i,t,[s,N2(n)])}return En.apply(Kn,z(t))}function N2(e){return e=(e.data?e.data.jb:[]).map(function(t){return t.data}),e=En.apply(Kn,z(e)),Ht("mdat",e)}function wn(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function h0(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function p0(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function Ht(e){var t=zt.apply(1,arguments),n=g0.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],g0.set(e,n));for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var m0=!1,ro=Math.pow(2,32)-1,g0=new Map,U2=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),B2=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),j2=new Uint8Array([0,0,0,0,0,0,0,0]),F2=new Uint8Array([0,0,0,0,0,0,0,0]),V2=new Uint8Array([0,0,0,0,0,0,0,0]),H2=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),G2=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),z2=new Uint8Array([0,0,0,0,0,0,0,0]),K2=new Uint8Array([0,0,0,0,0,0,0,1]),Jc=new Uint8Array([]),q2=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),np=new Uint8Array([]);function W2(e){e=x(e);var t=null;return new on().box("moov",Mt).box("trak",Mt).box("mdia",Mt).box("minf",Mt).box("stbl",Mt).R("stsd",Ms).box("enca",function(n){return t=n.reader.h,Gc(n)}).box("sinf",Mt).box("frma",function(n){n.parser.stop(),tp(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function X2(e,t,n){function i(A){p.push({box:A,ih:1701733217})}function r(A){p.push({box:A,ih:1701733238})}function s(A){u=!0,A.parser.stop()}function o(A){h.push(A),Mt(A)}var a=t=x(t),u=!1,c,h=[],p=[];if(new on().box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).R("stsd",function(A){c=A,h.push(A),Ms(A)}).R("encv",s).R("enca",s).R("dvav",r).R("dva1",r).R("dvh1",r).R("dvhe",r).R("dvc1",r).R("dvi1",r).R("hev1",r).R("hvc1",r).R("avc1",r).R("avc3",r).R("ac-3",i).R("ec-3",i).R("ac-4",i).R("Opus",i).R("fLaC",i).R("mp4a",i).parse(t),u)return t;if(p.length==0||!c)throw br(t),new g(2,3,3019,n);p.reverse(),n=v(p);for(var E=n.next();!E.done;E=n.next())E=E.value,a=Q2(e,a,c,E.box,h,E.ih);return Ue()&&Bt()&&!nt()?(e=new Uint8Array(t.byteLength+a.byteLength),e.set(a),e.set(t,a.byteLength),e):a}function Y2(e){e=x(e);var t=[];new on().box("mdat",function(o){t.push(o)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],s=t[i];n.push($2(e.subarray(r?r.start+r.size:0,s.start+s.size)))}return En.apply(Kn,z(n))}function $2(e){function t(p){o.push(p),Mt(p)}var n,i,r,s,o=[];if(new on().box("moof",t).box("traf",t).R("tfhd",function(p){n=p,r=Xc(p.reader,p.flags)}).R("trun",function(p){i=p,s=Qc(p.reader,p.version,p.flags)}).parse(e),r&&r.sh!==2){var a=n.start+io(n)+4+(r.Xh!==null?8:0),u=y(e);if(r.sh!==null)u.setUint32(a,2);else{Zc(e,n.start,n.size+4);var c=u.getUint32(n.start+8);u.setUint32(n.start+8,c|2),s&&s.qf!==null&&u.setInt32(i.start+io(i)+4,s.qf+4),c=e.subarray(0,a),u=e.subarray(a),e=new Uint8Array(e.byteLength+4),e.set(c),c=[];for(var h=3;0<=h;h--)c.push(2>>8*h&255);for(e.set(new Uint8Array(c),a),e.set(u,a+4),a=v(o),u=a.next();!u.done;u=a.next())u=u.value,Zc(e,u.start,u.size+4)}}return e}function Q2(e,t,n,i,r,s){var o=zo(new Go([]),e,i.name),a=t.subarray(i.start,i.start+i.size);for(e=new Uint8Array(i.size+o.byteLength),e.set(a,0),y(e).setUint32(4,s),e.set(o,i.size),Zc(e,0,e.byteLength),s=new Uint8Array(t.byteLength+e.byteLength),i=At()||nt()||Ue()?i.start:i.start+i.size,o=t.subarray(i),s.set(t.subarray(0,i)),s.set(e,i),s.set(o,i+e.byteLength),t=v(r),r=t.next();!r.done;r=t.next())r=r.value,Zc(s,r.start,r.size+e.byteLength);return e=y(s,n.start),n=io(n),t=e.getUint32(n),e.setUint32(n,t+1),s}function Zc(e,t,n){e=y(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function J2(e){function t(r){i.push({start:r.start,size:r.size}),Mt(r)}var n=x(e),i=[];return new on().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(r){i.push({start:r.start,size:r.size});for(var s=y(n,r.start),o=0;o<r.size-3;o++){var a=s.getUint32(o);a==1633889587?s.setUint32(o,1700998451):a==1684103987&&s.setUint32(o,1684366131)}}).parse(n),n}function Li(e,t,n,i,r,s,o,a){this.N=e,this.Sa=t,this.xa=n,this.Wc=i===void 0?null:i,this.timescale=r===void 0?null:r,this.h=s===void 0?null:s,this.aesKey=o===void 0?null:o,this.g=this.mimeType=this.codecs=null,this.encrypted=a===void 0?!1:a}Li.prototype.uc=function(){return this.Sa},Li.prototype.tc=function(){return this.xa},Li.prototype.Ld=function(e){this.h=e},Li.prototype.Ib=function(){return this.h};function ed(e,t){return e===t?!0:e&&t?e.uc()==t.uc()&&e.tc()==t.tc()&&_a(e.N().sort(),t.N().sort())&&Dn(e.Ib(),t.Ib()):e==t}G("shaka.media.InitSegmentReference",Li),Li.prototype.getEndByte=Li.prototype.tc,Li.prototype.getStartByte=Li.prototype.uc;function lt(e,t,n,i,r,s,o,a,u,c,h,p,E,A,M,R){for(c=c===void 0?[]:c,A=A===void 0?Cs:A,this.startTime=e,this.j=this.endTime=t,this.C=n,this.Sa=i,this.xa=r,this.Y=s,this.timestampOffset=o,this.appendWindowStart=a,this.appendWindowEnd=u,this.g=c,this.tilesLayout=h===void 0?"":h,this.B=p===void 0?null:p,this.h=E===void 0?null:E,this.status=A,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=M===void 0?null:M,this.thumbnailSprite=null,this.i=-1,this.A=R===void 0?!1:R,this.F=this.o=!1,e=v(this.g),t=e.next();!t.done;t=e.next())t.value.gh();this.A&&this.g.length&&this.g[this.g.length-1].fh(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}d=lt.prototype,d.N=function(){return this.C()},d.getStartTime=function(){return this.startTime},d.oi=function(){return this.endTime},d.uc=function(){return this.Sa},d.tc=function(){return this.xa},d.Li=function(){return this.tilesLayout},d.Ki=function(){return this.B},d.dc=function(){return this.status},d.cj=function(){this.status=v0},d.Uf=function(){this.preload=!0},d.isPreload=function(){return this.preload},d.Vc=function(){this.l=!1},d.Vi=function(){return this.l},d.gh=function(){this.o=!0},d.Xi=function(){return this.o},d.fh=function(){this.F=!0},d.Wi=function(){return this.F},d.eh=function(){this.m=!0},d.Ri=function(){return this.m},d.Ge=function(e){this.thumbnailSprite=e},d.Ii=function(){return this.thumbnailSprite},d.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=v(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},d.sg=function(e){this.h==null?$e("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},d.Ld=function(e,t){this.u=e,this.G=t===void 0?!1:t},d.Ib=function(e){var t=this.u;return(e===void 0||e)&&this.G&&(this.u=null),t};function y0(e,t){e.Y=t,e=v(e.g);for(var n=e.next();!n.done;n=e.next())y0(n.value,t)}G("shaka.media.SegmentReference",lt),lt.prototype.getSegmentData=lt.prototype.Ib,lt.prototype.setSegmentData=lt.prototype.Ld,lt.prototype.syncAgainst=lt.prototype.sg,lt.prototype.offset=lt.prototype.offset,lt.prototype.getThumbnailSprite=lt.prototype.Ii,lt.prototype.setThumbnailSprite=lt.prototype.Ge,lt.prototype.hasByterangeOptimization=lt.prototype.Ri,lt.prototype.markAsByterangeOptimization=lt.prototype.eh,lt.prototype.isLastPartial=lt.prototype.Wi,lt.prototype.markAsLastPartial=lt.prototype.fh,lt.prototype.isPartial=lt.prototype.Xi,lt.prototype.markAsPartial=lt.prototype.gh,lt.prototype.isIndependent=lt.prototype.Vi,lt.prototype.markAsNonIndependent=lt.prototype.Vc,lt.prototype.isPreload=lt.prototype.isPreload,lt.prototype.markAsPreload=lt.prototype.Uf,lt.prototype.markAsUnavailable=lt.prototype.cj,lt.prototype.getStatus=lt.prototype.dc,lt.prototype.getTileDuration=lt.prototype.Ki,lt.prototype.getTilesLayout=lt.prototype.Li,lt.prototype.getEndByte=lt.prototype.tc,lt.prototype.getStartByte=lt.prototype.uc,lt.prototype.getEndTime=lt.prototype.oi,lt.prototype.getStartTime=lt.prototype.getStartTime,lt.prototype.getUris=lt.prototype.N;var Cs=0,v0=1;lt.Status={Pj:Cs,Nk:v0,nk:2};function el(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function ip(e){return!e||el(e)?null:e.length?e.end(e.length-1):null}function rp(e,t){return!e||!e.length||el(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function _0(e,t){if(!e||!e.length||el(e))return 0;var n=0;e=v(Rs(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function Z2(e,t,n){return!e||!e.length||el(e)?null:(e=Rs(e).findIndex(function(i,r,s){return i.start>t&&(r==0||s[r-1].end-t<=n)}),0<=e?e:null)}function Rs(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function S0(){}function T0(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function so(e){for(;e.firstChild;)e.removeChild(e.firstChild)}G("shaka.util.Dom",S0),S0.removeAllChildren=so;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function sp(){}function E0(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function w0(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function op(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function eI(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=cn(x(e.data,1,n)),r=e.data[2+n],s=e.data.subarray(3+n).indexOf(0);if(s===-1)return null;var o=cn(x(e.data,3+n,s)),a;return i==="-->"?a=cn(x(e.data,4+n+s)):a=zi(e.data.subarray(4+n+s)),t.mimeType=i,t.pictureType=r,t.description=o,t.data=a,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=cn(x(e.data,1,i)),e=cn(x(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=cn(x(e.data,1,i)),e=cn(x(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=cn(x(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=zi(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=cn(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=cn(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=zi(e.data),t):null}function Ko(e){for(var t=0,n=[];E0(e,t);){var i=op(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),s=op(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:s,data:r.subarray(10,10+s)},(s=eI(r))&&n.push(s),t+=r.size+10}w0(e,t)&&(t+=10)}return n}function Na(e,t){for(var n=t=t===void 0?0:t,i=0;E0(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=op(e,t+6),w0(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}G("shaka.util.Id3Utils",sp),sp.getID3Data=Na,sp.getID3Frames=Ko;function ks(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=x(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function ap(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new gn(n,0).S(),e.g=8*i,e.i-=i)}function Qi(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,ap(e)}e.h<<=t,e.g-=t}function Ft(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&ap(e),n=t-n,0<n?i<<n|Ft(e,n):i}function up(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return ap(e),t+up(e)}function Pi(e){Qi(e,1+up(e))}function Qe(e){var t=up(e);return Ft(e,t+1)-1}function Ua(e){return e=Qe(e),1&e?1+e>>>1:-1*(e>>>1)}function ut(e){return Ft(e,1)===1}function $t(e){return Ft(e,8)}function td(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=Ua(e),i=(n+i+256)%256),n=i===0?n:i}function tI(e){return $t(e),Qe(e),Qe(e)}G("shaka.util.ExpGolomb",ks);function vn(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.u=null}d=vn.prototype,d.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},d.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,cp(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var s=!!(e[r+1]&64),o=((e[r+1]&31)<<8)+e[r+2];if(1<(e[r+3]&48)>>4){var a=r+5+e[r+4];if(a==r+188)continue}else a=r+4;switch(o){case 0:s&&(a+=e[a]+1),this.G=(e[a+10]&31)<<8|e[a+11];break;case 17:case 8191:break;case this.G:s&&(a+=e[a]+1),s=e,o={audio:-1,video:-1,ge:-1,audioCodec:"",videoCodec:""};var u=a+3+((s[a+1]&15)<<8|s[a+2])-4;for(a+=12+((s[a+10]&15)<<8|s[a+11]);a<u;){var c=(s[a+1]&31)<<8|s[a+2],h=(s[a+3]&15)<<8|s[a+4];switch(s[a]){case 6:if(0<h)for(var p=a+5,E=h;2<E;){var A=s[p+1]+2;switch(s[p]){case 5:var M=ys(s.subarray(p+2,p+A));o.audio==-1&&M==="Opus"?(o.audio=c,o.audioCodec="opus"):o.video==-1&&M==="AV01"&&(o.video=c,o.videoCodec="av1");break;case 106:o.audio==-1&&(o.audio=c,o.audioCodec="ac3");break;case 122:o.audio==-1&&(o.audio=c,o.audioCodec="ec3");break;case 124:o.audio==-1&&(o.audio=c,o.audioCodec="aac");break;case 127:o.audioCodec=="opus"&&(M=null,s[p+2]===128&&(M=s[p+3]),M!=null&&(this.F={channelCount:(M&15)===0?2:M&15,$h:M,sampleRate:48e3}))}p+=A,E-=A}break;case 15:o.audio==-1&&(o.audio=c,o.audioCodec="aac");break;case 17:o.audio==-1&&(o.audio=c,o.audioCodec="aac-loas");break;case 21:o.ge==-1&&(o.ge=c);break;case 27:o.video==-1&&(o.video=c,o.videoCodec="avc");break;case 3:case 4:o.audio==-1&&(o.audio=c,o.audioCodec="mp3");break;case 36:o.video==-1&&(o.video=c,o.videoCodec="hvc");break;case 129:o.audio==-1&&(o.audio=c,o.audioCodec="ac3");break;case 132:case 135:o.audio==-1&&(o.audio=c,o.audioCodec="ec3")}a+=h+5}s=o,s.video!=-1&&(this.I=s.video,this.m=s.videoCodec),s.audio!=-1&&(this.B=s.audio,this.A=s.audioCodec),s.ge!=-1&&(this.C=s.ge),i&&!this.H&&(i=!1,r=t-188),this.H=!0;break;case this.I:a=e.subarray(a,r+188),s?this.j.push([a]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(a);break;case this.B:a=e.subarray(a,r+188),s?this.i.push([a]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(a);break;case this.C:a=e.subarray(a,r+188),s?this.l.push([a]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(a);break;default:i=!0}}return this};function lp(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var r=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.u==null&&(e.u=r),n.pts=x0(r,e.u),e.u=n.pts,n.dts=n.pts,i&64&&(i=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=x0(i,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}d.jj=function(e){return Vt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Zf(e,{Dd:null,state:null})},d.Zf=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,r=1;this.m=="hvc"&&(r=2);var s=t.state||0,o=s,a=0,u=[],c=-1,h=0;for(s==-1&&(c=0,h=this.m=="hvc"?e[0]>>1&63:e[0]&31,s=0,a=1);a<i;){var p=e[a++];s?s===1?s=p?0:2:p?p==1?(p=a-s-1,0<=c?u.push({data:e.subarray(c+r,p),fullData:e.subarray(c,p),type:h,time:n,state:null}):(s=u.length?u[u.length-1]:t.Dd)&&(o&&a<=4-o&&s.state&&(s.data=s.data.subarray(0,s.data.byteLength-o),s.fullData=s.fullData.subarray(0,s.fullData.byteLength-o)),0<p&&(p=e.subarray(0,p),s.data=En(s.data,p),s.fullData=En(s.fullData,p),s.state=0)),a<i?(h=this.m=="hvc"?e[a]>>1&63:e[a]&31,c=a,s=0):s=-1):s=0:s=3:s=p?0:1}return 0<=c&&0<=s&&u.push({data:e.subarray(c+r,i),fullData:e.subarray(c,i),type:h,time:n,state:s}),!u.length&&t.Dd&&(n=u.length?u[u.length-1]:t.Dd)&&(n.data=En(n.data,e),n.fullData=En(n.fullData,e)),t.state=s,u},d.getMetadata=function(){for(var e=[],t=v(this.l),n=t.next();!n.done;n=t.next())n=En.apply(Kn,z(n.value)),(n=lp(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Ko(n.data),dts:n.dts,pts:n.pts});return e},d.fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=v(this.i),n=t.next();!n.done;n=t.next()){var i=En.apply(Kn,z(n.value)),r=lp(this,i);n=this.h.length?this.h[this.h.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?(this.h.length&&r.dts<(n.dts||0)&&(e=!0),this.h.push(r)):this.h.length&&(i=r?r.data:i)&&(n=this.h.pop(),n.data=En(n.data,i),this.h.push(n))}e&&(this.h=this.h.sort(function(s,o){var a=(s.pts||0)-(o.pts||0);return(s.dts||0)-(o.dts||0)||a}))}return this.h},d.wc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=v(this.j),i=n.next();!i.done;i=n.next()){var r=En.apply(Kn,z(i.value)),s=lp(this,r);i=this.g.length?this.g[this.g.length-1]:null,s&&s.pts!=null&&s.dts!=null&&(!i||i.pts!=s.pts&&i.dts!=s.dts)?(this.g.length&&s.dts<(i.dts||0)&&(t=!0),this.g.push(s)):this.g.length&&(r=s?s.data:r)&&(i=this.g.pop(),i.data=En(i.data,r),this.g.push(i))}if(e){for(n={Dd:null,state:null},i=[],r=v(this.g),s=r.next();!s.done;s=r.next())s=s.value,s.nalus=this.Zf(s,n),s.nalus.length&&(i.push(s),n.Dd=s.nalus[s.nalus.length-1]);this.g=i}t&&(this.g=this.g.sort(function(o,a){var u=(o.pts||0)-(a.pts||0);return(o.dts||0)-(a.dts||0)||u}))}return e?this.g:(e=this.g,this.g=[],e)},d.getStartTime=function(e){if(e=="audio"){e=null;var t=this.fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.wc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},d.od=function(){return{audio:this.A,video:this.m}},d.fe=function(){for(var e=[],t=v(this.wc()),n=t.next();!n.done;n=t.next())e.push.apply(e,z(n.value.nalus));return e},d.Oi=function(){Vt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Mf();return{height:e.height,width:e.width}},d.Mf=function(){return this.m=="hvc"?iI(this):nI(this)};function A0(e){var t=e.wc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function nI(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.fe();if(!n.length||(n=n.find(function(A){return A.type==7}),!n))return t;n=new ks(n.data);var i=$t(n),r=$t(n),s=$t(n);if(Pi(n),rI.includes(i)){var o=Qe(n);if(o===3&&Qi(n,1),Pi(n),Pi(n),Qi(n,1),ut(n)){o=o!==3?8:12;for(var a=0;a<o;a++)ut(n)&&(6>a?td(n,16):td(n,64))}}if(Pi(n),o=Qe(n),o===0)Qe(n);else if(o===1)for(Qi(n,1),Pi(n),Pi(n),o=Qe(n),a=0;a<o;a++)Pi(n);Pi(n),Qi(n,1),o=Qe(n),a=Qe(n);var u=Ft(n,1);u===0&&Qi(n,1),Qi(n,1);var c=0,h=0,p=0,E=0;return ut(n)&&(c=Qe(n),h=Qe(n),p=Qe(n),E=Qe(n)),t.height=String((2-u)*(a+1)*16-2*p-2*E),t.width=String(16*(o+1)-2*c-2*h),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+s.toString(16).toUpperCase()).slice(-2),t.frameRate=A0(e),t}function iI(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.fe();if(!n.length||(n=n.find(function(re){return re.type==33}),!n))return t;var i=new ks(n.fullData,!0);$t(i),$t(i),Ft(i,4);var r=Ft(i,3);ut(i);var s=Ft(i,2),o=Ft(i,1),a=Ft(i,5),u=Ft(i,32);n=$t(i);for(var c=$t(i),h=$t(i),p=$t(i),E=$t(i),A=$t(i),M=$t(i),R=[],C=[],b=0;b<r;b++)R.push(ut(i)),C.push(ut(i));if(0<r)for(b=r;8>b;b++)Ft(i,2);for(b=0;b<r;b++)R[b]&&Ft(i,88),C[b]&&$t(i);Qe(i),r=Qe(i),r==3&&Ft(i,1),R=Qe(i),C=Qe(i);var U=b=0,$=0,Q=0;return ut(i)&&(b+=Qe(i),U+=Qe(i),$+=Qe(i),Q+=Qe(i)),t.width=String(R-(b+U)*(r===1||r===2?2:1)),t.height=String(C-($+Q)*(r===1?2:1)),i=function(re){for(var W=0,q=0;32>q;q++)W|=(re>>q&1)<<31-q;return W>>>0}(u),o=o==1?"H":"L",s="hvc1"+("."+["","A","B","C"][s]+a),s+="."+i.toString(16).toUpperCase(),s+="."+o+M,A&&(s+="."+A.toString(16).toUpperCase()),E&&(s+="."+E.toString(16).toUpperCase()),p&&(s+="."+p.toString(16).toUpperCase()),h&&(s+="."+h.toString(16).toUpperCase()),c&&(s+="."+c.toString(16).toUpperCase()),n&&(s+="."+n.toString(16).toUpperCase()),t.codec=s,t.frameRate=A0(e),t}function x0(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Ba(e){return!(0>cp(e))}function cp(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}G("shaka.util.TsParser",vn),vn.syncOffset=cp,vn.probe=Ba,vn.prototype.getVideoInfo=vn.prototype.Mf,vn.prototype.getVideoResolution=vn.prototype.Oi,vn.prototype.getVideoNalus=vn.prototype.fe,vn.prototype.getCodecs=vn.prototype.od,vn.prototype.getStartTime=vn.prototype.getStartTime,vn.prototype.getVideoData=vn.prototype.wc,vn.prototype.getAudioData=vn.prototype.fb,vn.prototype.getMetadata=vn.prototype.getMetadata,vn.prototype.parseNalus=vn.prototype.Zf,vn.prototype.parseAvcNalus=vn.prototype.jj,vn.prototype.parse=vn.prototype.parse,vn.prototype.clearData=vn.prototype.clearData,vn.Timescale=9e4;var rI=[100,110,122,244,44,83,86,118,128,138,139,134];function I0(e,t,n,i){var r=this;this.g=e,this.L=n,this.A=null,this.ea=t,this.l=new Map,this.B=new Map,this.Aa=new Map,this.h=null,this.Ea=!1,this.K=i||null,this.u=new Map,this.o=new _t,this.j=new Map,this.O=null,this.H=new rn,this.Ga="",this.Oa=!1,this.sa=!0,this.M=!1,this.C=this.P=null,this.i=dp(this,this.H),this.za=this.G=!1,this.I=new ba(function(){return uI(r)}),this.F=!1,this.T="UNKNOWN",this.Ma=this.Na=!1,this.Fa=new rn,this.m=!1,this.oa=null,this.$=new Map,this.ka=this.W=this.na=this.Z=null,this.fa=new rn,this.g.remote&&(this.M=this.g.remote.state!="disconnected",this.o.D(this.g.remote,"connect",function(){r.M=r.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"connecting",function(){r.M=r.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"disconnect",function(){r.M=r.g.remote.state!="disconnected"}))}function dp(e,t){if(e.sa=!0,_.ManagedMediaSource){e.C||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.o.D(n,"startstreaming",function(){e.sa=!0}),e.o.D(n,"endstreaming",function(){e.sa=!1})}else n=new MediaSource;return e.o.qa(n,"sourceopen",function(){URL.revokeObjectURL(e.Ga),t.resolve()}),e.o.qa(e.g,"playing",function(){e.Oa=!0}),e.Ga=mp(n),e.g.removeAttribute("src"),e.P&&e.g.removeChild(e.P),e.C&&e.g.removeChild(e.C),e.P=T0(e.Ga),e.g.appendChild(e.P),e.C&&e.g.appendChild(e.C),e.g.load(),n}function sI(e,t,n){e.g&&_.ManagedMediaSource&&e.i&&(e.C&&e.g.removeChild(e.C),e.C=T0(t,n),e.g.appendChild(e.C),e.g.disableRemotePlayback=!1)}function oI(e,t){var n,i,r,s,o,a,u,c,h,p,E;return X(function(A){if(A.g==1)return e.createSegmentIndex?T(A,e.createSegmentIndex(),2):A.s(2);if(!e.segmentIndex)return A.return(!1);if(e.segmentIndex.getNumReferences()==0)return A.return(!0);for(n=jn,i=new Set,r=v(e.segmentIndex),s=r.next();!s.done;s=r.next())if(o=s.value,a=o.mimeType||e.mimeType||"",u=o.codecs||e.codecs||"",(a!=e.mimeType||u!=e.codecs)&&(c=a+":"+u,!i.has(c))){if(i.add(c),t==n.va){if(h=Ln(a,u),!Ia(h))return A.return(!1)}else if(t==n.la?u=Vh(u):t==n.V&&(u=zu(u,a)),p=Gx(e,a,u),E=xa(a,u),!ti(p)&&!Zs(E))return A.return(!1)}return A.return(!0)})}function aI(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(z(ws)),t={};e=v(e);for(var n=e.next();!n.done;n=e.next()){n=n.value,Ia(n)?t[n]=!0:t[n]=be()?ti(n)||!!Zs(n):ze(n);var i=n.split(";")[0];t[i]=t[i]||t[n]}return t}d=I0.prototype,d.destroy=function(){return this.I.destroy()};function uI(e){var t,n,i,r,s,o,a,u,c,h,p,E,A,M,R;return X(function(C){if(C.g==1){for(t=[],n=v(e.u),i=n.next();!i.done;i=n.next())for(r=i.value,s=v(r),o=s.next().value,a=s.next().value,u=a[0],c=o,e.u.set(c,a.slice(0,1)),u&&t.push(u.p.catch(Yx)),h=v(a.slice(1)),p=h.next();!p.done;p=h.next())E=p.value,E.p.reject(new g(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),T(C,Promise.all(t),2)}for(A=v(e.j.values()),M=A.next();!M.done;M=A.next())R=M.value,R.destroy();e.o&&(e.o.release(),e.o=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.P&&(e.g.removeChild(e.P),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.P=null,e.C=null,e.A=null,e.i=null,e.h=null,e.ea=null,e.l.clear(),e.Aa.clear(),e.j.clear(),e.O=null,e.u.clear(),e.K=null,e.$.clear(),e.L=null,H(C)})}d.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,s,o,a,u,c,h;return X(function(p){switch(p.g){case 1:return s=jn,T(p,r.H,2);case 2:if(!qo(r)&&!ja(r)){p.s(3);break}return $e("Expected MediaSource to be open during init(); reopening the media source."),r.H=new rn,r.i=dp(r,r.H),T(p,r.H,3);case 3:r.F=t,r.T=n,r.Na=i,r.Ma=!r.F&&r.T=="HLS"&&!r.Na,r.$.clear(),r.Z=null,r.na=null,r.W=null,r.ka=null,r.fa=new rn,o=v(e.keys()),a=o.next();case 5:if(a.done){p.s(7);break}return u=a.value,c=e.get(u),T(p,nd(r,u,c,c.codecs),8);case 8:r.m?(r.u.set(s.V,[]),r.u.set(s.la,[])):r.u.set(u,[]),a=o.next(),p.s(5);break;case 7:(h=e.get(s.V))&&h.isAudioMuxedInVideo&&(r.m=!0),H(p)}})};function nd(e,t,n,i){var r,s,o,a,u,c,h,p,E,A,M,R;return X(function(C){switch(C.g){case 1:return r=jn,s=ue,o=Ae,T(C,oI(n,t),2);case 2:if(o.call(s,C.h,"Type negotiation should happen before MediaSourceEngine.init!"),t==r.V&&i&&(i=zu(i,n.mimeType)),a=Ln(n.mimeType,i),t==r.va){id(e,a,e.F,n.external),C.s(0);break}if(u=e.A.forceTransmux,(!ti(a)||!e.F&&ws.includes(a))&&(u=!0),c=xa(n.mimeType,i),!u){C.s(4);break}if(h=si(r.V,(i||"").split(",")),p=si(r.la,(i||"").split(",")),!h||!p){C.s(5);break}return e.m=!0,T(C,nd(e,r.V,n,h),6);case 6:return T(C,nd(e,r.la,n,p),7);case 7:return C.return();case 5:(E=Zs(c))&&(A=E(),e.j.set(t,A),a=A.convertCodecs(t,c));case 4:M=a+e.A.addExtraFeaturesToSourceBuffer(a),dn(e.I);try{R=e.i.addSourceBuffer(M)}catch(b){throw new g(2,3,3015,b,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.F&&(R.mode=TI),e.o.D(R,"error",function(){var b=e.u.get(t)[0];b.p.reject(new g(2,3,3014,e.g.error?e.g.error.code:0,b.uri))}),e.o.D(R,"updateend",function(){return bs(e,t)}),e.l.set(t,R),e.B.set(t,a),e.Aa.set(t,!!n.drmInfos.length),H(C)}})}d.configure=function(e){this.A=e,this.h&&(this.h.A=e.modifyCueCallback)};function M0(e){return e.sa&&!e.M&&!e.G}function id(e,t,n,i){e.h||(e.h=new As(e.ea),e.h&&(e.h.A=e.A.modifyCueCallback));var r=e.h;i=i||e.Ea,e=e.T,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=Vu.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):Vt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Vt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.B=i)}function qo(e){return e.G?!1:e.i?e.i.readyState=="ended":!0}function ja(e){return e.G?!1:e.i?e.i.readyState=="closed":!0}function fp(e,t){return e.l.size?t==Ot?e=e.h.g:(e=Fa(e,t),e=!e||el(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null):e=null,e}function Wo(e,t){return e.l.size?t==Ot?e.h.h:ip(Fa(e,t)):null}function lI(e,t,n){return t==Ot?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Fa(e,t),_0(e,n))}d.Fb=function(){var e={total:this.G?[]:Rs(this.g.buffered),audio:Rs(Fa(this,"audio")),video:Rs(Fa(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Fa(e,t){if(e.G||e.M)return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function cI(e,t,n,i,r,s){var o=null,a=[],u=x(n);if(ws.includes(s))t=Ko(u),t.length&&i&&((n=t.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(o=Math.round(n.data)/1e3),e.L.onMetadata([{cueTime:i.startTime,data:u,frames:t,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(s.includes("/mp4")&&i&&i.Y&&i.Y.timescale){var c=i.Y.timescale;if(!isNaN(c)){var h=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.A.dispatchAllEmsgBoxes,p=0,E=!1;u=new on,h&&u.R("emsg",function(A){var M=r.emsgSchemeIdUris;if(A.version===0)var R=A.reader.Cc(),C=A.reader.Cc(),b=A.reader.S(),U=A.reader.S(),$=A.reader.S(),Q=A.reader.S(),re=i.startTime+U/b;else b=A.reader.S(),re=A.reader.bd()/b+i.timestampOffset,U=re-i.startTime,$=A.reader.S(),Q=A.reader.S(),R=A.reader.Cc(),C=A.reader.Cc();A=A.reader.Db(A.reader.getLength()-A.reader.Ba()),(M&&M.includes(R)||e.A.dispatchAllEmsgBoxes)&&(R=="urn:mpeg:dash:event:2012"?e.L.ij():(M=re+$/b,b={startTime:re,endTime:M,schemeIdUri:R,value:C,timescale:b,presentationTimeDelta:U,eventDuration:$,id:Q,messageData:A},Q=new Map().set("detail",b),new qe("emsg",Q).cancelable=!0,e.L.gj(b),(R=="https://aomedia.org/emsg/ID3"||R=="https://developer.apple.com/streaming/emsg-id3")&&(R=Ko(A),R.length&&e.L.onMetadata([{cueTime:re,data:A,frames:R,dts:re,pts:re}],0,M))))}),u.R("prft",function(A){var M=A.reader,R=A.version;M.S(),A=M.S();var C=M.S();A=1e3*A+C/Math.pow(2,32)*1e3,R===0?M=M.S():(R=M.S(),M=M.S(),M=R*Math.pow(2,32)+M),A=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+A).getTime(),M=new Map().set("detail",{wallClockTime:A,programStartDate:new Date(A-M/c*1e3)}),M=new qe("prft",M),e.L.onEvent(M)}).box("moof",Mt).box("traf",Mt).R("tfdt",function(A){E||(p=Yc(A.reader,A.version).baseMediaDecodeTime/c,E=!0,h||A.parser.stop())}).parse(n,!0),E&&i.timestampOffset==0&&(o=p)}}else s.includes("/mp4")||s.includes("/webm")||!Ba(u)||(e.$.has(t)?e.$.get(t).clearData():e.$.set(t,new vn),a=e.$.get(t).parse(u),u=a.getStartTime(t),u!=null&&(o=u),a=a.getMetadata());return{timestamp:o,metadata:a}}function rd(e,t,n,i,r,s,o,a,u,c){o=o===void 0?!1:o,a=a===void 0?!1:a,u=u===void 0?!1:u,c=c===void 0?!1:c;var h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me;return X(function(le){switch(le.g){case 1:if(h=jn,t!=h.va){le.s(2);break}if(e.T!="HLS"){le.s(3);break}return T(le,e.Fa,4);case 4:p=le.h,e.h.u=p;case 3:return T(le,Kx(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.N()[0]:null),5);case 5:return le.return();case 2:if(c||!e.m){le.s(6);break}return T(le,rd(e,h.V,n,i,r,s,o,a,u,!0),7);case 7:return T(le,rd(e,h.la,n,i,r,s,o,a,u,!0),8);case 8:return le.return();case 6:if(!e.l.has(t))return le.return();if(E=e.l.get(t).timestampOffset,A=e.B.get(t),e.j.has(t)&&(A=e.j.get(t).getOriginalMimeType()),i&&(M=cI(e,t,n,i,r,A),R=M.timestamp,C=M.metadata,R!=null&&(e.Z==null&&t==h.la&&(e.Z=R,e.na=i.startTime,e.W!=null&&(b=0,e.na==e.ka&&(b=e.Z-e.W),e.fa.resolve(b))),e.W==null&&t==h.V&&(e.W=R,e.ka=i.startTime,e.Z!=null&&(U=0,e.na==e.ka&&(U=e.Z-e.W),e.fa.resolve(U))),$=R,Q=ws,!e.F&&Q.includes(e.B.get(t))&&($=0),re=i.startTime-$,W=Math.abs(E-re),(.001<=W||o||a)&&(!u||0<re||!E)&&(E=re,e.Ma&&($n(e,t,function(){return Va(e,t)},null),$n(e,t,function(){return Ha(e,t,E)},null))),(t==h.la||!e.l.has(h.la))&&e.Fa.resolve(E)),C.length)&&e.L.onMetadata(C,E,i?i.endTime:null),s&&t==h.la&&(e.h||id(e,"application/cea-608",e.F,!1),e.O||(q=A.split(";",1)[0],e.O=new sr(q)),i?(ne=e.O.i(n),ne.length&&Wx(e.h,ne,i.startTime,i.endTime,E)):e.O.init(n,a)),!e.j.has(t)){le.s(9);break}return T(le,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:n=le.h;case 9:if(n=gI(e,r,n,i,t),!i||!e.F||t==h.va){le.s(11);break}if(!o&&!a){le.s(11);break}if(ie=i.startTime,e.T!="HLS"||e.m||t!=h.V||!e.l.has(h.la)){le.s(13);break}return T(le,e.fa,14);case 14:me=le.h,.15<Math.abs(me)&&(ie-=me);case 13:$n(e,t,function(){return Va(e,t)},null),$n(e,t,function(){return Ha(e,t,ie)},null);case 11:return T(le,$n(e,t,function(){var pe=n;e.K&&vh(e.K,pe,E,r),e.l.get(t).appendBuffer(pe)},i?i.N()[0]:null),15);case 15:H(le)}})}function dI(e,t){var n=Wo(e,"video")||0;mv(e.h,t,n)}function fI(e){e.h&&mv(e.h,"",0)}d.remove=function(e,t,n){var i=this,r;return X(function(s){return s.g==1?(r=jn,e==r.va?T(s,i.h.remove(t,n),0):n>t?T(s,$n(i,e,function(){return sd(i,e,t,n)},null),5):s.s(0)):i.m?T(s,$n(i,r.V,function(){return sd(i,r.V,t,n)},null),0):s.s(0)})};function C0(e,t){var n;return X(function(i){return i.g==1?(n=jn,t==n.va?e.h?T(i,e.h.remove(0,1/0),0):i.return():T(i,$n(e,t,function(){return sd(e,t,0,e.i.duration)},null),4)):e.m?T(i,$n(e,n.V,function(){return sd(e,n.V,0,e.i.duration)},null),0):i.s(0)})}d.flush=function(e){var t=this,n;return X(function(i){return i.g==1?(n=jn,e==n.va?i.return():T(i,$n(t,e,function(){t.g.currentTime-=.001,bs(t,e)},null),2)):t.m?T(i,$n(t,n.V,function(){var r=n.V;t.g.currentTime-=.001,bs(t,r)},null),0):i.s(0)})};function hI(e,t,n,i,r,s,o,a,u){var c,h,p;return X(function(E){return E.g==1?(c=jn,t==c.va?(s||(e.h.u=n),qx(e.h,i,r),E.return()):(h=[],T(E,_I(e,t,o,a,u),2))):(p=E.h,p||(h.push($n(e,t,function(){return Va(e,t)},null)),e.m&&h.push($n(e,c.V,function(){return Va(e,c.V)},null))),s||(h.push($n(e,t,function(){return Ha(e,t,n)},null)),e.m&&h.push($n(e,c.V,function(){return Ha(e,c.V,n)},null))),(i!=0||r!=1/0)&&(h.push($n(e,t,function(){var A=e.l.get(t);A.appendWindowStart=0,A.appendWindowEnd=r,A.appendWindowStart=i,bs(e,t)},null)),e.m&&h.push($n(e,c.V,function(){var A=c.V,M=e.l.get(A);M.appendWindowStart=0,M.appendWindowEnd=r,M.appendWindowStart=i,bs(e,A)},null))),h.length?T(E,Promise.all(h),0):E.s(0))})}function pI(e,t,n){var i,r;return X(function(s){return s.g==1?(i=jn,t==i.va||(t==i.la&&(e.Fa=new rn),!e.F||(r=Wo(e,t))&&.1>Math.abs(r-n))?s.return():($n(e,t,function(){return Va(e,t)},null),e.m&&$n(e,i.V,function(){return Va(e,i.V)},null),T(s,$n(e,t,function(){return Ha(e,t,n)},null),2))):e.m?T(s,$n(e,i.V,function(){return Ha(e,i.V,n)},null),0):s.s(0)})}d.endOfStream=function(e){var t=this;return X(function(n){return T(n,tl(t,function(){qo(t)||ja(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},d.bb=function(e){var t=this;return X(function(n){return T(n,tl(t,function(){if(e<t.i.duration)for(var i=v(t.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var s={start:function(){},p:new rn,uri:null};t.u.get(r).unshift(s)}t.i.duration=e,t.oa=e}),0)})},d.getDuration=function(){return this.i.duration};function mI(e,t,n){X(function(i){return e.I.g||e.M||e.G||qo(e)||ja(e)?i.return():T(i,tl(e,function(){qo(e)||ja(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function hp(e){X(function(t){return e.I.g||e.M||e.G||qo(e)||ja(e)?t.return():T(t,tl(e,function(){qo(e)||ja(e)||e.i.clearLiveSeekableRange()}),0)})}function sd(e,t,n,i){i<=n?bs(e,t):e.l.get(t).remove(n,i)}function Va(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,bs(e,t)}function Ha(e,t,n){0>n&&(n+=.001);var i=!0;e.T=="HLS"&&(i=Wo(e,t),i=!i||.15<Math.abs(i-n)),i&&(e.l.get(t).timestampOffset=n),bs(e,t)}function bs(e,t){if(!e.G){var n=e.u.get(t)[0];n&&(n.p.resolve(),pp(e,t))}}function $n(e,t,n,i){return dn(e.I),n={start:n,p:new rn,uri:i},e.u.get(t).push(n),e.u.get(t).length==1&&R0(e,t),n.p}function tl(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M;return X(function(R){switch(R.g){case 1:for(dn(e.I),n=[],i=Array.from(e.l.keys()),r=v(i),s=r.next(),o={};!s.done;o={ready:void 0},s=r.next())a=s.value,o.ready=new rn,u={start:function(C){return function(){return C.ready.resolve()}}(o),p:o.ready,uri:null},c=e.u.get(a),c.push(u),n.push(o.ready),c.length==1&&u.start();return ve(R,2),T(R,Promise.all(n),4);case 4:Me(R,3);break;case 2:throw h=Ce(R),h;case 3:return ve(R,5,6),T(R,t(),6);case 6:for(tt(R),p=v(i),E=p.next();!E.done;E=p.next())A=E.value,pp(e,A);ct(R,0);break;case 5:throw M=Ce(R),new g(2,3,3015,M,e.g.error||"No error in the media element",null)}})}function pp(e,t){e.u.get(t).shift(),R0(e,t)}function R0(e,t){var n=e.u.get(t)[0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new g(2,3,3017,t)):M0(e)?n.p.reject(new g(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new g(2,3,3024,t)),pp(e,t)}}function gI(e,t,n,i,r){if(Pc(e.B.get(r))!="mp4")return n;var s=i===null,o=e.Aa.get(r),a=e.L.ui(),u=!1;return i&&i.Y&&(u=i.Y.encrypted),i=i?i.N()[0]:null,e.A.correctEc3Enca&&s&&r==="audio"&&(n=W2(n)),(e=e.A.insertFakeEncryptionInInit&&o)&&(a=te(a),e=At()&&r==="audio"||Je()||nt()||an("SOPOpenBrowser")||Ue()&&Bt()&&a),e&&(s?n=X2(t,n,i):((t=!u)&&(t=At()&&r==="audio"),t&&(n=Y2(n)))),s&&Xe()&&(n=J2(n)),n}function yI(e,t,n,i){return $n(e,t,function(){if(t!==Ot){if(e.B.get(t),Co()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.A.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.B.set(t,n)}bs(e,t)}},null)}function vI(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re;return X(function(W){switch(W.g){case 1:if(e.G)return W.return();for(n=jn,e.G=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.za=!0),e.Oa&&(e.g.autoplay=!1),Ye(W,2),e.o.Ra(),s=v(e.j.values()),o=s.next();!o.done;o=s.next())a=o.value,a.destroy();for(u=v(e.l.values()),c=u.next();!c.done;c=u.next()){h=c.value;try{e.i.removeSourceBuffer(h)}catch{}}return e.j.clear(),e.l.clear(),p=e.i.duration,e.H=new rn,e.i=dp(e,e.H),T(W,e.H,4);case 4:!isNaN(p)&&p?e.i.duration=p:!isNaN(e.oa)&&e.oa&&(e.i.duration=e.oa),E=new rn,A=e.i.sourceBuffers,M=t.size,R=0,C=function(){R++,R===M&&(E.resolve(),e.o.Ka(A,"addsourcebuffer",C))},e.o.D(A,"addsourcebuffer",C),b=v(t.keys()),U=b.next();case 5:return U.done?((re=t.get(n.V))&&re.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.u.has(n.V)&&e.u.set(n.V,[]),e.g.currentTime=i,T(W,E,2)):($=U.value,Q=t.get($),T(W,nd(e,$,Q,Q.codecs),6));case 6:U=b.next(),W.s(5);break;case 2:tt(W),e.G=!1,dn(e.I),e.o.qa(e.g,"canplaythrough",function(){e.I.g||(e.g.autoplay=r,e.za&&(e.za=!1,e.g.play()))}),ct(W,0)}})}function k0(e,t){return tl(e,function(){return vI(e,t)})}function b0(e,t,n,i){var r=!1,s=si("audio",(i||"").split(",")),o=si("video",(i||"").split(",")),a=o;t=="audio"&&(a=s),a||(a=i),i=Ln(n,a);var u=e.A.forceTransmux;if((!ti(i)||!e.F&&ws.includes(i))&&(u=!0),u&&(e=xa(n,a),n=Zs(e))){var c=n();s&&o&&(r=!0),i=c.convertCodecs(t,e)}return t=oi(Xi(i)),{wg:c,Hj:r,Gg:Wi(i),codec:t,mimeType:i}}function _I(e,t,n,i,r){var s,o,a,u,c,h,p,E,A,M,R,C,b,U;return X(function($){return $.g==1?(s=jn,t==s.va?$.return(!1):(o=oi(Xi(e.B.get(t))),a=Wi(e.B.get(t)),u=b0(e,t,n,i),c=u.wg,h=u.Hj,p=u.Gg,E=u.codec,A=u.mimeType,M=!0,h&&e.B.has(s.V)&&(R=b0(e,s.V,n,i),C=oi(Xi(e.B.get(s.V))),b=Wi(e.B.get(s.V)),M=C==R.codec&&b==R.Gg,R.wg&&R.wg.destroy()),o===E&&a===p&&M?(e.j.has(t)&&!c?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&c?e.j.set(t,c):c&&(e.j.has(t)&&e.j.get(t).transmux!=c.transmux?(e.j.get(t).destroy(),e.j.delete(t),e.j.set(t,c)):c.destroy()),$.return(!1)):(U=!0,(e.m||h&&c&&!e.j.has(t))&&(U=!1),U&&e.A.codecSwitchingStrategy==="smooth"&&Co()?T($,yI(e,t,A,c),3):(c&&c.destroy(),T($,k0(e,r),3))))):$.return(!0)})}function SI(e,t,n,i){if(t==Ot)var r=!1;else{r=oi(Xi(e.B.get(t)));var s=Wi(e.B.get(t)),o=Ln(n,i),a=e.A.forceTransmux;(!ti(o)||!e.F&&ws.includes(o))&&(a=!0),n=xa(n,i),a&&(a=Zs(n))&&(a=a(),o=a.convertCodecs(t,n),a.destroy()),t=oi(Xi(o)),o=Wi(o),r=r!==t||s!==o}return r?e.A.codecSwitchingStrategy!=="smooth"||!Co()||e.m:!1}var mp=_.URL.createObjectURL,TI="sequence";function ft(e,t,n){this.i=e,this.C=t,this.o=this.l=1/0,this.h=1,this.g=this.j=null,this.A=0,this.B=!0,this.I=!1,this.H=0,this.F=n===void 0?!0:n,this.G=0,this.u=!1,this.m=e}d=ft.prototype,d.getDuration=function(){return this.l},d.xi=function(){return this.h},d.zh=function(e){this.i=e},d.bb=function(e){this.l=e},d.Di=function(){return this.i},d.xh=function(e){this.A=e},d.Gc=function(e){e&&!this.B&&(this.I=!0),this.B=e},d.Fe=function(e){this.o=e},d.ee=function(){return this.o},d.lg=function(e){this.C=e},d.ni=function(){return this.C},d.lh=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(r){return r.start+t<n}),e.length!=0){var i=e[e.length-1].end+t;this.re(e[0].start+t),this.h=e.reduce(function(r,s){return Math.max(r,s.end-s.start)},this.h),this.g=Math.max(this.g,i),this.i!=null&&this.F&&!this.u&&(this.i=n-this.g-this.h)}}},d.Ed=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.A)/1e3;e=v(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.re(t),this.g=Math.max(this.g,n),this.i!=null&&this.F&&!this.u&&(this.i=i-this.g-this.h)}},d.kh=function(e,t){this.re(e),t==1/0||this.U()||(this.g=Math.max(this.g,t))},d.yi=function(){return this.g},d.me=function(){this.u=!0},d.Yi=function(){return this.u},d.yh=function(e){this.m=e},d.ti=function(){return this.m},d.re=function(e){this.j==null?this.j=e:this.I||(this.j=Math.min(this.j,e))},d.Vf=function(e){this.h=Math.max(this.h,e)},d.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},d.U=function(){return this.l==1/0&&!this.B},d.yc=function(){return this.l!=1/0&&!this.B},d.pb=function(){return Math.max(this.H,this.cc()-this.o)},d.Ch=function(e){this.H=e},d.cc=function(){return this.U()||this.yc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},d.qd=function(e){var t=Math.max(this.j,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.cc()-this.o+e,this.ob()))},d.Hb=function(){return this.qd(0)},d.ob=function(){return Math.max(0,this.cc()-(this.U()||this.yc()?this.C:0))},d.Lh=function(){return!(this.i==null||this.g!=null&&this.F)},d.wh=function(e){this.G=e},d.ji=function(){return this.G},G("shaka.media.PresentationTimeline",ft),ft.prototype.getAvailabilityTimeOffset=ft.prototype.ji,ft.prototype.setAvailabilityTimeOffset=ft.prototype.wh,ft.prototype.usingPresentationStartTime=ft.prototype.Lh,ft.prototype.getSeekRangeEnd=ft.prototype.ob,ft.prototype.getSeekRangeStart=ft.prototype.Hb,ft.prototype.getSafeSeekRangeStart=ft.prototype.qd,ft.prototype.getSegmentAvailabilityEnd=ft.prototype.cc,ft.prototype.setUserSeekStart=ft.prototype.Ch,ft.prototype.getSegmentAvailabilityStart=ft.prototype.pb,ft.prototype.isInProgress=ft.prototype.yc,ft.prototype.isLive=ft.prototype.U,ft.prototype.offset=ft.prototype.offset,ft.prototype.notifyMaxSegmentDuration=ft.prototype.Vf,ft.prototype.notifyMinSegmentStartTime=ft.prototype.re,ft.prototype.getInitialProgramDateTime=ft.prototype.ti,ft.prototype.setInitialProgramDateTime=ft.prototype.yh,ft.prototype.isStartTimeLocked=ft.prototype.Yi,ft.prototype.lockStartTime=ft.prototype.me,ft.prototype.getMaxSegmentEndTime=ft.prototype.yi,ft.prototype.notifyPeriodDuration=ft.prototype.kh,ft.prototype.notifySegments=ft.prototype.Ed,ft.prototype.notifyTimeRange=ft.prototype.lh,ft.prototype.getDelay=ft.prototype.ni,ft.prototype.setDelay=ft.prototype.lg,ft.prototype.getSegmentAvailabilityDuration=ft.prototype.ee,ft.prototype.setSegmentAvailabilityDuration=ft.prototype.Fe,ft.prototype.setStatic=ft.prototype.Gc,ft.prototype.setClockOffset=ft.prototype.xh,ft.prototype.getPresentationStartTime=ft.prototype.Di,ft.prototype.setDuration=ft.prototype.bb,ft.prototype.setPresentationStartTime=ft.prototype.zh,ft.prototype.getMaxSegmentDuration=ft.prototype.xi,ft.prototype.getDuration=ft.prototype.getDuration;function gp(e,t,n,i){var r=this;this.u=i,this.g=e,this.B=t,this.h=n,this.o=new _t,this.l=!1,this.F=e.readyState,this.G=this.C=this.j=0,this.m=EI(this),this.A=!1,this.o.D(e,"waiting",function(){return nl(r)}),this.i=new se(function(){nl(r)}).ua(this.h.gapJumpTimerTime)}gp.prototype.release=function(){this.o&&(this.o.release(),this.o=null),this.i!=null&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.B=this.u=null},gp.prototype.ue=function(){this.A=!0,this.i&&this.i.ua(this.h.gapJumpTimerTime),nl(this)};function nl(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.m)){t=e.m;var n=t.j,i=L0(n),r=n.g.currentTime,s=Date.now()/1e3;(t.g!=r||t.m!=i)&&(t.l=s,t.g=r,t.m=i,t.h=!1),r=s-t.l,(i=r>=t.o&&i&&!t.h)&&(t.i&&t.i(t.g,r),t.h=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=Z2(n,t,e.h.gapDetectionThreshold),i==null||i==0&&!e.A||(r=n.start(i),(s=e.h.gapPadding)&&(r=Math.ceil(100*(r+s))/100),r>=e.B.ob()||.001>r-t||(i!=0&&n.end(i-1),e.g.currentTime=r,t==e.j&&(e.j=r),e.C++,e.u(new qe("gapjumped")))))}}}function EI(e){if(!e.h.stallEnabled)return null;var t=e.h.stallSkip;return new D0(new wI(e.g),e.h.stallThreshold,function(){var n;return X(function(i){if(i.g==1)return n=Rs(e.g.buffered),n.length?t?(e.g.currentTime+=t,i.s(2)):T(i,e.g.play(),3):i.return();if(i.g!=2){if(!e.g)return i.return();e.g.pause(),e.g.play()}e.G++,e.u(new qe("stalldetected")),H(i)})})}function D0(e,t,n){this.j=e,this.m=L0(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.o=t,this.i=n}D0.prototype.release=function(){this.i=this.j=null};function wI(e){this.g=e}function L0(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=v(Rs(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Ga(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=AI.value().get(t),n.qa(e,t,i))}var AI=new P(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function P0(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.o=!1,this.h=new _t,this.i=new B0(e),Ga(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){N0(r,r.j())})}P0.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function yp(e){return e.o?e.g.currentTime:e.j()}function O0(e,t){0<e.g.readyState?j0(e.i,t):Ga(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){N0(e,e.j())})}function N0(e,t){.001>Math.abs(e.g.currentTime-t)?U0(e):(e.h.qa(e.g,"seeking",function(){U0(e)}),j0(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function U0(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function B0(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new se(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}B0.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function j0(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.ua(.1)}function F0(e){this.h=e,this.j=!1,this.g=null,this.i=new _t}d=F0.prototype,d.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,i=t.g;0>t.g&&(i=Math.max(0,n+t.g)),n!=i?(t.i.qa(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=i):t.j=!0}}var t=this;Ga(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},d.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},d.cf=function(e){this.g=this.j?this.g:e},d.Rd=function(){return(this.j?this.h.currentTime:this.g)||0},d.Cg=function(){return 0},d.Bg=function(){return 0},d.jh=function(){};function V0(e,t,n,i,r,s){var o=this;this.i=e,this.g=t.presentationTimeline,this.l=n,this.u=r,this.o=null,this.j=new gp(e,t.presentationTimeline,n,s),this.h=new P0(e,function(){e:{var a=o.j;a.l=!0,a.A=!1,a.i&&a.i.ua(a.h.gapJumpTimerTime),nl(a);var u=yp(o.h);if(a=G0(o,u),!Yy()&&.001<Math.abs(a-u)){if(u=!1,!Ze()||Ze()&&qt())u=!0;else{var c=Date.now()/1e3,h=Ze()&&Tn()?3:1;(!o.o||o.o<c-h)&&(o.o=c,u=!0)}if(u){O0(o.h,a),a=void 0;break e}}o.u(),a=void 0}return a},function(a){var u=o.j;u.g.seeking&&!u.l&&(u.l=!0,u.j=a),u.i&&u.i.ua(u.h.gapJumpTimerTime),nl(u)},function(){var a=i;return a==null?a=1/0>o.g.getDuration()?o.g.Hb():o.g.ob():0>a&&(a=o.g.ob()+a),H0(o,z0(o,a))}),this.m=new se(function(){if(o.i.readyState!=0&&!o.i.paused){var a=yp(o.h),u=o.g.Hb(),c=o.g.ob();3>c-u&&(u=c-3),a<u&&(a=G0(o,a),o.i.currentTime=a)}})}d=V0.prototype,d.ready=function(){this.m.ua(.25)},d.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},d.cf=function(e){O0(this.h,e)},d.Rd=function(){var e=yp(this.h);return 0<this.i.readyState&&!this.i.paused?z0(this,e):e},d.Cg=function(){return this.j.G},d.Bg=function(){return this.j.C},d.jh=function(){this.j.ue()};function H0(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function G0(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.Hb(),s=e.g.ob(),o=e.g.getDuration();3>s-r&&(r=s-3);var a=e.g.qd(n),u=e.g.qd(i);return n=e.g.qd(n+i),t>=o?H0(e,t):t>s?s-e.l.safeSeekEndOffset:t<r?rp(e.i.buffered,u)?u:n:t>=a||rp(e.i.buffered,t)?t:n}function z0(e,t){var n=e.g.Hb();return t<n?n:(e=e.g.ob(),t>e?e:t)}function Wt(e){this.g=e,this.m=null,this.i=0,this.o=!1}d=Wt.prototype,d.getNumReferences=function(){return this.g.length},d.getNumEvicted=function(){return this.i},d.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},d.dj=function(){this.o=!0},d.xb=function(e){for(var t=v(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function Kr(e){return e.g[0]||null}d.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},d.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},d.offset=function(e){if(!this.o)for(var t=v(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},d.oe=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,z(e))}},d.Bd=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.oe(e),this.Pa(t)},d.Pa=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},d.Oc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new lt(e.startTime,t,e.C,e.Sa,e.xa,e.Y,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},d.Le=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new se(function(){var i=t();i?n.g.push.apply(n.g,z(i)):(n.m.stop(),n.m=null)}),this.m.ua(e))},Wt.prototype[Symbol.iterator]=function(){return this.Gb(0)},Wt.prototype.Gb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;var r=this.get(i);n?i++:i--;var s=-1;if(r&&0<r.g.length)for(var o=r.g.length-1;0<=o;--o){var a=r.g[o];if(e>=a.startTime&&e<a.endTime){if(!t){for(;o&&!a.l;)o--,a=r.g[o];if(!a.l)return $e("No independent partial segment found!"),null}n?i--:i++,s=o-1;break}}return new gr(this,i,s,n)};function od(e,t,n){return e=new lt(e,e+t,function(){return n},0,null,null,e,e,e+t),new Wt([e])}G("shaka.media.SegmentIndex",Wt),Wt.forSingleSegment=od,Wt.prototype.getIteratorForTime=Wt.prototype.Gb,Wt.prototype.updateEvery=Wt.prototype.Le,Wt.prototype.fit=Wt.prototype.Oc,Wt.prototype.evict=Wt.prototype.Pa,Wt.prototype.mergeAndEvict=Wt.prototype.Bd,Wt.prototype.offset=Wt.prototype.offset,Wt.prototype.get=Wt.prototype.get,Wt.prototype.find=Wt.prototype.find,Wt.prototype.markImmutable=Wt.prototype.dj,Wt.prototype.release=Wt.prototype.release,Wt.prototype.getNumEvicted=Wt.prototype.getNumEvicted,Wt.prototype.getNumReferences=Wt.prototype.getNumReferences;function gr(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}d=gr.prototype,d.ed=function(e){this.reverse=e},d.ei=function(){return this.h},d.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.A&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},d.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.A&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},d.fg=function(){var e=this.current();if(e.o&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var t=e.g[this.g];t.l&&!(0>=this.g);)this.g--,t=e.g[this.g]},G("shaka.media.SegmentIterator",gr),gr.prototype.resetToLastIndependent=gr.prototype.fg,gr.prototype.next=gr.prototype.next,gr.prototype.current=gr.prototype.current,gr.prototype.currentPosition=gr.prototype.ei,gr.prototype.setReverse=gr.prototype.ed;function Mn(){Wt.call(this,[]),this.h=[]}He(Mn,Wt),d=Mn.prototype,d.clone=function(){var e=new Mn;return e.h=this.h.slice(),e.i=this.i,e},d.release=function(){for(var e=v(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},d.xb=function(e){for(var t=v(this.h),n=t.next();!n.done;n=t.next())n.value.xb(e)},d.find=function(e){for(var t=this.i,n=v(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null},d.get=function(e){for(var t=this.i,n=v(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},d.offset=function(){},d.oe=function(){},d.Pa=function(e){for(var t=v(this.h),n=t.next();!n.done;n=t.next())n.value.Pa(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},d.Bd=function(){},d.Oc=function(){},d.Le=function(){},G("shaka.media.MetaSegmentIndex",Mn),Mn.prototype.updateEvery=Mn.prototype.Le,Mn.prototype.fit=Mn.prototype.Oc,Mn.prototype.mergeAndEvict=Mn.prototype.Bd,Mn.prototype.evict=Mn.prototype.Pa,Mn.prototype.merge=Mn.prototype.oe,Mn.prototype.offset=Mn.prototype.offset,Mn.prototype.get=Mn.prototype.get,Mn.prototype.find=Mn.prototype.find,Mn.prototype.forEachTopLevelReference=Mn.prototype.xb,Mn.prototype.release=Mn.prototype.release;function il(e){var t=this;this.g=e,this.j=!1,this.i=this.g.de(),this.h=new se(function(){t.g.hh(.25*t.i)})}il.prototype.release=function(){this.set(this.sc()),this.h&&(this.h.stop(),this.h=null),this.g=null},il.prototype.set=function(e){this.i=e,vp(this)},il.prototype.sc=function(){return this.g.sc()};function vp(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.de()!=t&&e.g.og(t);return}catch{}e.h.ua(.25),e.g.de()!=0&&e.g.og(0)}function _p(e){var t=this;this.j=e,this.h=new _t,this.g=new Set,this.i=new se(function(){K0(t,!1)}).sb(),e.paused||this.i.ua(.25),this.h.D(e,"playing",function(){t.i.sb().ua(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}_p.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=v(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function K0(e,t){var n=e.j.currentTime;e=v(e.g);for(var i=e.next();!i.done;i=e.next())i.value.j(n,t)}function ad(e){sn.call(this),this.g=new Map,this.h=e}He(ad,sn),ad.prototype.release=function(){this.g.clear(),sn.prototype.release.call(this)};function xI(e,t){var n=e.g.get(t);return n||(n={Kd:[],pf:null,contentType:t},e.g.set(t,n)),n}function II(e,t,n){var i=xI(e,t.contentType);MI(e,i),e={Wc:t,position:n},i=i.Kd,t=i.findIndex(function(r){return r.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}ad.prototype.j=function(e){for(var t=v(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.pf;e:{for(var r=n.Kd,s=r.length-1;0<=s;s--){var o=r[s];if(o.position<=e){r=o.Wc;break e}}r=null}s=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),o=r&&i&&r.label&&i.label&&i.label!==r.label;var a=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!_a(i.roles,r.roles),(o||a||i)&&q0(this,e,r.contentType)&&(n.pf=r,i=new qe("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),s&&q0(this,e,r.contentType)&&(n.pf=r,JSON.stringify(r),n=new qe("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function q0(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function MI(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.Kd;t.Kd=r.filter(function(s,o){return!(s.position<=n&&o+1<r.length&&r[o+1].position<=n||s.position>=i)})}else t.Kd=[]}function ud(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function rl(e){sn.call(this),this.h=new Map,this.i=e,this.g=null}He(rl,sn),rl.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),sn.prototype.release.call(this)};function Sp(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new qe("regionadd",new Map([["region",t]])),e.dispatchEvent(t),CI(e))}function CI(e){e.g||(e.g=new se(function(){for(var t=e.i(),n=v(e.h),i=n.next();!i.done;i=n.next()){var r=v(i.value);i=r.next().value,r=r.next().value,r.endTime<t.start&&(e.h.delete(i),i=new qe("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).ua(2))}function ld(e,t,n,i){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=i}function RI(e,t){e.l=t,e=v(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function sl(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.g||(e.g=e.i.segmentIndex.Gb(t,!0,e.o)),!e.g))return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value,!!n);){var i=!0;n.isPreload()&&n.xa!=null&&(i=!1),n.dc()==2&&(i=!1),n.Ib(!1)&&(i=!1),i&&n.Y&&t.push(W0(e,n.Y)),i&&!e.h.has(n)&&(i=new Ep(e.l),t.push($0(i,n,e.i)),e.h.set(n,i))}return Tp(e),Promise.all(t)}function W0(e,t){if(!e.i.segmentIndex||t.Ib()||Array.from(e.j.keys()).some(function(r){return ed(r,t)}))return Promise.resolve();var n=new Ep(e.l),i=$0(n,t,e.i);return e.j.set(t,n),i}function X0(e,t){t=v(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&ol(e,n)}function qr(e){X0(e,e.h),X0(e,e.j),e.g=null}ld.prototype.Pa=function(e,t){t=t===void 0?!1:t;for(var n=v(this.h.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&ol(this,i);t&&Tp(this)},ld.prototype.ed=function(e){this.o=e,this.g&&this.g.ed(e)};function Tp(e){for(var t=Array.from(e.h.keys()),n=v(e.j.keys()),i=n.next(),r={};!i.done;r={Pf:void 0},i=n.next())r.Pf=i.value,t.some(function(s){return function(o){return ed(o.Y,s.Pf)}}(r))||ol(e,r.Pf)}function Y0(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var i=n.pop();i&&ol(e,i)}Tp(e)}function kI(e,t){t&&t!==e.i&&(qr(e),e.i=t)}function ol(e,t){var n=e.h;t instanceof Li&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Ep(e){this.g=e,this.Gd=this.rg=null}function $0(e,t,n){var i=new Uint8Array(0);return e.Gd=e.g(t,n,function(r){return X(function(s){if(s.g==1)return 0<i.byteLength?i=En(i,r):i=r,e.rg?T(s,e.rg(i),3):s.s(0);i=new Uint8Array(0),H(s)})}),e.Gd.promise.catch(function(r){return r instanceof g&&r.code==7001?Promise.resolve():Promise.reject(r)})}Ep.prototype.abort=function(){this.Gd&&this.Gd.abort()};function wp(e){var t=Wi(e),n=t.split("/")[0];return e=Xi(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Od:null,colorGamut:null,frameRate:null}}function bI(e,t,n){function i(q){b=q.name;var ne=q.reader;ne.skip(24);var ie=ne.ma(),me=ne.ma();ne.skip(50),E=String(ie),p=String(me),q.reader.ta()&&Mt(q)}function r(q){var ne=c0(q.reader);A=ne.channelCount,M=ne.sampleRate,s(q.name)}function s(q){switch(q=q.toLowerCase(),q){case"avc1":case"avc3":a.push(q+".42E01E"),c=!0;break;case"hev1":case"hvc1":a.push(q+".1.6.L93.90"),c=!0;break;case"dvh1":case"dvhe":a.push(q+".05.04"),c=!0;break;case"vp09":a.push(q+".00.10.08"),c=!0;break;case"av01":a.push(q+".0.01M.08"),c=!0;break;case"mp4a":o.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":o.push(q),u=!0}}var o=[],a=[],u=!1,c=!1,h=null,p=null,E=null,A=null,M=null,R=null,C=null,b;if(new on().box("moov",Mt).box("trak",Mt).box("mdia",Mt).R("mdhd",function(q){h=$c(q.reader,q.version).language}).box("minf",Mt).box("stbl",Mt).R("stsd",Ms).box("mp4a",function(q){var ne=c0(q.reader);A=ne.channelCount,M=ne.sampleRate,q.reader.ta()?Mt(q):s(q.name)}).box("esds",function(q){q=q.reader;for(var ne="mp4a",ie,me;q.ta();){ie=q.X();for(var le=q.X();le&128;)le=q.X();if(ie==3)q.ma(),le=q.X(),le&128&&q.ma(),le&64&&q.skip(q.X()),le&32&&q.ma();else if(ie==4)me=q.X(),q.skip(12);else if(ie==5)break}me&&(ne+="."+Qu(me),ie==5&&q.ta()&&(ie=q.X(),me=(ie&248)>>3,me===31&&q.ta()&&(me=32+((ie&7)<<3)+((q.X()&224)>>5)),ne+="."+me)),o.push(ne),u=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(q){var ne=b||"";switch(b){case"dvav":ne="avc3";break;case"dva1":ne="avc1"}q=q.reader,q.skip(1),q=ne+"."+Qu(q.X())+Qu(q.X())+Qu(q.X()),a.push(q),c=!0}).box("hvcC",function(q){var ne=b||"";switch(b){case"dvh1":ne="hvc1";break;case"dvhe":ne="hev1"}var ie=q.reader;ie.skip(1),q=ie.X();var me=["","A","B","C"][q>>6],le=q&31,pe=ie.S(),ge=(q&32)>>5?"H":"L";q=[ie.X(),ie.X(),ie.X(),ie.X(),ie.X(),ie.X()],ie=ie.X();for(var _e=0,Ie=0;32>Ie&&(_e|=pe&1,Ie!=31);Ie++)_e<<=1,pe>>=1;for(ne=ne+("."+me+le)+("."+Qu(_e,!0)),ne+="."+ge+ie,me="",le=q.length;le--;)((ge=q[le])||me)&&(me="."+ge.toString(16).toUpperCase()+me);ne+=me,a.push(ne),c=!0}).box("dvcC",function(q){var ne=b||"";switch(b){case"hvc1":ne="dvh1";break;case"hev1":ne="dvhe";break;case"avc1":ne="dva1";break;case"avc3":ne="dvav";break;case"av01":ne="dav1"}var ie=q.reader;ie.skip(2),q=ie.X(),ie=ie.X(),a.push(ne+"."+$i(q>>1&127)+"."+$i(q<<5&32|ie>>3&31)),c=!0}).box("dvvC",function(q){var ne=b||"";switch(b){case"hvc1":ne="dvh1";break;case"hev1":ne="dvhe";break;case"avc1":ne="dva1";break;case"avc3":ne="dvav";break;case"av01":ne="dav1"}var ie=q.reader;ie.skip(2),q=ie.X(),ie=ie.X(),a.push(ne+"."+$i(q>>1&127)+"."+$i(q<<5&32|ie>>3&31)),c=!0}).R("vpcC",function(q){var ne=b||"",ie=q.reader;q=ie.X();var me=ie.X();ie=ie.X()>>4&15,a.push(ne+"."+$i(q)+"."+$i(me)+"."+$i(ie)),c=!0}).box("av1C",function(q){var ne=b||"";switch(b){case"dav1":ne="av01"}var ie=q.reader;ie.skip(1),q=ie.X(),ie=ie.X();var me=q>>>5,le=(ie&64)>>6;a.push(ne+"."+me+"."+$i(q&31)+(ie>>>7?"H":"M")+"."+$i(me===2&&le?(ie&32)>>5?12:10:le?10:8)+"."+((ie&16)>>4)+"."+((ie&8)>>3)+((ie&4)>>2)+(ie&3)+"."+$i(1)+"."+$i(1)+"."+$i(1)+".0"),c=!0}).box("enca",Gc).box("encv",Yi).box("sinf",Mt).box("frma",function(q){q=tp(q.reader).codec,s(q)}).box("colr",function(q){a=a.map(function(me){if(me.startsWith("av01.")){var le=q.reader,pe=le.Ba(),ge=le.Db(4),_e=String.fromCharCode(ge[0]);if(_e+=String.fromCharCode(ge[1]),_e+=String.fromCharCode(ge[2]),_e+=String.fromCharCode(ge[3]),_e==="nclx"){ge=le.ma(),_e=le.ma();var Ie=le.ma(),Ee=le.X()>>7,De=me.split(".");De.length==10&&(De[6]=$i(ge),De[7]=$i(_e),De[8]=$i(Ie),De[9]=String(Ee),me=De.join("."))}le.seek(pe)}return me});var ne=O2(q.reader),ie=ne.colorGamut;R=ne.Od,C=ie}).parse(e||t,!0),!o.length&&!a.length)return null;var U=u&&!c,$=new Map;if(c&&!n){n=new sr("video/mp4"),e&&n.init(e);try{n.i(t);for(var Q=v(n.j()),re=Q.next();!re.done;re=Q.next()){var W=re.value;$.set(W,W)}}catch{}n.g()}return{type:U?"audio":"video",mimeType:U?"audio/mp4":"video/mp4",codecs:Ap(o.concat(a)).join(", "),language:h,height:p,width:E,channelCount:A,sampleRate:M,closedCaptions:$,Od:R,colorGamut:C,frameRate:null}}function Ap(e){var t=new Set,n=[];e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=to(i);t.has(r)||(n.push(i),t.add(r))}return t=ya("audio",n),i=ya("video",n),e=ya(Ot,n),i=DI(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function DI(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?ti('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function LI(e){var t=null;return new on().box("moov",Mt).box("trak",Mt).box("mdia",Mt).box("minf",Mt).box("stbl",Mt).R("stsd",Ms).box("encv",Yi).box("enca",Gc).box("sinf",Mt).box("schi",Mt).R("tenc",function(n){n=n.reader,n.X(),n.X(),n.X(),n.X(),t=br(n.Db(16))}).parse(e,!0),t}function xp(e,t,n){var i,r,s,o,a;return X(function(u){if(u.g==1)return i=t,i.cryptoKey?u.s(2):T(u,i.fetchKey(),3);if(r=i.iv,!r)for(r=x(new ArrayBuffer(16)),s=i.firstMediaSequenceNumber+n,o=r.byteLength-1;0<=o;o--)r[o]=s&255,s>>=8;return t.blockCipherMode=="CBC"?a={name:"AES-CBC",iv:r}:a={name:"AES-CTR",counter:r,length:64},u.return(_.crypto.subtle.decrypt(a,i.cryptoKey,e))})}function al(e,t,n,i,r){return e=qn(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Q0(e,t){var n=this;this.g=t,this.j=e,this.h=null,this.K=new Map,this.C=1,this.u=this.l=null,this.O=0,this.i=new Map,this.I=!1,this.P=null,this.B=!1,this.m=new ba(function(){return PI(n)}),this.L=Date.now()/1e3,this.o=new Map,this.M={projection:null,hfov:null},this.W=0,this.T=1/0,this.F=null,this.A=new se(function(){if(n.j&&n.g)if(n.j.presentationTimeline.U()){var i=n.j.presentationTimeline.Hb(),r=n.j.presentationTimeline.ob();1<r-i?mI(n.g.aa,i,r):hp(n.g.aa)}else hp(n.g.aa),n.A&&n.A.stop()}),this.G=null,this.H=new se(function(){var i=n.g.video;!i.ended&&n.G&&(i.currentTime=n.G,n.G=null)})}d=Q0.prototype,d.destroy=function(){return this.m.destroy()};function PI(e){var t,n,i,r,s,o,a;return X(function(u){if(u.g==1){for(t=[],n=v(e.i.values()),i=n.next();!i.done;i=n.next())r=i.value,Ka(r),t.push(ll(r)),r.ba&&(qr(r.ba),r.ba=null);for(s=v(e.o.values()),o=s.next();!o.done;o=s.next())a=o.value,qr(a);return T(u,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.j=null,e.h=null,e.A&&e.A.stop(),e.A=null,e.H&&e.H.stop(),e.H=null,e.G=null,H(u)})}d.configure=function(e){if(this.h=e,this.P=new kv({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.ba&&(qr(t.ba),t.ba=null),t=v(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,qr(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(Ot))&&t.ba&&(qr(t.ba),t.ba=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.ba&&(qr(t.ba),t.ba=null),t=v(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.ba?(Y0(n.ba,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(qr(n.ba),n.ba=null)):0<e.segmentPrefetchLimit&&(n.ba=Mp(this,n.stream));e.disableAudioPrefetch||VI(this)};function OI(e,t,n){e.j.presentationTimeline.U()||(e.W=t,e.T=n)}d.start=function(e){var t=this;return X(function(n){if(n.g==1)return T(n,FI(t,e||new Map),2);dn(t.m),t.I=!0,H(n)})};function NI(e,t){var n,i,r,s,o,a;X(function(u){switch(u.g){case 1:return n=jn,e.O++,i=e.O,ve(u,2),T(u,C0(e.g.aa,n.va),4);case 4:Me(u,3);break;case 2:r=Ce(u),e.g&&e.g.onError(r);case 3:s=Ln(t.mimeType,t.codecs),id(e.g.aa,s,e.j.sequenceMode,t.external),o=e.g.aa.ea,(o.isTextVisible()||e.h.alwaysStreamText)&&e.O==i&&(a=fd(e,t),e.i.set(n.va,a),xi(e,a,0)),H(u)}})}function UI(e){var t=e.i.get(Ot);t&&(Ka(t),ll(t).catch(function(){}),e.F=e.i.get(Ot),e.i.delete(Ot)),e.u=null}function Ip(e,t){for(var n=0>e.g.gb(),i=v(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.ja&&r.ja.ed(n),r.ba&&r.ba.ed(n);for(i=v(e.o.values()),r=i.next();!r.done;r=i.next())r.value.ed(n);(n=e.i.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.fc&&(za(e,t,!1,0,!1),n.fc=i):(t=n.fc)&&(n.fc=null,za(e,t,!0,0,!1)))}function J0(e,t,n,i,r,s){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,s=s===void 0?!1:s,e.l=t,e.I&&(t.video&&za(e,t.video,n,i,r,s),t.audio&&za(e,t.audio,n,i,r,s))}function cd(e,t){X(function(n){if(n.g==1)return e.F=null,e.u=t,e.I?t.segmentIndex?n.s(2):T(n,t.createSegmentIndex(),2):n.return();za(e,t,!0,0,!1),H(n)})}function BI(e,t){for(var n=v(e.K.entries()),i=n.next();!i.done;i=n.next()){var r=v(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.K.delete(i))}}function za(e,t,n,i,r,s){var o=e.i.get(t.type);o||t.type!=Ot?o&&(o.fc&&(t.trickModeVideo?(o.fc=t,t=t.trickModeVideo):o.fc=null),o.stream!=t||r)&&(e.o.has(t)?o.ba=e.o.get(t):o.ba&&kI(o.ba,t),t.type==Ot&&(r=Ln(t.mimeType,t.codecs),id(e.g.aa,r,e.j.sequenceMode,t.external)),!e.o.has(o.stream)&&o.stream.closeSegmentIndex&&(o.Da?(r="("+o.type+":"+o.stream.id+")",e.K.has(r)||e.K.set(r,o.stream.closeSegmentIndex)):o.stream.closeSegmentIndex()),r=o.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,o.stream=t,o.ja=null,o.df=!!s,t.dependencyStream?o.nd=fd(e,t.dependencyStream):o.nd=null,r?pd(e,!0,!1):(n?o.nc?o.Ue=!0:o.Da?(o.lc=!0,o.Yd=i,o.Ue=!0):(Ka(o),bp(e,o,!0,i).catch(function(a){e.g&&e.g.onError(a)})):o.Da||o.kb||xi(e,o,0),jI(e,o).catch(function(a){e.g&&e.g.onError(a)}))):NI(e,t)}function jI(e,t){var n,i;return X(function(r){if(r.g==1)return t.rb?(n=t.stream,i=t.rb,n.segmentIndex?r.s(2):T(r,n.createSegmentIndex(),2)):r.return();if(t.rb!=i||t.stream!=n)return r.return();var s=e.g.Rc(),o=Wo(e.g.aa,t.type),a=t.stream.segmentIndex.find(t.ya?t.ya.endTime:s),u=a==null?null:t.stream.segmentIndex.get(a);a=u&&u.xa?u.xa-u.Sa:null,u&&!a&&(a=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),a?((u=u.Y)&&(a+=(u.xa?u.xa-u.Sa:null)||0),u=e.g.getBandwidthEstimate(),s=8*a/u<(o||0)-s-e.h.rebufferingGoal||t.rb.h.g>a):s=!1,s&&t.rb.abort(),H(r)})}d.Fc=function(){if(this.g){for(var e=this.g.Rc(),t=v(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.i.get(i);var r=this.g.aa;if(i==Ot?(r=r.h,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=Fa(r,i),r=rp(r,e)),!r){if(this.L=0,n.ba&&(n.ba.g=null),n.type==="audio"){r=v(this.o.values());for(var s=r.next();!s.done;s=r.next())s.value.g=null}n.ja=null,(Wo(this.g.aa,i)!=null||n.Da)&&dd(this,n),n.rb&&(n.rb.abort(),n.rb=null),i===Ot&&(i=this.g.aa,i.O&&i.O.g()),n.Fc=!0}}this.h.crossBoundaryStrategy!=="keep"&&Lp(this)}};function dd(e,t){t.nc||t.lc||(t.Da?(t.lc=!0,t.Yd=0):fp(e.g.aa,t.type)==null?t.kb==null&&xi(e,t,0):(Ka(t),bp(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function FI(e,t){var n,i,r,s,o,a,u,c,h,p;return X(function(E){if(E.g==1){if(n=jn,!e.l)throw new g(2,5,5006);return i=new Map,r=new Set,e.l.audio&&(i.set(n.V,e.l.audio),r.add(e.l.audio)),e.l.video&&(i.set(n.la,e.l.video),r.add(e.l.video)),e.u&&(i.set(n.va,e.u),r.add(e.u)),s=e.g.aa,T(E,s.init(i,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(dn(e.m),e.updateDuration(),o=v(i.keys()),a=o.next();!a.done;a=o.next())u=a.value,c=i.get(u),e.i.has(u)||(h=fd(e,c),t.has(c.id)&&(p=t.get(c.id),RI(p,function(A,M,R){return hd(A,M,R||null,e.h.retryParameters,e.g.Xb)}),h.ba=p),e.i.set(u,h),xi(e,h,0));H(E)})}function fd(e,t){var n={stream:t,type:t.type,ja:null,ba:Mp(e,t),ya:null,zb:null,le:null,Ac:null,zc:null,je:null,ke:null,fc:null,endOfStream:!1,Da:!1,kb:null,lc:!1,Yd:0,Ue:!1,nc:!1,Fc:!0,df:!1,dg:!1,sd:!1,rb:null,nd:null};return t.dependencyStream&&(n.nd=fd(e,t.dependencyStream)),n}function Mp(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===Ot&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===Ot&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.ba)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new ld(e.h.segmentPrefetchLimit,t,function(i,r,s){return hd(i,r,s||null,e.h.retryParameters,e.g.Xb)},0>e.g.gb()):null}function VI(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,i=v(e.j.variants),r=i.next(),s={};!r.done;s={wb:void 0},r=i.next())if(s.wb=r.value,s.wb.audio)if(e.o.has(s.wb.audio)){if(r=e.o.get(s.wb.audio),Y0(r,t),!(0<t&&n.some(function(a){return function(u){return Ma(a.wb.audio.language,u)}}(s)))){var o=e.i.get(s.wb.audio.type);r!==(o&&o.ba)&&qr(r),e.o.delete(s.wb.audio)}}else 0>=t||!n.some(function(a){return function(u){return Ma(a.wb.audio.language,u)}}(s))||!(r=Mp(e,s.wb.audio))||(s.wb.audio.segmentIndex||s.wb.audio.createSegmentIndex(),e.o.set(s.wb.audio,r))}d.updateDuration=function(){var e=Yy(),t=this.j.presentationTimeline.getDuration();1/0>t?(e&&(this.A&&this.A.stop(),hp(this.g.aa)),this.g.aa.bb(t)):e?(this.A&&this.A.ua(.5),this.g.aa.bb(1/0)):this.g.aa.bb(Math.pow(2,32))};function HI(e,t){var n,i,r,s,o,a;return X(function(u){switch(u.g){case 1:if(dn(e.m),t.Da||t.kb==null||t.nc)return u.return();if(t.kb=null,!t.lc){u.s(2);break}return T(u,bp(e,t,t.Ue,t.Yd),3);case 3:return u.return();case 2:if(BI(e,t),t.stream.segmentIndex){u.s(4);break}return n=t.stream,ve(u,5),T(u,t.stream.createSegmentIndex(),7);case 7:Me(u,6);break;case 5:return i=Ce(u),T(u,Dp(e,t,i),8);case 8:return u.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Da||t.kb||xi(e,t,0),u.return();case 4:ve(u,9),r=GI(e,t),r!=null&&(xi(e,t,r),t.sd=!1),Me(u,10);break;case 9:return s=Ce(u),T(u,Dp(e,t,s),11);case 11:return u.return();case 10:if(o=Array.from(e.i.values()),!e.I||!o.every(function(c){return c.endOfStream})){u.s(0);break}return T(u,e.g.aa.endOfStream(),13);case 13:dn(e.m),a=e.g.aa.getDuration(),a!=0&&a<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.bb(a),H(u)}})}function GI(e,t){if(kp(t))return dI(e.g.aa,t.stream.originalId||""),null;if(t.type==Ot&&fI(e.g.aa),t.stream.isAudioMuxedInVideo)return null;var n=e.h.updateIntervalSeconds/Math.max(1,Math.abs(e.g.gb()));if(!M0(e.g.aa)&&t.type!=Ot)return n/2;var i=e.g.Rc();if(t.type==="audio")for(var r=v(e.o.keys()),s=r.next();!s.done;s=r.next())s=e.o.get(s.value),s.Pa(i,!0),sl(s,i);r=t.ya?t.ya.endTime:i;var o=lI(e.g.aa,t.type,i),a=Math.max(1,Math.max(e.h.rebufferingGoal,e.h.bufferingGoal)*e.C),u=e.j.presentationTimeline.getDuration()-r;if(s=Wo(e.g.aa,t.type),1e-6>u&&s)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Ot))&&kp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,o>=a)return n/2;if(a=!t.ja,s=zI(e,t,i,s),!s)return n;o=!1,a&&t.df&&(o=!0,t.df=!1),a=1/0,u=Array.from(e.i.values()),u=v(u);for(var c=u.next();!c.done;c=u.next())c=c.value,kp(c)||c.ja&&!c.ja.current()||(a=Math.min(a,c.ya?c.ya.endTime:i));return r>=a+e.j.presentationTimeline.h?n:(e.h.crossBoundaryStrategy!=="keep"&&QI(e,t,s)||(t.ba&&t.ja&&!e.o.has(t.stream)&&(t.ba.Pa(s.startTime+.001),sl(t.ba,s.startTime).catch(function(){})),KI(e,t,i,s,o).catch(function(){}),t.nd&&qI(e,t.nd,i)),null)}function zI(e,t,n,i){if(t.ja)return(n=t.ja.current())&&t.ya&&.001>Math.abs(t.ya.startTime-n.startTime)&&(n=t.ja.next().value),n;if(t.ya||i)return n=t.ya?t.ya.endTime:i,e=0>e.g.gb(),t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(n,!1,e)),t.ja&&t.ja.next().value;i=e.j.sequenceMode?0:e.h.inaccurateManifestTolerance;var r=Math.max(n-i,0);e=0>e.g.gb();var s=null;return i&&(t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(r,!1,e)),s=t.ja&&t.ja.next().value),s||(t.stream.segmentIndex&&(t.ja=t.stream.segmentIndex.Gb(n,!1,e)),s=t.ja&&t.ja.next().value),s}function KI(e,t,n,i,r){var s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re;return X(function(W){switch(W.g){case 1:if(s=jn,o=t.stream,a=t.ja,t.Da=!0,ve(W,2),i.dc()==2)throw new g(1,1,1011);return T(W,YI(e,t,i,r),4);case 4:return dn(e.m),e.B?W.return():(u=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",c=_.ReadableStream,e.h.lowLatencyMode&&e.j.isLowLatency&&c&&u&&(e.j.type!="HLS"||i.m)?(E=new Uint8Array(0),M=A=!1,C=function(q){var ne,ie,me;return X(function(le){switch(le.g){case 1:if(A||(M=!0,dn(e.m),e.B))return le.return();if(ve(le,2),E=WI(E,q),ne=!1,ie=0,new on().box("mdat",function(pe){ie=pe.size+pe.start,ne=!0}).parse(E,!1,!0),!ne){le.s(4);break}return me=E.subarray(0,ie),E=E.subarray(ie),T(le,Cp(e,t,n,o,i,me,!0,r),5);case 5:t.ba&&t.ja&&sl(t.ba,i.startTime,!0);case 4:Me(le,0);break;case 2:R=Ce(le),H(le)}})},T(W,ul(e,t,i,C),9)):(h=ul(e,t,i),T(W,h,7)));case 7:return p=W.h,dn(e.m),e.B?W.return():(dn(e.m),t.lc?(t.Da=!1,xi(e,t,0),W.return()):T(W,Cp(e,t,n,o,i,p,!1,r),6));case 9:if(b=W.h,R)throw R;if(M){W.s(10);break}return A=!0,dn(e.m),e.B?W.return():t.lc?(t.Da=!1,xi(e,t,0),W.return()):T(W,Cp(e,t,n,o,i,b,!1,r),10);case 10:t.ba&&t.ja&&sl(t.ba,i.startTime,!0);case 6:if(dn(e.m),e.B)return W.return();t.ya=i,a.next(),t.Da=!1,t.dg=!1,U=e.g.aa.Fb(),$=U[t.type],JSON.stringify($),t.lc||(Q=null,t.type===s.la?Q=e.i.get(s.V):t.type===s.V&&(Q=e.i.get(s.la)),Q&&Q.type==s.V?e.g.ue(i,t.stream,Q.stream.isAudioMuxedInVideo):e.g.ue(i,t.stream,t.stream.codecs.includes(","))),xi(e,t,0),Me(W,0);break;case 2:if(re=Ce(W),dn(e.m,re),e.B)return W.return();if(t.Da=!1,re.code==7001)t.Da=!1,Ka(t),xi(e,t,0),W.s(0);else if(t.type==s.va&&e.h.ignoreTextStreamFailures)e.i.delete(s.va),W.s(0);else return re.code==3017?T(W,XI(e,t,re),0):(t.sd=!0,re.category==1&&t.ba&&ol(t.ba,i),re.severity=2,T(W,Dp(e,t,re),0))}})}function qI(e,t,n){var i,r,s,o,a,u,c,h;X(function(p){switch(p.g){case 1:if(i=t.stream,s=(r=i.segmentIndex.Gb(n))&&r.next().value,!s){p.s(0);break}if(o=s.Y,!o||ed(o,t.zb)){p.s(3);break}return t.zb=o,ve(p,4),T(p,ul(e,t,o),6);case 6:a=p.h;var E=e.g.aa;E.K&&vh(E.K,a,0,i),Me(p,3);break;case 4:throw u=Ce(p),t.zb=null,u;case 3:if(t.ya&&t.ya==s){p.s(0);break}return t.ya=s,ve(p,8),T(p,ul(e,t,s),10);case 10:c=p.h,E=e.g.aa,E.K&&vh(E.K,c,0,i),Me(p,0);break;case 8:throw h=Ce(p),t.ya=null,h}})}function WI(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function XI(e,t,n){var i,r,s,o;return X(function(a){if(a.g==1){if(i=Array.from(e.i.values()),i.some(function(u){return u!=t&&u.dg}))return a.s(2);if(r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,e.g.disableStream(t.stream,r))return a.return();if(e.h.avoidEvictionOnQuotaExceededError)return xi(e,t,4),a.return();if(s=Math.round(100*e.C),20<s)e.C-=.2;else if(4<s)e.C-=.04;else return t.sd=!0,e.B=!0,e.g.onError(n),a.return();return t.dg=!0,o=e.g.Rc(),T(a,Rp(e,t,o),2)}xi(e,t,4),H(a)})}function YI(e,t,n,i){var r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$;return X(function(Q){switch(Q.g){case 1:if(r=jn,s=t.ya==null,o=[],a=Math.max(0,Math.max(n.appendWindowStart,e.W)-.1),u=Math.min(n.appendWindowEnd,e.T)+.01,c=n.codecs||t.stream.codecs,h=to(c),p=Wi(n.mimeType||t.stream.mimeType),E=n.timestampOffset,E==t.le&&a==t.Ac&&u==t.zc&&h==t.je&&p==t.ke){Q.s(2);break}if(A=t.je&&t.ke&&SI(e.g.aa,t.type,p,c),!A){Q.s(3);break}if(M=null,t.type===r.la?M=e.i.get(r.V):t.type===r.V&&(M=e.i.get(r.la)),!M){Q.s(3);break}return T(Q,ll(M).catch(function(){}),5);case 5:M.zb=null,M.Ac=null,M.zc=null,dd(e,M);case 3:return T(Q,Z0(e,t,E,a,u,n,h,p),2);case 2:return ed(n.Y,t.zb)||(t.zb=n.Y,n.l&&n.Y&&(R=ul(e,t,n.Y),C=function(){var re,W,q,ne,ie,me,le;return X(function(pe){switch(pe.g){case 1:return ve(pe,2),T(pe,R,4);case 4:return re=pe.h,dn(e.m),W=null,q=new Map,ne={projection:null,hfov:null},ie=new on,ie.box("moov",Mt).box("trak",Mt).box("mdia",Mt).R("mdhd",function(ge){W=$c(ge.reader,ge.version).timescale}).box("hdlr",function(ge){switch(ge=ge.reader,ge.skip(8),ge.Cc()){case"soun":q.set(r.V,W);break;case"vide":q.set(r.la,W)}W=null}).box("minf",Mt).box("stbl",Mt).R("stsd",Ms).box("encv",Yi).box("avc1",Yi).box("avc3",Yi).box("hev1",Yi).box("hvc1",Yi).box("dvav",Yi).box("dva1",Yi).box("dvh1",Yi).box("dvhe",Yi).box("dvc1",Yi).box("dvi1",Yi).box("vexu",Mt).box("proj",Mt).R("prji",function(ge){ge=ge.reader.Cc(),ne.projection=ge}).box("hfov",function(ge){ge=ge.reader.S()/1e3,ne.hfov=ge}).parse(re),t.type===r.la&&$I(e,ne),q.has(t.type)?n.Y.timescale=q.get(t.type):W!=null&&(n.Y.timescale=W),me=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,T(pe,e.g.Hg(t.type,re),5);case 5:return T(pe,rd(e.g.aa,t.type,re,null,t.stream,me,t.Fc,i),6);case 6:Me(pe,0);break;case 2:throw le=Ce(pe),t.zb=null,le}})},b=n.startTime,s&&(U=Wo(e.g.aa,t.type),U!=null&&(b=U)),e.g.hj(b,n.Y),o.push(C()))),$=t.ya?t.ya.i:-1,n.i!=$&&o.push(pI(e.g.aa,t.type,n.startTime)),T(Q,Promise.all(o),0)}})}function Z0(e,t,n,i,r,s,o,a){var u,c,h,p;return X(function(E){if(E.g==1)return u=jn,c=new Map,e.l.audio&&c.set(u.V,e.l.audio),e.l.video&&c.set(u.la,e.l.video),ve(E,2),t.Ac=i,t.zc=r,o&&(t.je=o),a&&(t.ke=a),t.le=n,h=e.j.sequenceMode||e.j.type=="HLS",T(E,hI(e.g.aa,t.type,n,i,r,h,s.mimeType||t.stream.mimeType,s.codecs||t.stream.codecs,c),4);if(E.g!=2)return Me(E,0);throw p=Ce(E),t.Ac=null,t.zc=null,t.je=null,t.ke=null,t.le=null,p})}function Cp(e,t,n,i,r,s,o,a){o=o===void 0?!1:o,a=a===void 0?!1:a;var u,c,h,p,E,A;return X(function(M){switch(M.g){case 1:return u=i.closedCaptions&&0<i.closedCaptions.size,e.h.shouldFixTimestampOffset&&(h=i.mimeType=="video/mp4"||i.mimeType=="audio/mp4",p=null,r.Y&&(p=r.Y.timescale),(E=h&&p&&i.type==="video"&&e.j.type=="DASH")&&(c=new on),E&&c.box("moof",Mt).box("traf",Mt).R("tfdt",function(R){var C,b,U,$,Q,re;return X(function(W){return C=Yc(R.reader,R.version),b=C.baseMediaDecodeTime,b?(U=-b/p,$=Number(t.le)||0,$<U?(Q=t.Ac,re=t.zc,T(W,Z0(e,t,U,Q,re,r),0)):W.s(0)):W.return()})}),E&&c.parse(s,!1,o)),T(M,Rp(e,t,n),2);case 2:return dn(e.m),A=t.Fc,t.Fc=!1,T(M,e.g.Hg(t.type,s),3);case 3:return T(M,rd(e.g.aa,t.type,s,r,i,u,A,a,o),4);case 4:dn(e.m),H(M)}})}function Rp(e,t,n){var i,r,s,o,a,u,c,h;return X(function(p){if(p.g==1)return i=t.stream.segmentIndex,i instanceof Mn&&i.Pa(e.j.presentationTimeline.pb()),r=Math.max(e.h.bufferBehind*e.C,e.j.presentationTimeline.h),s=fp(e.g.aa,t.type),s==null?(e.F==t&&(e.F=null),p.return()):(o=n-s,a=e.h.evictionGoal,u=e.j.presentationTimeline.Hb(),c=e.j.presentationTimeline.ob(),h=o-r,c-u>a&&(h=Math.max(o-r,u-a-s)),h<=a?p.return():T(p,e.g.aa.remove(t.type,s,s+h),2));if(p.g!=4)return dn(e.m),e.F?T(p,Rp(e,e.F,n),4):p.s(0);dn(e.m),H(p)})}function kp(e){return e&&e.type==Ot&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function ul(e,t,n,i){var r,s,o,a,u;return X(function(c){switch(c.g){case 1:if(r=n.Ib())return c.return(r);if(s=null,t.ba){var h=t.ba,p=h.h;n instanceof Li&&(p=h.j),p.has(n)?(h=p.get(n),i&&(h.rg=i),s=h.Gd):s=null}return s||(s=hd(n,t.stream,i||null,e.h.retryParameters,e.g.Xb)),o=0,t.ja&&(o=t.ja.h),t.rb=s,T(c,s.promise,2);case 2:if(a=c.h,t.rb=null,u=a.data,!n.aesKey){c.s(3);break}return T(c,xp(u,n.aesKey,o),4);case 4:u=c.h;case 3:return c.return(u)}})}function hd(e,t,n,i,r,s){s=s===void 0?!1:s;var o=e instanceof lt?e:void 0,a=o?1:0;return e=al(e.N(),e.Sa,e.xa,i,n),e.contentType=t.type,r.request(Or,e,{type:a,stream:t,segment:o,isPreload:s})}function bp(e,t,n,i){var r,s;return X(function(o){if(o.g==1)return t.lc=!1,t.Ue=!1,t.Yd=0,t.nc=!0,t.ya=null,t.ja=null,t.ba&&!e.o.has(t.stream)&&qr(t.ba),i?(r=e.g.Rc(),s=e.g.aa.getDuration(),T(o,e.g.aa.remove(t.type,r+i,s),3)):T(o,C0(e.g.aa,t.type),4);if(o.g!=3)return dn(e.m),n?T(o,e.g.aa.flush(t.type),3):o.s(3);dn(e.m),t.nc=!1,t.endOfStream=!1,t.Da||t.kb||xi(e,t,0),H(o)})}function xi(e,t,n){var i=t.type;(i!=Ot||e.i.has(i))&&(t.kb=new fe(function(){var r;return X(function(s){if(s.g==1)return ve(s,2),T(s,HI(e,t),4);if(s.g!=2)return Me(s,0);r=Ce(s),e.g&&e.g.onError(r),H(s)})}).da(n))}function Ka(e){e.kb!=null&&(e.kb.stop(),e.kb=null)}function ll(e){return X(function(t){return e.rb?T(t,e.rb.abort(),0):t.s(0)})}function Dp(e,t,n){var i;return X(function(r){if(r.g==1)return n.code==3024?(t.Da=!1,Ka(t),xi(e,t,0),r.return()):T(r,bv(e.P),2);if(dn(e.m),n.category===1&&n.code!=1003){if(t.fc)return Ip(e,!1),r.return();i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),H(r)})}function pd(e,t,n){t=t===void 0?!1:t,n=n===void 0?!0:n;var i,r,s,o,a,u;return X(function(c){if(c.g==1){if(i=Date.now()/1e3,r=e.h.minTimeBetweenRecoveries,!t){if(!e.h.allowMediaSourceRecoveries||i-e.L<r)return c.return(!1);e.L=i}return s=jn,(o=e.i.get(s.V))&&(o.zb=null,o.Ac=null,o.zc=null,n&&dd(e,o),ll(o).catch(function(){}),o.ja&&o.ja.fg()),(a=e.i.get(s.la))&&(a.zb=null,a.Ac=null,a.zc=null,n&&dd(e,a),ll(a).catch(function(){}),a.ja&&a.ja.fg()),u=new Map,e.l.audio&&u.set(s.V,e.l.audio),e.l.video&&u.set(s.la,e.l.video),T(c,k0(e.g.aa,u),2)}return!a||a.nc||a.Da||a.kb||xi(e,a,0),!o||o.nc||o.Da||o.kb||xi(e,o,0),c.return(!0)})}function $I(e,t){if(e.M.projection!=t.projection||e.M.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new qe("spatialvideoinfo",n)}else n=new qe("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.M=t}}function Lp(e){if(e.h.crossBoundaryStrategy!=="keep"){e.H.stop();var t=e.g.Rc(),n=e.i.get("video")||e.i.get("audio");n&&(n=n.zb)&&n.g!==null&&(t=n.g-t,0>t||1<t||(e.G=n.g+.01,e.H.da(t)))}}function QI(e,t,n){if(t.type===Ot)return!1;var i=t.zb;if(!i)return!1;n=n.Y;var r=i.g!==n.g;if(e.h.crossBoundaryStrategy==="reset_to_encrypted"&&(i.encrypted||n.encrypted||(r=!1),i.encrypted&&(e.h.crossBoundaryStrategy="keep")),e.h.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&i.encrypted==n.encrypted&&(r=!1),r&&t.Fc){var s=e.g.video,o=s.paused;pd(e,!0).then(function(){e.g.onEvent(new qe("boundarycrossed")),o||s.play()})}return r}function md(){}function Pp(e,t,n,i,r){var s=r in i,o=s?n.constructor==Object&&Object.keys(i).length==0:n.constructor==Object&&Object.keys(n).length==0,a=s||o,u=!0,c;for(c in t){var h=r+"."+c,p=s?i[r]:n[c];a||c in n?t[c]===void 0?p===void 0||a?delete e[c]:e[c]=Hr(p):o?e[c]=t[c]:p.constructor==Object&&t[c]&&t[c].constructor==Object?(e[c]||(e[c]=Hr(p)),h=Pp(e[c],t[c],p,i,h),u=u&&h):typeof t[c]!=typeof p||t[c]==null||typeof t[c]!="function"&&t[c].constructor!=p.constructor?($e("Invalid config, wrong type for "+h),u=!1):(typeof n[c]=="function"&&n[c].length!=t[c].length&&Ne("Unexpected number of arguments for "+h),e[c]=t[c]):($e("Invalid config, unrecognized key "+h),u=!1)}return u}function gd(e,t){for(var n={},i=n,r=0,s=0;r=e.indexOf(".",r),!(0>r);)(r==0||e[r-1]!="\\")&&(s=e.substring(s,r).replace(/\\\./g,"."),i[s]={},i=i[s],s=r+1),r+=1;return i[e.substring(s).replace(/\\\./g,".")]=t,n}function qa(e,t){return e&&t}function e_(e,t){function n(s){for(var o=v(Object.keys(s)),a=o.next();!a.done;a=o.next())if(a=a.value,!(s[a]instanceof HTMLElement))if(r(s[a])&&Object.keys(s[a]).length===0)delete s[a];else{var u=s[a];Array.isArray(u)&&u.length===0||typeof s[a]=="function"?delete s[a]:r(s[a])&&(n(s[a]),Object.keys(s[a]).length===0&&delete s[a])}}function i(s,o){return Object.keys(s).reduce(function(a,u){var c=s[u];return o.hasOwnProperty(u)?c instanceof HTMLElement&&o[u]instanceof HTMLElement?c.isEqualNode(o[u])||(a[u]=c):r(c)&&r(o[u])?(c=i(c,o[u]),(0<Object.keys(c).length||!r(c))&&(a[u]=c)):Array.isArray(c)&&Array.isArray(o[u])?wh(c,o[u])||(a[u]=c):Number.isNaN(c)&&Number.isNaN(o[u])||c!==o[u]&&(a[u]=c):a[u]=c,a},{})}function r(s){return s&&typeof s=="object"&&!Array.isArray(s)}return e=i(e,t),n(e),e}G("shaka.util.ConfigUtils",md),md.getDifferenceFromConfigObjects=e_,md.convertToConfigObject=gd,md.mergeConfigObjects=Pp;function Oi(){}function t_(e){return e=Rr(e),new An(e).nb}function cl(e,t,n){function i(a){y(s).setUint32(o,a.byteLength,!0),o+=4,s.set(x(a),o),o+=a.byteLength}if(!n||!n.byteLength)throw new g(2,6,6015);var r;typeof t=="string"?r=gs(t,!0):r=t,e=Rr(e),e=gs(e,!0);var s=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),s}function Op(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Rr(e).split("skd://").pop(),cl(e,n,t))}function yd(e,t){e===2&&(e=t.drmInfo)&&ee(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}G("shaka.drm.FairPlay",Oi),Oi.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&ee(e.keySystem)){try{var n=cn(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=zi(wi(n)))}},Oi.muxFairPlayRequest=function(e,t){yd(e,t)},Oi.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&ee(n.keySystem)&&yd(e,t)}},Oi.conaxFairPlayRequest=function(e,t){yd(e,t)},Oi.ezdrmFairPlayRequest=function(e,t){yd(e,t)},Oi.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&ee(e.keySystem)&&(e=x(t.body),e=mr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ki("spc="+e))},Oi.muxInitDataTransform=function(e,t,n){return Op(e,t,n)},Oi.expressplayInitDataTransform=function(e,t,n){return Op(e,t,n)},Oi.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Rr(e).split("skd://").pop().split("?").shift(),n=_.atob(n);var i=new ArrayBuffer(2*n.length);i=w(i);for(var r=0,s=n.length;r<s;r++)i[r]=n.charCodeAt(r);return cl(e,i,t)},Oi.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Rr(e).split(";").pop(),cl(e,n,t))},Oi.verimatrixInitDataTransform=function(e,t,n){return Op(e,t,n)},Oi.initDataTransform=cl,Oi.defaultGetContentId=t_,Oi.isFairPlaySupported=function(){var e;return X(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ve(t,2),T(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Ce(t),t.return(!1))})};function Np(){this.g=null}Np.prototype.configure=function(e){this.g=e},Np.prototype.create=function(e){var t;if(this.g.language){var n=JI(e,this.g.language);n.length&&(t=n)}return t||(t=e.filter(function(i){return i.primary}),t=t.length?t:e),e=ZI(t,this.g.role),e.length&&(t=e),this.g.videoLayout&&(e=rM(t,this.g.videoLayout),e.length&&(t=e)),this.g.Sc&&(e=iM(t,this.g.Sc),e.length&&(t=e)),this.g.channelCount&&(e=nM(t,this.g.channelCount),e.length&&(t=e)),this.g.Kc&&(e=eM(t,this.g.Kc),e.length&&(t=e)),this.g.fd&&(e=tM(t,this.g.fd),e.length&&(t=e)),e=sM(t,this.g.spatialAudio),e.length&&(t=e),this.g.audioCodec&&(e=oM(t,this.g.audioCodec),e.length&&(t=e)),new Wc(t[0],t,!(this.g.codecSwitchingStrategy=="smooth"&&Co()))};function JI(e,t){t=un(t);var n=Oc(t,e.map(function(i){return Fh(i)}));return n?e.filter(function(i){return n==Fh(i)}):[]}function ZI(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function eM(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function tM(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function nM(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,i){return n.audio||i.audio?n.audio?i.audio?(i.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function iM(e,t){if(t=="AUTO"){var n=e.some(function(i){return!!(i.video&&i.video.hdr&&i.video.hdr=="HLG")});t=hi(n)}return e.filter(function(i){return!(i.video&&i.video.hdr&&i.video.hdr!=t)})}function rM(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function sM(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function oM(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function vd(){}function Wa(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:zr(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(h,p,E){return _.shakaMediaKeysPolyfill==="apple"&&p=="skd"&&(p=E.serverCertificate,E=t_(h),h=cl(h,E,p)),h},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:nt(),minHdcpVersion:"",ignoreDuplicateInitData:!an("Tizen 2"),defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"};(nt()||It())&&t.preferredKeySystems.push("com.microsoft.playready"),Bt()&&!Ue()&&(t.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"});var n="reload",i=!1;!Co()||Je()||It()||Rt()||wt()&&xt()===79||Ze()&&!qt()&&!Tn()||Bt()&&Ue()||(n="smooth",i=!0),i={retryParameters:zr(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:_d,manifestPreprocessorTXml:Sd,sequenceMode:!1,multiTypeVariantsAllowed:i,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:Ti(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:_d,manifestPreprocessorTXml:Sd,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var r={retryParameters:zr(),failureCallback:function(h){return qa([h])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:It()||Rt(),dontChooseCodecs:!1,shouldFixTimestampOffset:wt()||Je(),avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep"};(wt()||Je()||Ze()||nn())&&(r.stallSkip=0),(navigator.userAgent.match(/Edge\//)||nt())&&(r.gapPadding=.01),Je()&&(r.gapPadding=2),Kt()&&(r.crossBoundaryStrategy="reset"),Xe()&&(r.crossBoundaryStrategy="reset_to_encrypted");var s={trackSelectionCallback:function(h){return X(function(p){return p.return(h)})},downloadSizeCallback:function(h){var p;return X(function(E){return E.g==1?navigator.storage&&navigator.storage.estimate?T(E,navigator.storage.estimate(),3):E.return(!0):(p=E.h,E.return(p.usage+h<.95*p.quota))})},progressCallback:function(h,p){return qa([h,p])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:At()?.5:0,preferNetworkInformationBandwidth:!1},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(h){return qa([h],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(h,p){return qa([h,p])},dispatchAllEmsgBoxes:!1};var o=!1,a=!1,u=!0;Gn()&&(a=o=!0,u=!1);var c={drm:t,manifest:i,streaming:r,mediaSource:n,offline:s,abrFactory:function(){return new xn},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Np,[null].concat(z(zt.apply(0,arguments)))))},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:o,skipPlayDetection:a,supportsMultipleMediaElements:u,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0},ignoreHardwareResolution:!1};return s.trackSelectionCallback=function(h){return X(function(p){return p.return(aM(h,c.preferredAudioLanguage,c.preferredVideoHdrLevel))})},c}function n_(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function oo(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Pp(e,t,n||Wa(),i,"")}function aM(e,t,n){var i=n;i=="AUTO"&&(n=e.some(function(a){return!!(a.hdr&&a.hdr=="HLG")}),i=hi(n));var r=e.filter(function(a){return!(a.type!="variant"||a.hdr&&a.hdr!=i)});n=[];var s=Oc(t,r.map(function(a){return a.language}));s&&(n=r.filter(function(a){return un(a.language)==s})),n.length==0&&(n=r.filter(function(a){return a.primary})),n.length==0&&(r.map(function(a){return a.language}),n=r);var o=n.filter(function(a){return a.height&&480>=a.height});for(o.length&&(o.sort(function(a,u){return u.height-a.height}),n=o.filter(function(a){return a.height==o[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(a,u){return a.bandwidth-u.bandwidth}),t.push(n[r])),e=v(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Ot&&n.type!="image"||t.push(n);return t}function _d(e){return qa([e],e)}function Sd(e){return qa([e],e)}G("shaka.util.PlayerConfiguration",vd),vd.mergeConfigObjects=oo,vd.createDefaultForLL=n_,vd.createDefault=Wa;function uM(){this.g=null,this.h=[]}function Up(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=v(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function lM(e){function t(s){return{timestamp:s.timestamp,state:s.state,duration:s.duration}}for(var n=[],i=v(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function cM(){this.i=this.h=null,this.g=[]}function Bp(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Td(){this.mc=this.dh=this.u=this.A=this.I=this.B=this.o=this.j=this.H=this.C=this.i=this.P=this.T=this.L=this.M=this.O=this.l=this.m=NaN,this.K=0,this.F=this.G=NaN,this.g=new uM,this.h=new cM}function yr(e,t,n,i){sn.call(this),this.O=e,this.Z=t,this.Fa=i.networkingEngine,this.B=n,this.o=null,this.za=0,this.Na=i.Lc,this.F=i.aj,this.Oa=i.bj,this.g=i.config,this.l=this.G=this.h=null,this.oa=!1,this.H=i.mj,this.sa=!1,this.i=null,this.ka=!1,this.j=this.C=null,this.ea=!1,this.M=new Map,this.Aa=!1,this.Ga=i.lj,this.$=new Td,this.na=new rn,this.m=new rn,this.P=null,this.u=!1,this.fa=i.Vh,this.W=this.K=null,this.Ma=i.Uh,this.T=!1,this.L=[],this.I=[],this.A=!0}He(yr,sn);function dl(e,t,n){(e=t?e.I:e.L)?e.push(n):n()}function dM(e){if(e.I)for(var t=v(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function i_(e,t){if(e.P=t,e.T=!0,e.L){t=v(e.L);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.L=null}d=yr.prototype,d.getStartTime=function(){return this.B},d.Qc=function(){return this.O},d.Jf=function(){return this.h};function fM(e){return e.ea=!0,e.j}function hM(e){return e.sa=!0,e.H}d.getStats=function(){return this.$};function pM(e){return e.ka=!0,e.i}d.Ci=function(){return this.K?Uo(this.K):null},d.Bi=function(){return this.W?Bo(this.W):null};function mM(e){return e.Aa=!0,e.M}d.start=function(){var e=this;(function(){var t;return X(function(n){switch(n.g){case 1:return T(n,Promise.resolve(),2);case 2:return ve(n,3),T(n,gM(e),5);case 5:if(Xo(e),_.shakaMediaKeysPolyfill==="webkit"){n.s(6);break}return T(n,r_(e),7);case 7:Xo(e);case 6:return T(n,yM(e),8);case 8:if(Xo(e),!e.fa||!e.i){n.s(9);break}return T(n,w2(e.i),10);case 10:Xo(e);case 9:e.m.resolve(),Me(n,0);break;case 3:t=Ce(n),t instanceof g&&(t.code==7001||t.code==7003)||e.m.reject(t),H(n)}})})()},d.dispatchEvent=function(e){return this.P?this.P.dispatchEvent(e):sn.prototype.dispatchEvent.call(this,e)},d.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new qe("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Xo(e){if(e.u)throw new g(2,7,7003)}function jp(e,t){e.dispatchEvent(new qe("onstatechange",new Map().set("state",t)))}function gM(e){var t,n,i,r,s,o,a,u,c;return X(function(h){switch(h.g){case 1:if(jp(e,"manifest-parser"),e.l||(e.G=l0(e.O,e.Z),e.l=e.G(),e.l.configure(e.g.manifest,function(){return e.A})),t=Date.now()/1e3,jp(e,"manifest"),e.h){h.s(2);break}return T(h,e.l.start(e.O,e.Oa),3);case 3:if(e.h=h.h,e.h.variants.length!=1){h.s(2);break}for(n=[],i=e.h.variants[0],r=v([i.video,i.audio]),s=r.next();!s.done;s=r.next())(o=s.value)&&!o.segmentIndex&&n.push(o.createSegmentIndex());if(!(0<n.length)){h.s(2);break}return T(h,Promise.all(n),2);case 2:return e.na.resolve(),a=new qe("manifestparsed",void 0),T(h,Promise.resolve(),7);case 7:if(e.dispatchEvent(a),e.h.variants.length==0)throw new g(2,4,4036);vM(e.h),u=Date.now()/1e3,c=u-t,e.$.H=c,H(h)}})}function r_(e,t){var n,i,r,s,o,a;return X(function(u){switch(u.g){case 1:if(!e.h||e.i)return u.return();if(jp(e,"drm-engine"),e.za=Date.now()/1e3,e.i=e.Na(),e.F.h=e.i,e.i.configure(e.g.drm,function(){return e.A}),n=s0(e.F,e.h),!n){u.s(2);break}return i=new qe("trackschanged",void 0),T(u,Promise.resolve(),3);case 3:Xo(e),e.dispatchEvent(i);case 2:return r=Uc(e.h.variants),s=!0,e.h&&e.h.presentationTimeline&&e.h.type!="HLS"&&(s=e.h.presentationTimeline.U()),T(u,Gv(e.i,r,e.h.offlineSessionIds,s),4);case 4:if(Xo(e),!t){u.s(5);break}return T(u,e.i.Lb(t),6);case 6:Xo(e);case 5:return T(u,r0(e.F,e.h),7);case 7:if(o=u.h,!o){u.s(0);break}return a=new qe("trackschanged",void 0),T(u,Promise.resolve(),9);case 9:e.dispatchEvent(a),H(u)}})}d.configure=function(e,t){e=gd(e,t),oo(this.g,e)},d.getConfiguration=function(){return Hr(this.g)};function yM(e){var t,n,i,r,s,o,a;return X(function(u){return e.o||(e.o=e.g.adaptationSetCriteriaFactory(),e.o.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,Sc:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Kc:e.g.preferredAudioLabel,fd:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:""})),e.Ma&&(t=e.g.abrFactory,e.C=t,e.j=t(),e.j.configure(e.g.abr)),!e.fa||(n=e.h.presentationTimeline.U(),i=Uc(e.h.variants),r=e.o.create(i),e.j.configure(e.g.abr),e.j.setVariants(Array.from(r.values())),s=e.j.chooseVariant(),!s)?u.s(0):(o=[],e.K=s,s.video&&o.push(Fp(e,s.video,n)),s.audio&&o.push(Fp(e,s.audio,n)),(a=Ca(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&Cv(s.audio,a,e.g)&&(o.push(Fp(e,a,n)),e.W=a),T(u,Promise.all(o),0))})}function Fp(e,t,n){var i,r,s,o,a;return X(function(u){return u.g==1?(i=e.g.streaming.segmentPrefetchLimit||2,r=new ld(i,t,function(c,h,p){return hd(c,h,p||null,e.g.streaming.retryParameters,e.Fa,e.A)},!1),e.M.set(t.id,r),t.segmentIndex?u.s(2):T(u,t.createSegmentIndex(),2)):(s=e.B||0,o=t.segmentIndex.Gb(s),a=null,o&&(a=o.current(),a||(a=o.next().value)),a||(a=Kr(t.segmentIndex)),a?n?a.Y?T(u,W0(r,a.Y),0):u.s(0):T(u,sl(r,a.startTime),0):u.s(0))})}d.Nj=function(){return this.m},d.destroy=function(){var e=this,t,n,i;return X(function(r){switch(r.g){case 1:if(e.u=!0,!e.l||e.oa){r.s(2);break}return T(r,e.l.stop(),2);case 2:if(!e.j||e.ea){r.s(4);break}return T(r,e.j.stop(),4);case 4:if(e.H&&!e.sa&&e.H.release(),!e.i||e.ka){r.s(6);break}return T(r,e.i.destroy(),6);case 6:if(0<e.M.size&&!e.Aa)for(t=v(e.M.values()),n=t.next();!n.done;n=t.next())i=n.value,qr(i);H(r)}})};function vM(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}G("shaka.media.PreloadManager",yr),yr.prototype.destroy=yr.prototype.destroy,yr.prototype.waitForFinish=yr.prototype.Nj,yr.prototype.getPrefetchedTextTrack=yr.prototype.Bi,yr.prototype.getPrefetchedVariantTrack=yr.prototype.Ci;function Yo(e,t){sn.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Jc:null,Ic:Xa,xc:function(i,r){return Ds(n,"enter",i,r)}},{Jc:fl,Ic:Xa,xc:function(i,r){return Ds(n,"enter",i,r)}},{Jc:hl,Ic:Xa,xc:function(i,r){return Ds(n,"enter",i,r)}},{Jc:Xa,Ic:fl,xc:function(i,r){return Ds(n,"exit",i,r)}},{Jc:Xa,Ic:hl,xc:function(i,r){return Ds(n,"exit",i,r)}},{Jc:fl,Ic:hl,xc:function(i,r){r?Ds(n,"skip",i,r):(Ds(n,"enter",i,r),Ds(n,"exit",i,r))}},{Jc:hl,Ic:fl,xc:function(i,r){return Ds(n,"skip",i,r)}}],this.h=new _t,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}He(Yo,sn),Yo.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,sn.prototype.release.call(this)},Yo.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=v(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),s=e<i.startTime?fl:e>i.endTime?hl:Xa;this.g.set(i,s);for(var o=v(this.m),a=o.next();!a.done;a=o.next())a=a.value,a.Jc==r&&a.Ic==s&&a.xc(i,t)}}};function Ds(e,t,n,i){t=new qe(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var fl=1,Xa=2,hl=3;function $o(e,t,n){var i,r,s,o,a,u,c;return X(function(h){switch(h.g){case 1:var p=new An(e).ab.split("/").pop().split(".");return i=p.length==1?"":p.pop().toLowerCase(),(r=_M.get(i))?h.return(r):(s=0,o=qn([e],n),ve(h,2),o.method="HEAD",T(h,t.request(s,o).promise,4));case 4:a=h.h,r=a.headers["content-type"],Me(h,3);break;case 2:if(u=Ce(h),!u||u.code!=1002&&u.code!=1001){h.s(3);break}return o.method="GET",T(h,t.request(s,o).promise,6);case 6:c=h.h,r=c.headers["content-type"];case 3:return h.return(r?r.toLowerCase().split(";").shift():"")}})}var _M=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function s_(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(o){return s_(o,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=wa,r=e.fontStyle==Aa,s=e.textDecoration.includes(Ts);return i&&n.push(["b"]),r&&n.push(["i"]),s&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=o_(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=o_(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(o,a){var u=v(a);return a=u.next().value,u=u.next().value,"<"+a+(u===void 0?"":u)+">"+o+"</"+a+">"},e.payload)}function o_(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Vp(e,t){var n=[];e=v(a_(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,z(Vp(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=s_(i,t),n.push(r)}return n}function a_(e){var t=[];e=v(e);for(var n=e.next(),i={};!n.done;i={lf:void 0},n=e.next())i.lf=n.value,t.some(function(r){return function(s){return bc(r.lf,s)}}(i))||t.push(i.lf);return t}function SM(e){function t(i){for(var r=5381,s=i.length;s;)r=33*r^i.charCodeAt(--s);return(r>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function ai(e,t){for(this.h=e,this.i=t,this.g=null,e=v(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}d=ai.prototype,d.configure=function(){},d.remove=function(e,t){return this.g?(l_(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},d.append=function(e){if(this.g){var t=Vp(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=v(t);for(var i=t.next(),r={};!i.done;r={Tc:void 0},i=t.next())r.Tc=i.value,!e.some(function(s){return function(o){return o.startTime==s.Tc.startTime&&o.endTime==s.Tc.endTime&&o.text==s.Tc.payload}}(r))&&r.Tc.payload&&(i=SM(r.Tc))&&n.push(i);for(e=n.slice().sort(function(s,o){return s.startTime!=o.startTime?s.startTime-o.startTime:s.endTime!=o.endTime?s.endTime-o.startTime:"line"in VTTCue.prototype?n.indexOf(o)-n.indexOf(s):n.indexOf(s)-n.indexOf(o)}),e=v(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)}},d.destroy=function(){return this.g&&(l_(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},d.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},d.setTextVisibility=function(e){e&&!this.g&&u_(this),this.g&&(this.g.mode=e?"showing":"hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){u_(this)};function u_(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function l_(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var i=v(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}G("shaka.text.SimpleTextDisplayer",ai),ai.prototype.enableTextDisplayer=ai.prototype.enableTextDisplayer,ai.prototype.setTextLanguage=ai.prototype.setTextLanguage,ai.prototype.setTextVisibility=ai.prototype.setTextVisibility,ai.prototype.isTextVisible=ai.prototype.isTextVisible,ai.prototype.destroy=ai.prototype.destroy,ai.prototype.append=ai.prototype.append,ai.prototype.remove=ai.prototype.remove,ai.prototype.configure=ai.prototype.configure;function ui(){}d=ui.prototype,d.configure=function(){},d.remove=function(){},d.append=function(){},d.destroy=function(){},d.isTextVisible=function(){return!1},d.setTextVisibility=function(){},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){},G("shaka.text.StubTextDisplayer",ui),ui.prototype.enableTextDisplayer=ui.prototype.enableTextDisplayer,ui.prototype.setTextLanguage=ui.prototype.setTextLanguage,ui.prototype.setTextVisibility=ui.prototype.setTextVisibility,ui.prototype.isTextVisible=ui.prototype.isTextVisible,ui.prototype.destroy=ui.prototype.destroy,ui.prototype.append=ui.prototype.append,ui.prototype.remove=ui.prototype.remove,ui.prototype.configure=ui.prototype.configure;function li(e,t){var n=this;document.fullscreenEnabled||Ne("Using UITextDisplayer in a browser without Fullscreen API support causes subtitles to not be rendered in fullscreen"),this.A=!1,this.h=[],this.j=e,this.C=t,this.u=this.m=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.C.appendChild(this.g),this.o=new se(function(){n.j.paused||ao(n)}),pl(this),this.l=new Map,this.i=new _t,this.i.D(document,"fullscreenchange",function(){ao(n,!0)}),this.i.D(this.j,"seeking",function(){ao(n,!0)}),this.i.D(this.j,"ratechange",function(){pl(n)}),this.i.D(this.j,"resize",function(){var i=n.j,r=i.videoWidth;i=i.videoHeight,r&&i?n.m=r/i:n.m=null}),this.B=null,"ResizeObserver"in _&&(this.B=new ResizeObserver(function(){ao(n,!0)}),this.B.observe(this.g)),this.F=new Map}d=li.prototype,d.configure=function(e){this.u=e,pl(this),ao(this,!0)},d.append=function(e){var t=[].concat(z(this.h));e=v(a_(e));for(var n=e.next(),i={};!n.done;i={mf:void 0},n=e.next())i.mf=n.value,t.some(function(r){return function(s){return bc(s,r.mf)}}(i))||this.h.push(i.mf);this.h.length&&pl(this),ao(this)},d.destroy=function(){return this.g&&(this.C.removeChild(this.g),this.g=null,this.A=!1,this.h=[],this.o&&(this.o.stop(),this.o=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.B&&(this.B.disconnect(),this.B=null)),Promise.resolve()},d.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),ao(this,n>this.h.length),this.h.length||pl(this),!0},d.isTextVisible=function(){return this.A},d.setTextVisibility=function(e){this.A=e,ao(this,!0)},d.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},d.enableTextDisplayer=function(){};function pl(e){e.o&&(e.h.length?e.o.ua((e.u?e.u.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.o.stop())}function TM(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function c_(e,t,n,i,r){var s=!1,o=[],a=[];t=v(t);for(var u=t.next();!u.done;u=t.next()){u=u.value,r.push(u);var c=e.l.get(u),h=u.startTime<=i&&u.endTime>i,p=c?c.Oh:null;c&&(o.push(c.nf),c.Ec&&o.push(c.Ec),h||(s=!0,e.l.delete(u),c=null)),h&&(a.push(u),c?TM(e,p)||(s=!0):(EM(e,u,r),c=e.l.get(u),p=c.Oh,s=!0)),0<u.nestedCues.length&&p&&c_(e,u.nestedCues,p,i,r),r.pop()}if(s){for(i=v(o),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(a.sort(function(E,A){return E.startTime!=A.startTime?E.startTime-A.startTime:E.endTime-A.endTime}),a=v(a),i=a.next();!i.done;i=a.next())i=e.l.get(i.value),i.Ec?(i.Ec.contains(n)&&i.Ec.removeChild(n),n.appendChild(i.Ec),i.Ec.appendChild(i.nf)):n.appendChild(i.nf)}}function ao(e,t){if(e.g){var n=e.j.currentTime;if(!e.A||t!==void 0&&t){t=v(e.F.values());for(var i=t.next();!i.done;i=t.next())so(i.value);so(e.g),e.l.clear(),e.F.clear()}e.A&&c_(e,e.h,e.g,n,[])}}function EM(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var s=document.createElement(r);if(r!="br"&&AM(e,s,t,n,i),n=null,t.region&&t.region.id){var o=t.region,a=e.m===4/3?2.5:1.9;if(n=o.id+"_"+o.width+"x"+o.height+(o.heightUnits==qi?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==qi?"%":"px"),e.F.has(n))n=e.F.get(n);else{r=document.createElement("span");var u=o.heightUnits==qi?"%":"px",c=o.widthUnits==qi?"%":"px",h=o.viewportAnchorUnits==qi?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var p=o.height,E=o.width;o.heightUnits===2&&(p=5.33*o.height,u="%"),o.widthUnits===2&&(E=o.width*a,c="%"),r.style.height=p+u,r.style.width=E+c,o.viewportAnchorUnits===2?(a=o.viewportAnchorY/75*100,u=o.viewportAnchorX/(e.m===4/3?160:210)*100,a-=o.regionAnchorY*p/100,u-=o.regionAnchorX*E/100,r.style.top=a+"%",r.style.left=u+"%"):(r.style.top=o.viewportAnchorY-o.regionAnchorY*p/100+h,r.style.left=o.viewportAnchorX-o.regionAnchorX*E/100+h),o.heightUnits!==0&&o.widthUnits!==0&&o.viewportAnchorUnits!==0&&(o=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=o+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.F.set(n,r),n=r}}r=s,i&&(r=document.createElement("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",s.appendChild(r)),e.l.set(t,{nf:s,Oh:r,Ec:n})}function wM(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Lc?n:e==="left"||e==="start"&&t===Bu||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Bu?"line-right":"center"}function AM(e,t,n,i,r){var s=t.style,o=n.nestedCues.length==0,a=1<i.length;s.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,function(h){return" ".repeat(h.length)});if(s.webkitTextStrokeColor=n.textStrokeColor,s.webkitTextStrokeWidth=n.textStrokeWidth,s.color=n.color,s.direction=n.direction,s.opacity=n.opacity,s.paddingLeft=Hp(n.linePadding,n,e.C),s.paddingRight=Hp(n.linePadding,n,e.C),s.textCombineUpright=n.textCombineUpright,s.textShadow=n.textShadow,n.backgroundImage)s.backgroundImage="url('"+n.backgroundImage+"')",s.backgroundRepeat="no-repeat",s.backgroundSize="contain",s.backgroundPosition="center",n.backgroundColor&&(s.backgroundColor=n.backgroundColor),s.width="100%",s.height="100%";else{if(n.nestedCues.length)var c=t;else c=document.createElement("span"),t.appendChild(c);n.border&&(c.style.border=n.border),r||((t=xM(i,function(h){return h.backgroundColor}))?c.style.backgroundColor=t:u&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(c.textContent=u)}a&&!i[i.length-1].isContainer?s.display="inline":(s.display="flex",s.flexDirection="column",s.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(s.width="100%",s.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(s.width="100%",s.alignItems="end"),s.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),o||(s.margin="0"),s.fontFamily=n.fontFamily,s.fontWeight=n.fontWeight.toString(),s.fontStyle=n.fontStyle,s.letterSpacing=n.letterSpacing,s.fontSize=Hp(n.fontSize,n,e.C,e.u?e.u.fontScaleFactor:1),i=n.line,i!=null&&(o=n.lineInterpretation,o==ju&&(o=1,a=16,e.m&&1>e.m&&(a=32),i=0>i?100+i/a*100:i/a*100),o==1&&(s.position="absolute",n.writingMode==Po?(s.width="100%",n.lineAlign==Oo?s.top=i+"%":n.lineAlign=="end"&&(s.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(s.height="100%",n.lineAlign==Oo?s.left=i+"%":n.lineAlign=="end"&&(s.right=100-i+"%")):(s.height="100%",n.lineAlign==Oo?s.right=i+"%":n.lineAlign=="end"&&(s.left=100-i+"%")))),s.lineHeight=n.lineHeight,e=wM(n),e=="line-left"?(s.cssFloat="left",n.position!==null&&(s.position="absolute",n.writingMode==Po?(s.left=n.position+"%",s.width="auto"):s.top=n.position+"%")):e=="line-right"?(s.cssFloat="right",n.position!==null&&(s.position="absolute",n.writingMode==Po?(s.right=100-n.position+"%",s.width="auto"):s.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(s.position="absolute",n.writingMode==Po?(s.left=n.position+"%",s.width="auto"):s.top=n.position+"%"),s.textAlign=n.textAlign,s.textDecoration=n.textDecoration.join(" "),s.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&s.writingMode==n.writingMode||(s.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Po?s.width=n.size+"%":s.height=n.size+"%")}function Hp(e,t,n,i){i=i===void 0?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function xM(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||i===0)return i}return null}G("shaka.text.UITextDisplayer",li),li.prototype.enableTextDisplayer=li.prototype.enableTextDisplayer,li.prototype.setTextLanguage=li.prototype.setTextLanguage,li.prototype.setTextVisibility=li.prototype.setTextVisibility,li.prototype.isTextVisible=li.prototype.isTextVisible,li.prototype.remove=li.prototype.remove,li.prototype.destroy=li.prototype.destroy,li.prototype.append=li.prototype.append,li.prototype.configure=li.prototype.configure;function IM(e,t){function n(s){for(var o=s,a=v(t),u=a.next();!u.done;u=a.next())u=u.value,u.end&&u.start<s&&(o+=u.end-u.start);return s=Math.floor(o/3600),a=Math.floor(o/60%60),u=Math.floor(o%60),o=Math.floor(1e3*o%1e3),(10>s?"0":"")+s+":"+(10>a?"0":"")+a+":"+(10>u?"0":"")+u+"."+(100>o?10>o?"00":"0":"")+o}var i=Vp(e);e=`WEBVTT

`,i=v(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+function(s){var o=[];switch(s.textAlign){case"left":o.push("align:left");break;case"right":o.push("align:right");break;case rs:o.push("align:middle");break;case"start":o.push("align:start");break;case"end":o.push("align:end")}switch(s.writingMode){case"vertical-lr":o.push("vertical:lr");break;case"vertical-rl":o.push("vertical:rl")}return o.length?" "+o.join(" "):""}(r)+`
`,e+=r.payload+`

`;return e}G("shaka.text.WebVttGenerator",function(){});function Gp(e,t){this.h=e,this.g=t,this.i=void 0,this.u=!1,this.F=!0,this.l=this.B=!1,this.o=this.m=void 0,this.A=0,this.G=!1,this.C=new _t,this.j=null}Gp.prototype.setMediaElement=function(e){this.j=e,bM(this)},Gp.prototype.configure=function(e){this.g=e};function MM(e){e.u=!1,e.F=!0,e.B=!1,e.l=!1,e.m=0,e.o=0,e.A=0,e.G=!1,e.j=null,e.C.Ra()}function CM(e,t){e.l=t,e.l?e.i==Md?e.i=Cd:e.i==Rd&&(e.i=kd):e.i==Cd?e.i=Md:e.i==kd&&(e.i=Rd)}function RM(e,t){if(e.g&&e.g.enabled&&e.g.version==h_&&e.j&&e.j.autoplay){var n=e.j.play();n&&n.then(function(){e.A=t}).catch(function(){e.A=0})}}function kM(e,t,n){try{if(!e.g.enabled)return t;var i=zp(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=wd;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=xd;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=f_;break e}r=void 0}i.ot=r,i.su=!0;var s=Ed(i);return Kp(t,s)}catch(o){return We("CMCD_SRC_ERROR","Could not generate src CMCD data.",o),t}}function bM(e){e.C.qa(e.j,"play",function(){e.m||(e.m=Date.now())}),e.C.qa(e.j,"playing",function(){e.o||(e.o=Date.now())})}function zp(e){return e.g.sessionId||(e.g.sessionId=_.crypto.randomUUID()),{v:e.g.version,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function Ya(e,t,n){n=n===void 0?{}:n;var i=i===void 0?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,zp(e)),n.pr=e.h.gb();var r=n.ot===Ad||n.ot===xd;if(e.B&&r&&(n.bs=!0,n.su=!0,e.B=!1),n.su==null&&(n.su=e.F),n.v===h_&&(e.h.U()&&(n.ltc=e.h.ce()),r=!e.G&&e.o&&e.m?e.o-(e.A||e.m):void 0,r!=null&&(n.msd=r,e.G=!0)),e=DM(e,n),i)i=NM(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var s=Ed(e);s&&(t.uris=t.uris.map(function(o){return Kp(o,s)}))}}}function DM(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(i,r){return n.includes(r)&&(i[r]=t[r]),i},{}):t}function LM(e){if(e.type===0)return UM;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?xd:Ad;if(t=="audio")return wd;if(t=="text")return e.mimeType==="application/mp4"?Id:qp}}function PM(e,t){if(t=e.h.Fb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}function d_(e,t){if(t=e.h.Fb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):0}function OM(e,t){var n=e.h.Rb();if(!n.length)return NaN;e=n[0],n=v(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Ad:return e.videoBandwidth||NaN;case wd:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Ed(e){function t(p){return 100*n(p/100)}function n(p){return Math.round(p)}function i(p){return!Number.isNaN(p)&&p!=null&&p!==""&&p!==!1}var r=[],s={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(p){return encodeURIComponent(p)},rtp:t,tb:n},o=Object.keys(e||{}).sort();o=v(o);for(var a=o.next();!a.done;a=o.next()){a=a.value;var u=e[a];if(i(u)&&(a!=="v"||u!==1)&&(a!="pr"||u!==1)){var c=s[a];c&&(u=c(u)),c=typeof u;var h=void 0;h=c==="string"&&a!=="ot"&&a!=="sf"&&a!=="st"?a+"="+JSON.stringify(u):c==="boolean"?a:c==="symbol"?a+"="+u.description:a+"="+u,r.push(h)}}return r.join(",")}function NM(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3};t=v(t);for(var o=t.next();!o.done;o=t.next())o=o.value,r[s[o]!=null?s[o]:1][o]=e[o];for(e=0;e<r.length;e++)(s=Ed(r[e]))&&(n["CMCD-"+i[e]]=s);return n}function Kp(e,t){return!t||e.includes("offline:")?e:(e=new An(e),e.g.set("CMCD",t),e.toString())}var f_="m",wd="a",Ad="v",xd="av",UM="i",qp="c",Id="tt",h_=2,Md="d",Cd="ld",Rd="h",kd="lh";G("shaka.util.CmcdManager.StreamingFormat",{DASH:Md,jk:Cd,HLS:Rd,kk:kd,yk:"s",OTHER:"o"});function vr(e){this.h=e,this.g=null}d=vr.prototype,d.configure=function(e){this.h=e},d.Vg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(g_)?1e3*this.g.get(g_):null},d.Tg=function(){return this.h.enabled&&this.g&&this.g.has(m_)?1e3*this.g.get(m_):null},d.Ei=function(){return this.h.enabled&&this.g&&this.g.has(y_)?this.g.get(y_):null},d.Fi=function(){return this.h.enabled&&this.g&&this.g.has(v_)?this.g.get(v_):null},d.getBandwidthEstimate=function(e){var t=this.Tg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function p_(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}G("shaka.util.CmsdManager",vr),vr.prototype.getBandwidthEstimate=vr.prototype.getBandwidthEstimate,vr.prototype.getRoundTripTime=vr.prototype.Fi,vr.prototype.getResponseDelay=vr.prototype.Ei,vr.prototype.getEstimatedThroughput=vr.prototype.Tg,vr.prototype.getMaxBitrate=vr.prototype.Vg;var m_="etp",g_="mb",y_="rd",v_="rtt";function __(){this.g=null,this.h=[]}function Wp(e,t){return X(function(n){if(n.g==1)return e.g?T(n,new Promise(function(i){return e.h.push(i)}),2):n.s(2);e.g=t,H(n)})}__.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function Re(e,t,n){t=t===void 0?null:t,sn.call(this);var i=this;this.m=Nd,this.h=null,this.He=t,this.na=!1,this.We=new _t,this.zd=new _t,this.l=new _t,this.Oa=new _t,this.Sb=new _t,this.G=this.I=this.C=this.F=null,this.Pd=0,this.$=new __,this.Z=this.Pb=this.T=this.i=this.Qb=this.H=this.j=this.xd=this.O=this.Ag=this.fa=this.L=this.Ga=this.Aa=this.yd=this.M=this.oa=this.K=this.Ma=null,this.sa=!1,this.Fa=this.o=null,this.Ae=1e9,this.Ve=[],this.Jd=[],this.Ye=-1,this.g=Ls(this),this.Ze=n_(),this.P=null,this.Qd=-1,this.Na=null,this.ka={width:1/0,height:1/0},this.xe=new Zh(this.g,this.ka,null),this.Re=[],this.A=null,this.W=this.g.adaptationSetCriteriaFactory(),this.W.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:this.g.preferredAudioChannelCount,Sc:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Kc:this.g.preferredAudioLabel,fd:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),this.Tb=this.g.preferredTextLanguage,this.Hd=this.g.preferredTextRole,this.Fd=this.g.preferForcedSubs,this.Cd=[],n&&n(this),this.L=JM(this),this.fa=new vr(this.g.cmsd),this.F=C_(this),this.F.mg(this.g.streaming.forceHTTP),this.F.ng(this.g.streaming.forceHTTPS),this.F.o=this.g.streaming.minBytesForProgressEvents,this.Ub=this.ea=this.B=null,this.af=!1,this.$e=new se(function(){return X(function(r){if(r.g==1)return i.ea?T(r,i.Lb(i.Ub,!0),3):r.s(0);if(r.g!=4)return T(r,i.load(i.ea),4);i.af?i.Ub.pause():i.Ub.play(),i.ea=null,i.af=!1,H(r)})}),Ud&&(this.B=Ud(),this.B.configure(this.g.ads),this.Sb.D(this.B,"ad-content-pause-requested",function(r){var s;return X(function(o){if(o.g==1)return i.$e.stop(),i.ea?o.s(0):(i.Ub=i.h,i.af=i.Uc(),s=r.saveLivePosition||!1,T(o,i.Ng(!0,s),3));i.ea=o.h,H(o)})}),this.Sb.D(this.B,"ad-content-resume-requested",function(r){if(r=r.offset||0,i.ea){var s=i.ea;s.B&&r&&(s.B+=r)}i.$e.da(.1)}),this.Sb.D(this.B,"ad-content-attach-requested",function(){return X(function(r){return i.h||!i.Ub?r.s(0):T(r,i.Lb(i.Ub,!0),0)})})),this.We.D(_,"online",function(){Zp(i),i.gg()}),this.Je=new se(function(){for(var r=Date.now()/1e3,s=!1,o=!0,a=v(i.i.variants),u=a.next();!u.done;u=a.next())u=u.value,0<u.disabledUntilTime&&u.disabledUntilTime<=r&&(u.disabledUntilTime=0,s=!0),0<u.disabledUntilTime&&(o=!1);o&&i.Je.stop(),s&&Qa(i,!1,void 0,!1,!1)}),this.za=null,e&&(Vt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Lb(e,!0)),this.u=null}He(Re,sn);function bd(e){e.O!=null&&(Wy(e.O),e.O.release(),e.O=null)}function BM(e,t,n){n||t.lcevc.enabled?(bd(e),e.O==null&&(e.O=new ku(e.h,e.Ag,t.lcevc,n),e.I&&(e.I.K=e.O))):bd(e)}function pn(e,t){return new qe(e,t)}d=Re.prototype,d.destroy=function(){var e=this,t;return X(function(n){switch(n.g){case 1:return e.m==Nr?n.return():(bd(e),t=e.detach(),e.m=Nr,T(n,t,2));case 2:return T(n,e.rf(),3);case 3:if(e.We&&(e.We.release(),e.We=null),e.zd&&(e.zd.release(),e.zd=null),e.l&&(e.l.release(),e.l=null),e.Oa&&(e.Oa.release(),e.Oa=null),e.Sb&&(e.Sb.release(),e.Sb=null),e.Fa=null,e.g=null,e.A=null,e.He=null,e.L=null,e.fa=null,!e.F){n.s(4);break}return T(n,e.F.destroy(),5);case 5:e.F=null;case 4:e.o&&(e.o.release(),e.o=null),sn.prototype.release.call(e),H(n)}})};function S_(e,t){$_.set(e,t)}function $a(e,t){e.dispatchEvent(pn("onstatechange",new Map().set("state",t)))}d.Lb=function(e,t){t=t===void 0?!0:t;var n=this,i,r,s;return X(function(o){switch(o.g){case 1:if(n.m==Nr)throw new g(2,7,7e3);if(i=n.h&&n.h==e,!n.h||n.h==e){o.s(2);break}return T(o,n.detach(),2);case 2:return T(o,Xp(n,"attach"),4);case 4:if(o.h)return o.return();if(ve(o,5,6),i||($a(n,"attach"),r=function(){var a=em(n,!1);a&&Ja(n,a)},n.zd.D(e,"error",r),n.h=e,n.L&&n.L.setMediaElement(e)),!t||!be()||n.I){o.s(6);break}return T(o,Yp(n),6);case 6:tt(o),n.$.release(),ct(o,0);break;case 5:return s=Ce(o),T(o,n.detach(),10);case 10:throw s}})},d.Wh=function(e){this.Ag=e},d.detach=function(e){e=e===void 0?!1:e;var t=this;return X(function(n){if(n.g==1){if(t.m==Nr)throw new g(2,7,7e3);return T(n,t.kc(!1,e),2)}if(n.g!=3)return T(n,Xp(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.zd.Ra(),t.h=null),$a(t,"detach"),t.B&&!e&&t.B.release()}finally{t.$.release()}H(n)})};function Xp(e,t){var n;return X(function(i){return i.g==1?(n=++e.Pd,T(i,Wp(e.$,t),2)):n!=e.Pd?(e.$.release(),i.return(!0)):i.return(!1)})}d.kc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,s,o,a,u,c,h,p,E;return X(function(A){switch(A.g){case 1:return n.m!=Nr&&(n.m=Nd),T(A,Xp(n,"unload"),2);case 2:return A.h?A.return():(Ye(A,3),n.sa=!1,$a(n,"unload"),bd(n),i=n.Cd.map(function(M){return M()}),n.Cd=[],T(A,Promise.all(i),5));case 5:if(n.dispatchEvent(pn("unloading")),n.yd&&(n.yd.release(),n.yd=null),n.Aa&&(n.Aa.release(),n.Aa=null),n.Ga&&(n.Ga.release(),n.Ga=null),n.h&&(n.l.Ra(),n.Oa.Ra()),n.Je.stop(),n.Ma&&(n.Ma.release(),n.Ma=null),n.oa&&(n.oa.stop(),n.oa=null),!n.H){A.s(6);break}return T(A,n.H.stop(),7);case 7:n.H=null,n.Qb=null;case 6:if(!n.o){A.s(8);break}return T(A,n.o.stop(),8);case 8:if(!n.j){A.s(10);break}return T(A,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),_.shakaMediaKeysPolyfill!=="webkit"||!n.C){A.s(12);break}return T(A,n.C.destroy(),13);case 13:n.C=null;case 12:if(!n.I){A.s(14);break}return T(A,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.B&&!t&&n.B.onAssetUnload(),n.ea&&!t&&(n.ea.destroy(),n.ea=null),t||n.$e.stop(),n.L&&MM(n.L),n.fa&&(n.fa.g=null),!n.u){A.s(16);break}return T(A,n.u.destroy(),17);case 17:n.u=null;case 16:if(n.h&&(so(n.h),n.h.src&&(n.h.removeAttribute("src"),n.h.load())),!n.C){A.s(18);break}return T(A,n.C.destroy(),19);case 19:n.C=null;case 18:if(n.za&&n.T!=n.za.Qc()&&(n.za.u||n.za.destroy(),n.za=null),n.T=null,n.Pb=null,n.M=null,n.i){for(r=v(n.i.variants),s=r.next();!s.done;s=r.next())for(o=s.value,a=v([o.audio,o.video]),u=a.next();!u.done;u=a.next())(c=u.value)&&c.segmentIndex&&c.segmentIndex.release();for(h=v(n.i.textStreams),p=h.next();!p.done;p=h.next())E=p.value,E.segmentIndex&&E.segmentIndex.release()}n.g&&n.g.streaming.clearDecodingCache&&(Bc.clear(),he.clear()),n.i=null,n.A=new Td,n.Xe=null,n.Na=null,n.P=null,n.Qd=-1,n.Ve=[],n.Jd=[],n.Ye=-1,n.F&&n.F.Jg(),Ld(n);case 3:tt(A),n.$.release(),ct(A,4);break;case 4:if(e&&be()&&!n.I&&n.h)return T(A,Yp(n),0);A.s(0)}})},d.Mj=function(e){this.Z=e},d.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,s,o,a,u,c,h,p,E,A,M,R,C;return X(function(b){switch(b.g){case 1:if(i.m==Nr)throw new g(2,7,7e3);if(r=null,s="",e instanceof yr){if(e.u)throw new g(2,7,7006);r=e,s=r.Qc()||""}else s=e||"";return T(b,Wp(i.$,"load"),2);case 2:if(i.$.release(),!i.h)throw new g(2,7,7002);if(!i.T){b.s(3);break}return i.T=s,T(b,i.kc(!1),3);case 3:if(o=++i.Pd,a=function(){return X(function(U){if(U.g==1)return i.Pd==o?U.s(0):r?T(U,r.destroy(),3):U.s(3);throw new g(2,7,7e3)})},u=function(U,$){return X(function(Q){switch(Q.g){case 1:return Ye(Q,2),T(Q,Wp(i.$,$),4);case 4:return T(Q,a(),5);case 5:return T(Q,U(),6);case 6:return T(Q,a(),7);case 7:r&&i.g&&(r.g=i.g);case 2:tt(Q),i.$.release(),ct(Q,0)}})},ve(b,5,6),t==null&&r&&(t=r.getStartTime()),i.Z=t,i.sa=!1,i.dispatchEvent(pn("loading")),r){n=r.Z,b.s(8);break}if(n){b.s(8);break}return T(b,u(function(){return X(function(U){if(U.g==1)return T(U,A_(i,s),2);n=U.h,H(U)})},"guessMimeType_"),8);case 8:if(c=!!r,r){i_(r,i),i.A=r.getStats(),b.s(11);break}return T(b,E_(i,s,t,n,!0),12);case 12:(r=b.h)?(r.A=!1,i_(r,i),i.A=r.getStats(),r.start(),r.m.catch(function(){})):i.A=new Td;case 11:return h=!r,p=Date.now()/1e3,i.A=r?r.getStats():new Td,i.T=s,i.Pb=n||null,Ld(i),i.Aa=new rl(function(){return i.Ja()}),h?T(b,u(function(){return X(function(U){return T(U,HM(i,n),0)})},"initializeSrcEqualsDrmInner_"),23):(i.Ga=new rl(function(){return i.Ja()}),T(b,u(function(){return X(function(U){if(U.g==1)return T(U,Promise.race([r.na,r.m]),2);i.Qb=r.G;var $=r;$.oa=!0,i.H=$.l,i.i=r.Jf(),H(U)})},"waitForFinish"),15));case 15:if(i.I){b.s(16);break}return T(b,u(function(){return X(function(U){return T(U,Yp(i),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return i.i&&i.i.textStreams.length&&(i.u.enableTextDisplayer?i.u.enableTextDisplayer():Vt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),T(b,u(function(){return X(function(U){return T(U,r.m,0)})},"waitForFinish"),18);case 18:if(i.g=r.getConfiguration(),i.xe=r.F,i.H&&i.H.setMediaElement&&i.h&&i.H.setMediaElement(i.h),i.yd=hM(r),i.xd=r.Ga,(E=r.o)&&(i.W=E),c&&i.h&&i.h.nodeName==="AUDIO"&&(jM(i),i.configure("manifest.disableVideo",!0)),r.i){b.s(19);break}return T(b,u(function(){return X(function(U){return T(U,r_(r,i.h),0)})},"drmEngine_.init"),19);case 19:return i.C=pM(r),T(b,u(function(){return X(function(U){return T(U,i.C.Lb(i.h),0)})},"drmEngine_.attach"),21);case 21:return!(A=r.C)||i.Fa&&i.Fa==A||(i.o=fM(r),i.Fa=r.C,typeof i.o.setMediaElement!="function"&&(Vt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.o.setMediaElement=function(){}),typeof i.o.setCmsdManager!="function"&&(Vt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.o.setCmsdManager=function(){}),typeof i.o.trySuggestStreams!="function"&&(Vt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.o.trySuggestStreams=function(){})),M=mM(r),R=r.K,T(b,u(function(){return X(function(U){return T(U,VM(i,p,R,M),0)})},"loadInner_"),22);case 22:dM(r),i.Pb&&At()&&Uh(i.Pb)&&sI(i.I,i.T,i.Pb),b.s(14);break;case 23:return T(b,u(function(){return X(function(U){return T(U,GM(i,p,n),0)})},"srcEqualsInner_"),14);case 14:i.dispatchEvent(pn("loaded"));case 6:if(tt(b),!r){b.s(25);break}return T(b,r.destroy(),25);case 25:i.za=null,ct(b,0);break;case 5:if(C=Ce(b),!C||C.code==7e3){b.s(27);break}return T(b,i.kc(!1),27);case 27:throw C}})};function jM(e){for(var t=v(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}d.Ij=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i;return X(function(r){return r.g==1?T(r,T_(n),2):r.g!=3?(i=r.h,T(r,n.kc(e,t),3)):r.return(i)})},d.Ng=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,i;return X(function(r){return r.g==1?T(r,T_(n,t),2):r.g!=3?(i=r.h,T(r,n.detach(e),3)):r.return(i)})};function T_(e,t){t=t===void 0?!1:t;var n,i;return X(function(r){if(r.g==1)return n=null,e.i&&e.H&&e.Qb&&e.T?(i=e.h.currentTime,e.U()&&!t&&(i=null),T(r,w_(e,e.T,i,e.Pb,!0,!1,!1),3)):r.s(2);if(r.g!=2){n=r.h,e.Re.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var s=n,o=e.H,a=e.Qb;s.h=e.i,s.l=o,s.G=a,s=n,o=e.Fa,s.j=e.o,s.C=o,n.o=e.W,n.start(),e.i=null,e.H=null,e.Qb=null,e.o=null,e.Fa=null}return r.return(n)})}d.preload=function(e,t,n){t=t===void 0?null:t;var i=this,r;return X(function(s){return s.g==1?T(s,E_(i,e,t,n),2):((r=s.h)?r.start():Ja(i,new g(2,7,7005)),s.return(r))})},d.rf=function(){var e=this,t,n,i,r;return X(function(s){for(t=[],n=v(e.Re),i=n.next();!i.done;i=n.next())r=i.value,r.u||t.push(r.destroy());return e.Re=[],T(s,Promise.all(t),0)})};function E_(e,t,n,i,r){r=r===void 0?!1:r;var s,o,a;return X(function(u){return u.g==1?i?u.s(2):T(u,A_(e,t),3):(u.g!=2&&(i=u.h),FM(e,i)?u.return(null):(s=!1,o=!0,r&&(e.o&&e.Fa==e.g.abrFactory&&(o=!1),e.h&&e.h.nodeName==="AUDIO"&&(s=!0)),a=w_(e,t,n,i||null,!r,s,o),a=r?a.then(function(c){return c.A=!1,c}):a.then(function(c){return e.Re.push(c),c}),u.return(a)))})}function w_(e,t,n,i,r,s,o){r=r===void 0?!0:r,s=s===void 0?!1:s,o=o===void 0?!0:o;var a,u,c,h,p,E,A,M,R,C,b,U,$,Q;return X(function(re){return re.g==1?(a=null,u=Hr(e.g),s&&(u.manifest.disableVideo=!0),c=function(){return a.T&&a.u?null:a},h=function(){return c()?c().getConfiguration():e.g},e.ka.width!=1/0||e.ka.height!=1/0||e.g.ignoreHardwareResolution?re.s(2):T(re,ii(),3)):(re.g!=2&&(p=re.h,e.ka.width=p.width,e.ka.height=p.height),E=new Zh(u,e.ka,null),A={networkingEngine:e.F,filter:function(W){var q,ne;return X(function(ie){if(ie.g==1)return T(ie,r0(E,W),2);if(ie.g!=4)return q=ie.h,q?(ne=pn("trackschanged"),T(ie,Promise.resolve(),4)):ie.s(0);a.dispatchEvent(ne),H(ie)})},makeTextStreamsForClosedCaptions:function(W){return nC(e,W)},onTimelineRegionAdded:function(W){Sp(a.H,W)},onEvent:function(W){return a.dispatchEvent(W)},onError:function(W){return a.onError(W)},isLowLatencyMode:function(){return h().streaming.lowLatencyMode},updateDuration:function(){e.j&&a.T&&e.j.updateDuration()},newDrmInfo:function(W){var q=a.i,ne=q?q.h:null;ne&&q.A&&a0(E,ne.keySystem,W)},onManifestUpdated:function(){var W=new Map().set("isLive",e.U());a.dispatchEvent(pn("manifestupdated",W)),dl(a,!1,function(){e.B&&e.B.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(W,q,ne,ie){var me=W;W=="com.apple.hls.interstitial"&&(me="com.apple.quicktime.HLS",W={startTime:q,endTime:ne,values:ie},e.B)&&e.B.onHLSInterstitialMetadata(e,e.h,W),ie=v(ie),W=ie.next();for(var le={};!W.done;le={ag:void 0},W=ie.next())le.ag=W.value,le.ag.name!="ID"&&dl(a,!1,function(pe){return function(){$p(e,q,ne,me,pe.ag)}}(le))},disableStream:function(W){return e.disableStream(W,e.g.streaming.maxDisabledTime)},addFont:function(W,q){return e.addFont(W,q)}},M=new rl(function(){return e.Ja()}),M.addEventListener("regionadd",function(W){var q=W.region;vl(e,"timelineregionadded",q,a),dl(a,!1,function(){e.B&&(e.B.onDashTimedMetadata(q),e.B.onDASHInterstitialMetadata(e,e.h,q))})}),R=null,u.streaming.observeQualityChanges&&(R=new ad(function(){return e.Fb()}),R.addEventListener("qualitychange",function(W){q_(e,W.quality,W.position)}),R.addEventListener("audiotrackchange",function(W){q_(e,W.quality,W.position,!0)})),C=!0,b={Xb:e.F,onError:function(W){return a.onError(W)},te:function(W){dl(a,!0,function(){e:{var q=W,ne=pn("keystatuschanged");e.dispatchEvent(ne);var ie=Object.keys(q);ie.length==1&&ie[0]==""&&(ie=["00"],q={"00":q[""]}),ne=ie.length==1&&ie[0]=="00";var me=!1;if(ie.length){ie=e.keySystem();for(var le=Vo(e.g.drm.clearKeys),pe=v(e.i.variants),ge=pe.next();!ge.done;ge=pe.next()){ge=ge.value;var _e=[];ge.audio&&_e.push(ge.audio),ge.video&&_e.push(ge.video),_e=v(_e);for(var Ie=_e.next();!Ie.done;Ie=_e.next()){var Ee=Ie.value;if(Ie=ge.allowedByKeySystem,Ee.keyIds.size)if(Ee.drmInfos.length&&!le.size){Ee=v(Ee.drmInfos);for(var De=Ee.next();!De.done;De=Ee.next())if(De=De.value,De.keyIds.size&&De.keySystem==ie){ge.allowedByKeySystem=!0,De=v(De.keyIds);for(var Ge=De.next();!Ge.done;Ge=De.next())Ge=Ge.value,((Ge=q[ne?"00":Ge])||e.C.F)&&(ge.allowedByKeySystem=ge.allowedByKeySystem&&!!Ge&&!ep.includes(Ge))}}else for(ge.allowedByKeySystem=!0,Ee=v(Ee.keyIds),De=Ee.next();!De.done;De=Ee.next())De=De.value,((De=q[ne?"00":De])||e.C.F)&&(ge.allowedByKeySystem=ge.allowedByKeySystem&&!!De&&!ep.includes(De));Ie!=ge.allowedByKeySystem&&(me=!0)}}}if(me&&(Ni(e),!Qo(e)))break e;(q=e.j.l)&&!q.allowedByKeySystem&&Qa(e)}})},onExpirationUpdated:function(W,q){var ne=pn("expirationupdated");a.dispatchEvent(ne),(ne=a.l)&&ne.onExpirationUpdated&&ne.onExpirationUpdated(W,q)},onEvent:function(W){a.dispatchEvent(W),W.type=="drmsessionupdate"&&C&&(C=!1,W=Date.now()/1e3-a.za,(e.A||a.getStats()).j=W,e.O&&Wy(e.O))}},U=C_(e,c),Ov(e.F,U),$=function(){return e.Lc(b)},Q={config:u,bj:A,mj:M,lj:R,Lc:$,aj:E,networkingEngine:U,Vh:r,Uh:o},a=new yr(t,i,n,Q),re.return(a))})}function A_(e,t){var n,i;return X(function(r){return r.g==1?(n=e.g.manifest.retryParameters,T(r,$o(t,e.F,n),2)):(i=r.h,i=="application/x-mpegurl"&&At()&&(i="application/vnd.apple.mpegurl"),r.return(i))})}function FM(e,t){if(!be())return!0;if(t){if((e.h||bi()).canPlayType(t)=="")return!1;if(!be()||!Pa.has(t))return!0;if(Uh(t))return At()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function x_(e){var t=e.g.textDisplayFactory;t!==e.Xe&&(e.u=t(),e.u.configure?e.u.configure(e.g.textDisplayer):Vt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.Xe=t,e.u.setTextVisibility(e.na))}function Yp(e){var t,n,i;return X(function(r){if(r.g==1)return $a(e,"media-source"),e.h.removeAttribute("src"),so(e.h),x_(e),t=QM(e.h,e.u,{ui:function(){return e.keySystem()},onMetadata:function(s,o,a){s=v(s);for(var u=s.next();!u.done;u=s.next())if(u=u.value,u.data&&typeof u.cueTime=="number"&&u.frames){var c=u.cueTime+o,h=a;h&&c>h&&(h=c);for(var p=v(u.frames),E=p.next();!E.done;E=p.next())$p(e,c,h,"org.id3",E.value);e.B&&e.B.onHlsTimedMetadata(u,c)}},gj:function(s){e.Ga&&Sp(e.Ga,{schemeIdUri:s.schemeIdUri,startTime:s.startTime,endTime:s.endTime,id:String(s.id),emsg:s})},onEvent:function(s){return e.dispatchEvent(s)},ij:function(){e.H&&e.H.update&&e.H.update()}},e.O),t.configure(e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Ea=i,T(r,t.H,2);e.I=t,H(r)})}function I_(e,t,n){function i(){return Jp(e)}e.l.D(t,"playing",i),e.l.D(t,"pause",i),e.l.D(t,"ended",i),e.l.D(t,"ratechange",function(){var r=e.h.playbackRate;r!=0&&(e.K&&(e.K.set(r),e.m==mi&&e.o.playbackRateChanged(r),B_(e,r)),r=pn("ratechange"),e.dispatchEvent(r))}),t.remote&&(e.l.D(t.remote,"connect",function(){return Ni(e)}),e.l.D(t.remote,"connecting",function(){return Ni(e)}),e.l.D(t.remote,"disconnect",function(){return X(function(r){if(r.g==1)return e.j&&t.remote.state=="disconnected"?T(r,pd(e.j),2):r.s(2);Ni(e),H(r)})})),t.audioTracks&&(e.l.D(t.audioTracks,"addtrack",function(){return Ni(e)}),e.l.D(t.audioTracks,"removetrack",function(){return Ni(e)}),e.l.D(t.audioTracks,"change",function(){return Ni(e)})),t.textTracks&&(e.l.D(t.textTracks,"addtrack",function(r){if(r.track)switch(r=r.track,r.kind){case"metadata":qM(e,r);break;case"chapters":WM(e,r);break;default:Ni(e)}}),e.l.D(t.textTracks,"removetrack",function(){return Ni(e)}),e.l.D(t.textTracks,"change",function(){return Ni(e)}),e.g.streaming.crossBoundaryStrategy!=="keep"&&(e.l.D(t,"waiting",function(){e.j&&Lp(e.j)}),e.l.D(t,"timeupdate",function(){e.j&&Lp(e.j)}))),t.preload!="none"&&e.l.qa(t,"loadedmetadata",function(){e.A.C=Date.now()/1e3-n})}function VM(e,t,n,i){var r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge;return X(function(_e){switch(_e.g){case 1:for($a(e,"load"),r=e.h,e.K=new il({de:function(){return r.playbackRate},sc:function(){return r.defaultPlaybackRate},og:function(Ie){r.playbackRate=Ie},hh:function(Ie){r.currentTime+=Ie}}),I_(e,r,t),s=!1,o=v(e.i.variants),a=o.next();!a.done;a=o.next())u=a.value,(c=u.video&&u.video.dependencyStream)&&(s=Xy(c));BM(e,e.g,s),e.Tb=e.g.preferredTextLanguage,e.Hd=e.g.preferredTextRole,e.Fd=e.g.preferForcedSubs,tm(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(Ie,Ee,De){e.i&&e.j&&Ie!=e.j.l&&gl(e,Ie,!0,Ee===void 0?!1:Ee,De===void 0?0:De)}),e.o.setMediaElement(r),e.o.setCmsdManager(e.fa),e.j=ZM(e),e.j.configure(e.g.streaming),e.m=mi,e.dispatchEvent(pn("streaming")),h=n;case 2:for((E=e.j.l)||h||(h=Qo(e)?e.o.chooseVariant():null),A=[],p=E||h,M=v([p.video,p.audio]),R=M.next();!R.done;R=M.next())(C=R.value)&&!C.segmentIndex&&(A.push(C.createSegmentIndex()),C.dependencyStream&&A.push(C.dependencyStream.createSegmentIndex()));if(!(0<A.length)){_e.s(4);break}return T(_e,Promise.all(A),4);case 4:if(!p||p.disabledUntilTime!=0){_e.s(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(p),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Ze):Ne("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.L&&(CM(e.L,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),RM(e.L,1e3*t)),tm(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),OI(e.j,e.g.playRangeStart,e.g.playRangeEnd),b=function(Ie){e.G=XM(e,Ie),e.Ma=YM(e,Ie),R_(e,r,!1)},e.g.streaming.startAtSegmentBoundary||(U=e.Z,U==null&&e.i.startTime&&(U=e.i.startTime),b(U)),E){_e.s(7);break}if(!e.g.streaming.startAtSegmentBoundary){_e.s(8);break}return $=e.i.presentationTimeline,Q=e.Z||e.h.currentTime,e.Z==null&&e.i.startTime&&(Q=e.i.startTime),re=$.Hb(),W=$.ob(),Q<re?Q=re:Q>W&&(Q=W),T(_e,iC(h,Q),9);case 9:q=_e.h,b(q);case 8:gl(e,h,!0,!1,0);case 7:return e.G.ready(),ne=e.vc().find(function(Ie){return Ie.active}),ne||((ie=Ca(e.i.textStreams,e.Tb,e.Hd,e.Fd)[0]||null)&&Bp(e.A.h,ie,!0),h&&(ie?(Cv(h.audio,ie,e.g)&&(e.na=!0),e.na&&e.u.setTextVisibility(!0),z_(e)):e.na=!1),ie&&(e.g.streaming.alwaysStreamText||e.Rf())&&(cd(e.j,ie),yl(e))),T(_e,e.j.start(i),10);case 10:e.g.abr.enabled&&(e.o.enable(),K_(e)),Ni(e),Qo(e),e.i.variants.some(function(Ie){return Ie.primary}),((me=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(le=function(){return j_(e)},e.l.D(r,"timeupdate",le)),me||(pe=function(){return Pd(e)},e.l.D(r,"timeupdate",pe),Pd(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(ge=function(){var Ie;return X(function(Ee){if(Ee.g==1)return Ie=e.Ja().end-e.h.currentTime,isNaN(Ie)||!(Ie<=e.g.streaming.preloadNextUrlWindow)?Ee.s(0):(e.l.Ka(r,"timeupdate",ge),T(Ee,e.preload(e.i.nextUrl),4));e.za=Ee.h,H(Ee)})},e.l.D(r,"timeupdate",ge)),e.l.D(r,"ended",function(){e.load(e.za||e.i.nextUrl)}))),e.B&&e.B.onManifestUpdated(me),e.sa=!0,H(_e)}})}function HM(e,t){var n,i,r,s,o;return X(function(a){return a.g==1?(n=jn,i=Date.now()/1e3,r=!0,e.C=e.Lc({Xb:e.F,onError:function(u){Ja(e,u)},te:function(){},onExpirationUpdated:function(){var u=pn("expirationupdated");e.dispatchEvent(u)},onEvent:function(u){e.dispatchEvent(u),u.type=="drmsessionupdate"&&r&&(r=!1,e.A.j=Date.now()/1e3-i)}}),e.C.configure(e.g.drm),s={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},o={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Wi(t):"",codecs:t?Xi(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.la,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},o.fullMimeTypes.add(Ln(o.mimeType,o.codecs)),t.startsWith("audio/")?(o.type=n.V,s.audio=o):s.video=o,e.C.$=!0,T(a,Gv(e.C,[s],[]),2)):T(a,e.C.Lb(e.h),0)})}function GM(e,t,n){var i,r,s,o,a,u,c,h,p,E,A,M;return X(function(R){switch(R.g){case 1:if($a(e,"src-equals"),i=e.h,e.G=new F0(i),r=!1,e.Cd.push(function(){r=!0}),e.Z!=null&&e.G.cf(e.Z),e.Ma=$M(e,e.Z||0),e.K=new il({de:function(){return i.playbackRate},sc:function(){return i.defaultPlaybackRate},og:function(C){i.playbackRate=C},hh:function(C){i.currentTime+=C}}),R_(e,i,!0),i.textTracks&&(x_(e),s=function(){var C=ml(e).find(function(b){return b.mode!=="disabled"});C&&(C.mode="showing"),(C=N_(e))&&(C.mode="hidden")},o=function(){var C=ml(e).find(function(U){return U.mode!=="disabled"});C&&(C.mode="hidden"),C=N_(e);var b=e.u.isTextVisible();C&&b&&(C.mode="showing")},e.l.D(i,"enterpictureinpicture",function(){return s()}),e.l.D(i,"leavepictureinpicture",function(){return o()}),i.remote?(e.l.D(i.remote,"connect",function(){return o()}),e.l.D(i.remote,"connecting",function(){return o()}),e.l.D(i.remote,"disconnect",function(){return o()})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.l.D(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return o()}),a=i,a.webkitSupportsFullscreen&&e.l.D(a,"webkitpresentationmodechanged",function(){a.webkitPresentationMode!="inline"?s():o()})),I_(e,i,t),u=kM(e.L,e.T,n),!u.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(u+="#t=",0<e.g.playRangeStart&&(u+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(u+=","+e.g.playRangeEnd)),!e.I){R.s(2);break}return T(R,e.I.destroy(),3);case 3:e.I=null;case 2:return so(i),i.src=u,(Je()||wt())&&i.load(),i.preload!="none"&&!i.autoplay&&Uh(n)&&At()&&i.load(),e.m=ar,e.dispatchEvent(pn("streaming")),c=new rn,Ga(i,HTMLMediaElement.HAVE_METADATA,e.l,function(){e.G.ready(),c.resolve()}),h=function(){return new Promise(function(C){var b=new se(C);e.l.D(i.textTracks,"change",function(){return b.da(.5)}),b.da(.5)})},Ga(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,function(){var C,b,U,$,Q;return X(function(re){if(re.g==1)return T(re,h(),2);if(r)return re.return();for(zM(e),C=ml(e),C.some(function(W){return W.mode==="showing"})&&(e.na=!0,e.u.setTextVisibility(!0)),C.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():Vt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),b=!1,U=v(C),$=U.next();!$.done;$=U.next())Q=$.value,Q.mode!=="disabled"&&(b?(Q.mode="disabled",Ne("Found more than one enabled text track, disabling it",Q)):(O_(e,Q),b=!0));KM(e),H(re)})}),i.error?c.reject(em(e)):i.preload=="none"&&(Ne('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),c.resolve()),e.l.qa(i,"error",function(){c.reject(em(e))}),T(R,Hu(e.g.streaming.loadTimeout,c),4);case 4:((p=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(E=function(){return j_(e)},e.l.D(i,"timeupdate",E)),p||(A=function(){return Pd(e)},e.l.D(i,"timeupdate",A),Pd(e)),e.B&&(e.B.onManifestUpdated(p),p&&(M=e.Ja().end,e.l.D(i,"progress",function(){var C=e.Ja().end;M!=C&&(e.B.onManifestUpdated(e.U()),M=C)}))),e.sa=!0,H(R)}})}function zM(e){var t=e.g.preferredAudioLanguage;t!=""&&e.th(t,e.g.preferredVariantRole)}function KM(e){var t=e.g.preferredTextLanguage;t!=""&&e.jg(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function qM(e,t){if(t.kind=="metadata"){t.mode="hidden",e.l.D(t,"cuechange",function(){if(t.activeCues)for(var i=v(t.activeCues),r=i.next();!r.done;r=i.next())r=r.value,$p(e,r.startTime,r.endTime,r.type,r.value),e.B&&e.B.onCueMetadataChange(r.value);if(t.cues){i=[],r=v(t.cues);for(var s=r.next(),o={};!s.done;o={bc:void 0},s=r.next())o.bc=s.value,o.bc.type=="com.apple.quicktime.HLS"&&o.bc.startTime!=null&&(s=i.find(function(a){return function(u){return u.startTime==a.bc.startTime&&u.endTime==a.bc.endTime}}(o)),s||(s={startTime:o.bc.startTime,endTime:o.bc.endTime,values:[]},i.push(s)),s.values.push(o.bc.value));for(i=v(i),r=i.next();!r.done;r=i.next())r=r.value,r.values.some(function(a){return a.key=="X-ASSET-URI"||a.key=="X-ASSET-LIST"})&&e.B&&(r.values.push({key:"CUE",description:"",data:r.startTime!=0||e.U()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.B.onHLSInterstitialMetadata(e,e.h,r))}});var n=new se(function(){var i=eC(e);i=v(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).sb().da(.5);e.Cd.push(function(){n.stop()})}}function M_(e,t){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(pn("metadata",t))}function $p(e,t,n,i,r){e.Aa&&(t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r},t.id=JSON.stringify(t),Sp(e.Aa,t))}function WM(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new se(function(){t.mode="hidden"}).sb().da(.5);e.Cd.push(function(){n.stop()})}}d.qj=function(){for(var e=this.$;e.g;)e.release()},d.Lc=function(e){return new qc(e)};function C_(e,t){function n(r){t()?t().dispatchEvent(r):e.dispatchEvent(r)}function i(r){t()?dl(t(),!0,r):r()}return t||(t=function(){return null}),new hn(function(r,s,o,a){var u=t()?t().j:e.o;u&&u.segmentDownloaded(r,s,o,a)},function(r,s,o){s=new Map().set("headers",r).set("request",s).set("requestType",o),n(pn("downloadheadersreceived",s)),i(function(){if(e.fa){var a=e.fa;if(a.h.enabled){var u=r["cmsd-static"];if(u)try{var c=new Map,h=u.split(",");for(u=0;u<h.length;u++){var p=h[u].split("=");c.set(p[0],p_(p[1]))}}catch{}if(c=r["cmsd-dynamic"]){try{var E=new Map,A=c.split(";");for(c=1;c<A.length;c++){var M=A[c].split("=");E.set(M[0],p_(M[1]))}var R=E}catch{R=null}R&&(a.g=R)}}}})},function(r,s){r=new Map().set("request",r).set("response",s),n(pn("downloadcompleted",r))},function(r,s,o,a){r=new Map().set("request",r).set("error",s).set("httpResponseCode",o).set("aborted",a),n(pn("downloadfailed",r))},function(r,s,o){i(function(){var a=e.L,u=o;if(u=u===void 0?{}:u,a.g.enabled)if(s.method==="HEAD")Ya(a,s);else switch(r){case 0:try{if(a.g.enabled){if(u.type){e:{switch(u.type){case 4:var c=a.l?Cd:Md;break e;case 3:case 2:c=a.l?kd:Rd;break e;case 5:c="s";break e}c=void 0}a.i=c}Ya(a,s,{ot:f_,su:!a.u})}}catch(_e){We("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",_e)}break;case Or:try{if(a.g.enabled){var h=u.segment;c=0,h&&(c=h.endTime-h.startTime);var p={d:1e3*c,st:a.h.U()?"l":"v"};p.ot=LM(u);var E=p.ot===Ad||p.ot===wd||p.ot===xd||p.ot===Id,A=u.stream;if(A){var M=a.h.gb();if(E&&(p.bl=PM(a,A.type),p.ot!==Id)){var R=d_(a,A.type);p.dl=M?R/Math.abs(M):R}if(A.bandwidth&&(p.br=A.bandwidth/1e3),A.segmentIndex&&h){var C=A.segmentIndex.Gb(h.endTime,!0,0>M);if(C){var b=C.next().value;if(b&&b!=h){if(!_a(h.N(),b.N())){var U=b.N()[0],$=s.uris[0],Q=new URL(U),re=new URL($);if(Q.origin!==re.origin)var W=U;else{for(var q=Q.pathname.split("/").slice(1),ne=re.pathname.split("/").slice(1,-1);q[0]===ne[0];)q.shift(),ne.shift();for(;ne.length;)ne.shift(),q.unshift("..");W=q.join("/")}p.nor=W}if((b.Sa||b.xa)&&(h.Sa!=b.Sa||h.xa!=b.xa)){var ie=b.Sa+"-";b.xa&&(ie+=b.xa),p.nrr=ie}}}var me=a.h.gb()||1,le=d_(a,A.type)||500,pe=A.bandwidth,ge=pe?pe*(h.endTime-h.startTime)/1e3/(le/me/1e3)*a.g.rtpSafetyFactor:NaN;isNaN(ge)||(p.rtp=ge)}}E&&p.ot!==Id&&(p.tb=OM(a,p.ot)/1e3),Ya(a,s,p)}}catch(_e){We("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",_e)}break;case 2:case 5:case 6:Ya(a,s,{ot:"k"});break;case 4:Ya(a,s,{ot:"o"})}})},function(r,s,o,a){(r=t()?t().l:e.H)&&r.banLocation&&r.banLocation(a)},function(r,s){if(s.data){s=s.data.byteLength;var o=t()?t().getStats():e.A;o&&(o.mc=isNaN(o.mc)?s:o.mc+s,r===0&&(o.dh=s))}})}function XM(e,t){return new V0(e.h,e.i,e.g.streaming,t,function(){e.Ma&&K0(e.Ma,!0),e.j&&e.j.Fc(),e.M&&ss(e)},function(n){return e.dispatchEvent(n)})}function YM(e,t){var n=e.U()||0<t;t=new Yo(e.yd,n),t.addEventListener("enter",function(s){vl(e,"timelineregionenter",s.region)}),t.addEventListener("exit",function(s){vl(e,"timelineregionexit",s.region)}),t.addEventListener("skip",function(s){var o=s.region;s.seeking||(vl(e,"timelineregionenter",o),vl(e,"timelineregionexit",o))});var i=new Yo(e.Aa,n);i.addEventListener("enter",function(s){M_(e,s.region)}),n=new Yo(e.Ga,n),n.addEventListener("enter",function(s){s=new Map().set("detail",s.region.emsg),e.dispatchEvent(pn("emsg",s))});var r=new _p(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.xd&&r.g.add(e.xd),r}function $M(e,t){t=new Yo(e.Aa,0<t),t.addEventListener("enter",function(i){M_(e,i.region)});var n=new _p(e.h);return n.g.add(t),n}function R_(e,t,n){e.M=new L2,e.M.g=La,k_(e),Ld(e),e.oa=new se(function(){ss(e)}),e.g.streaming.rebufferingGoal&&e.oa.ua(.25),e.l.D(t,"waiting",function(){return ss(e)}),e.l.D(t,"canplaythrough",function(){return ss(e)}),e.l.D(t,"playing",function(){return ss(e)}),e.l.D(t,"seeked",function(){return ss(e)}),n&&(e.l.D(t,"stalled",function(){return ss(e)}),e.l.D(t,"progress",function(){return ss(e)}),e.l.D(t,"timeupdate",function(){return ss(e)}))}function k_(e){var t=e.g.streaming.rebufferingGoal;e.M.i.set(Yu,Math.min(.5,t/2)).set(La,t)}function ss(e){switch(e.m){case ar:if(e.Uc())var t=!0;else{var n=ip(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case mi:e:if(e.Uc()||qo(e.I))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.cc();var i=ip(e.h.buffered);if(i!=null&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=_0(e.h.buffered,e.h.currentTime),n=e.M;var r=t,s=n.i.get(n.g);t=n.g,i=r||i>=s&&0<i?Yu:La,n.g=i,(t=t!=i)&&i===Yu&&(n.h=Date.now()),t&&Ld(e)}function QM(e,t,n,i){return new I0(e,t,n,i)}function JM(e){return new Gp({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},Fb:function(){return e.Fb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},gb:function(){return e.gb()},yb:function(){return e.yb()},Rb:function(){return e.Rb()},U:function(){return e.U()},ce:function(){return e.ce()}},e.g.cmcd)}function ZM(e){return new Q0(e.i,{Rc:function(){return e.G?e.G.Rd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},gb:function(){return e.gb()},video:e.h,aa:e.I,Xb:e.F,onError:function(t){return Ja(e,t)},onEvent:function(t){return e.dispatchEvent(t)},ue:function(t,n,i){var r=t.startTime;if(t=t.endTime,n=n.type,n!=Ot){if(e.G){e.G.jh();var s=fp(e.I,n);!e.U()&&e.h.paused&&!e.h.seeking&&s!=null&&0<s&&e.G.Rd()<s&&e.G.cf(s)}ss(e)}i=new Map().set("start",r).set("end",t).set("contentType",n).set("isMuxed",i),e.dispatchEvent(pn("segmentappended",i))},hj:function(t,n){(n=n.Wc)&&e.xd&&II(e.xd,n,t)},Hg:function(t,n){var i=e.C;if(i.g.parseInbandPsshEnabled&&!i.F&&["audio","video"].includes(t)){t=new Yh(x(n)),n=0;for(var r=v(t.data),s=r.next();!s.done;s=r.next())n+=s.value.length;if(n==0)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,t=v(t.data),s=t.next();!s.done;s=t.next())s=s.value,n.set(s,r),r+=s.length;qu(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)}})}d.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=gd(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Vt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Vt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Vt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&At(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Vt("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Vt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Vt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Vt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Vt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Vt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Vt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Vt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Vt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Vt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var r=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return r},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Vt("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Vt("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Vt("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Vt("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Vt("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Vt("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Vt("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Vt("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Vt("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Vt("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){n=!1;for(var s in e.drm.advanced){var o=e.drm.advanced[s];i=o.videoRobustness,o=o.audioRobustness,"videoRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].videoRobustness)&&(e.drm.advanced[s].videoRobustness=[i],n=!0),"audioRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].audioRobustness)&&(e.drm.advanced[s].audioRobustness=[o],n=!0)}n&&Vt("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"crossBoundaryStrategy"in e.streaming&&e.streaming.crossBoundaryStrategy!="keep"&&(e.streaming.inaccurateManifestTolerance=0),s=oo(this.g,e,Ls(this)),b_(this),s},d.di=function(e){this.Ze=e};function b_(e){if(e.xe=new Zh(e.g,e.ka,e.C),e.H){var t=Hr(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.C&&e.C.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.m!=Nr&&o0(e.xe,e.i)&&Ni(e)}catch(r){Ja(e,r)}e.o&&Qo(e),t=e.j.l,!t||t.allowedByApplication&&t.allowedByKeySystem||Qa(e)}if(e.F&&(e.F.mg(e.g.streaming.forceHTTP),e.F.ng(e.g.streaming.forceHTTPS),e.F.o=e.g.streaming.minBytesForProgressEvents),e.I&&(e.I.configure(e.g.mediaSource),e.I.Ea=e.g.manifest.segmentRelativeVttTiming),e.u)if(t=e.g.textDisplayFactory,e.Xe!=t){var n=e.u;if(e.u=t(),e.u.configure?e.u.configure(e.g.textDisplayer):Vt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||Vt("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),e.u.setTextVisibility(n.isTextVisible()),n.destroy(),e.I){n=e.I;var i=e.u;n.ea=i,n.h&&(n.h.j=i)}e.Xe=t,e.j&&(t=e.j,(n=t.i.get(Ot))&&za(t,n.stream,!0,0,!0))}else e.u.configure&&e.u.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),K_(e)),e.M&&k_(e),e.oa&&(e.g.streaming.rebufferingGoal?e.oa.ua(.25):e.oa.stop()),e.i&&tm(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.B&&e.B.configure(e.g.ads),e.L&&e.L.configure(e.g.cmcd),e.fa&&e.fa.configure(e.g.cmsd)}d.getConfiguration=function(){var e=Ls(this);return oo(e,this.g,Ls(this)),e},d.mi=function(){return this.Ze},d.Wg=function(){var e=Ls(this);return oo(e,this.g,Ls(this)),e_(this.g,Ls(this))},d.Sg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ja().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},d.uj=function(){for(var e in this.g)delete this.g[e];oo(this.g,Ls(this),Ls(this)),b_(this)},d.vi=function(){return this.m},d.Ug=function(){return this.i?this.i.type:null},d.zi=function(){return this.h},d.yb=function(){return this.F},d.Qc=function(){return this.T},d.Rg=function(){return this.B?this.B:null},d.U=function(){return this.i&&!this.Qa()?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},d.yc=function(){return this.i?this.i.presentationTimeline.yc():!1},d.Si=function(){if(this.i&&!this.Qa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},d.Ja=function(){if(this.i&&!this.Qa()){if(!this.sa&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Hb(),end:e.ob()}}if(this.h&&this.h.src&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},d.Pi=function(){this.U()&&(this.h.currentTime=this.Ja().end)},d.Ti=function(){return this.sa},d.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},d.drmInfo=function(){return this.C?this.C.h:null},d.pd=function(){return this.C?this.C.pd():1/0},d.If=function(){return this.C?this.C.If():[]},d.be=function(){return this.C?this.C.be():{}},d.Qf=function(){return this.M?this.M.g==La:!!this.T},d.gb=function(){return this.h?this.K?this.K.i:1:0},d.Nd=function(e,t){t=t===void 0?!0:t,e==0?Ne("A trick play rate of 0 is unsupported!"):(this.K.set(e),this.m==mi&&(this.o.playbackRateChanged(e),Ip(this.j,t&&1<Math.abs(e))),B_(this,e))},d.gd=function(){var e=this.K.sc();this.m==ar&&this.K.set(e),this.m==mi&&(this.K.set(e),this.o.playbackRateChanged(e),Ip(this.j,!1)),this.Oa.Ra()},d.Rb=function(){if(this.i&&!this.Qa()){for(var e=this.j?this.j.l:null,t=[],n=0,i=v(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,Ku(r)){var s=Uo(r);s.active=r==e,s.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(s.active=!0),s.active&&n++,t.push(s)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(o){return zh(o)}):[]},d.vc=function(){if(this.i&&!this.Qa()){for(var e=this.j?this.j.u:null,t=[],n=v(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=Bo(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?ml(this).map(function(s){var o=Av(s);return o.active=s.mode!="disabled",o.type="text",o.originalTextId=s.id,s.kind=="captions"&&(o.mimeType="unknown"),s.kind=="subtitles"&&(o.mimeType="text/vtt"),s.kind&&(o.roles=[s.kind]),s.kind=="forced"&&(o.forced=!0),o}):[]},d.si=function(){var e=this.Ve;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Hh(t)})},d.gi=function(e){var t=this,n,i;return X(function(r){return r.g==1?T(r,L_(t,e),2):(n=r.h,n?(i=[],n.segmentIndex.xb(function(s){var o=D_(s.tilesLayout||n.tilesLayout);if(o)for(var a=o.rows*o.oc,u=s.j-s.startTime,c=0;c<a;c++){var h=P_(s,n,s.startTime+u*c/a,o);i.push(h)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),r.return(i)):r.return(null))})};function D_(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}d.Ji=function(e,t){var n=this,i,r,s,o;return X(function(a){return a.g==1?T(a,L_(n,e),2):(i=a.h,!i||(r=i.segmentIndex.find(t),r==null)?a.return(null):(s=i.segmentIndex.get(r),(o=D_(s.tilesLayout||i.tilesLayout))?a.return(P_(s,i,t,o)):a.return(null)))})};function L_(e,t){var n,i;return X(function(r){return r.g==1?e.m!=mi&&e.m!=ar||(n=e.Ve,e.i&&(n=e.i.imageStreams),i=n[0],!i)?r.return(null):(t!=null&&(i=n.find(function(s){return s.id==t})),i?i.segmentIndex?r.s(2):T(r,i.createSegmentIndex(),2):r.return(null)):r.return(i)})}function P_(e,t,n,i){var r=t.width||0,s=t.height||0,o=r/i.oc,a=s/i.rows,u=i.oc*i.rows,c=e.j-e.startTime;c=e.B||c/u;var h=e.startTime,p=0,E=0;return 1<u&&(E=Math.floor((n-e.startTime)/c),h=e.startTime+E*c,p=E%i.oc*o,E=Math.floor(E/i.oc)*a),i=!1,(n=e.thumbnailSprite)&&(i=!0,a=n.height,p=n.positionX,E=n.positionY,o=n.width),{segment:e,imageHeight:s,imageWidth:r,height:a,positionX:p,positionY:E,startTime:h,duration:c,uris:e.N(),width:o,sprite:i,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}d.uh=function(e){function t(){var i=n.i.textStreams.find(function(r){return r.id==e.id});i&&i!=n.j.u&&(Bp(n.A.h,i,!1),cd(n.j,i),Od(n),yl(n),n.Tb=i.language)}var n=this;this.i&&this.G&&(t(),!this.Qa())||function(){if(n.h&&n.h.textTracks){var i=ml(n),r=i.find(function(s){return s.mode!=="disabled"});(i=i.find(function(s){return Gh(s)===e.id}))&&(r!==i&&(r&&(r.mode="disabled",n.l.Ka(r,"cuechange"),n.u.remove(0,1/0)),i&&O_(n,i)),Od(n),yl(n))}}()};function O_(e,t){e.l.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]);r=v(r);for(var s=r.next();!s.done;s=r.next()){if(s=s.value,s.endTime===1/0||s.endTime<s.startTime)s=null;else{var o=new mn(s.startTime,s.endTime,s.text);o.line=typeof s.line=="number"?s.line:null,s.lineAlign&&(o.lineAlign=s.lineAlign),o.lineInterpretation=s.snapToLines?ju:1,o.position=typeof s.position=="number"?s.position:null,s.positionAlign&&(o.positionAlign=s.positionAlign),o.size=s.size,o.textAlign=s.align,s.vertical==="lr"?o.writingMode="vertical-lr":s.vertical==="rl"&&(o.writingMode="vertical-rl"),s.region&&(o.region.id=s.region.id,o.region.height=s.region.lines,o.region.heightUnits=2,o.region.regionAnchorX=s.region.regionAnchorX,o.region.regionAnchorY=s.region.regionAnchorY,o.region.scroll=s.region.scroll,o.region.viewportAnchorX=s.region.viewportAnchorX,o.region.viewportAnchorY=s.region.viewportAnchorY,o.region.viewportAnchorUnits=qi,o.region.width=s.region.width,o.region.widthUnits=qi),Dc(o),s=o}s&&((o=e.g.mediaSource.modifyCueCallback)&&o(s,null,n),i.push(s))}e.u.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}d.Ee=function(e,t,n){function i(){var s=r.i.variants.find(function(a){return a.id==e.id});if(s&&Ku(s)){var o=r.j.l;r.g.abr.enabled&&(o.video!=s.video||o.audio&&s.audio&&o.audio.language==s.audio.language&&o.audio.channelsCount==s.audio.channelsCount&&o.audio.label==s.audio.label)&&Ne("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.Qa()?gl(r,s,!1,!1,0):gl(r,s,!1,t||!1,n||0),r.W.configure({language:s.language,role:s.audio&&s.audio.roles&&s.audio.roles[0]||"",channelCount:s.audio&&s.audio.channelsCount?s.audio.channelsCount:0,Sc:s.video&&s.video.hdr?s.video.hdr:"",spatialAudio:s.audio&&s.audio.spatialAudio?s.audio.spatialAudio:!1,videoLayout:s.video&&s.video.videoLayout?s.video.videoLayout:"",Kc:s.audio&&s.audio.label?s.audio.label:"",fd:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:s.audio&&s.audio.codecs?s.audio.codecs:""}),Qo(r)}}var r=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.Qa()))&&function(){if(r.h&&r.h.audioTracks){var s=Array.from(r.h.audioTracks);s=v(s);for(var o=s.next();!o.done;o=s.next())if(o=o.value,Gh(o)==e.id){F_(r,o);break}}}()},d.zj=function(e,t){t=t===void 0?0:t;var n=this.Rb();if(n.length){var i=n.find(function(r){return r.active});i&&(n=n.find(function(r){return r.videoId===i.videoId&&r.language==e.language&&r.label==e.label&&r.audioMimeType==e.mimeType&&r.audioCodec==e.codecs&&r.primary==e.primary&&_a(r.audioRoles,e.roles)&&r.accessibilityPurpose==e.accessibilityPurpose&&r.channelsCount==e.channelsCount&&r.audioSamplingRate==e.audioSamplingRate&&r.spatialAudio==e.spatialAudio}))&&!n.active&&this.Ee(n,!0,t)}},d.getAudioTracks=function(){var e=this.Rb();if(!e.length)return[];var t=e.find(function(s){return s.active});if(!t)return[];var n=e;if(this.m==mi&&(n=e.filter(function(s){return s.originalVideoId===t.originalVideoId&&s.audioCodec})),!n.length)return[];e=new Map,n=v(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalAudioId;r||i.audioId==null||(r=String(i.audioId)),r&&e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage})}return Array.from(e.values())},d.ii=function(){return X_(this.Rb())},d.Hi=function(){return X_(this.vc())},d.hi=function(){return Array.from(W_(this.Rb()))},d.Gi=function(){return Array.from(W_(this.vc()))},d.th=function(e,t,n,i,r,s,o){function a(){function c(M,R){return M.video||R.video?M.video&&R.video?Math.abs((M.video.height||0)-(R.video.height||0))+Math.abs((M.video.width||0)-(R.video.width||0)):1/0:0}u.W=u.g.adaptationSetCriteriaFactory(),u.W.configure({language:e,role:t||"",channelCount:n||0,Sc:"",spatialAudio:s||!1,videoLayout:"",Kc:o||"",fd:"",codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:r||""});var h=u.j.l,p=u.W.create(u.i.variants),E=null;p=v(p.values());for(var A=p.next();!A.done;A=p.next())A=A.value,Ku(A)&&(!E||c(E,h)>c(A,h))&&(E=A);E!=h&&(E?(h=Uo(E),u.Ee(h,!0,i||0)):Qa(u))}var u=this;n=n===void 0?0:n,i=i===void 0?0:i,r=r===void 0?"":r,s=s===void 0?!1:s,o=o===void 0?"":o,!(this.i&&this.G&&(a(),!this.Qa()))&&function(){if(u.h&&u.h.audioTracks){var c=Ca(u.Rb(),e,t||"",!1)[0];c&&u.Ee(c)}}()},d.jg=function(e,t,n){function i(){r.Tb=e,r.Hd=t||"",r.Fd=n||!1;var s=Ca(r.i.textStreams,r.Tb,r.Hd,r.Fd)[0]||null;s&&s!=r.j.u&&(Bp(r.A.h,s,!1),r.g.streaming.alwaysStreamText||r.Rf())&&(cd(r.j,s),Od(r),yl(r))}var r=this;n=n===void 0?!1:n,!(this.i&&this.G&&(i(),!this.Qa()))&&function(){var s=Ca(r.vc(),e,t||"",n||!1)[0];s&&r.uh(s)}()},d.Aj=function(e,t,n){function i(){for(var s=null,o=v(r.i.variants),a=o.next();!a.done;a=o.next())if(a=a.value,a.audio.label==e){s=a;break}s!=null&&(r.W=r.g.adaptationSetCriteriaFactory(),r.W.configure({language:s.language,role:"",channelCount:0,Sc:"",spatialAudio:!1,videoLayout:"",fd:"",Kc:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),Qa(r,t,n))}var r=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.Qa()))&&function(){if(r.h&&r.h.audioTracks){var s=Array.from(r.h.audioTracks),o=null;s=v(s);for(var a=s.next();!a.done;a=s.next())a=a.value,a.label==e&&(o=a);o&&F_(r,o)}}()},d.Rf=function(){var e=this.na;return this.u?this.u.isTextVisible():e},d.li=function(){return this.Jd.map(function(e){return Bo(e)})},d.ki=function(e){if(!this.Jd.length)return[];var t=un(e);if(e=this.Jd.filter(function(s){return un(s.language)==t}),!e.length)return[];var n=[],i=new Set;e=v(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&r.segmentIndex.xb(function(s){var o=s.N()[0],a=s.startTime+"-"+s.endTime+"-"+o;s={id:a,title:o,startTime:s.startTime,endTime:s.endTime},i.has(a)||(n.push(s),i.add(a))});return n};function ml(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function N_(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function eC(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}d.Ah=function(e){e=!!e,this.na!=e&&(this.na=e,this.m==mi?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.u||(e=Ca(this.i.textStreams,this.Tb,this.Hd,this.Fd),0<e.length&&(cd(this.j,e[0]),Od(this),yl(this))):UI(this.j))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),z_(this))},d.Ai=function(){if(this.G)var e=this.G.Rd();else{if(this.Z==null)return new Date;e=this.Z}if(this.i&&!this.Qa()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},d.Xg=function(){if(this.i&&!this.Qa()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},d.ee=function(){return this.U()&&this.i?this.i.presentationTimeline.ee():null},d.Fb=function(){if(this.m==mi)return this.I.Fb();var e={total:[],audio:[],video:[],text:[]};return this.m==ar&&(e.total=Rs(this.h.buffered)),e},d.ce=function(){if(!this.h||!this.h.currentTime)return null;var e=this.Xg().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},d.getStats=function(){if(this.m!=mi&&this.m!=ar)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Jp(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.U()){var n=this.A;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.A.P=this.G.Bg(),this.A.T=this.G.Cg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.A;var i=Number(n.totalVideoFrames);t.O=Number(n.droppedVideoFrames),t.M=i,this.A.L=Number(n.corruptedVideoFrames)}if(this.C?(n=this.C,n=n.H?n.H:NaN):n=NaN,this.A.o=n,this.m==mi){if(n=this.j.l,t=this.j.u,n){i=this.K?this.K.i:1;var r=i*n.bandwidth;t&&t.bandwidth&&(r+=i*t.bandwidth),this.A.A=r}n&&n.video&&(t=this.A,i=n.video.height||NaN,t.m=n.video.width||NaN,t.l=i),this.U()&&(n=this.ce()||0,this.A.B=n/1e3),this.i&&(this.A.G=this.i.periodCount,this.A.F=this.i.gapCount,this.i.presentationTimeline&&(this.A.I=this.i.presentationTimeline.h)),n=this.o.getBandwidthEstimate(),this.A.u=n}this.m==ar&&(n=this.A,n.mc=isNaN(n.mc)?NaN:n.mc+NaN,n=this.A,t=e.videoHeight||NaN,n.m=e.videoWidth||NaN,n.l=t);var s=this.A;e=s.m,n=s.l,t=s.A,i=s.M,r=s.O;var o=s.L,a=s.T,u=s.P,c=s.u,h=s.i,p=s.C,E=s.H,A=s.j,M=Up(s.g,"playing"),R=Up(s.g,"paused"),C=Up(s.g,"buffering"),b=s.o,U=s.B,$=s.I,Q=s.dh,re=s.mc,W=s.K,q=s.G,ne=s.F,ie=lM(s.g),me=[];s=v(s.h.g);for(var le=s.next();!le.done;le=s.next())le=le.value,me.push({timestamp:le.timestamp,id:le.id,type:le.type,fromAdaptation:le.fromAdaptation,bandwidth:le.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:r,corruptedFrames:o,stallsDetected:a,gapsJumped:u,estimatedBandwidth:c,completionPercent:h,loadLatency:p,manifestTimeSeconds:E,drmTimeSeconds:A,playTime:M,pauseTime:R,bufferingTime:C,licenseTime:b,liveLatency:U,maxSegmentDuration:$,manifestSizeBytes:Q,bytesDownloaded:re,nonFatalErrorCount:W,manifestPeriodCount:q,manifestGapCount:ne,stateHistory:ie,switchHistory:me}},d.Sh=function(e,t,n,i,r,s,o){o=o===void 0?!1:o;var a=this,u,c,h,p,E,A,M,R,C,b,U,$,Q;return X(function(re){switch(re.g){case 1:if(a.m!=mi&&a.m!=ar)throw new g(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ne("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){re.s(2);break}return T(re,Qp(a,e),3);case 3:i=re.h;case 2:if(u=[],a.B&&(u=a.B.getCuePoints()),a.m!=ar){re.s(4);break}return o&&(n="forced"),T(re,tC(a,e,t,n,i,s||"",u),5);case 5:if(c=un(t),h=a.vc(),p=h.find(function(W){return un(W.language)==c&&W.label==(s||"")&&W.kind==n}))return Ni(a),re.return(p);throw new g(1,2,2012);case 4:if(E=jn,A=a.Ja(),M=A.end-A.start,a.i&&(M=a.i.presentationTimeline.getDuration()),M==1/0)throw new g(1,4,4033);if(!u.length){re.s(6);break}return T(re,Dd(a,e,a.F,a.g.streaming.retryParameters),7);case 7:R=re.h,C=U_(a,R,i,u),b=new Blob([C],{type:"text/vtt"}),e=mp(b),i="text/vtt";case 6:if(U={id:a.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:od(0,M,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:s||null,type:E.va,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ln(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},$=Ln(U.mimeType,U.codecs),Q=Ia($),!Q)throw new g(2,2,2014,i);return a.i.textStreams.push(U),Ni(a),re.return(Bo(U))}})},d.Th=function(e,t){var n=this,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q;return X(function(re){switch(re.g){case 1:if(n.m!=mi&&n.m!=ar)throw new g(1,7,7004);if(t){re.s(2);break}return T(re,Qp(n,e),3);case 3:t=re.h;case 2:if(t!="text/vtt")throw new g(1,2,2017,e);if(i=jn,r=n.Ja(),s=r.end-r.start,n.i&&(s=n.i.presentationTimeline.getDuration()),s==1/0)throw new g(1,4,4045);return T(re,Dd(n,e,n.F,n.g.streaming.retryParameters),4);case 4:if(o=re.h,a=Fu(t),!a)throw new g(2,2,2014,t);for(u=a(),c={periodStart:0,segmentStart:0,segmentEnd:s,vttOffset:0},h=x(o),p=u.parseMedia(h,c,e,[]),E=[],A=v(p),M=A.next(),R={};!M.done;R={Qe:void 0,Mc:void 0},M=A.next())R.Mc=M.value,R.Qe=null,C=function(W){return function(){return W.Qe==null&&(W.Qe=On([e],[W.Mc.payload])),W.Qe||[]}}(R),b=new lt(R.Mc.startTime,R.Mc.endTime,C,0,null,null,0,0,1/0),R.Mc.payload.includes("#xywh")&&(U=R.Mc.payload.split("#xywh=")[1].split(","),U.length===4&&b.Ge({height:parseInt(U[3],10),positionX:parseInt(U[0],10),positionY:parseInt(U[1],10),width:parseInt(U[2],10)})),E.push(b);if($=t,!E.length){re.s(5);break}return T(re,$o(E[0].N()[0],n.F,n.g.manifest.retryParameters),6);case 6:$=re.h;case 5:return Q={id:n.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Wt(E),mimeType:$||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.bf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ln($||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==ar?n.Ve.push(Q):n.i.imageStreams.push(Q),Ni(n),re.return(Hh(Q))}})},d.Rh=function(e,t,n){var i=this,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U;return X(function($){switch($.g){case 1:if(i.m!=mi&&i.m!=ar)throw new g(1,7,7004);if(n){$.s(2);break}return T($,Qp(i,e),3);case 3:n=$.h;case 2:if(r=jn,s=i.Ja(),o=s.end-s.start,i.i&&(o=i.i.presentationTimeline.getDuration()),o==1/0)throw new g(1,4,4054);return T($,Dd(i,e,i.F,i.g.streaming.retryParameters),4);case 4:if(a=$.h,u=Fu(n),!u)throw new g(2,2,2014,n);for(c=u(),h={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},p=x(a),E=c.parseMedia(p,h,e,[]),A=[],M=v(E),R=M.next(),C={};!R.done;C={Zd:void 0},R=M.next())C.Zd=R.value,b=new lt(C.Zd.startTime,C.Zd.endTime,function(Q){return function(){return[Q.Zd.payload]}}(C),0,null,null,0,0,1/0),A.push(b);return U={id:i.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Wt(A),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.va,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ln("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},i.Jd.push(U),Ni(i),$.return(Bo(U))}})};function Qp(e,t){var n;return X(function(i){switch(i.g){case 1:return ve(i,2),T(i,$o(t,e.F,e.g.streaming.retryParameters),4);case 4:n=i.h,Me(i,3);break;case 2:Ce(i);case 3:if(n)return i.return(n);throw new g(1,2,2011,t)}})}function tC(e,t,n,i,r,s,o){var a,u,c,h;return X(function(p){if(p.g==1)return r!="text/vtt"||o.length?T(p,Dd(e,t,e.F,e.g.streaming.retryParameters),3):p.s(2);p.g!=2&&(a=p.h,u=U_(e,a,r,o),c=new Blob([u],{type:"text/vtt"}),t=mp(c),r="text/vtt"),h=document.createElement("track");var E=e.L,A=t;try{if(E.g.enabled){var M=zp(E);M.ot=qp,M.su=!0;var R=Ed(M),C=Kp(A,R)}else C=A}catch(b){We("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",b),C=A}return h.src=C,h.label=s,h.kind=i,h.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(h),p.return(h)})}function Dd(e,t,n,i){var r,s,o;return X(function(a){if(a.g==1){r=Or,s=qn([t],i),s.method="GET";var u=e.L;try{u.g.enabled&&Ya(u,s,{ot:qp,su:!0})}catch(c){We("CMCD_TEXT_ERROR","Could not generate text CMCD data.",c)}return T(a,n.request(r,s).promise,2)}return o=a.h,a.return(o.data)})}function U_(e,t,n,i){var r=Fu(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=x(t),t=n.parseMedia(t,e,null,[]),IM(t,i);throw new g(2,2,2014,n)}d.Fj=function(e,t){this.ka.width=e,this.ka.height=t},d.gg=function(e){if(this.m==mi){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.B)t=!1;else{for(var n=v(t.i.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.sd||i.Da||i.kb||(i.sd=!1,xi(t,i,e));t=!0}}else t=!1;return t},d.Jf=function(){return Ne("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},d.wi=function(){return this.Qb},d.pi=function(){var e={video:null,audio:null,text:null};if(this.m!=mi)return e;var t=this.j.l,n=this.h.currentTime;t=v([t.video,t.audio,this.j.u]);for(var i=t.next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r=i.segmentIndex.get(r),r={codecs:r.codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},i.type=="video"?(r.width=i.width,r.height=i.height,e.video=r):i.type=="audio"?e.audio=r:i.type==Ot&&(e.text=r)}return e};function Ls(e){var t=Wa();return t.streaming.failureCallback=function(n){if(e.U()){var i=null;n.code==1001||n.code==1002?(i=1,e.g.streaming.lowLatencyMode&&(i=.1)):n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.gg(i))}},t.textDisplayFactory=function(){return!e.He||At()&&!document.fullscreenEnabled?"addTextTrack"in e.h?new ai(e.h,"Shaka Player TextTrack"):new ui:new li(e.h,e.He)},t}d.Dh=function(e){this.He=e};function nC(e,t){for(var n=new Set,i=v(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=v(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var s=v(r.closedCaptions.keys()),o=s.next();!o.done;o=s.next())if(o=o.value,!n.has(o)){var a=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Mn,c=r.closedCaptions.get(o);a={id:e.Ae++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:a,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:c,originalLanguage:c,label:null,type:Ot,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ln(a,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(a),n.add(o)}}}function iC(e,t){var n,i,r,s,o;return X(function(a){return a.g==1?(n=e.audio,i=e.video,r=function(u,c){var h,p,E;return X(function(A){return A.g==1?u?u.segmentIndex?A.s(2):T(A,u.createSegmentIndex(),2):A.return(null):(p=(h=u.segmentIndex.Gb(c))?h.next().value:null,p?(E=p.startTime,A.return(E)):A.return(null))})},T(a,r(n,t),2)):a.g!=3?(s=a.h,T(a,r(i,t),3)):(o=a.h,o!=null&&s!=null?a.return(Math.max(o,s)):o!=null?a.return(o):s!=null?a.return(s):a.return(t))})}function Ld(e){var t=e.Qf();if(e.A&&e.M&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.K;n.j=!1,vp(n)}else n=e.K,n.j=t,vp(n);if(e.L&&(n=e.L,t||n.u||(n.u=!0),n.u&&t&&(n.B=!0),n.F=t),Jp(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Qd<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.P&&(e.P=Math.min(e.P+ ++e.Qd*r,n-i))}}t=new Map().set("buffering",t),e.dispatchEvent(pn("buffering",t))}function B_(e,t){e.Oa.Ra(),e.Oa.D(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.Ja(),r=e.U()?e.g.streaming.safeSeekOffset:0;0<t?Math.floor(n)>=Math.floor(i.end)&&e.gd():Math.floor(n)<=Math.floor(i.start+r)&&e.gd()})}function Jp(e){if(e.A&&e.M){var t=e.A.g,n="playing";e.M.g==La?n="buffering":e.Uc()?n="ended":e.h.paused&&(n="paused");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(pn("statechanged",n)))}}function j_(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.Sg();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.Nd(i,!1):r==1&&t!==e.K.sc()&&e.gd()}if(n&&(n=e.Ja(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var s=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var o=e.g.streaming.liveSync.targetLatency,a=o+i,u=Math.max(0,o-i),c=e.g.streaming.liveSync.maxPlaybackRate,h=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(o=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?a=e.i.serviceDescription.targetLatency+i:e.i.serviceDescription.maxLatency!=null&&(a=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?u=Math.max(0,e.i.serviceDescription.targetLatency-i):e.i.serviceDescription.minLatency!=null&&(u=e.i.serviceDescription.minLatency),c=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,h=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.P||typeof o!="number"||(e.P=o);var p=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.Na&&e.P!==null&&typeof o=="number"&&e.Qd<p&&Date.now()-e.Na>1e3*s&&(s=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.P=Math.max(e.P-(o-s)/2,s+i),e.Na=Date.now()),r&&e.P!==null&&(a=e.P+i,u=e.P-i),o=n.end-e.h.currentTime,i=0,e.m==ar&&(r=e.h.buffered,0<r.length&&(i=r.end(r.length-1),i=Math.max(c,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=1e3*e.g.streaming.liveSync.panicThreshold,s=Date.now()-e.M.h,n&&!h&&(h=e.g.streaming.liveSync.minPlaybackRate),n&&h&&s<=r?t!=h&&e.Nd(h,!1):a!=null&&c&&o-i>a?(t!=c&&e.Nd(c,!1),e.Na=null):u!=null&&h&&o-i<u?(t!=h&&e.Nd(h,!1),e.Na=null):t!==e.K.sc()&&(e.gd(),e.Na=Date.now())}}function Pd(e){if(e.h){var t=function(r,s){var o=o===void 0?Number.EPSILON:o;if(r===s)o=!0;else{var a=Math.abs(r-s);o=a<=o?!0:o!==Number.EPSILON?Math.abs(a-o)<=Number.EPSILON:!1}return(o||s>r)&&e.Ye<r?(e.Ye=r,!0):!1},n=e.Ja();if(n=n.end-n.start,n=0<n?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var i=pn("started");else t(25,n)?i=pn("firstquartile"):t(50,n)?i=pn("midpoint"):t(75,n)?i=pn("thirdquartile"):(t(100,n)&&(i=pn("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.Uc()&&e.h.pause());i&&e.dispatchEvent(i)}}}function Qo(e){try{u0(e.xe,e.i)}catch(n){return Ja(e,n),!1}var t=Uc(e.i.variants);return t=e.W.create(t),e.o.setVariants(Array.from(t.values())),!0}function Qa(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var s;(s=Qo(e)?e.o.chooseVariant():null)&&gl(e,s,r,t,n,i)}function gl(e,t,n,i,r,s){s=s===void 0?!1:s;var o=e.j.l;if(t==o)i&&J0(e.j,t,i,r,!0);else{var a=e.A.h;if(a.h!=t&&(a.h=t,a.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),J0(e.j,t,i,r,s,n),i=null,o&&(i=Uo(o)),o=Uo(t),o.active=!0,e.O&&(r=e.O,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),s=0,a=-1,t.mimeType){case"video/webm":s=1;break;case"video/mp4":s=2}switch(e.Ug()){case"DASH":a=1;break;case"HLS":a=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(s),r.j||r.g.setStreamingFormat(a))}n?(n=new Map().set("oldTrack",i).set("newTrack",o),n=pn("adaptation",n),Jo(e,n)):V_(e,i,o),H_(e,i,o)}}function F_(e,t){var n=Array.from(e.h.audioTracks).find(function(i){return i.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=zh(n),t=zh(t),V_(e,n,t),H_(e,n,t))}function Ni(e){var t=pn("trackschanged");Jo(e,t),G_(e)}function V_(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=pn("variantchanged",t),Jo(e,t)}function H_(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&G_(e)}function G_(e){var t=pn("audiotrackschanged");Jo(e,t)}function Od(e){var t=pn("textchanged");Jo(e,t)}function z_(e){var t=pn("texttrackvisibility");Jo(e,t)}function K_(e){e.g.abr.enabled||Zp(e);var t=new Map().set("newStatus",e.g.abr.enabled);Jo(e,pn("abrstatuschanged",t))}function yl(e){var t=e.vc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Zp(e,t){if(t=t===void 0?!0:t,e.m==mi){e.Je.stop();for(var n=v(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&Qo(e)}}d.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Nr||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(a){var u=a[e.type];return u&&u.id!==e.id&&!a.disabledUntilTime?e.type=="audio"?e.language===u.language:!0:!1})){for(var n=!1,i=!1,r=v(this.i.variants),s=r.next();!s.done;s=r.next()){s=s.value;var o=s[e.type];o&&(o.id===e.id?(s.disabledUntilTime=Date.now()/1e3+t,n=!0):o.trickModeVideo&&o.trickModeVideo.id==e.id&&(i=!0))}return!n&&i?!1:(this.Je.ua(1),t=this.Fb().video.reduce(function(a,u){return a+u.end-u.start},0),Qa(this,!1,t,!0,!1),!0)}return!1};function Ja(e,t){var n,i,r,s;return X(function(o){switch(o.g){case 1:if(e.m==Nr)return o.return();if(t.severity===1&&e.A.K++,n=!0,!(e.sa&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){o.s(2);break}return At()&&t.code==3016?o.return():(ve(o,3),T(o,pd(e.j),5));case 5:i=o.h,n=!i,i&&(r=pn("mediasourcerecovered"),e.dispatchEvent(r)),Me(o,2);break;case 3:Ce(o),n=!0;case 2:if(!n)return o.return();t.severity===2&&Zp(e,!1),s=pn("error",new Map().set("detail",t)),e.dispatchEvent(s),s.defaultPrevented&&(t.handled=!0),H(o)}})}d.addFont=function(e,t){var n,i,r,s,o;return X(function(a){if(a.g==1)return"fonts"in document&&"FontFace"in _?T(a,document.fonts.ready,3):a.s(0);if(!("entries"in document.fonts))return a.return();for(n=function(u){u=u.entries();for(var c=[],h=u.next();h.done===!1;)c.push(h.value),h=u.next();return c},i=v(n(document.fonts)),r=i.next();!r.done;r=i.next())if(s=r.value,s.family==e&&s.display=="swap")return a.return();o=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(o),H(a)})};function vl(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(pn(t,e))}function q_(e,t,n,i){i=i===void 0?!1:i,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(pn(i?"audiotrackchanged":"mediaqualitychanged",t))}function em(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new g(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new g(2,3,3016,n,t,e.h.error.message))}function tm(e,t,n){0<t&&(e.U()||e.Ch(t)),t=e.getDuration(),n<t&&(e.U()||e.bb(n))}function Jo(e,t){X(function(n){if(n.g==1)return T(n,Promise.resolve(),2);e.m!=Nr&&e.dispatchEvent(t),H(n)})}function W_(e){var t=new Set;e=v(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(un(n.language)):t.add("und");return t}function X_(e){var t=new Map,n=new Map;e=v(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r="und",s=[];i.language&&(r=un(i.language)),i.type=="variant"?s=i.audioRoles:s=i.roles,s&&s.length||(s=[""]),t.has(r)||t.set(r,new Set),s=v(s);for(var o=s.next();!o.done;o=s.next())o=o.value,t.get(r).add(o),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(o,i.label))}var a=[];return t.forEach(function(u,c){u=v(u);for(var h=u.next();!h.done;h=u.next()){h=h.value;var p=null;n.has(c)&&n.get(c).has(h)&&(p=n.get(c).get(h)),a.push({language:c,role:h,label:p})}}),a}d.Qa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},d.Uc=function(){return!this.h||this.h.ended?!0:this.sa&&!this.U()&&this.h.currentTime>=this.Ja().end},G("shaka.Player",Re),Re.prototype.isEnded=Re.prototype.Uc,Re.prototype.isRemotePlayback=Re.prototype.Qa,Re.prototype.addFont=Re.prototype.addFont,Re.prototype.setVideoContainer=Re.prototype.Dh,Re.prototype.getFetchedPlaybackInfo=Re.prototype.pi,Re.prototype.getManifestParserFactory=Re.prototype.wi,Re.prototype.getManifest=Re.prototype.Jf,Re.prototype.retryStreaming=Re.prototype.gg,Re.prototype.setMaxHardwareResolution=Re.prototype.Fj,Re.prototype.addChaptersTrack=Re.prototype.Rh,Re.prototype.addThumbnailsTrack=Re.prototype.Th,Re.prototype.addTextTrackAsync=Re.prototype.Sh,Re.prototype.getStats=Re.prototype.getStats,Re.prototype.getBufferedInfo=Re.prototype.Fb,Re.prototype.getSegmentAvailabilityDuration=Re.prototype.ee,Re.prototype.getPresentationStartTimeAsDate=Re.prototype.Xg,Re.prototype.getPlayheadTimeAsDate=Re.prototype.Ai,Re.prototype.setTextTrackVisibility=Re.prototype.Ah,Re.prototype.getChapters=Re.prototype.ki,Re.prototype.getChaptersTracks=Re.prototype.li,Re.prototype.isTextTrackVisible=Re.prototype.Rf,Re.prototype.selectVariantsByLabel=Re.prototype.Aj,Re.prototype.selectTextLanguage=Re.prototype.jg,Re.prototype.selectAudioLanguage=Re.prototype.th,Re.prototype.getTextLanguages=Re.prototype.Gi,Re.prototype.getAudioLanguages=Re.prototype.hi,Re.prototype.getTextLanguagesAndRoles=Re.prototype.Hi,Re.prototype.getAudioLanguagesAndRoles=Re.prototype.ii,Re.prototype.getAudioTracks=Re.prototype.getAudioTracks,Re.prototype.selectAudioTrack=Re.prototype.zj,Re.prototype.selectVariantTrack=Re.prototype.Ee,Re.prototype.selectTextTrack=Re.prototype.uh,Re.prototype.getThumbnails=Re.prototype.Ji,Re.prototype.getAllThumbnails=Re.prototype.gi,Re.prototype.getImageTracks=Re.prototype.si,Re.prototype.getTextTracks=Re.prototype.vc,Re.prototype.getVariantTracks=Re.prototype.Rb,Re.prototype.cancelTrickPlay=Re.prototype.gd,Re.prototype.trickPlay=Re.prototype.Nd,Re.prototype.getPlaybackRate=Re.prototype.gb,Re.prototype.isBuffering=Re.prototype.Qf,Re.prototype.getKeyStatuses=Re.prototype.be,Re.prototype.getActiveSessionsMetadata=Re.prototype.If,Re.prototype.getExpiration=Re.prototype.pd,Re.prototype.drmInfo=Re.prototype.drmInfo,Re.prototype.keySystem=Re.prototype.keySystem,Re.prototype.isFullyLoaded=Re.prototype.Ti,Re.prototype.goToLive=Re.prototype.Pi,Re.prototype.seekRange=Re.prototype.Ja,Re.prototype.isAudioOnly=Re.prototype.Si,Re.prototype.isInProgress=Re.prototype.yc,Re.prototype.isLive=Re.prototype.U,Re.prototype.getAdManager=Re.prototype.Rg,Re.prototype.getAssetUri=Re.prototype.Qc,Re.prototype.getNetworkingEngine=Re.prototype.yb,Re.prototype.getMediaElement=Re.prototype.zi,Re.prototype.getManifestType=Re.prototype.Ug,Re.prototype.getLoadMode=Re.prototype.vi,Re.prototype.resetConfiguration=Re.prototype.uj,Re.prototype.getBufferFullness=Re.prototype.Sg,Re.prototype.getNonDefaultConfiguration=Re.prototype.Wg,Re.prototype.getConfigurationForLowLatency=Re.prototype.mi,Re.prototype.getConfiguration=Re.prototype.getConfiguration,Re.prototype.configurationForLowLatency=Re.prototype.di,Re.prototype.configure=Re.prototype.configure,Re.prototype.releaseAllMutexes=Re.prototype.qj,Re.prototype.destroyAllPreloads=Re.prototype.rf,Re.prototype.preload=Re.prototype.preload,Re.prototype.detachAndSavePreload=Re.prototype.Ng,Re.prototype.unloadAndSavePreload=Re.prototype.Ij,Re.prototype.load=Re.prototype.load,Re.prototype.updateStartTime=Re.prototype.Mj,Re.prototype.unload=Re.prototype.kc,Re.prototype.detach=Re.prototype.detach,Re.prototype.attachCanvas=Re.prototype.Wh,Re.prototype.attach=Re.prototype.Lb,Re.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,s,o;return X(function(a){switch(a.g){case 1:if(t={},!e){a.s(2);break}return T(a,x2(),3);case 3:t=a.h;case 2:return n=P2(),i=aI(),T(a,ii(),4);case 4:return r=a.h,s={manifest:n,media:i,drm:t,hardwareResolution:r},o=$_,o.forEach(function(u,c){s[c]=u()}),a.return(s)}})},Re.isBrowserSupported=function(){return _.Promise||Ne("A Promise implementation or polyfill is required"),_.Promise&&_.Uint8Array&&Array.prototype.forEach&&!an("Trident/")?be()?!0:ze("application/x-mpegurl"):!1},Re.setAdManagerFactory=function(e){Ud=e},Re.registerSupportPlugin=S_,Re.prototype.destroy=Re.prototype.destroy;var Nr=0,Nd=1,mi=2,ar=3;Re.LoadMode={DESTROYED:Nr,NOT_LOADED:Nd,MEDIA_SOURCE:mi,SRC_EQUALS:ar},Re.version="v4.14.10";var Y_=["4","14"];Gi=new function(e){this.g=e,this.i=fa,this.h=Si}(new ki(Number(Y_[0]),Number(Y_[1])));var $_=new Map,Ud=null;function Q_(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function rC(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function pt(e,t,n){var i=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new _t,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}d=pt.prototype,d.needsSkipUI=function(){return!1},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!0},d.getDuration=function(){return this.g.getDuration()},d.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},d.getRemainingTime=function(){return this.h.getRemainingTime()},d.isPaused=function(){return this.i},d.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.h.getAdSkippableState()},d.skip=function(){return this.h.skip()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.resume()},d.getVolume=function(){return this.h.getVolume()},d.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},d.isMuted=function(){return this.h.getVolume()==0},d.isLinear=function(){return this.g.isLinear()},d.resize=function(e,t){var n=!1,i=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},d.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return this.g.getMediaUrl()},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.g=null},G("shaka.ads.ClientSideAd",pt),pt.prototype.release=pt.prototype.release,pt.prototype.getPodIndex=pt.prototype.getPodIndex,pt.prototype.getTimeOffset=pt.prototype.getTimeOffset,pt.prototype.getMediaUrl=pt.prototype.getMediaUrl,pt.prototype.getAdvertiserName=pt.prototype.getAdvertiserName,pt.prototype.getCreativeAdId=pt.prototype.getCreativeAdId,pt.prototype.getAdId=pt.prototype.getAdId,pt.prototype.getVastMediaWidth=pt.prototype.getVastMediaWidth,pt.prototype.getVastMediaHeight=pt.prototype.getVastMediaHeight,pt.prototype.getVastMediaBitrate=pt.prototype.getVastMediaBitrate,pt.prototype.getDescription=pt.prototype.getDescription,pt.prototype.getTitle=pt.prototype.getTitle,pt.prototype.getPositionInSequence=pt.prototype.getPositionInSequence,pt.prototype.getSequenceLength=pt.prototype.getSequenceLength,pt.prototype.setMuted=pt.prototype.setMuted,pt.prototype.resize=pt.prototype.resize,pt.prototype.isLinear=pt.prototype.isLinear,pt.prototype.isMuted=pt.prototype.isMuted,pt.prototype.setVolume=pt.prototype.setVolume,pt.prototype.getVolume=pt.prototype.getVolume,pt.prototype.play=pt.prototype.play,pt.prototype.pause=pt.prototype.pause,pt.prototype.skip=pt.prototype.skip,pt.prototype.canSkipNow=pt.prototype.canSkipNow,pt.prototype.getTimeUntilSkippable=pt.prototype.getTimeUntilSkippable,pt.prototype.isSkippable=pt.prototype.isSkippable,pt.prototype.isPaused=pt.prototype.isPaused,pt.prototype.getRemainingTime=pt.prototype.getRemainingTime,pt.prototype.getMinSuggestedDuration=pt.prototype.getMinSuggestedDuration,pt.prototype.getDuration=pt.prototype.getDuration,pt.prototype.isUsingAnotherMediaElement=pt.prototype.isUsingAnotherMediaElement,pt.prototype.hasCustomClick=pt.prototype.hasCustomClick,pt.prototype.isClientRendering=pt.prototype.isClientRendering,pt.prototype.needsSkipUI=pt.prototype.needsSkipUI;function _n(){}function J_(e,t){var n=[];e=v(Jt(e,"Ad"));for(var i=e.next();!i.done;i=e.next())if((i=Nn(i.value,"InLine"))&&(i=Nn(i,"Creatives"))){i=v(Jt(i,"Creative"));for(var r=i.next();!r.done;r=i.next()){r=r.value;var s=Nn(r,"Linear");if(s&&sC(n,t,s),r=Nn(r,"NonLinearAds")){r=Jt(r,"NonLinear"),r=v(r);for(var o=r.next();!o.done;o=r.next())e:{s=n;var a=t,u=o.value,c=Nn(u,"StaticResource");if(c)o=c.attributes.creativeType;else{if(c=Nn(u,"HTMLResource"),!c)break e;o="text/html"}if(c=or(c)){o==="text/html"&&(c="data:text/html;charset=UTF-8,"+encodeURIComponent(c));var h=Tt(u,"width",Ai)||Tt(u,"expandedWidth",Ai),p=Tt(u,"height",Ai)||Tt(u,"expandedHeight",Ai);if(h||p){var E=null;(u=u.attributes.minSuggestedDuration)&&(E=Ea(u)),u=0,a!=null&&(u=a),s.push({id:null,groupId:null,startTime:u,endTime:null,uri:c,mimeType:o,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:E,once:!0,pre:a==null,post:a==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:h||0,y:p||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}}}return n}function sC(e,t,n){var i=0;t!=null&&(i=t);var r=null;if(n.attributes.skipoffset&&(r=Ea(n.attributes.skipoffset),isNaN(r)&&(r=null)),n=Nn(n,"MediaFiles")){var s=Jt(n,"MediaFile");for(n=s,s=s.filter(function(a){return a.attributes.delivery=="streaming"}),s.length&&(n=s),n=n.sort(function(a,u){return(parseInt(u.attributes.height,10)||0)-(parseInt(a.attributes.height,10)||0)}),n=v(n),s=n.next();!s.done;s=n.next())if(s=s.value,!s.attributes.apiFramework){var o=or(s);if(o){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:o,mimeType:s.attributes.type||null,isSkippable:r!=null,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}G("shaka.ads.Utils",_n),_n.ADS_LOADED="ads-loaded",_n.AD_STARTED="ad-started",_n.AD_FIRST_QUARTILE="ad-first-quartile",_n.AD_MIDPOINT="ad-midpoint",_n.AD_THIRD_QUARTILE="ad-third-quartile",_n.AD_COMPLETE="ad-complete",_n.AD_STOPPED="ad-stopped",_n.AD_SKIPPED="ad-skipped",_n.AD_VOLUME_CHANGED="ad-volume-changed",_n.AD_MUTED="ad-muted",_n.AD_PAUSED="ad-paused",_n.AD_RESUMED="ad-resumed",_n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",_n.CUEPOINTS_CHANGED="ad-cue-points-changed",_n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",_n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",_n.AD_CLICKED="ad-clicked",_n.AD_PROGRESS="ad-progress",_n.AD_BUFFERING="ad-buffering",_n.AD_IMPRESSION="ad-impression",_n.AD_DURATION_CHANGED="ad-duration-changed",_n.AD_CLOSED="ad-closed",_n.AD_LOADED="ad-loaded",_n.ALL_ADS_COMPLETED="all-ads-completed",_n.AD_LINEAR_CHANGED="ad-linear-changed",_n.AD_METADATA="ad-metadata",_n.AD_RECOVERABLE_ERROR="ad-recoverable-error",_n.AD_ERROR="ad-error",_n.AD_BREAK_READY="ad-break-ready",_n.AD_INTERACTION="ad-interaction",_n.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",_n.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",_n.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Bd(e,t,n,i,r){var s=this;this.u=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=r,this.j=null,this.h=new _t,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.u,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.14.10"),this.g=null,this.B=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(o){oC(s,o)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(o){Z_(s,o)}),this.h.D(this.i,"ended",function(){s.m.contentComplete()}),this.h.qa(this.i,"play",function(){s.F=!0})}Bd.prototype.configure=function(e){this.o=e},Bd.prototype.stop=function(){this.g&&this.g.stop(),this.u&&so(this.u)},Bd.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function Z_(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new qe("ad-error",t)),Fd(e,null),e.l(new qe("ad-cue-points-changed",new Map().set("cuepoints",[])))}function oC(e,t){if(e.l(new qe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new qe("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=v(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.l(new qe("ad-cue-points-changed",new Map().set("cuepoints",t)))}aC(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,jd(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,jd(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in _?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,jd(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,jd(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.qa(e.i,"play",function(){e.F=!0,e.g.start()})}catch{Fd(e,null)}}function jd(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function aC(e){function t(n,i){n=new Map().set("originalEvent",n),e.l(new qe(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Z_(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){e1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){e1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Fd(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Fd(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function e1(e,t){var n=t.getAd();n?(e.j=new pt(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new qe("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new qe("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ne("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Fd(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new qe("ad-content-resume-requested")),e.l(new qe("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function mt(e,t,n,i,r,s){this.g=e,this.i=t,this.j=(this.h=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.A=n,this.o=i,this.m=r,this.u=s,this.B=t.overlay}d=mt.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return this.u},d.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return this.h&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},d.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},d.canSkipNow=function(){return this.h&&this.getTimeUntilSkippable()==0},d.skip=function(){this.canSkipNow()&&this.A()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.B==null},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.o},d.getPositionInSequence=function(){return this.m},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getAdId=function(){return this.i.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.i.uri},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.g=null},G("shaka.ads.InterstitialAd",mt),mt.prototype.release=mt.prototype.release,mt.prototype.getPodIndex=mt.prototype.getPodIndex,mt.prototype.getTimeOffset=mt.prototype.getTimeOffset,mt.prototype.getMediaUrl=mt.prototype.getMediaUrl,mt.prototype.getAdvertiserName=mt.prototype.getAdvertiserName,mt.prototype.getCreativeAdId=mt.prototype.getCreativeAdId,mt.prototype.getAdId=mt.prototype.getAdId,mt.prototype.getVastMediaWidth=mt.prototype.getVastMediaWidth,mt.prototype.getVastMediaHeight=mt.prototype.getVastMediaHeight,mt.prototype.getVastMediaBitrate=mt.prototype.getVastMediaBitrate,mt.prototype.getDescription=mt.prototype.getDescription,mt.prototype.getTitle=mt.prototype.getTitle,mt.prototype.getPositionInSequence=mt.prototype.getPositionInSequence,mt.prototype.getSequenceLength=mt.prototype.getSequenceLength,mt.prototype.setMuted=mt.prototype.setMuted,mt.prototype.resize=mt.prototype.resize,mt.prototype.isLinear=mt.prototype.isLinear,mt.prototype.isMuted=mt.prototype.isMuted,mt.prototype.setVolume=mt.prototype.setVolume,mt.prototype.getVolume=mt.prototype.getVolume,mt.prototype.play=mt.prototype.play,mt.prototype.pause=mt.prototype.pause,mt.prototype.skip=mt.prototype.skip,mt.prototype.canSkipNow=mt.prototype.canSkipNow,mt.prototype.getTimeUntilSkippable=mt.prototype.getTimeUntilSkippable,mt.prototype.isSkippable=mt.prototype.isSkippable,mt.prototype.isPaused=mt.prototype.isPaused,mt.prototype.getRemainingTime=mt.prototype.getRemainingTime,mt.prototype.getMinSuggestedDuration=mt.prototype.getMinSuggestedDuration,mt.prototype.getDuration=mt.prototype.getDuration,mt.prototype.isUsingAnotherMediaElement=mt.prototype.isUsingAnotherMediaElement,mt.prototype.hasCustomClick=mt.prototype.hasCustomClick,mt.prototype.isClientRendering=mt.prototype.isClientRendering,mt.prototype.needsSkipUI=mt.prototype.needsSkipUI;function gt(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}d=gt.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return-1},d.isPaused=function(){return!1},d.isSkippable=function(){return!1},d.getTimeUntilSkippable=function(){return 0},d.canSkipNow=function(){return!1},d.skip=function(){},d.pause=function(){},d.play=function(){},d.getVolume=function(){return 1},d.setVolume=function(){},d.isMuted=function(){return!1},d.isLinear=function(){return this.i},d.resize=function(){},d.setMuted=function(){},d.getSequenceLength=function(){return this.j},d.getPositionInSequence=function(){return this.h},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getAdId=function(){return this.g.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.g.uri},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){},G("shaka.ads.InterstitialStaticAd",gt),gt.prototype.release=gt.prototype.release,gt.prototype.getPodIndex=gt.prototype.getPodIndex,gt.prototype.getTimeOffset=gt.prototype.getTimeOffset,gt.prototype.getMediaUrl=gt.prototype.getMediaUrl,gt.prototype.getAdvertiserName=gt.prototype.getAdvertiserName,gt.prototype.getCreativeAdId=gt.prototype.getCreativeAdId,gt.prototype.getAdId=gt.prototype.getAdId,gt.prototype.getVastMediaWidth=gt.prototype.getVastMediaWidth,gt.prototype.getVastMediaHeight=gt.prototype.getVastMediaHeight,gt.prototype.getVastMediaBitrate=gt.prototype.getVastMediaBitrate,gt.prototype.getDescription=gt.prototype.getDescription,gt.prototype.getTitle=gt.prototype.getTitle,gt.prototype.getPositionInSequence=gt.prototype.getPositionInSequence,gt.prototype.getSequenceLength=gt.prototype.getSequenceLength,gt.prototype.setMuted=gt.prototype.setMuted,gt.prototype.resize=gt.prototype.resize,gt.prototype.isLinear=gt.prototype.isLinear,gt.prototype.isMuted=gt.prototype.isMuted,gt.prototype.setVolume=gt.prototype.setVolume,gt.prototype.getVolume=gt.prototype.getVolume,gt.prototype.play=gt.prototype.play,gt.prototype.pause=gt.prototype.pause,gt.prototype.skip=gt.prototype.skip,gt.prototype.canSkipNow=gt.prototype.canSkipNow,gt.prototype.getTimeUntilSkippable=gt.prototype.getTimeUntilSkippable,gt.prototype.isSkippable=gt.prototype.isSkippable,gt.prototype.isPaused=gt.prototype.isPaused,gt.prototype.getRemainingTime=gt.prototype.getRemainingTime,gt.prototype.getMinSuggestedDuration=gt.prototype.getMinSuggestedDuration,gt.prototype.getDuration=gt.prototype.getDuration,gt.prototype.isUsingAnotherMediaElement=gt.prototype.isUsingAnotherMediaElement,gt.prototype.hasCustomClick=gt.prototype.hasCustomClick,gt.prototype.isClientRendering=gt.prototype.isClientRendering,gt.prototype.needsSkipUI=gt.prototype.needsSkipUI;function t1(e,t,n,i){var r=this;this.T=null,this.A=e,this.H=t,this.g=n,this.F=null,this.B=!0,this.h=this.g,this.i=i,this.W=new Set,this.G=new Set,this.C=new Map,this.L=new Map,this.j=new Re,sm(this),this.I=new _t,this.l=new _t,this.K=!1,this.ea=this.m=this.u=this.o=null,this.fa=!1,this.O=-1,this.$=function(){if(!r.K&&r.o&&!r.H.Qa()){r.o=r.g.currentTime,r.u&&!r.u.pre&&!r.u.post&&r.o<r.u.startTime&&(r.u=null);var s=Sl(r);s&&Vd(r,s,1,1,Date.now())}},this.Z=function(){if(!(r.K||r.o||r.H.Qa())){r.o=r.g.currentTime;var s=Sl(r,!0);s&&Vd(r,s,1,1,Date.now())}},this.P=new se(this.$),this.M=new se(function(){var s,o,a,u,c,h,p,E,A,M,R;return X(function(C){switch(C.g){case 1:if(!r.G.size||r.o==null){C.s(0);break}if(s=r.H.m,s==Nr||s==Nd)return C.return();o=!1,a=Array.from(r.G),u=r.H.Ja(),c=v(a),h=c.next();case 3:if(h.done){C.s(5);break}if(p=h.value,p==r.u){C.s(4);break}if(E=p.endTime||p.startTime,!(1<=u.start-E)){A=p.startTime-r.o,0<A&&10>=A&&(!r.C.has(p)&&i1(p)&&r.C.set(p,r.j.preload(p.uri,null,p.mimeType||void 0)),r1(r,p)),C.s(4);break}if(!r.C.has(p)){C.s(7);break}return T(C,r.C.get(p),8);case 8:(M=C.h)&&M.destroy(),r.C.delete(p);case 7:s1(r,p),R=JSON.stringify(p),r.W.has(R)&&r.W.delete(R),r.G.delete(p),nm(r),p.overlay||(o=!0);case 4:h=c.next(),C.s(3);break;case 5:o&&Hd(r),H(C)}})})}d=t1.prototype,d.configure=function(e){this.T=e,im(this)};function uC(e){if(!e.fa&&e.G.size){if(e.I.D(e.g,"playing",e.Z),e.I.D(e.g,"timeupdate",e.Z),e.I.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!Gn()){var t=e.g,n=function(){e.O!=-1&&(e.$(),e.O!=-1&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.P.ua(.025);e.M&&e.M.ua(1),e.fa=!0}}function nm(e){e.fa&&!e.G.size&&(e.I.Ka(e.g,"playing",e.Z),e.I.Ka(e.g,"timeupdate",e.Z),e.I.Ka(e.g,"ended",e.$),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.P&&e.P.stop(),e.M&&e.M.stop(),e.fa=!1)}function im(e){if(e.A&&e.T&&!e.K){var t=e.T.supportsMultipleMediaElements,n=e.g;n.webkitSupportsFullscreen&&n.webkitDisplayingFullscreen&&(t=!1),e.B==t&&(e.B=!t,e.B?(e.h=e.g,e.F&&(e.F.parentElement&&e.A.removeChild(e.F),e.F=null)):(e.F||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.F=t),e.h=e.F))}}d.stop=function(){if(this.l&&this.l.Ra(),this.W.clear(),this.G.clear(),this.j.rf(),this.C.size){var e=Array.from(this.C.values());e=v(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.C.clear(),this.L.size)for(e=Array.from(this.L.keys()),e=v(e),t=e.next();!t.done;t=e.next())s1(this,t.value);this.L.clear(),this.j.detach(),this.K=!1,this.u=this.o=null,this.B=!0,this.h=this.g,this.F=null,rm(this),nm(this),this.A&&so(this.A),this.m&&(this.m.stop(),this.m=null)},d.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.P&&(this.P.stop(),this.P=null),this.M&&(this.M.stop(),this.M=null),this.j.destroy()},d.Kf=function(){return this.j};function lC(e,t){var n;X(function(i){if(i.g==1)return sm(e),T(i,hC(e,t),2);n=i.h,n.length?_l(e,n):Ne("Unsupported HLS interstitial",t),H(i)})}function cC(e,t){var n=Nn(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,s=n.attributes.loop=="true",o=Tt(n,"z",Ai);if(i&&o!=0){var a={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920,y:1080}},u=Nn(n,"Viewport"),c=Nn(n,"TopLeft"),h=Nn(n,"Size");if(u&&c&&h){if(a=Tt(u,"x",Ai),a==null||(u=Tt(u,"y",Ai),u==null))return;var p=Tt(c,"x",Ai);if(p==null||(c=Tt(c,"y",Ai),c==null))return;var E=Tt(h,"x",Ai);if(E==null||(h=Tt(h,"y",Ai),h==null))return;a={viewport:{x:a,y:u},topLeft:{x:p,y:c},size:{x:E,y:h}}}h=Nn(n,"SqueezeCurrent"),n=null,h&&(h=Tt(h,"percentage",Ou))&&(n={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*h,y:1080*h}}),_l(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:s,overlay:a,displayOnBackground:o==-1,currentVideo:n,background:null}])}}d.addAdUrlInterstitial=function(e){var t=this,n,i,r,s,o,a,u,c,h;return X(function(p){switch(p.g){case 1:return n={type:12},T(p,om(t,e,n),2);case 2:if(i=p.h,r=Pu(i,"VAST,vmap:VMAP"),!r)throw new g(2,10,10007);if(s=[],r.tagName=="VAST"){s=J_(r,t.o),p.s(3);break}if(r.tagName!="vmap:VMAP"){p.s(3);break}for(var E=[],A=v(Jt(r,"vmap:AdBreak")),M=A.next();!M.done;M=A.next()){var R=M.value,C=R.attributes.timeOffset;C&&(M=null,C=="start"?M=0:C=="end"?M=1/0:M=Ea(C),(R=Nn(R,"vmap:AdSource"))&&(R=Nn(R,"vmap:AdTagURI"))&&(R=Fn(R))&&E.push({time:M,uri:R}))}o=v(E),a=o.next();case 5:if(a.done){p.s(3);break}return u=a.value,T(p,om(t,u.uri,n),8);case 8:if(c=p.h,h=Pu(c,"VAST"),!h)throw new g(2,10,10007);s.push.apply(s,z(J_(h,u.time))),a=o.next(),p.s(5);break;case 3:_l(t,s),H(p)}})};function _l(e,t){var n,i,r,s,o,a,u,c;X(function(h){switch(h.g){case 1:n=!1,i=v(t),r=i.next();case 2:if(r.done){h.s(4);break}if(s=r.value,!s.uri){Ne("Missing URL in interstitial",s),h.s(3);break}if(s.mimeType){h.s(5);break}return ve(h,6),o=e.j.yb(),T(h,$o(s.uri,o,e.H.getConfiguration().streaming.retryParameters),8);case 8:s.mimeType=h.h,Me(h,5);break;case 6:Ce(h);case 5:if(a=s.id||JSON.stringify(s),e.W.has(a)){h.s(3);break}s.loop&&!s.overlay&&Ne("Loop is only supported in overlay interstitials",s),s.overlay||(n=!0),e.W.add(a),e.G.add(s),u=!1,s.pre&&e.o==null?u=!0:s.startTime!=0||s.canJump?e.o!=null&&(c=s.startTime-e.o,0<c&&10>=c&&(u=!0)):u=!0,u&&(!e.C.has(s)&&i1(s)&&e.C.set(s,e.j.preload(s.uri,null,s.mimeType||void 0)),r1(e,s));case 3:r=i.next(),h.s(2);break;case 4:n&&Hd(e),uC(e),H(h)}})}function Sl(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var i=0,r=null;if(e.G.size&&e.o!=null){var s=e.g.ended,o=Array.from(e.G).sort(function(h,p){return p.startTime-h.startTime}),a=o;for(a=t?o.filter(function(h){return h.pre}):s?o.filter(function(h){return h.post}):o.filter(function(h){return!h.pre&&!h.post}),o=v(a),a=o.next();!a.done;a=o.next()){a=a.value;var u=!1;if(t)u=a.pre;else if(s)u=a.post;else if(!a.pre&&!a.post){var c=e.o-Math.round(1e3*a.startTime)/1e3;0<c&&(1>=c||!a.canJump)&&(u=!(n==null&&e.u&&!e.u.pre&&!e.u.post&&e.u.startTime>=a.startTime))}u&&(!e.u||a.startTime>=e.u.startTime)&&(i==(n||0)?r=a:r&&!a.canJump&&.001<Math.round(1e3*a.startTime)/1e3-Math.round(1e3*r.startTime)/1e3&&(r=a,i=0),i++)}}return r}function Vd(e,t,n,i,r,s){s=s===void 0?0:s,e.u=t,im(e),!e.h.parentElement&&e.A&&e.A.appendChild(e.h),i==1&&n==1&&(n=Array.from(e.G).filter(function(o){return t.pre?o.pre==t.pre:t.post?o.post==t.post:.001>Math.abs(o.startTime-t.startTime)}).length),t.once&&(s++,e.G.delete(t),nm(e),t.overlay||Hd(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?dC(e,t,n,i,s):Ne("Unsupported interstitial",t):e.B&&t.overlay?Ne("Unsupported interstitial",t):fC(e,t,n,i,r,s)}function dC(e,t,n,i,r){function s(){e.m&&(e.m.stop(),e.m=null),e.A.removeChild(u),rm(e,t),e.i(new qe("ad-stopped"));var E=Sl(e,t.pre,i-r);E?(e.l.Ra(),Vd(e,E,n,++i,Date.now(),r)):e.K=!1}var o=t.overlay,a=t.mimeType=="text/html"?"iframe":"img",u=document.createElement(a);u.style.objectFit="contain",u.style.position="absolute",u.style.border="none",n1(e,t),e.i(new qe("ad-started",new Map().set("ad",new gt(t,n,i)))),a=="iframe"?u.src=t.uri:(u.src=t.uri,u.onerror=function(E){e.i(new qe("ad-error",new Map().set("originalEvent",E))),s()});var c=o.viewport,h=o.topLeft;o=o.size,c.x==0&&c.y==0?(u.width=t.overlay.size.x,u.height=t.overlay.size.y,u.style.bottom="10%",u.style.left="0",u.style.right="0",u.style.width="100%",t.overlay.size.y||a!="iframe"||(u.style.height="auto")):(u.style.height=o.y/c.y*100+"%",u.style.left=h.x/c.x*100+"%",u.style.top=h.y/c.y*100+"%",u.style.width=o.x/c.x*100+"%"),e.A.appendChild(u);var p=Date.now();e.m&&e.m.stop(),e.m=new se(function(){t.playoutLimit&&(Date.now()-p)/1e3>t.playoutLimit?(e.i(new qe("ad-complete")),s()):t.endTime&&e.g.currentTime>t.endTime?(e.i(new qe("ad-complete")),s()):e.g.currentTime<t.startTime&&(e.i(new qe("ad-skipped")),s())}),t.playoutLimit&&!t.endTime?e.m.da(t.playoutLimit):t.endTime&&e.m.ua(.025),e.l.D(e.g,"seeked",function(){var E=e.g.currentTime;(E<t.startTime||t.endTime&&E>t.endTime)&&(e.m&&e.m.stop(),e.i(new qe("ad-skipped")),s())})}function fC(e,t,n,i,r,s){var o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W;X(function(q){switch(q.g){case 1:if(o=Date.now(),e.K=!0,!e.B||i!=1){q.s(2);break}return e.i(new qe("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),a=new rn,u=function(ne){return X(function(ie){if(ie.g==1)return ne.state!="detach"?ie.s(0):Gn()?T(ie,new Promise(function(me){return new se(me).da(.1)}),3):ie.s(3);a.resolve(),e.l.Ka(e.H,"onstatechange",u),H(ie)})},e.l.D(e.H,"onstatechange",u),T(q,a,2);case 2:return n1(e,t),e.B||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,c=t.overlay.viewport,h=t.overlay.topLeft,p=t.overlay.size,e.h.style.height=p.y/c.y*100+"%",e.h.style.left=h.x/c.x*100+"%",e.h.style.top=h.y/c.y*100+"%",e.h.style.width=p.x/c.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),E=!1,A=function(){if(!e.B&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var ne=Date.now();e.g.currentTime+=(ne-r)/1e3,r=ne}},M=function(ne){var ie,me;return X(function(le){if(le.g==1){if(A(),ie=Sl(e,t.pre,i-s),ne&&t.groupId)for(;ie&&ie.groupId==t.groupId;)i++,ie=Sl(e,t.pre,i-s);return e.m&&(!t.groupId||ie&&ie.groupId!=t.groupId)&&(e.m.stop(),e.m=null),rm(e,t),ie&&!ie.overlay?le.s(2):(t.post&&(e.o=null,e.u=null),e.B?T(le,e.j.detach(),4):T(le,e.j.kc(),4))}le.g!=2&&(e.B&&(me=t.resumeOffset,me==null&&(me=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.o||0):(Date.now()-r)/1e3),e.i(new qe("ad-content-resume-requested",new Map().set("offset",me)))),e.i(new qe("ad-stopped")),e.l.Ra(),e.K=!1,e.B?Hd(e):(e.h.style.display="none",A(),e.g.ended||e.g.play())),im(e),ie&&(e.i(new qe("ad-stopped")),e.l.Ra(),Vd(e,ie,n,++i,r,s)),H(le)})},R=function(ne){return X(function(ie){return E?ie.return():(E=!0,e.i(new qe("ad-error",new Map().set("originalEvent",ne))),T(ie,M(!1),0))})},C=function(){return X(function(ne){if(ne.g==1)return E?ne.return():(E=!0,T(ne,M(!1),2));e.i(new qe("ad-complete")),H(ne)})},e.ea=function(){return X(function(ne){return E?ne.return():(E=!0,e.i(new qe("ad-skipped")),T(ne,M(!0),0))})},b=new mt(e.h,t,e.ea,n,i,!e.B),e.B||(b.setMuted(e.g.muted),b.setVolume(e.g.volume)),e.i(new qe("ad-started",new Map().set("ad",b))),(U=b.canSkipNow())&&e.i(new qe("ad-skip-state-changed")),e.l.qa(e.j,"error",R),e.l.D(e.h,"timeupdate",function(){if(e.h.duration){var ne=b.canSkipNow();U!=ne&&0<b.getRemainingTime()&&0<b.getDuration()&&e.i(new qe("ad-skip-state-changed")),U=ne}}),e.l.qa(e.j,"firstquartile",function(){A(),e.i(new qe("ad-first-quartile"))}),e.l.qa(e.j,"midpoint",function(){A(),e.i(new qe("ad-midpoint"))}),e.l.qa(e.j,"thirdquartile",function(){A(),e.i(new qe("ad-third-quartile"))}),e.l.qa(e.j,"complete",C),e.l.D(e.h,"play",function(){e.i(new qe("ad-resumed"))}),e.l.D(e.h,"pause",function(){var ne=e.j.getConfiguration();e.h.currentTime>=ne.playRangeEnd?C():e.i(new qe("ad-paused"))}),e.l.D(e.h,"volumechange",function(){e.h.muted?e.i(new qe("ad-muted")):e.i(new qe("ad-volume-changed"))}),ve(q,4),sm(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&($=t.endTime-t.startTime,0<$&&e.j.configure("playRangeEnd",$)),t.playoutLimit&&!e.m&&(e.m=new se(function(){e.ea()}).da(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),T(q,e.j.Lb(e.h),6);case 6:return e.C.has(t)?T(q,e.C.get(t),10):T(q,e.j.load(t.uri,null,t.mimeType||void 0),8);case 10:return Q=q.h,e.C.delete(t),Q?T(q,e.j.load(Q),8):T(q,e.j.load(t.uri,null,t.mimeType||void 0),8);case 8:e.h.play(),re=(Date.now()-o)/1e3,e.i(new qe("ads-loaded",new Map().set("loadTime",re))),e.B&&e.g.play(),t.overlay&&(e.l.D(e.g,"seeking",function(){var ne=e.g.currentTime-t.startTime;.1<Math.abs(ne-e.h.currentTime)&&(e.h.currentTime=ne)}),e.l.D(e.g,"seeked",function(){var ne=e.g.currentTime;(ne<t.startTime||t.endTime&&ne>t.endTime)&&e.ea()})),Me(q,0);break;case 4:if(W=Ce(q),!e.K)return q.return();R(W),H(q)}})}function n1(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],s=n.topLeft.x/n.viewport.x*100;0<s&&100>=s&&(r.push("translateX("+s+"%)"),i=!1),s=n.topLeft.y/n.viewport.y*100,0<s&&100>=s&&(r.push("translateY("+s+"%)"),i=!1),s=n.size.x/n.viewport.x,1>s&&r.push("scaleX("+s+")"),n=n.size.y/n.viewport.y,1>s&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.A&&(e.A.style.pointerEvents="none",t.background&&(e.A.style.background=t.background)),e.F&&(e.F.style.background=t.overlay?"":"rgb(0, 0, 0)")}function rm(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.A&&(e.A.style.pointerEvents="",!t||t.background)&&(e.A.style.background=""),e.F&&(e.F.style.background="")}function hC(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt,rt,Yt,Nt,Dt,Lt,Xt,kt,jt;return X(function(St){switch(St.g){case 1:if(n=[],!t||(i=t.values.find(function(bt){return bt.key=="X-ASSET-URI"}),r=t.values.find(function(bt){return bt.key=="X-ASSET-LIST"}),!i&&!r))return St.return(n);if(s=null,(o=t.values.find(function(bt){return bt.key=="ID"}))&&(s=o.data),a=s==null?Math.floor(10*t.startTime)/10:t.startTime,(u=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(u=s==null?Math.floor(10*t.endTime)/10:t.endTime),c=t.values.find(function(bt){return bt.key=="X-RESTRICT"}),p=h=!0,c&&c.data&&(E=c.data,h=!E.includes("SKIP"),p=!E.includes("JUMP")),A=h?0:null,(M=t.values.find(function(bt){return bt.key=="X-ENABLE-SKIP-AFTER"}))&&(R=M.data,A=parseFloat(R),isNaN(A)&&(A=h?0:null)),C=null,(b=t.values.find(function(bt){return bt.key=="X-ENABLE-SKIP-FOR"}))&&(U=b.data,C=parseFloat(U),isNaN(A)&&(C=null)),$=null,(Q=t.values.find(function(bt){return bt.key=="X-RESUME-OFFSET"}))&&(re=Q.data,$=parseFloat(re),isNaN($)&&($=null)),W=null,(q=t.values.find(function(bt){return bt.key=="X-PLAYOUT-LIMIT"}))&&(ne=q.data,W=parseFloat(ne),isNaN(W)&&(W=null)),le=me=ie=!1,(pe=t.values.find(function(bt){return bt.key=="CUE"}))&&(ge=pe.data,ie=ge.includes("ONCE"),me=ge.includes("PRE"),le=ge.includes("POST")),_e=!1,(Ie=t.values.find(function(bt){return bt.key=="X-TIMELINE-OCCUPIES"}))?(Ee=Ie.data,_e=Ee.includes("RANGE")):!Q&&e.H.U()&&(_e=!me&&!le),i){if(De=i.data,!De)return St.return(n);n.push({id:s,groupId:null,startTime:a,endTime:u,uri:De,mimeType:null,isSkippable:h,skipOffset:A,skipFor:C,canJump:p,resumeOffset:$,playoutLimit:W,once:ie,pre:me,post:le,timelineRange:_e,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),St.s(2);break}if(!r){St.s(2);break}return Ge=r.data,Ge?(ve(St,4),vt={type:11},T(St,om(e,Ge,vt),6)):St.return(n);case 6:for(rt=St.h,Yt=cn(rt),Nt=JSON.parse(Yt),(Dt=Nt["SKIP-CONTROL"])&&(Lt=Dt["ENABLE-SKIP-AFTER"],typeof Lt=="number"&&(A=parseFloat(Lt),isNaN(Lt)&&(A=h?0:null)),Xt=Dt["ENABLE-SKIP-FOR"],typeof Xt=="number"&&(C=parseFloat(Xt),isNaN(Xt)&&(C=null))),kt=0;kt<Nt.ASSETS.length;kt++)jt=Nt.ASSETS[kt],jt.URI&&n.push({id:s+"_shaka_asset_"+kt,groupId:s,startTime:a,endTime:u,uri:jt.URI,mimeType:null,isSkippable:h,skipOffset:A,skipFor:C,canJump:p,resumeOffset:$,playoutLimit:W,once:ie,pre:me,post:le,timelineRange:_e,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});Me(St,2);break;case 4:Ce(St);case 2:return St.return(n)}})}function Hd(e){for(var t=[],n=v(e.G),i=n.next(),r={};!i.done;r={$b:void 0},i=n.next())i=i.value,i.overlay||(r.$b={start:i.startTime,end:null},i.pre?(r.$b.start=0,r.$b.end=null):i.post?(r.$b.start=-1,r.$b.end=null):i.timelineRange&&(r.$b.end=i.endTime),t.find(function(s){return function(o){return s.$b.start==o.start&&s.$b.end==o.end}}(r))||t.push(r.$b));e.i(new qe("ad-cue-points-changed",new Map().set("cuepoints",t)))}function sm(e){e.j.configure(e.H.Wg()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),Ov(e.H.yb(),e.j.yb())}function om(e,t,n){var i,r,s;return X(function(o){return o.g==1?(i=qn([t],zr()),r=e.H.yb().request(7,i,n),T(o,r.promise,2)):(s=o.h,o.return(s.data))})}function i1(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function r1(e,t){if(!(e.L.has(t)||e.T&&!e.T.allowPreloadOnDomElements)){var n=function(s){var o=document.createElement("link");return o.rel="preload",o.href=s,o.as="image",document.head.appendChild(o),o},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.L.set(t,i)}}function s1(e,t){if(e.L.has(t)){var n=e.L.get(t);n=v(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.parentNode.removeChild(i);e.L.delete(t)}}function ht(e,t,n,i,r){this.h=e,this.j=Ea(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.o=i,this.m=!1}d=ht.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.h.durationInSeconds},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return typeof this.j=="number"},d.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.o},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.l?this.l:1},d.getPositionInSequence=function(){return this.i?this.i:1},d.getTitle=function(){return this.h.adTitle},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getAdId=function(){return this.h.adId},d.getCreativeAdId=function(){return this.h.creativeId},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.l=this.i=this.g=this.h=null},G("shaka.ads.MediaTailorAd",ht),ht.prototype.release=ht.prototype.release,ht.prototype.getPodIndex=ht.prototype.getPodIndex,ht.prototype.getTimeOffset=ht.prototype.getTimeOffset,ht.prototype.getMediaUrl=ht.prototype.getMediaUrl,ht.prototype.getAdvertiserName=ht.prototype.getAdvertiserName,ht.prototype.getCreativeAdId=ht.prototype.getCreativeAdId,ht.prototype.getAdId=ht.prototype.getAdId,ht.prototype.getVastMediaWidth=ht.prototype.getVastMediaWidth,ht.prototype.getVastMediaHeight=ht.prototype.getVastMediaHeight,ht.prototype.getVastMediaBitrate=ht.prototype.getVastMediaBitrate,ht.prototype.getDescription=ht.prototype.getDescription,ht.prototype.getTitle=ht.prototype.getTitle,ht.prototype.getPositionInSequence=ht.prototype.getPositionInSequence,ht.prototype.getSequenceLength=ht.prototype.getSequenceLength,ht.prototype.setMuted=ht.prototype.setMuted,ht.prototype.resize=ht.prototype.resize,ht.prototype.isLinear=ht.prototype.isLinear,ht.prototype.isMuted=ht.prototype.isMuted,ht.prototype.setVolume=ht.prototype.setVolume,ht.prototype.getVolume=ht.prototype.getVolume,ht.prototype.play=ht.prototype.play,ht.prototype.pause=ht.prototype.pause,ht.prototype.skip=ht.prototype.skip,ht.prototype.canSkipNow=ht.prototype.canSkipNow,ht.prototype.getTimeUntilSkippable=ht.prototype.getTimeUntilSkippable,ht.prototype.isSkippable=ht.prototype.isSkippable,ht.prototype.isPaused=ht.prototype.isPaused,ht.prototype.getRemainingTime=ht.prototype.getRemainingTime,ht.prototype.getMinSuggestedDuration=ht.prototype.getMinSuggestedDuration,ht.prototype.getDuration=ht.prototype.getDuration,ht.prototype.isUsingAnotherMediaElement=ht.prototype.isUsingAnotherMediaElement,ht.prototype.hasCustomClick=ht.prototype.hasCustomClick,ht.prototype.isClientRendering=ht.prototype.isClientRendering,ht.prototype.needsSkipUI=ht.prototype.needsSkipUI;function Tl(e,t,n,i){this.B=e,this.K=t,this.h=n,this.l=null,this.P=NaN,this.i=i,this.I=!1,this.A=null,this.j=[],this.M=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.o=new _t}Tl.prototype.stop=function(){for(var e=v(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ka(t.target,t.type,t.listener);Za(this),this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.A=null,this.j=[],this.M=[],this.F.clear()},Tl.prototype.release=function(){this.stop(),this.o&&this.o.release()},Tl.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(mC(this,this.G,this.O),this.O=!1)},Tl.prototype.getCuePoints=function(){for(var e=[],t=v(this.j),n=t.next();!n.done;n=t.next()){n=v(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function pC(e,t,n){var i,r,s,o,a,u,c,h,p,E,A,M;X(function(R){if(R.g==1)return i={type:7},r=qn([t],zr()),r.method="POST",n&&(s=JSON.stringify(n),r.body=Ki(s)),o=e.K.request(7,r,i),ve(R,2),T(R,o.promise,4);if(R.g!=2){if(a=R.h,u=cn(a.data),c=JSON.parse(u),c.manifestUrl&&c.trackingUrl)h=new An(t),p=new An(c.trackingUrl),e.G=h.resolve(p).toString(),E=Date.now()/1e3,A=E-e.P,e.i(new qe("ads-loaded",new Map().set("loadTime",A))),M=new An(c.manifestUrl),e.l.resolve(h.resolve(M).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return Me(R,0)}if(Ce(R),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,R.return();e.l.resolve(e.H),e.l=null,H(R)})}function mC(e,t,n){var i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U;X(function($){if($.g==1)return i={type:8},r=qn([t],zr()),s=e.K.request(7,r,i),ve($,2),T($,s.promise,4);if($.g!=2){if(o=$.h,a=[],u=cn(o.data),c=JSON.parse(u),0<c.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(c.avails)){for(e.j=c.avails,h=v(e.j),p=h.next();!p.done;p=h.next())for(E=p.value,A=v(E.nonLinearAdsList),M=A.next();!M.done;M=A.next())for(R=M.value,C=v(R.nonLinearAdList),b=C.next();!b.done;b=C.next())U=b.value,gC(e,U);a=e.getCuePoints(),e.i(new qe("ad-cue-points-changed",new Map().set("cuepoints",a)))}}else e.j.length&&e.i(new qe("ad-cue-points-changed",new Map().set("cuepoints",a))),Za(e),e.j=[];return n&&(e.I||0<a.length)&&yC(e),Me($,0)}Ce($),H($)})}function gC(e,t){var n,i,r,s,o,a,u,c;X(function(h){if(h.g==1)return!t.staticResource||(n=o1(t),e.F.get(n))?h.return():(i={type:9},r=qn([t.staticResource],zr()),s=e.K.request(7,r,i),ve(h,2),e.F.set(n,[]),T(h,s.promise,4));if(h.g!=2)return o=h.h,a=cn(o.data),u=JSON.parse(a),c=u.apps,e.F.set(n,c),Me(h,0);Ce(h),e.F.delete(n),H(h)})}function o1(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function yC(e){u1(e),e.I||(a1(e),e.o.D(e.h,"seeked",function(){a1(e)}),e.o.D(e.h,"ended",function(){Za(e)})),e.o.D(e.h,"timeupdate",function(){u1(e)})}function a1(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,i,r=v(e.j),s=r.next();!s.done;s=r.next()){s=s.value;for(var o=v(s.ads),a=o.next();!a.done;a=o.next())if(a=a.value,!i)a.startTimeInSeconds<t&&(i=a,n=s);else if(a.startTimeInSeconds<t&&a.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=a,n=s;break}}n&&i&&!e.M.includes(i.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function u1(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.C,r=i.startTimeInSeconds+.5*i.durationInSeconds,s=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),Ii(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),Ii(e,"midpoint")):t>=s&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),Ii(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&0<i&&0<r&&Ii(e,"skipStateChanged"),0<r&&(0>=i||i>r)&&Za(e)}if(!e.g||!e.g.isLinear()){e:for(i=v(e.j),r=i.next();!r.done&&(r=r.value,!(e.g&&e.g.isLinear()));r=i.next())for(s=0;s<r.ads.length;s++){var o=r.ads[s],a=o.startTimeInSeconds+o.durationInSeconds;if(o.startTimeInSeconds<=t&&a>t){if(e.M.includes(o.adId)){if(e.h.ended)continue;e.h.currentTime=a;break e}Za(e),e.L=r,e.g=new ht(o,s+1,r.ads.length,!0,e.h),e.C=o,s===0&&Ii(e,"breakStart"),l1(e);break}}if(!e.g){for(i=v(e.j),r=i.next();!r.done&&(r=r.value,!e.g);r=i.next())for(s=0;s<r.nonLinearAdsList.length;s++)if(o=r.nonLinearAdsList[s],o.nonLinearAdList.length){a=r.startTimeInSeconds;var u=e.F.get(o1(o.nonLinearAdList[0]));if(a<=t&&u&&u.length){Za(e),a=e,u=v(u);for(var c=u.next();!c.done;c=u.next())if(c=c.value,c.data.source.length){var h=document.createElement("img");h.src=c.data.source[0].url,h.style.top=(c.placeholder.top||0)+"%",h.style.height=100-(c.placeholder.top||0)+"%",h.style.left=(c.placeholder.left||0)+"%",h.style.maxWidth=100-(c.placeholder.left||0)+"%",h.style.objectFit="contain",h.style.position="absolute",a.B.appendChild(h)}e.L=r,e.g=new ht(o,s+1,r.ads.length,!1,e.h),e.C=o,s===0&&Ii(e,"breakStart"),l1(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function Za(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.M.push(e.C.adId);var t=e.g.m;t!==void 0&&t?Ii(e,"skip"):Ii(e,"complete"),t=v(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ka(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Ii(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function l1(e){var t=!1;e.h.paused?t=!0:(Ii(e,"impression"),Ii(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Ii(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Ii(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Ii(e,"impression"),Ii(e,"start"),t=!1):Ii(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Ii(e,"pause")}});for(var n=v(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function Ii(e,t){var n=e.C.trackingEvents.find(function(s){return s.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(s){return s.eventType==t})),n){var i={type:10};n=v(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=qn([r],zr()),r.method="POST",e.K.request(7,r,i))}switch(t){case"impression":e.i(new qe("ad-impression"));break;case"start":e.i(new qe("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new qe("ad-muted"));break;case"unmute":e.i(new qe("ad-volume-changed"));break;case"resume":e.i(new qe("ad-resumed"));break;case"pause":e.i(new qe("ad-paused"));break;case"firstQuartile":e.i(new qe("ad-first-quartile"));break;case"midpoint":e.i(new qe("ad-midpoint"));break;case"thirdQuartile":e.i(new qe("ad-third-quartile"));break;case"complete":e.i(new qe("ad-complete")),e.i(new qe("ad-stopped"));break;case"skip":e.i(new qe("ad-skipped")),e.i(new qe("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new qe("ad-skip-state-changed"))}}function yt(e,t){this.g=e,this.i=null,this.h=t}d=yt.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.i?this.i.duration:-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},d.isPaused=function(){return this.h.paused},d.isSkippable=function(){return this.g.isSkippable()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.h.currentTime+=this.getRemainingTime()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.play()},d.getVolume=function(){return this.h.volume},d.setVolume=function(e){this.h.volume=e},d.isMuted=function(){return this.h.muted},d.isLinear=function(){return!0},d.resize=function(){},d.setMuted=function(e){this.h.muted=e},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.i=this.g=null},G("shaka.ads.ServerSideAd",yt),yt.prototype.release=yt.prototype.release,yt.prototype.getPodIndex=yt.prototype.getPodIndex,yt.prototype.getTimeOffset=yt.prototype.getTimeOffset,yt.prototype.getMediaUrl=yt.prototype.getMediaUrl,yt.prototype.getAdvertiserName=yt.prototype.getAdvertiserName,yt.prototype.getCreativeAdId=yt.prototype.getCreativeAdId,yt.prototype.getAdId=yt.prototype.getAdId,yt.prototype.getVastMediaWidth=yt.prototype.getVastMediaWidth,yt.prototype.getVastMediaHeight=yt.prototype.getVastMediaHeight,yt.prototype.getVastMediaBitrate=yt.prototype.getVastMediaBitrate,yt.prototype.getDescription=yt.prototype.getDescription,yt.prototype.getTitle=yt.prototype.getTitle,yt.prototype.getPositionInSequence=yt.prototype.getPositionInSequence,yt.prototype.getSequenceLength=yt.prototype.getSequenceLength,yt.prototype.setMuted=yt.prototype.setMuted,yt.prototype.resize=yt.prototype.resize,yt.prototype.isLinear=yt.prototype.isLinear,yt.prototype.isMuted=yt.prototype.isMuted,yt.prototype.setVolume=yt.prototype.setVolume,yt.prototype.getVolume=yt.prototype.getVolume,yt.prototype.play=yt.prototype.play,yt.prototype.pause=yt.prototype.pause,yt.prototype.skip=yt.prototype.skip,yt.prototype.canSkipNow=yt.prototype.canSkipNow,yt.prototype.getTimeUntilSkippable=yt.prototype.getTimeUntilSkippable,yt.prototype.isSkippable=yt.prototype.isSkippable,yt.prototype.isPaused=yt.prototype.isPaused,yt.prototype.getRemainingTime=yt.prototype.getRemainingTime,yt.prototype.getMinSuggestedDuration=yt.prototype.getMinSuggestedDuration,yt.prototype.getDuration=yt.prototype.getDuration,yt.prototype.isUsingAnotherMediaElement=yt.prototype.isUsingAnotherMediaElement,yt.prototype.hasCustomClick=yt.prototype.hasCustomClick,yt.prototype.isClientRendering=yt.prototype.isClientRendering,yt.prototype.needsSkipUI=yt.prototype.needsSkipUI;function c1(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new _t,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new qe("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(s){vC(r,s)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.B.length?r.j.resolve(r.B):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(s){s=s.getAd(),r.m=new yt(s,r.l),r.A&&(r.m.i=r.A),r.i(new qe("ad-started",new Map().set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var s=r.l.currentTime;r.o&&r.o>s&&(r.l.currentTime=r.o,r.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(s){r.A=s.getStreamData().adProgressData,r.m&&(r.m.i=r.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new qe("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new qe("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new qe("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new qe("ad-complete")),r.i(new qe("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new qe("ad-skipped")),r.i(new qe("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(s){var o=s.getStreamData();s=[],o=v(o.cuepoints);for(var a=o.next();!a.done;a=o.next())a=a.value,s.push({start:a.start,end:a.end});r.C=s,r.i(new qe("ad-cue-points-changed",new Map().set("cuepoints",s)))})}d=c1.prototype,d.configure=function(){},d.stop=function(){this.B="",this.o=null,this.C=[]},d.release=function(){this.stop(),this.h&&this.h.release()},d.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},d.getCuePoints=function(){return this.C};function vC(e,t){e.i(new qe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function et(){sn.call(this),this.h=this.i=this.j=this.g=null,this.m=new Q_,this.o=navigator.language,this.l=null}He(et,sn),d=et.prototype,d.setLocale=function(e){this.o=e},d.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},d.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new t1(e,t,n,function(r){return Gd(i,r)}),this.g.configure(this.l)},d.initClientSide=function(e,t,n){var i=this;if(!_.google||!google.ima||!google.ima.AdsLoader)throw new g(2,10,1e4);this.j&&this.j.release(),this.j=new Bd(e,t,this.o,n,function(r){return Gd(i,r)}),this.j.configure(this.l)},d.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),sn.prototype.release.call(this)},d.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new qe("ad-stopped")),this.dispatchEvent(new qe("ad-content-attach-requested")),this.m=new Q_},d.requestClientSideAds=function(e){if(!this.j)throw new g(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},d.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new g(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},d.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new Tl(e,t,n,function(r){return Gd(i,r)})},d.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new g(1,10,10005);var i=this.i;return n=n===void 0?"":n,i.l?e=Promise.reject(new g(1,10,10004)):(i.l=new rn,pC(i,e,t),i.H=n||"",i.P=Date.now()/1e3,e=i.l),e},d.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new g(1,10,10005);var t=this.i;t.G=e,t.i(new qe("ads-loaded",new Map().set("loadTime",0)))},d.initServerSide=function(e,t){var n=this;if(!_.google||!google.ima||!google.ima.dai)throw new g(2,10,10002);this.h&&this.h.release(),this.h=new c1(e,t,this.o,function(i){return Gd(n,i)}),this.h.configure(this.l)},d.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new g(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ne('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.14.10",n=this.h,n.j?e=Promise.reject(new g(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new rn,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},d.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new g(1,10,10003);(e.mpt||e.mpv)&&Ne('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.14.10",this.h.g.replaceAdTagParameters(e)},d.getServerSideCuePoints=function(){return Vt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},d.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},d.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:rC(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},d.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},d.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},d.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},d.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},d.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&lC(this.g,n))},d.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if(i=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||i=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",i=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||i)){for(var r=n.startTime,s=n.endTime,o=null,a=0,u,c=v(n.eventNode.children),h=c.next();!h.done;h=c.next())if(h=h.value,h.tagName=="AlternativeMPD"){if(h=h.attributes.uri){u=h;break}}else if(h.tagName=="InsertPresentation"||h.tagName=="ReplacePresentation"){var p=h.attributes.url;if(p){u=p,(c=Tt(h,"maxDuration",Ai))&&(o=c/n.timescale),(c=Tt(h,"returnOffset",Ai))&&(a=c/n.timescale),t&&a&&(s=r+a);break}}u&&_l(e,[{id:n.id,groupId:null,startTime:r,endTime:s,uri:u,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?a:null,playoutLimit:o,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else(i=="urn:mpeg:dash:event:2012"||i=="urn:scte:dash:scte214-events")&&n.eventNode&&Nn(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&cC(this.g,n))}},d.addCustomInterstitial=function(e){if(!this.g)throw new g(1,10,10006);_l(this.g,[e])},d.addAdUrlInterstitial=function(e){if(!this.g)throw new g(1,10,10006);return this.g.addAdUrlInterstitial(e)},d.getInterstitialPlayer=function(){if(!this.g)throw new g(1,10,10006);return this.g.Kf()};function Gd(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}G("shaka.ads.AdManager",et),et.prototype.getInterstitialPlayer=et.prototype.getInterstitialPlayer,et.prototype.addAdUrlInterstitial=et.prototype.addAdUrlInterstitial,et.prototype.addCustomInterstitial=et.prototype.addCustomInterstitial,et.prototype.onDASHInterstitialMetadata=et.prototype.onDASHInterstitialMetadata,et.prototype.onHLSInterstitialMetadata=et.prototype.onHLSInterstitialMetadata,et.prototype.onCueMetadataChange=et.prototype.onCueMetadataChange,et.prototype.onHlsTimedMetadata=et.prototype.onHlsTimedMetadata,et.prototype.onDashTimedMetadata=et.prototype.onDashTimedMetadata,et.prototype.onManifestUpdated=et.prototype.onManifestUpdated,et.prototype.getStats=et.prototype.getStats,et.prototype.getCuePoints=et.prototype.getCuePoints,et.prototype.getServerSideCuePoints=et.prototype.getServerSideCuePoints,et.prototype.replaceServerSideAdTagParameters=et.prototype.replaceServerSideAdTagParameters,et.prototype.requestServerSideStream=et.prototype.requestServerSideStream,et.prototype.initServerSide=et.prototype.initServerSide,et.prototype.addMediaTailorTrackingUrl=et.prototype.addMediaTailorTrackingUrl,et.prototype.requestMediaTailorStream=et.prototype.requestMediaTailorStream,et.prototype.initMediaTailor=et.prototype.initMediaTailor,et.prototype.updateClientSideAdsRenderingSettings=et.prototype.updateClientSideAdsRenderingSettings,et.prototype.requestClientSideAds=et.prototype.requestClientSideAds,et.prototype.onAssetUnload=et.prototype.onAssetUnload,et.prototype.release=et.prototype.release,et.prototype.initClientSide=et.prototype.initClientSide,et.prototype.initInterstitial=et.prototype.initInterstitial,et.prototype.configure=et.prototype.configure,et.prototype.setLocale=et.prototype.setLocale,et.ADS_LOADED="ads-loaded",et.AD_STARTED="ad-started",et.AD_FIRST_QUARTILE="ad-first-quartile",et.AD_MIDPOINT="ad-midpoint",et.AD_THIRD_QUARTILE="ad-third-quartile",et.AD_COMPLETE="ad-complete",et.AD_STOPPED="ad-stopped",et.AD_SKIPPED="ad-skipped",et.AD_VOLUME_CHANGED="ad-volume-changed",et.AD_MUTED="ad-muted",et.AD_PAUSED="ad-paused",et.AD_RESUMED="ad-resumed",et.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",et.CUEPOINTS_CHANGED="ad-cue-points-changed",et.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",et.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",et.AD_CLICKED="ad-clicked",et.AD_PROGRESS="ad-progress",et.AD_BUFFERING="ad-buffering",et.AD_IMPRESSION="ad-impression",et.AD_DURATION_CHANGED="ad-duration-changed",et.AD_CLOSED="ad-closed",et.AD_LOADED="ad-loaded",et.ALL_ADS_COMPLETED="all-ads-completed",et.AD_LINEAR_CHANGED="ad-linear-changed",et.AD_METADATA="ad-metadata",et.AD_RECOVERABLE_ERROR="ad-recoverable-error",et.AD_ERROR="ad-error",et.AD_BREAK_READY="ad-break-ready",et.AD_INTERACTION="ad-interaction",et.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",et.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",et.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Ud=function(){return new et};function d1(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof qe){var i={};for(r in n)(t=n[r])&&typeof t=="object"?r=="detail"&&(i[r]=t):r in Event||(i[r]=t);return i}if(n instanceof Error){var r=new Set(["name","message","stack"]);for(i in n)r.add(i);for(i=v(Object.getOwnPropertyNames(n)),t=i.next();!t.done;t=i.next())r.add(t.value);for(i={},r=v(r),t=r.next();!t.done;t=r.next())t=t.value,i[t]=n[t];n={__type__:"Error",contents:i}}else if(n instanceof TimeRanges){for(r={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=v(Rs(n)),i=n.next();!i.done;i=n.next())i=i.value,t=i.end,r.start.push(i.start),r.end.push(t);n=r}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function am(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=_C(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n;return i})}function _C(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var f1="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),SC="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),um=["loop","playbackRate"],TC=["pause","play"],lm=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("getImageTracks",2).set("getThumbnails",2).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),cm=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getTextTracks",2).set("getVariantTracks",2),h1=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),p1=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],m1=[["isTextTrackVisible","setTextTrackVisibility"]],EC="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure configurationForLowLatency getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),wC=["attach","attachCanvas","detach","load","unload"];function dm(e,t,n,i,r,s,o){var a=this;this.G=e,this.K=o,this.l=new se(t),this.L=n,this.u=!1,this.A=i,this.F=r,this.M=s,this.i=this.m=!1,this.I="",this.o=null,this.B=function(){return fm(a)},this.C=function(u,c){switch(u=am(c),u.type){case"event":var h=u.targetName,p=Pv(u.event);a.A(h,p);break;case"update":h=u.update;for(p in h){u=a.g[p]||{};for(var E in h[p])u[E]=h[p][E]}a.u&&(a.L(),a.u=!1);break;case"asyncComplete":if(p=u.id,E=u.error,u=a.h.get(p),a.h.delete(p),u)if(E){p=new g(E.severity,E.category,E.code);for(h in E)p[h]=E[h];u.reject(p)}else u.resolve()}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,wl.add(this)}d=dm.prototype,d.destroy=function(){return wl.delete(this),hm(this),Ur&&y1(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.i=this.m=!1,this.C=this.B=this.j=this.h=this.g=this.o=null,Promise.resolve()},d.qb=function(){return this.i},d.cg=function(){return this.I},d.init=function(){if(this.G.length)if(_.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.sb();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=v(wl),i=n.next();!i.done;i=n.next()){i=i.value;var r=t;i.j=new rn,i.u=!0,zd(i,r)}},function(t){for(var n=v(wl),i=n.next();!i.done;i=n.next())i=i.value,Kd=t=="available",i.l.sb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Kd&&this.l.da(xC),(e=Ur)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new rn,this.u=!0,zd(this,e)):Ur=null}else _.__onGCastApiAvailable!==v1&&(qd=_.__onGCastApiAvailable||null,_.__onGCastApiAvailable=v1)},d.kg=function(e){this.o=e,this.i&&El(this,{type:"appData",appData:this.o})},d.cast=function(){var e=this;return X(function(t){if(!e.m)throw new g(1,8,8e3);if(!Kd)throw new g(1,8,8001);if(e.i)throw new g(1,8,8002);return e.j=new rn,chrome.cast.requestSession(function(n){return zd(e,n)},function(n){return g1(e,n)}),T(t,e.j,0)})};function AC(e){e.i&&chrome.cast.requestSession(function(t){return zd(e,t)},function(t){return g1(e,t)})}d.Pc=function(){if(this.i){if(hm(this),Ur){y1(this);try{Ur.stop(function(){},function(){})}catch{}Ur=null}fm(this)}},d.get=function(e,t){var n=this;if(e=="video"){if(TC.includes(t))return function(){return n.ph.apply(n,[e,t].concat(z(zt.apply(0,arguments))))}}else if(e=="player"){if(h1.has(t)&&!this.get("player","isLive")())return function(){};if(EC.includes(t))return function(){return n.ph.apply(n,[e,t].concat(z(zt.apply(0,arguments))))};if(wC.includes(t))return function(){return n.rj.apply(n,[e,t].concat(z(zt.apply(0,arguments))))};if(lm.has(t)||cm.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},d.set=function(e,t,n){this.g[e][t]=n,El(this,{type:"set",targetName:e,property:t,value:n})};function zd(e,t){var n=e.M();Ur=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),fm(e),El(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function g1(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new g(2,8,n,t))}d.ph=function(e,t){El(this,{type:"call",targetName:e,methodName:t,args:zt.apply(2,arguments)})},d.rj=function(e,t){var n=zt.apply(2,arguments),i=new rn,r=this.H.toString();this.H++,this.h.set(r,i);try{El(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(s){i.reject(s)}return i};function y1(e){var t=Ur;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function fm(e){var t=Ur?Ur.status=="connected":!1;if(e.i&&!t){e.F();for(var n in e.g)e.g[n]={};hm(e)}e.i=t,e.I=t?Ur.receiver.friendlyName:"",e.l.sb()}function hm(e){if(e.h)for(var t=v(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new g(1,7,7e3))}}function El(e,t){t=d1(t);var n=Ur;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Ut)}catch(i){throw t=new g(2,8,8005,i),n=new qe("error",new Map().set("detail",t)),e.A("player",n),e.Pc(),t}}var xC=.02,Kd=!1,Ur=null,qd=null,wl=new Set;function v1(e){if(qd?_.__onGCastApiAvailable=qd:delete _.__onGCastApiAvailable,qd=null,e)for(var t=v(wl),n=t.next();!n.done;n=t.next())n.value.init();typeof _.__onGCastApiAvailable=="function"&&_.__onGCastApiAvailable(e)}function Vn(e,t,n,i){i=i===void 0?!1:i,sn.call(this);var r=this;this.i=e,this.h=t,this.m=this.o=this.l=this.u=this.j=null,this.C=n,this.B=i,this.A=new Map,this.g=null,_.chrome?(this.g=new dm(n,function(){return T1(r)},function(){return E1(r)},function(s,o){return A1(r,s,o)},function(){return w1(r)},function(){return S1(r)},i),IC(this)):(this.j=this.i,this.u=this.h)}He(Vn,sn),d=Vn.prototype,d.destroy=function(e){return this.g&&e&&this.g.Pc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,sn.prototype.release.call(this),Promise.all(e)},d.Ni=function(){return this.j},d.Kf=function(){return this.u},d.Yh=function(){return this.g?this.g.m&&Kd:!1},d.qb=function(){return this.g?this.g.qb():!1},d.cg=function(){return this.g?this.g.cg():""},d.cast=function(){var e=this;return X(function(t){return t.g==1?e.g?T(t,e.g.cast(),2):t.return():e.h?T(t,e.h.kc(),0):t.return()})},d.kg=function(e){this.g&&this.g.kg(e)},d.Gj=function(){this.g&&AC(this.g)},d.Pc=function(){this.g&&this.g.Pc()},d.Zh=function(e,t){t=t===void 0?!1:t;var n=this;return X(function(i){if(i.g==1)return e==n.C&&t==n.B||(n.C=e,n.B=t,!n.g)?i.return():(n.g.Pc(),T(i,n.g.destroy(),2));n.g=null,n.g=new dm(e,function(){return T1(n)},function(){return E1(n)},function(r,s){return A1(n,r,s)},function(){return w1(n)},function(){return S1(n)},t),n.g.init(),H(i)})};function IC(e){e.g.init(),e.m=new _t;for(var t=v(f1),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(s){e.g.qb()||(s=Pv(s),e.l.dispatchEvent(s))});for(var i in Fc)e.m.D(e.h,Fc[i],function(s){e.g.qb()||e.o.dispatchEvent(s)});e.j={},t={};for(var r in e.i)t={wd:t.wd},t.wd=r,Object.defineProperty(e.j,t.wd,{configurable:!1,enumerable:!0,get:function(s){return function(){return CC(e,s.wd)}}(t),set:function(s){return function(o){var a=s.wd;e.g.qb()?e.g.set("video",a,o):e.i[a]=o}}(t)});e.u={},_1(e,function(s){Object.defineProperty(e.u,s,{configurable:!1,enumerable:!0,get:function(){return RC(e,s)}})}),MC(e),e.l=new sn,e.l.Te=e.j,e.o=new sn,e.o.Te=e.u}function MC(e){var t=new Map;_1(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.A.set(n,i):e.A.set(i,n)):t.set(i,n)})}function _1(e,t){function n(u){return u=="constructor"||typeof i[u]!="function"?!1:!r.has(u)}var i=e.h,r=new Set,s;for(s in i)n(s)&&(r.add(s),t(s,i[s]));for(e=Object.getPrototypeOf(i),s=Object.getPrototypeOf({});e&&e!=s;){for(var o=v(Object.getOwnPropertyNames(e)),a=o.next();!a.done;a=o.next())a=a.value,n(a)&&(r.add(a),t(a,i[a]));e=Object.getPrototypeOf(e)}}function S1(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Qc(),startTime:null};e.i.pause();for(var n=v(um),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=v(p1),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=v(m1),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function T1(e){var t=new qe("caststatuschanged");e.dispatchEvent(t)}function E1(e){var t=new qe(e.j.paused?"pause":"play");e.l.dispatchEvent(t)}function w1(e){for(var t=v(p1),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var s=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var o;(i=e.g.get("player","getTextTracks")())&&i.length&&(o=i.find(function(c){return c.active}));var a=e.g.get("player","isTextTrackVisible")();r&&(e.i.autoplay=!1,t=e.h.load(r,n));var u={};for(n=v(um),i=n.next();!i.done;i=n.next())i=i.value,u[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var c=v(um),h=c.next();!h.done;h=c.next())h=h.value,e.i[h]=u[h];for(c=v(m1),h=c.next();!h.done;h=c.next()){var p=h.value;h=p[1],p=e.g.get("player",p[0])(),e.h[h](p)}e.h.Ah(a),o&&e.h.jg(o.language,o.roles,o.forced),e.i.autoplay=s,r&&e.i.play()}},function(c){c=new Map().set("detail",c),c=new qe("error",c),e.h.dispatchEvent(c)})}function CC(e,t){if(t=="addEventListener")return function(i,r,s){return e.l.addEventListener(i,r,s)};if(t=="removeEventListener")return function(i,r,s){return e.l.removeEventListener(i,r,s)};if(e.g.qb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.qb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function RC(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,i,r){return e.o.addEventListener(n,i,r)};if(t=="removeEventListener")return function(n,i,r){return e.o.removeEventListener(n,i,r)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.yb()};if(t=="getDrmEngine")return function(){return e.h.C};if(t=="getAdManager")return function(){return e.h.Rg()};if(t=="setVideoContainer")return function(n){return e.h.Dh(n)};if(e.g.qb()){if(t=="getManifest"||t=="drmInfo")return function(){return Ne(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ne(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return Ne(t+"() does not work while casting!"),[]}}return e.g.qb()&&Object.keys(e.g.g.video).length==0&&(lm.has(t)||cm.has(t))||!e.g.qb()?e.h[t].bind(e.h):e.g.get("player",t)}function A1(e,t,n){e.g.qb()&&(t=="video"?e.l.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}G("shaka.cast.CastProxy",Vn),Vn.prototype.changeReceiverId=Vn.prototype.Zh,Vn.prototype.forceDisconnect=Vn.prototype.Pc,Vn.prototype.suggestDisconnect=Vn.prototype.Gj,Vn.prototype.setAppData=Vn.prototype.kg,Vn.prototype.cast=Vn.prototype.cast,Vn.prototype.receiverName=Vn.prototype.cg,Vn.prototype.isCasting=Vn.prototype.qb,Vn.prototype.canCast=Vn.prototype.Yh,Vn.prototype.getPlayer=Vn.prototype.Kf,Vn.prototype.getVideo=Vn.prototype.Ni,Vn.prototype.destroy=Vn.prototype.destroy;function ci(e,t,n,i){sn.call(this);var r=this;this.g=e,this.h=t,this.j=new _t,this.H={video:e,player:t},this.F=n||function(){},this.I=i||function(s){return s},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.u=this.l=null,this.C=new se(function(){pm(r)}),kC(this)}He(ci,sn),d=ci.prototype,d.isConnected=function(){return this.G},d.Ui=function(){return this.o},d.Dj=function(e){this.i=e},d.ci=function(){this.i=null},d.Ej=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},d.Cj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},d.Bj=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},d.destroy=function(){var e=this,t,n;return X(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.u=null,sn.prototype.release.call(e),T(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),H(i)})};function kC(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return x1(e)},t.onSenderDisconnected=function(){return x1(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&Ps(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),Ps(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(r){return LC(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return DC(e,r)},t.start(),t=v(f1);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(r){return I1(e,"video",r)});for(var i in Fc)e.j.D(e.h,Fc[i],function(r){return I1(e,"player",r)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,eu(e)}),e.j.D(e.g,"playing",function(){e.o=!1,eu(e)}),e.j.D(e.g,"pause",function(){eu(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,eu(e)}),e.j.D(e.g,"ended",function(){new se(function(){e.g&&e.g.ended&&(e.o=!0,eu(e))}).da(OC)})}function x1(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,eu(e)}function eu(e){var t;X(function(n){if(n.g==1)return T(n,Promise.resolve(),2);if(!e.h)return n.return();t=new qe("caststatuschanged"),e.dispatchEvent(t),M1(e)||Os(e),H(n)})}function bC(e,t,n){var i,r,s,o,a,u,c,h,p,E;X(function(A){switch(A.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.F(n),s=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ve(A,5),T(A,e.h.load(t.manifest,t.startTime),7)):T(A,Promise.resolve(),3);case 7:Me(A,3);break;case 5:return o=Ce(A),a=new Map().set("detail",o),u=new qe("error",a),e.h&&e.h.dispatchEvent(u),A.return();case 3:if(!e.h)return A.return();for(c in t.video)h=t.video[c],e.g[c]=h;for(p in t.playerAfterLoad)E=t.playerAfterLoad[p],e.h[p](E);e.g.autoplay=s,t.manifest&&(e.g.play(),Os(e)),H(A)}})}function I1(e,t,n){e.h&&(pm(e),Ps(e,{type:"event",targetName:t,event:n},e.l))}function pm(e){e.C.da(PC);for(var t={video:{},player:{}},n=v(SC),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];e.h.U()&&h1.forEach(function(r,s){e.m%r==0&&(t.player[s]=e.h[s]())}),lm.forEach(function(r,s){e.m%r==0&&(t.player[s]=e.h[s]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Ps(e,{type:"update",update:t},e.l),cm.forEach(function(r,s){e.m%r==0&&(r={player:{}},r.player[s]=e.h[s](),Ps(e,{type:"update",update:r},e.l))}),e.B&&(e.m+=1),M1(e)}function M1(e){return e.A&&(e.g.duration||e.h.U())?(mm(e),e.A=!1,!0):!1}function mm(e,t){var n={contentId:e.h.Qc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Os(e,t===void 0?0:t,n)}function DC(e,t){var n=am(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,bC(e,n.initState,n.appData),pm(e);break;case"appData":e.F(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":i=e.H[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.B=!1);var s=n.id,o=t.senderId;t=e.H[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return C1(e,o,s,null)},function(a){return C1(e,o,s,a)})}}function LC(e,t){var n=am(t.data);switch(n.type){case"PLAY":e.g.play(),Os(e);break;case"PAUSE":e.g.pause(),Os(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.g.play(),Os(e)):i&&i=="PLAYBACK_PAUSE"&&(e.g.pause(),Os(e));break;case"STOP":e.h.kc().then(function(){e.h&&Os(e)});break;case"GET_STATUS":mm(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.g.volume,s=e.g.muted;t!=null&&(e.g.volume=Number(t)),i!=null&&(e.g.muted=i),r==e.g.volume&&s==e.g.muted||Os(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,i=n.currentTime,r=e.I(t.contentId),s=n.autoplay||!0,e.F(t.customData),s&&(e.g.autoplay=!0),e.h.load(r,i).then(function(){e.h&&mm(e)}).catch(function(o){var a="LOAD_FAILED";o.category==7&&o.code==7e3&&(a="LOAD_CANCELLED"),Ps(e,{requestId:Number(n.requestId),type:a},e.u)});break;default:Ps(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function C1(e,t,n,i){e.h&&Ps(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function Ps(e,t,n,i){e.G&&(e=d1(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Os(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?NC:e.h.Qf()?BC:e.g.paused?jC:UC,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),Ps(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}G("shaka.cast.CastReceiver",ci),ci.prototype.destroy=ci.prototype.destroy,ci.prototype.setContentArtist=ci.prototype.Bj,ci.prototype.setContentImage=ci.prototype.Cj,ci.prototype.setContentTitle=ci.prototype.Ej,ci.prototype.clearContentMetadata=ci.prototype.ci,ci.prototype.setContentMetadata=ci.prototype.Dj,ci.prototype.isIdle=ci.prototype.Ui,ci.prototype.isConnected=ci.prototype.isConnected;var PC=.5,OC=5,NC="IDLE",UC="PLAYING",BC="BUFFERING",jC="PAUSED";function R1(e,t,n,i,r){if(i>=r)return null;for(var s=-1,o=-1,a=0;a<n.length;a++)if(n[a].some(function(Q){return Q!=null&&Q.g.trim()!=""})){s=a;break}for(a=n.length-1;0<=a;a--)if(n[a].some(function(Q){return Q!=null&&Q.g.trim()!=""})){o=a;break}if(s===-1||o===-1)return null;for(var u=a=!1,c="white",h="black",p=gm(i,r,a,u,c,h);s<=o;s++){for(var E=n[s],A=-1,M=-1,R=0;R<E.length;R++)if(E[R]!=null&&E[R].g.trim()!==""){A=R;break}for(R=E.length-1;0<=R;R--)if(E[R]!=null&&E[R].g.trim()!==""){M=R;break}if(A===-1||M===-1)E=k1(i,r),e.nestedCues.push(E);else{for(;A<=M;A++)if(R=E[A]){var C=R.l,b=R.i,U=R.j,$=R.h;(C!=a||b!=u||U!=c||$!=h)&&(p.payload&&e.nestedCues.push(p),p=gm(i,r,C,b,U,$),a=C,u=b,c=U,h=$),p.payload+=R.g}else p.payload+=" ";p.payload&&e.nestedCues.push(p),s!==o&&(p=k1(i,r),e.nestedCues.push(p)),p=gm(i,r,a,u,c,h)}}return e.nestedCues.length?{cue:e,stream:t}:null}function gm(e,t,n,i,r,s){return e=new mn(e,t,""),n&&e.textDecoration.push(Ts),i&&(e.fontStyle=Aa),e.color=r,e.backgroundColor=s,e}function k1(e,t){return e=new mn(e,t,""),e.lineBreak=!0,e}function b1(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function ym(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.A=null,Al(this)}function Wd(e,t,n){var i="CC"+((e.C<<1|e.B)+1),r=new mn(t,n,"");r.lineInterpretation=1;var s=P1.get(e.g);return s&&(r.line=s),e.u!=null&&e.A!=null&&(r.position=10+Math.min(70,10*e.u)+2.5*e.A),(t=R1(r,i,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(s=P1.get(e.g+3-t.cue.nestedCues.length))&&(r.line=s),t}function Al(e){Ns(e,0,15),e.g=1}function tu(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case 0:i=L1.has(n)?L1.get(n):String.fromCharCode(n);break;case 1:i=FC.get(n);break;case 2:e.i[e.g].pop(),i=VC.get(n);break;case 3:e.i[e.g].pop(),i=HC.get(n)}i&&e.i[e.g].push(new b1(i,e.m,e.j,e.o,e.l))}}function D1(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(s){return s});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(s){return s})}function Ns(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var L1=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),FC=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),VC=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),HC=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),P1=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Xd(e,t){this.h=0,this.o=new ym(e,t),this.i=new ym(e,t),this.g=this.j=new ym(e,t),this.l=0,this.m=null}function vm(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==3&&e.h!==4&&(r=Wd(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Ns(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Ns(n,0,15),i.g=15),e.h=3,i.h=t,r}function O1(e){e.h=1,e.g=e.j,e.g.h=0}function N1(e){We("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var GC="black green blue cyan red yellow magenta black".split(" "),U1="white green blue cyan red yellow magenta white_italics".split(" ");function _m(e,t){this.I=t,this.M=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.u="black",Sm(this)}function Sm(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Tm())}function Tm(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function uo(e,t){B1(e)&&(e.i[e.h][e.g]=new b1(t,e.C,e.A,e.u,e.B),e.g++)}function B1(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}_m.prototype.isVisible=function(){return this.l};function zC(e){for(var t=0,n=1;16>n;n++,t++)e.i[t]=e.i[n];for(n=0;1>n;n++,t++)e.i[t]=Tm()}function Zo(e,t,n){var i=new mn(e.j,t,"");i.textAlign=e.F===0?"left":e.F===1?"right":rs;var r=i.region;switch(e.I&&(r.id+="svc"+e.I),r.id+="win"+e.M,r.height=e.o,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.H,r.viewportAnchorY=e.L,r.viewportAnchorUnits=e.K?qi:2,e.G){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=R1(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}_m.prototype.display=function(){this.l=!0};function KC(){this.i=[],this.h=null,this.g=0}function qC(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new xl(e.h)),e.h=null,e.g=0))}function xl(e){this.g=0,this.h=e}xl.prototype.ta=function(){return this.g<this.h.length},xl.prototype.Ba=function(){return this.g};function Wn(e){if(!e.ta())throw new g(2,2,3e3);return e.h[e.g++]}xl.prototype.skip=function(e){if(this.g+e>this.h.length)throw new g(2,2,3e3);this.g+=e},xl.prototype.rh=function(e){if(0>this.g-e)throw new g(2,2,3e3);this.g-=e};function WC(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function XC(e,t,n,i){if(!e.g)return[];if(n==24)return n=Wn(t).value,i=Wn(t).value,n=function(s){return s.map(function(o){return("0"+(o&255).toString(16)).slice(-2)}).join("")}([n,i]),uo(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!B1(t)||0>=t.g&&0>=t.h||(0>=t.g?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=Zo(t,i,e.i)),t.h+1>=t.o?zC(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=Zo(t,i,e.i)),t.i[t.h]=Tm(),t.g=0;break;case 12:t.isVisible()&&(r=Zo(t,i,e.i)),Sm(t),t.h=0,t.g=0}return r?[r]:[]}function YC(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=Wn(t).value,t=[],n=v(Il(e,n));for(var r=n.next();!r.done;r=n.next()){if(r=e.h[r.value],r.isVisible()){var s=Zo(r,i,e.i);s&&t.push(s)}Sm(r)}return t}if(n===137)for(t=Wn(t).value,t=v(Il(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.display();else{if(n===138){for(n=Wn(t).value,t=null,n=v(Il(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=Zo(r,i,e.i)),r.l=!1;return t?[t]:[]}if(n===139){for(n=Wn(t).value,t=null,n=v(Il(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=Zo(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(n===140)return t=Wn(t).value,j1(e,t,i);if(n===143)return i=j1(e,255,i),F1(e),i;if(n===144)t.skip(1),i=Wn(t).value,e.g&&(e.g.A=0<(i&128),e.g.C=0<(i&64));else if(n===145)i=Wn(t).value,n=Wn(t).value,t.skip(1),e.g&&(t=V1((n&48)>>4,(n&12)>>2,n&3),e.g.B=V1((i&48)>>4,(i&12)>>2,i&3),e.g.u=t);else if(n===146)i=Wn(t).value,t=Wn(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=Wn(t).value,t.skip(1),e.g&&(e.g.F=i&3);else if(152<=n&&159>=n){n=(n&15)-8,r=e.h[n]!==null,r||(s=new _m(n,e.i),s.j=i,e.h[n]=s),i=Wn(t).value,s=Wn(t).value;var o=Wn(t).value,a=Wn(t).value,u=Wn(t).value;t=Wn(t).value,r&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.u="black"),t=e.h[n],t.l=0<(i&32),t.L=s&127,t.H=o,t.G=(a&240)>>4,t.K=0<(s&128),t.o=(a&15)+1,t.m=(u&63)+1,e.g=e.h[n]}}}return[]}function Il(e,t){for(var n=[],i=0;8>i;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function j1(e,t,n){var i=[];t=v(Il(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var s=e.h[r];s.isVisible()&&(s=Zo(s,n,e.i))&&i.push(s),e.h[r]=null}return i}function F1(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function V1(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],$C[e<<2|t<<1|n]}var H1=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),$C="black blue green cyan red magenta yellow white".split(" ");function nu(){this.h=[],this.g=[],this.i=new KC,this.l=0,this.m=new Map([["CC1",new Xd(0,0)],["CC2",new Xd(0,1)],["CC3",new Xd(1,0)],["CC4",new Xd(1,1)]]),this.u=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,Em(this)}nu.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Em(this),e=v(this.j.values());for(var t=e.next();!t.done;t=e.next())F1(t.value)};function Em(e){e.o=0,e.u=0;for(var t=v(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Al(n.i),Al(n.j),Al(n.o);e.B=!0}nu.prototype.extract=function(e,t){if(this.B){for(var n=v(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.B=!1}if(e=new gn(e,0),!(8>e.getLength())&&e.X()===181&&e.ma()===49&&e.S()===1195456820&&e.X()===3&&(n=e.X(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.X(),s=(r&4)>>2,o=e.X(),a=e.X();s&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,mb:o,Mb:a,order:this.h.length}):(this.g.push({pts:t,type:r,value:o,order:this.g.length}),this.g.push({pts:t,type:2,value:a,order:this.g.length})))}},nu.prototype.decode=function(){function e(r,s){return r.pts-s.pts||r.order-s.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=v(this.h),i=n.next();!i.done;i=n.next())(i=QC(this,i.value))&&t.push(i);for(n=v(this.g),i=n.next();!i.done;i=n.next())qC(this.i,i.value);for(n=v(this.i.i),i=n.next();!i.done;i=n.next())i=JC(this,i.value),t.push.apply(t,z(i));return this.i.i=[],this.h=[],this.g=[],t};function QC(e,t){var n=t.type;if((t.mb&112)===16){var i=t.mb>>3&1;n===0?e.o=i:e.u=i}if(i="CC"+((n<<1|(n?e.u:e.o))+1),n=e.m.get(i),t.mb===255&&t.Mb===255||!t.mb&&!t.Mb||!G1(t.mb)||!G1(t.Mb))return 45<=++e.l&&Em(e),null;e.l=0,t.mb&=127,t.Mb&=127;var r=t.mb;if(1<=r&&15>=r||!t.mb&&!t.Mb)return null;if(r=null,(t.mb&112)===16)e:{if(e.A.add(i),i=t.mb,e=t.Mb,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1],i="white",r=!1;var s=null,o=95<e?e-96:e-64;13>=o?i=U1[Math.floor(o/2)]:15>=o?r=!0:s=Math.floor((o-16)/2),e=(e&1)===1,n.h!==4&&(o=n.g,n.h===3&&t!==o.g&&(n=1+t-o.h,D1(o,n,1+o.g-o.h,o.h),Ns(o,0,n-1),Ns(o,t+1,15-t)),o.g=t,o.m=e,o.j=r,o.l=i,o.u=s,o.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",tu(n.g,0,32),i=!1,t=U1[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",(i&7)===0&&(t=GC[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)tu(n.g,1,e);else if((i&246)===18&&(e&224)===32)tu(n.g,i&1?3:2,e);else{if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.Mb){case 32:O1(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=vm(n,2,e);break;case 38:i=vm(n,3,e);break;case 39:i=vm(n,4,e);break;case 40:tu(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Al(n.o),N1(n);break;case 43:N1(n);break;case 44:t=n.i,i=null,n.h!==4&&(i=Wd(t,n.l,e)),Ns(t,0,15);break;case 45:t=n.g,n.h!==3?i=null:(i=Wd(t,n.l,e),r=t.g-t.h+1,D1(t,r-1,r,t.h),Ns(t,0,r-1),Ns(t,t.g,15-t.g),n.l=e);break;case 46:Ns(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=Wd(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,O1(n),n.l=e,i=t}r=i;break e}(i==23||i==31)&&33<=e&&35>=e&&(n.g.A=e-32)}r=null}else e=t.Mb,tu(n.g,0,t.mb),tu(n.g,0,e);return r}function JC(e,t){var n=[];try{for(;t.ta();){var i=Wn(t).value,r=(i&224)>>5,s=i&31;if(r===7&&s!=0&&(r=Wn(t).value&63),r!=0){e.A.add("svc"+r),e.j.has(r)||e.j.set(r,new WC(r));for(var o=e.j.get(r),a=t.Ba();t.Ba()-a<s;){r=o;var u=t,c=Wn(u),h=c.value,p=c.pts;if(h===16){var E=Wn(u);h=h<<16|E.value}if(0<=h&&31>=h)var A=XC(r,u,h,p);else if(128<=h&&159>=h)A=YC(r,u,h,p);else{if(4096<=h&&4127>=h)r=u,u=h&255,8<=u&&15>=u?r.skip(1):16<=u&&23>=u?r.skip(2):24<=u&&31>=u&&r.skip(3);else if(4224<=h&&4255>=h)r=u,u=h&255,128<=u&&135>=u?r.skip(4):136<=u&&143>=u&&r.skip(5);else if(32<=h&&127>=h)u=h,r.g&&(u===127?uo(r.g,"♪"):uo(r.g,String.fromCharCode(u)));else if(160<=h&&255>=h)r.g&&uo(r.g,String.fromCharCode(h));else if(4128<=h&&4223>=h){if(u=h&255,r.g)if(H1.has(u)){var M=H1.get(u);uo(r.g,M)}else uo(r.g,"_")}else 4256<=h&&4351>=h&&r.g&&((h&255)!=160?uo(r.g,"_"):uo(r.g,"[CC]"));A=[]}n.push.apply(n,z(A))}}}}catch(R){if(R instanceof g&&R.code===3e3)We("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw R}return n}function G1(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}nu.prototype.getStreams=function(){return Array.from(this.A)},G("shaka.cea.CeaDecoder",nu),va=function(){return new nu};function z1(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(z(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function Yd(){this.j=new Map,this.i=this.h=0,this.g=wm}Yd.prototype.init=function(e){function t(s){s=s.name,$d.has(s)&&(n.g=$d.get(s))}var n=this,i=[],r=[];if(new on().box("moov",Mt).box("mvex",Mt).R("trex",function(s){var o=s.reader;o.skip(4),o.skip(4),s=o.S(),o=o.S(),n.h=s,n.i=o}).box("trak",Mt).R("tkhd",function(s){var o=s.reader;s=s.version,s==1?(o.skip(8),o.skip(8)):(o.skip(4),o.skip(4));var a=o.S();s==1?o.skip(8):o.skip(4),o.skip(4),o.skip(8),o.skip(2),o.skip(2),o.skip(2),o.skip(2),o.skip(36),o.ma(),o.ma(),o.ma(),o.ma(),i.push(a)}).box("mdia",Mt).R("mdhd",function(s){s=$c(s.reader,s.version),r.push(s.timescale)}).box("minf",Mt).box("stbl",Mt).R("stsd",Ms).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Yi).box("sinf",Mt).box("frma",function(s){s=tp(s.reader).codec,$d.has(s)&&(n.g=$d.get(s))}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new g(2,2,2010);this.g==wm&&Ne("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(s,o){n.j.set(s,r[o])})},Yd.prototype.parse=function(e){var t=this;if(this.g==wm)return[];var n=[],i=0,r=[];return new on().box("moof",function(s){i=s.start,r=[],Mt(s)}).box("traf",function(s){r.push({baseMediaDecodeTime:null,ld:t.h,md:t.i,mh:[],timescale:9e4}),Mt(s)}).R("trun",function(s){var o=r[r.length-1];s=Qc(s.reader,s.version,s.flags),o.mh.push(s)}).R("tfhd",function(s){var o=r[r.length-1];s=Xc(s.reader,s.flags),o.ld=s.ld||t.h,o.md=s.md||t.i,s=s.trackId,t.j.has(s)&&(o.timescale=t.j.get(s))}).R("tfdt",function(s){var o=r[r.length-1];s=Yc(s.reader,s.version),o.baseMediaDecodeTime=s.baseMediaDecodeTime}).box("mdat",function(s){for(var o=i-s.start-8,a=s.reader.Ba(),u=v(r),c=u.next();!c.done;c=u.next()){if(c=c.value,c.baseMediaDecodeTime===null)throw Ne("Unable to find base media decode time for CEA captions!"),new g(2,2,2010);s.reader.seek(a),ZC(t,s.reader,c.baseMediaDecodeTime,c.timescale,c.ld,c.md,o,c.mh,n)}}).parse(e,!1),n};function ZC(e,t,n,i,r,s,o,a,u){var c=0,h=s,p=a.map(function(M){return M.hg});for(p=[].concat.apply([],z(p)),p.length&&(h=p[0].sampleSize||s),t.skip(o+a[0].qf);t.ta();){o=t.S();var E=t.X(),A=null;switch(A=!1,a=1,e.g){case Ml:A=E&31,A=A==6;break;case Cl:a=2,t.skip(1),A=E>>1&63,A=A==39||A==40;break;case Rl:a=2,t.skip(1),A=E>>1&63,A=A==23||A==24;break;default:return}if(A)for(E=0,c<p.length&&(E=p[c].Be||0),E=(n+E)/i,a=v(z1(t.Db(o-a))),A=a.next();!A.done;A=a.next())u.push({packet:A.value,pts:E});else try{t.skip(o-a)}catch{break}h-=o+4,h==0&&(n=c<p.length?n+(p[c].ig||r):n+r,c++,c<p.length?h=p[c].sampleSize||s:h=s)}}G("shaka.cea.Mp4CeaParser",Yd);var wm=0,Ml=1,Cl=2,Rl=3,$d=new Map().set("avc1",Ml).set("avc3",Ml).set("dvav",Ml).set("dva1",Ml).set("hev1",Cl).set("hvc1",Cl).set("dvh1",Cl).set("dvhe",Cl).set("vvc1",Rl).set("vvi1",Rl).set("dvc1",Rl).set("dvi1",Rl);Th("video/mp4",function(){return new Yd});function Qd(){this.g=null}Qd.prototype.init=function(){},Qd.prototype.parse=function(e){this.g?this.g.clearData():this.g=new vn;var t=[];if(e=x(e),!Ba(e))return t;e=this.g.parse(e);var n=e.od(),i=e.fe();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=v(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=v(z1(i.data)),s=r.next();!s.done;s=r.next())t.push({packet:s.value,pts:i.time});return t},G("shaka.cea.TsCeaParser",Qd),Th("video/mp2t",function(){return new Qd});function eR(e){var t=0,n=y(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,(r&1)!=0||r+e>n.byteLength){n=[];break e}var s=x(n,e,r);t.push({type:i,value:s}),e+=r}n=t}return n}function K1(e){return e=wi(Fn(e)),e=eR(e).filter(function(t){return t.type===tR})[0],e?(e=Fr(e.value,!0),(e=Lo(e,"WRMHEADER"))?e:null):null}function Jd(e){try{var t=K1(e);if(t)e:{for(var n=v(Gr(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var s=v(r.children),o=s.next();!o.done;o=s.next()){var a=o.value;if(a.tagName=="LA_URL"){var u=Fn(a);break e}}}u=""}else u="";return u}catch{return""}}var tR=1;function q1(e,t,n){var i=rR(e),r=null;e=[];var s=[],o=null,a=new Set(i.map(function(c){return c.keyId}));a.delete(null);var u="cenc";if(1<a.size)throw new g(2,4,4010);if(!t){if(s=i.filter(function(c){return c.cd=="urn:mpeg:dash:sea:2012"}),1<s.length)throw new g(2,4,4050);s.length&&(o=oR(s[0])),(s=i.find(function(c){return c.cd=="urn:mpeg:dash:mp4protection:2011"}))&&s.encryptionScheme&&(u=s.encryptionScheme),s=i.filter(function(c){return c.cd=="urn:mpeg:dash:mp4protection:2011"?(r=c.init||r,!1):c.cd!="urn:mpeg:dash:sea:2012"}),s.length&&(e=iR(r,u,s,n,a),e.length==0&&(e=[Vr("",u,r)]))}if(i.length&&!o&&(t||!s.length))for(e=[],t=v(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Vr(n,u,r));if(a=Array.from(a)[0]||null)for(u=v(e),t=u.next();!t.done;t=u.next())for(t=v(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=a;return{Lg:a,Rk:r,drmInfos:e,ef:o,Qg:!0}}function nR(e,t,n,i){var r=q1(e,n,i);if(t.Qg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=r.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=r.drmInfos),t.Qg=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(s){return r.drmInfos.some(function(o){return o.keySystem==s.keySystem})}),t.drmInfos.length==0))throw new g(2,4,4008);return r.Lg||t.Lg}function Zd(e){var t=Lr(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=Fn(t)))return t;if((t=Lr(e.node,"urn:microsoft:playready","pro"))&&Fn(t))return Jd(t);if((e=Lr(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=Fn(e))){t=wi(e),e=8,t=y(t);var n=t.getUint8(e);return e+=20,0<n&&(e+=4+16*t.getUint32(e)),e=x(t,e+4),e=ts(e),e=Lo("<pro>"+e+"</pro>"),Jd(e)}return""}function iR(e,t,n,i,r){var s=[];n=v(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var a=i[o.cd];if(a){var u;if((u=Lr(o.node,"urn:microsoft:playready","pro"))&&Fn(u)){u=Fn(u),u=wi(u);var c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Kc(u,c,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(c=null,o.cd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){c=o;var h=r;if(h.size==0)c=null;else{var p=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),E=new Uint8Array([]);c=[{initData:Kc(E,p,h,1),initDataType:"cenc",keyId:c.keyId}]}}u=Vr(a,t,o.init||e||u||c),(a=aR.get(a))&&(u.licenseServerUri=a(o)),s.push(u)}}return s}function rR(e){var t=[];e=v(e);for(var n=e.next();!n.done;n=e.next())(n=sR(n.value))&&t.push(n);return t}function sR(e){var t=e.attributes.schemeIdUri,n=_s(e,"urn:mpeg:cenc:2013","default_KID"),i=ev(e,"urn:mpeg:cenc:2013","pssh").map(or),r=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new g(2,4,4009);var s=[];try{s=i.map(function(o){return{initDataType:"cenc",initData:wi(o),keyId:null}})}catch{throw new g(2,4,4007)}return{node:e,cd:t,keyId:n,init:0<s.length?s:null,encryptionScheme:r}}function oR(e){if(!_.crypto||!_.crypto.subtle)throw Ne("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new g(2,4,4042);var t=Lr(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new g(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new g(2,4,4051);if(t=Lr(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new g(2,4,4051);if(e=t.attributes.IV,t=ri(t.attributes.keyUriTemplate),!e||!t)throw new g(2,4,4051);if(e=kr(e.substr(2)),e.byteLength!=16)throw new g(2,4,4048);return{Zi:t,iv:e}}var aR=new Map().set("com.apple.fps",function(e){if(_.shakaMediaKeysPolyfill==="apple")throw new g(2,4,4054);return(e=Lr(e.node,"https://dashif.org/CPS","Laurl"))&&(e=Fn(e))?e:""}).set("com.widevine.alpha",function(e){var t=Lr(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Fn(t))?t:(e=Lr(e.node,"urn:microsoft","laurl"))&&ri(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Zd).set("com.microsoft.playready.recommendation",Zd).set("com.microsoft.playready.software",Zd).set("com.microsoft.playready.hardware",Zd).set("org.w3.clearkey",function(e){var t=Lr(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Fn(t))?t:(e=Lr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Fn(e))?e:""});function kl(e,t,n,i,r,s){var o=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",i).set("Bandwidth",r).set("Time",s);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(a,u,c,h){if(a=="$$")return"$";var p=o.get(u);if(p==null)return a;switch(u=="RepresentationID"&&c&&(c=void 0),u=="Time"&&typeof p!="bigint"&&(.2<=Math.abs(p-Math.round(p))&&Ne("Calculated $Time$ values must be close to integers"),p=Math.round(p)),h){case void 0:case"d":case"i":case"u":a=p.toString();break;case"o":a=p.toString(8);break;case"x":a=p.toString(16);break;case"X":a=p.toString(16).toUpperCase();break;default:a=p.toString()}return c=_.parseInt(c,10)||1,Array(Math.max(0,c-a.length)+1).join("0")+a})}function W1(e,t){var n=Br(e,t,"timescale"),i=1;n&&(i=Ss(n)||1),n=Br(e,t,"duration");var r=(n=Ss(n||""))?n/i:null,s=Br(e,t,"startNumber"),o=Number(Br(e,t,"presentationTimeOffset"))||0,a=pi(s||"");if((s==null||a==null)&&(a=1),s=null,t=iu(e,t,"SegmentTimeline")){t=Jt(t,"S"),s=i,e=e.ha.duration||1/0;for(var u=a,c=[],h=-o,p=0;p<t.length;++p){var E=t[p],A=t[p+1],M=Tt(E,"t",pi),R=Tt(E,"d",pi),C=Tt(E,"r",Ai);if(E=Tt(E,"k",Ai)||0,M!=null&&(M-=o),R){if(M=M??h,C=C||0,0>C)if(A){if(A=Tt(A,"t",pi),A==null)break;if(M>=A)break;C=Math.ceil((A-M)/R)-1}else{if(e==1/0)break;if(M/s>=e)break;C=Math.ceil((e*s-M)/R)-1}for(0<c.length&&M!=h&&(c[c.length-1].end=M/s),A=0;A<=C;++A)h=M+R,c.push({start:M/s,end:h/s,zg:M,Jb:E,yj:c.length+u}),M=h}}s=c}return{timescale:i,Ke:n,Wa:r,Md:a,hc:o/i||0,yg:o,timeline:s}}function X1(e,t){return[t(e.J),t(e.ga),t(e.pa)].filter(no)}function Br(e,t,n){t=X1(e,t),e=null,t=v(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function iu(e,t,n){t=X1(e,t),e=null,t=v(t);for(var i=t.next();!i.done&&!(e=Nn(i.value,n));i=t.next());return e}function uR(e,t,n,i,r,s){for(var o=_s(e,"http://www.w3.org/1999/xlink","href"),a=_s(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=v(Object.keys(e.attributes)),c=u.next();!c.done;c=u.next()){c=c.value;var h=c.split(":"),p=xh("http://www.w3.org/1999/xlink");h[0]==p&&delete e.attributes[c]}if(5<=s)return jo(new g(2,4,4028));if(a!="onLoad")return jo(new g(2,4,4027));var E=On([i],[o]);return r.request(0,qn(E,t)).Ha(function(A){if(A=Pu(A.data,e.tagName),!A)return jo(new g(2,4,4001,o));for(e.children=[];A.children.length;){var M=A.children.shift();e.children.push(M)}M=v(Object.keys(A.attributes));for(var R=M.next();!R.done;R=M.next())R=R.value,e.attributes[R]=A.attributes[R];return ef(e,t,n,E[0],r,s+1)})}function ef(e,t,n,i,r,s){if(s=s===void 0?0:s,_s(e,"http://www.w3.org/1999/xlink","href")){var o=uR(e,t,n,i,r,s);return n&&(o=o.Ha(void 0,function(){return ef(e,t,n,i,r,s)})),o}o=[];for(var a=v(Zy(e)),u=a.next(),c={};!u.done;c={hd:void 0},u=a.next())c.hd=u.value,_s(c.hd,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(h){return function(p){return p!==h.hd}}(c)):c.hd.tagName!="SegmentTimeline"&&o.push(ef(c.hd,t,n,i,r,s));return Lv(o).Ha(function(){return e})}function lR(e,t,n,i,r,s,o){var a,u=new on().R("sidx",function(c){a=cR(t,i,r,s,o,n,c)});if(e&&u.parse(e),a)return a;throw new g(2,3,3004)}function cR(e,t,n,i,r,s,o){var a=[];o.reader.skip(4);var u=o.reader.S();if(u==0)throw new g(2,3,3005);if(o.version==0)var c=o.reader.S(),h=o.reader.S();else c=o.reader.bd(),h=o.reader.bd();o.reader.skip(2);var p=o.reader.ma();for(e=e+o.size+h,h=0;h<p;h++){var E=o.reader.S(),A=(E&2147483648)>>>31;E&=2147483647;var M=o.reader.S();if(o.reader.skip(4),A==1)throw new g(2,3,3006);a.push(new lt(c/u+n,(c+M)/u+n,function(){return s},e,e+E-1,t,n,i,r)),c+=M,e+=E}return o.parser.stop(),a}function lo(e){this.h=y(e),this.g=new gn(this.h,0)}lo.prototype.ta=function(){return this.g.ta()};function Us(e){var t=Y1(e);if(7<t.length)throw new g(2,3,3002);var n=0;t=v(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Y1(e);e:{i=v(dR);for(var r=i.next();!r.done;r=i.next())if(Dn(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Ba();else{if(t.length==8&&t[1]&224)throw new g(2,3,3001);for(r=i=0;r<t.length;r++){var s=t[r];i=r==0?s&(1<<8-t.length)-1:256*i+s}t=i}return t=e.g.Ba()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ba(),i=y(e.h,e.g.Ba(),t),e.g.skip(t),new fR(n,i)}function Y1(e){var t=e.g.Ba(),n=e.g.X();if(n==0)throw new g(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),x(e.h,t,n)}var dR=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function fR(e,t){this.id=e,this.g=t}function Am(e){if(8<e.g.byteLength)throw new g(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new g(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function hR(e,t,n,i,r,s,o,a,u){function c(){return r}var h=[];e=new lo(e.g);for(var p=null,E=null;e.ta();){var A=Us(e);if(A.id==187){var M=pR(A);M&&(A=n*M.Lj,M=t+M.pj,p!=null&&h.push(new lt(p+o,A+o,c,E,M-1,s,o,a,u)),p=A,E=M)}}return p!=null&&h.push(new lt(p+o,i+o,c,E,null,s,o,a,u)),h}function pR(e){var t=new lo(e.g);if(e=Us(t),e.id!=179)throw new g(2,3,3013);if(e=Am(e),t=Us(t),t.id!=183)throw new g(2,3,3012);t=new lo(t.g);for(var n=0;t.ta();){var i=Us(t);if(i.id==241){n=Am(i);break}}return{Lj:e,pj:n}}function $1(e,t,n){if(t=iu(e,t,"Initialization"),!t)return null;var i=e.J.Ua(),r=t.attributes.sourceURL;r&&(i=On(i,[ri(r)],e.vb())),r=0;var s=null;return(t=Tt(t,"range",Cc))&&(r=t.start,s=t.end),n=new Li(function(){return i},r,s,eS(e),null,null,n,e.ga.encrypted),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,e.ha&&(n.g=e.ha.start+e.ha.duration),n}function mR(e,t,n){var i=Number(Br(e,ru,"presentationTimeOffset"))||0,r=Br(e,ru,"timescale"),s=1;r&&(s=Ss(r)||1);var o=i/s||0,a=$1(e,ru,n);gR(e,a);var u=Do(e);return{rc:function(){var c=iu(u,ru,"RepresentationIndex"),h=u.J.Ua();return c&&(c=ri(c.attributes.sourceURL))&&(h=On(h,[c],u.vb())),c=J1(u),Q1(u,t,a,h,c.start,c.end,o)}}}function Q1(e,t,n,i,r,s,o){var a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne;return X(function(ie){if(ie.g==1)return a=e.presentationTimeline,u=!e.Ob||!e.ha.ah,c=e.ha.start,h=e.ha.duration,p=e.J.mimeType.split("/")[1],E=t,A=null,M=[E(i,r,s,!1),p=="webm"?E(n.N(),n.Sa,n.xa,!0):null],E=null,T(ie,Promise.all(M),2);if(R=ie.h,C=R[0],b=R[1]||null,U=null,$=c-o,Q=c,re=h?c+h:1/0,p=="mp4")var me=lR(C,r,i,n,$,Q,re);else{me=C;var le=new lo(b);if(Us(le).id!=440786851)throw new g(2,3,3008);var pe=Us(le);if(pe.id!=408125543)throw new g(2,3,3009);le=pe.g.byteOffset,pe=new lo(pe.g);for(var ge=null;pe.ta();){var _e=Us(pe);if(_e.id==357149030){ge=_e;break}}if(!ge)throw new g(2,3,3010);for(ge=new lo(ge.g),_e=1e6,pe=null;ge.ta();){var Ie=Us(ge);if(Ie.id==2807729)_e=Am(Ie);else if(Ie.id==17545)if(Ie.g.byteLength==4)pe=Ie.g.getFloat32(0);else if(Ie.g.byteLength==8)pe=Ie.g.getFloat64(0);else throw new g(2,3,3003)}if(pe==null)throw new g(2,3,3011);if(ge=_e/1e9,pe*=ge,me=Us(new lo(me)),me.id!=475249515)throw new g(2,3,3007);me=hR(me,le,ge,pe,i,n,$,Q,re)}for(U=me,W=v(U),q=W.next();!q.done;q=W.next())ne=q.value,ne.codecs=e.J.codecs,ne.mimeType=e.J.mimeType,ne.bandwidth=e.bandwidth;return a.Ed(U),A=new Wt(U),u&&A.Oc(Q,re,!0),ie.return(A)})}function ru(e){return e.dd}function J1(e){var t=iu(e,ru,"RepresentationIndex");return e=Br(e,ru,"indexRange"),e=Cc(e||""),t&&(e=Tt(t,"range",Cc,e)),e}function gR(e,t){if(Z1(e,t),!J1(e))throw new g(2,4,4002)}function Z1(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=Ot&&n!="mp4"&&n!="webm")throw new g(2,4,4006);if(n=="webm"&&!t)throw new g(2,4,4005)}function eS(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.se,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ga.label||null,roles:e.roles||null,language:e.ga.language||null}}function yR(e,t,n){var i=$1(e,tS,n),r=vR(e);if(!r.Wa&&!r.timeline&&1<r.Xc.length)throw new g(2,4,4002);if(!r.Wa&&!e.ha.duration&&!r.timeline&&r.Xc.length==1)throw new g(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new g(2,4,4002);var s=null,o=null;e.pa.id&&e.J.id&&(o=t.get(e.pa.id+","+e.J.id))&&(s=o.segmentIndex);var a=_R(e.ha.start,e.ha.duration,e.J.Ua,r,i,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.vb);return t=!s,s?s.Bd(a,e.presentationTimeline.pb()):s=new Wt(a),e.presentationTimeline.Ed(a),e.Ob&&e.ha.ah||s.Oc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),o&&(o.segmentIndex=s),{rc:function(){return s&&s.getNumReferences()!=0||s.oe(a),Promise.resolve(s)}}}function tS(e){return e.Zb}function vR(e){var t=SR(e);e=W1(e,tS);var n=e.Md;n==0&&(n=1);var i=0;return e.Wa?i=e.Wa*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Wa:e.Wa,startTime:i,Md:n,hc:e.hc,timeline:e.timeline,Xc:t}}function _R(e,t,n,i,r,s,o,a,u,c){var h=i.Xc.length;i.timeline&&i.timeline.length!=i.Xc.length&&(h=Math.min(i.timeline.length,i.Xc.length));for(var p=e-i.hc,E=t?e+t:1/0,A=[],M=i.startTime,R={},C=0;C<h;R={Me:void 0,Ce:void 0},C++){R.Ce=i.Xc[C];var b=M;M=void 0,M=i.Wa!=null?b+i.Wa:i.timeline?i.timeline[C].end:b+t,R.Me=null,R=new lt(e+b,e+M,function(U){return function(){return U.Me==null&&(U.Me=On(n(),[U.Ce.ej],c())),U.Me}}(R),R.Ce.start,R.Ce.end,r,p,e,E,[],"",null,null,Cs,s),R.codecs=a,R.mimeType=o,R.bandwidth=u,A.push(R)}return A}function SR(e){return[e.J.Zb,e.ga.Zb,e.pa.Zb].filter(no).map(function(t){return Jt(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.Nf&&(e.Nf=!0);var n=ri(t.attributes.media);return t=Tt(t,"mediaRange",Cc,{start:0,end:null}),{ej:n,start:t.start,end:t.end}})}function nS(e,t,n,i,r,s,o,a,u){u||e.J.he||(e.J.he=Br(e,co,"initialization"));var c=e.J.he?AR(e,o):null,h=TR(e);ER(h);var p=Do(e);if(h.vd)return Z1(e,c),{rc:function(){var R=kl(h.vd,p.J.originalId,null,null,p.bandwidth||null,null);return R=On(p.J.Ua(),[R]),Q1(p,t,c,R,0,null,h.hc)}};if(h.Wa)return i||e.ga.contentType==="image"||e.ga.contentType==="text"||(n=e.ha.start,i=e.pa.id,u=e.ha.duration,i=(i=i!=null&&s.get(i)||u)?n+i:1/0,e.presentationTimeline.Vf(h.Wa),e.presentationTimeline.kh(n,i)),{rc:function(){return wR(p,h,r,c,s,o,a,e.J.De)}};var E=null;i=i=null,e.pa.id&&e.J.id&&(i=e.pa.id+","+e.J.id,i=n.get(i))&&(E=i.segmentIndex);var A=e.ha.start,M=e.ha.duration?A+e.ha.duration:1/0;return E?(n=E,iS(n,h,A,M,c),n.Pa(e.presentationTimeline.pb())):E=new tf(h,e.J.originalId,e.bandwidth,e.J.Ua,e.vb,A,M,c,o,e.J.De),h.timeline&&e.ga.contentType!=="image"&&e.ga.contentType!=="text"&&e.presentationTimeline.lh(E.h?E.h.timeline:[],A),i&&e.Ob&&(i.segmentIndex=E),{rc:function(){return E instanceof tf&&E.getNumReferences()==0&&iS(E,h,A,M,c),Promise.resolve(E)}}}function co(e){return e.ic}function TR(e){var t=W1(e,co),n=Br(e,co,"media"),i=Br(e,co,"index"),r=Br(e,co,"k"),s=0;return r&&(s=parseInt(r,10)),{Ke:t.Ke,Wa:t.Wa,timescale:t.timescale,Md:t.Md,hc:t.hc,yg:t.yg,timeline:t.timeline,ec:n&&ri(n),vd:i,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,fj:s}}function ER(e){var t=e.vd?1:0;if(t+=e.timeline?1:0,t+=e.Wa?1:0,t==0)throw new g(2,4,4002);if(t!=1&&(e.vd&&(e.timeline=null),e.Ke=null,e.Wa=null),!e.vd&&!e.ec)throw new g(2,4,4002)}function wR(e,t,n,i,r,s,o,a){function u(pe){var ge=pe-C,_e=ge*R,Ie=t.Ke,Ee=ge*Ie;"BigInt"in _&&Ee>Number.MAX_SAFE_INTEGER&&(Ee=BigInt(ge)*BigInt(Ie)),_e+=E,ge=_e+R,Ie=Math.min(ge,h());var De=[],Ge=t.fj;if(Ge)for(var vt=(Ie-_e)/Ge,rt={},Yt=0;Yt<Ge;rt={Fh:void 0},Yt++){var Nt=_e+vt*Yt,Dt=Nt+vt;rt.Fh=Yt+1,rt=new lt(Nt,Dt,function(Lt){return function(){var Xt=kl(b,$,pe,Lt.Fh,U,Ee);return On(Q(),[Xt],re())}}(rt),0,null,i,W,E,h(),[],"",null,null,Cs,s),rt.codecs=e.J.codecs,rt.mimeType=e.J.mimeType,a==0?0<Yt&&rt.Vc():Yt%a!=0&&rt.Vc(),De.push(rt)}return _e=new lt(_e,Ie,function(){if(Ge)return[];var Lt=kl(b,$,pe,null,U,Ee);return On(Q(),[Lt],re())},0,null,i,W,E,h(),De,"",null,null,Cs,s,0<De.length),_e.codecs=e.J.codecs,_e.mimeType=e.J.mimeType,_e.bandwidth=e.bandwidth,_e.j=ge,_e}function c(){var pe=[Math.max(p.pb(),E),Math.min(p.cc(),h())].map(function(ge){return ge-E});return pe=[Math.ceil(pe[0]/R),Math.ceil(pe[1]/R)-1],e.J.cb&&pe[1]++,pe.map(function(ge){return ge+C})}function h(){var pe=A!=null&&r.get(A)||M;return pe?E+pe:1/0}var p=e.presentationTimeline,E=e.ha.start,A=e.pa.id,M=e.ha.duration,R=t.Wa,C=t.Md,b=t.ec,U=e.bandwidth||null,$=e.J.id,Q=e.J.Ua,re=e.vb,W=E-t.hc,q=c();n=e.Ob?Math.max(q[0],q[1]-n+1):q[0],o=o||q[1],q=[];for(var ne=n;ne<=o;++ne){var ie=u(ne);q.push(ie)}var me=new Wt(q);if(q=p.cc()<h(),ne=p.U(),q||ne){var le=Math.max(n,o+1);n=R,e.J.cb&&(n=.1),me.Le(n,function(){var pe=p.pb();me.Pa(pe);var ge=v(c());ge.next(),ge=ge.next().value;for(var _e=[];le<=ge;){var Ie=u(le);_e.push(Ie),le++}return pe>h()&&!_e.length?null:_e})}return Promise.resolve(me)}function AR(e,t){var n=e.J.he;if(n||(n=Br(e,co,"initialization")),!n)return null;n=ri(n);var i=e.J.originalId,r=e.bandwidth||null,s=e.J.Ua,o=e.vb;return t=new Li(function(){var a=kl(n,i,null,null,r,null);return On(s(),[a],o())},0,null,eS(e),null,null,t,e.ga.encrypted),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,e.ha&&(t.g=e.ha.start+e.ha.duration),t}function tf(e,t,n,i,r,s,o,a,u,c){Wt.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=i,this.H=r,this.j=s,this.l=o,this.u=a,this.A=u,this.G=c,xm(this)}He(tf,Wt),d=tf.prototype,d.getNumReferences=function(){return this.h?this.h.timeline.length:0},d.release=function(){Wt.prototype.release.call(this),this.h=null},d.Pa=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function iS(e,t,n,i,r){if(xR(e,r),e.h){if(n=e.h.timeline,e.h.ec!==t.ec&&(e.h.ec=t.ec),n.length){var s=n[n.length-1];t=t.timeline.filter(function(o){return o.end>s.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,z(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;xm(e)}function xR(e,t){if(e.u!==t){e.u=t,e=v(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&y0(n,t)}}function xm(e){if(e.h&&!e.o){for(var t=[],n=v(e.h.timeline),i=n.next();!i.done;i=n.next())i=i.value,i.start>=e.l||0>=i.end||t.push(i);e.h.timeline=t,e.Pa(e.j)}}d.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],s=r.start+this.j;if(r=i<n?t[i+1].start+this.j:this.l===1/0?r.end+this.j:this.l,e>=s&&e<r)return i+this.i}return null},d.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var i=this.h.timeline[e],r=i.yj,s=i.zg+this.h.yg;n=this.j-this.h.hc;var o=this.j+i.end,a=o;e===this.getNumReferences()-1&&this.l!==1/0&&(a=Math.min(a,this.l));for(var u=this.h.codecs,c=this.h.mimeType,h=this.h.bandwidth,p=[],E=(i.end-i.start)/i.Jb,A={},M=0;M<i.Jb;A={Ne:void 0,Gh:void 0},M++){var R=i.start+E*M,C=R+E;A.Gh=M+1,A.Ne=null,A=new lt(this.j+R,this.j+C,function(b){return function(){return t.h?(b.Ne==null&&(b.Ne=rS(t.h.ec,t.F,r,t.B,s,b.Gh,t.C,t.H)),b.Ne):[]}}(A),0,null,this.u,n,this.j,this.l,[],"",null,null,Cs,this.A),A.codecs=u,A.mimeType=c,A.bandwidth=h,this.G==0?0<M&&A.Vc():M%this.G!=0&&A.Vc(),p.push(A)}n=new lt(this.j+i.start,a,function(){return 0<i.Jb||!t.h?[]:rS(t.h.ec,t.F,r,t.B,s,null,t.C,t.H)},0,null,this.u,n,this.j,this.l,p,"",null,null,Cs,this.A,0<i.Jb),n.codecs=u,n.mimeType=c,n.j=o,n.bandwidth=h,this.g[e]=n}return n},d.xb=function(e){xm(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function rS(e,t,n,i,r,s,o,a){return e=kl(e,t,n,s,i||null,r),On(o(),[e],a()).map(function(u){return u.toString()})}function su(e){this.o=null,this.A=e,this.G=new ka,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}su.prototype.configure=function(e){this.o=e},su.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},su.prototype.setManifestType=function(e){this.u=e};function bl(e,t){var n,i,r,s,o,a,u;return X(function(c){if(c.g==1)return n=On(e.i,[IR(e,t)]),i=qn(n,e.o.retryParameters),r=e.A.networkingEngine.request(8,i),Fo(e.G,r),ve(c,2),T(c,r.promise,4);if(c.g!=2)return s=c.h,o=cn(s.data),a=JSON.parse(o),a.VERSION==1&&MR(e,a,s.uri),Me(c,0);if((u=Ce(c))&&u.code==7001)return c.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new se(function(){bl(e,t)}),e.g.da(e.C),H(c)})}function IR(e,t){if(!e.m.length)return t;t=new An(t);var n=e.B||e.m[0],i=Math.round(e.A.getBandwidthEstimate()),r=t.g;return e.u=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.u=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),Ru(r)&&ps(t,r),t.toString()}function MR(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new se(function(){bl(e,i)}),(n=t.TTL)&&(e.C=n),e.g.da(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function ou(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}su.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Dl(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r=v(e.m),s=r.next(),o={};!s.done;o={Zc:void 0},s=r.next())if(o.Zc=s.value,s=t.get(o.Zc))i.push({$f:o.Zc,location:s});else if(s=e.F.find(function(u){return function(c){return c.gk==u.Zc}}(o))){var a=t.get(s["BASE-ID"]);a&&(s["URI-REPLACEMENT"].Ph?(a=new An(a),ma(a,s["URI-REPLACEMENT"].Ph),i.push({$f:o.Zc,location:a.toString()})):i.push({$f:o.Zc,location:a}))}for(r=Date.now(),o=v(e.j.keys()),s=o.next();!s.done;s=o.next())s=s.value,a=e.j.get(s),r>a&&e.j.delete(s);if(i=i.filter(function(u){for(var c=v(e.j.keys()),h=c.next();!h.done;h=c.next())if(h.value.includes(new An(u.location).nb))return!1;return!0}),i.length&&(e.B=i[0].$f),i=i.map(function(u){return u.location}),!i.length&&e.h)for(r=v(e.h.split(",")),o=r.next();!o.done;o=r.next())(o=t.get(o.value))&&(e.B=e.h,i.push(o));if(!i.length)for(t=v(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:On(e.i,i)}function gi(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.u=this.o=!1,this.m=new Set}d=gi.prototype,d.release=function(){for(var e=v(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.u=this.o=!1,this.m.clear()},d.Mi=function(){return this.l},d.Lf=function(){return this.j.slice()},d.ri=function(){return this.i},d.Mg=function(e,t){if(e){if(e.type=="audio")for(var n=v(this.h),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="video")for(n=v(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(r){return r!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(r){return r!==e}));else if(e.type==Ot)for(n=v(this.j),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="image")for(n=v(this.i),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function sS(e,t){var n=[],i=[],r=[],s=[];e=v(e);for(var o=e.next();!o.done;o=e.next()){var a=o.value;o=new Map(a.audioStreams.map(function(p){return[Rm(p),p]}));var u=new Map(a.videoStreams.map(function(p){return[Cm(p),p]})),c=new Map(a.textStreams.map(function(p){return[Ol(p),p]}));if(a=new Map(a.imageStreams.map(function(p){return[Nl(p),p]})),t){var h=dS(Ot);c.set(Ol(h),h),h=dS("image"),a.set(Nl(h),h)}n.push(o),i.push(u),r.push(c),s.push(a)}return{Fg:n,Nh:i,Jh:r,Zg:s}}d.jf=function(e,t,n){n=n===void 0?!1:n;var i=this,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt;return X(function(rt){if(rt.g==1){if(r=jn,!t&&e.length==1)return s=sS(e,!1),o=s.Fg,a=s.Nh,u=s.Jh,c=s.Zg,i.h=Array.from(o[0].values()),i.g=Array.from(a[0].values()),i.j=Array.from(u[0].values()),i.i=Array.from(c[0].values()),rt.s(2);for(h=n?i.m.size:0,p=-1,E=0;E<e.length;E++)A=e[E],i.m.has(A.id)||(i.m.add(A.id),p==-1&&(p=E));return p==-1?rt.return():(M=sS(e,!0),R=M.Fg,C=M.Nh,b=M.Jh,U=M.Zg,T(rt,Promise.all([fo(i,i.h,R,p,au,ho,h),fo(i,i.g,C,p,au,ho,h),fo(i,i.j,b,p,au,ho,h),fo(i,i.i,U,p,au,ho,h)]),2))}if($=0,Q=[],i.g.length&&i.h.length)for(le=v(i.h),pe=le.next();!pe.done;pe=le.next())for(ge=pe.value,_e=v(i.g),Ie=_e.next();!Ie.done;Ie=_e.next())Ee=Ie.value,De=F(ge.drmInfos,Ee.drmInfos),ge.drmInfos.length&&Ee.drmInfos.length&&!De.length||(Ge=(ge.bandwidth||0)+(Ee.bandwidth||0),ge.dependencyStream&&(Ge+=ge.dependencyStream.bandwidth||0),Ee.dependencyStream&&(Ge+=Ee.dependencyStream.bandwidth||0),vt=$++,Q.push({id:vt,language:ge.language,disabledUntilTime:0,primary:ge.primary,audio:ge,video:Ee,bandwidth:Ge,drmInfos:De,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(re=i.g.length?i.g:i.h,W=v(re),q=W.next();!q.done;q=W.next())ne=q.value,ie=$++,me=ne.bandwidth||0,ne.dependencyStream&&(me+=ne.dependencyStream.bandwidth||0),Q.push({id:ie,language:ne.language,disabledUntilTime:0,primary:ne.primary,audio:ne.type==r.V?ne:null,video:ne.type==r.la?ne:null,bandwidth:me,drmInfos:ne.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});i.l=Q,H(rt)})};function oS(e){var t,n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e;return X(function(Ie){switch(Ie.g){case 1:if(t=jn,e.length==1)return Ie.return(e[0]);for(n=e.map(function(Ee){return new Map(Ee.filter(function(De){return De.type===t.V}).map(function(De){return[Rm(De),De]}))}),i=e.map(function(Ee){return new Map(Ee.filter(function(De){return De.type===t.la}).map(function(De){return[Cm(De),De]}))}),r=e.map(function(Ee){return new Map(Ee.filter(function(De){return De.type===t.va}).map(function(De){return[Ol(De),De]}))}),s=e.map(function(Ee){return new Map(Ee.filter(function(De){return De.type===t.bf}).map(function(De){return[Nl(De),De]}))}),o=v(r),a=o.next();!a.done;a=o.next())u=a.value,c=cS(t.va),u.set(Ol(c),c);for(h=v(s),p=h.next();!p.done;p=h.next())E=p.value,A=cS(t.bf),E.set(Nl(A),A);return M=new gi,T(Ie,fo(M,[],n,0,nf,rf,0),2);case 2:return R=Ie.h,T(Ie,fo(M,[],i,0,nf,rf,0),3);case 3:return C=Ie.h,T(Ie,fo(M,[],r,0,nf,rf,0),4);case 4:return b=Ie.h,T(Ie,fo(M,[],s,0,nf,rf,0),5);case 5:if(U=Ie.h,$=0,C.length&&R.length)for(ne=v(R),ie=ne.next();!ie.done;ie=ne.next())for(me=ie.value,le=v(C),pe=le.next();!pe.done;pe=le.next())ge=pe.value,_e=$++,ge.variantIds.push(_e),me.variantIds.push(_e);else for(Q=C.concat(R),re=v(Q),W=re.next();!W.done;W=re.next())q=W.value,q.variantIds=[$++];return Ie.return(C.concat(R).concat(b).concat(U))}})}function fo(e,t,n,i,r,s,o){var a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie;return X(function(me){switch(me.g){case 1:for(a=[],u=0;u<n.length;u++)u>=i?a.push(new Set(n[u].values())):a.push(new Set);c=v(t),h=c.next();case 2:if(h.done){me.s(4);break}return p=h.value,T(me,CR(e,p,n,i,s,a,o),5);case 5:if(E=me.h,!E)throw new g(2,4,4037);h=c.next(),me.s(2);break;case 4:for(A=v(a),M=A.next();!M.done;M=A.next())for(R=M.value,C=v(R),b=C.next();!b.done;b=C.next())U=b.value,($=RR(e,U,n,r,s,a))&&t.push($);for(Q=v(a),re=Q.next();!re.done;re=Q.next())for(W=re.value,q=v(W),ne=q.next(),ie={};!ne.done;ie={pg:void 0},ne=q.next())if(ie.pg=ne.value,!Mm(ie.pg)&&t.some(function(le){return function(pe){return Im(e,le.pg,pe)}}(ie)))throw new g(2,4,4037);return me.return(t)}})}function CR(e,t,n,i,r,s,o){return X(function(a){return a.g==1?(lS(e,n,t,0<o),t.matchedStreams?t.segmentIndex?T(a,aS(t,i+o),2):a.s(2):a.return(!1)):(uS(t,i,r,s,o),a.return(!0))})}function aS(e,t){var n,i,r,s,o,a;return X(function(u){if(u.g==1){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)s=i[r],n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex()),s.dependencyStream&&!s.dependencyStream.segmentIndex&&n.push(s.dependencyStream.createSegmentIndex());return T(u,Promise.all(n),2)}if(e.segmentIndex instanceof Mn)for(o=t;o<i.length;o++)a=i[o],a.segmentIndex&&e.segmentIndex.h.push(a.segmentIndex);H(u)})}function RR(e,t,n,i,r,s){if(Mm(t))return null;var o=i(t);return lS(e,n,o),o.createSegmentIndex&&(o.createSegmentIndex=function(){return X(function(a){return o.segmentIndex?a.s(0):(o.segmentIndex=new Mn,T(a,aS(o,0),0))})}),!o.matchedStreams||!o.matchedStreams.length?null:(uS(o,0,r,s,0),o)}function uS(e,t,n,i,r){var s=e.matchedStreams;for(t+=r;t<s.length;t++){var o=s[t];n(e,o);var a=!0;if(e.type=="audio"&&No(e.language,o.language)==0&&(a=!1),a&&(i[t-r].delete(o),o.fullMimeTypes))for(o=v(o.fullMimeTypes.values()),a=o.next();!a.done;a=o.next())e.fullMimeTypes.add(a.value)}}function au(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=v(t.matchedStreams),i=n.next();!i.done;i=n.next())i=i.value,i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function nf(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function ho(e,t){function n(o,a){o||(o=[]),a=v(a);for(var u=a.next();!u.done;u=a.next())u=u.value,o.includes(u)||o.push(u);return o}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=v(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=F(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new g(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=v(t.closedCaptions),r=i.next();!r.done;r=i.next()){var s=v(r.value);r=s.next().value,s=s.next().value,e.closedCaptions.set(r,s)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=au(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var o=new Mn,a=v(e.trickModeVideo.matchedStreams),u=a.next();!u.done;u=a.next())o.h.push(u.value.segmentIndex);return e.trickModeVideo.segmentIndex=o,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),ho(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),ho(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=au(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var o=new Mn,a=v(e.dependencyStream.matchedStreams),u=a.next();!u.done;u=a.next())o.h.push(u.value.segmentIndex);return e.dependencyStream.segmentIndex=o,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),ho(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),ho(e.dependencyStream,t))}function rf(e,t){var n=e.roles;n||(n=[]);for(var i=v(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=v(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,z(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=v(t.closedCaptions),n=t.next();!n.done;n=t.next())i=v(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function lS(e,t,n,i){i=i!==void 0&&i?n.matchedStreams:[],t=v(t);for(var r=t.next();!r.done;r=t.next()){if(r=kR(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function kR(e,t,n){var i={audio:Rm,video:Cm,text:Ol,image:Nl}[n.type],r=null,s=i(n);if(t.has(s))r=t.get(s);else{s={audio:function(c,h){return Im(e,c,h)},video:function(c,h){return Im(e,c,h)},text:bR,image:DR}[n.type];for(var o={audio:LR,video:PR,text:OR,image:NR}[n.type],a=v(t.values()),u=a.next();!u.done;u=a.next())u=u.value,!s(n,u)||n.fastSwitching!=u.fastSwitching||r&&!o(n,r,u)||(r=u)}return e.u&&!Mm(r)&&t.delete(i(r)),r}function Ll(e,t){return e.mimeType!=t.mimeType?!1:sf(e.codecs)===sf(t.codecs)}d.vh=function(e){this.o=e},d.Bh=function(e){this.u=e};function Im(e,t,n){return!(!Ll(t,n)&&!e.o||t.drmInfos&&!O(t.drmInfos,n.drmInfos))}function bR(e,t){return t.language?!(e.forced!==t.forced||No(e.language,t.language)==0||t.kind!=e.kind):!0}function DR(){return!0}function LR(e,t,n){var i=Ll(e,t),r=Ll(e,n);if(i&&!r)return!1;if(!i&&r||(i=No(e.language,t.language),r=No(e.language,n.language),r>i))return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(s){return e.roles.includes(s)}),r=n.roles.filter(function(s){return e.roles.includes(s)}),r.length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=Pl(e.channelsCount,t.channelsCount,n.channelsCount),i==Wr?!0:i==Bs?!1:(i=Pl(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==Wr?!0:i==Bs?!1:!!(e.bandwidth&&fS(e.bandwidth,t.bandwidth,n.bandwidth)==Wr)))}function PR(e,t,n){var i=Ll(e,t),r=Ll(e,n);if(i&&!r)return!1;if(!i&&r||(i=Pl(e.width*e.height,t.width*t.height,n.width*n.height),i==Wr))return!0;if(i==Bs)return!1;if(e.frameRate){if(i=Pl(e.frameRate,t.frameRate,n.frameRate),i==Wr)return!0;if(i==Bs)return!1}return!!(e.bandwidth&&fS(e.bandwidth,t.bandwidth,n.bandwidth)==Wr)}function OR(e,t,n){var i=No(e.language,t.language),r=No(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(s){return e.roles.includes(s)}),r=n.roles.filter(function(s){return e.roles.includes(s)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function NR(e,t,n){return Pl(e.width*e.height,t.width*t.height,n.width*n.height)==Wr}function cS(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function dS(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Wt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function Pl(e,t,n){if(t==e&&e!=n)return Bs;if(n==e&&e!=t)return Wr;if(t>e){if(n<=e||n-e<t-e)return Wr;if(n-e>t-e)return Bs}else{if(n>e)return Bs;if(e-n<e-t)return Wr;if(e-n>e-t)return Bs}return hS}function fS(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Wr:t<e?Bs:hS}function Mm(e){switch(e.type){case Ot:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Cm(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,sf(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Rm(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,sf(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Ol(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Nl(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function sf(e){if(!km.has(e)){var t=oi(e);km.set(e,t)}return km.get(e)}G("shaka.util.PeriodCombiner",gi),gi.prototype.setUseStreamOnce=gi.prototype.Bh,gi.prototype.setAllowMultiTypeVariants=gi.prototype.vh,gi.prototype.combinePeriods=gi.prototype.jf,gi.prototype.deleteStream=gi.prototype.Mg,gi.prototype.getImageStreams=gi.prototype.ri,gi.prototype.getTextStreams=gi.prototype.Lf,gi.prototype.getVariants=gi.prototype.Mi;var Wr=1,hS=0,Bs=-1,km=new Map;function UR(e,t){var n=new DOMParser,i=BR.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function pS(e,t){try{var n=Rr(e);return UR(n,t)}catch{return null}}var BR=new P(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function of(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.oa=1,this.F=[],this.l={qe:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.u=new Map,this.o=new Map,this.B=new Map,this.ka=new Map,this.m=new gi,this.I=0,this.na=new je(5),this.K=new se(function(){if(e.H&&!e.g.continueLoadingWhenPaused&&(e.G.Ka(e.H,"timeupdate"),e.H.paused)){e.G.qa(e.H,"timeupdate",function(){return TS(e)});return}TS(e)}),this.O=new ka,this.M=null,this.C=[],this.$=1/0,this.fa=!1,this.h=null,this.L=0,this.P=!1,this.G=new _t,this.H=null,this.T=!1,this.Z="",this.ea=function(){return!1},this.W=[]}d=of.prototype,d.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.ea=t),n&&this.i&&this.i.presentationTimeline.U()&&this.K.sb(),this.h&&this.h.configure(this.g),this.m&&(this.m.vh(this.g.dash.multiTypeVariantsAllowed&&Co()),this.m.Bh(this.g.dash.useStreamOnceInPeriodFlattening))},d.start=function(e,t){var n=this,i;return X(function(r){if(r.g==1)return n.fa=t.isLowLatencyMode(),n.A=[e],n.j=t,T(r,bm(n),2);if(i=r.h,n.j&&Dm(n,i),!n.j)throw new g(2,7,7001);return r.return(n.i)})},d.stop=function(){for(var e=v(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o.clear(),this.B.clear(),this.u.clear(),this.l={qe:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.m=null,this.K!=null&&(this.K.stop(),this.K=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.O.destroy()},d.update=function(){var e=this,t;return X(function(n){if(n.g==1)return ve(n,2),T(n,bm(e),4);if(n.g!=2)return Me(n,0);if(t=Ce(n),!e.j||!t)return n.return();e.j.onError(t),H(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.cc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.I=t.endTime-e,Dm(this,0))}}},d.banLocation=function(e){this.h&&this.h.banLocation(e)},d.setMediaElement=function(e){this.H=e};function bm(e){var t,n,i,r,s,o,a,u,c,h,p;return X(function(E){return E.g==1?(t=4,n="MPD",i=ek(e),r=e.A,i.length?(r=i,n="Patch",t=6):1<e.A.length&&e.h&&(s=Dl(e.h,"Location",!0),s.length&&(r=s)),o=qn(r,e.g.retryParameters),a=Date.now(),T(E,Pm(e,o,0,{type:t}),2)):E.g!=3?(u=E.h,e.j?(u.uri&&u.uri!=u.originalUri&&!e.A.includes(u.uri)&&e.A.unshift(u.uri),c=new An(u.uri),e.Z=c.g.toString(),T(E,jR(e,u.data,u.uri,n),3)):E.return(0)):(h=Date.now(),p=(h-a)/1e3,e.na.sample(1,p),E.return(p))})}function jR(e,t,n,i){var r,s,o,a,u,c,h,p,E,A;return X(function(M){if(M.g==1){if(r=t,s=e.g.dash.manifestPreprocessor,o=_d,s!=o){if(Vt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),a=pS(r,i),!a)throw new g(2,4,4001,n);s(a),r=Ki(a.outerHTML)}if(u=Pu(r,i),!u)throw new g(2,4,4001,n);return c=e.g.dash.manifestPreprocessorTXml,h=Sd,c!=h&&c(u),i==="Patch"?M.return(FR(e,u)):e.g.dash.disableXlinkProcessing?M.return(mS(e,u,n)):(p=e.g.dash.xlinkFailGracefully,E=ef(u,e.g.retryParameters,p,n,e.j.networkingEngine),Fo(e.O,E),T(M,E.promise,2))}return A=M.h,M.return(mS(e,A,n))})}function mS(e,t,n){var i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt,rt,Yt,Nt,Dt,Lt,Xt,kt,jt,St,bt,ln,Yn,In,Cn,Hn,Qn,ia,Fs,mo;return X(function(xr){switch(xr.g){case 1:for(e.h&&e.h.l.clear(),i=[n],r=[],s=new Map,o=Jt(t,"Location"),a=v(o),u=a.next();!u.done;u=a.next())c=u.value,h=c.attributes.serviceLocation,(p=or(c))&&(E=On(i,[p])[0],h&&(e.h?ou(e.h,"Location",h,E):s.set(h,E)),r.push(E));if(e.h?(A=Dl(e.h,"Location",!0),0<A.length&&(i=e.A=A)):r.length&&(i=e.A=r),e.l.qe=t.attributes.id||"",e.l.Id=Tt(t,"publishTime",Qs)||0,e.F=Jt(t,"PatchLocation"),M=Promise.resolve(),(R=Nn(t,"ContentSteering"))&&e.j)for(C=R.attributes.defaultServiceLocation,e.h?(e.h.i=i,e.h.h=C):(e.h=new su(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=i,e.h.h=C,(b=or(R))&&(Tt(R,"queryBeforeStart",Rc,!1)?M=bl(e.h,b):bl(e.h,b))),U=v(s.keys()),$=U.next();!$.done;$=U.next())Q=$.value,re=s.get(Q),ou(e.h,"Location",Q,re);if(W=Jt(t,"BaseURL"),q=!1,e.h)for(ne=v(W),ie=ne.next();!ie.done;ie=ne.next())me=ie.value,le=me.attributes.serviceLocation,pe=or(me),le&&pe&&(ou(e.h,"BaseURL",le,pe),q=!0);if(e.W=null,q&&e.h||(ge=W.map(or),e.W=On(i,ge)),_e=function(){return e.h&&q?Dl(e.h,"BaseURL"):e.W?e.W:[]},e.l.Ua=_e,Ie=0,W&&W.length&&(Ie=Tt(W[0],"availabilityTimeOffset",Ou)||0),e.l.cb=Ie,e.I=Tt(t,"minimumUpdatePeriod",is,-1),Ee=Tt(t,"availabilityStartTime",Qs),De=Tt(t,"timeShiftBufferDepth",is),Ge=e.g.dash.ignoreSuggestedPresentationDelay,vt=null,Ge||(vt=Tt(t,"suggestedPresentationDelay",is)),rt=e.g.dash.ignoreMaxSegmentDuration,Yt=null,rt||(Yt=Tt(t,"maxSegmentDuration",is)),Nt=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.T=e.i.presentationTimeline.U()&&Nt=="static"),e.l.type=Nt,e.i)for(Dt=e.i.presentationTimeline,Lt=Dt.pb(),Xt=v(e.o.values()),kt=Xt.next();!kt.done;kt=Xt.next())jt=kt.value,jt.segmentIndex&&jt.segmentIndex.Pa(Lt);else St=e.g.dash.ignoreMinBufferTime,bt=0,St||(bt=Tt(t,"minBufferTime",is)||0),ln=0,ln=vt!=null?Math.min(vt,De||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*bt,De||1/0),Dt=new ft(Ee,ln,e.g.dash.autoCorrectDrift);return Dt.Gc(Nt=="static"),Dt.U()&&!isNaN(e.g.availabilityWindowOverride)&&(De=e.g.availabilityWindowOverride),De==null&&(De=1/0),Dt.Fe(De),Yn=t.attributes.profiles||"",e.l.profiles=Yn.split(","),In={Ob:Nt!="static",presentationTimeline:Dt,pa:null,ha:null,ga:null,J:null,bandwidth:0,Nf:!1,cb:Ie,Wb:null,profiles:Yn.split(","),roles:null,vb:function(){return""}},T(xr,M,2);case 2:return e.L=0,Cn=_S(e,In,_e,t,!1),Hn=Cn.duration,Qn=Cn.periods,(Nt!="static"||e.T)&&Cn.Og||Dt.bb(Hn||1/0),e.P&&e.fa&&Dt.wh(e.$),Dt.Vf(Yt||1),e.P&&e.fa&&(ia=vt??e.g.defaultPresentationDelay,Dt.lg(ia)),e.i?(e.i.periodCount=Qn.length,e.i.gapCount=e.L,T(xr,gS(e,Qn,!1),4)):T(xr,e.m.jf(Qn,In.Ob),6);case 6:if(e.i={presentationTimeline:Dt,variants:e.m.l,textStreams:e.m.Lf(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:GR(t),nextUrl:zR(t),periodCount:Qn.length,gapCount:e.L,isLowLatency:e.P,startTime:null},!Dt.Lh()){xr.s(7);break}return Fs=Jt(t,"UTCTiming"),T(xr,JR(e,_e,Fs),8);case 8:if(mo=xr.h,!e.j)return xr.return();Dt.xh(mo);case 7:Dt.me(),e.m&&!e.i.presentationTimeline.U()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),KR(e),H(xr)}})}function gS(e,t,n){var i;return X(function(r){if(r.g==1)return T(r,e.m.jf(t,!0,n),2);e.i.variants=e.m.l,i=e.m.Lf(),0<i.length&&(e.i.textStreams=i),e.i.imageStreams=e.m.i,e.j.filter(e.i),H(r)})}function FR(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe;return X(function(ge){if(ge.g==1){if(n=t.attributes.mpdId,i=Tt(t,"originalPublishTime",Qs),!n||n!==e.l.qe||i!==e.l.Id)throw e.F=[],new g(1,4,4052);for(r=[],s=[],o=new Set,a=v(Zy(t)),u=a.next();!u.done;u=a.next())if(c=u.value,h=kc(c.attributes.sel||""),p=h[h.length-1],E=or(c)||"",p.name==="MPD")if(p.ac==="mediaPresentationDuration"){A=or(c)||"";var _e=is(A);if(_e!=null){e.l.Wb=_e;for(var Ie=v(e.u.values()),Ee=Ie.next();!Ee.done;Ee=Ie.next())Ee.value.Wb=_e}}else if(p.ac==="type"){for(e.i.presentationTimeline.Gc(E=="static"),e.l.type=E,_e=v(e.u.values()),Ie=_e.next();!Ie.done;Ie=_e.next())Ie.value.Ob=E=="dynamic";E=="static"&&(e.I=-1)}else p.ac==="publishTime"?e.l.Id=Qs(E)||0:p.ac===null&&c.tagName==="add"&&s.push(c);else if(p.name==="PatchLocation")tv(e.F,c);else if(p.name==="Period")c.tagName==="add"?s.push(c):c.tagName==="remove"&&p.id&&HR(e,p.id);else if(p.name==="SegmentTemplate"){if(Ie=kc(c.attributes.sel||""),_e=Ie[Ie.length-1],_e.ac){Ie=yS(e,Ie),Ee=or(c)||"";for(var De=v(Ie),Ge=De.next();!Ge.done;Ge=De.next())Ge=e.u.get(Ge.value),iv(Ge.J.ic,c.tagName,_e.ac,Ee);_e=Ie}else _e=[];for(M=_e,R=v(M),C=R.next();!C.done;C=R.next())b=C.value,o.add(b)}else if(p.name==="SegmentTimeline"||p.name==="S"){for(_e=kc(c.attributes.sel||""),_e=yS(e,_e),Ie=v(_e),Ee=Ie.next();!Ee.done;Ee=Ie.next())Ee=e.u.get(Ee.value),Ee=iu(Ee,co,"SegmentTimeline"),De=Jt(Ee,"S"),tv(De,c),Ee.children=De;for(U=_e,$=v(U),Q=$.next();!Q.done;Q=$.next())re=Q.value,o.add(re)}for(W=v(o),q=W.next();!q.done;q=W.next())ne=q.value,vS(e,ne);for(ie=v(s),me=ie.next();!me.done;me=ie.next())le=me.value,r.push.apply(r,z(VR(e,le)));return r.length?(e.i.periodCount+=r.length,e.i.gapCount=e.L,T(ge,gS(e,r,!0),2)):ge.s(2)}e.l.type=="static"&&(pe=e.l.Wb,e.i.presentationTimeline.bb(pe||1/0)),H(ge)})}function VR(e,t){return _S(e,{Ob:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,pa:null,ha:null,ga:null,J:null,bandwidth:0,Nf:!1,cb:e.l.cb,profiles:e.l.profiles,Wb:e.l.Wb,roles:null,vb:function(){return""}},e.l.Ua,t,!0).periods}function HR(e,t){e.i.periodCount--;for(var n=v(e.u.keys()),i=n.next();!i.done;i=n.next())if(i=i.value,i.startsWith(t)){var r=e.u.get(i);iu(r,co,"SegmentTimeline").children=[],vS(e,i),e.u.delete(i)}e.C=e.C.filter(function(s){return s!==t})}function yS(e,t){var n="",i="",r=-1,s="";t=v(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.name==="Period"?n=o.id:o.name==="AdaptationSet"?(i=o.id,o.position!==null&&(r=o.position)):o.name==="Representation"&&(s=o.id);if(t=[],s)t.push(n+","+s);else if(i)for(r=v(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.pa.id===n&&e.ga.id===i&&e.J.id&&t.push(n+","+e.J.id);else if(-1<r)for(i=v(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.pa.id===n&&e.ga.position===r&&e.J.id&&t.push(n+","+e.J.id);return t}function vS(e,t){var n=e.u.get(t),i=e.o.get(t);i.segmentIndex&&i.segmentIndex.Pa(e.i.presentationTimeline.pb());try{var r=nS(n,function(s,o,a,u){return wS(e,s,o,a,u)},e.o,!0,e.g.dash.initialSegmentLimit,e.ka,n.J.aesKey,null,!0);i.createSegmentIndex=function(){return X(function(s){if(s.g==1)return i.segmentIndex?s.s(0):T(s,r.rc(),3);i.segmentIndex=s.h,H(s)})}}catch(s){if(t=n.J.contentType,t!=Ot&&t!="application"&&t!="image"||s.code!=4002)throw s}}function GR(e){var t=Nn(e,"ServiceDescription");if(!t||(e=Nn(t,"Latency"),t=Nn(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function zR(e){if(e=Jt(e,"SupplementalProperty"),!e.length)return null;e=v(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function _S(e,t,n,i,r){var s=t.Wb;s||(s=Tt(i,"mediaPresentationDuration",is),e.l.Wb=s);var o=0;e.i&&e.i.presentationTimeline&&e.T&&(o=e.i.presentationTimeline.Hb());var a=[],u=o;i=Jt(i,"Period");for(var c=0;c<i.length;c++){var h=i[c],p=i[c+1],E=Tt(h,"start",is,u),A=h.attributes.id,M=Tt(h,"duration",is);E=c==0&&E==0&&e.T?o:E;var R=null;if(p){var C=Tt(p,"start",is);C!=null&&(R=C-E+o)}else s!=null&&(R=s-E+o);if(C=Ux,R&&M&&Math.abs(R-M)>C&&R>M&&e.L++,R==null&&(R=M),!(e.M!==null&&A!==null&&E!==null&&E<e.M)||e.C.includes(A)||c+1==i.length){if(E!==null&&(e.M===null||E>e.M)&&(e.M=E),u=qR(e,t,n,{start:E,duration:R,node:h,ah:R==null||!p}),a.push(u),t.pa.id&&R&&e.ka.set(t.pa.id,R),R==null){u=null;break}u=E+R}}if(r)for(t=v(a),n=t.next();!n.done;n=t.next())n=n.value.id,e.C.includes(n)||e.C.push(n);else e.C=a.map(function(b){return b.id});return s!=null?{periods:a,duration:s+o,Og:!1}:{periods:a,duration:u,Og:!0}}function KR(e){var t=Array.from(e.B.keys()).filter(function(a){return!e.C.includes(a)});t=v(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=v(e.B.get(n)),s=r.next();!s.done;s=r.next()){s=s.value;var o=e.o.get(s);o&&(o.segmentIndex&&o.segmentIndex.getNumReferences()!=0?i=!1:(e.m&&e.m.Mg(o,n),e.o.delete(s)))}i&&e.B.delete(n)}}function qR(e,t,n,i){t.pa=Lm(e,i.node,null,n),t.ha=i,t.pa.cb=t.cb,t.pa.id||(t.pa.id="__shaka_period_"+i.start);var r=Jt(i.node,"EventStream");n=t.presentationTimeline.pb(),r=v(r);for(var s=r.next();!s.done;s=r.next())ZR(e,i.start,i.duration,s.value,n);for(n=Jt(i.node,"SupplementalProperty"),n=v(n),r=n.next();!r.done;r=n.next())r=r.value,r.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(r=Ul(e,r))&&(t.vb=r);if(n=Jt(i.node,"AdaptationSet").map(function(A,M){return SS(e,t,M,A)}).filter(no),t.Ob){r=[],s=v(n);for(var o=s.next();!o.done;o=s.next()){o=v(o.value.tj);for(var a=o.next();!a.done;a=o.next())r.push(a.value)}if(r.length!=new Set(r).size)throw new g(2,4,4018)}for(r=new Map,s=v(n),o=s.next();!o.done;o=s.next())for(o=v(o.value.fi),a=o.next();!a.done;a=o.next()){var u=v(a.value);a=u.next().value,u=u.next().value,r.set(a,u)}if(r.size)for(s=null,o=v(n),a=o.next();!a.done;a=o.next()){a=a.value,u=[];for(var c=v(a.streams),h=c.next(),p={};!h.done;p={qg:void 0},h=c.next())if(p.qg=h.value,r.has(p.qg.originalId)){s||(s=Jt(i.node,"AdaptationSet").map(function(A,M){return SS(e,t,M,A)}).filter(no)),h=v(s);for(var E=h.next();!E.done;E=h.next())(E=E.value.streams.find(function(A){return function(M){return M.originalId==A.qg.originalId}}(p)))&&(E.dependencyStream=r.get(E.originalId),u.push(E))}u.length&&a.streams.push.apply(a.streams,z(u))}if(i=n.filter(function(A){return!A.xg}),n=n.filter(function(A){return A.xg}),!e.g.disableIFrames){for(n=v(n),r=n.next();!r.done;r=n.next())for(r=r.value,s=r.xg.split(" "),o=v(i),a=o.next();!a.done;a=o.next())if(a=a.value,s.includes(a.id))for(a=v(a.streams),u=a.next();!u.done;u=a.next())Iv(u.value,r.streams)}if(n=af(e.g.disableAudio,i,"audio"),r=af(e.g.disableVideo,i,"video"),s=af(e.g.disableText,i,Ot),i=af(e.g.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new g(2,4,4004);return{id:t.pa.id,audioStreams:n,videoStreams:r,textStreams:s,imageStreams:i}}function af(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,z(r.streams)),i},[])}function SS(e,t,n,i){function r(pe){var ge=pe.attributes["dvb:fontFamily"];pe=pe.attributes["dvb:url"],ge&&pe&&(pe=On(t.ga.Ua(),[pe],t.vb()),e.j.addFont(ge,pe[0]))}function s(pe){switch(pe){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function o(pe){switch(pe){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ga=Lm(e,i,t.pa,null),t.ga.position=n;var a=!1;n=Jt(i,"Role");var u=n.map(function(pe){return pe.attributes.value}).filter(no),c=void 0,h=t.ga.contentType==Ot;h&&(c="subtitle"),n=v(n);for(var p=n.next();!p.done;p=n.next()){p=p.value;var E=p.attributes.schemeIdUri;if(E==null||E=="urn:mpeg:dash:role:2011")switch(p=p.attributes.value,p){case"main":a=!0;break;case"caption":case"subtitle":c=p}}var A=Jt(i,"EssentialProperty");n=null;var M=!1;p=null,E=!1,A=v(A);for(var R=A.next();!R.done;R=A.next()){R=R.value;var C=R.attributes.schemeIdUri;if(C=="http://dashif.org/guidelines/trickmode")n=R.attributes.value;else if(C=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var b=o(parseInt(R.attributes.value,10));else if(C=="urn:mpeg:mpegB:cicp:ColourPrimaries")var U=s(parseInt(R.attributes.value,10));else C!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(C=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?M=!0:C=="urn:dvb:dash:fontdownload:2014"?r(R):C=="urn:mpeg:dash:urlparam:2014"&&(p=Ul(e,R))||(E=!0))}if(E)return null;var $=null;for(E=Jt(i,"SupplementalProperty"),E=v(E),A=E.next();!A.done;A=E.next())A=A.value,R=A.attributes.schemeIdUri,R=="http://dashif.org/guidelines/last-segment-number"?$=parseInt(A.attributes.value,10)-1:R=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?b=o(parseInt(A.attributes.value,10)):R=="urn:mpeg:mpegB:cicp:ColourPrimaries"?U=s(parseInt(A.attributes.value,10)):R=="urn:dvb:dash:fontdownload:2014"?r(A):R=="urn:mpeg:dash:urlparam:2014"&&(p=Ul(e,A));p&&(t.vb=p),p=Jt(i,"Accessibility");var Q=new Map,re;for(p=v(p),E=p.next();!E.done;E=p.next())if(A=E.value,E=A.attributes.schemeIdUri,A=A.attributes.value,E!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(E!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)E=="urn:mpeg:dash:role:2011"?A!=null&&(u.push(A),A=="captions"&&(c="caption")):E=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(A=="1"?re="visually impaired":A=="2"&&(re="hard of hearing"));else if(E=1,A!=null)for(A=v(A.split(";")),R=A.next();!R.done;R=A.next()){C=R.value;var W=R=void 0;C.includes("=")?(C=C.split("="),R="svc"+C[0],W=C[1].split(",")[0].split(":").pop()):(R="svc"+E,E++,W=C),Q.set(R,un(W))}else Q.set("svc1","und");else if(E=1,A!=null)for(A=A.split(";"),R=v(A),C=R.next();!C.done;C=R.next()){W=C.value;var q=C=void 0;W.includes("=")?(W=W.split("="),C=W[0].startsWith("CC")?W[0]:"CC"+W[0],q=W[1]||"und"):(C="CC"+E,A.length==2?E+=2:E++,q=W),Q.set(C,un(q))}else Q.set("CC1","und");p=Jt(i,"ContentProtection");var ne=q1(p,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.ga.encrypted=0<p.length;var ie=un(t.ga.language||"und"),me=t.ga.label,le=new Map;if(i=Jt(i,"Representation"),!e.g.ignoreSupplementalCodecs){for(p=[],E=v(i),A=E.next();!A.done;A=E.next())R=A.value,(A=_s(R,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(R=Hr(R),R.attributes.codecs=A.split(" ").join(","),R.attributes.id&&(R.attributes.supplementalId=R.attributes.id+"_supplementalCodecs"),p.push(R));i.push.apply(i,z(p))}if(p=i.map(function(pe){var ge=WR(e,t,ne,c,ie,me,a,u,Q,pe,re,$);return ge&&(ge.hdr=ge.hdr||b,ge.colorGamut=ge.colorGamut||U,ge.fastSwitching=M,pe=pe.attributes.dependencyId)?(ge.baseOriginalId=pe,le.set(pe,ge),null):ge}).filter(function(pe){return!!pe}),p.length==0&&le.size==0){if(n=t.ga.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||h||n)return null;throw new g(2,4,4003)}if(!t.ga.contentType||t.ga.contentType=="application")for(t.ga.contentType=AS(p[0].mimeType,p[0].codecs),h=v(p),E=h.next();!E.done;E=h.next())E.value.type=t.ga.contentType;for(h=t.ga.id||"__fake__"+e.oa++,E=v(p),A=E.next();!A.done;A=E.next()){for(A=A.value,R=v(ne.drmInfos),C=R.next();!C.done;C=R.next())C=C.value,C.keyIds=C.keyIds&&A.keyIds?new Set([].concat(z(C.keyIds),z(A.keyIds))):C.keyIds||A.keyIds;A.groupId=h}return i=i.map(function(pe){return pe.attributes.supplementalId||pe.attributes.id}).filter(no),{id:h,contentType:t.ga.contentType,language:ie,Sk:a,streams:p,drmInfos:ne.drmInfos,xg:n,tj:i,fi:le}}function Ul(e,t){if((t=Lr(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Tt(t,"useMPDUrlQuery",Rc,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.Z:n.split("&").map(function(i){if(i=="$querypart$")return e.Z;var r=/\$query:(.*?)\$/g.exec(i);if(r&&r.length==2){r=r[1];var s=new ms(e.Z).get(r);if(s.length)return r+"="+s[0]}return i}).join("&")}}return null}function WR(e,t,n,i,r,s,o,a,u,c,h,p){t.J=Lm(e,c,t.ga,null);var E=t.J.id;if(e.$=Math.min(e.$,t.J.cb),e.P=0<e.$,!QR(t.J))return null;var A=t.ha.start;t.bandwidth=Tt(c,"bandwidth",Ss)||0,t.roles=a;var M=Jt(c,"SupplementalProperty"),R=Jt(c,"EssentialProperty"),C=Jt(c,"ContentProtection");c=null;var b=R.find(function(Ie){return Ie.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(b||(b=M.find(function(Ie){return Ie.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(c=Ul(e,b)),c&&(t.vb=c),b=t.J.contentType,c=b==Ot||b=="application",b=b=="image",C.length&&(t.ga.encrypted=!0);try{var U=void 0;if(n.ef){var $=t.J.Ua,Q=t.vb,re=On($(),[n.ef.Zi],Q()),W=qn(re,e.g.retryParameters);U={bitsKey:128,blockCipherMode:"CBC",iv:n.ef.iv,firstMediaSequenceNumber:0,fetchKey:function(){var Ie,Ee,De;return X(function(Ge){if(Ge.g==1)return T(Ge,Pm(e,W,6),2);if(Ge.g!=3){if(Ie=Ge.h,!Ie.data||Ie.data.byteLength!=16)throw new g(2,4,4049);return Ee={name:"AES-CBC"},De=U,T(Ge,_.crypto.subtle.importKey("raw",Ie.data,Ee,!0,["decrypt"]),3)}De.cryptoKey=Ge.h,U.fetchKey=void 0,H(Ge)})}}}if(t.J.aesKey=U,$=function(Ie,Ee,De,Ge){return wS(e,Ie,Ee,De,Ge)},t.J.dd)var q=mR(t,$,U);else if(t.J.Zb)q=yR(t,e.o,U);else if(t.J.ic)q=nS(t,$,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.ka,U,p,!1);else{var ne=t.ha.duration||0,ie=t.J.Ua,me=t.J.mimeType,le=t.J.codecs;q={rc:function(){var Ie=od(A,ne,ie());return Ie.xb(function(Ee){Ee.mimeType=me,Ee.codecs=le}),Promise.resolve(Ie)}}}}catch(Ie){if((c||b)&&Ie.code==4002)return null;throw Ie}p=nR(C,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),p=new Set(p?[p]:[]),C=!1,M.some(function(Ie){return Ie.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Ie.attributes.value=="JOC"})&&(C=!0),M=!1,c&&(M=a.includes("forced_subtitle")||a.includes("forced-subtitle"));var pe;if(b&&((R=R.find(function(Ie){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Ie.attributes.schemeIdUri)}))&&(pe=R.attributes.value),!pe))return null;var ge;c=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(ge="PQ"),R=t.J.id?t.pa.id+","+t.J.id:"",e.F.length&&E&&e.u.set(t.pa.id+","+E,XR(t));var _e=R&&e.o.has(R)?e.o.get(R):{id:e.oa++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){_e.segmentIndex&&(_e.segmentIndex.release(),_e.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:c,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:p,language:r,originalLanguage:t.ga.language,label:s,type:t.ga.contentType,primary:o,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:a,forced:M,channelsCount:t.J.se,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:C,closedCaptions:u,hdr:ge,colorGamut:void 0,videoLayout:void 0,tilesLayout:pe,accessibilityPurpose:h,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ln(t.J.mimeType,t.J.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return _e.createSegmentIndex=function(){var Ie;return X(function(Ee){if(Ee.g==1)return _e.segmentIndex?Ee.s(0):(Ie=_e,T(Ee,q.rc(),3));Ie.segmentIndex=Ee.h,H(Ee)})},R&&t.Ob&&!e.o.has(R)&&(t=t.pa.id||"",e.B.has(t)||e.B.set(t,[]),e.o.set(R,_e),e.B.get(t).push(R)),_e}function XR(e){function t(n){return n?(n=Do(n),n.dd=null,n.Zb=null,n.ic=Ih(n.ic),n):null}return e=Do(e),e.pa=t(e.pa),e.ga=t(e.ga),e.J=t(e.J),e.ha&&(e.ha=Do(e.ha),e.ha.node=null),e}function TS(e){var t,n;return X(function(i){switch(i.g){case 1:return t=0,ve(i,2),T(i,bm(e),4);case 4:t=i.h,Me(i,3);break;case 2:if(n=Ce(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),Dm(e,t),H(i)}})}function Dm(e,t){if(!(0>e.I)){var n=e.I;0<=e.g.updatePeriod&&(n=e.g.updatePeriod),e.K.da(Math.max(n-t,Oe(e.na)))}}function Lm(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,se:null,audioSamplingRate:null,cb:0,De:0,encrypted:!1},i=i||n.Ua;var r=t.attributes.id,s=t.attributes.supplementalId,o=Jt(t,"BaseURL"),a,u=!1;if(e.h)for(var c=v(o),h=c.next();!h.done;h=c.next()){var p=h.value;h=p.attributes.serviceLocation,p=or(p),h&&p&&(ou(e.h,r,h,p),u=!0)}u&&e.h||(a=o.map(or)),c=t.attributes.contentType||n.contentType,h=t.attributes.mimeType||n.mimeType,p=Ap([t.attributes.codecs||n.codecs]).join(",");var E=Tt(t,"frameRate",Fx)||n.frameRate,A=t.attributes.sar||n.pixelAspectRatio,M=YR(Jt(t,"InbandEventStream"),n.emsgSchemeIdUris),R=Jt(t,"AudioChannelConfiguration");R=$R(R)||n.se;var C=Tt(t,"audioSamplingRate",pi)||n.audioSamplingRate;c||(c=AS(h,p));var b=Nn(t,"SegmentBase"),U=Nn(t,"SegmentTemplate"),$=b&&Tt(b,"availabilityTimeOffset",Ou)||0,Q=U&&Tt(U,"availabilityTimeOffset",Ou)||0,re=o&&o.length&&Tt(o[0],"availabilityTimeOffset",Ou)||0;$=n.cb+re+$+Q,Q=null,(re=Nn(t,"SegmentSequenceProperties"))&&(re=Nn(re,"SAP"))&&(Q=Tt(re,"cadence",Ai)),re=t.attributes.label;var W=Jt(t,"Label");return W&&W.length&&(W=W[0],Fn(W)&&(re=Fn(W))),{Ua:function(){return On(i(),o.length?e.h&&u?Dl(e.h,r):a||[]:[])},dd:b||n.dd,Zb:Nn(t,"SegmentList")||n.Zb,ic:U||n.ic,width:Tt(t,"width",pi)||n.width,height:Tt(t,"height",pi)||n.height,contentType:c,mimeType:h,codecs:p,frameRate:E,pixelAspectRatio:A,emsgSchemeIdUris:M,id:s||r,originalId:r,language:t.attributes.lang,se:R,audioSamplingRate:C,cb:$,he:null,De:Q||n.De,label:re||null,encrypted:!1}}function YR(e,t){t=t.slice(),e=v(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function $R(e){e=v(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&0<t&&t<n.length)return n[t]}}return null}function QR(e){var t=e.dd?1:0;return t+=e.Zb?1:0,t+=e.ic?1:0,t==0?e.contentType==Ot||e.contentType=="application":(t!=1&&(e.dd&&(e.Zb=null),e.ic=null),!0)}function ES(e,t,n,i){var r,s,o,a,u,c,h;return X(function(p){if(p.g==1)return r=[ri(n)],s=On(t(),r),o=qn(s,e.g.retryParameters),o.method=i,a=e.j.networkingEngine.request(4,o,{isPreload:e.ea()}),Fo(e.O,a),T(p,a.promise,2);if(u=p.h,i=="HEAD"){if(!u.headers||!u.headers.date)return p.return(0);c=u.headers.date}else c=cn(u.data);return h=Date.parse(c),isNaN(h)?p.return(0):p.return(h-Date.now())})}function JR(e,t,n){var i,r,s,o,a,u,c,h;return X(function(p){switch(p.g){case 1:i=n.map(function(E){return{scheme:E.attributes.schemeIdUri,value:E.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),s=v(i),o=s.next();case 2:if(o.done){p.s(4);break}switch(a=o.value,ve(p,5),u=a.scheme,c=a.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return p.s(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return p.s(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return h=Date.parse(c),p.return(isNaN(h)?0:h-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ne("NTP UTCTiming scheme is not supported");break;default:Ne("Unrecognized scheme in UTCTiming element",u)}p.s(9);break;case 7:return T(p,ES(e,t,c,"HEAD"),10);case 10:return p.return(p.h);case 8:return T(p,ES(e,t,c,"GET"),11);case 11:return p.return(p.h);case 9:Me(p,3);break;case 5:Ce(p);case 3:o=s.next(),p.s(2);break;case 4:return Ne("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),p.return(0)}})}function ZR(e,t,n,i,r){var s=i.attributes.schemeIdUri||"",o=i.attributes.value||"",a=Tt(i,"timescale",pi)||1,u=Tt(i,"presentationTimeOffset",pi)||0;i=v(Jt(i,"Event"));for(var c=i.next();!c.done;c=i.next()){c=c.value;var h=Tt(c,"presentationTime",pi)||0,p=Tt(c,"duration",pi)||0;h=Math.max((h-u)/a+t,t),p=h+p/a,n!=null&&(h=Math.min(h,t+n),p=Math.min(p,t+n)),p<r||(c={schemeIdUri:s,value:o,startTime:h,endTime:p,id:c.attributes.id||"",timescale:a,eventElement:rv(c),eventNode:Ih(c)},e.j.onTimelineRegionAdded(c))}}function wS(e,t,n,i,r){var s,o,a,u;return X(function(c){return c.g==1?(s=Or,o=r?0:1,a=al(t,n,i,e.g.retryParameters),T(c,Pm(e,a,s,{type:o}),2)):(u=c.h,c.return(u.data))})}function AS(e,t){return t=Ln(e,t),Ia(t)?Ot:e.split("/")[0]}function Pm(e,t,n,i){return i||(i={}),i.isPreload=e.ea(),t=e.j.networkingEngine.request(n,t,i),Fo(e.O,t),t.promise}function ek(e){var t=e.l.Id;if(!e.l.qe||!t||!e.F.length)return[];var n=Date.now()/1e3,i=e.F.filter(function(r){return r=pi(r.attributes.ttl),!r||t+r>n}).map(or).filter(no);return i.length?On(e.A,i):[]}G("shaka.dash.DashParser",of),Ho("application/dash+xml",function(){return new of}),Ho("video/vnd.mpeg.dash.mpd",function(){return new of});function uf(){}G("shaka.dependencies",uf),uf.has=function(e){return Om.has(e)},uf.add=function(e,t){if(!IS[e])throw Error(e+" is not supported");e==xS?Vt("mux.js","mux.js is no longer used in Shaka Player."):Om.set(e,function(){return t})};var xS="muxjs",IS={Tk:xS,ISOBoxer:"ISOBoxer"};uf.Allowed=IS;var Om=new Map([["ISOBoxer",function(){return _.ISOBoxer}]]);function MS(e,t,n){this.type=e,this.ca=t,this.segments=n||null}function lf(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}lf.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};function CS(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function uu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function ot(e,t,n){return(e=uu(e,t))?e.value:n||null}function en(e,t){if(e=uu(e,t),!e)throw new g(2,4,4023,t);return e.value}function RS(e,t,n){n=n===void 0?[]:n,this.ca=t,this.g=e,this.Jb=n}function cf(e,t){this.name=e,this.value=t}function _r(e,t){return e.filter(function(n){return n.name==t})}function kS(e,t){return e.filter(function(n){return en(n,"TYPE")==t})}function Jn(e,t){e=v(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function lu(e,t,n){return n=n===void 0?0:n,(e=Jn(e,t))?Number(e.value):n}function po(e,t,n){return t?bS(e,[t],n):[]}function bS(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(r){return DS(r,n)})),On(e,i)}function DS(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=v(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),s=t.get(r);if(s)e=e.replace(i,s);else throw new g(2,4,4039,r)}}return e}function tk(){this.g=0}function Nm(e,t){t=cn(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new g(2,4,4015);t=0;for(var i=!0,r=v(n),s=r.next();!s.done;s=r.next())if(s=s.value,/^#(?!EXT)/m.test(s)||i)i=!1;else if(s=Um(e,s),--e.g,LS.includes(s.name)){t=1;break}else s.name=="EXT-X-STREAM-INF"&&(i=!0);for(r=[],i=!0,s=0;s<n.length;s++){var o=n[s],a=n[s+1];if(/^#(?!EXT)/m.test(o)||i)i=!1;else{if(o=Um(e,o),nk.includes(o.name)){if(t!=1)throw new g(2,4,4017);o=n.splice(s,n.length-s),n=[],i=[],s=[],a=null,o=v(o);for(var u=o.next();!u.done;u=o.next())u=u.value,/^(#EXT)/.test(u)?(u=Um(e,u),LS.includes(u.name)?r.push(u):u.name=="EXT-X-MAP"?a=u:u.name=="EXT-X-PART"?s.push(u):u.name=="EXT-X-PRELOAD-HINT"?ot(u,"TYPE")=="PART"?s.push(u):ot(u,"TYPE")=="MAP"&&(u.name="EXT-X-MAP",a=u):i.push(u)):/^#(?!EXT)/m.test(u)||(u=u.trim(),a&&i.push(a),n.push(new RS(u,i,s)),i=[],s=[]);return s.length&&(a&&i.push(a),n.push(new RS("",i,s))),new MS(t,r,n)}r.push(o),o.name=="EXT-X-STREAM-INF"&&(o.attributes.push(new cf("URI",a)),i=!0)}}return new MS(t,r)}function Um(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new g(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new Sa(i);var s;(s=ko(i,/^([^,=]+)(?:,|$)/g))&&(r=s[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=ko(i,o);)n.push(new cf(s[1],s[2]||s[3])),Ta(i)}return new lf(e,t,n,r)}var LS="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),nk="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function PS(){}function OS(e,t){try{var n=df(e);return Ra({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(i){return jo(i)}}function df(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new g(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new g(2,1,1004,e);var n=t[0];e=_.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;1<t.length&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=wi(e):r=Ki(e),{data:r,contentType:n}}G("shaka.net.DataUriPlugin",PS),PS.parse=OS,xs("data",OS);function ff(){var e=this;this.g=this.h=null,this.F=1,this.A=new Map,this.I=new Map,this.M=new Map,this.M.set("video",new Map),this.M.set("audio",new Map),this.M.set(Ot,new Map),this.M.set("image",new Map),this.Sb=new Map().set("com.apple.streamingkeydelivery",function(t,n,i){return Ik(e,t,n,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=en(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=en(t,"URI"),n=df(n.split("?")[0]),n=x(n.data),i=Vr("com.widevine.alpha",i,[{initDataType:"cenc",initData:n}]),(t=ot(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=en(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),t=en(t,"URI"),t=df(t.split("?")[0]),t=x(t.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n=Kc(t,n,new Set,0),i=Vr("com.microsoft.playready",i,[{initDataType:"cenc",initData:n}]),(t=Lo(["<PLAYREADY>",mr(t),"</PLAYREADY>"].join(`
`)))&&(i.licenseServerUri=Jd(t)),i=Promise.resolve(i)}else i=Promise.resolve(null);return i}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=en(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=en(t,"URI"),n=df(n.split("?")[0]),n=x(n.data),i=Vr("com.huawei.wiseplay",i,[{initDataType:"cenc",initData:n}]),(t=ot(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}),this.Oa=new Set,this.i=new Map,this.l=null,this.C="",this.Ga=new tk,this.K=-1,this.ea=1/0,this.$=this.Ub=this.Na=!1,this.B=new se(function(){if(e.W&&!e.g.continueLoadingWhenPaused&&(e.T.Ka(e.W,"timeupdate"),e.W.paused)){e.T.qa(e.W,"timeupdate",function(){return nT(e)});return}nT(e)}),this.Ea=yf,this.m=null,this.Ma=0,this.o=1/0,this.Fa=this.Aa=this.P=0,this.Z=new ka,this.G=new Map,this.H=new Map,this.sa=new Map,this.ka=new Map,this.L=new Map,this.na=new Map,this.oa=new Map,this.Tb=this.fa=!1,this.Pb=new je(5),this.j=null,this.O=!0,this.za=new Set,this.T=new _t,this.u=this.W=null,this.Qb=function(){return!1}}d=ff.prototype,d.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.Qb=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.U()&&this.B.sb()},d.start=function(e,t){var n=this,i;return X(function(r){return r.g==1?(n.h=t,n.fa=t.isLowLatencyMode(),T(r,Km(n,[e]).promise,2)):r.g!=3?(i=r.h,n.C=i.uri,T(r,sk(n,i.data),3)):r.return(n.m)})},d.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.Z&&(e.push(this.Z.destroy()),this.Z=null),this.g=this.h=null,this.Oa.clear(),this.m=null,this.i.clear(),this.I.clear(),this.H.clear(),this.A.clear(),this.sa.clear(),this.ka.clear(),this.L.clear(),this.na.clear(),this.oa.clear(),this.za.clear(),this.j&&this.j.destroy(),this.T&&(this.T.release(),this.T=null),Promise.all(e)},d.update=function(){var e=this,t,n,i,r,s,o,a,u,c,h,p,E;return X(function(A){if(A.g==1){if(!Mi(e))return A.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,i=n.filter(function(M){return M.stream.segmentIndex}),r=v(i),s=r.next();!s.done;s=r.next())o=s.value,t.push(ik(e,o));return T(A,Promise.all(t),2)}for(GS(e,i.map(function(M){return M.stream})),a=i.some(function(M){return M.rd==0}),i.length&&!a&&(u=bk,mf(e,u.Qh),c=i.map(function(M){return M.Vb}),e.l.bb(Math.min.apply(Math,z(c))),e.h.updateDuration()),a&&jm(e),h=v(i),p=h.next();!p.done;p=h.next())E=p.value,E.stream.isAudioMuxedInVideo||!E.stream.segmentIndex||Kr(E.stream.segmentIndex)||e.h.disableStream(E.stream);H(A)})};function Bm(e,t){return Mi(e)?e.M.get(t.type):t.ne}function ik(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt,rt,Yt;return X(function(Nt){switch(Nt.g){case 1:if(t.stream.isAudioMuxedInVideo)return Nt.return();for(n=[],i=v(t.N()),r=i.next();!r.done;r=i.next())s=r.value,o=new An(s),a=o.g,t.Wd&&(0<=t.Bb&&a.add("_HLS_msn",String(t.Bb)),0<=t.Cb&&a.add("_HLS_part",String(t.Cb))),t.Xd&&a.add("_HLS_skip","YES"),Ru(a)&&ps(o,Xs(a.toString())),n.push(o.toString());return ve(Nt,2),T(Nt,Km(e,n,!0).promise,4);case 4:u=Nt.h,Me(Nt,3);break;case 2:throw c=Ce(Nt),e.h&&e.h.disableStream(t.stream),c;case 3:if(!t.stream.segmentIndex)return Nt.return();if(h=Nm(e.Ga,u.data),h.type!=1)throw new g(2,4,4017);return p=u.uri,p==u.originalUri||t.N().includes(p)||t.ye.push(p),E=_r(h.ca,"EXT-X-DEFINE"),A=Fm(e,E,p),M=t.stream,R=Bm(e,t),T(Nt,WS(e,h,M.mimeType,t.N,A),5);case 5:for(C=Nt.h,b=C.keyIds,U=C.drmInfos,$=C.encrypted,Q=C.Dg,M.encrypted||!$||Q||(M.encrypted=!0),re=function(Dt,Lt){return Dt.size===Lt.size&&[].concat(z(Dt)).every(function(Xt){return Lt.has(Xt)})},re(M.keyIds,b)||(M.keyIds=b,M.drmInfos=U,e.h.newDrmInfo(M)),W=ZS(e,h,R,A,t.N,t.type),q=W.segments,(ne=W.bandwidth)&&(M.bandwidth=ne),ie=ud(M),me=v(q),le=me.next();!le.done;le=me.next())pe=le.value,pe.Y&&(pe.Y.Wc=ie);M.segmentIndex.Bd(q,e.l.pb()),q.length&&(ge=lu(h.ca,"EXT-X-MEDIA-SEQUENCE",0),Ie=(_e=Jn(h.ca,"EXT-X-SKIP"))?Number(ot(_e,"SKIPPED-SEGMENTS")):0,Ee=KS(ge,q),De=Ee.Bb,Ge=Ee.Cb,t.Bb=De+Ie,t.Cb=Ge,vt=R.get(ge),M.segmentIndex.Pa(vt)),(rt=Kr(M.segmentIndex))&&(t.Bc=rt.startTime,Yt=q[q.length-1],t.Vb=Yt.endTime),Jn(h.ca,"EXT-X-ENDLIST")&&(t.rd=!0),Hm(e,h),Gm(e,h.ca,M.type,A,t.N),H(Nt)}})}d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(e){this.j&&this.j.banLocation(e)},d.setMediaElement=function(e){this.W=e};function NS(e,t,n){n=n===void 0?!1:n;for(var i=e.K==-1,r=v(t),s=r.next();!s.done;s=r.next()){s=s.value;var o=s.stream.segmentIndex,a=Bm(e,s);if(o=Kr(o)){a=v(a);for(var u=a.next();!u.done;u=a.next()){u=v(u.value);var c=u.next().value;if(u.next().value==o.startTime){i&&(e.K=Math.max(e.K,c)),s.tf=c;break}}}}if(!(0>e.K))for(t=v(t),i=t.next();!i.done;i=t.next())i=i.value,(Bl(e,i.type)||n)&&(r=i.stream.segmentIndex)&&(s=e.K-i.tf,0<s&&(r.g.splice(0,s),r=Kr(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),US(e,i,r)))}function rk(e,t){if(e.ea==1/0){t=v(t);for(var n=t.next();!n.done;n=t.next())n=Kr(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ea=Math.min(e.ea,n.h))}if(t=e.ea,t!=1/0){n=v(e.i.values());for(var i=n.next();!i.done;i=n.next())if(i=i.value,!Bl(e,i.type)){var r=i.stream.segmentIndex;if(r!=null){var s=Kr(r);if(s)if(s.h==null)$e("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.N(),"Expect AV sync issues!");else for(US(e,i,s.h-t-s.startTime),i=v(r),r=i.next();!r.done;r=i.next())r.value.sg(t)}}}}function US(e,t,n){if(!(.001>Math.abs(n))){t.Bc+=n,t.Vb+=n,e=Bm(e,t);for(var i=v(e),r=i.next();!r.done;r=i.next()){var s=v(r.value);r=s.next().value,s=s.next().value,e.set(r,s+n)}t.N()}}function sk(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt,rt,Yt,Nt,Dt,Lt,Xt,kt,jt;return X(function(St){switch(St.g){case 1:return n=jn,i=Nm(e.Ga,t),r=_r(i.ca,"EXT-X-DEFINE"),s=[],o=[],a=[],e.l=new ft(null,0),e.l.Gc(!0),u=function(){return[e.C]},c=null,h=new Map,i.type==1?(e.O=!1,De=_r(i.ca,"EXT-X-DEFINE"),h=Fm(e,De,e.C),c=n.la,Ge="",vt=new Map,T(St,zS(e,e.F++,h,i,u,"",c,Ge,!0,"Media Playlist",null,vt,null,!1,null,!1),7)):(ak(e,r),p=_r(i.ca,"EXT-X-MEDIA"),E=_r(i.ca,"EXT-X-STREAM-INF"),A=_r(i.ca,"EXT-X-IMAGE-STREAM-INF"),M=_r(i.ca,"EXT-X-I-FRAME-STREAM-INF"),R=_r(i.ca,"EXT-X-SESSION-KEY"),C=_r(i.ca,"EXT-X-SESSION-DATA"),b=_r(i.ca,"EXT-X-CONTENT-STEERING"),lk(e,C),T(St,ck(e,b),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(U=[],$=v(E),Q=$.next(),re={};!Q.done;re={Hh:void 0},Q=$.next())W=Q.value,(q=ot(W,"SUPPLEMENTAL-CODECS"))&&(re.Hh=q.split(/\s*,\s*/).map(function(bt){return bt.split("/")[0]}),ne=W.attributes.map(function(bt){return function(ln){var Yn=ln.name,In=ln.value;return Yn=="CODECS"&&(In=bt.Hh.join(","),ln=ln.value.split(","),1<ln.length&&(ln=si("audio",ln))&&(In+=","+ln)),new cf(Yn,In)}}(re)),U.push(new lf(W.id,W.name,ne,null)));for(E.push.apply(E,z(U)),ie=[],me=v(M),le=me.next(),pe={};!le.done;pe={Ih:void 0},le=me.next())ge=le.value,(_e=ot(ge,"SUPPLEMENTAL-CODECS"))&&(pe.Ih=_e.split(/\s*,\s*/).map(function(bt){return bt.split("/")[0]}),Ie=ge.attributes.map(function(bt){return function(ln){var Yn=ln.name;return ln=ln.value,Yn=="CODECS"&&(ln=bt.Ih.join(",")),new cf(Yn,ln)}}(pe)),ie.push(new lf(ge.id,ge.name,Ie,null)));M.push.apply(M,z(ie))}return uk(e,E),vk(e,p),Ee=pk(e,M),T(St,mk(e,E,R,p,u,e.A,Ee),5);case 5:return s=St.h,o=dk(e,p),T(St,fk(e,A,M),6);case 6:a=St.h,St.s(3);break;case 7:rt=St.h,e.i.set(e.C,rt),rt.stream&&(Yt=ud(rt.stream),rt.stream.segmentIndex.xb(function(bt){bt.Y&&(bt.Y.Wc=Yt)})),c=rt.stream.type,s.push({id:0,language:un(Ge||"und"),disabledUntilTime:0,primary:!0,audio:c=="audio"?rt.stream:null,video:c=="video"?rt.stream:null,bandwidth:rt.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new g(2,7,7001);if(YS(e,i),i.type==1&&(Mi(e)&&($S(e,i),Nt=e.o,e.B.da(Nt)),Dt=Array.from(e.i.values()),Vm(e,Dt),jm(e),Gm(e,i.ca,c,h,u)),e.m={presentationTimeline:e.l,variants:s,textStreams:o,imageStreams:a,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.$||!e.g.hls.disableCodecGuessing){St.s(8);break}for(Lt=[],Xt=v(e.m.variants),kt=Xt.next();!kt.done;kt=Xt.next())jt=kt.value,jt.audio&&jt.audio.codecs===""&&Lt.push(jt.audio.createSegmentIndex()),jt.video&&jt.video.codecs===""&&Lt.push(jt.video.createSegmentIndex());return T(St,Promise.all(Lt),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),H(St)}})}function ok(e,t){var n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U;return X(function($){if($.g==1)return n=wp(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=eT(e,t),r=i.segment,s=i.segmentIndex,o=r.N(),a=o[0],u=new An(a),c=u.ab.split(".").pop(),(h=qm.get(c))?$.return(wp(h)):T($,Promise.all([BS(e,r.Y,0),BS(e,r,s)]),2)):$.return(n);if(p=$.h,E=p[1].mimeType,A=p[0].data,M=p[1].data,R="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),C=["audio/mp4","video/mp4","video/iso.segment"],Ba(x(M))){var Q=M,re=e.g.disableAudio,W=e.g.disableVideo,q=e.g.disableText,ne=x(Q),ie=new vn().parse(ne),me=ie.od();ne=ie.Mf();var le=[],pe=!1,ge=!1;if(!re)switch(me.audio){case"aac":case"aac-loas":ie.fb().length&&(le.push("mp4a.40.2"),pe=!0);break;case"mp3":ie.fb().length&&(le.push("mp4a.40.34"),pe=!0);break;case"ac3":ie.fb().length&&(le.push("ac-3"),pe=!0);break;case"ec3":ie.fb().length&&(le.push("ec-3"),pe=!0);break;case"opus":ie.fb().length&&(le.push("opus"),pe=!0)}if(!W)switch(me.video){case"avc":ne.codec?le.push(ne.codec):le.push("avc1.42E01E"),ge=!0;break;case"hvc":ne.codec?le.push(ne.codec):le.push("hvc1.1.6.L93.90"),ge=!0;break;case"av1":le.push("av01.0.01M.08"),ge=!0}if(le.length){if(re=pe&&!ge,W=new Map,ge&&!q){for(q=new sr("video/mp2t"),q.i(Q),Q=v(q.j()),ge=Q.next();!ge.done;ge=Q.next())ge=ge.value,W.set(ge,ge);q.g()}ne={type:re?"audio":"video",mimeType:"video/mp2t",codecs:le.join(", "),language:null,height:ne.height,width:ne.width,channelCount:null,sampleRate:null,closedCaptions:W,Od:null,colorGamut:null,frameRate:ne.frameRate}}else ne=null;if(b=ne)return $.return(b)}else if((r.Y||R.includes(c)||C.includes(E))&&(U=bI(A,M,e.g.disableText)))return $.return(U);return E?$.return(wp(E)):$.return(n)})}function BS(e,t,n){var i,r,s,o,a,u;return X(function(c){switch(c.g){case 1:return t?(i=Or,r=al(t.N(),t.uc(),t.tc(),e.g.retryParameters),s=t instanceof lt?1:0,T(c,js(e,r,i,{type:s}).promise,2)):c.return({mimeType:null,data:null});case 2:if(o=c.h,a=o.data,!t.aesKey){c.s(3);break}return T(c,xp(a,t.aesKey,n),4);case 4:a=c.h;case 3:return t instanceof lt?t.Ld(a,!0):t.Ld(a),(u=o.headers["content-type"])&&(u=u.split(";")[0].toLowerCase()),c.return({mimeType:u,data:a})}})}function jm(e){if(Mi(e)){if(e.Ea==vf){for(var t=1/0,n=1/0,i=v(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.Vb),n=Math.min(n,r.Bc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Fe(t)}}else e.l.bb(HS(e));if(!e.l.u)for(t=v(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=Kr(n.stream.segmentIndex))&&n.h&&e.l.yh(n.h);e.l.me()}function ak(e,t){var n=new An(e.C).g;t=v(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=ot(r,"NAME");var s=ot(r,"VALUE");r=ot(r,"QUERYPARAM"),i&&s&&(e.A.has(i)||e.A.set(i,s)),r&&(i=n.get(r)[0])&&!e.A.has(i)&&e.A.set(r,i)}}function Fm(e,t,n){n=new An(n).g;var i=new Map;t=v(t);for(var r=t.next();!r.done;r=t.next()){var s=r.value,o=ot(s,"NAME"),a=ot(s,"VALUE");r=ot(s,"QUERYPARAM"),s=ot(s,"IMPORT"),o&&a&&(i.has(o)||i.set(o,a)),r&&(o=n.get(r)[0])&&!i.has(o)&&i.set(r,o),s&&(r=e.A.get(s))&&i.set(s,r)}return i}function uk(e,t){t=v(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=ot(i,"AUDIO");n=ot(i,"VIDEO");var s=ot(i,"SUBTITLES");if(i=jS(e,i),s){var o=si(Ot,i);e.H.set(s,o),Dr(i,o)}r&&(s=si("audio",i),s||(s=e.g.hls.defaultAudioCodec),e.H.set(r,s)),n&&(r=si("video",i),r||(r=e.g.hls.defaultVideoCodec),e.H.set(n,r))}}function lk(e,t){t=v(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=ot(i,"DATA-ID");n=ot(i,"URI");var s=ot(i,"LANGUAGE");i=ot(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",po([e.C],n,e.A)[0]),s&&r.set("language",s),i&&r.set("value",i),n=new qe("sessiondata",r),e.h&&e.h.onEvent(n)}}function ck(e,t){var n,i,r,s,o,a;return X(function(u){if(!e.h||!e.g)return u.return();for(i=v(t),r=i.next();!r.done;r=i.next())if(s=r.value,o=ot(s,"PATHWAY-ID"),a=ot(s,"SERVER-URI"),o&&a){e.j=new su(e.h),e.j.configure(e.g),e.j.i=[e.C],e.j.setManifestType("HLS"),e.j.h=o,n=bl(e.j,a);break}return T(u,n,0)})}function dk(e,t){var n=kS(t,"SUBTITLES");t=n.map(function(o){if(e.g.disableText)return null;try{return FS(e,[o],new Map).stream}catch(a){if(e.g.hls.ignoreTextStreamFailures)return null;throw a}}),n=v(n);for(var i=n.next();!i.done;i=n.next()){var r=en(i.value,"GROUP-ID");if((i=e.H.get(r))&&(r=e.I.get(r))){r=v(r);for(var s=r.next();!s.done;s=r.next())s=s.value,s.stream.codecs=i,s.stream.mimeType=zm(Ot,i)||pf(Ot),ea(s.stream)}}return t.filter(function(o){return o})}function ea(e){var t=new Set([Ln(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.xb(function(n){n.mimeType&&t.add(Ln(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function fk(e,t,n){var i,r;return X(function(s){return s.g==1?(i=t.map(function(o){var a,u;return X(function(c){if(c.g==1)return e.g.disableThumbnails?c.return(null):(ve(c,2),T(c,_k(e,o),4));if(c.g!=2)return a=c.h,c.return(a.stream);if(u=Ce(c),e.g.hls.ignoreImageStreamFailures)return c.return(null);throw u})}).concat(n.map(function(o){if(e.g.disableThumbnails)return null;try{var a=VS(e,o);return a.stream.type!=="image"?null:a.stream}catch(u){if(e.g.hls.ignoreImageStreamFailures)return null;throw u}})),T(s,Promise.all(i),2)):(r=s.h,s.return(r.filter(function(o){return o})))})}function hk(e,t,n){t=t.filter(function(a){var u=ot(a,"URI")||"";return a=ot(a,"TYPE"),a!="SUBTITLES"&&(u!=""||a=="AUDIO")});var i={};t=v(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var s=CS(r,!e.j);i[s]?i[s].push(r):i[s]=[r]}for(var o in i)FS(e,i[o],n,!1)}function pk(e,t){return t.map(function(n){return n=VS(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function mk(e,t,n,i,r,s,o){var a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt,rt,Yt,Nt,Dt,Lt,Xt,kt;return X(function(jt){switch(jt.g){case 1:if(a=[],u=new Set,e.g.ignoreDrmInfo||!(0<n.length)){jt.s(2);break}c=v(n),h=c.next();case 3:if(h.done){jt.s(2);break}if(p=h.value,E=en(p,"METHOD"),A=ot(p,"KEYFORMAT")||"identity",M=null,E=="NONE"){jt.s(4);break}if(gf(E)){R=po(r(),en(p,"URI"),s),C=R.sort().join(""),e.L.has(C)||(b=qn(R,e.g.retryParameters),U=js(e,b,6).promise,e.L.set(C,U)),jt.s(4);break}if(A=="identity")return T(jt,iT(e,p,"",r,null,s),12);if($=e.Sb.get(A),!$){Q=null,jt.s(10);break}return T(jt,$(p,"",null),11);case 11:Q=jt.h;case 10:M=Q,jt.s(6);break;case 12:M=jt.h;case 6:if(M){if(M.keyIds)for(re=v(M.keyIds),W=re.next();!W.done;W=re.next())q=W.value,u.add(q);a.push(M)}case 4:h=c.next(),jt.s(3);break;case 2:for(ne={},ie=v(t),me=ie.next();!me.done;me=ie.next())le=me.value,pe=CS(le,!e.j),ne[pe]?ne[pe].push(le):ne[pe]=[le];ge=[];for(_e in ne)Ie=ne[_e],Ee=Ie[0],De=ot(Ee,"FRAME-RATE"),Ge=Number(ot(Ee,"AVERAGE-BANDWIDTH"))||Number(en(Ee,"BANDWIDTH")),vt=ot(Ee,"RESOLUTION"),rt=v(vt?vt.split("x"):[null,null]),Yt=rt.next().value,Nt=rt.next().value,Dt=ot(Ee,"VIDEO-RANGE"),(Lt=ot(Ee,"REQ-VIDEO-LAYOUT"))&&Lt.includes(",")&&(Xt=Lt.split(",").filter(function(St){return St=="CH-STEREO"||St=="CH-MONO"}),Lt=Xt[0]),Lt=Lt||"CH-MONO",kt=gk(e,Ie,i),ge.push.apply(ge,z(yk(e,kt.audio,kt.video,Ge,Yt,Nt,De,Dt,Lt,a,u,o)));return jt.return(ge.filter(function(St){return St!=null}))}})}function gk(e,t,n){for(var i={audio:[],video:[]},r=new Map,s=[],o=!1,a=!1,u=v(t),c=u.next();!c.done;c=u.next()){var h=c.value;c=ot(h,"AUDIO");var p=ot(h,"VIDEO"),E=c||p;E&&(s.includes(E)||s.push(E),(h=ot(h,"PATHWAY-ID"))&&r.set(E,h),c?o=!0:p&&(a=!0))}s.length&&n.length&&(n=n.filter(function(M){return s.includes(en(M,"GROUP-ID"))}),hk(e,n,r)),n=(r=s.sort().join(","))&&e.I.has(r)?e.I.get(r):[],o?i.audio.push.apply(i.audio,z(n)):a&&i.video.push.apply(i.video,z(n)),o=!1;var A=t.map(function(M){return en(M,"URI")});return c=i.audio.find(function(M){return M&&M.N().find(function(R){return A.includes(R)})}),a=jS(e,t[0]),n=si("video",a),(u=si("audio",a))&&!n?(c="audio",o=0<i.audio.length):!i.audio.length&&!i.video.length&&u&&n?(c="video",a=[[n,u].join()]):i.audio.length&&c?(c="audio",o=!0):c=i.video.length&&!i.audio.length?"audio":"video",o||(e=Sk(e,t,a,c),r&&(e.stream.groupId=r),i[e.stream.type]=[e]),i}function jS(e,t){return t=ot(t,"CODECS")||"",e.$=0<t.length,e.$||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Ap(t.split(/\s*,\s*/))}function yk(e,t,n,i,r,s,o,a,u,c,h,p){for(var E=v(n),A=E.next();!A.done;A=E.next())tT(A.value.stream,r,s,o,a,u,null);for(r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r=[],t=v(t),s=t.next();!s.done;s=t.next())for(s=s.value,o=v(n),a=o.next();!a.done;a=o.next()){var M=a.value;(a=s?s.stream:null)&&(a.drmInfos=c,a.keyIds=h),(u=M?M.stream:null)&&(u.drmInfos=c,u.keyIds=h,e.g.disableIFrames||Iv(u,p)),u&&!a&&(u.bandwidth=i),!u&&a&&(a.bandwidth=i),E=s?s.stream.drmInfos:null,A=M?M.stream.drmInfos:null,M=M?M.N().sort().join(","):"";var R=s?s.N().sort().join(","):"",C=[];a&&a.codecs&&C.push(a.codecs),u&&u.codecs&&C.push(u.codecs),M=[M,R,C.sort()].join("-"),a&&u&&!O(E,A)||e.Oa.has(M)||(a={id:e.F++,language:a?a.language:"und",disabledUntilTime:0,primary:!!a&&a.primary||!!u&&u.primary,audio:a,video:u,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(a),e.Oa.add(M))}return r}function vk(e,t){t=kS(t,"CLOSED-CAPTIONS"),e.O=t.length==0,t=v(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=ot(i,"LANGUAGE");n=un(r||"und"),r||(r=ot(i,"NAME"))&&(n=r),r=en(i,"GROUP-ID"),i=en(i,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(r)||e.G.set(r,new Map),e.G.get(r).set(i,n)}}function FS(e,t,n,i){i=i===void 0?!0:i;for(var r=[],s=[],o=new Map,a=v(t),u=a.next();!u.done;u=a.next()){var c=u.value;u=i?en(c,"URI"):ot(c,"URI")||"shaka://hls-muxed",c=en(c,"GROUP-ID"),r.push(u),s.push(c),o.set(c,u)}if(i=s.sort().join(","),u=t[0],t="",a=en(u,"TYPE").toLowerCase(),a=="subtitles"&&(a=Ot),a==Ot)t=ot(u,"CODECS")||"";else for(s=v(s),c=s.next();!c.done;c=s.next())if(c=c.value,e.H.has(c)){t=e.H.get(c);break}if(s=r.sort().join(","),e.i.has(s))return e.i.get(s);if(c=e.F++,e.j){o=v(o);for(var h=o.next();!h.done;h=o.next()){var p=v(h.value);h=p.next().value,p=p.next().value,(h=n.get(h))&&ou(e.j,c,h,p)}}n=ot(u,"LANGUAGE"),o=ot(u,"NAME"),h=ot(u,"DEFAULT")=="YES",a=="audio"?p=(p=ot(u,"CHANNELS"))?parseInt(p.split("/")[0],10):null:p=null;var E;a=="audio"&&(E=ot(u,"CHANNELS"))?(E=E.split("/"),E=E.length!=2?!1:E[1]==="JOC"||E[1].includes("ATMOS")):E=!1;var A=ot(u,"CHARACTERISTICS"),M=ot(u,"FORCED")=="YES";return a=="audio"?u=(u=ot(u,"SAMPLE-RATE"))?parseInt(u,10):null:u=null,r=hf(e,c,r,t,a,n,h,o,p,null,A,M,u,E),r.stream&&(r.stream.groupId=i),e.I.has(i)?e.I.get(i).push(r):e.I.set(i,[r]),e.i.set(s,r),r}function _k(e,t){var n,i,r,s,o,a,u,c,h,p;return X(function(E){return E.g==1?(n=en(t,"URI"),i=ot(t,"CODECS","jpeg")||"",e.i.has(n)?E.return(e.i.get(n)):(r=ot(t,"LANGUAGE"),s=ot(t,"NAME"),o=ot(t,"CHARACTERISTICS"),a=hf(e,e.F++,[n],i,"image",r,!1,s,null,null,o,!1,null,!1),(u=ot(t,"RESOLUTION"))?T(E,a.stream.createSegmentIndex(),3):E.s(2))):(E.g!=2&&(c=Kr(a.stream.segmentIndex),h=c.tilesLayout)&&(a.stream.width=Number(u.split("x")[0])*Number(h.split("x")[0]),a.stream.height=Number(u.split("x")[1])*Number(h.split("x")[1])),(p=ot(t,"BANDWIDTH"))&&(a.stream.bandwidth=Number(p)),e.i.set(n,a),E.return(a))})}function VS(e,t){var n="video",i=en(t,"URI"),r=ot(t,"CODECS")||"";if(r=="mjpg"&&(n="image"),e.i.has(i))return e.i.get(i);var s=ot(t,"LANGUAGE"),o=ot(t,"NAME"),a=ot(t,"CHARACTERISTICS");return n=hf(e,e.F++,[i],r,n,s,!1,o,null,null,a,!1,null,!1),r=ot(t,"RESOLUTION"),s=v(r?r.split("x"):[null,null]),r=s.next().value,s=s.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(s)||void 0,(t=ot(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function Sk(e,t,n,i){for(var r=e.F++,s=[],o=v(t),a=o.next();!a.done;a=o.next()){var u=a.value;a=en(u,"URI"),u=ot(u,"PATHWAY-ID"),e.j&&u&&ou(e.j,r,u,a),s.push(a)}if(o=s.sort().join(",")+n.sort().join(","),e.i.has(o))return e.i.get(o);a=s.join(",");e:{if(t=ot(t[0],"CLOSED-CAPTIONS"),i=="video"){if(e.g.disableText){e.O=!1,t=null;break e}if(t){if(t!="NONE"){t=e.G.get(t);break e}e.O=!1}else if(!t&&e.G.size)for(t=v(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}}t=null}return n=vs(i,n),i=hf(e,r,s,n,i,null,!1,a,null,t,null,!1,null,!1),e.i.set(o,i),i}function hf(e,t,n,i,r,s,o,a,u,c,h,p,E,A){function M(Q){var re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt,rt,Yt,Nt,Dt,Lt,Xt,kt,jt;return X(function(St){switch(St.g){case 1:return re=jn,ve(St,2),T(St,Q.promise,4);case 4:if(W=St.h,Q.aborted)return St.return();if(q=W.uri,q!=W.originalUri&&(ne=b.N(),ne.includes(q)||b.ye.push(q)),ie=Nm(e.Ga,W.data),ie.type!=1)throw new g(2,4,4017);return me=_r(ie.ca,"EXT-X-DEFINE"),le=Fm(e,me,q),pe=!1,(!e.$&&e.g.hls.disableCodecGuessing||e.O&&r==re.la&&!e.g.hls.disableClosedCaptionsDetection)&&0<ie.segments.length&&(e.O=!1,pe=!0),ge=!e.$&&e.g.hls.disableCodecGuessing,_e=Mi(e),T(St,zS(e,0,le,ie,R,i,r,s,o,a,u,c,h,p,E,A,void 0,pe,ge),5);case 5:if(Ie=St.h,Q.aborted)return St.return();if(Ee=Ie.stream,YS(e,ie),Mi(e)&&!_e&&$S(e,ie),b.Bc=Ie.Bc,b.Vb=Ie.Vb,b.Xd=Ie.Xd,b.Wd=Ie.Wd,b.rd=Ie.rd,b.ne=Ie.ne,b.Bb=Ie.Bb,b.Cb=Ie.Cb,b.Tf=!0,C.segmentIndex=Ee.segmentIndex,C.encrypted=Ee.encrypted,C.drmInfos=Ee.drmInfos,C.keyIds=Ee.keyIds,C.mimeType=Ee.mimeType,C.bandwidth=C.bandwidth||Ee.bandwidth,C.codecs=C.codecs||Ee.codecs,C.closedCaptions=C.closedCaptions||Ee.closedCaptions,C.width=C.width||Ee.width,C.height=C.height||Ee.height,C.hdr=C.hdr||Ee.hdr,C.colorGamut=C.colorGamut||Ee.colorGamut,C.frameRate=C.frameRate||Ee.frameRate,C.language=="und"&&Ee.language!="und"&&(C.language=Ee.language),C.language=C.language||Ee.language,C.channelsCount=C.channelsCount||Ee.channelsCount,C.audioSamplingRate=C.audioSamplingRate||Ee.audioSamplingRate,ea(C),C.drmInfos.length&&e.h.newDrmInfo(C),De=!1,(!c&&C.closedCaptions||c&&C.closedCaptions&&c.size!=C.closedCaptions.size)&&(De=!0),e.m&&De&&e.h.makeTextStreamsForClosedCaptions(e.m),r==re.la||r==re.V)for(Ge=v(e.i.values()),vt=Ge.next();!vt.done;vt=Ge.next())rt=vt.value,rt.Tf||rt.type!=r||(rt.stream.mimeType=Ee.mimeType,ea(rt.stream));r==re.va&&(Yt=Kr(Ee.segmentIndex))&&Yt.Y&&(C.mimeType="application/mp4",ea(C)),Nt=ud(C),C.segmentIndex.xb(function(bt){bt.Y&&(bt.Y.Wc=Nt)}),Tk(e)&&(e.Ub?Vm(e,[b]):(e.Ub=!0,Dt=Array.from(e.i.values()),Lt=Dt.filter(function(bt){return bt.stream.segmentIndex}),Vm(e,Lt),jm(e),Xt=e.o,0<Xt&&e.B.da(Xt))),Gm(e,ie.ca,C.type,le,R),e.m&&(e.m.startTime=e.u),Me(St,0);break;case 2:if(kt=Ce(St),C.closeSegmentIndex(),kt.code===7001)return St.return();if(jt=e.h.disableStream(C),!jt)throw kt;H(St)}})}function R(){return e.j&&1<n.length?Dl(e.j,t):b.ye.concat(bS([e.C],n,e.A))}var C=qS(e,i,r,s,o,a,u,c,h,p,E,A);n.includes("shaka://hls-muxed")&&(C.isAudioMuxedInVideo=!0,C.mimeType="video/mp2t",ea(C));var b={stream:C,type:r,ye:[],Bc:0,Vb:0,ne:new Map,Xd:!1,Wd:!1,rd:!1,tf:-1,Bb:-1,Cb:-1,Tf:!1,N:R},U=null,$;return C.createSegmentIndex=function(){return U||(C.isAudioMuxedInVideo?(C.segmentIndex=new Wt([]),Promise.resolve()):($=Km(e,b.N(),!0),U=new Promise(function(Q){Q(M($))})))},C.closeSegmentIndex=function(){U&&!C.segmentIndex&&$.abort(),C.segmentIndex&&(C.segmentIndex.release(),C.segmentIndex=null),U=null},b}function HS(e){var t=1/0;e=v(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Vb));return t}function GS(e,t){var n=[];t=v(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.xb(function(r){n.push(r)});e.l.Ed(n)}function Vm(e,t){if(!Mi(e))for(var n=HS(e),i=v(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Oc(0,n);GS(e,t.map(function(s){return s.stream})),i=Array.from(e.i.values()).filter(function(s){return s.stream.segmentIndex}),n=i.some(function(s){return s.stream.type=="audio"}),r=i.some(function(s){return s.stream.type=="video"}),i=Mi(e)&&!e.Na,n=!Mi(e)&&e.Na&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?NS(e,t,i):(rk(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&NS(e,t))}function Bl(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Tk(e){if(!e.m)return!1;var t=[],n=[];e=v(e.m.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(r){return r.segmentIndex})||0<n.length&&!n.some(function(r){return r.segmentIndex}))}function zS(e,t,n,i,r,s,o,a,u,c,h,p,E,A,M,R,C,b,U){b=b===void 0?!0:b,U=U===void 0?!0:U;var $,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De,Ge,vt,rt,Yt,Nt,Dt,Lt,Xt,kt,jt,St,bt,ln,Yn;return X(function(In){switch(In.g){case 1:if($=i.segments||[],Q=$.every(function(Cn){return!!Jn(Cn.ca,"EXT-X-GAP")}),!$.length||Q)throw new g(2,4,4053);if(Ek(e,i),Mi(e)&&Hm(e,i),re=Mi(e)?e.M.get(o):new Map,W=ZS(e,i,re,n,r,o),q=W.segments,ne=W.bandwidth,ge=pe=le=me=ie=null,!(0<q.length&&b)){In.s(2);break}return T(In,ok(e,q),3);case 3:_e=In.h,o=_e.type,a=_e.language,h=_e.channelCount,M=_e.sampleRate,e.g.disableText||(p=_e.closedCaptions),me=_e.height,ie=_e.width,le=_e.Od,pe=_e.colorGamut,ge=_e.frameRate,U&&(C=_e.mimeType,s=_e.codecs);case 2:if(C){In.s(4);break}return T(In,xk(e,o,s,q),5);case 5:C=In.h,o!=Ot||s||C!="application/mp4"||!q[0]||q[0].Y||(C="text/vtt");case 4:return T(In,WS(e,i,C,r,n),6);case 6:if(Ie=In.h,Ee=Ie.drmInfos,De=Ie.keyIds,Ge=Ie.encrypted,vt=Ie.Dg,Ge&&!Ee.length&&!vt)throw new g(2,4,4026);return rt=qS(e,s,o,a,u,c,h,p,E,A,M,R),rt.encrypted=Ge&&!vt,rt.drmInfos=Ee,rt.keyIds=De,rt.mimeType=C,ne&&(rt.bandwidth=ne),ea(rt),o=="video"&&(ie||me||le||pe)&&tT(rt,ie,me,ge,le,null,pe),Mi(e)&&Hm(e,i),Yt=q[0].startTime,Nt=q[q.length-1],Dt=Nt.endTime,Lt=new Wt(q),rt.segmentIndex=Lt,kt=(Xt=Jn(i.ca,"EXT-X-SERVER-CONTROL"))?uu(Xt,"CAN-SKIP-UNTIL")!=null:!1,jt=Xt?uu(Xt,"CAN-BLOCK-RELOAD")!=null:!1,St=lu(i.ca,"EXT-X-MEDIA-SEQUENCE",0),bt=KS(St,q),ln=bt.Bb,Yn=bt.Cb,In.return({stream:rt,type:o,ye:[],N:r,Bc:Yt,Vb:Dt,Xd:kt,Wd:jt,rd:!1,tf:-1,Bb:ln,Cb:Yn,ne:re,Tf:!1})}})}function KS(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Bb:e,Cb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Bb:e,Cb:n}):(e++,t.m&&(n=0),{Bb:e,Cb:n})}function qS(e,t,n,i,r,s,o,a,u,c,h,p){var E=zm(n,t)||pf(n),A=[];if(u){u=v(u.split(","));for(var M=u.next();!M.done;M=u.next())A.push(M.value)}return u=void 0,M=null,n==Ot?u=A.includes("public.accessibility.transcribes-spoken-dialog")&&A.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":A.includes("public.accessibility.describes-video")&&(M="visually impaired"),A.length||u!=="subtitle"||A.push("subtitle"),e={id:e.F++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:E,codecs:t,kind:n==Ot?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:un(i||"und"),originalLanguage:i,label:s,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:A,forced:c,channelsCount:o,audioSamplingRate:h,spatialAudio:p,closedCaptions:a,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:M,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},ea(e),e}function WS(e,t,n,i,r){var s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De;return X(function(Ge){switch(Ge.g){case 1:if(s=new Map,!e.g.ignoreDrmInfo&&t.segments){for(o=v(t.segments),a=o.next();!a.done;a=o.next())if(u=a.value,c=_r(u.ca,"EXT-X-KEY"),h=null,c.length)for(h=QS(e,t,u.ca,i,r),p=v(c),E=p.next();!E.done;E=p.next())A=E.value,s.set(A,h)}R=M=!1,C=[],b=new Set,U=v(s),$=U.next();case 2:if($.done){Ge.s(4);break}if(Q=$.value,re=v(Q),W=re.next().value,q=re.next().value,ne=W,ie=q,me=en(ne,"METHOD"),me=="NONE"){Ge.s(3);break}if(M=!0,le=ot(ne,"KEYFORMAT")||"identity",pe=null,gf(me)){R=!0,Ge.s(3);break}if(le=="identity")return T(Ge,iT(e,ne,n,i,ie,r),11);if(ge=e.Sb.get(le),!ge){_e=null,Ge.s(9);break}return T(Ge,ge(ne,n,ie),10);case 10:_e=Ge.h;case 9:pe=_e,Ge.s(6);break;case 11:pe=Ge.h;case 6:if(pe){if(pe.keyIds)for(Ie=v(pe.keyIds),Ee=Ie.next();!Ee.done;Ee=Ie.next())De=Ee.value,b.add(De);C.push(pe)}case 3:$=U.next(),Ge.s(2);break;case 4:return Ge.return({drmInfos:C,keyIds:b,encrypted:M,Dg:R})}})}function XS(e,t,n,i,r){if(!_.crypto||!_.crypto.subtle)throw Ne("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new g(2,4,4042);var s=0,o=ot(t,"IV","");if(o){var a=kr(o.substr(2));if(a.byteLength!=16)throw new g(2,4,4048)}else s=lu(n.ca,"EXT-X-MEDIA-SEQUENCE",0);var u=po(i(),en(t,"URI"),r),c=u.sort().join("");if(n=t.toString()+"-"+s+"-"+c,!e.ka.has(n)){var h={bitsKey:128,blockCipherMode:"CBC",iv:a,firstMediaSequenceNumber:s};switch(en(t,"METHOD")){case"AES-256":h.bitsKey=256;break;case"AES-256-CTR":h.bitsKey=256,h.blockCipherMode="CTR"}h.fetchKey=function(){var p,E,A,M;return X(function(R){if(R.g==1)return e.L.has(c)||(p=qn(u,e.g.retryParameters),E=js(e,p,6).promise,e.L.set(c,E)),T(R,e.L.get(c),2);if(R.g!=3){if(A=R.h,!A.data||A.data.byteLength!=h.bitsKey/8)throw new g(2,4,4049);return M={name:h.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:h.bitsKey},T(R,_.crypto.subtle.importKey("raw",A.data,M,!0,["decrypt"]),3)}h.cryptoKey=R.h,h.fetchKey=void 0,H(R)})},e.ka.set(n,h)}return e.ka.get(n)}function YS(e,t){e.u==null&&(t=Jn(t.ca,"EXT-X-START"))&&(e.u=Number(en(t,"TIME-OFFSET")))}function Ek(e,t){var n=Jn(t.ca,"EXT-X-PLAYLIST-TYPE");t=Jn(t.ca,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?mf(e,yf):n?mf(e,vf):mf(e,oT)}function Hm(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var s=Jn(i[r].ca,"EXTINF");if(s){n=Number(s.value.split(",")[0]);break}r--}if(i=Jn(t.ca,"EXT-X-TARGETDURATION"),!i)throw new g(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=Jn(t.ca,"EXT-X-PART-INF"))&&(e.P=Number(en(r,"PART-TARGET"))),t=Jn(t.ca,"EXT-X-SERVER-CONTROL"),e.fa&&e.P?(e.o=e.Tb?5*e.P<=n?Math.min(e.P,e.o):Math.min(n,e.o):Math.min(e.P,e.o),e.Fa=t?Number(en(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?uu(t,"HOLD-BACK"):null,e.Aa=n?Number(n.value):0),e.Ma=Math.max(i,e.Ma)}function $S(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Fa)n=e.Fa;else if(e.Aa)n=e.Aa;else{var i=t.segments.length,r=e.g.hls.liveSegmentsDelay;for(r>i-2&&(r=Math.max(1,i-2)),r=i-r;r<i;r++){var s=Jn(t.segments[r].ca,"EXTINF");n=s?n+Math.ceil(Number(s.value.split(",")[0])):n+e.Ma}}e.u&&0>e.u&&(n=Math.min(-e.u,n),e.u+=n),e.l.zh(0),e.l.lg(n),e.l.Gc(!1)}function QS(e,t,n,i,r){var s=Jn(n,"EXT-X-MAP");if(!s)return null;var o=en(s,"URI"),a=po(i(),o,r);if(o=[a.toString(),ot(s,"BYTERANGE","")].join("-"),!e.sa.has(o)){var u=void 0,c=null,h=!1;n=v(n);for(var p=n.next();!p.done;p=n.next())p=p.value,p.name=="EXT-X-KEY"?(h=en(p,"METHOD"),gf(h)&&p.id<s.id?(h=!1,u=XS(e,p,t,i,r)):h=h!="NONE"):p.name=="EXT-X-BYTERANGE"&&p.id<s.id&&(c=p);t=wk(a,s,c,u,h),e.sa.set(o,t)}return e.sa.get(o)}function wk(e,t,n,i,r){var s=0,o=null;return t=ot(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(s=t.split("@"),o=Number(s[0]),s=Number(s[1]),o=s+o-1,i&&(n=o+1-s,n%16&&(o+=16-n%16))),new Li(function(){return e},s,o,null,null,null,i,r)}function Ak(e,t,n,i,r,s,o,a,u){function c(Ge){Ge=new An(Ge).ab.split(".").pop();var vt=Wm.get(o).get(Ge);return vt||(vt=qm.get(Ge)),vt}var h=i.ca,p=Jn(h,"EXTINF"),E=0,A=0,M=null;i.Jb.length&&(e.m.isLowLatency=!0);var R=null;if(!e.g.hls.ignoreManifestProgramDateTime){var C=Jn(h,"EXT-X-PROGRAM-DATE-TIME");C&&C.value&&(R=Qs(C.value),e.Na=!0)}var b=Cs;if(Jn(h,"EXT-X-GAP")&&(e.m.gapCount++,b=2),!p){if(i.Jb.length==0)throw new g(2,4,4024,"EXTINF");if(!e.fa)return null}var U=[];C=!1;var $=null,Q=!1,re=!1;if(e.fa&&i.Jb.length){E=t&&_.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var W=R,q={},ne=0;ne<i.Jb.length;q={Oe:void 0,ve:void 0},ne++){var ie=i.Jb[ne],me=ne==0?n:U[U.length-1],le=ne==0?r:me.endTime,pe=Number(ot(ie,"DURATION"))||e.P;if(pe){var ge=le+pe,_e=0,Ie=null;if(ie.name=="EXT-X-PRELOAD-HINT"?(_e=(_e=ot(ie,"BYTERANGE-START"))?Number(_e):0,(me=ot(ie,"BYTERANGE-LENGTH"))?Ie=_e+Number(me)-1:_e&&(Ie=Number.MAX_SAFE_INTEGER)):(_e=ot(ie,"BYTERANGE"),Ie=v(JS(me,_e)),_e=Ie.next().value,Ie=Ie.next().value),q.ve=ot(ie,"URI"),q.ve){me=Cs,ot(ie,"GAP")=="YES"&&(e.m.gapCount++,me=2,Q=!0),q.Oe=null;var Ee=function(Ge){return function(){return Ge.Oe==null&&(Ge.Oe=po(a(),Ge.ve,s)),Ge.Oe}}(q);E&&0<=_e&&Ie!=null&&($=Ee,C=!0),le=new lt(le,ge,Ee,_e,Ie,t,0,0,1/0,[],"",null,W,me,u),ie.name=="EXT-X-PRELOAD-HINT"&&(le.Uf(),re=!0),ot(ie,"INDEPENDENT")!="YES"&&0<ne&&le.Vc(),(q=c(q.ve))&&(le.mimeType=q,sT.has(q)&&(le.Y=null)),U.push(le),W&&(W+=pe)}}}}if(p){if(p=Number(p.value.split(",")[0]),p==0)return null;E=r+p}else if(U.length)E=U[U.length-1].endTime;else return null;C&&(Q||U[0].Sa!=0?(C=!1,$=null):U=[]),(p=Jn(h,"EXT-X-BYTERANGE"))?(M=v(JS(n,p.value)),A=M.next().value,M=M.next().value):U.length&&(A=U[0].Sa,M=U[U.length-1].xa),n="",p=null,o=="image"&&(n="1x1",h=Jn(h,"EXT-X-TILES"))&&(n=en(h,"LAYOUT"),(h=ot(h,"DURATION"))&&(p=Number(h)));var De=null;return t=new lt(r,E,function(){return $?$():(De==null&&(De=po(a(),i.g,s)),De||[])},A,M,t,0,0,1/0,U,n,p,R,b,u,0<U.length&&!!i.g),(r=c(i.g))&&(t.mimeType=r,sT.has(r)&&(t.Y=null)),C&&(e.Tb=!0,t.eh(),re&&t.Uf()),t}function JS(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.xa+1,i=n+t-1),[n,i]}function Gm(e,t,n,i,r){if(n=="video"||n=="audio"){var s=e.l.m;if(s&&!Bl(e,n))for(t=_r(t,"EXT-X-DATERANGE"),t=t.filter(function(le){return uu(le,"START-DATE")!=null}).sort(function(le,pe){return le=en(le,"START-DATE"),pe=en(pe,"START-DATE"),le<pe?-1:le>pe?1:0}),n=0;n<t.length;n++){var o=t[n];try{var a=en(o,"ID");if(!e.za.has(a)){var u=en(o,"START-DATE"),c=Qs(u);if(!isNaN(c)){var h=Math.max(0,c-s),p=null,E=ot(o,"END-DATE");if(E){var A=Qs(E);if(!isNaN(A)&&(p=A-s,0>p))continue}if(p==null){var M=ot(o,"DURATION")||ot(o,"PLANNED-DURATION");if(M){var R=parseFloat(M);if(isNaN(R)||(p=h+R),0>c-s+R)continue}}var C=ot(o,"CLASS")||"com.apple.quicktime.HLS",b=ot(o,"END-ON-NEXT")=="YES";if(p==null&&b){for(var U=n+1;U<t.length;U++){var $=ot(t[U],"CLASS")||"com.apple.quicktime.HLS";if(C==$){var Q=en(t[U],"START-DATE"),re=Qs(Q);if(!isNaN(re)&&re&&re>c){p=Math.max(0,re-s);break}}}if(p==null)continue}U=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var W=[],q=v(o.attributes),ne=q.next();!ne.done;ne=q.next()){var ie=ne.value;if(!U.includes(ie.name)){var me=DS(ie.value,i);(ie.name=="X-ASSET-URI"||ie.name=="X-ASSET-LIST")&&(me=po(r(),ie.value,i)[0]),W.push({key:ie.name,description:"",data:me,mimeType:null,pictureType:null})}}1<W.length&&e.h.onMetadata(C,h,p,W),e.za.add(a)}}}catch{}}}}function ZS(e,t,n,i,r,s){var o=t.segments,a=void 0,u=lu(t.ca,"EXT-X-DISCONTINUITY-SEQUENCE",-1),c=lu(t.ca,"EXT-X-MEDIA-SEQUENCE",0),h=Jn(t.ca,"EXT-X-SKIP"),p=h?Number(ot(h,"SKIPPED-SEGMENTS")):0,E=c+p,A=0;Mi(e)&&n.has(E)&&(A=n.get(E)),A===0&&e.Ea==vf&&0<n.size&&!n.has(E)&&e.l.i!=null&&(A=e.l.pb());var M=[],R=null;h=[];for(var C=0;C<o.length;C++){var b=o[C],U=C==0?A:R.endTime;E=c+p+C,Jn(b.ca,"EXT-X-DISCONTINUITY")&&(u++,R&&R.Y&&(R.Y.g=U));for(var $=v(b.ca),Q=$.next();!Q.done;Q=$.next())Q=Q.value,Q.name=="EXT-X-KEY"&&(gf(en(Q,"METHOD"))?a=XS(e,Q,t,r,i):a=void 0);n.set(E,U),$=QS(e,t,b.ca,r,i),(U=Ak(e,$,R,b,U,i,s,r,a))&&((R=lu(b.ca,"EXT-X-BITRATE"))?h.push({bitrate:R,duration:U.endTime-U.startTime}):h.length&&(R=h.pop(),R.duration+=U.endTime-U.startTime,h.push(R)),R=U,U.i=u,Bl(e,s)&&e.K!=null&&E<e.K||M.push(U))}if(t=void 0,h.length&&(t=h.reduce(function(re,W){return re+W.duration},0),t=Math.round(h.reduce(function(re,W){return re+W.bitrate*W.duration},0)/t*1e3)),h=M.some(function(re){return re.h!=null})){for(n={},i=0;i<M.length;n={ae:void 0,$d:void 0,Td:void 0,Dc:void 0,Sd:void 0},i++)if(n.Dc=M[i],n.Dc.h==null)for(n.$d=0,n.ae=i,r=function(re){return function(){var W=M[re.ae];if(W){if(W.h!=null)return W.h+re.$d;re.$d-=W.endTime-W.startTime,re.ae+=1}return null}}(n),n.Sd=0,n.Td=i,o=function(re){return function(){var W=M[re.Td];if(W){if(W!=re.Dc&&(re.Sd+=W.endTime-W.startTime),W.h!=null)return W.h+re.Sd;--re.Td}return null}}(n);n.Dc.h==null;)n.Dc.h=o(),n.Dc.h==null&&(n.Dc.h=r())}if(h)for(n=v(M),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=v(r.g),o=r.next();!o.done;o=r.next())o=o.value,o.h=i,i+=o.endTime-o.startTime;if(n=e.ea,h&&n!=1/0&&!Bl(e,s))for(e=v(M),s=e.next();!s.done;s=e.next())s.value.sg(n);return{segments:M,bandwidth:t}}function zm(e,t){if(e==Ot){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function pf(e){return e==Ot?"text/vtt":Wm.get(e).get("mp4")}function eT(e,t){e=Mi(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.dc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function xk(e,t,n,i){var r,s,o,a,u,c,h,p,E,A,M,R,C;return X(function(b){switch(b.g){case 1:return r=Or,s=eT(e,i),o=s.segment,o.status==2?b.return(pf(t)):(a=o.N(),u=new An(a[0]),c=u.ab.split(".").pop(),h=Wm.get(t),(p=h.get(c))||(p=qm.get(c))||(p=zm(t,n))?b.return(p):(A=1,M=qn(a,e.g.retryParameters),ve(b,2),M.method="HEAD",T(b,js(e,M,r,{type:A}).promise,4)));case 4:R=b.h,E=R.headers["content-type"],Me(b,3);break;case 2:if(C=Ce(b),!C||C.code!=1002&&C.code!=1001){b.s(3);break}return M.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(M.headers.Range="bytes=0-0"),T(b,js(e,M,r,{type:A}).promise,6);case 6:R=b.h,E=R.headers["content-type"];case 3:if(!E){b.s(7);break}if(p=E.toLowerCase().split(";")[0],p!="application/octet-stream"){b.s(8);break}if(R.data.byteLength){b.s(9);break}return M.method="GET",T(b,js(e,M,r,{type:A}).promise,10);case 10:R=b.h;case 9:Ba(x(R.data))&&(p="video/mp2t");case 8:if(p!="application/octet-stream")return b.return(p);case 7:return b.return(pf(t))}})}function tT(e,t,n,i,r,s,o){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=s||void 0,e.colorGamut=o||void 0)}function Km(e,t,n){return js(e,qn(t,e.g.retryParameters),0,{type:n?2:3})}function nT(e){var t,n,i,r,s,o;return X(function(a){switch(a.g){case 1:return e.h?(ve(a,2),t=Date.now(),T(a,e.update(),4)):a.return();case 4:n=Date.now(),Mi(e)&&(i=(n-t)/1e3,e.Pb.sample(1,i),r=0<e.g.updatePeriod?e.g.updatePeriod:e.o,s=Math.max(0,r-Oe(e.Pb)),e.B.da(s)),Me(a,3);break;case 2:if(o=Ce(a),!e.h)return a.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(o),a.return();o.severity=1,e.h.onError(o),e.B.da(.1);case 3:if(!e.h)return a.return();e.h.onManifestUpdated(),H(a)}})}function Mi(e){return e.Ea!=yf}function mf(e,t){e.Ea=t,e.l&&e.l.Gc(!Mi(e)),Mi(e)||e.B.stop()}function js(e,t,n,i){if(!e.Z)throw new g(2,7,7001);return i||(i={}),i.isPreload=e.Qb(),t=e.h.networkingEngine.request(n,t,i),Fo(e.Z,t),t}function gf(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function Ik(e,t,n,i){var r,s,o,a,u,c;return X(function(h){if(h.g==1){if(n=="video/mp2t")throw new g(2,4,4040);if(_.shakaMediaKeysPolyfill==="apple")throw new g(2,4,4041);if(r=en(t,"METHOD"),s=["SAMPLE-AES","SAMPLE-AES-CTR"],!s.includes(r))return h.return(null);o="cenc",r=="SAMPLE-AES"&&(o="cbcs"),a=en(t,"URI"),u=Vr("com.apple.fps",o,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],a);var p=new An(a).nb.replace(/-/g,"").toLowerCase();return(c=p.length===32&&/^[0-9a-f]+$/.test(p)?p:null)||!i?h.s(2):T(h,rT(e,i),3)}return h.g!=2&&(c=h.h),c&&u.keyIds.add(c),h.return(u)})}function iT(e,t,n,i,r,s){var o,a,u,c,h,p,E,A,M,R,C,b;return X(function(U){switch(U.g){case 1:if(n=="video/mp2t")throw new g(2,4,4040);if(_.shakaMediaKeysPolyfill==="apple")throw new g(2,4,4041);if(o=en(t,"METHOD"),a=["SAMPLE-AES","SAMPLE-AES-CTR"],!a.includes(o))return U.return(null);if(u=po(i(),en(t,"URI"),s),u[0].startsWith("data:text/plain;base64,")){c=br(wi(u[0].split("data:text/plain;base64,").pop())),U.s(2);break}return h=u.sort().join(""),e.na.has(h)||(p=qn(u,e.g.retryParameters),E=js(e,p,6).promise,e.na.set(h,E)),T(U,e.na.get(h),3);case 3:A=U.h,c=br(A.data);case 2:if(M="00000000000000000000000000000000",!r){U.s(4);break}return T(U,rT(e,r),5);case 5:(R=U.h)&&(M=R);case 4:return C=new Map,C.set(M,c),b="cenc",o=="SAMPLE-AES"&&(b="cbcs"),U.return(Ic(C,b))}})}function rT(e,t){var n,i,r,s;return X(function(o){return o.g==1?(n=null,e.oa.has(t)?(n=e.oa.get(t),o.s(2)):(i=al(t.N(),t.uc(),t.tc(),e.g.retryParameters),r=Or,T(o,js(e,i,r,{type:0}).promise,3))):(o.g!=2&&(s=o.h,t.Ld(s.data),n=LI(s.data),e.oa.set(t,n)),o.return(n))})}G("shaka.hls.HlsParser",ff);var qm=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),Mk=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),Ck=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),Rk=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),kk=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Wm=new Map().set("audio",Mk).set("video",Ck).set("text",Rk).set("image",kk),sT=new Set(["video/mp2t"].concat(z(ws))),yf="VOD",oT="EVENT",vf="LIVE",bk={Qh:yf,ak:oT,ik:vf};Ho("application/x-mpegurl",function(){return new ff}),Ho("application/vnd.apple.mpegurl",function(){return new ff});function _f(e){return Jd(e)}var Dk=new Map().set("com.microsoft.playready",_f).set("com.microsoft.playready.recommendation",_f).set("com.microsoft.playready.software",_f).set("com.microsoft.playready.hardware",_f);function Xm(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.C=new je(5),this.o=new se(function(){Lk(e)}),this.B=new ka,this.m=new Map,this.A=function(){return!1}}d=Xm.prototype,d.configure=function(e,t){this.g=e,t&&(this.A=t)},d.start=function(e,t){var n=this;return X(function(i){if(i.g==1)return n.l=[e],n.h=t,T(i,Ym(n),2);if(!n.h)throw new g(2,7,7001);return i.return(n.j)})};function Lk(e){var t;X(function(n){switch(n.g){case 1:return ve(n,2),T(n,Ym(e),4);case 4:Me(n,3);break;case 2:t=Ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();H(n)}})}d.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},d.update=function(){var e=this,t;return X(function(n){if(n.g==1)return ve(n,2),T(n,Ym(e),4);if(n.g!=2)return Me(n,0);if(t=Ce(n),!e.h||!t)return n.return();e.h.onError(t),H(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){};function Ym(e){var t,n,i,r,s,o,a;return X(function(u){if(u.g==1)return t=qn(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.A()}),Fo(e.B,r),T(u,r.promise,2);if(s=u.h,!e.h)return u.return();s.uri&&!e.l.includes(s.uri)&&e.l.unshift(s.uri);var c=s.uri,h=s.data,p=e.g.mss.manifestPreprocessor;if(p!=_d){if(Vt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),h=pS(h,"SmoothStreamingMedia"),!h)throw new g(2,4,4046,c);p(h),h=Ki(h.outerHTML)}var E=Pu(h,"SmoothStreamingMedia");if(!E)throw new g(2,4,4046,c);if(c=e.g.mss.manifestPreprocessorTXml,c!=Sd&&c(E),e.i||(e.i=new ft(null,0)),c=Tt(E,"IsLive",Rc,!1))throw new g(2,4,4047);e.i.Gc(!c),p=Tt(E,"TimeScale",pi,1e7),h=Tt(E,"DVRWindowLength",pi),c&&(h===0||isNaN(h))&&(h=1/0);var A=Tt(E,"CanSeek",Rc,!1);h===0&&A&&(h=1/0),A=null,h&&0<h&&(A=h/p),c&&!isNaN(e.g.availabilityWindowOverride)&&(A=e.g.availabilityWindowOverride),A==null&&(A=1/0),e.i.Fe(A),h=Tt(E,"Duration",pi,1/0),c||e.i.bb(h/p),c={variants:[],textStreams:[],timescale:p,duration:h/p};var M;for(A=Jt(E,"Protection"),p=e.g.mss.keySystemsBySystemId,h=[],A=v(A),M=A.next();!M.done;M=A.next())h=h.concat(Jt(M.value,"ProtectionHeader"));if(h.length){for(A=[],M=0;M<h.length;M++){var R=h[M],C=R.attributes.SystemID.toLowerCase(),b=p[C];if(b){var U;e:{if(U=K1(R)){U=v(Gr(U,"DATA"));for(var $=U.next();!$.done;$=U.next())if($=Nn($.value,"KID")){U=wi(Fn($)),U=new Uint8Array([U[3],U[2],U[1],U[0],U[5],U[4],U[7],U[6]].concat(z(U.slice(8)))),U=br(U);break e}}U=null}$=wi(Fn(R)),C=kr(C.replace(/-/g,"")),C=[{initData:Kc($,C,new Set,0),initDataType:"cenc",keyId:U}],C=Vr(b,"cenc",C),U&&C.keyIds.add(U),(b=Dk.get(b))&&(C.licenseServerUri=b(R)),A.push(C)}}p=A}else p=[];for(M=p,A=[],p=[],h=[],E=Jt(E,"StreamIndex"),E=v(E),R=E.next();!R.done;R=E.next()){R=R.value,b=Jt(R,"QualityLevel"),C=c.timescale,U=c.duration,$=Jt(R,"c");for(var Q=[],re=0,W=0;W<$.length;++W){var q=$[W],ne=$[W+1],ie=Tt(q,"t",pi),me=Tt(q,"d",pi);if(q=Tt(q,"r",Ai),!me)break;if(ie=ie??re,(q=q||0)&&q--,0>q)if(ne){if(ne=Tt(ne,"t",pi),ne==null)break;if(ie>=ne)break;q=Math.ceil((ne-ie)/me)-1}else{if(U==1/0)break;if(ie/C>=U)break;q=Math.ceil((U*C-ie)/me)-1}for(ne=0;ne<=q;++ne)re=ie+me,Q.push({start:ie/C,end:re/C,zg:ie}),ie=re}for(C=Q,b=v(b),U=b.next();!U.done;U=b.next())(U=Pk(e,R,U.value,C,M,c))&&(U.type!="audio"||e.g.disableAudio?U.type!="video"||e.g.disableVideo?U.type!=Ot||e.g.disableText||h.push(U):p.push(U):A.push(U))}for(E=[],A=v(0<A.length?A:[null]),M=A.next();!M.done;M=A.next())for(M=M.value,R=v(0<p.length?p:[null]),Q=R.next();!Q.done;Q=R.next())b=E,C=b.push,U=e,$=M,Q=Q.value,W=0,$&&$.bandwidth&&0<$.bandwidth&&(W+=$.bandwidth),Q&&Q.bandwidth&&0<Q.bandwidth&&(W+=Q.bandwidth),U={id:U.u++,language:$?$.language:"und",disabledUntilTime:0,primary:!!$&&$.primary||!!Q&&Q.primary,audio:$,video:Q,bandwidth:W,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},C.call(b,U);c.variants=E,c.textStreams=h,e.j?(e.j.variants=c.variants,e.j.textStreams=c.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:c.variants,textStreams:c.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.me()),Promise.resolve(),o=Date.now(),a=(o-i)/1e3,e.C.sample(1,a),H(u)})}function Pk(e,t,n,i,r,s){var o=t.attributes.Type;if(o!=="audio"&&o!=="video"&&o!=="text")return Ne("Ignoring unrecognized type:",o),null;var a=t.attributes.Language,u=e.u++,c=Tt(n,"Bitrate",Ss),h=Tt(n,"MaxWidth",Ss),p=Tt(n,"MaxHeight",Ss),E=Tt(n,"Channels",Ss),A=Tt(n,"SamplingRate",Ss),M=s.duration;i.length&&(M=i[i.length-1].end-i[0].start);var R=e.i.getDuration();e.i.bb(Math.min(M,R));var C={id:u,originalId:t.attributes.Name||String(u),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:c||0,width:h||void 0,height:p||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:un(a||"und"),originalLanguage:a,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:E,audioSamplingRate:A,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:M,timescale:s.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=Fk.get(r))&&C.roles.push(r),r==="main"&&(C.primary=!0)),r=n.attributes.FourCC,(r===null||r==="")&&(r=t.attributes.FourCC),!r){if(o==="audio")r="AAC";else if(o==="video")return Ne('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!jk.includes(r.toUpperCase()))return Ne("Codec not supported:",r),null;switch(n=Ok(n,o,r,C),C.mssPrivateData.codecPrivateData=n,o){case"audio":if(!n)return Ne("Quality unsupported without CodecPrivateData",o),null;C.type="audio",C.mimeType="mss/audio/mp4",C.codecs=Nk(r,n);break;case"video":if(!n)return Ne("Quality unsupported without CodecPrivateData",o),null;C.type="video",C.mimeType="mss/video/mp4",C.codecs=Uk(n);break;case"text":C.type=Ot,C.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(C.codecs="stpp")}return C.fullMimeTypes.add(Ln(C.mimeType,C.codecs)),C.createSegmentIndex=function(){if(C.segmentIndex)return Promise.resolve();if(e.m.has(C.id))var b=e.m.get(C.id);else b=[],C.type=="video"&&(b=C.mssPrivateData.codecPrivateData.split("00000001").slice(1)),b={id:C.id,type:C.type,codecs:C.codecs,encrypted:C.encrypted,timescale:C.mssPrivateData.timescale,duration:C.mssPrivateData.duration,lb:b,ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:null,stream:C},b=Oa(new Go([b])),e.m.set(C.id,b);return b=Bk(e,new Li(function(){return[]},0,null,ud(C),C.mssPrivateData.timescale,b,null,C.encrypted),C,t,i),C.segmentIndex=new Wt(b),Promise.resolve()},C.closeSegmentIndex=function(){C.segmentIndex&&(C.segmentIndex.release(),C.segmentIndex=null)},C}function Ok(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function Nk(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function Uk(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function Bk(e,t,n,i,r){var s=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[],r=v(r);for(var o=r.next(),a={};!o.done;a={Ie:void 0},o=r.next())a.Ie=o.value,i.push(new lt(a.Ie.start,a.Ie.end,function(u){return function(){return On(e.l,[s.replace("{start time}",String(u.Ie.zg))])}}(a),0,null,t,0,0,n.mssPrivateData.duration));return i}G("shaka.mss.MssParser",Xm);var jk="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Fk=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");Ho("application/vnd.ms-sstr+xml",function(){return new Xm});function aT(e,t,n,i,r,s,o){if(200<=n&&299>=n&&n!=202||n==304)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:s};s=null;try{s=Rr(t)}catch{}throw new g(n==401||n==403?2:1,1,1001,i,n,s,e,o,r||i)}function $m(){}function Sf(e,t,n,i,r,s){var o=new Kk;Vo(t.headers).forEach(function(h,p){o.append(p,h)});var a=new Gk,u={Ig:!1,Kh:!1};if(e=Vk(e,t,n,{body:t.body||void 0,headers:o,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,i,r,t.streamDataCallback,s.minBytesForProgressEvents||0),e=new Pn(e,function(){return u.Ig=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var c=new se(function(){u.Kh=!0,a.abort()});c.da(t/1e3),e.finally(function(){c.stop()})}return e}function Vk(e,t,n,i,r,s,o,a,u){var c,h,p,E,A,M,R,C,b,U,$,Q,re,W;return X(function(q){switch(q.g){case 1:return c=Hk,h=zk,E=new ArrayBuffer(0),M=A=0,R=Date.now(),ve(q,2),T(q,c(e,i),4);case 4:if(p=q.h,o(uT(p.headers)),i.method=="HEAD"){q.s(5);break}return b=(C=p.headers.get("Content-Length"))?parseInt(C,10):0,p.body?(U=p.clone().body.getReader(),$=function(ne){function ie(){var me,le,pe,ge;return X(function(_e){switch(_e.g){case 1:return ve(_e,2),T(_e,U.read(),4);case 4:me=_e.h,Me(_e,3);break;case 2:return Ce(_e),_e.return();case 3:if(me.done){_e.s(5);break}if(A+=me.value.byteLength,!a){_e.s(5);break}return T(_e,a(me.value),5);case 5:le=Date.now(),pe=A-M,(100<le-R&&pe>=u||me.done)&&(ge=me.done?0:b-A,s(le-R,pe,ge),M=A,R=le),me.done?ne.close():(ne.enqueue(me.value),ie()),H(_e)}})}ie()},new h({start:$}),T(q,p.arrayBuffer(),8)):T(q,p.arrayBuffer(),9);case 8:E=q.h,q.s(5);break;case 9:E=q.h,Q=Date.now(),s(Q-R,E.byteLength,0);case 5:Me(q,3);break;case 2:throw re=Ce(q),r.Ig?new g(1,1,7001,e,n):r.Kh?new g(1,1,1003,e,n):new g(1,1,1002,e,re,n);case 3:return W=uT(p.headers),q.return(aT(W,E,p.status,e,p.url,t,n))}})}function uT(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function lT(){if(_.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(_.Response){if(!new Response("").body)return!1}else return!1;return!(!_.fetch||"polyfill"in _.fetch||!_.AbortController)}G("shaka.net.HttpFetchPlugin",$m),$m.isSupported=lT,$m.parse=Sf;var Hk=_.fetch,Gk=_.AbortController,zk=_.ReadableStream,Kk=_.Headers;lT()&&(xs("http",Sf,2,!0),xs("https",Sf,2,!0),xs("blob",Sf,2,!0));function cT(){}function Tf(e,t,n,i,r,s){var o=new qk,a=Date.now(),u=0,c=new Promise(function(h,p){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){p(new g(1,1,7001,e,n))};var E=!1;o.onreadystatechange=function(){if(o.readyState==2&&!E){var M=dT(o);r(M),E=!0}},o.onload=function(M){var R=dT(o),C=o.response;try{i(Date.now()-a,M.loaded-u,0);var b=aT(R,C,o.status,e,o.responseURL,t,n);h(b)}catch(U){p(U)}},o.onerror=function(M){p(new g(1,1,1002,e,M,n))},o.ontimeout=function(){p(new g(1,1,1003,e,n))},o.onprogress=function(M){var R=Date.now(),C=s.minBytesForProgressEvents||0,b=M.loaded-u;(100<R-a&&b>=C||M.lengthComputable&&M.loaded==M.total)&&(i(R-a,b,o.readyState==4?0:M.total-M.loaded),u=M.loaded,a=R)};for(var A in t.headers)o.setRequestHeader(A.toLowerCase(),t.headers[A]);o.send(t.body)});return new Pn(c,function(){return o.abort(),Promise.resolve()})}function dT(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=v(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}G("shaka.net.HttpXHRPlugin",cT),cT.parse=Tf;var qk=_.XMLHttpRequest;xs("http",Tf,1,!0),xs("https",Tf,1,!0),xs("blob",Tf,1,!0);function fT(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function Qm(e){var t=e.Ib(!1);return t?mr(t):e.N().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.Sa+":"+e.xa}function Wk(e,t){return al(e.g.N(),e.g.Sa,e.g.xa,t.streaming.retryParameters)}function hT(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function pT(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}hT.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function mT(e){return e.i==0?0:e.j/e.i}function gT(e){var t=this;this.u=e,this.i=new Map,this.h=new ba(function(){return Jm(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new hT,this.l=!1}gT.prototype.destroy=function(){return this.h.destroy()};function Xk(e,t,n){e.o=t,e.m=n}function Jm(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}function Yk(e,t,n,i,r,s){dn(e.h);var o=(e.i.get(t)||Promise.resolve()).then(function(){var a,u,c,h,p,E,A;return X(function(M){if(M.g==1)return T(M,Jk(e,n),2);if(a=M.h,e.h.g)throw new g(2,9,7001);if(r)for(h in u=x(a),c=new Yh(u),c.data)p=Number(h),E=c.data[p],A=c.g[p],e.m(E,A);return e.g.close(i,a.byteLength),e.o(mT(e.g),e.g.g),M.return(s(a))})});e.i.set(t,o)}function $k(e,t,n,i,r,s){dn(e.h);var o=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new g(2,9,7001);if(r){var a=x(n);a=new Yh(a);for(var u in a.data){var c=Number(u);e.m(a.data[c],a.g[c])}}return e.g.close(i,n.byteLength),e.o(mT(e.g),e.g.g),s(n)});e.i.set(t,o)}function Qk(e){return X(function(t){return t.g==1?T(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function Jk(e,t){var n,i,r,s;return X(function(o){return o.g==1?(n=Or,i=e.u.request(n,t),r=function(){return i.abort()},e.j.push(r),T(o,i.promise,2)):(s=o.h,Dr(e.j,r),o.return(s.data))})}function Ef(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new rn,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Ef.prototype.abort=function(){var e=this;return X(function(t){if(t.g==1){try{e.i.abort()}catch{}return ve(t,2),T(t,e.g,4)}if(t.g!=2)return Me(t,0);Ce(t),H(t)})};function Zm(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var s;return X(function(o){if(o.g==1)return r.result==null?(n(),o.return()):(s=r.result,T(o,t(s.key,s.value,s),2));s.continue(),H(o)})}})}Ef.prototype.store=function(){return this.h},Ef.prototype.promise=function(){return this.g};function eg(e){this.h=e,this.g=[]}eg.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function ta(e,t){return wf(e,t,"readwrite")}function wf(e,t,n){n=e.h.transaction([t],n);var i=new Ef(n,t);return e.g.push(i),i.promise().then(function(){Dr(e.g,i)},function(){Dr(e.g,i)}),i}function na(e,t,n){this.h=new eg(e),this.i=t,this.g=n}d=na.prototype,d.destroy=function(){return this.h.destroy()},d.hasFixedKeySpace=function(){return!0},d.addSegments=function(){return yT(this.i)},d.removeSegments=function(e,t){return vT(this,this.i,e,t)},d.getSegments=function(e){var t=this,n;return X(function(i){return i.g==1?T(i,_T(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Kg(r)})))})},d.addManifests=function(){return yT(this.g)},d.updateManifest=function(){return Promise.reject(new g(2,9,9016,"Cannot modify values in "+this.g))};function Zk(e,t,n){e=ta(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}d.updateManifestExpiration=function(e,t){var n=ta(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},d.removeManifests=function(e,t){return vT(this,this.g,e,t)},d.getManifests=function(e){var t=this,n;return X(function(i){return i.g==1?T(i,_T(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.jd(r)}))))})},d.getAllManifests=function(){var e=this,t,n;return X(function(i){return i.g==1?(t=wf(e.h,e.g,"readonly"),n=new Map,T(i,Zm(t,function(r,s){var o;return X(function(a){if(a.g==1)return T(a,e.jd(s),2);o=a.h,n.set(r,o),H(a)})}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},d.Kg=function(e){return e},d.jd=function(e){return Promise.resolve(e)};function yT(e){return Promise.reject(new g(2,9,9011,"Cannot add new value to "+e))}d.add=function(e,t){var n=this,i,r,s,o,a,u,c;return X(function(h){if(h.g==1){for(i=ta(n.h,e),r=i.store(),s=[],o=v(t),a=o.next(),u={};!a.done;u={eg:void 0},a=o.next())c=a.value,u.eg=r.add(c),u.eg.onsuccess=function(p){return function(){s.push(p.eg.result)}}(u);return T(h,i.promise(),2)}return h.return(s)})};function vT(e,t,n,i){e=ta(e.h,t),t=e.store(),n=v(n);for(var r=n.next(),s={};!r.done;s={Sf:void 0},r=n.next())s.Sf=r.value,t.delete(s.Sf).onsuccess=function(o){return function(){return i(o.Sf)}}(s);return e.promise()}function _T(e,t,n){var i,r,s,o,a,u,c;return X(function(h){if(h.g==1){for(i=wf(e.h,t,"readonly"),r=i.store(),s={},o=[],a=v(n),u=a.next(),c={};!u.done;c={ze:void 0,ie:void 0},u=a.next())c.ie=u.value,c.ze=r.get(c.ie),c.ze.onsuccess=function(p){return function(){p.ze.result==null&&o.push(p.ie),s[p.ie]=p.ze.result}}(c);return T(h,i.promise(),2)}if(o.length)throw new g(2,9,9012,"Could not find values for "+o);return h.return(n.map(function(p){return s[p]}))})}function jl(e){this.g=new eg(e)}jl.prototype.destroy=function(){return this.g.destroy()},jl.prototype.getAll=function(){var e=this,t,n;return X(function(i){return i.g==1?(t=wf(e.g,"session-ids","readonly"),n=[],T(i,Zm(t,function(r,s){n.push(s)}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},jl.prototype.add=function(e){var t=ta(this.g,"session-ids"),n=t.store();e=v(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},jl.prototype.remove=function(e){var t=this,n;return X(function(i){return i.g==1?(n=ta(t.g,"session-ids"),T(i,Zm(n,function(r,s,o){e.includes(s.sessionId)&&o.delete()}),2)):T(i,n.promise(),0)})};function Ui(){this.g=new Map}Ui.prototype.destroy=function(){for(var e=[],t=v(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Ui.prototype.init=function(){var e=this;Fl.forEach(function(r,s){(r=r())&&e.g.set(s,r)});for(var t=[],n=v(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function ST(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,s){r.hasFixedKeySpace()||t||(t={path:{Ab:i,Ta:s},Ta:r})})}),t)return t;throw new g(2,9,9013,"Could not find a cell that supports add-operations")}function eb(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,s){t({Ab:i,Ta:s},r)})})}function Af(e,t,n){if(e=e.g.get(t),!e)throw new g(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new g(2,9,9013,"Could not find cell with name "+n);return t}function tb(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function nb(e){var t=Array.from(e.g.keys());if(!t.length)throw new g(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function ib(e){var t,n,i;return X(function(r){return r.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(i=Fl,i.forEach(function(s){(s=s())&&t.push(s)})),T(r,Promise.all(t.map(function(s){return s.erase()})),2)):n?r.s(0):T(r,Promise.all(t.map(function(s){return s.destroy()})),0)})}function TT(e,t){Fl.set(e,t)}G("shaka.offline.StorageMuxer",Ui),Ui.unregister=function(e){Fl.delete(e)},Ui.register=TT,Ui.prototype.destroy=Ui.prototype.destroy;var Fl=new Map;function Vl(){na.apply(this,arguments)}He(Vl,na),Vl.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,s;return X(function(o){return i=ta(n.h,n.g),r=i.store(),s=new rn,r.get(e).onsuccess=function(a){(a=a.target.result)?(a.expiration=t,r.put(a),s.resolve()):s.reject(new g(2,9,9012,"Could not find values for "+e))},T(o,Promise.all([i.promise(),s]),0)})},Vl.prototype.jd=function(e){var t,n,i,r,s,o;return X(function(a){if(a.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,s=rb(e.periods[n],r),t.push(s);return T(a,oS(t),2)}return o=a.h,a.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function rb(e,t){ob(e);for(var n=v(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return sb(r,e.startTime,t)})}function sb(e,t,n){var i=e.initSegmentUri?ET(e.initSegmentUri):null,r=t+e.presentationTimeOffset,s=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){var a=ET(o.uri);return{startTime:t+o.startTime,endTime:t+o.endTime,dataKey:a,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:s,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}Vl.prototype.Kg=function(e){return{data:e.data}};function ET(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new g(2,9,9004,"Could not parse uri "+e)}function ob(e){var t=e.streams.filter(function(a){return a.contentType=="audio"});if(e=e.streams.filter(function(a){return a.contentType=="video"}),!t.every(function(a){return a.variantIds})||!e.every(function(a){return a.variantIds})){for(var n=v(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=v(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=v(e),s=r.next();!s.done;s=r.next())s.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=v(t),s=r.next();!s.done;s=r.next())s.value.variantIds.push(i);if(e.length&&t.length)for(t=v(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=v(e),s=r.next();!s.done;s=r.next()){s=s.value;var o=n++;i.variantIds.push(o),s.variantIds.push(o)}}}function xf(){na.apply(this,arguments)}He(xf,na),xf.prototype.jd=function(e){var t,n,i,r,s,o;return X(function(a){if(a.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var u=e.periods[n],c=[],h=v(u.streams),p=h.next();!p.done;p=h.next())p=p.value,p.variantIds.length!=0&&c.push(ab(p,u.startTime,u.startTime+r));s=c,t.push(s)}return T(a,oS(t),2)}return o=a.h,a.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})})};function ab(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function tg(){na.apply(this,arguments)}He(tg,na),d=tg.prototype,d.hasFixedKeySpace=function(){return!1},d.addSegments=function(e){return this.add(this.i,e)},d.addManifests=function(e){return this.add(this.g,e)},d.updateManifest=function(e,t){return Zk(this,e,t)},d.jd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function wT(){this.m=this.j=this.i=this.h=this.g=this.l=null}d=wT.prototype,d.init=function(){var e=this,t=new rn,n=!1,i=new se(function(){n=!0,t.reject(new g(2,9,9017))});i.da(5);var r=_.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){var s=r.result;e.l=s;var o=s.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new Vl(s,"segment","manifest"):null,e.g=o,o=s.objectStoreNames,o=o.contains("manifest-v2")&&o.contains("segment-v2")?new xf(s,"segment-v2","manifest-v2"):null,e.h=o,o=s.objectStoreNames,o=o.contains("manifest-v3")&&o.contains("segment-v3")?new xf(s,"segment-v3","manifest-v3"):null,e.i=o,o=s.objectStoreNames,o=o.contains("manifest-v5")&&o.contains("segment-v5")?new tg(s,"segment-v5","manifest-v5"):null,e.j=o,s=s.objectStoreNames.contains("session-ids")?new jl(s):null,e.m=s,i.stop(),t.resolve()}},r.onupgradeneeded=function(){for(var s=r.result,o=v(["segment-v5","manifest-v5","session-ids"]),a=o.next();!a.done;a=o.next())a=a.value,s.objectStoreNames.contains(a)||s.createObjectStore(a,{autoIncrement:!0})},r.onerror=function(s){n||(t.reject(new g(2,9,9001,r.error)),i.stop(),s.preventDefault())},t},d.destroy=function(){var e=this;return X(function(t){switch(t.g){case 1:if(!e.g){t.s(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.s(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.s(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.s(8);break}return T(t,e.j.destroy(),8);case 8:if(!e.m){t.s(10);break}return T(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),H(t)}})},d.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},d.getEmeSessionCell=function(){return this.m},d.erase=function(){var e=this;return X(function(t){switch(t.g){case 1:if(!e.g){t.s(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.s(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.s(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.s(8);break}return T(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),T(t,ub(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,T(t,e.init(),0)}})};function ub(){var e=new rn,t=_.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new g(2,9,9001,t.error)),n.preventDefault()},e}TT("idb",function(){return(!Ze()||Ze()&&qt())&&!nt()&&_.indexedDB?new wT:null});function os(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}os.prototype.Ab=function(){return this.i},os.prototype.Ta=function(){return this.h},os.prototype.key=function(){return this.l},os.prototype.toString=function(){return this.j};function ng(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new os(t,n,i,Number(e[4])):null}function AT(e,t){this.h=e,this.g=t}function xT(e,t){var n=new ft(null,0);n.bb(t.duration);var i=t.streams.filter(function(c){return c.type=="audio"}),r=t.streams.filter(function(c){return c.type=="video"});i=lb(e,i,r,n),r=t.streams.filter(function(c){return c.type==Ot}).map(function(c){return If(e,c,n)});var s=t.streams.filter(function(c){return c.type=="image"}).map(function(c){return If(e,c,n)}),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var a=v(i.values()),u=a.next();!u.done;u=a.next())u=u.value,u.audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:s,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function lb(e,t,n,i){for(var r=new Set,s=v(t),o=s.next();!o.done;o=s.next()){o=v(o.value.variantIds);for(var a=o.next();!a.done;a=o.next())r.add(a.value)}for(s=v(n),o=s.next();!o.done;o=s.next())for(o=v(o.value.variantIds),a=o.next();!a.done;a=o.next())r.add(a.value);for(s=new Map,r=v(r),o=r.next();!o.done;o=r.next())o=o.value,s.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=v(t),r=t.next();!r.done;r=t.next())for(o=r.value,r=If(e,o,i),o=v(o.variantIds),a=o.next();!a.done;a=o.next())a=s.get(a.value),a.language=r.language,a.primary=a.primary||r.primary,a.audio=r;for(n=v(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=If(e,r,i),r=v(r.variantIds),o=r.next();!o.done;o=r.next())o=s.get(o.value),o.primary=o.primary||t.primary,o.video=t;return s}function If(e,t,n){var i=t.segments.map(function(r){return cb(e,r,t)});return n.Ed(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Wt(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Ln(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function cb(e,t,n){var i=new os("segment",e.h,e.g,t.dataKey);return e=new lt(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?db(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Ge(t.thumbnailSprite),e}function db(e,t){var n=new os("segment",e.h,e.g,t);return new Li(function(){return[n.toString()]},0,null)}function IT(){this.g=null}d=IT.prototype,d.configure=function(){},d.start=function(e,t){var n=this,i,r,s,o,a,u,c;return X(function(h){switch(h.g){case 1:if(i=ng(e),n.g=i,i==null||i.g!="manifest")throw new g(2,1,9004,e);return r=new Ui,Ye(h,2),T(h,r.init(),4);case 4:return T(h,Af(r,i.Ab(),i.Ta()),5);case 5:return s=h.h,T(h,s.getManifests([i.key()]),6);case 6:return o=h.h,a=o[0],u=new AT(i.Ab(),i.Ta()),c=xT(u,a),t.makeTextStreamsForClosedCaptions(c),h.return(c);case 2:return tt(h),T(h,r.destroy(),7);case 7:ct(h,0)}})},d.stop=function(){return Promise.resolve()},d.update=function(){},d.onExpirationUpdated=function(e,t){var n=this,i,r,s,o,a,u,c;return X(function(h){switch(h.g){case 1:return i=n.g,r=new Ui,ve(h,2,3),T(h,r.init(),5);case 5:return T(h,Af(r,i.Ab(),i.Ta()),6);case 6:return s=h.h,T(h,s.getManifests([i.key()]),7);case 7:if(o=h.h,a=o[0],u=a.sessionIds.includes(e),c=a.expiration==null||a.expiration>t,!u||!c){h.s(3);break}return T(h,s.updateManifestExpiration(i.key(),t),3);case 3:return tt(h),T(h,r.destroy(),10);case 10:ct(h,0);break;case 2:Ce(h),h.s(3)}})},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){},Ho("application/x-offline-manifest",function(){return new IT});function MT(){}function CT(e,t){var n=ng(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=Ra(e)):e=n&&n.g=="segment"?fb(n.key(),n,t):jo(new g(2,1,9004,e)),e}function fb(e,t,n){var i=new Ui;return Ra(void 0).Ha(function(){return i.init()}).Ha(function(){return Af(i,t.Ab(),t.Ta())}).Ha(function(r){return r.getSegments([t.key()])}).Ha(function(r){return{uri:t,data:r[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}G("shaka.offline.OfflineScheme",MT),MT.plugin=CT,xs("offline",CT);function RT(e,t,n){var i,r,s,o,a,u;return X(function(c){switch(c.g){case 1:i=[];for(var h=[],p=v(n),E=p.next();!E.done;E=p.next()){E=E.value;for(var A=!1,M=v(h),R=M.next();!R.done;R=M.next())if(R=R.value,pb(R.info,E)){R.sessionIds.push(E.sessionId),A=!0;break}A||h.push({info:E,sessionIds:[E.sessionId]})}r=v(h),s=r.next();case 2:if(s.done){c.s(4);break}return o=s.value,a=hb(e,t,o),T(c,a,5);case 5:u=c.h,i=i.concat(u),s=r.next(),c.s(2);break;case 4:return c.return(i)}})}function hb(e,t,n){var i,r;return X(function(s){switch(s.g){case 1:return i=new qc({Xb:t,onError:function(){},te:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ve(s,2),i.configure(e),T(s,g2(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:Me(s,3);break;case 2:return Ce(s),T(s,i.destroy(),5);case 5:return s.return([]);case 3:return r=[],T(s,Promise.all(n.sessionIds.map(function(o){return X(function(a){if(a.g==1)return ve(a,2),T(a,_2(i,o),4);if(a.g!=2)return r.push(o),Me(a,0);Ce(a),H(a)})})),6);case 6:return T(s,i.destroy(),7);case 7:return s.return(r)}})}function pb(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&wh(e.audioCapabilities,t.audioCapabilities,n)&&wh(e.videoCapabilities,t.videoCapabilities,n)}function mb(e,t,n){var i=t.presentationTimeline.getDuration();return t=kT(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function ig(e,t){var n=xT(new AT(e.Ab(),e.Ta()),t),i=t.appMetadata||{};return n=kT(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function kT(e){var t=[],n=Uc(e.variants);n=v(n);for(var i=n.next();!i.done;i=n.next())t.push(Uo(i.value));for(e=v(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Bo(n.value));return t}function gb(){this.g=new Map}function yb(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,s=i.bandwidth||t.bandwidth-r;0>=s&&(s=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,s)}}function vb(e,t){e.g.set(t.id,t.bandwidth||2048)}function bT(e,t){return e=e.g.get(t),e==null&&(e=0),e}function Zn(e){var t=this;if(e&&e.constructor!=Re)throw new g(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.yb()):(this.h=Wa(),this.g=new hn),this.i=[],this.l=[];var n=!e;this.j=new ba(function(){var i,r,s,o,a;return X(function(u){switch(u.g){case 1:return T(u,Promise.all(t.l.map(function(c){return Jm(c)})),2);case 2:for(i=function(){},r=[],s=v(t.i),o=s.next();!o.done;o=s.next())a=o.value,r.push(a.then(i,i));return T(u,Promise.all(r),3);case 3:if(!n){u.s(4);break}return T(u,t.g.destroy(),4);case 4:t.h=null,t.g=null,H(u)}})}),this.m=1e9}function rg(){if(be())e:{for(var e=v(Fl.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}d=Zn.prototype,d.destroy=function(){return this.j.destroy()},d.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=gd(e,t)),oo(this.h,e)},d.getConfiguration=function(){var e=Wa();return oo(e,this.h,Wa()),e},d.yb=function(){return this.g},d.store=function(e,t,n,i,r){var s=this,o=this.getConfiguration(),a=new gT(this.g);return this.l.push(a),t=_b(this,e,t||{},i||[],r||[],function(){var u;return X(function(c){return c.g==1?n?c.s(2):T(c,$o(e,s.g,o.manifest.retryParameters),3):(c.g!=2&&(n=c.h),u=l0(e,n||null),c.return(u()))})},o,a),t=new Pn(t,function(){return Jm(a)}),t.finally(function(){Dr(s.l,a)}),Ob(this,t)};function _b(e,t,n,i,r,s,o,a){var u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie;return X(function(Ee){switch(Ee.g){case 1:return Mf(),c=u=null,h=new Ui,A=E=p=null,ve(Ee,2,3),T(Ee,s(),5);case 5:return u=Ee.h,T(Ee,Cb(e,t,u,o),6);case 6:if(M=Ee.h,ur(e),R=!M.presentationTimeline.U()&&!M.presentationTimeline.yc(),!R)throw new g(2,9,9005,t);C=v(i),b=C.next();case 7:if(b.done){Ee.s(9);break}return U=b.value,T(Ee,Rb(e,U,M),10);case 10:$=Ee.h,M.imageStreams.push($),ur(e),b=C.next(),Ee.s(7);break;case 9:Q=v(r),re=Q.next();case 11:return re.done?(t0(o.drm.clearKeys,M.variants),ne=M.variants.some(function(De){if(De.audio){for(var Ge=v(De.audio.drmInfos),vt=Ge.next();!vt.done;vt=Ge.next())if(vt.value.licenseServerUri.startsWith("data:"))return!0}if(De.video){for(De=v(De.video.drmInfos),Ge=De.next();!Ge.done;Ge=De.next())if(Ge.value.licenseServerUri.startsWith("data:"))return!0}return!1}),ie=o.offline.usePersistentLicense,ne&&(ie=!1),T(Ee,e.Lc(M,function(De){A=A||De},o,ie),15)):(W=re.value,T(Ee,kb(e,M,W.uri,W.language,W.kind,W.mime,W.codecs),14));case 14:q=Ee.h,M.textStreams.push(q),ur(e),re=Q.next(),Ee.s(11);break;case 15:if(c=Ee.h,ur(e),A)throw A;return T(Ee,Tb(M,c,o,ie),16);case 16:return T(Ee,h.init(),17);case 17:return ur(e),T(Ee,ST(h),18);case 18:return p=Ee.h,ur(e),me=Eb(c,M,t,n,o,a,ie),le=me.$i,pe=me.vg,T(Ee,p.Ta.addManifests([le]),19);case 19:if(ge=Ee.h,ur(e),E=ge[0],ur(e),A)throw A;return T(Ee,Sb(e,pe,E,le,a,o,p.Ta,M,c,ie),20);case 20:return ur(e),OT(M,le,c,ie),T(Ee,p.Ta.updateManifest(E,le),21);case 21:return ur(e),_e=new os("manifest",p.path.Ab,p.path.Ta,E),Ee.return(ig(_e,le));case 3:return tt(Ee),T(Ee,h.destroy(),22);case 22:if(!u){Ee.s(23);break}return T(Ee,u.stop(),23);case 23:if(!c){Ee.s(25);break}return T(Ee,c.destroy(),25);case 25:ct(Ee,0);break;case 2:if(Ie=Ce(Ee),E==null){Ee.s(27);break}return T(Ee,DT(E),27);case 27:throw A||Ie}})}function Sb(e,t,n,i,r,s,o,a,u,c){var h,p,E,A,M,R,C,b,U,$,Q;return X(function(re){switch(re.g){case 1:if(h={},p=0,E=function(){if(e.j.g||r.l)throw new g(2,9,7001)},A=function(W,q){var ne,ie,me,le,pe,ge,_e,Ie,Ee;return X(function(De){if(De.g==1){for(ne=v(W),ie=ne.next(),me={};!ie.done;me={Nb:void 0},ie=ne.next())me.Nb=ie.value,E(),le=Wk(me.Nb,s),pe=me.Nb.i,ge=me.Nb.h,_e=function(Ge){return function(vt){var rt,Yt,Nt,Dt;return X(function(Lt){switch(Lt.g){case 1:if(rt=Ge.Nb.g,Yt=rt.Ib(!1),!rt.aesKey||Yt){Lt.s(2);break}return T(Lt,xp(vt,rt.aesKey,Ge.Nb.j),3);case 3:vt=Lt.h;case 2:return Nt=Qm(rt),T(Lt,o.addSegments([{data:vt}]),4);case 4:Dt=Lt.h,E(),h[Nt]=Dt[0],p+=vt.byteLength,H(Lt)}})}}(me),Ie=me.Nb.g,(Ee=Ie.Ib(!1))?$k(r,me.Nb.groupId,Ee,pe,ge,_e):Yk(r,me.Nb.groupId,le,pe,ge,_e);return T(De,Qk(r),2)}return E(),!q||r.l?De.s(0):(OT(a,i,u,c),T(De,o.updateManifest(n,i),0))})},M=!1,ve(re,2),!sg(a)||!M||PT(a)){re.s(4);break}return T(re,A(t.filter(function(W){return W.h}),!0),5);case 5:return E(),t=t.filter(function(W){return!W.h}),R=h,C=p,h={},p=0,T(re,LT(o,n,i,R,C,function(){return ur(e)}),6);case 6:E();case 4:if(M){re.s(7);break}return T(re,A(t,!1),8);case 8:return E(),b=h,U=p,h={},p=0,T(re,LT(o,n,i,b,U,function(){return E()}),9);case 9:E();case 7:Me(re,0);break;case 2:return $=Ce(re),Q=Object.values(h),T(re,o.removeSegments(Q,function(){}),10);case 10:throw $}})}function DT(e){var t,n,i,r;return X(function(s){switch(s.g){case 1:return t=new Ui,T(s,t.init(),2);case 2:return T(s,ST(t),3);case 3:return n=s.h,i=new os("manifest",n.path.Ab,n.path.Ta,e),T(s,t.destroy(),4);case 4:return r=new Zn,T(s,r.remove(i.toString()),0)}})}function LT(e,t,n,i,r,s){var o,a,u,c,h,p,E,A,M,R,C;return X(function(b){switch(b.g){case 1:for(o=!1,ve(b,2),a=!0,u=v(n.streams),c=u.next();!c.done;c=u.next())for(h=c.value,p=v(h.segments),E=p.next();!E.done;E=p.next())A=E.value,M=A.pendingSegmentRefId?i[A.pendingSegmentRefId]:null,M!=null&&(A.dataKey=M,A.pendingSegmentRefId=void 0),M=A.pendingInitSegmentRefId?i[A.pendingInitSegmentRefId]:null,M!=null&&(A.initSegmentKey=M,A.pendingInitSegmentRefId=void 0),A.pendingSegmentRefId&&(a=!1),A.pendingInitSegmentRefId&&(a=!1);return n.size+=r,a&&(n.isIncomplete=!1),T(b,e.updateManifest(t,n),4);case 4:o=!0,s(),Me(b,0);break;case 2:return R=Ce(b),T(b,DT(t),5);case 5:if(o){b.s(6);break}return C=Object.values(i),T(b,e.removeSegments(C,function(){}),6);case 6:throw R}})}function Tb(e,t,n,i){var r,s,o,a,u,c,h,p,E,A,M,R,C,b,U,$,Q,re,W,q,ne,ie,me,le,pe,ge,_e,Ie,Ee,De;return X(function(Ge){switch(Ge.g){case 1:return r={width:1/0,height:1/0},Qx(e,n.restrictions,r),T(Ge,Sv(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(s=[],o=n.preferredDecodingAttributes,a=n.preferredVideoCodecs,u=n.preferredAudioCodecs,c=n.preferredTextFormats,_v(e,a,u,o,c),h=v(e.variants),p=h.next();!p.done;p=h.next())E=p.value,s.push(Uo(E));for(A=v(e.textStreams),M=A.next();!M.done;M=A.next())R=M.value,s.push(Bo(R));for(C=v(e.imageStreams),b=C.next();!b.done;b=C.next())U=b.value,s.push(Hh(U));return T(Ge,n.offline.trackSelectionCallback(s),3);case 3:for($=Ge.h,Q=e.presentationTimeline.getDuration(),re=0,W=v($),q=W.next();!q.done;q=W.next())ne=q.value,ie=ne.bandwidth*Q/8,re+=ie;return ve(Ge,4),T(Ge,n.offline.downloadSizeCallback(re),6);case 6:if(me=Ge.h,!me)throw new g(2,9,9014);Me(Ge,5);break;case 4:throw le=Ce(Ge),le instanceof g?le:new g(2,9,9015);case 5:for(pe=new Set,ge=new Set,_e=new Set,Ie=v($),Ee=Ie.next();!Ee.done;Ee=Ie.next())De=Ee.value,De.type=="variant"&&pe.add(De.id),De.type=="text"&&ge.add(De.id),De.type=="image"&&_e.add(De.id);e.variants=e.variants.filter(function(vt){return pe.has(vt.id)}),e.textStreams=e.textStreams.filter(function(vt){return ge.has(vt.id)}),e.imageStreams=e.imageStreams.filter(function(vt){return _e.has(vt.id)}),Bb(e),H(Ge)}})}function Eb(e,t,n,i,r,s,o){var a=mb(n,t,i),u=r.offline.progressCallback;Xk(s,function(M,R){a.size=R,u(a,M)},function(M,R){c&&o&&h==R&&qu(e,"cenc",M)});var c=sg(t)&&!PT(t),h=null;c&&(h=jb.get(e.h.keySystem));for(var p=new gb,E=v(t.textStreams),A=E.next();!A.done;A=E.next())p.g.set(A.value.id,52);for(E=v(t.imageStreams),A=E.next();!A.done;A=E.next())vb(p,A.value);for(E=v(t.variants),A=E.next();!A.done;A=E.next())yb(p,A.value);return s=Db(s,p,t,r),r=s.streams,s=s.vg,(p=e.h)&&o&&(p.initData=[]),{$i:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.pd(),streams:r,sessionIds:o?Wv(e):[],drmInfo:p,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},vg:s}}function sg(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function PT(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function OT(e,t,n,i){if(t.expiration=n.pd(),n=Wv(n),t.sessionIds=i?n:[],sg(e)&&i&&!n.length)throw new g(2,9,9007)}d.remove=function(e){return og(this,wb(this,e))};function wb(e,t){var n,i,r,s,o,a;return X(function(u){switch(u.g){case 1:if(Mf(),n=ng(t),n==null||n.g!="manifest")throw new g(2,9,9004,t);return i=n,r=new Ui,Ye(u,2),T(u,r.init(),4);case 4:return T(u,Af(r,i.Ab(),i.Ta()),5);case 5:return s=u.h,T(u,s.getManifests([i.key()]),6);case 6:return o=u.h,a=o[0],T(u,Promise.all([Ab(e,a,r),xb(s,i,a)]),2);case 2:return tt(u),T(u,r.destroy(),8);case 8:ct(u,0)}})}function NT(e,t){for(var n=[],i=v(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:Ln(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:Ln(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function Ab(e,t,n){return X(function(i){return T(i,Ub(e.g,e.h.drm,n,t),0)})}function xb(e,t,n){function i(){}var r=Nb(n);return ig(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}d.sj=function(){return og(this,Ib(this))};function Ib(e){var t,n,i,r,s,o,a,u,c,h;return X(function(p){switch(p.g){case 1:return Mf(),t=e.g,n=e.h.drm,i=new Ui,r=!1,Ye(p,2),T(p,i.init(),4);case 4:s=[],tb(i,function(E){return s.push(E)}),o=v(s),a=o.next();case 5:if(a.done){p.s(2);break}return u=a.value,T(p,u.getAll(),8);case 8:return c=p.h,T(p,RT(n,t,c),9);case 9:return h=p.h,T(p,u.remove(h),10);case 10:h.length!=c.length&&(r=!0),a=o.next(),p.s(5);break;case 2:return tt(p),T(p,i.destroy(),11);case 11:ct(p,3);break;case 3:return p.return(!r)}})}d.list=function(){return og(this,Mb())};function Mb(){var e,t,n;return X(function(i){switch(i.g){case 1:return Mf(),e=[],t=new Ui,Ye(i,2),T(i,t.init(),4);case 4:return n=Promise.resolve(),eb(t,function(r,s){n=n.then(function(){var o;return X(function(a){if(a.g==1)return T(a,s.getAllManifests(),2);o=a.h,o.forEach(function(u,c){u=ig(new os("manifest",r.Ab,r.Ta,c),u),e.push(u)}),H(a)})})}),T(i,n,2);case 2:return tt(i),T(i,t.destroy(),6);case 6:ct(i,3);break;case 3:return i.return(e)}})}function Cb(e,t,n,i){var r,s,o,a,u;return X(function(c){if(c.g==1)return r=null,s=e.g,o={networkingEngine:s,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(h){r=h},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),ur(e),T(c,n.start(t,o),2);if(c.g!=3)return a=c.h,ur(e),u=BT(a),T(c,Promise.all(Wh(u,function(h){return h.createSegmentIndex()})),3);if(ur(e),r)throw r;return c.return(a)})}function Rb(e,t,n){var i,r,s,o,a,u,c,h,p,E,A,M,R,C,b;return X(function(U){switch(U.g){case 1:return T(U,UT(e,t),2);case 2:if(i=U.h,i!="text/vtt")throw new g(1,2,2017,t);return T(U,bb(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=U.h,s=Fu(i),!s)throw new g(2,2,2014,i);for(o=s(),a={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},u=x(r),c=o.parseMedia(u,a,t,[]),h=[],p=v(c),E=p.next(),A={};!E.done;A={Pe:void 0,Nc:void 0},E=p.next())A.Nc=E.value,A.Pe=null,M=function($){return function(){return $.Pe==null&&($.Pe=On([t],[$.Nc.payload])),$.Pe||[]}}(A),R=new lt(A.Nc.startTime,A.Nc.endTime,M,0,null,null,0,0,1/0),A.Nc.payload.includes("#xywh")&&(C=A.Nc.payload.split("#xywh=")[1].split(","),C.length===4&&R.Ge({height:parseInt(C[3],10),positionX:parseInt(C[0],10),positionY:parseInt(C[1],10),width:parseInt(C[2],10)})),h.push(R);if(b=i,!h.length){U.s(4);break}return T(U,$o(h[0].N()[0],e.g,e.h.manifest.retryParameters),5);case 5:b=U.h;case 4:return U.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Wt(h),mimeType:b||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ln(b||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function kb(e,t,n,i,r,s,o){var a,u,c;return X(function(h){if(h.g==1)return s?h.s(2):T(h,UT(e,n),3);if(h.g!=2&&(s=h.h),a={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:od(0,t.presentationTimeline.getDuration(),[n]),mimeType:s||"",codecs:o||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:Ot,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ln(s||"",o||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},u=Ln(a.mimeType,a.codecs),c=Ia(u),!c)throw new g(2,2,2014,s);return h.return(a)})}function UT(e,t){var n;return X(function(i){switch(i.g){case 1:return ve(i,2),T(i,$o(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,Me(i,3);break;case 2:Ce(i);case 3:if(n)return i.return(n);throw new g(1,2,2011,t)}})}function bb(e,t,n){var i,r,s;return X(function(o){return o.g==1?(i=Or,r=qn([e],n),r.method="GET",T(o,t.request(i,r).promise,2)):(s=o.h,o.return(s.data))})}d.Lc=function(e,t,n,i){var r=this,s;return X(function(o){return o.g==1?(s=new qc({Xb:r.g,onError:t,te:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),s.configure(n.drm),T(o,m2(s,e.variants,i),2)):o.g!=3?T(o,qv(s),3):o.return(s)})};function Db(e,t,n,i){var r=new Map,s=BT(n),o=new Map;s=v(s);for(var a=s.next();!a.done;a=s.next()){a=a.value;var u=Lb(e,t,n,a,i,r);o.set(a.id,u)}for(e=v(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),vg:Array.from(r.values())}}function Lb(e,t,n,i,r,s){var o={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},a=r.offline.numberOfParallelDownloads,u=a===0?i.id:0;return Pb(i,n.presentationTimeline.pb(),function(c,h){var p=Qm(c),E=void 0;if(!s.has(p)){var A=c.endTime-c.startTime;A=bT(t,i.id)*A,A=pT(e.g,A),s.set(p,new fT(c,A,u,!1,h))}c.Y&&(E=Qm(c.Y),s.has(E)||(A=.5*bT(t,i.id),A=pT(e.g,A),s.set(E,new fT(c.Y,A,u,!0,h)))),o.segments.push({pendingInitSegmentRefId:E,initSegmentKey:E?0:null,startTime:c.startTime,endTime:c.endTime,appendWindowStart:c.appendWindowStart,appendWindowEnd:c.appendWindowEnd,timestampOffset:c.timestampOffset,tilesLayout:c.tilesLayout,pendingSegmentRefId:p,dataKey:0,mimeType:c.mimeType,codecs:c.codecs,thumbnailSprite:c.thumbnailSprite}),a!==0&&(u=(u+1)%a)}),o}function Pb(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}function ur(e){if(e.j.g)throw new g(2,9,7001)}function Mf(){if(!rg())throw new g(2,9,9e3)}function og(e,t){return X(function(n){return n.g==1?(e.i.push(t),Ye(n,2),T(n,t,4)):n.g!=2?n.return(n.h):(tt(n),Dr(e.i,t),ct(n,0))})}function Ob(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Dr(e.i,n)})}function Nb(e){var t=new Set;e=v(e.streams);for(var n=e.next();!n.done;n=e.next()){n=v(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function Ub(e,t,n,i){var r,s,o;return X(function(a){return a.g==1?i.drmInfo?(r=nb(n),s=i.sessionIds.map(function(u){return{sessionId:u,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:NT(i,!1),videoCapabilities:NT(i,!0)}}),T(a,RT(t,e,s),2)):a.return():a.g!=3?(o=a.h,T(a,r.remove(o),3)):T(a,r.add(s.filter(function(u){return!o.includes(u.sessionId)})),0)})}function BT(e){for(var t=new Set,n=v(e.variants),i=n.next();!i.done;i=n.next())i=i.value,i.audio&&t.add(i.audio),i.video&&t.add(i.video);for(n=v(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=v(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function Bb(e){e.variants.map(function(s){return s.video});var t=new Set(e.variants.map(function(s){return s.audio}));e=e.textStreams;for(var n=v(t),i=n.next();!i.done;i=n.next()){i=v(t);for(var r=i.next();!r.done;r=i.next());}for(t=v(e),n=t.next();!n.done;n=t.next())for(n=v(e),i=n.next();!i.done;i=n.next());}G("shaka.offline.Storage",Zn),Zn.deleteAll=function(){var e;return X(function(t){return t.g==1?(e=new Ui,Ye(t,2),T(t,ib(e),2)):t.g!=5?(tt(t),T(t,e.destroy(),5)):ct(t,0)})},Zn.prototype.list=Zn.prototype.list,Zn.prototype.removeEmeSessions=Zn.prototype.sj,Zn.prototype.remove=Zn.prototype.remove,Zn.prototype.store=Zn.prototype.store,Zn.prototype.getNetworkingEngine=Zn.prototype.yb,Zn.prototype.getConfiguration=Zn.prototype.getConfiguration,Zn.prototype.configure=Zn.prototype.configure,Zn.prototype.destroy=Zn.prototype.destroy,Zn.support=rg;var jb=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");S_("offline",rg);function yi(){}function Bi(e,t){for(e={priority:t||0,callback:e},t=0;t<Hl.length;t++)if(Hl[t].priority<e.priority){Hl.splice(t,0,e);return}Hl.push(e)}G("shaka.polyfill",yi),yi.register=Bi,yi.installAll=function(){for(var e=v(Hl),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ne("Error installing polyfill!",n)}}};var Hl=[];function jT(){}function FT(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=v(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Fb(t.value)}function Fb(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}yi.Aria=jT,jT.install=FT,Bi(FT);function VT(){}function HT(){It()||an("Sky_STB")||tw()}yi.EncryptionScheme=VT,VT.install=HT,Bi(HT,-2);function GT(){}function zT(){if(_.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",cu),document.addEventListener("webkitfullscreenerror",cu),document.addEventListener("mozfullscreenchange",cu),document.addEventListener("mozfullscreenerror",cu),document.addEventListener("MSFullscreenChange",cu),document.addEventListener("MSFullscreenError",cu)}}function cu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}yi.Fullscreen=GT,GT.install=zT,Bi(zT);function ag(){}function KT(){var e=!0;(Ze()&&!qt()&&!Tn()||At()||Rt()||It()||wt()||Je()||nn()||zn()&&!At())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),qT=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Vb)}function Vb(e){var t,n,i,r,s,o,a,u,c,h,p;return X(function(E){switch(E.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,i=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(r=n.contentType,s=ze(r),!s)||i&&(o=i.contentType,a=ze(o),!a))return E.return(t)}else return E.return(t);E.s(2);break}if(!be())return E.return(t);if(!n){E.s(3);break}return T(E,Hb(n),4);case 4:if(u=E.h,!u)return E.return(t);case 3:if(i){var A=i.contentType;if(Ze()&&i.spatialRendering&&(A+="; spatialRendering=true"),c=ti(A),!c)return E.return(t)}case 2:return e.keySystemConfiguration?(h=e.keySystemConfiguration,T(E,Gb(n,i,h),6)):(t.supported=!0,E.return(t));case 6:(p=E.h)&&(t.supported=!0,t.keySystemAccess=p);case 5:return E.return(t)}})}function Hb(e){var t;return X(function(n){return n.g==1?Ze()?T(n,zb(e),3):n.s(2):n.g!=2?(t=n.h,n.return(t)):n.return(ti(e.contentType))})}function Gb(e,t,n){var i,r,s,o,a,u,c,h,p,E,A;return X(function(M){switch(M.g){case 1:if(i=[],r=[],n.audio&&(s={robustness:n.audio.robustness||"",contentType:t.contentType},Je()&&t.contentType.includes('codecs="ac-3"')&&(s.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(s.encryptionScheme=n.audio.encryptionScheme),i.push(s)),n.video&&(o={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(o.encryptionScheme=n.video.encryptionScheme),r.push(o)),a={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(a.audioCapabilities=i),r.length&&(a.videoCapabilities=r),u=e?e.contentType:"",c=t?t.contentType:"",h=Wi(u)+";"+to(u),p=Wi(c)+";"+to(c),E=n.keySystem,A=null,ve(M,2),he.has(h+"#"+p+"#"+E)){A=he.get(h+"#"+p+"#"+E)||null,M.s(4);break}return T(M,navigator.requestMediaKeySystemAccess(n.keySystem,[a]),5);case 5:A=M.h,he.set(h+"#"+p+"#"+E,A);case 4:Me(M,3);break;case 2:Ce(M);case 3:return M.return(A)}})}function zb(e){var t,n,i,r,s;return X(function(o){if(o.g==1){if(!(_.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return o.return(ti(e.contentType));switch(t=e.contentType,e.width&&e.height&&1280<e.width&&720<e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),24>n||30<n)&&(t+="; framerate="+e.framerate),i=e.transferFunction||"",i){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return o.return(!1)}return r=!1,s=Kb,s.has(t)?(r=s.get(t),o.s(2)):T(o,cast.__platform__.canDisplayType(t),3)}return o.g!=2&&(r=o.h,s.set(t,r)),o.return(r)})}yi.MediaCapabilities=ag,ag.install=KT;var qT=null;ag.originalMcap=qT;var Kb=new Map;Bi(KT,-1);function WT(){}function XT(){var e=Sn();(_.MediaSource||_.ManagedMediaSource)&&(e&&_.MediaSource?12>=e?(ug(),YT()):15>=e&&ug():an("DT_STB_BCM")?(ug(),YT()):(an("Tizen 2")||Xe()||an("Tizen 4"))&&Wb()),(_.MediaSource||_.ManagedMediaSource)&&qb(),_.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&Xb()}function ug(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,zt.apply(0,arguments));return t.abort=function(){},t}}function YT(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function qb(){if(_.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Pc(n)!="mp2t"&&e(n)}}if(_.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);_.ManagedMediaSource.isTypeSupported=function(n){return Pc(n)!="mp2t"&&t(n)}}}function Wb(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return to(n)!="opus"&&e(n)},_.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);_.ManagedMediaSource.isTypeSupported=function(n){return to(n)!="opus"&&t(n)}}}function Xb(){var e=MediaSource.isTypeSupported;wt()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(o){return o.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),s=r.findIndex(function(o){return o.startsWith("vp09")});return 0<=s&&(r[s]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}yi.MediaSource=WT,WT.install=XT,Bi(XT);function $T(){}function QT(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?Yb():_.orientation!=null&&$b())}function Yb(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function $b(){function e(){switch(_.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Cf;screen.orientation=t,e(),_.addEventListener("orientationchange",function(){e();var n=new qe("change");t.dispatchEvent(n)})}yi.Orientation=$T,$T.install=QT;function Cf(){sn.call(this),this.type="",this.angle=0}He(Cf,sn),Cf.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):screen.msLockOrientation?screen.msLockOrientation(i):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Cf.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Bi(QT);function lg(){}var cg,dg,fg,hg,pg,mg;function JT(e){_.HTMLVideoElement&&_.WebKitMediaKeys&&(e!==void 0&&e&&(cg=!0,dg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),fg=HTMLMediaElement.prototype.setMediaKeys,hg=_.MediaKeys,pg=_.MediaKeySystemAccess,mg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Jb,_.MediaKeys=Gl,_.MediaKeySystemAccess=Rf,navigator.requestMediaKeySystemAccess=Qb,_.shakaMediaKeysPolyfill=eD,Bc.clear(),he.clear())}function Qb(e,t){try{var n=new Rf(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function Jb(e){var t=this.mediaKeys;return t&&t!=e&&ZT(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ZT(e,this):Promise.resolve()}function Zb(e){if(e=x(e.initData),y(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Fr(e.subarray(4),!0),e=Ki(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=zi(e),this.dispatchEvent(t)}yi.PatchedMediaKeysApple=lg,lg.uninstall=function(){cg&&(cg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",dg),HTMLMediaElement.prototype.setMediaKeys=fg,_.MediaKeys=hg,_.MediaKeySystemAccess=pg,navigator.requestMediaKeySystemAccess=mg,dg=mg=fg=pg=hg=null,_.shakaMediaKeysPolyfill="",Bc.clear(),he.clear())},lg.install=JT;function Rf(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=v(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var s=v(n.audioCapabilities),o=s.next();!o.done;o=s.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),r=!0));if(n.videoCapabilities)for(n=v(n.videoCapabilities),s=n.next();!s.done;s=n.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.videoCapabilities.push(s),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Rf.prototype.createMediaKeys=function(){var e=new Gl(this.keySystem);return Promise.resolve(e)},Rf.prototype.getConfiguration=function(){return this.g};function Gl(e){this.h=new WebKitMediaKeys(e),this.g=new _t}Gl.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new gg(this.h)},Gl.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function ZT(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",Zb);try{return Ga(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Gl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function gg(e){sn.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new _t,this.sessionId="",this.expiration=NaN,this.closed=new rn,this.keyStatuses=new eE}He(gg,sn),d=gg.prototype,d.generateRequest=function(e,t){var n=this;this.h=new rn;try{var i=this.l.createSession("video/mp4",x(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.dc()==null?"license-request":"license-renewal").set("message",zi(r.message)),r=new qe("message",r),n.dispatchEvent(r)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(kf(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:kf(n,"output-not-allowed");break;default:kf(n,"internal-error")}}),kf(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},d.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},d.update=function(e){this.g=new rn;try{this.i.update(x(e))}catch(t){this.g.reject(t)}return this.g},d.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},d.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function kf(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new qe("keystatuseschange"),e.dispatchEvent(t)}function eE(){this.size=0,this.g=void 0}d=eE.prototype,d.dc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,ae.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=ae.value();return!!(this.g&&Dn(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var eD="apple";Bi(function(){_.HTMLVideoElement&&_.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||JT())});function tE(){}function nE(){_.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Xe()||an("Tizen 4")||an("Tizen 5.0")||Kt())&&(MediaKeys.prototype.setServerCertificate=tD)}function tD(){return Promise.resolve(!1)}yi.PatchedMediaKeysCert=tE,tE.install=nE,Bi(nE);function iE(){}function rE(){if(!(!_.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Tg="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=nD,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=iD,_.MediaKeys=zl,_.MediaKeySystemAccess=bf,_.shakaMediaKeysPolyfill=rD}}function yg(e){var t=Tg;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function nD(e,t){try{var n=new bf(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function iD(e){var t=this.mediaKeys;return t&&t!=e&&sE(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&sE(e,this),Promise.resolve()}yi.PatchedMediaKeysWebkit=iE,iE.install=rE;function bf(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=v(t);for(var s=t.next();!s.done;s=t.next()){s=s.value;var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label},a=!1;if(s.audioCapabilities)for(var u=v(s.audioCapabilities),c=u.next();!c.done;c=u.next())c=c.value,c.contentType&&(a=!0,r.canPlayType(c.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(c),i=!0));if(s.videoCapabilities)for(u=v(s.videoCapabilities),c=u.next();!c.done;c=u.next())c=c.value,c.contentType&&(a=!0,r.canPlayType(c.contentType,this.g)&&(o.videoCapabilities.push(c),i=!0));if(a||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),s.persistentState=="required"&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1),i){this.h=o;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}bf.prototype.createMediaKeys=function(){var e=new zl(this.g);return Promise.resolve(e)},bf.prototype.getConfiguration=function(){return this.h};function zl(e){this.l=e,this.h=null,this.g=new _t,this.i=[],this.j=new Map}function sE(e,t){e.h=t,e.g.Ra();var n=Tg;t&&(e.g.D(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=zi(i.initData),e.h.dispatchEvent(r)}),e.g.D(t,n+"keymessage",function(i){var r=vg(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.dc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new qe("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=vg(e,i.sessionId))&&i.ready()}),e.g.D(t,n+"keyerror",function(i){var r=vg(e,i.sessionId);if(r){var s=Error("EME v0.1b key error"),o=i.errorCode;o.systemCode=i.systemCode,s.errorCode=o,!i.sessionId&&r.h?(i.systemCode==45&&(s.message="Unsupported session type."),r.h.reject(s),r.h=null):i.sessionId&&r.g?(r.g.reject(s),r.g=null):(s=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Df(r,"output-restricted"):s==1?Df(r,"expired"):Df(r,"internal-error"))}}))}zl.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new _g(t,this.l,e),this.i.push(e),e},zl.prototype.setServerCertificate=function(){return Promise.resolve(!1)},zl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function vg(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function _g(e,t,n){sn.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new rn,this.keyStatuses=new aE}He(_g,sn),d=_g.prototype,d.ready=function(){Df(this,"usable"),this.g&&this.g.resolve(),this.g=null};function oE(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=x(Ki("LOAD_SESSION|"+n));else{var r=Ki("PERSISTENT|");i=En(r,t)}else i=x(t)}catch(o){return Promise.reject(o)}e.h=new rn;var s=yg("generateKeyRequest");try{e.j[s](e.i,i)}catch(o){if(o.name!="InvalidStateError")return e.h=null,Promise.reject(o);new se(function(){try{e.j[s](e.i,i)}catch(a){e.h.reject(a),e.h=null}}).da(.01)}return e.h}function Sg(e,t,n){if(e.g)e.g.then(function(){return Sg(e,t,n)}).catch(function(){return Sg(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=cn(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=wi(r.keys[0].k),r=wi(r.keys[0].kid)}else i=x(n),r=null;var s=yg("addKey");try{e.j[s](e.i,i,r,e.sessionId)}catch(o){e.g.reject(o),e.g=null}}}function Df(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new qe("keystatuseschange"),e.dispatchEvent(t)}d.generateRequest=function(e,t){return oE(this,t,null)},d.load=function(e){return this.l=="persistent-license"?oE(this,null,e):Promise.reject(Error("Not a persistent session."))},d.update=function(e){var t=new rn;return Sg(this,t,e),t},d.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=yg("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},d.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function aE(){this.size=0,this.g=void 0}d=aE.prototype,d.dc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,ae.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=ae.value();return!!(this.g&&Dn(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var Tg="",rD="webkit";Bi(rE);function uE(){}function lE(){if(_.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=oD,Object.defineProperty(e,"disablePictureInPicture",{get:uD,set:lD,enumerable:!0,configurable:!0}),document.exitPictureInPicture=aD,document.addEventListener("webkitpresentationmodechanged",sD,!0))}}function sD(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function oD(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function aD(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function uD(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function lD(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}yi.PiPWebkit=uE,uE.install=lE,Bi(lE);function cE(){}function dE(){_.crypto&&("randomUUID"in _.crypto||(_.crypto.randomUUID=cD))}function cD(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}yi.RandomUUID=cE,cE.install=dE,Bi(dE);function fE(){}function hE(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:dD})}function dD(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}yi.Symbol=fE,fE.install=hE,Bi(hE);function pE(){}function mE(){if(_.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}yi.VideoPlayPromise=pE,pE.install=mE,Bi(mE);function gE(){}function yE(){if(_.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||Kt())&&(e.getVideoPlaybackQuality=fD)}}function fD(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}yi.VideoPlaybackQuality=gE,gE.install=yE,Bi(yE);function vE(){}function _E(){if(!_.VTTCue&&_.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Eg;else if(t==6)e=hD;else{try{var n=!!Eg(1,2,"")}catch{n=!1}n&&(e=Eg)}e&&(_.VTTCue=function(i,r,s){return e(i,r,s)})}}function Eg(e,t,n){return new _.TextTrackCue(e,t,n)}function hD(e,t,n){return new _.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}yi.VTTCue=vE,vE.install=_E,Bi(_E);function lr(){}lr.prototype.parseInit=function(){},lr.prototype.setSequenceMode=function(){},lr.prototype.setManifestType=function(){},lr.prototype.parseMedia=function(e,t){var n=null,i=[];e=cn(e).split(/\r?\n/),e=v(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=pD.exec(r))){var s=mD.exec(r[1]);s=60*parseInt(s[1],10)+parseFloat(s[2].replace(",",".")),r=new mn(s,t.segmentEnd?t.segmentEnd:s+2,r[2]),n&&(n.endTime=s,i.push(n)),n=r}return n&&i.push(n),i},G("shaka.text.LrcTextParser",lr),lr.prototype.parseMedia=lr.prototype.parseMedia,lr.prototype.setManifestType=lr.prototype.setManifestType,lr.prototype.setSequenceMode=lr.prototype.setSequenceMode,lr.prototype.parseInit=lr.prototype.parseInit;var pD=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,mD=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ni("application/x-subtitle-lrc",function(){return new lr});function Ji(){}Ji.prototype.parseInit=function(){},Ji.prototype.setSequenceMode=function(){},Ji.prototype.setManifestType=function(){},Ji.prototype.parseMedia=function(e,t,n,i){var r=cn(e);if(e=[],r=="")return e;var s=Lo(r,"tt",!0);if(!s)throw new g(2,2,2005,"Failed to parse TTML.");if(r=Gr(s,"body")[0],!r)return[];var o=ns(s,Kl,"frameRate"),a=ns(s,Kl,"subFrameRate"),u=ns(s,Kl,"frameRateMultiplier"),c=ns(s,Kl,"tickRate"),h=ns(s,Kl,"cellResolution"),p=s.attributes["xml:space"]||"default",E=ns(s,Of,"extent");if(p!="default"&&p!="preserve")throw new g(2,2,2005,"Invalid xml:space value: "+p);p=p=="default",o=new SD(o,a,u,c),h=_D(h),a=Gr(s,"metadata")[0],a=(a?a.children:[]).filter(function(R){return R!=`
`}),u=Gr(s,"style"),s=Gr(s,"region"),c=[];for(var A=v(s),M=A.next();!M.done;M=A.next())(M=gD(M.value,u,E))&&c.push(M);if(Jt(r,"p").length)throw new g(2,2,2001,"<p> can only be inside <div> in TTML");for(E=v(Jt(r,"div")),A=E.next();!A.done;A=E.next())if(Jt(A.value,"span").length)throw new g(2,2,2001,"<span> can only be inside <p> in TTML");return(t=SE(r,t,o,a,u,s,c,p,h,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function SE(e,t,n,i,r,s,o,a,u,c,h,p,E){var A=c;if(Mc(e)){if(!h)return null;var M={tagName:"span",children:[Fn(e)],attributes:{},parent:null}}else M=e;for(var R=null,C=v(kE),b=C.next();!b.done&&!(R=Pf(M,"backgroundImage",i,"#",b.value)[0]);b=C.next());C=null,b=ns(M,kE,"backgroundImage");var U=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(b&&U.test(b)){if(C=parseInt(b.split(":").pop(),10)-1,C>=E.length)return null;C=E[C]}else p&&b&&!b.startsWith("#")&&(U=new An(p),b=new An(b),(b=U.resolve(b).toString())&&(C=b));if((e.tagName=="p"||R||C)&&(h=!0),e=h,b=(M.attributes["xml:space"]||(a?"default":"preserve"))=="default",U=M.children.every(Mc),a=[],!U)for(var $=v(M.children),Q=$.next();!Q.done;Q=$.next())(Q=SE(Q.value,t,n,i,r,s,o,b,u,M,h,p,E))&&a.push(Q);if(i=c!=null,p=Fn(M),p=M.children.length&&p&&/\S/.test(p),$=M.attributes.begin||M.attributes.end||M.attributes.dur,!($||p||M.tagName=="br"||a.length!=0||i&&!b))return null;for(E=wE(M,n),p=E.start,E=E.end;A&&A.tagName&&A.tagName!="tt";)E=vD(A,n,p,E),p=E.start,E=E.end,A=A.parent;if(p==null&&(p=0),p+=t.periodStart,E=E==null?1/0:E+t.periodStart,p=Math.max(p,t.segmentStart),E=Math.min(E,t.segmentEnd),!$&&0<a.length)for(p=1/0,E=0,t=v(a),n=t.next();!n.done;n=t.next())n=n.value,p=Math.min(p,n.startTime),E=Math.max(E,n.endTime);if(M.tagName=="br")return r=new mn(p,E,""),r.lineBreak=!0,r;if(t="",U&&(t=ri(Fn(M)||""),b&&(t=t.replace(/\s+/g," "))),t=new mn(p,E,t),t.nestedCues=a,h||(t.isContainer=!0),u&&(t.cellResolution=u),u=Pf(M,"region",s,"")[0],M.attributes.region&&u&&u.attributes["xml:id"]){var re=u.attributes["xml:id"];t.region=o.filter(function(W){return W.id==re})[0]}return o=u,c&&i&&!M.attributes.region&&!M.attributes.style&&(o=Pf(c,"region",s,"")[0]),yD(t,M,o,R,C,r,e,a.length==0),t}function gD(e,t,n){var i=new Ro,r=e.attributes["xml:id"];if(!r)return null;i.id=r,r=null,n&&(r=Mg.exec(n)||Cg.exec(n)),n=r?Number(r[1]):null,r=r?Number(r[2]):null;var s,o=Lf(e,t,"extent");if(o){var a=(s=Mg.exec(o))||Cg.exec(o);a!=null&&(i.width=Number(a[1]),i.height=Number(a[2]),s||(n!=null&&(i.width=100*i.width/n),r!=null&&(i.height=100*i.height/r)),i.widthUnits=s||n!=null?qi:0,i.heightUnits=s||r!=null?qi:0)}return(e=Lf(e,t,"origin"))&&(a=(s=Mg.exec(e))||Cg.exec(e),a!=null&&(i.viewportAnchorX=Number(a[1]),i.viewportAnchorY=Number(a[2]),s?o||(i.width=100-i.viewportAnchorX,i.widthUnits=qi,i.height=100-i.viewportAnchorY,i.heightUnits=qi):(r!=null&&(i.viewportAnchorY=100*i.viewportAnchorY/r),n!=null&&(i.viewportAnchorX=100*i.viewportAnchorX/n)),i.viewportAnchorUnits=s||n!=null?qi:0)),i}function wg(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function yD(e,t,n,i,r,s,o,a){if(o=o||a,di(t,n,s,"direction",o)=="rtl"&&(e.direction="rtl"),a=di(t,n,s,"writingMode",o),a=="tb"||a=="tblr"?e.writingMode="vertical-lr":a=="tbrl"?e.writingMode="vertical-rl":a=="rltb"||a=="rl"?e.direction="rtl":a&&(e.direction=Bu),(a=di(t,n,s,"textAlign",!0))?(e.positionAlign=wD.get(a),e.lineAlign=ED.get(a),e.textAlign=Rh[a.toUpperCase()]):e.textAlign=rs,(a=di(t,n,s,"displayAlign",!0))&&(e.displayAlign=uv[a.toUpperCase()]),(a=di(t,n,s,"color",o))&&(e.color=wg(a)),(a=di(t,n,s,"backgroundColor",o))&&(e.backgroundColor=wg(a)),(a=di(t,n,s,"border",o))&&(e.border=a),a=di(t,n,s,"fontFamily",o))switch(a){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=a.split(",").filter(function(u){return u!="default"}).join(",")}switch((a=di(t,n,s,"fontWeight",o))&&a=="bold"&&(e.fontWeight=wa),a=di(t,n,s,"wrapOption",o),e.wrapLine=!(a&&a=="noWrap"),(a=di(t,n,s,"lineHeight",o))&&a.match(du)&&(e.lineHeight=a),(a=di(t,n,s,"fontSize",o))&&(a.match(du)||a.match(TD))&&(e.fontSize=a),(a=di(t,n,s,"fontStyle",o))&&(e.fontStyle=fv[a.toUpperCase()]),i?(r=i.attributes.imageType||i.attributes.imagetype,a=i.attributes.encoding,i=Fn(i).trim(),r=="PNG"&&a=="Base64"&&i&&(e.backgroundImage="data:image/png;base64,"+i)):r&&(e.backgroundImage=r),(i=di(t,n,s,"textOutline",o))&&(i=i.split(" "),i[0].match(du)?e.textStrokeColor=e.color:(e.textStrokeColor=wg(i[0]),i.shift()),i[0]&&i[0].match(du)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=di(t,n,s,"letterSpacing",o))&&i.match(du)&&(e.letterSpacing=i),(i=di(t,n,s,"linePadding",o))&&i.match(du)&&(e.linePadding=i),(i=di(t,n,s,"opacity",o))&&(e.opacity=parseFloat(i)),(i=Lf(n,s,"textDecoration"))&&TE(e,i),(i=Ag(t,s,"textDecoration"))&&TE(e,i),(i=di(t,n,s,"textCombine",o))&&(e.textCombineUpright=i),di(t,n,s,"ruby",o)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function TE(e,t){t=v(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Ts)||e.textDecoration.push(Ts);break;case"noUnderline":e.textDecoration.includes(Ts)&&Dr(e.textDecoration,Ts);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Dr(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Dr(e.textDecoration,"overline")}}function di(e,t,n,i,r){return r=r===void 0?!0:r,(e=Ag(e,n,i))?e:r?Lf(t,n,i):null}function Lf(e,t,n){if(!e)return null;var i=ns(e,Of,n);return i||EE(e,t,n)}function Ag(e,t,n){var i=ns(e,Of,n);return i||EE(e,t,n)}function EE(e,t,n){e=Pf(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var s=_s(e[r],"urn:ebu:tt:style",n);s||(s=ns(e[r],Of,n)),s||(s=Ag(e[r],t,n)),s&&(i=s)}return i}function Pf(e,t,n,i,r){var s=[];if(!e||1>n.length)return s;var o=e;for(e=null;!e&&!(e=r?_s(o,r,t):o.attributes[t])&&(o=o.parent,o););if(t=e){for(t=v(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=v(n),o=e.next();!o.done;o=e.next())if(o=o.value,i+o.attributes["xml:id"]==r){s.push(o);break}}return s}function vD(e,t,n,i){return e=wE(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function wE(e,t){var n=xg(e.attributes.begin,t),i=xg(e.attributes.end,t);return e=xg(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function xg(e,t){var n=null;if(AE.test(e)){e=AE.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),s=Number(e[4]);s+=(Number(e[5])||0)/t.h,r+=s/t.frameRate,n=r+60*i+3600*n}else if(xE.test(e))n=Ig(xE,e);else if(IE.test(e))n=Ig(IE,e);else if(ME.test(e))e=ME.exec(e),n=Number(e[1])/t.frameRate;else if(CE.test(e))e=CE.exec(e),n=Number(e[1])/t.g;else if(RE.test(e))n=Ig(RE,e);else if(e)throw new g(2,2,2001,"Could not parse cue time range in TTML");return n}function Ig(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function _D(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}G("shaka.text.TtmlTextParser",Ji),Ji.prototype.parseMedia=Ji.prototype.parseMedia,Ji.prototype.setManifestType=Ji.prototype.setManifestType,Ji.prototype.setSequenceMode=Ji.prototype.setSequenceMode,Ji.prototype.parseInit=Ji.prototype.parseInit;function SD(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var Mg=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,TD=/^(\d{1,4}(?:\.\d+)?|100)%$/,du=/^(\d+px|\d+em|\d*\.?\d+c)$/,Cg=/^(\d+)px (\d+)px$/,AE=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,xE=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,IE=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,ME=/^(\d*(?:\.\d*)?)f$/,CE=/^(\d*(?:\.\d*)?)t$/,RE=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),ED=new Map().set("left",Oo).set("center","center").set("right","end").set("start",Oo).set("end","end"),wD=new Map().set("left","line-left").set("center","center").set("right","line-right"),Kl=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Of=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],kE=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ni("application/ttml+xml",function(){return new Ji});function Xn(){this.g=new Ji}Xn.prototype.parseInit=function(e){var t=!1;if(new on().box("moov",Mt).box("trak",Mt).box("mdia",Mt).box("minf",Mt).box("stbl",Mt).R("stsd",Ms).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new g(2,2,2007)},Xn.prototype.setSequenceMode=function(){},Xn.prototype.setManifestType=function(){},Xn.prototype.parseMedia=function(e,t,n){var i=[],r=null,s=[],o=new Map,a=[];if(new on().box("moof",Mt).box("traf",Mt).R("tfhd",function(b){r=Xc(b.reader,b.flags).md}).R("trun",function(b){b=Qc(b.reader,b.version,b.flags),b=v(b.hg);for(var U=b.next();!U.done;U=b.next())a.push(U.value.sampleSize||r||0)}).R("subs",function(b){for(var U=b.reader,$=U.S(),Q=-1,re=0;re<$;re++){var W=U.S();Q+=W,W=U.ma();for(var q=[],ne=0;ne<W;ne++)b.version==1?q.push(U.S()):q.push(U.ma()),U.X(),U.X(),U.S();o.set(Q,q)}}).box("mdat",Da(function(b){s.push(b)})).parse(e,!1),s.length==0)throw new g(2,2,2007);for(var u=En.apply(Kn,z(s)),c=0,h=0;h<a.length;h++){var p=x(u,c,a[h]);c+=a[h];var E=o.get(h);if(E&&E.length){p=x(p,0,E[0]);for(var A=[],M=E[0],R=1;R<E.length;R++){var C=x(e,M,E[R]);C=ts(C),A.push("data:image/png;base64,"+C),M+=E[R]}i=i.concat(this.g.parseMedia(p,t,n,A))}else i=i.concat(this.g.parseMedia(p,t,n,[]))}return i},G("shaka.text.Mp4TtmlParser",Xn),Xn.prototype.parseMedia=Xn.prototype.parseMedia,Xn.prototype.setManifestType=Xn.prototype.setManifestType,Xn.prototype.setSequenceMode=Xn.prototype.setSequenceMode,Xn.prototype.parseInit=Xn.prototype.parseInit,ni('application/mp4; codecs="stpp"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml.im1i"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml.im1t"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml.im2i"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml.im2t"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml.etd1"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new Xn}),ni('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new Xn}),ni('application/mp4; codecs="stpp.TTML.im1t"',function(){return new Xn});function Ci(){this.g="UNKNOWN"}Ci.prototype.parseInit=function(){},Ci.prototype.setSequenceMode=function(){},Ci.prototype.setManifestType=function(e){this.g=e},Ci.prototype.parseMedia=function(e,t){e=cn(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new g(2,2,2e3);if(e=t.vttOffset,this.g=="HLS")if(n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new g(2,2,2e3);if(e=Ea(e[1]),e==null)throw new g(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],i=v(n[0].split(`
`)),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new Sa(r);var s=new Ro;bo(r),Ta(r);for(var o=bo(r);o;){var a=s,u=o;(o=/^id=(.*)$/.exec(u))?a.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?a.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(a.height=Number(o[1]),a.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(a.regionAnchorX=Number(o[1]),a.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(a.viewportAnchorX=Number(o[1]),a.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(a.scroll="up"),Ta(r),o=bo(r)}t.push(s)}for(i=new Map,ov(i),r=[],n=v(n.slice(1)),s=n.next();!s.done;s=n.next()){if(s=s.value.split(`
`),(s.length!=1||s[0])&&!/^NOTE($|[ \t])/.test(s[0])&&s[0]=="STYLE"){for(a=[],o=-1,u=1;u<s.length;u++)s[u].includes("::cue")&&(a.push([]),o=a.length-1),o!=-1&&(a[o].push(s[u]),s[u].includes("}")&&(o=-1));for(a=v(a),o=a.next();!o.done;o=a.next()){var c=o.value;o="global",(u=c[0].match(/\((.*)\)/))&&(o=u.pop()),u=c.slice(1,-1),c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(u=c[1].split(";")),(c=i.get(o))||(c=new mn(0,0,""));for(var h=!1,p=0;p<u.length;p++){var E=/^\s*([^:]+):\s*(.*)/.exec(u[p]);if(E){var A=E[2].trim().replace(";","");switch(E[1].trim()){case"background-color":case"background":h=!0,c.backgroundColor=A;break;case"color":h=!0,c.color=A;break;case"font-family":h=!0,c.fontFamily=A;break;case"font-size":h=!0,c.fontSize=A;break;case"font-weight":(700<=parseInt(A,10)||A=="bold")&&(h=!0,c.fontWeight=wa);break;case"font-style":switch(A){case"normal":h=!0,c.fontStyle=bh;break;case"italic":h=!0,c.fontStyle=Aa;break;case"oblique":h=!0,c.fontStyle="oblique"}break;case"opacity":h=!0,c.opacity=parseFloat(A);break;case"text-combine-upright":h=!0,c.textCombineUpright=A;break;case"text-shadow":h=!0,c.textShadow=A;break;case"white-space":h=!0,c.wrapLine=A!="noWrap"}}}h&&i.set(o,c)}}if(c=s,h=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")s=null;else if(s=null,c[0].includes("-->")||(s=c[0],c.splice(0,1)),a=new Sa(c[0]),o=Lu(a),p=ko(a,/[ \t]+--\x3e[ \t]+/g),u=Lu(a),o==null||p==null||u==null)Ne("Failed to parse VTT time code. Cue skipped:",s,c),s=null;else{for(o+=h,u+=h,h=c.slice(1).join(`
`).trim(),i.has("global")?(c=i.get("global").clone(),c.startTime=o,c.endTime=u,c.payload=h):c=new mn(o,u,h),Ta(a),o=bo(a);o;)bE(c,o,t),Ta(a),o=bo(a);Dc(c,i),s!=null&&(c.id=s),s=c}s&&r.push(s)}return r};function bE(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=rs:e.textAlign=Rh[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Lc)):(i=/^region:(.*)$/.exec(t))?(t=AD(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=kh[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ju,e.line=Number(n[1]),n[2]&&(e.lineAlign=kh[n[2].toUpperCase()]))}function AD(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}G("shaka.text.VttTextParser",Ci),Ci.prototype.parseMedia=Ci.prototype.parseMedia,Ci.prototype.setManifestType=Ci.prototype.setManifestType,Ci.prototype.setSequenceMode=Ci.prototype.setSequenceMode,Ci.prototype.parseInit=Ci.prototype.parseInit,ni("text/vtt",function(){return new Ci}),ni('text/vtt; codecs="vtt"',function(){return new Ci}),ni('text/vtt; codecs="wvtt"',function(){return new Ci});function cr(){this.g=null}cr.prototype.parseInit=function(e){var t=this,n=!1;if(new on().box("moov",Mt).box("trak",Mt).box("mdia",Mt).R("mdhd",function(i){i=$c(i.reader,i.version),t.g=i.timescale}).box("minf",Mt).box("stbl",Mt).R("stsd",Ms).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new g(2,2,2008);if(!n)throw new g(2,2,2008)},cr.prototype.setSequenceMode=function(){},cr.prototype.setManifestType=function(){},cr.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new g(2,2,2008);var n=0,i=[],r,s=[],o=!1,a=!1,u=!1,c=null;if(new on().box("moof",Mt).box("traf",Mt).R("tfdt",function($){o=!0,n=Yc($.reader,$.version).baseMediaDecodeTime}).R("tfhd",function($){c=Xc($.reader,$.flags).ld}).R("trun",function($){a=!0,i=Qc($.reader,$.version,$.flags).hg}).box("mdat",Da(function($){u=!0,r=$})).parse(e,!1),!u&&!o&&!a)throw new g(2,2,2008);e=n;for(var h=new gn(r,0),p=v(i),E=p.next();!E.done;E=p.next()){E=E.value;var A=E.ig||c,M=E.Be?n+E.Be:e;e=M+(A||0);var R=0;do{var C=h.S();R+=C;var b=h.S(),U=null;zc(b)=="vttc"?8<C&&(U=h.Db(C-8)):h.skip(C-8),A&&U&&(C=xD(U,t.periodStart+M/this.g,t.periodStart+e/this.g),s.push(C))}while(E.sampleSize&&R<E.sampleSize)}return s.filter(no)};function xD(e,t,n){var i,r,s;return new on().box("payl",Da(function(o){i=cn(o)})).box("iden",Da(function(o){r=cn(o)})).box("sttg",Da(function(o){s=cn(o)})).parse(e),i?ID(i,r,s,t,n):null}function ID(e,t,n,i,r){if(e=new mn(i,r,e),Dc(e),t&&(e.id=t),n)for(t=new Sa(n),n=bo(t);n;)bE(e,n,[]),Ta(t),n=bo(t);return e}G("shaka.text.Mp4VttParser",cr),cr.prototype.parseMedia=cr.prototype.parseMedia,cr.prototype.setManifestType=cr.prototype.setManifestType,cr.prototype.setSequenceMode=cr.prototype.setSequenceMode,cr.prototype.parseInit=cr.prototype.parseInit,ni('application/mp4; codecs="wvtt"',function(){return new cr});function dr(){}dr.prototype.parseInit=function(){},dr.prototype.setSequenceMode=function(){},dr.prototype.setManifestType=function(){},dr.prototype.parseMedia=function(e){var t=cn(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=v(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var i=new Sa(n[0]),r=Lu(i),s=ko(i,/,/g);if(i=Lu(i),r==null||s==null||i==null)throw new g(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new mn(r,i,n.slice(1).join(`
`).trim()))}return e},G("shaka.text.SbvTextParser",dr),dr.prototype.parseMedia=dr.prototype.parseMedia,dr.prototype.setManifestType=dr.prototype.setManifestType,dr.prototype.setSequenceMode=dr.prototype.setSequenceMode,dr.prototype.parseInit=dr.prototype.parseInit,ni("text/x-subviewer",function(){return new dr});function Zi(){this.g=new Ci}Zi.prototype.parseInit=function(){},Zi.prototype.setSequenceMode=function(){},Zi.prototype.setManifestType=function(){},Zi.prototype.parseMedia=function(e,t,n){return e=cn(e),e=DE(e),e=x(Ki(e)),this.g.parseMedia(e,t,n,[])};function DE(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=v(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}G("shaka.text.SrtTextParser",Zi),Zi.srt2webvtt=DE,Zi.prototype.parseMedia=Zi.prototype.parseMedia,Zi.prototype.setManifestType=Zi.prototype.setManifestType,Zi.prototype.setSequenceMode=Zi.prototype.setSequenceMode,Zi.prototype.parseInit=Zi.prototype.parseInit,ni("text/srt",function(){return new Zi});function fr(){}fr.prototype.parseInit=function(){},fr.prototype.setSequenceMode=function(){},fr.prototype.setManifestType=function(){},fr.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=cn(e).split(/\r?\n\s*\r?\n/),e=v(r),r=e.next();!r.done;r=e.next()){var s=r.value;r=s,(s=CD.exec(s))&&(i=s[1],r=s[2]),i=="V4 Styles"||i=="V4+ Styles"?(t=r,t=n?t+(`
`+r):r):i=="Events"&&(n=n?n+(`
`+r):r)}for(i=[],r=null,t=v(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(s=OE.exec(e))){if(e=s[1].trim(),s=s[2].trim(),e=="Format")r=s.split(Nf);else if(e=="Style"){e=s.split(Nf),s={};for(var o=0;o<r.length&&o<e.length;o++)s[r[o]]=e[o];i.push(s)}}for(r=[],t=null,n=v(n.split(/\r?\n/)),s=n.next(),e={};!s.done;e={Eh:void 0},s=n.next())if(s=s.value,!/^\s*;/.test(s)&&(o=OE.exec(s))){if(s=o[1].trim(),o=o[2].trim(),s=="Format")t=o.split(Nf);else if(s=="Dialogue"){o=o.split(Nf),s={};for(var a=0;a<t.length&&a<o.length;a++)s[t[a]]=o[a];a=PE(s.Start);var u=PE(s.End);o=new mn(a,u,o.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Eh=s.Style,(e=i.find(function(c){return function(h){return h.Name==c.Eh}}(e)))&&MD(o,e),r.push(o)}}return r};function MD(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=LE(n))&&(e.color=n),(n=t.BackColour)&&(n=LE(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=wa),t.Italic&&(e.fontStyle=Aa),t.Underline&&e.textDecoration.push(Ts),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Uu,e.textAlign="start";break;case 2:e.displayAlign=Uu,e.textAlign=rs;break;case 3:e.displayAlign=Uu,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=rs;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=rs;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function LE(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function PE(e){return e=RD.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}G("shaka.text.SsaTextParser",fr),fr.prototype.parseMedia=fr.prototype.parseMedia,fr.prototype.setManifestType=fr.prototype.setManifestType,fr.prototype.setSequenceMode=fr.prototype.setSequenceMode,fr.prototype.parseInit=fr.prototype.parseInit;var CD=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,OE=/^\s*([^:]+):\s*(.*)/,Nf=/\s*,\s*/,RD=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ni("text/x-ssa",function(){return new fr});function NE(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{ud:n,ia:e}:null}function UE(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,s=(e[t+2]&1)<<2;return s|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:s,codec:"mp4a.40."+r}}function BE(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function kD(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function hr(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=hr.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?ti(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Xi(t)||"mp4a.40.2")+'"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=x(e),s=Na(r),o=s.length;o<r.length&&!BE(r,o);o++);if(e=1e3*n.endTime,s=Ko(s),s.length&&n&&(s=s.find(function(h){return h.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=s.data),s=UE(r,o),!s)return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=s.sampleRate,t.channelsCount=s.channelCount;for(var a=[];o<r.length;){var u=NE(r,o);if(!u)return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));var c=u.ud+u.ia;o+c<=r.length&&a.push({data:r.subarray(o+u.ud,o+c),size:u.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),o+=c}return r=s.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:s.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:e,jb:a},stream:t},i=new Go([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Oa(i),this.g.set(n,t)),n=this.i!==t,i=Zu(i),this.i=t,this.h++,n?(t=En(t,i),Promise.resolve(t)):Promise.resolve(i)},G("shaka.transmuxer.AacTransmuxer",hr),hr.prototype.transmux=hr.prototype.transmux,hr.prototype.getOriginalMimeType=hr.prototype.getOriginalMimeType,hr.prototype.convertCodecs=hr.prototype.convertCodecs,hr.prototype.isSupported=hr.prototype.isSupported,hr.prototype.destroy=hr.prototype.destroy,Es("audio/aac",function(){return new hr("audio/aac")},eo);function jE(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var s=e[t+6]>>5,o=0;s===2?o+=2:(s&1&&s!==1&&(o+=2),s&4&&(o+=2)),o=(e[t+6]<<8|e[t+7])>>12-o&1;var a=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|a>>2,(a&3)<<6|s<<3|o<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][s]+o,ra:e,ia:r}}function bD(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,s;0<i;){s=e[t];var o=Math.min(i,8),a=8-o;r=4278190080>>>24+a<<a,r=(s&r)>>a,n=n?n<<o|r:r,t+=1,i-=o}if(16>n)return!0}return!1}function Sr(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Sr.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?ti(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?Xe()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=x(e);for(var r=Na(e),s=r.length;s<e.length&&!bD(e,s);s++);var o=1e3*n.endTime;r=Ko(r),r.length&&n&&(r=r.find(function(h){return h.description==="com.apple.streaming.transportStreamTimestamp"}))&&(o=r.data),r=0;for(var a=new Uint8Array([]),u=[];s<e.length;){var c=jE(e,s);if(!c)return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount,r=c.sampleRate,a=c.ra,u.push({data:e.subarray(s,s+c.ia),size:c.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),s+=c.ia}return e=Math.floor(o*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,lb:[],ra:a,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:e,jb:u},stream:t},i=new Go([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Oa(i),this.g.set(n,t)),n=this.i!==t,i=Zu(i),this.i=t,this.h++,n?(t=En(t,i),Promise.resolve(t)):Promise.resolve(i)},G("shaka.transmuxer.Ac3Transmuxer",Sr),Sr.prototype.transmux=Sr.prototype.transmux,Sr.prototype.getOriginalMimeType=Sr.prototype.getOriginalMimeType,Sr.prototype.convertCodecs=Sr.prototype.convertCodecs,Sr.prototype.isSupported=Sr.prototype.isSupported,Sr.prototype.destroy=Sr.prototype.destroy,Es("audio/ac3",function(){return new Sr("audio/ac3")},eo);function FE(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new ks(e.subarray(t+2));Qi(n,2),Qi(n,3);var i=Ft(n,11)+1<<1,r=Ft(n,2);if(r==3){r=Ft(n,2),r=[24e3,22060,16e3][r];var s=3}else r=[48e3,44100,32e3][r],s=Ft(n,2);var o=Ft(n,3),a=Ft(n,1);return n=Ft(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][s])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|o<<1|a<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][o]+a,ra:e,ia:i})}function Tr(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Tr.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?ti(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=x(e);for(var r=Na(e),s=r.length;s<e.length&&(e[s]<<8|e[s+1]<<0)!==2935;s++);var o=1e3*n.endTime;r=Ko(r),r.length&&n&&(r=r.find(function(h){return h.description==="com.apple.streaming.transportStreamTimestamp"}))&&(o=r.data),r=0;for(var a=new Uint8Array([]),u=[];s<e.length;){var c=FE(e,s);if(!c)return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount,r=c.sampleRate,a=c.ra,u.push({data:e.subarray(s,s+c.ia),size:c.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),s+=c.ia}return e=Math.floor(o*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,lb:[],ra:a,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:e,jb:u},stream:t},i=new Go([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Oa(i),this.g.set(n,t)),n=this.i!==t,i=Zu(i),this.i=t,this.h++,n?(t=En(t,i),Promise.resolve(t)):Promise.resolve(i)},G("shaka.transmuxer.Ec3Transmuxer",Tr),Tr.prototype.transmux=Tr.prototype.transmux,Tr.prototype.getOriginalMimeType=Tr.prototype.getOriginalMimeType,Tr.prototype.convertCodecs=Tr.prototype.convertCodecs,Tr.prototype.isSupported=Tr.prototype.isSupported,Tr.prototype.destroy=Tr.prototype.destroy,Es("audio/ec3",function(){return new Tr("audio/ec3")},eo);function DD(e){if(!e.length)return null;var t=e.find(function(R){return R.type==7});if(e=e.find(function(R){return R.type==8}),!t||!e)return null;var n=new ks(t.data),i=$t(n);if($t(n),$t(n),Pi(n),PD.includes(i)&&(i=Qe(n),i===3&&Qi(n,1),Pi(n),Pi(n),Qi(n,1),ut(n))){i=i!==3?8:12;for(var r=0;r<i;r++)ut(n)&&(6>r?td(n,16):td(n,64))}if(Pi(n),i=Qe(n),i===0)Qe(n);else if(i===1)for(Qi(n,1),Pi(n),Pi(n),i=Qe(n),r=0;r<i;r++)Pi(n);Pi(n),Qi(n,1);var s=Qe(n),o=Qe(n),a=Ft(n,1);a===0&&Qi(n,1),Qi(n,1);var u=0,c=0,h=0,p=0;if(ut(n)&&(u=Qe(n),c=Qe(n),h=Qe(n),p=Qe(n)),r=i=1,ut(n)&&ut(n)){var E=$t(n),A=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<E&&16>=E?(i=A[E-1],r=M[E-1]):E===255&&(i=Ft(n,16),r=Ft(n,16))}return n=(2-a)*(o+1)*16-2*h-2*p,s=16*(s+1)-2*u-2*c,u=[],t=t.fullData,u.push(t.byteLength>>>8&255),u.push(t.byteLength&255),u=u.concat.apply(u,z(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,z(e)),e=new Uint8Array([1,u[3],u[4],u[5],255,225].concat(u,[1],t)),{height:n,width:s,Ca:e,Ia:i,La:r}}function LD(e){function t(M){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:M.pts,dts:M.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var M=[],R=v(r.nalus),C=R.next();!C.done;C=R.next()){C=C.value;var b=C.fullData.byteLength,U=new Uint8Array(4);U[0]=b>>24&255,U[1]=b>>16&255,U[2]=b>>8&255,U[3]=b&255,M.push(U),M.push(C.fullData)}r.data=En.apply(Kn,z(M)),i.push(r)}}for(var i=[],r=null,s=!1,o=0;o<e.length;o++){var a=e[o],u=a.nalus,c=!1;r&&u.length&&!s&&(n(),t(a)),u=v(a.nalus);for(var h=u.next();!h.done;h=u.next()){h=h.value;var p=!1;switch(h.type){case 1:var E=!1;p=!0;var A=h.data;c&&4<A.length&&(A=tI(new ks(A)),A===2||A===4||A===7||A===9)&&(E=!0),E&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(a),r.frame=!0,r.isKeyframe=E;break;case 5:p=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(a),r.frame=!0,r.isKeyframe=!0;break;case 6:p=!0;break;case 7:c=p=!0;break;case 8:p=!0;break;case 9:s=p=!0,r&&r.frame&&(n(),r=null),r||t(a);break;case 12:p=!0;break;default:p=!1}r&&p&&r.nalus.push(h)}}return n(),i}var PD=[100,110,122,244,44,83,86,118,128,138,139,134];function OD(e){if(!e.length)return null;var t=e.find(function(o){return o.type==32}),n=e.find(function(o){return o.type==33}),i=e.find(function(o){return o.type==34});if(!t||!n||!i)return null;var r=ND(t.fullData);e=UD(n.fullData);var s=BD(i.fullData);return t=jD(t.fullData,n.fullData,i.fullData,{Wf:r.Wf,tg:r.tg,Gf:e.Gf,Hf:e.Hf,Af:e.Af,Ff:e.Ff,Bf:e.Bf,Cf:e.Cf,Df:e.Df,Ef:e.Ef,uf:e.uf,vf:e.vf,wf:e.wf,xf:e.xf,yf:e.yf,zf:e.zf,kf:e.kf,pe:e.pe,hf:e.hf,gf:e.gf,ff:e.ff,Yf:s.Yf}),{height:e.height,width:e.width,Ca:t,Ia:e.xj,La:e.wj}}function ND(e){var t=new ks(e,!0);return $t(t),$t(t),Ft(t,4),Ft(t,2),Ft(t,6),e=Ft(t,3),t=ut(t),{Wf:e+1,tg:t}}function UD(e){e=new ks(e,!0),$t(e),$t(e);var t=0,n=0,i=0,r=0;Ft(e,4);var s=Ft(e,3);ut(e);for(var o=Ft(e,2),a=Ft(e,1),u=Ft(e,5),c=$t(e),h=$t(e),p=$t(e),E=$t(e),A=$t(e),M=$t(e),R=$t(e),C=$t(e),b=$t(e),U=$t(e),$=$t(e),Q=[],re=[],W=0;W<s;W++)Q.push(ut(e)),re.push(ut(e));if(0<s)for(W=s;8>W;W++)Ft(e,2);for(W=0;W<s;W++)Q[W]&&Ft(e,88),re[W]&&$t(e);Qe(e),Q=Qe(e),Q==3&&Ft(e,1),re=Qe(e),W=Qe(e),ut(e)&&(t+=Qe(e),n+=Qe(e),i+=Qe(e),r+=Qe(e));var q=Qe(e),ne=Qe(e),ie=Qe(e);if(ut(e))for(var me=0;me<=s;me++)Qe(e),Qe(e),Qe(e);else Qe(e),Qe(e),Qe(e);if(Qe(e),Qe(e),Qe(e),Qe(e),Qe(e),Qe(e),ut(e)&&ut(e))for(me=0;4>me;me++)for(var le=0;le<(me===3?2:6);le++)if(ut(e)){var pe=Math.min(64,1<<4+(me<<1));1<me&&Ua(e);for(var ge=0;ge<pe;ge++)Ua(e)}else Qe(e);for(ut(e),ut(e),ut(e)&&($t(e),Qe(e),Qe(e),ut(e)),me=Qe(e),pe=le=0;pe<me;pe++)if(ge=!1,pe!==0&&(ge=ut(e)),ge){pe===me&&Qe(e),ut(e),Qe(e);for(var _e=ge=0;_e<=le;_e++){var Ie=ut(e),Ee=!1;Ie||(Ee=ut(e)),(Ie||Ee)&&ge++}le=ge}else{for(_e=Qe(e),ge=Qe(e),le=_e+ge,Ie=0;Ie<_e;Ie++)Qe(e),ut(e);for(_e=0;_e<ge;_e++)Qe(e),ut(e)}if(ut(e))for(me=Qe(e),le=0;le<me;le++){for(pe=0;pe<ie+4;pe++)Ft(e,1);Ft(e,1)}if(me=ie=1,le=0,ut(e),ut(e),ut(e)){if(ut(e)&&(pe=$t(e),ge=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],_e=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<pe&&16>=pe?(ie=ge[pe-1],me=_e[pe-1]):pe===255&&(ie=Ft(e,16),me=Ft(e,16))),ut(e)&&ut(e),ut(e)&&(Ft(e,3),ut(e),ut(e)&&($t(e),$t(e),$t(e))),ut(e)&&(Qe(e),Qe(e)),ut(e),ut(e),ut(e),(pe=ut(e))&&(Qe(e),Qe(e),Qe(e),Qe(e)),ut(e)&&(Ft(e,32),Ft(e,32),ut(e)&&Qe(e),ut(e)))for(_e=!1,pe=ut(e),ge=ut(e),(pe||ge)&&((_e=ut(e))&&($t(e),Ft(e,5),ut(e),Ft(e,5)),Ft(e,4),Ft(e,4),_e&&Ft(e,4),Ft(e,5),Ft(e,5),Ft(e,5)),Ie=0;Ie<=s;Ie++){var De=!0;Ee=1,ut(e)||(De=ut(e));var Ge=!1;if(De?Qe(e):Ge=ut(e),Ge||(Ee=Qe(e)+1),pe){for(De=0;De<Ee;De++)Qe(e),Qe(e),_e&&(Qe(e),Qe(e));ut(e)}if(ge){for(De=0;De<Ee;De++)Qe(e),Qe(e),_e&&(Qe(e),Qe(e));ut(e)}}ut(e)&&(ut(e),ut(e),ut(e),le=Qe(e),Qe(e),Qe(e),Qe(e),Qe(e))}return{Af:$,Gf:o,Hf:a,Ff:u,Bf:c,Cf:h,Df:p,Ef:E,uf:A,vf:M,wf:R,xf:C,yf:b,zf:U,pe:le,kf:0,hf:Q,gf:q,ff:ne,width:re-(t+n)*(Q===1||Q===2?2:1),height:W-(i+r)*(Q===1?2:1),xj:ie,wj:me}}function BD(e){var t=new ks(e,!0);$t(t),$t(t),Qe(t),Qe(t),ut(t),ut(t),Ft(t,3),ut(t),ut(t),Qe(t),Qe(t),Ua(t),ut(t),ut(t),ut(t)&&Qe(t),Ua(t),Ua(t),ut(t),ut(t),ut(t),ut(t),e=ut(t),t=ut(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Yf:n}}function jD(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(i.Gf&3)<<6|(i.Hf?1:0)<<5|i.Ff&31,r[2]=i.Bf,r[3]=i.Cf,r[4]=i.Df,r[5]=i.Ef,r[6]=i.uf,r[7]=i.vf,r[8]=i.wf,r[9]=i.xf,r[10]=i.yf,r[11]=i.zf,r[12]=i.Af,r[13]=240|(i.pe&3840)>>8,r[14]=i.pe&255,r[15]=252|i.Yf&3,r[16]=252|i.hf&3,r[17]=248|i.gf&7,r[18]=248|i.ff&7,r[19]=0,r[20]=0,r[21]=(i.kf&3)<<6|(i.Wf&7)<<3|(i.tg?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(e.byteLength&65280)>>8,r[27]=(e.byteLength&255)>>0,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(t.byteLength&65280)>>8,r[e.byteLength+32]=(t.byteLength&255)>>0,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,r[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,r.set(n,e.byteLength+10+t.byteLength+28),r}function Uf(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,s=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&s!==3){var o=e[t+3]>>6;r=1e3*FD[14*(n===3?3-i:i===3?3:4)+r-1],s=VD[3*(n===3?0:n===2?1:2)+s],n=HD[n][i];var a=GD[i],u=Math.floor(n*r/s+(e[t+2]>>1&1))*a,c=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(c=c?parseInt(c[1],10):0)&&87>=c&&i===2&&224e3<=r&&o===0&&(e[t+3]|=128),{sampleRate:s,channelCount:o===3?1:2,ia:u,vj:8*n*a}}return null}function VE(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function HE(e,t){if(t+1<e.length&&VE(e,t)){var n=Uf(e,t),i=4;return n&&n.ia&&(i=n.ia),t+=i,t===e.length||t+1<e.length&&VE(e,t)}return!1}var FD=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],VD=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],HD=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],GD=[0,1,1,4];function Er(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Er.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?ti(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=x(e),s=Na(r).length;s<r.length&&!HE(r,s);s++);var o;for(e=[];s<r.length;){var a=Uf(r,s);if(!a)return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));o||(o=a),s+a.ia<=r.length&&e.push({data:r.subarray(s,s+a.ia),size:a.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),s+=a.ia}return o?(r=9e4*o.vj/o.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:o.sampleRate,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.h,baseMediaDecodeTime:r,jb:e},stream:t},i=new Go([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Oa(i),this.g.set(n,t)),n=this.i!==t,i=Zu(i),this.i=t,this.h++,n?(t=En(t,i),Promise.resolve(t)):Promise.resolve(i)):Promise.reject(new g(2,3,3018,n?n.N()[0]:null))},G("shaka.transmuxer.Mp3Transmuxer",Er),Er.prototype.transmux=Er.prototype.transmux,Er.prototype.getOriginalMimeType=Er.prototype.getOriginalMimeType,Er.prototype.convertCodecs=Er.prototype.convertCodecs,Er.prototype.isSupported=Er.prototype.isSupported,Er.prototype.destroy=Er.prototype.destroy,Es("audio/mpeg",function(){return new Er("audio/mpeg")},eo);function wr(e){this.h=e,this.g=null}d=wr.prototype,d.destroy=function(){},d.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Xi(e).split(","),n=si("audio",t);return t=si("video",t),!n||t||oi(n)!="mp3"?!1:ti(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new vn,e=x(e),e=this.g.parse(e),e.od().audio!="mp3"||r!="audio")return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));for(n=new Uint8Array([]),r=v(e.fb()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=Uf(e,t))?(t+i.ia<=e.length&&(n=En(n,e.subarray(t,t+i.ia))),t+=i.ia):t++;return Promise.resolve(n)},G("shaka.transmuxer.MpegTsTransmuxer",wr),wr.prototype.transmux=wr.prototype.transmux,wr.prototype.getOriginalMimeType=wr.prototype.getOriginalMimeType,wr.prototype.convertCodecs=wr.prototype.convertCodecs,wr.prototype.isSupported=wr.prototype.isSupported,wr.prototype.destroy=wr.prototype.destroy,Es("video/mp2t",function(){return new wr("video/mp2t")},Lh);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function pr(e){this.h=e,(this.g=Om.get("ISOBoxer")())&&zD(this)}function zD(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==KD[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}d=pr.prototype,d.destroy=function(){},d.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?ti(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ti(t)||ti(e))},d.convertCodecs=function(e,t){return t.replace("mss/","")},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n){if(!n)return Promise.resolve(x(e));if(!t.mssPrivateData)return Promise.reject(new g(2,3,3020,n?n.N()[0]:null));try{var i,r=this.g.parseBuffer(e),s=r.fetch("tfhd");s.track_ID=t.id+1;var o=r.fetch("tfdt"),a=r.fetch("traf");o===null&&(o=this.g.createFullBox("tfdt",a,s),o.version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=r.fetch("trun"),c=r.fetch("tfxd");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var h=r.fetch("tfrf");h&&h._parent.boxes.splice(h._parent.boxes.indexOf(h),1);var p=r.fetch("sepiff");if(p!==null){p.type="senc",p.usertype=void 0;var E=r.fetch("saio");if(E===null){E=this.g.createFullBox("saio",a),E.version=0,E.flags=0,E.entry_count=1,E.offset=[0];var A=this.g.createFullBox("saiz",a);if(A.version=0,A.flags=0,A.sample_count=p.sample_count,A.default_sample_info_size=0,A.sample_info_size=[],p.flags&2)for(i=0;i<p.sample_count;i+=1)A.sample_info_size[i]=10+6*p.entry[i].NumberOfEntries;else A.default_sample_info_size=8}}s.flags&=16777214,s.flags|=131072,u.flags|=1;var M=r.fetch("moof");u.data_offset=M.getLength()+8;var R=r.fetch("saio");R!==null&&(R.offset[0]=GE(M,"traf")+GE(a,"senc")+16);var C=x(r.write());return Promise.resolve(C)}catch(b){return b instanceof g?Promise.reject(b):Promise.reject(new g(2,3,3022,n?n.N()[0]:null))}};function GE(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}G("shaka.transmuxer.MssTransmuxer",pr),pr.prototype.transmux=pr.prototype.transmux,pr.prototype.getOriginalMimeType=pr.prototype.getOriginalMimeType,pr.prototype.convertCodecs=pr.prototype.convertCodecs,pr.prototype.isSupported=pr.prototype.isSupported,pr.prototype.destroy=pr.prototype.destroy;var KD=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Es("mss/audio/mp4",function(){return new pr("mss/audio/mp4")},eo),Es("mss/video/mp4",function(){return new pr("mss/video/mp4")},eo);function Ar(e){this.m=e,this.g=0,this.i=new Map,this.l=this.h=this.j=null}d=Ar.prototype,d.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},d.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Xi(n).split(",");return n=si("audio",i),i=si("video",i),n&&(n=oi(n),!qD.includes(n))||i&&(n=oi(i),!WD.includes(n))?!1:t?ti(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ti(t)||ti(e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Xi(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return zu(n,"audio/mp4")}).map(Vh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},d.getOriginalMimeType=function(){return this.m},d.transmux=function(e,t,n,i,r){var s=x(e);if(r=="audio"&&!Ba(s)){for(var o=Na(s),a=o.length;a<s.length;a++)if(HE(s,a))return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));for(a=o.length;a<s.length;a++)if(BE(s,a))return this.h||(this.h=new hr("audio/aac")),this.h.transmux(e,t,n,i,r);return Promise.reject(new g(2,3,3018,n?n.N()[0]:null))}this.j?this.j.clearData():this.j=new vn;var u=this.j.parse(s),c=[],h=u.od();try{var p=null;if(r=="video"){switch(h.video){case"avc":var E=[],A=null,M=u.wc(),R=LD(M);if(!R.length)throw new g(2,3,3023,n?n.N()[0]:null);for(var C=0;C<R.length;C++){var b=R[C];A==null&&(A=b.dts);var U=void 0;U=C+1<R.length?(R[C+1].dts||0)-(b.dts||0):1<R.length?(b.dts||0)-(R[C-1].dts||0):9e4*(n.endTime-n.startTime),E.push({data:b.data,size:b.data.byteLength,duration:U,eb:Math.round((b.pts||0)-(b.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:b.isKeyframe?2:1,ib:b.isKeyframe?0:1}})}for(var $=[],Q=v(M),re=Q.next();!re.done;re=Q.next())$.push.apply($,z(re.value.nalus));var W=DD($);if(!W||A==null)throw new g(2,3,3018,n?n.N()[0]:null);t.height=W.height,t.width=W.width,p={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,lb:[],ra:new Uint8Array([]),Ca:W.Ca,Ia:W.Ia,La:W.La,data:{Eb:this.g,baseMediaDecodeTime:A,jb:E},stream:t};break;case"hvc":var q=[],ne=null,ie=[],me=u.wc();if(!me.length)throw new g(2,3,3023,n?n.N()[0]:null);for(var le=0;le<me.length;le++){var pe=me[le],ge=pe.nalus;ie.push.apply(ie,z(ge));for(var _e=!1,Ie=[],Ee=!1,De=v(ge),Ge=De.next();!Ge.done;Ge=De.next()){var vt=Ge.value;switch(vt.type){case 1:case 0:var rt=Ee=!0;break;case 19:case 20:case 21:_e=rt=Ee=!0;break;case 32:rt=!0;break;case 33:rt=!0;break;case 34:rt=!0;break;case 35:Ee=rt=!0;break;case 39:case 40:rt=!0;break;default:rt=!1}if(Ee&&rt){var Yt=vt.fullData.byteLength,Nt=new Uint8Array(4);Nt[0]=Yt>>24&255,Nt[1]=Yt>>16&255,Nt[2]=Yt>>8&255,Nt[3]=Yt&255,Ie.push(Nt),Ie.push(vt.fullData)}}var Dt=Ie.length?{data:En.apply(Kn,z(Ie)),isKeyframe:_e}:null;if(Dt){ne==null&&pe.dts!=null&&(ne=pe.dts);var Lt=void 0;Lt=le+1<me.length?(me[le+1].dts||0)-(pe.dts||0):1<me.length?(pe.dts||0)-(me[le-1].dts||0):9e4*(n.endTime-n.startTime),q.push({data:Dt.data,size:Dt.data.byteLength,duration:Lt,eb:Math.round((pe.pts||0)-(pe.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:Dt.isKeyframe?2:1,ib:Dt.isKeyframe?0:1}})}}var Xt=OD(ie);if(!Xt||ne==null)throw new g(2,3,3018,n?n.N()[0]:null);t.height=Xt.height,t.width=Xt.width,p={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,lb:[],ra:new Uint8Array([]),Ca:Xt.Ca,Ia:Xt.Ia,La:Xt.La,data:{Eb:this.g,baseMediaDecodeTime:ne,jb:q},stream:t}}p&&(c.push(p),p=null)}if(r=="audio"){switch(h.audio){case"aac":for(var kt=[],jt,St=null,bt=null,ln=null,Yn=v(u.fb()),In=Yn.next();!In.done;In=Yn.next()){var Cn=In.value,Hn=Cn.data;if(Hn){var Qn=0;if(bt==-1&&ln)Hn=En(ln,Cn.data),bt=null;else if(bt!=null&&ln){Qn=Math.max(0,bt);var ia=En(ln,Hn.subarray(0,Qn));kt.push({data:ia,size:ia.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),bt=ln=null}if(jt=UE(Hn,Qn),!jt)throw new g(2,3,3018,n?n.N()[0]:null);for(t.audioSamplingRate=jt.sampleRate,t.channelsCount=jt.channelCount,St==null&&Cn.pts!==null&&(St=Cn.pts);Qn<Hn.length;){var Fs=NE(Hn,Qn);if(!Fs){ln=Hn.subarray(Qn,Hn.length),bt=-1;break}var mo=Fs.ud+Fs.ia;bt=Math.max(0,Qn+mo-Hn.length),bt!=0?ln=Hn.subarray(Qn+Fs.ud,Qn+mo):Qn+mo<=Hn.length&&kt.push({data:Hn.subarray(Qn+Fs.ud,Qn+mo),size:Fs.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),Qn+=mo}}}if(!jt||St==null){if(!u.wc().length)throw new g(2,3,3018,n?n.N()[0]:null);St=9e4*n.startTime;var xr=si("audio",t.codecs.split(","));if(!xr||!t.channelsCount||!t.audioSamplingRate)throw new g(2,3,3018,n?n.N()[0]:null);jt={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:xr};var Dg=kD(xr,t.channelsCount);if(!Dg)throw new g(2,3,3018,n?n.N()[0]:null);for(var ZD=St+9e4*(n.endTime-n.startTime),rw=St;rw<ZD;)kt.push({data:Dg,size:Dg.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),rw+=1024/jt.sampleRate*9e4}var sw=jt.sampleRate,eL=St/9e4*sw;p={id:t.id,type:"audio",codecs:jt.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:sw,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:eL,jb:kt},stream:t};break;case"ac3":for(var ow=[],jf=0,Lg=new Uint8Array([]),Ff=null,aw=v(u.fb()),Pg=aw.next();!Pg.done;Pg=aw.next()){var Og=Pg.value,Ng=Og.data;Ff==null&&Og.pts!==null&&(Ff=Og.pts);for(var fu=0;fu<Ng.length;){var go=jE(Ng,fu);go?(t.audioSamplingRate=go.sampleRate,t.channelsCount=go.channelCount,jf=go.sampleRate,Lg=go.ra,ow.push({data:Ng.subarray(fu,fu+go.ia),size:go.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),fu+=go.ia):fu++}}if(jf==0||Lg.byteLength==0||Ff==null)throw new g(2,3,3018,n?n.N()[0]:null);var tL=Ff/9e4*jf;p={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:jf,duration:i,lb:[],ra:Lg,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:tL,jb:ow},stream:t};break;case"ec3":for(var uw=[],Vf=0,Ug=new Uint8Array([]),Hf=null,lw=v(u.fb()),Bg=lw.next();!Bg.done;Bg=lw.next()){var jg=Bg.value,Fg=jg.data;Hf==null&&jg.pts!==null&&(Hf=jg.pts);for(var hu=0;hu<Fg.length;){var yo=FE(Fg,hu);yo?(t.audioSamplingRate=yo.sampleRate,t.channelsCount=yo.channelCount,Vf=yo.sampleRate,Ug=yo.ra,uw.push({data:Fg.subarray(hu,hu+yo.ia),size:yo.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),hu+=yo.ia):hu++}}if(Vf==0||Ug.byteLength==0||Hf==null)throw new g(2,3,3018,n?n.N()[0]:null);var nL=Hf/9e4*Vf;p={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Vf,duration:i,lb:[],ra:Ug,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:nL,jb:uw},stream:t};break;case"mp3":for(var cw=[],Gf,zf=null,dw=v(u.fb()),Vg=dw.next();!Vg.done;Vg=dw.next()){var Hg=Vg.value,Xl=Hg.data;if(Xl){zf==null&&Hg.pts!==null&&(zf=Hg.pts);for(var ra=0;ra<Xl.length;){var pu=Uf(Xl,ra);pu?(Gf||(Gf=pu),ra+pu.ia<=Xl.length&&cw.push({data:Xl.subarray(ra,ra+pu.ia),size:pu.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),ra+=pu.ia):ra++}}}if(!Gf||zf==null)throw new g(2,3,3018,n?n.N()[0]:null);var fw=Gf.sampleRate,iL=zf/9e4*fw;p={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:fw,duration:i,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:iL,jb:cw},stream:t};break;case"opus":var hw=[],Kf=null,as=u.F;if(!as)throw new g(2,3,3018,n?n.N()[0]:null);var Ri=[];switch(as.$h){case 1:case 2:Ri=[0];break;case 0:Ri=[255,1,1,0,1];break;case 128:Ri=[255,2,0,0,1];break;case 3:Ri=[1,2,1,0,2,1];break;case 4:Ri=[1,2,2,0,1,2,3];break;case 5:Ri=[1,3,2,0,4,1,2,3];break;case 6:Ri=[1,4,2,0,4,1,2,3,5];break;case 7:Ri=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ri=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ri=[1,1,2,0,1];break;case 131:Ri=[1,1,3,0,1,2];break;case 132:Ri=[1,1,4,0,1,2,3];break;case 133:Ri=[1,1,5,0,1,2,3,4];break;case 134:Ri=[1,1,6,0,1,2,3,4,5];break;case 135:Ri=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ri=[1,1,8,0,1,2,3,4,5,6,7]}for(var pw=new Uint8Array([0,as.channelCount,0,0,as.sampleRate>>>24&255,as.sampleRate>>>17&255,as.sampleRate>>>8&255,as.sampleRate>>>0&255,0,0].concat(z(Ri))),mw=as.sampleRate,gw=v(u.fb()),Gg=gw.next();!Gg.done;Gg=gw.next()){var zg=Gg.value,mu=zg.data;Kf==null&&zg.pts!==null&&(Kf=zg.pts);for(var Yl=0;Yl<mu.length;){for(var rL=(mu[Yl+1]&16)!==0,sL=(mu[Yl+1]&8)!==0,Vs=Yl+2,qf=0;mu[Vs]===255;)qf+=255,Vs+=1;qf+=mu[Vs],Vs+=1,Vs+=rL?2:0,Vs+=sL?2:0;var yw=mu.slice(Vs,Vs+qf);hw.push({data:yw,size:yw.byteLength,duration:960,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),Yl=Vs+qf}}if(pw.byteLength==0||Kf==null)throw new g(2,3,3018,n?n.N()[0]:null);t.audioSamplingRate=as.sampleRate,t.channelsCount=as.channelCount;var oL=Kf/9e4*mw;p={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:mw,duration:i,lb:[],ra:pw,Ca:new Uint8Array([]),Ia:0,La:0,data:{Eb:this.g,baseMediaDecodeTime:oL,jb:hw},stream:t}}p&&(c.push(p),p=null)}}catch(qg){return qg&&qg.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(qg)}if(!c.length)return Promise.reject(new g(2,3,3018,n?n.N()[0]:null));var vw=new Go(c),Kg=t.id+"_"+n.i;if(this.i.has(Kg))var $l=this.i.get(Kg);else $l=Oa(vw),this.i.set(Kg,$l);var aL=this.l!==$l,_w=Zu(vw);if(this.l=$l,this.g++,aL){var uL=En($l,_w);return Promise.resolve(uL)}return Promise.resolve(_w)},G("shaka.transmuxer.TsTransmuxer",Ar),Ar.prototype.transmux=Ar.prototype.transmux,Ar.prototype.getOriginalMimeType=Ar.prototype.getOriginalMimeType,Ar.prototype.convertCodecs=Ar.prototype.convertCodecs,Ar.prototype.isSupported=Ar.prototype.isSupported,Ar.prototype.destroy=Ar.prototype.destroy;var qD=["aac","ac-3","ec-3","mp3","opus"],WD=["avc","hevc"];Es("video/mp2t",function(){return new Ar("video/mp2t")},Ph);function zE(){}He(zE,Oi),G("shaka.util.FairPlayUtils",zE);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function KE(){}var ql;function qE(){ql||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(ql=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=XD,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function XD(e,t){var n=this,i;return X(function(r){return r.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),T(r,ql.call(n,e,t),2)):(i=r.h,ew(i)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=ql,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=WE,r.return(WE.call(n,e,t))))})}function WE(e,t){var n=this,i,r,s,o,a,u,c,h,p,E,A,M;return X(function(R){if(R.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=ZE(e),r=[],s=v(t),o=s.next();!o.done;o=s.next())a=o.value,u=XE(a.videoCapabilities,i),c=XE(a.audioCapabilities,i),a.videoCapabilities&&a.videoCapabilities.length&&!u.length||a.audioCapabilities&&a.audioCapabilities.length&&!c.length||(h=Object.assign({},a),h.videoCapabilities=u,h.audioCapabilities=c,r.push(h));if(!r.length)throw p=Error("Unsupported keySystem or supportedConfigurations."),p.name="NotSupportedError",p.code=DOMException.NOT_SUPPORTED_ERR,p;return T(R,ql.call(n,e,r),2)}return E=R.h,M=A=null,r[0]&&(r[0].videoCapabilities&&(A=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(M=r[0].audioCapabilities[0].encryptionScheme)),R.return(new Bf(E,A,M))})}function XE(e,t){return e&&e.filter(function(n){return Rg(n.encryptionScheme,t)})}G("EmeEncryptionSchemePolyfill",KE),KE.install=qE;function YE(){}var Wl;function $E(){Wl||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Wl=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=YD,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function YD(e){var t=this,n,i;return X(function(r){switch(r.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),T(r,Wl.call(t,e),2);case 2:if(n=r.h,!n.supported||!e.keySystemConfiguration)return r.return(n);if((i=n.keySystemAccess)&&ew(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Wl,r.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=QE,i){r.s(3);break}return T(r,JE(e),4);case 4:return n.keySystemAccess=r.h,r.return(n);case 3:return r.return(QE.call(t,e))}})}function QE(e){var t=this,n,i,r,s,o,a,u;return X(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=n=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,s=r.keySystem,i=r.audio&&r.audio.encryptionScheme,n=r.video&&r.video.encryptionScheme,o=ZE(s),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Rg(i,o)&&Rg(n,o))?T(c,Wl.call(t,e),2):c.return(a);case 2:if(u=c.h,u.keySystemAccess){u.keySystemAccess=new Bf(u.keySystemAccess,n,i),c.s(3);break}if(!e.keySystemConfiguration){c.s(3);break}return T(c,JE(e),5);case 5:u.keySystemAccess=c.h;case 3:return c.return(u)}})}function JE(e){var t,n;return X(function(i){if(i.g==1){var r=e.keySystemConfiguration,s=[],o=[];return r.audio&&s.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},s.length&&(r.audioCapabilities=s),o.length&&(r.videoCapabilities=o),t=r,T(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}G("McEncryptionSchemePolyfill",YE),YE.install=$E;function Bf(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Bf.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=v(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=v(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Bf.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function ZE(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":e.startsWith("com.huawei")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function ew(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Rg(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(QD||JD||$D))}function kg(){}function tw(){qE(),$E()}G("EncryptionSchemePolyfills",kg),kg.install=tw;var $D=navigator.userAgent.includes("CrKey"),QD=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10),bg,nw=navigator.userAgent||"";if(nw.includes("Web0S")){var iw=nw.match(/Chrome\/(\d+)/);bg=iw?79<=parseInt(iw[1],10):!1}else bg=!1;var JD=bg;typeof D<"u"&&D.exports&&(D.exports=kg)}).call(S,f,f,void 0);for(var I in S.shaka)l[I]=S.shaka[I]})()}(oy)),oy}var U4=N4();const ec=Lx(U4),B4="[BILILITE_PLAYER_EVENT]";function $r(l,f){window.chrome.webview.postMessage({type:B4,event:l,data:f})}class fA{constructor(f,S,I,_){Sw(this,"onErrorEvent",f=>{this.onError(f.detail)});this.elementRef=f,this.mediaType=S,this.shakaPlayer=I,this.config=_,this.isEnabled=!0,this.currentPlaybackRate=1,this.loaded=!1,this.loadedCallback=null,this.handleLoadedDataBind=this.handleLoadedData.bind(this)}async init(f,S=null){if(!f.url){this.isEnabled=!1,S&&S();return}this.loadedCallback=S,this.elementRef.value.addEventListener("loadeddata",this.handleLoadedDataBind),await this.shakaPlayer.attach(this.elementRef.value),this.shakaPlayer.configure(this.config),this.shakaPlayer.addEventListener("error",this.onErrorEvent);try{await this.shakaPlayer.load(f.url,null,f.contentType),console.log(`The ${this.mediaType} has now been loaded!`)}catch(I){this.onError(I)}}handleLoadedData(){this.loaded=!0,this.loadedCallback&&this.loadedCallback()}dispose(){try{this.elementRef.value.removeEventListener("loadeddata",this.handleLoadedDataBind),this.loadedCallback=null}catch(f){console.warn(f)}}onError(f){console.error("Error code",f.code,"object",f)}setCurrentTime(f){this.elementRef.value.currentTime=f}getCurrentTime(){return this.elementRef.value.currentTime}setPlaybackRate(f){this.currentPlaybackRate=f,this.elementRef.value.playbackRate=f}getPlaybackRate(){return this.elementRef.value.playbackRate}play(){this.elementRef.value.play()}pause(){this.elementRef.value.pause()}setVolume(f){this.elementRef.value.volume=f}getVolume(){return this.elementRef.value.volume}getStats(){const f=this.shakaPlayer.getStats();return{width:f.width,height:f.height,decodedFrames:f.decodedFrames,droppedFrames:f.droppedFrames}}}class Px{constructor(f,S,I){this.videoPlayer=f,this.audioPlayer=S,this.avSyncManager=I,this.transformState={scale:1,translateX:0,translateY:0,flipHorizontal:!1,flipVertical:!1},this.reportStatsTimer=null}play(){this.videoPlayer.play(),this.audioPlayer.play(),this.startReportStats()}pause(){this.videoPlayer.pause(),this.audioPlayer.pause(),this.stopReportStats()}seek(f){this.videoPlayer.setCurrentTime(f),this.audioPlayer.setCurrentTime(f)}setVolume(f){this.videoPlayer.setVolume(f),this.audioPlayer.setVolume(f)}getVolume(){return this.audioPlayer.getVolume()}setPlaybackRate(f){this.videoPlayer.setPlaybackRate(f),this.audioPlayer.setPlaybackRate(f)}checkAVSync(){this.avSyncManager.checkSync()}reportStats(){const f=this.videoPlayer.getStats();$r("stats",f)}startReportStats(){this.reportStatsTimer=setInterval(()=>{this.reportStats()},2e3)}stopReportStats(){this.reportStatsTimer&&clearInterval(this.reportStatsTimer)}flipVertical(){this.transformState.flipVertical=!this.transformState.flipVertical,this._applyTransforms()}flipHorizontal(){this.transformState.flipHorizontal=!this.transformState.flipHorizontal,this._applyTransforms()}zoom(f){this.transformState.scale=Math.max(.1,f),this._applyTransforms()}move(f,S){this.transformState.translateX+=f,this.transformState.translateY+=S,this._applyTransforms()}resetTransforms(){this.transformState={scale:1,translateX:0,translateY:0,flipHorizontal:!1,flipVertical:!1},this._applyTransforms()}async togglePictureInPicture(){const f=this.videoPlayer.elementRef.value;if(!f){console.error("Video element not found");return}try{return document.pictureInPictureElement===f?(await document.exitPictureInPicture(),{success:!0,action:"exit"}):(await f.requestPictureInPicture(),{success:!0,action:"enter"})}catch(S){return console.error("Picture-in-Picture error:",S),{success:!1,error:S.message}}}_applyTransforms(){const f=this.videoPlayer.elementRef.value;if(!f)return;const S=[];S.push(`scale(${this.transformState.scale})`),S.push(`translate(${this.transformState.translateX}px, ${this.transformState.translateY}px)`),this.transformState.flipHorizontal&&S.push("scaleX(-1)"),this.transformState.flipVertical&&S.push("scaleY(-1)"),f.style.transform=S.join(" "),f.style.transformOrigin="center center"}}class j4 extends Px{constructor(f,S,I){super(f,S,I)}}class Ox{constructor(f,S){this.videoPlayer=f,this.audioPlayer=S,this.syncThresholdSmall=.1,this.syncThresholdLarge=.5,this.isSyncing=!1,this.lastSyncTime=0,this.syncCooldown=1e3,this.syncTimeoutId=null}checkSync(){if(!this.videoPlayer.isEnabled||!this.audioPlayer.isEnabled)return;const f=Date.now();if(this.isSyncing||f-this.lastSyncTime<this.syncCooldown)return;const S=this.videoPlayer.getCurrentTime(),I=this.audioPlayer.getCurrentTime(),_=S-I;if(Math.abs(_)<this.syncThresholdSmall){this.resetSyncState();return}this.isSyncing=!0,this.lastSyncTime=f;try{if(this.syncTimeoutId&&(clearTimeout(this.syncTimeoutId),this.syncTimeoutId=null),Math.abs(_)>=this.syncThresholdLarge)console.log(`大偏差同步: 跳跃音频到视频位置 (差异: ${_.toFixed(3)}s)`),this.audioPlayer.setCurrentTime(S),this.resetSyncState();else{const k=this.calculateSyncRate(_,this.videoPlayer.currentPlaybackRate);console.log(`小偏差同步: 调整音频速率为 ${k.toFixed(2)}x (差异: ${_.toFixed(3)}s)`),this.audioPlayer.setPlaybackRate(k),this.syncTimeoutId=setTimeout(()=>{const D=this.videoPlayer.getCurrentTime()-this.audioPlayer.getCurrentTime();Math.abs(D)<this.syncThresholdSmall?(console.log(`同步完成，恢复音频速率为 ${this.videoPlayer.currentPlaybackRate}x`),this.resetSyncState()):(console.log(`同步未完成，继续调整 (新差异: ${D.toFixed(3)}s)`),this.isSyncing=!1,this.checkSync()),this.syncTimeoutId=null},500)}}catch(k){console.error("同步过程中出错:",k),this.resetSyncState()}}resetAudioRate(){this.audioPlayer.setPlaybackRate(this.videoPlayer.currentPlaybackRate)}resetSyncState(){this.syncTimeoutId&&(clearTimeout(this.syncTimeoutId),this.syncTimeoutId=null),this.resetAudioRate(),this.isSyncing=!1}calculateSyncRate(f,S){const I=Math.min(Math.abs(f)*5,.5);return f>0?Math.min(S+I,2):Math.max(.5,S-I)}setSyncThresholds(f,S){this.syncThresholdSmall=f,this.syncThresholdLarge=S}}const F4="ShakaPlayerView",hA={__name:"ShakaPlayerView",setup(l){window.shaka=ec,console.log(F4);const f=pc(null),S=pc(null),I={};let _=null;document.addEventListener("visibilitychange",function(){if(document.visibilityState==="visible"){if(console.log("页面恢复前台"),I.videoPlayer&&I.audioPlayer&&I.videoPlayer.isEnabled&&I.audioPlayer.isEnabled){const N=I.audioPlayer.getCurrentTime();I.videoPlayer.setCurrentTime(N)}_&&_.checkAVSync()}else console.log("页面进入后台"),_&&_.avSyncManager&&_.avSyncManager.resetSyncState()});const k=()=>{const j=new URLSearchParams(window.location.search).get("playData");console.log("playDataBase64：",j);const V=atob(j),K=Uint8Array.from(V,Te=>Te.codePointAt(0)),v=new TextDecoder("utf-8").decode(K),z=JSON.parse(v);return console.log("playData:",z),z},D=N=>{$r("positionChanged",f.value.currentTime),_.checkAVSync()},d=()=>{$r("ended")},L=N=>{console.log("volumeChanged",S.value.volume),$r("volumeChanged",S.value.volume)},B=async()=>{if(ec.polyfill.installAll(),!ec.Player.isBrowserSupported()){console.error("Browser not supported!");return}const N={video:{url:"",contentType:"video/mp4"},audio:{url:"",contentType:"audio/mp3"}},j={video:{...N.video,...k().video},audio:{...N.audio,...k().audio}},V={streaming:{bufferingGoal:30}};I.videoPlayer!=null&&(I.videoPlayer.dispose(),I.videoPlayer=null),I.audioPlayer!=null&&(I.audioPlayer.dispose(),I.audioPlayer=null),I.videoPlayer=new fA(f,"video",new ec.Player,V),I.audioPlayer=new fA(S,"audio",new ec.Player,V);const K=new Ox(I.videoPlayer,I.audioPlayer);_=new j4(I.videoPlayer,I.audioPlayer,K),window.playerController=_,window.resume=()=>_.play(),window.seek=ye=>_.seek(ye),window.setVolume=ye=>_.setVolume(ye),window.getVolume=()=>_.getVolume(),window.setRate=ye=>_.setPlaybackRate(ye),window.pause=()=>_.pause(),window.setCheckAVSyncDiff=(ye,Se)=>K.setSyncThresholds(ye,Se),window.flipVertical=()=>_.flipVertical(),window.flipHorizontal=()=>_.flipHorizontal(),window.zoom=ye=>_.zoom(ye),window.move=(ye,Se)=>_.move(ye,Se),window.resetTransforms=()=>_.resetTransforms(),window.togglePictureInPicture=()=>_.togglePictureInPicture();let v=!1,z=!1;const Te=()=>{if(v&&z){const ye=f.value.duration===1/0?0:f.value.duration;$r("loaded",{duration:ye}),_.reportStats()}};await Promise.all([I.videoPlayer.init(j.video,()=>{v=!0,Te()}),I.audioPlayer.init(j.audio,()=>{z=!0,Te()})]),!I.videoPlayer.isEnabled&&!I.audioPlayer.isEnabled&&$r("loaded",{duration:0})};return By(()=>{B()}),window.initApp=B,(N,j)=>(Fy(),px(Xr,null,[wu("video",{ref_key:"videoElement",ref:f,id:"videoElement",width:"100%",height:"100%",onTimeupdate:D,onVolumechange:L,onEnded:d},null,544),wu("video",{ref_key:"audioElement",ref:S,id:"audioElement",width:"0",height:"0",onVolumechange:L},null,544)],64))}};var ay={exports:{}},pA;function V4(){return pA||(pA=1,function(l,f){(function(S,I){l.exports=I()})(window,function(){return function(S){var I={};function _(k){if(I[k])return I[k].exports;var D=I[k]={i:k,l:!1,exports:{}};return S[k].call(D.exports,D,D.exports,_),D.l=!0,D.exports}return _.m=S,_.c=I,_.d=function(k,D,d){_.o(k,D)||Object.defineProperty(k,D,{enumerable:!0,get:d})},_.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},_.t=function(k,D){if(1&D&&(k=_(k)),8&D||4&D&&typeof k=="object"&&k&&k.__esModule)return k;var d=Object.create(null);if(_.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:k}),2&D&&typeof k!="string")for(var L in k)_.d(d,L,(function(B){return k[B]}).bind(null,L));return d},_.n=function(k){var D=k&&k.__esModule?function(){return k.default}:function(){return k};return _.d(D,"a",D),D},_.o=function(k,D){return Object.prototype.hasOwnProperty.call(k,D)},_.p="",_(_.s=20)}([function(S,I,_){var k=_(9),D=_.n(k),d=function(){function L(){}return L.e=function(B,N){B&&!L.FORCE_GLOBAL_TAG||(B=L.GLOBAL_TAG);var j="[".concat(B,"] > ").concat(N);L.ENABLE_CALLBACK&&L.emitter.emit("log","error",j),L.ENABLE_ERROR&&(console.error?console.error(j):console.warn?console.warn(j):console.log(j))},L.i=function(B,N){B&&!L.FORCE_GLOBAL_TAG||(B=L.GLOBAL_TAG);var j="[".concat(B,"] > ").concat(N);L.ENABLE_CALLBACK&&L.emitter.emit("log","info",j),L.ENABLE_INFO&&(console.info?console.info(j):console.log(j))},L.w=function(B,N){B&&!L.FORCE_GLOBAL_TAG||(B=L.GLOBAL_TAG);var j="[".concat(B,"] > ").concat(N);L.ENABLE_CALLBACK&&L.emitter.emit("log","warn",j),L.ENABLE_WARN&&(console.warn?console.warn(j):console.log(j))},L.d=function(B,N){B&&!L.FORCE_GLOBAL_TAG||(B=L.GLOBAL_TAG);var j="[".concat(B,"] > ").concat(N);L.ENABLE_CALLBACK&&L.emitter.emit("log","debug",j),L.ENABLE_DEBUG&&(console.debug?console.debug(j):console.log(j))},L.v=function(B,N){B&&!L.FORCE_GLOBAL_TAG||(B=L.GLOBAL_TAG);var j="[".concat(B,"] > ").concat(N);L.ENABLE_CALLBACK&&L.emitter.emit("log","verbose",j),L.ENABLE_VERBOSE&&console.log(j)},L}();d.GLOBAL_TAG="mpegts.js",d.FORCE_GLOBAL_TAG=!1,d.ENABLE_ERROR=!0,d.ENABLE_INFO=!0,d.ENABLE_WARN=!0,d.ENABLE_DEBUG=!0,d.ENABLE_VERBOSE=!0,d.ENABLE_CALLBACK=!1,d.emitter=new D.a,I.a=d},function(S,I,_){var k;(function(D){D.IO_ERROR="io_error",D.DEMUX_ERROR="demux_error",D.INIT_SEGMENT="init_segment",D.MEDIA_SEGMENT="media_segment",D.LOADING_COMPLETE="loading_complete",D.RECOVERED_EARLY_EOF="recovered_early_eof",D.MEDIA_INFO="media_info",D.METADATA_ARRIVED="metadata_arrived",D.SCRIPTDATA_ARRIVED="scriptdata_arrived",D.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",D.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",D.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",D.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",D.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",D.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",D.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",D.STATISTICS_INFO="statistics_info",D.RECOMMEND_SEEKPOINT="recommend_seekpoint"})(k||(k={})),I.a=k},function(S,I,_){_.d(I,"c",function(){return D}),_.d(I,"b",function(){return d}),_.d(I,"a",function(){return L});var k=_(3),D={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},d={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},L=function(){function B(N){this._type=N||"undefined",this._status=D.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return B.prototype.destroy=function(){this._status=D.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},B.prototype.isWorking=function(){return this._status===D.kConnecting||this._status===D.kBuffering},Object.defineProperty(B.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(N){this._onContentLengthKnown=N},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(N){this._onURLRedirect=N},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(N){this._onDataArrival=N},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onError",{get:function(){return this._onError},set:function(N){this._onError=N},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onComplete",{get:function(){return this._onComplete},set:function(N){this._onComplete=N},enumerable:!1,configurable:!0}),B.prototype.open=function(N,j){throw new k.c("Unimplemented abstract function!")},B.prototype.abort=function(){throw new k.c("Unimplemented abstract function!")},B}()},function(S,I,_){_.d(I,"d",function(){return d}),_.d(I,"a",function(){return L}),_.d(I,"b",function(){return B}),_.d(I,"c",function(){return N});var k,D=(k=function(j,V){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,v){K.__proto__=v}||function(K,v){for(var z in v)Object.prototype.hasOwnProperty.call(v,z)&&(K[z]=v[z])})(j,V)},function(j,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function K(){this.constructor=j}k(j,V),j.prototype=V===null?Object.create(V):(K.prototype=V.prototype,new K)}),d=function(){function j(V){this._message=V}return Object.defineProperty(j.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),j.prototype.toString=function(){return this.name+": "+this.message},j}(),L=function(j){function V(K){return j.call(this,K)||this}return D(V,j),Object.defineProperty(V.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),V}(d),B=function(j){function V(K){return j.call(this,K)||this}return D(V,j),Object.defineProperty(V.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),V}(d),N=function(j){function V(K){return j.call(this,K)||this}return D(V,j),Object.defineProperty(V.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),V}(d)},function(S,I,_){var k;(function(D){D.ERROR="error",D.LOADING_COMPLETE="loading_complete",D.RECOVERED_EARLY_EOF="recovered_early_eof",D.MEDIA_INFO="media_info",D.METADATA_ARRIVED="metadata_arrived",D.SCRIPTDATA_ARRIVED="scriptdata_arrived",D.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",D.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",D.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",D.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",D.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",D.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",D.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",D.STATISTICS_INFO="statistics_info",D.DESTROYING="destroying"})(k||(k={})),I.a=k},function(S,I,_){var k={};(function(){var D=self.navigator.userAgent.toLowerCase(),d=/(edge)\/([\w.]+)/.exec(D)||/(opr)[\/]([\w.]+)/.exec(D)||/(chrome)[ \/]([\w.]+)/.exec(D)||/(iemobile)[\/]([\w.]+)/.exec(D)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(D)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(D)||/(webkit)[ \/]([\w.]+)/.exec(D)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(D)||/(msie) ([\w.]+)/.exec(D)||D.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(D)||D.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(D)||[],L=/(ipad)/.exec(D)||/(ipod)/.exec(D)||/(windows phone)/.exec(D)||/(iphone)/.exec(D)||/(kindle)/.exec(D)||/(android)/.exec(D)||/(windows)/.exec(D)||/(mac)/.exec(D)||/(linux)/.exec(D)||/(cros)/.exec(D)||[],B={browser:d[5]||d[3]||d[1]||"",version:d[2]||d[4]||"0",majorVersion:d[4]||d[2]||"0",platform:L[0]||""},N={};if(B.browser){N[B.browser]=!0;var j=B.majorVersion.split(".");N.version={major:parseInt(B.majorVersion,10),string:B.version},j.length>1&&(N.version.minor=parseInt(j[1],10)),j.length>2&&(N.version.build=parseInt(j[2],10))}B.platform&&(N[B.platform]=!0),(N.chrome||N.opr||N.safari)&&(N.webkit=!0),(N.rv||N.iemobile)&&(N.rv&&delete N.rv,B.browser="msie",N.msie=!0),N.edge&&(delete N.edge,B.browser="msedge",N.msedge=!0),N.opr&&(B.browser="opera",N.opera=!0),N.safari&&N.android&&(B.browser="android",N.android=!0);for(var V in N.name=B.browser,N.platform=B.platform,k)k.hasOwnProperty(V)&&delete k[V];Object.assign(k,N)})(),I.a=k},function(S,I,_){I.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(S,I,_){var k;(function(D){D.ERROR="error",D.SOURCE_OPEN="source_open",D.UPDATE_END="update_end",D.BUFFER_FULL="buffer_full",D.START_STREAMING="start_streaming",D.END_STREAMING="end_streaming"})(k||(k={})),I.a=k},function(S,I,_){var k=_(9),D=_.n(k),d=_(0),L=function(){function B(){}return Object.defineProperty(B,"forceGlobalTag",{get:function(){return d.a.FORCE_GLOBAL_TAG},set:function(N){d.a.FORCE_GLOBAL_TAG=N,B._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(B,"globalTag",{get:function(){return d.a.GLOBAL_TAG},set:function(N){d.a.GLOBAL_TAG=N,B._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(B,"enableAll",{get:function(){return d.a.ENABLE_VERBOSE&&d.a.ENABLE_DEBUG&&d.a.ENABLE_INFO&&d.a.ENABLE_WARN&&d.a.ENABLE_ERROR},set:function(N){d.a.ENABLE_VERBOSE=N,d.a.ENABLE_DEBUG=N,d.a.ENABLE_INFO=N,d.a.ENABLE_WARN=N,d.a.ENABLE_ERROR=N,B._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(B,"enableDebug",{get:function(){return d.a.ENABLE_DEBUG},set:function(N){d.a.ENABLE_DEBUG=N,B._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(B,"enableVerbose",{get:function(){return d.a.ENABLE_VERBOSE},set:function(N){d.a.ENABLE_VERBOSE=N,B._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(B,"enableInfo",{get:function(){return d.a.ENABLE_INFO},set:function(N){d.a.ENABLE_INFO=N,B._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(B,"enableWarn",{get:function(){return d.a.ENABLE_WARN},set:function(N){d.a.ENABLE_WARN=N,B._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(B,"enableError",{get:function(){return d.a.ENABLE_ERROR},set:function(N){d.a.ENABLE_ERROR=N,B._notifyChange()},enumerable:!1,configurable:!0}),B.getConfig=function(){return{globalTag:d.a.GLOBAL_TAG,forceGlobalTag:d.a.FORCE_GLOBAL_TAG,enableVerbose:d.a.ENABLE_VERBOSE,enableDebug:d.a.ENABLE_DEBUG,enableInfo:d.a.ENABLE_INFO,enableWarn:d.a.ENABLE_WARN,enableError:d.a.ENABLE_ERROR,enableCallback:d.a.ENABLE_CALLBACK}},B.applyConfig=function(N){d.a.GLOBAL_TAG=N.globalTag,d.a.FORCE_GLOBAL_TAG=N.forceGlobalTag,d.a.ENABLE_VERBOSE=N.enableVerbose,d.a.ENABLE_DEBUG=N.enableDebug,d.a.ENABLE_INFO=N.enableInfo,d.a.ENABLE_WARN=N.enableWarn,d.a.ENABLE_ERROR=N.enableError,d.a.ENABLE_CALLBACK=N.enableCallback},B._notifyChange=function(){var N=B.emitter;if(N.listenerCount("change")>0){var j=B.getConfig();N.emit("change",j)}},B.registerListener=function(N){B.emitter.addListener("change",N)},B.removeListener=function(N){B.emitter.removeListener("change",N)},B.addLogListener=function(N){d.a.emitter.addListener("log",N),d.a.emitter.listenerCount("log")>0&&(d.a.ENABLE_CALLBACK=!0,B._notifyChange())},B.removeLogListener=function(N){d.a.emitter.removeListener("log",N),d.a.emitter.listenerCount("log")===0&&(d.a.ENABLE_CALLBACK=!1,B._notifyChange())},B}();L.emitter=new D.a,I.a=L},function(S,I,_){var k,D=typeof Reflect=="object"?Reflect:null,d=D&&typeof D.apply=="function"?D.apply:function(oe,Be,He){return Function.prototype.apply.call(oe,Be,He)};k=D&&typeof D.ownKeys=="function"?D.ownKeys:Object.getOwnPropertySymbols?function(oe){return Object.getOwnPropertyNames(oe).concat(Object.getOwnPropertySymbols(oe))}:function(oe){return Object.getOwnPropertyNames(oe)};var L=Number.isNaN||function(oe){return oe!=oe};function B(){B.init.call(this)}S.exports=B,S.exports.once=function(oe,Be){return new Promise(function(He,xe){function J(T){oe.removeListener(Be,Y),xe(T)}function Y(){typeof oe.removeListener=="function"&&oe.removeListener("error",J),He([].slice.call(arguments))}Le(oe,Be,Y,{once:!0}),Be!=="error"&&function(T,H,ve){typeof T.on=="function"&&Le(T,"error",H,ve)}(oe,J,{once:!0})})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var N=10;function j(oe){if(typeof oe!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof oe)}function V(oe){return oe._maxListeners===void 0?B.defaultMaxListeners:oe._maxListeners}function K(oe,Be,He,xe){var J,Y,T,H;if(j(He),(Y=oe._events)===void 0?(Y=oe._events=Object.create(null),oe._eventsCount=0):(Y.newListener!==void 0&&(oe.emit("newListener",Be,He.listener?He.listener:He),Y=oe._events),T=Y[Be]),T===void 0)T=Y[Be]=He,++oe._eventsCount;else if(typeof T=="function"?T=Y[Be]=xe?[He,T]:[T,He]:xe?T.unshift(He):T.push(He),(J=V(oe))>0&&T.length>J&&!T.warned){T.warned=!0;var ve=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(Be)+" listeners added. Use emitter.setMaxListeners() to increase limit");ve.name="MaxListenersExceededWarning",ve.emitter=oe,ve.type=Be,ve.count=T.length,H=ve,console&&console.warn&&console.warn(H)}return oe}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function z(oe,Be,He){var xe={fired:!1,wrapFn:void 0,target:oe,type:Be,listener:He},J=v.bind(xe);return J.listener=He,xe.wrapFn=J,J}function Te(oe,Be,He){var xe=oe._events;if(xe===void 0)return[];var J=xe[Be];return J===void 0?[]:typeof J=="function"?He?[J.listener||J]:[J]:He?function(Y){for(var T=new Array(Y.length),H=0;H<T.length;++H)T[H]=Y[H].listener||Y[H];return T}(J):Se(J,J.length)}function ye(oe){var Be=this._events;if(Be!==void 0){var He=Be[oe];if(typeof He=="function")return 1;if(He!==void 0)return He.length}return 0}function Se(oe,Be){for(var He=new Array(Be),xe=0;xe<Be;++xe)He[xe]=oe[xe];return He}function Le(oe,Be,He,xe){if(typeof oe.on=="function")xe.once?oe.once(Be,He):oe.on(Be,He);else{if(typeof oe.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof oe);oe.addEventListener(Be,function J(Y){xe.once&&oe.removeEventListener(Be,J),He(Y)})}}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(oe){if(typeof oe!="number"||oe<0||L(oe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+oe+".");N=oe}}),B.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(oe){if(typeof oe!="number"||oe<0||L(oe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+oe+".");return this._maxListeners=oe,this},B.prototype.getMaxListeners=function(){return V(this)},B.prototype.emit=function(oe){for(var Be=[],He=1;He<arguments.length;He++)Be.push(arguments[He]);var xe=oe==="error",J=this._events;if(J!==void 0)xe=xe&&J.error===void 0;else if(!xe)return!1;if(xe){var Y;if(Be.length>0&&(Y=Be[0]),Y instanceof Error)throw Y;var T=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw T.context=Y,T}var H=J[oe];if(H===void 0)return!1;if(typeof H=="function")d(H,this,Be);else{var ve=H.length,Ye=Se(H,ve);for(He=0;He<ve;++He)d(Ye[He],this,Be)}return!0},B.prototype.addListener=function(oe,Be){return K(this,oe,Be,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(oe,Be){return K(this,oe,Be,!0)},B.prototype.once=function(oe,Be){return j(Be),this.on(oe,z(this,oe,Be)),this},B.prototype.prependOnceListener=function(oe,Be){return j(Be),this.prependListener(oe,z(this,oe,Be)),this},B.prototype.removeListener=function(oe,Be){var He,xe,J,Y,T;if(j(Be),(xe=this._events)===void 0)return this;if((He=xe[oe])===void 0)return this;if(He===Be||He.listener===Be)--this._eventsCount==0?this._events=Object.create(null):(delete xe[oe],xe.removeListener&&this.emit("removeListener",oe,He.listener||Be));else if(typeof He!="function"){for(J=-1,Y=He.length-1;Y>=0;Y--)if(He[Y]===Be||He[Y].listener===Be){T=He[Y].listener,J=Y;break}if(J<0)return this;J===0?He.shift():function(H,ve){for(;ve+1<H.length;ve++)H[ve]=H[ve+1];H.pop()}(He,J),He.length===1&&(xe[oe]=He[0]),xe.removeListener!==void 0&&this.emit("removeListener",oe,T||Be)}return this},B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=function(oe){var Be,He,xe;if((He=this._events)===void 0)return this;if(He.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):He[oe]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete He[oe]),this;if(arguments.length===0){var J,Y=Object.keys(He);for(xe=0;xe<Y.length;++xe)(J=Y[xe])!=="removeListener"&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Be=He[oe])=="function")this.removeListener(oe,Be);else if(Be!==void 0)for(xe=Be.length-1;xe>=0;xe--)this.removeListener(oe,Be[xe]);return this},B.prototype.listeners=function(oe){return Te(this,oe,!0)},B.prototype.rawListeners=function(oe){return Te(this,oe,!1)},B.listenerCount=function(oe,Be){return typeof oe.listenerCount=="function"?oe.listenerCount(Be):ye.call(oe,Be)},B.prototype.listenerCount=ye,B.prototype.eventNames=function(){return this._eventsCount>0?k(this._events):[]}},function(S,I,_){_.d(I,"b",function(){return d}),_.d(I,"a",function(){return L});var k=_(2),D=_(6),d={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},L={NETWORK_EXCEPTION:k.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:k.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:k.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:k.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:D.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:D.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:D.a.CODEC_UNSUPPORTED}},function(S,I,_){_.d(I,"d",function(){return k}),_.d(I,"b",function(){return D}),_.d(I,"a",function(){return d}),_.d(I,"c",function(){return L});var k=function(B,N,j,V,K){this.dts=B,this.pts=N,this.duration=j,this.originalDts=V,this.isSyncPoint=K,this.fileposition=null},D=function(){function B(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return B.prototype.appendSyncPoint=function(N){N.isSyncPoint=!0,this.syncPoints.push(N)},B}(),d=function(){function B(){this._list=[]}return B.prototype.clear=function(){this._list=[]},B.prototype.appendArray=function(N){var j=this._list;N.length!==0&&(j.length>0&&N[0].originalDts<j[j.length-1].originalDts&&this.clear(),Array.prototype.push.apply(j,N))},B.prototype.getLastSyncPointBeforeDts=function(N){if(this._list.length==0)return null;var j=this._list,V=0,K=j.length-1,v=0,z=0,Te=K;for(N<j[0].dts&&(V=0,z=Te+1);z<=Te;){if((v=z+Math.floor((Te-z)/2))===K||N>=j[v].dts&&N<j[v+1].dts){V=v;break}j[v].dts<N?z=v+1:Te=v-1}return this._list[V]},B}(),L=function(){function B(N){this._type=N,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(B.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),B.prototype.isEmpty=function(){return this._list.length===0},B.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},B.prototype._searchNearestSegmentBefore=function(N){var j=this._list;if(j.length===0)return-2;var V=j.length-1,K=0,v=0,z=V,Te=0;if(N<j[0].originalBeginDts)return Te=-1;for(;v<=z;){if((K=v+Math.floor((z-v)/2))===V||N>j[K].lastSample.originalDts&&N<j[K+1].originalBeginDts){Te=K;break}j[K].originalBeginDts<N?v=K+1:z=K-1}return Te},B.prototype._searchNearestSegmentAfter=function(N){return this._searchNearestSegmentBefore(N)+1},B.prototype.append=function(N){var j=this._list,V=N,K=this._lastAppendLocation,v=0;K!==-1&&K<j.length&&V.originalBeginDts>=j[K].lastSample.originalDts&&(K===j.length-1||K<j.length-1&&V.originalBeginDts<j[K+1].originalBeginDts)?v=K+1:j.length>0&&(v=this._searchNearestSegmentBefore(V.originalBeginDts)+1),this._lastAppendLocation=v,this._list.splice(v,0,V)},B.prototype.getLastSegmentBefore=function(N){var j=this._searchNearestSegmentBefore(N);return j>=0?this._list[j]:null},B.prototype.getLastSampleBefore=function(N){var j=this.getLastSegmentBefore(N);return j!=null?j.lastSample:null},B.prototype.getLastSyncPointBefore=function(N){for(var j=this._searchNearestSegmentBefore(N),V=this._list[j].syncPoints;V.length===0&&j>0;)j--,V=this._list[j].syncPoints;return V.length>0?V[V.length-1]:null},B}()},function(S,I,_){var k=function(){function D(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return D.prototype.isComplete=function(){var d=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,L=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&d&&L},D.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},D.prototype.getNearestKeyframe=function(d){if(this.keyframesIndex==null)return null;var L=this.keyframesIndex,B=this._search(L.times,d);return{index:B,milliseconds:L.times[B],fileposition:L.filepositions[B]}},D.prototype._search=function(d,L){var B=0,N=d.length-1,j=0,V=0,K=N;for(L<d[0]&&(B=0,V=K+1);V<=K;){if((j=V+Math.floor((K-V)/2))===N||L>=d[j]&&L<d[j+1]){B=j;break}d[j]<L?V=j+1:K=j-1}return B},D}();I.a=k},function(S,I,_){var k=_(9),D=_.n(k),d=_(0),L=_(5),B=_(12);function N(x,w,y){var m=x;if(w+y<m.length){for(;y--;)if((192&m[++w])!=128)return!1;return!0}return!1}var j,V=function(x){for(var w=[],y=x,m=0,g=x.length;m<g;)if(y[m]<128)w.push(String.fromCharCode(y[m])),++m;else{if(!(y[m]<192)){if(y[m]<224){if(N(y,m,1)&&(P=(31&y[m])<<6|63&y[m+1])>=128){w.push(String.fromCharCode(65535&P)),m+=2;continue}}else if(y[m]<240){if(N(y,m,2)&&(P=(15&y[m])<<12|(63&y[m+1])<<6|63&y[m+2])>=2048&&(63488&P)!=55296){w.push(String.fromCharCode(65535&P)),m+=3;continue}}else if(y[m]<248){var P;if(N(y,m,3)&&(P=(7&y[m])<<18|(63&y[m+1])<<12|(63&y[m+2])<<6|63&y[m+3])>65536&&P<1114112){P-=65536,w.push(String.fromCharCode(P>>>10|55296)),w.push(String.fromCharCode(1023&P|56320)),m+=4;continue}}}w.push("�"),++m}return w.join("")},K=_(3),v=(j=new ArrayBuffer(2),new DataView(j).setInt16(0,256,!0),new Int16Array(j)[0]===256),z=function(){function x(){}return x.parseScriptData=function(w,y,m){var g={};try{var P=x.parseValue(w,y,m),O=x.parseValue(w,y+P.size,m-P.size);g[P.data]=O.data}catch(F){d.a.e("AMF",F.toString())}return g},x.parseObject=function(w,y,m){if(m<3)throw new K.a("Data not enough when parse ScriptDataObject");var g=x.parseString(w,y,m),P=x.parseValue(w,y+g.size,m-g.size),O=P.objectEnd;return{data:{name:g.data,value:P.data},size:g.size+P.size,objectEnd:O}},x.parseVariable=function(w,y,m){return x.parseObject(w,y,m)},x.parseString=function(w,y,m){if(m<2)throw new K.a("Data not enough when parse String");var g=new DataView(w,y,m).getUint16(0,!v);return{data:g>0?V(new Uint8Array(w,y+2,g)):"",size:2+g}},x.parseLongString=function(w,y,m){if(m<4)throw new K.a("Data not enough when parse LongString");var g=new DataView(w,y,m).getUint32(0,!v);return{data:g>0?V(new Uint8Array(w,y+4,g)):"",size:4+g}},x.parseDate=function(w,y,m){if(m<10)throw new K.a("Data size invalid when parse Date");var g=new DataView(w,y,m),P=g.getFloat64(0,!v),O=g.getInt16(8,!v);return{data:new Date(P+=60*O*1e3),size:10}},x.parseValue=function(w,y,m){if(m<1)throw new K.a("Data not enough when parse Value");var g,P=new DataView(w,y,m),O=1,F=P.getUint8(0),te=!1;try{switch(F){case 0:g=P.getFloat64(1,!v),O+=8;break;case 1:g=!!P.getUint8(1),O+=1;break;case 2:var ee=x.parseString(w,y+1,m-1);g=ee.data,O+=ee.size;break;case 3:g={};var ae=0;for((16777215&P.getUint32(m-4,!v))==9&&(ae=3);O<m-4;){var he=x.parseObject(w,y+O,m-O-ae);if(he.objectEnd)break;g[he.data.name]=he.data.value,O+=he.size}O<=m-3&&(16777215&P.getUint32(O-1,!v))===9&&(O+=3);break;case 8:for(g={},O+=4,ae=0,(16777215&P.getUint32(m-4,!v))==9&&(ae=3);O<m-8;){var fe=x.parseVariable(w,y+O,m-O-ae);if(fe.objectEnd)break;g[fe.data.name]=fe.data.value,O+=fe.size}O<=m-3&&(16777215&P.getUint32(O-1,!v))===9&&(O+=3);break;case 9:g=void 0,O=1,te=!0;break;case 10:g=[];var se=P.getUint32(1,!v);O+=4;for(var be=0;be<se;be++){var ze=x.parseValue(w,y+O,m-O);g.push(ze.data),O+=ze.size}break;case 11:var Ue=x.parseDate(w,y+1,m-1);g=Ue.data,O+=Ue.size;break;case 12:var nt=x.parseString(w,y+1,m-1);g=nt.data,O+=nt.size;break;default:O=m,d.a.w("AMF","Unsupported AMF value type "+F)}}catch(Je){d.a.e("AMF",Je.toString())}return{data:g,size:O,objectEnd:te}},x}(),Te=function(){function x(w){this.TAG="ExpGolomb",this._buffer=w,this._buffer_index=0,this._total_bytes=w.byteLength,this._total_bits=8*w.byteLength,this._current_word=0,this._current_word_bits_left=0}return x.prototype.destroy=function(){this._buffer=null},x.prototype._fillCurrentWord=function(){var w=this._total_bytes-this._buffer_index;if(w<=0)throw new K.a("ExpGolomb: _fillCurrentWord() but no bytes available");var y=Math.min(4,w),m=new Uint8Array(4);m.set(this._buffer.subarray(this._buffer_index,this._buffer_index+y)),this._current_word=new DataView(m.buffer).getUint32(0,!1),this._buffer_index+=y,this._current_word_bits_left=8*y},x.prototype.readBits=function(w){if(w>32)throw new K.b("ExpGolomb: readBits() bits exceeded max 32bits!");if(w<=this._current_word_bits_left){var y=this._current_word>>>32-w;return this._current_word<<=w,this._current_word_bits_left-=w,y}var m=this._current_word_bits_left?this._current_word:0;m>>>=32-this._current_word_bits_left;var g=w-this._current_word_bits_left;this._fillCurrentWord();var P=Math.min(g,this._current_word_bits_left),O=this._current_word>>>32-P;return this._current_word<<=P,this._current_word_bits_left-=P,m=m<<P|O},x.prototype.readBool=function(){return this.readBits(1)===1},x.prototype.readByte=function(){return this.readBits(8)},x.prototype._skipLeadingZero=function(){var w;for(w=0;w<this._current_word_bits_left;w++)if((this._current_word&2147483648>>>w)!=0)return this._current_word<<=w,this._current_word_bits_left-=w,w;return this._fillCurrentWord(),w+this._skipLeadingZero()},x.prototype.readUEG=function(){var w=this._skipLeadingZero();return this.readBits(w+1)-1},x.prototype.readSEG=function(){var w=this.readUEG();return 1&w?w+1>>>1:-1*(w>>>1)},x}(),ye=function(){function x(){}return x._ebsp2rbsp=function(w){for(var y=w,m=y.byteLength,g=new Uint8Array(m),P=0,O=0;O<m;O++)O>=2&&y[O]===3&&y[O-1]===0&&y[O-2]===0||(g[P]=y[O],P++);return new Uint8Array(g.buffer,0,P)},x.parseSPS=function(w){for(var y=w.subarray(1,4),m="avc1.",g=0;g<3;g++){var P=y[g].toString(16);P.length<2&&(P="0"+P),m+=P}var O=x._ebsp2rbsp(w),F=new Te(O);F.readByte();var te=F.readByte();F.readByte();var ee=F.readByte();F.readUEG();var ae=x.getProfileString(te),he=x.getLevelString(ee),fe=1,se=420,be=8,ze=8;if((te===100||te===110||te===122||te===244||te===44||te===83||te===86||te===118||te===128||te===138||te===144)&&((fe=F.readUEG())===3&&F.readBits(1),fe<=3&&(se=[0,420,422,444][fe]),be=F.readUEG()+8,ze=F.readUEG()+8,F.readBits(1),F.readBool()))for(var Ue=fe!==3?8:12,nt=0;nt<Ue;nt++)F.readBool()&&(nt<6?x._skipScalingList(F,16):x._skipScalingList(F,64));F.readUEG();var Je=F.readUEG();if(Je===0)F.readUEG();else if(Je===1){F.readBits(1),F.readSEG(),F.readSEG();var Xe=F.readUEG();for(nt=0;nt<Xe;nt++)F.readSEG()}var wt=F.readUEG();F.readBits(1);var Kt=F.readUEG(),Ze=F.readUEG(),xt=F.readBits(1);xt===0&&F.readBits(1),F.readBits(1);var At=0,Rt=0,It=0,nn=0;F.readBool()&&(At=F.readUEG(),Rt=F.readUEG(),It=F.readUEG(),nn=F.readUEG());var Sn=1,Bt=1,qt=0,Tn=!0,Gn=0,an=0;if(F.readBool()){if(F.readBool()){var zn=F.readByte();zn>0&&zn<16?(Sn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][zn-1],Bt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][zn-1]):zn===255&&(Sn=F.readByte()<<8|F.readByte(),Bt=F.readByte()<<8|F.readByte())}if(F.readBool()&&F.readBool(),F.readBool()&&(F.readBits(4),F.readBool()&&F.readBits(24)),F.readBool()&&(F.readUEG(),F.readUEG()),F.readBool()){var bi=F.readBits(32),Ti=F.readBits(32);Tn=F.readBool(),qt=(Gn=Ti)/(an=2*bi)}}var ii=1;Sn===1&&Bt===1||(ii=Sn/Bt);var hi=0,fn=0;fe===0?(hi=1,fn=2-xt):(hi=fe===3?1:2,fn=(fe===1?2:1)*(2-xt));var Di=16*(Kt+1),Ei=16*(Ze+1)*(2-xt);Di-=(At+Rt)*hi,Ei-=(It+nn)*fn;var cn=Math.ceil(Di*ii);return F.destroy(),F=null,{codec_mimetype:m,profile_idc:te,level_idc:ee,profile_string:ae,level_string:he,chroma_format_idc:fe,bit_depth:be,bit_depth_luma:be,bit_depth_chroma:ze,ref_frames:wt,chroma_format:se,chroma_format_string:x.getChromaFormatString(se),frame_rate:{fixed:Tn,fps:qt,fps_den:an,fps_num:Gn},sar_ratio:{width:Sn,height:Bt},codec_size:{width:Di,height:Ei},present_size:{width:cn,height:Ei}}},x._skipScalingList=function(w,y){for(var m=8,g=8,P=0;P<y;P++)g!==0&&(g=(m+w.readSEG()+256)%256),m=g===0?m:g},x.getProfileString=function(w){switch(w){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},x.getLevelString=function(w){return(w/10).toFixed(1)},x.getChromaFormatString=function(w){switch(w){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},x}(),Se=_(6),Le=function(){function x(){}return x._ebsp2rbsp=function(w){for(var y=w,m=y.byteLength,g=new Uint8Array(m),P=0,O=0;O<m;O++)O>=2&&y[O]===3&&y[O-1]===0&&y[O-2]===0||(g[P]=y[O],P++);return new Uint8Array(g.buffer,0,P)},x.parseVPS=function(w){var y=x._ebsp2rbsp(w),m=new Te(y);return m.readByte(),m.readByte(),m.readBits(4),m.readBits(2),m.readBits(6),{num_temporal_layers:m.readBits(3)+1,temporal_id_nested:m.readBool()}},x.parseSPS=function(w){var y=x._ebsp2rbsp(w),m=new Te(y);m.readByte(),m.readByte();for(var g=0,P=0,O=0,F=0,te=(m.readBits(4),m.readBits(3)),ee=(m.readBool(),m.readBits(2)),ae=m.readBool(),he=m.readBits(5),fe=m.readByte(),se=m.readByte(),be=m.readByte(),ze=m.readByte(),Ue=m.readByte(),nt=m.readByte(),Je=m.readByte(),Xe=m.readByte(),wt=m.readByte(),Kt=m.readByte(),Ze=m.readByte(),xt=[],At=[],Rt=0;Rt<te;Rt++)xt.push(m.readBool()),At.push(m.readBool());if(te>0)for(Rt=te;Rt<8;Rt++)m.readBits(2);for(Rt=0;Rt<te;Rt++)xt[Rt]&&(m.readByte(),m.readByte(),m.readByte(),m.readByte(),m.readByte(),m.readByte(),m.readByte(),m.readByte(),m.readByte(),m.readByte(),m.readByte()),At[Rt]&&m.readByte();m.readUEG();var It=m.readUEG();It==3&&m.readBits(1);var nn=m.readUEG(),Sn=m.readUEG();m.readBool()&&(g+=m.readUEG(),P+=m.readUEG(),O+=m.readUEG(),F+=m.readUEG());var Bt=m.readUEG(),qt=m.readUEG(),Tn=m.readUEG();for(Rt=m.readBool()?0:te;Rt<=te;Rt++)m.readUEG(),m.readUEG(),m.readUEG();if(m.readUEG(),m.readUEG(),m.readUEG(),m.readUEG(),m.readUEG(),m.readUEG(),m.readBool()&&m.readBool())for(var Gn=0;Gn<4;Gn++)for(var an=0;an<(Gn===3?2:6);an++)if(m.readBool()){var zn=Math.min(64,1<<4+(Gn<<1));for(Gn>1&&m.readSEG(),Rt=0;Rt<zn;Rt++)m.readSEG()}else m.readUEG();m.readBool(),m.readBool(),m.readBool()&&(m.readByte(),m.readUEG(),m.readUEG(),m.readBool());var bi=m.readUEG(),Ti=0;for(Rt=0;Rt<bi;Rt++){var ii=!1;if(Rt!==0&&(ii=m.readBool()),ii){Rt===bi&&m.readUEG(),m.readBool(),m.readUEG();for(var hi=0,fn=0;fn<=Ti;fn++){var Di=m.readBool(),Ei=!1;Di||(Ei=m.readBool()),(Di||Ei)&&hi++}Ti=hi}else{var cn=m.readUEG(),Fr=m.readUEG();for(Ti=cn+Fr,fn=0;fn<cn;fn++)m.readUEG(),m.readBool();for(fn=0;fn<Fr;fn++)m.readUEG(),m.readBool()}}if(m.readBool()){var Rr=m.readUEG();for(Rt=0;Rt<Rr;Rt++){for(fn=0;fn<Tn+4;fn++)m.readBits(1);m.readBits(1)}}var Ki=0,gs=1,ys=1,ri=!1,ga=1,Kn=1;if(m.readBool(),m.readBool(),m.readBool()){if(m.readBool()){var ts=m.readByte();ts>0&&ts<=16?(gs=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][ts-1],ys=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][ts-1]):ts===255&&(gs=m.readBits(16),ys=m.readBits(16))}if(m.readBool()&&m.readBool(),m.readBool()&&(m.readBits(3),m.readBool(),m.readBool()&&(m.readByte(),m.readByte(),m.readByte())),m.readBool()&&(m.readUEG(),m.readUEG()),m.readBool(),m.readBool(),m.readBool(),m.readBool()&&(m.readUEG(),m.readUEG(),m.readUEG(),m.readUEG()),m.readBool()&&(ga=m.readBits(32),Kn=m.readBits(32),m.readBool()&&m.readUEG(),m.readBool())){var mr=!1,wi=!1,kr=!1;for(mr=m.readBool(),wi=m.readBool(),(mr||wi)&&((kr=m.readBool())&&(m.readByte(),m.readBits(5),m.readBool(),m.readBits(5)),m.readBits(4),m.readBits(4),kr&&m.readBits(4),m.readBits(5),m.readBits(5),m.readBits(5)),Rt=0;Rt<=te;Rt++){var br=m.readBool();ri=br;var En=!0,On=1;br||(En=m.readBool());var Vr=!1;if(En?m.readUEG():Vr=m.readBool(),Vr||(On=m.readUEG()+1),mr){for(fn=0;fn<On;fn++)m.readUEG(),m.readUEG(),kr&&(m.readUEG(),m.readUEG());m.readBool()}if(wi){for(fn=0;fn<On;fn++)m.readUEG(),m.readUEG(),kr&&(m.readUEG(),m.readUEG());m.readBool()}}}m.readBool()&&(m.readBool(),m.readBool(),m.readBool(),Ki=m.readUEG(),m.readUEG(),m.readUEG(),m.readUEG(),m.readUEG())}m.readBool();var Ic="hvc1.".concat(he,".1.L").concat(Ze,".B0"),vs=nn-(g+P)*(It===1||It===2?2:1),si=Sn-(O+F)*(It===1?2:1),ya=1;return gs!==1&&ys!==1&&(ya=gs/ys),m.destroy(),m=null,{codec_mimetype:Ic,profile_string:x.getProfileString(he),level_string:x.getLevelString(Ze),profile_idc:he,bit_depth:Bt+8,ref_frames:1,chroma_format:It,chroma_format_string:x.getChromaFormatString(It),general_level_idc:Ze,general_profile_space:ee,general_tier_flag:ae,general_profile_idc:he,general_profile_compatibility_flags_1:fe,general_profile_compatibility_flags_2:se,general_profile_compatibility_flags_3:be,general_profile_compatibility_flags_4:ze,general_constraint_indicator_flags_1:Ue,general_constraint_indicator_flags_2:nt,general_constraint_indicator_flags_3:Je,general_constraint_indicator_flags_4:Xe,general_constraint_indicator_flags_5:wt,general_constraint_indicator_flags_6:Kt,min_spatial_segmentation_idc:Ki,constant_frame_rate:0,chroma_format_idc:It,bit_depth_luma_minus8:Bt,bit_depth_chroma_minus8:qt,frame_rate:{fixed:ri,fps:Kn/ga,fps_den:ga,fps_num:Kn},sar_ratio:{width:gs,height:ys},codec_size:{width:vs,height:si},present_size:{width:vs*ya,height:si}}},x.parsePPS=function(w){var y=x._ebsp2rbsp(w),m=new Te(y);m.readByte(),m.readByte(),m.readUEG(),m.readUEG(),m.readBool(),m.readBool(),m.readBits(3),m.readBool(),m.readBool(),m.readUEG(),m.readUEG(),m.readSEG(),m.readBool(),m.readBool(),m.readBool()&&m.readUEG(),m.readSEG(),m.readSEG(),m.readBool(),m.readBool(),m.readBool(),m.readBool();var g=m.readBool(),P=m.readBool(),O=1;return P&&g?O=0:P?O=3:g&&(O=2),{parallelismType:O}},x.getChromaFormatString=function(w){switch(w){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},x.getProfileString=function(w){switch(w){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},x.getLevelString=function(w){return(w/30).toFixed(1)},x}();function oe(x){return x.byteOffset%2==0&&x.byteLength%2==0}function Be(x){return x.byteOffset%4==0&&x.byteLength%4==0}function He(x,w){for(var y=0;y<x.length;y++)if(x[y]!==w[y])return!1;return!0}var xe=function(x,w){return x.byteLength===w.byteLength&&(Be(x)&&Be(w)?function(y,m){return He(new Uint32Array(y.buffer,y.byteOffset,y.byteLength/4),new Uint32Array(m.buffer,m.byteOffset,m.byteLength/4))}(x,w):oe(x)&&oe(w)?function(y,m){return He(new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2),new Uint16Array(m.buffer,m.byteOffset,m.byteLength/2))}(x,w):function(y,m){return He(y,m)}(x,w))},J=function(){return(J=Object.assign||function(x){for(var w,y=1,m=arguments.length;y<m;y++)for(var g in w=arguments[y])Object.prototype.hasOwnProperty.call(w,g)&&(x[g]=w[g]);return x}).apply(this,arguments)},Y=function(){function x(){}return x.parseOBUs=function(w,y){for(var m=0;m<w.byteLength;){var g=m,P=(w[m],(120&w[m])>>3),O=(4&w[m])!=0,F=(2&w[m])!=0;w[m],m+=1,O&&(m+=1);var te=Number.POSITIVE_INFINITY;if(F){te=0;for(var ee=0;;ee++){var ae=w[m++];if(te|=(127&ae)<<7*ee,(128&ae)==0)break}}console.log(P),P===1?y=J(J({},x.parseSeuqneceHeader(w.subarray(m,m+te))),{sequence_header_data:w.subarray(g,m+te)}):(P==3&&y||P==6&&y)&&(y=x.parseOBUFrameHeader(w.subarray(m,m+te),0,0,y)),m+=te}return y},x.parseSeuqneceHeader=function(w){var y=new Te(w),m=y.readBits(3),g=(y.readBool(),y.readBool()),P=!0,O=0,F=1,te=void 0,ee=[];if(g)ee.push({operating_point_idc:0,level:y.readBits(5),tier:0});else{if(y.readBool()){var ae=y.readBits(32),he=y.readBits(32),fe=y.readBool();if(fe){for(var se=0;y.readBits(1)===0;)se+=1;se>=32||(1<<se)-1+y.readBits(se)}(O=he)/(F=ae),P=fe,y.readBool()&&(y.readBits(5),y.readBits(32),te=y.readBits(5),y.readBits(5))}for(var be=y.readBool(),ze=y.readBits(5),Ue=0;Ue<=ze;Ue++){var nt=y.readBits(12),Je=y.readBits(5),Xe=Je>7?y.readBits(1):0;ee.push({operating_point_idc:nt,level:Je,tier:Xe}),be&&y.readBool()&&y.readBits(4)}}var wt=ee[0],Kt=wt.level,Ze=wt.tier,xt=y.readBits(4),At=y.readBits(4),Rt=y.readBits(xt+1)+1,It=y.readBits(At+1)+1,nn=!1;g||(nn=y.readBool()),nn&&(y.readBits(4),y.readBits(4)),y.readBool(),y.readBool(),y.readBool();var Sn=!1,Bt=2,qt=2,Tn=0;g||(y.readBool(),y.readBool(),y.readBool(),y.readBool(),(Sn=y.readBool())&&(y.readBool(),y.readBool()),(Bt=y.readBool()?2:y.readBits(1))?qt=y.readBool()?2:y.readBits(1):qt=2,Sn?Tn=y.readBits(3)+1:Tn=0);var Gn=y.readBool(),an=(y.readBool(),y.readBool(),y.readBool()),zn=8;m===2&&an?zn=y.readBool()?12:10:zn=an?10:8;var bi=!1;m!==1&&(bi=y.readBool()),y.readBool()&&(y.readBits(8),y.readBits(8),y.readBits(8));var Ti=1,ii=1;return bi?(y.readBits(1),Ti=1,ii=1):(y.readBits(1),m==0?(Ti=1,ii=1):m==1?(Ti=0,ii=0):zn==12?y.readBits(1)&&y.readBits(1):(Ti=1,ii=0),Ti&&ii&&y.readBits(2),y.readBits(1)),y.readBool(),y.destroy(),y=null,{codec_mimetype:"av01.".concat(m,".").concat(x.getLevelString(Kt,Ze),".").concat(zn.toString(10).padStart(2,"0")),level:Kt,tier:Ze,level_string:x.getLevelString(Kt,Ze),profile_idc:m,profile_string:"".concat(m),bit_depth:zn,ref_frames:1,chroma_format:x.getChromaFormat(bi,Ti,ii),chroma_format_string:x.getChromaFormatString(bi,Ti,ii),sequence_header:{frame_id_numbers_present_flag:nn,additional_frame_id_length_minus_1:void 0,delta_frame_id_length_minus_2:void 0,reduced_still_picture_header:g,decoder_model_info_present_flag:!1,operating_points:ee,buffer_removal_time_length_minus_1:te,equal_picture_interval:P,seq_force_screen_content_tools:Bt,seq_force_integer_mv:qt,enable_order_hint:Sn,order_hint_bits:Tn,enable_superres:Gn,frame_width_bit:xt+1,frame_height_bit:At+1,max_frame_width:Rt,max_frame_height:It},keyframe:void 0,frame_rate:{fixed:P,fps:O/F,fps_den:F,fps_num:O}}},x.parseOBUFrameHeader=function(w,y,m,g){var P=g.sequence_header,O=new Te(w),F=(P.max_frame_width,P.max_frame_height,0);P.frame_id_numbers_present_flag&&(F=P.additional_frame_id_length_minus_1+P.delta_frame_id_length_minus_2+3);var te=0,ee=!0,ae=!0,he=!1;if(!P.reduced_still_picture_header){if(O.readBool())return g;ee=(te=O.readBits(2))===2||te===0,(ae=O.readBool())&&P.decoder_model_info_present_flag&&P.equal_picture_interval,ae&&O.readBool(),he=!!(te===3||te===0&&ae)||O.readBool()}g.keyframe=ee,O.readBool();var fe=P.seq_force_screen_content_tools;P.seq_force_screen_content_tools===2&&(fe=O.readBits(1)),fe&&(P.seq_force_integer_mv,P.seq_force_integer_mv==2&&O.readBits(1)),P.frame_id_numbers_present_flag&&O.readBits(F);var se=!1;if(se=te==3||!P.reduced_still_picture_header&&O.readBool(),O.readBits(P.order_hint_bits),ee||he||O.readBits(3),P.decoder_model_info_present_flag&&O.readBool()){for(var be=0;be<=P.operating_points_cnt_minus_1;be++)if(P.operating_points[be].decoder_model_present_for_this_op[be]){var ze=P.operating_points[be].operating_point_idc;(ze===0||ze>>y&1&&ze>>m+8&1)&&O.readBits(P.buffer_removal_time_length_minus_1+1)}}var Ue=255;if(te===3||te==0&&ae||(Ue=O.readBits(8)),(ee||Ue!==255)&&he&&P.enable_order_hint)for(var nt=0;nt<8;nt++)O.readBits(P.order_hint_bits);if(ee){var Je=x.frameSizeAndRenderSize(O,se,P);g.codec_size={width:Je.FrameWidth,height:Je.FrameHeight},g.present_size={width:Je.RenderWidth,height:Je.RenderHeight},g.sar_ratio={width:Je.RenderWidth/Je.FrameWidth,height:Je.RenderHeight/Je.FrameHeight}}return O.destroy(),O=null,g},x.frameSizeAndRenderSize=function(w,y,m){var g=m.max_frame_width,P=m.max_frame_height;y&&(g=w.readBits(m.frame_width_bit)+1,P=w.readBits(m.frame_height_bit)+1);var O=!1;m.enable_superres&&(O=w.readBool());var F=8;O&&(F=w.readBits(3)+9);var te=g;g=Math.floor((8*te+F/2)/F);var ee=te,ae=P;if(w.readBool()){var he=w.readBits(16)+1,fe=w.readBits(16)+1;ee=w.readBits(he)+1,ae=w.readBits(fe)+1}return{UpscaledWidth:te,FrameWidth:g,FrameHeight:P,RenderWidth:ee,RenderHeight:ae}},x.getLevelString=function(w,y){return"".concat(w.toString(10).padStart(2,"0")).concat(y===0?"M":"H")},x.getChromaFormat=function(w,y,m){return w?0:y===0&&m===0?3:y===1&&m===0?2:y===1&&m===1?1:Number.NaN},x.getChromaFormatString=function(w,y,m){return w?"4:0:0":y===0&&m===0?"4:4:4":y===1&&m===0?"4:2:2":y===1&&m===1?"4:2:0":"Unknown"},x}(),T,H=function(){function x(w,y){this.TAG="FLVDemuxer",this._config=y,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=w.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=w.hasAudioTrack,this._hasVideo=w.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new B.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var m=new ArrayBuffer(2);return new DataView(m).setInt16(0,256,!0),new Int16Array(m)[0]===256}()}return x.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},x.probe=function(w){var y=new Uint8Array(w);if(y.byteLength<9)return{needMoreData:!0};var m={match:!1};if(y[0]!==70||y[1]!==76||y[2]!==86||y[3]!==1)return m;var g,P,O=(4&y[4])>>>2!=0,F=(1&y[4])!=0,te=(g=y)[P=5]<<24|g[P+1]<<16|g[P+2]<<8|g[P+3];return te<9?m:{match:!0,consumed:te,dataOffset:te,hasAudioTrack:O,hasVideoTrack:F}},x.prototype.bindDataSource=function(w){return w.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(x.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(w){this._onTrackMetadata=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(w){this._onMediaInfo=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(w){this._onMetaDataArrived=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(w){this._onScriptDataArrived=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onError",{get:function(){return this._onError},set:function(w){this._onError=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(w){this._onDataAvailable=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(w){this._timestampBase=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"overridedDuration",{get:function(){return this._duration},set:function(w){this._durationOverrided=!0,this._duration=w,this._mediaInfo.duration=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"overridedHasAudio",{set:function(w){this._hasAudioFlagOverrided=!0,this._hasAudio=w,this._mediaInfo.hasAudio=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"overridedHasVideo",{set:function(w){this._hasVideoFlagOverrided=!0,this._hasVideo=w,this._mediaInfo.hasVideo=w},enumerable:!1,configurable:!0}),x.prototype.resetMediaInfo=function(){this._mediaInfo=new B.a},x.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},x.prototype.parseChunks=function(w,y){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new K.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var m=0,g=this._littleEndian;if(y===0){if(!(w.byteLength>13))return 0;m=x.probe(w).dataOffset}for(this._firstParse&&(this._firstParse=!1,y+m!==this._dataOffset&&d.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),(P=new DataView(w,m)).getUint32(0,!g)!==0&&d.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),m+=4);m<w.byteLength;){this._dispatch=!0;var P=new DataView(w,m);if(m+11+4>w.byteLength)break;var O=P.getUint8(0),F=16777215&P.getUint32(0,!g);if(m+11+F+4>w.byteLength)break;if(O===8||O===9||O===18){var te=P.getUint8(4),ee=P.getUint8(5),ae=P.getUint8(6)|ee<<8|te<<16|P.getUint8(7)<<24;(16777215&P.getUint32(7,!g))!==0&&d.a.w(this.TAG,"Meet tag which has StreamID != 0!");var he=m+11;switch(O){case 8:this._parseAudioData(w,he,F,ae);break;case 9:this._parseVideoData(w,he,F,ae,y+m);break;case 18:this._parseScriptData(w,he,F)}var fe=P.getUint32(11+F,!g);fe!==11+F&&d.a.w(this.TAG,"Invalid PrevTagSize ".concat(fe)),m+=11+F+4}else d.a.w(this.TAG,"Unsupported tag type ".concat(O,", skipped")),m+=11+F+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),m},x.prototype._parseScriptData=function(w,y,m){var g=z.parseScriptData(w,y,m);if(g.hasOwnProperty("onMetaData")){if(g.onMetaData==null||typeof g.onMetaData!="object")return void d.a.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&d.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=g;var P=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},P)),typeof P.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=P.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof P.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=P.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof P.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=P.audiodatarate),typeof P.videodatarate=="number"&&(this._mediaInfo.videoDataRate=P.videodatarate),typeof P.width=="number"&&(this._mediaInfo.width=P.width),typeof P.height=="number"&&(this._mediaInfo.height=P.height),typeof P.duration=="number"){if(!this._durationOverrided){var O=Math.floor(P.duration*this._timescale);this._duration=O,this._mediaInfo.duration=O}}else this._mediaInfo.duration=0;if(typeof P.framerate=="number"){var F=Math.floor(1e3*P.framerate);if(F>0){var te=F/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=te,this._referenceFrameRate.fps_num=F,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=te}}if(typeof P.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var ee=P.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(ee),P.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=P,d.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(g).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},g))},x.prototype._parseKeyframesIndex=function(w){for(var y=[],m=[],g=1;g<w.times.length;g++){var P=this._timestampBase+Math.floor(1e3*w.times[g]);y.push(P),m.push(w.filepositions[g])}return{times:y,filepositions:m}},x.prototype._parseAudioData=function(w,y,m,g){if(m<=1)d.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(this._hasAudioFlagOverrided!==!0||this._hasAudio!==!1){this._littleEndian;var P=new DataView(w,y,m).getUint8(0),O=P>>>4;if(O!==9)if(O===2||O===10){var F=0,te=(12&P)>>>2;if(te>=0&&te<=4){F=this._flvSoundRateTable[te];var ee=1&P,ae=this._audioMetadata,he=this._audioTrack;if(ae||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(ae=this._audioMetadata={}).type="audio",ae.id=he.id,ae.timescale=this._timescale,ae.duration=this._duration,ae.audioSampleRate=F,ae.channelCount=ee===0?1:2),O===10){var fe=this._parseAACAudioData(w,y+1,m-1);if(fe==null)return;if(fe.packetType===0){if(ae.config){if(xe(fe.data.config,ae.config))return;d.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var se=fe.data;ae.audioSampleRate=se.samplingRate,ae.channelCount=se.channelCount,ae.codec=se.codec,ae.originalCodec=se.originalCodec,ae.config=se.config,ae.refSampleDuration=1024/ae.audioSampleRate*ae.timescale,d.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",ae),(Ue=this._mediaInfo).audioCodec=ae.originalCodec,Ue.audioSampleRate=ae.audioSampleRate,Ue.audioChannelCount=ae.channelCount,Ue.hasVideo?Ue.videoCodec!=null&&(Ue.mimeType='video/x-flv; codecs="'+Ue.videoCodec+","+Ue.audioCodec+'"'):Ue.mimeType='video/x-flv; codecs="'+Ue.audioCodec+'"',Ue.isComplete()&&this._onMediaInfo(Ue)}else if(fe.packetType===1){var be=this._timestampBase+g,ze={unit:fe.data,length:fe.data.byteLength,dts:be,pts:be};he.samples.push(ze),he.length+=fe.data.length}else d.a.e(this.TAG,"Flv: Unsupported AAC data type ".concat(fe.packetType))}else if(O===2){if(!ae.codec){var Ue;if((se=this._parseMP3AudioData(w,y+1,m-1,!0))==null)return;ae.audioSampleRate=se.samplingRate,ae.channelCount=se.channelCount,ae.codec=se.codec,ae.originalCodec=se.originalCodec,ae.refSampleDuration=1152/ae.audioSampleRate*ae.timescale,d.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",ae),(Ue=this._mediaInfo).audioCodec=ae.codec,Ue.audioSampleRate=ae.audioSampleRate,Ue.audioChannelCount=ae.channelCount,Ue.audioDataRate=se.bitRate,Ue.hasVideo?Ue.videoCodec!=null&&(Ue.mimeType='video/x-flv; codecs="'+Ue.videoCodec+","+Ue.audioCodec+'"'):Ue.mimeType='video/x-flv; codecs="'+Ue.audioCodec+'"',Ue.isComplete()&&this._onMediaInfo(Ue)}var nt=this._parseMP3AudioData(w,y+1,m-1,!1);if(nt==null)return;be=this._timestampBase+g;var Je={unit:nt,length:nt.byteLength,dts:be,pts:be};he.samples.push(Je),he.length+=nt.length}}else this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+te)}else this._onError(Se.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+O);else{if(m<=5)return void d.a.w(this.TAG,"Flv: Invalid audio packet, missing AudioFourCC in Ehnanced FLV payload!");var Xe=15&P,wt=String.fromCharCode.apply(String,new Uint8Array(w,y,m).slice(1,5));switch(wt){case"Opus":this._parseOpusAudioPacket(w,y+5,m-5,g,Xe);break;case"fLaC":this._parseFlacAudioPacket(w,y+5,m-5,g,Xe);break;default:this._onError(Se.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec: "+wt)}}}},x.prototype._parseAACAudioData=function(w,y,m){if(!(m<=1)){var g={},P=new Uint8Array(w,y,m);return g.packetType=P[0],P[0]===0?g.data=this._parseAACAudioSpecificConfig(w,y+1,m-1):g.data=P.subarray(1),g}d.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},x.prototype._parseAACAudioSpecificConfig=function(w,y,m){var g,P,O=new Uint8Array(w,y,m),F=null,te=0,ee=null;if(te=g=O[0]>>>3,(P=(7&O[0])<<1|O[1]>>>7)<0||P>=this._mpegSamplingRates.length)this._onError(Se.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var ae=this._mpegSamplingRates[P],he=(120&O[1])>>>3;if(!(he<0||he>=8)){te===5&&(ee=(7&O[1])<<1|O[2]>>>7,(124&O[2])>>>2);var fe=self.navigator.userAgent.toLowerCase();return fe.indexOf("firefox")!==-1?P>=6?(te=5,F=new Array(4),ee=P-3):(te=2,F=new Array(2),ee=P):fe.indexOf("android")!==-1?(te=2,F=new Array(2),ee=P):(te=5,ee=P,F=new Array(4),P>=6?ee=P-3:he===1&&(te=2,F=new Array(2),ee=P)),F[0]=te<<3,F[0]|=(15&P)>>>1,F[1]=(15&P)<<7,F[1]|=(15&he)<<3,te===5&&(F[1]|=(15&ee)>>>1,F[2]=(1&ee)<<7,F[2]|=8,F[3]=0),{config:F,samplingRate:ae,channelCount:he,codec:"mp4a.40."+te,originalCodec:"mp4a.40."+g}}this._onError(Se.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},x.prototype._parseMP3AudioData=function(w,y,m,g){if(!(m<4)){this._littleEndian;var P=new Uint8Array(w,y,m),O=null;if(g){if(P[0]!==255)return;var F=P[1]>>>3&3,te=(6&P[1])>>1,ee=(240&P[2])>>>4,ae=(12&P[2])>>>2,he=(P[3]>>>6&3)!==3?2:1,fe=0,se=0;switch(F){case 0:fe=this._mpegAudioV25SampleRateTable[ae];break;case 2:fe=this._mpegAudioV20SampleRateTable[ae];break;case 3:fe=this._mpegAudioV10SampleRateTable[ae]}switch(te){case 1:ee<this._mpegAudioL3BitRateTable.length&&(se=this._mpegAudioL3BitRateTable[ee]);break;case 2:ee<this._mpegAudioL2BitRateTable.length&&(se=this._mpegAudioL2BitRateTable[ee]);break;case 3:ee<this._mpegAudioL1BitRateTable.length&&(se=this._mpegAudioL1BitRateTable[ee])}O={bitRate:se,samplingRate:fe,channelCount:he,codec:"mp3",originalCodec:"mp3"}}else O=P;return O}d.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},x.prototype._parseOpusAudioPacket=function(w,y,m,g,P){if(P===0)this._parseOpusSequenceHeader(w,y,m);else if(P===1)this._parseOpusAudioData(w,y,m,g);else if(P!==2)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(P))},x.prototype._parseOpusSequenceHeader=function(w,y,m){if(m<=16)d.a.w(this.TAG,"Flv: Invalid OpusSequenceHeader, lack of data!");else{var g=this._audioMetadata,P=this._audioTrack;g||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(g=this._audioMetadata={}).type="audio",g.id=P.id,g.timescale=this._timescale,g.duration=this._duration);var O=new DataView(w,y,m);O.setUint8(8,0);var F=O.getUint8(9);O.setUint16(10,O.getUint16(10,!0),!1);var te=O.getUint32(12,!0);O.setUint32(12,O.getUint32(12,!0),!1);var ee={config:new Uint8Array(w,y+8,m-8),channelCount:F,samplingFrequence:te,codec:"opus",originalCodec:"opus"};if(g.config){if(xe(ee.config,g.config))return;d.a.w(this.TAG,"OpusSequenceHeader has been changed, re-generate initialization segment")}g.audioSampleRate=ee.samplingFrequence,g.channelCount=ee.channelCount,g.codec=ee.codec,g.originalCodec=ee.originalCodec,g.config=ee.config,g.refSampleDuration=20,d.a.v(this.TAG,"Parsed OpusSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",g);var ae=this._mediaInfo;ae.audioCodec=g.originalCodec,ae.audioSampleRate=g.audioSampleRate,ae.audioChannelCount=g.channelCount,ae.hasVideo?ae.videoCodec!=null&&(ae.mimeType='video/x-flv; codecs="'+ae.videoCodec+","+ae.audioCodec+'"'):ae.mimeType='video/x-flv; codecs="'+ae.audioCodec+'"',ae.isComplete()&&this._onMediaInfo(ae)}},x.prototype._parseOpusAudioData=function(w,y,m,g){var P=this._audioTrack,O=new Uint8Array(w,y,m),F=this._timestampBase+g,te={unit:O,length:O.byteLength,dts:F,pts:F};P.samples.push(te),P.length+=O.length},x.prototype._parseFlacAudioPacket=function(w,y,m,g,P){if(P===0)this._parseFlacSequenceHeader(w,y,m);else if(P===1)this._parseFlacAudioData(w,y,m,g);else if(P!==2)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid Flac audio packet type ".concat(P))},x.prototype._parseFlacSequenceHeader=function(w,y,m){var g=this._audioMetadata,P=this._audioTrack;g||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(g=this._audioMetadata={}).type="audio",g.id=P.id,g.timescale=this._timescale,g.duration=this._duration);var O=new Uint8Array(w,y+4,m-4),F=new Te(O),te=F.readBits(16),ee=F.readBits(16),ae=ee===te?ee:null;F.readBits(24),F.readBits(24);var he=F.readBits(20),fe=F.readBits(3)+1,se=F.readBits(5)+1;F.destroy();var be=new Uint8Array(O.byteLength+4);be.set(O,4),be[0]=128,be[1]=O.byteLength>>>16&255,be[2]=O.byteLength>>>8&255,be[3]=O.byteLength>>>0&255;var ze={config:be,channelCount:fe,samplingFrequence:he,sampleSize:se,codec:"flac",originalCodec:"flac"};if(g.config){if(xe(ze.config,g.config))return;d.a.w(this.TAG,"FlacSequenceHeader has been changed, re-generate initialization segment")}g.audioSampleRate=ze.samplingFrequence,g.channelCount=ze.channelCount,g.sampleSize=ze.sampleSize,g.codec=ze.codec,g.originalCodec=ze.originalCodec,g.config=ze.config,g.refSampleDuration=ae!=null?1e3*ae/ze.samplingFrequence:null,d.a.v(this.TAG,"Parsed FlacSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",g);var Ue=this._mediaInfo;Ue.audioCodec=g.originalCodec,Ue.audioSampleRate=g.audioSampleRate,Ue.audioChannelCount=g.channelCount,Ue.hasVideo?Ue.videoCodec!=null&&(Ue.mimeType='video/x-flv; codecs="'+Ue.videoCodec+","+Ue.audioCodec+'"'):Ue.mimeType='video/x-flv; codecs="'+Ue.audioCodec+'"',Ue.isComplete()&&this._onMediaInfo(Ue)},x.prototype._parseFlacAudioData=function(w,y,m,g){var P=this._audioTrack,O=new Uint8Array(w,y,m),F=this._timestampBase+g,te={unit:O,length:O.byteLength,dts:F,pts:F};P.samples.push(te),P.length+=O.length},x.prototype._parseVideoData=function(w,y,m,g,P){if(m<=1)d.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(this._hasVideoFlagOverrided!==!0||this._hasVideo!==!1){var O=new Uint8Array(w,y,m)[0],F=(112&O)>>>4;if((128&O)!=0){var te=15&O,ee=String.fromCharCode.apply(String,new Uint8Array(w,y,m).slice(1,5));if(ee==="hvc1")this._parseEnhancedHEVCVideoPacket(w,y+5,m-5,g,P,F,te);else{if(ee!=="av01")return void this._onError(Se.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(ee));this._parseEnhancedAV1VideoPacket(w,y+5,m-5,g,P,F,te)}}else{var ae=15&O;if(ae===7)this._parseAVCVideoPacket(w,y+1,m-1,g,P,F);else{if(ae!==12)return void this._onError(Se.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(ae));this._parseHEVCVideoPacket(w,y+1,m-1,g,P,F)}}}},x.prototype._parseAVCVideoPacket=function(w,y,m,g,P,O){if(m<4)d.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var F=this._littleEndian,te=new DataView(w,y,m),ee=te.getUint8(0),ae=(16777215&te.getUint32(0,!F))<<8>>8;if(ee===0)this._parseAVCDecoderConfigurationRecord(w,y+4,m-4);else if(ee===1)this._parseAVCVideoData(w,y+4,m-4,g,P,O,ae);else if(ee!==2)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(ee))}},x.prototype._parseHEVCVideoPacket=function(w,y,m,g,P,O){if(m<4)d.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var F=this._littleEndian,te=new DataView(w,y,m),ee=te.getUint8(0),ae=(16777215&te.getUint32(0,!F))<<8>>8;if(ee===0)this._parseHEVCDecoderConfigurationRecord(w,y+4,m-4);else if(ee===1)this._parseHEVCVideoData(w,y+4,m-4,g,P,O,ae);else if(ee!==2)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(ee))}},x.prototype._parseEnhancedHEVCVideoPacket=function(w,y,m,g,P,O,F){var te=this._littleEndian,ee=new DataView(w,y,m);if(F===0)this._parseHEVCDecoderConfigurationRecord(w,y,m);else if(F===1){var ae=(4294967040&ee.getUint32(0,!te))>>8;this._parseHEVCVideoData(w,y+3,m-3,g,P,O,ae)}else if(F===3)this._parseHEVCVideoData(w,y,m,g,P,O,0);else if(F!==2)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(F))},x.prototype._parseEnhancedAV1VideoPacket=function(w,y,m,g,P,O,F){if(this._littleEndian,F===0)this._parseAV1CodecConfigurationRecord(w,y,m);else if(F===1)this._parseAV1VideoData(w,y,m,g,P,O,0);else{if(F===5)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Not Supported MP2T AV1 video packet type ".concat(F));if(F!==2)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(F))}},x.prototype._parseAVCDecoderConfigurationRecord=function(w,y,m){if(m<7)d.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var g=this._videoMetadata,P=this._videoTrack,O=this._littleEndian,F=new DataView(w,y,m);if(g){if(g.avcc!==void 0){var te=new Uint8Array(w,y,m);if(xe(te,g.avcc))return;d.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(g=this._videoMetadata={}).type="video",g.id=P.id,g.timescale=this._timescale,g.duration=this._duration;var ee=F.getUint8(0),ae=F.getUint8(1);if(F.getUint8(2),F.getUint8(3),ee===1&&ae!==0)if(this._naluLengthSize=1+(3&F.getUint8(4)),this._naluLengthSize===3||this._naluLengthSize===4){var he=31&F.getUint8(5);if(he!==0){he>1&&d.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(he));for(var fe=6,se=0;se<he;se++){var be=F.getUint16(fe,!O);if(fe+=2,be!==0){var ze=new Uint8Array(w,y+fe,be);fe+=be;var Ue=ye.parseSPS(ze);if(se===0){g.codecWidth=Ue.codec_size.width,g.codecHeight=Ue.codec_size.height,g.presentWidth=Ue.present_size.width,g.presentHeight=Ue.present_size.height,g.profile=Ue.profile_string,g.level=Ue.level_string,g.bitDepth=Ue.bit_depth,g.chromaFormat=Ue.chroma_format,g.sarRatio=Ue.sar_ratio,g.frameRate=Ue.frame_rate,Ue.frame_rate.fixed!==!1&&Ue.frame_rate.fps_num!==0&&Ue.frame_rate.fps_den!==0||(g.frameRate=this._referenceFrameRate);var nt=g.frameRate.fps_den,Je=g.frameRate.fps_num;g.refSampleDuration=g.timescale*(nt/Je);for(var Xe=ze.subarray(1,4),wt="avc1.",Kt=0;Kt<3;Kt++){var Ze=Xe[Kt].toString(16);Ze.length<2&&(Ze="0"+Ze),wt+=Ze}g.codec=wt;var xt=this._mediaInfo;xt.width=g.codecWidth,xt.height=g.codecHeight,xt.fps=g.frameRate.fps,xt.profile=g.profile,xt.level=g.level,xt.refFrames=Ue.ref_frames,xt.chromaFormat=Ue.chroma_format_string,xt.sarNum=g.sarRatio.width,xt.sarDen=g.sarRatio.height,xt.videoCodec=wt,xt.hasAudio?xt.audioCodec!=null&&(xt.mimeType='video/x-flv; codecs="'+xt.videoCodec+","+xt.audioCodec+'"'):xt.mimeType='video/x-flv; codecs="'+xt.videoCodec+'"',xt.isComplete()&&this._onMediaInfo(xt)}}}var At=F.getUint8(fe);if(At!==0){for(At>1&&d.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(At)),fe++,se=0;se<At;se++)be=F.getUint16(fe,!O),fe+=2,be!==0&&(fe+=be);g.avcc=new Uint8Array(m),g.avcc.set(new Uint8Array(w,y,m),0),d.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",g)}else this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(Se.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},x.prototype._parseHEVCDecoderConfigurationRecord=function(w,y,m){if(m<22)d.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var g=this._videoMetadata,P=this._videoTrack,O=this._littleEndian,F=new DataView(w,y,m);if(g){if(g.hvcc!==void 0){var te=new Uint8Array(w,y,m);if(xe(te,g.hvcc))return;d.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(g=this._videoMetadata={}).type="video",g.id=P.id,g.timescale=this._timescale,g.duration=this._duration;var ee=F.getUint8(0),ae=31&F.getUint8(1);if(ee!==0&&ee!==1||ae===0)this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord");else if(this._naluLengthSize=1+(3&F.getUint8(21)),this._naluLengthSize===3||this._naluLengthSize===4){for(var he=F.getUint8(22),fe=0,se=23;fe<he;fe++){var be=63&F.getUint8(se+0),ze=F.getUint16(se+1,!O);se+=3;for(var Ue=0;Ue<ze;Ue++){var nt=F.getUint16(se+0,!O);if(Ue===0)if(be===33){se+=2;var Je=new Uint8Array(w,y+se,nt),Xe=Le.parseSPS(Je);g.codecWidth=Xe.codec_size.width,g.codecHeight=Xe.codec_size.height,g.presentWidth=Xe.present_size.width,g.presentHeight=Xe.present_size.height,g.profile=Xe.profile_string,g.level=Xe.level_string,g.bitDepth=Xe.bit_depth,g.chromaFormat=Xe.chroma_format,g.sarRatio=Xe.sar_ratio,g.frameRate=Xe.frame_rate,Xe.frame_rate.fixed!==!1&&Xe.frame_rate.fps_num!==0&&Xe.frame_rate.fps_den!==0||(g.frameRate=this._referenceFrameRate);var wt=g.frameRate.fps_den,Kt=g.frameRate.fps_num;g.refSampleDuration=g.timescale*(wt/Kt),g.codec=Xe.codec_mimetype;var Ze=this._mediaInfo;Ze.width=g.codecWidth,Ze.height=g.codecHeight,Ze.fps=g.frameRate.fps,Ze.profile=g.profile,Ze.level=g.level,Ze.refFrames=Xe.ref_frames,Ze.chromaFormat=Xe.chroma_format_string,Ze.sarNum=g.sarRatio.width,Ze.sarDen=g.sarRatio.height,Ze.videoCodec=Xe.codec_mimetype,Ze.hasAudio?Ze.audioCodec!=null&&(Ze.mimeType='video/x-flv; codecs="'+Ze.videoCodec+","+Ze.audioCodec+'"'):Ze.mimeType='video/x-flv; codecs="'+Ze.videoCodec+'"',Ze.isComplete()&&this._onMediaInfo(Ze),se+=nt}else se+=2+nt;else se+=2+nt}}g.hvcc=new Uint8Array(m),g.hvcc.set(new Uint8Array(w,y,m),0),d.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",g)}else this._onError(Se.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1))}},x.prototype._parseAV1CodecConfigurationRecord=function(w,y,m){if(m<4)d.a.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");else{var g=this._videoMetadata,P=this._videoTrack,O=(this._littleEndian,new DataView(w,y,m));g?g.av1c!==void 0&&d.a.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(g=this._videoMetadata={}).type="video",g.id=P.id,g.timescale=this._timescale,g.duration=this._duration);var F=127&O.getUint8(0);if(O.getUint8(1),O.getUint8(1),O.getUint8(2),F===1){var te=Y.parseOBUs(new Uint8Array(w,y+4,m-4));if(te!=null){g.profile=te.profile_string,g.level=te.level_string,g.bitDepth=te.bit_depth,g.chromaFormat=te.chroma_format,g.frameRate=te.frame_rate,te.frame_rate.fixed!==!1&&te.frame_rate.fps_num!==0&&te.frame_rate.fps_den!==0||(g.frameRate=this._referenceFrameRate);var ee=g.frameRate.fps_den,ae=g.frameRate.fps_num;g.refSampleDuration=g.timescale*(ee/ae),g.codec=te.codec_mimetype,g.extra=te;var he=this._mediaInfo;he.fps=g.frameRate.fps,he.profile=g.profile,he.level=g.level,he.refFrames=te.ref_frames,he.chromaFormat=te.chroma_format_string,he.videoCodec=te.codec_mimetype,he.hasAudio?he.audioCodec!=null&&(he.mimeType='video/x-flv; codecs="'+he.videoCodec+","+he.audioCodec+'"'):he.mimeType='video/x-flv; codecs="'+he.videoCodec+'"',he.isComplete()&&this._onMediaInfo(he),g.av1c=new Uint8Array(m),g.av1c.set(new Uint8Array(w,y,m),0),d.a.v(this.TAG,"Preparing AV1CodecConfigurationRecord")}else this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}else this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}},x.prototype._parseAVCVideoData=function(w,y,m,g,P,O,F){for(var te=this._littleEndian,ee=new DataView(w,y,m),ae=[],he=0,fe=0,se=this._naluLengthSize,be=this._timestampBase+g,ze=O===1;fe<m;){if(fe+4>=m){d.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(be,", offset = ").concat(fe,", dataSize = ").concat(m));break}var Ue=ee.getUint32(fe,!te);if(se===3&&(Ue>>>=8),Ue>m-se)return void d.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(be,", NaluSize > DataSize!"));var nt=31&ee.getUint8(fe+se);nt===5&&(ze=!0);var Je=new Uint8Array(w,y+fe,se+Ue),Xe={type:nt,data:Je};ae.push(Xe),he+=Je.byteLength,fe+=se+Ue}if(ae.length){var wt=this._videoTrack,Kt={units:ae,length:he,isKeyframe:ze,dts:be,cts:F,pts:be+F};ze&&(Kt.fileposition=P),wt.samples.push(Kt),wt.length+=he}},x.prototype._parseHEVCVideoData=function(w,y,m,g,P,O,F){for(var te=this._littleEndian,ee=new DataView(w,y,m),ae=[],he=0,fe=0,se=this._naluLengthSize,be=this._timestampBase+g,ze=O===1;fe<m;){if(fe+4>=m){d.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(be,", offset = ").concat(fe,", dataSize = ").concat(m));break}var Ue=ee.getUint32(fe,!te);if(se===3&&(Ue>>>=8),Ue>m-se)return void d.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(be,", NaluSize > DataSize!"));var nt=ee.getUint8(fe+se)>>1&63;nt!==19&&nt!==20&&nt!==21||(ze=!0);var Je=new Uint8Array(w,y+fe,se+Ue),Xe={type:nt,data:Je};ae.push(Xe),he+=Je.byteLength,fe+=se+Ue}if(ae.length){var wt=this._videoTrack,Kt={units:ae,length:he,isKeyframe:ze,dts:be,cts:F,pts:be+F};ze&&(Kt.fileposition=P),wt.samples.push(Kt),wt.length+=he}},x.prototype._parseAV1VideoData=function(w,y,m,g,P,O,F){this._littleEndian;var te,ee=[],ae=this._timestampBase+g,he=O===1;if(he){var fe=this._videoMetadata,se=Y.parseOBUs(new Uint8Array(w,y,m),fe.extra);if(se==null)return void this._onError(Se.a.FORMAT_ERROR,"Flv: Invalid AV1 VideoData");console.log(se),fe.codecWidth=se.codec_size.width,fe.codecHeight=se.codec_size.height,fe.presentWidth=se.present_size.width,fe.presentHeight=se.present_size.height,fe.sarRatio=se.sar_ratio;var be=this._mediaInfo;be.width=fe.codecWidth,be.height=fe.codecHeight,be.sarNum=fe.sarRatio.width,be.sarDen=fe.sarRatio.height,d.a.v(this.TAG,"Parsed AV1DecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",fe)}if(te=m,ee.push({unitType:0,data:new Uint8Array(w,y+0,m)}),ee.length){var ze=this._videoTrack,Ue={units:ee,length:te,isKeyframe:he,dts:ae,cts:F,pts:ae+F};he&&(Ue.fileposition=P),ze.samples.push(Ue),ze.length+=te}},x}(),ve=function(){function x(){}return x.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSynchronousKLVMetadata=null,this.onAsynchronousKLVMetadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},x}(),Ye=function(){this.program_pmt_pid={}};(function(x){x[x.kMPEG1Audio=3]="kMPEG1Audio",x[x.kMPEG2Audio=4]="kMPEG2Audio",x[x.kPESPrivateData=6]="kPESPrivateData",x[x.kADTSAAC=15]="kADTSAAC",x[x.kLOASAAC=17]="kLOASAAC",x[x.kAC3=129]="kAC3",x[x.kEAC3=135]="kEAC3",x[x.kMetadata=21]="kMetadata",x[x.kSCTE35=134]="kSCTE35",x[x.kH264=27]="kH264",x[x.kH265=36]="kH265"})(T||(T={}));var Me,Ce=function(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,av1:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,eac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.synchronous_klv_pids={},this.asynchronous_klv_pids={},this.scte_35_pids={},this.smpte2038_pids={}},tt=function(){},ct=function(){},it=function(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0};(function(x){x[x.kUnspecified=0]="kUnspecified",x[x.kSliceNonIDR=1]="kSliceNonIDR",x[x.kSliceDPA=2]="kSliceDPA",x[x.kSliceDPB=3]="kSliceDPB",x[x.kSliceDPC=4]="kSliceDPC",x[x.kSliceIDR=5]="kSliceIDR",x[x.kSliceSEI=6]="kSliceSEI",x[x.kSliceSPS=7]="kSliceSPS",x[x.kSlicePPS=8]="kSlicePPS",x[x.kSliceAUD=9]="kSliceAUD",x[x.kEndOfSequence=10]="kEndOfSequence",x[x.kEndOfStream=11]="kEndOfStream",x[x.kFiller=12]="kFiller",x[x.kSPSExt=13]="kSPSExt",x[x.kReserved0=14]="kReserved0"})(Me||(Me={}));var de,Z,we=function(){},Fe=function(x){var w=x.data.byteLength;this.type=x.type,this.data=new Uint8Array(4+w),new DataView(this.data.buffer).setUint32(0,w),this.data.set(x.data,4)},Et=function(){function x(w){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=w,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&d.a.e(this.TAG,"Could not find H264 startcode until payload end!")}return x.prototype.findNextStartCodeOffset=function(w){for(var y=w,m=this.data_;;){if(y+3>=m.byteLength)return this.eof_flag_=!0,m.byteLength;var g=m[y+0]<<24|m[y+1]<<16|m[y+2]<<8|m[y+3],P=m[y+0]<<16|m[y+1]<<8|m[y+2];if(g===1||P===1)return y;y++}},x.prototype.readNextNaluPayload=function(){for(var w=this.data_,y=null;y==null&&!this.eof_flag_;){var m=this.current_startcode_offset_,g=31&w[m+=(w[m]<<24|w[m+1]<<16|w[m+2]<<8|w[m+3])===1?4:3],P=(128&w[m])>>>7,O=this.findNextStartCodeOffset(m);if(this.current_startcode_offset_=O,!(g>=Me.kReserved0)&&P===0){var F=w.subarray(m,O);(y=new we).type=g,y.data=F}}return y},x}(),X=function(){function x(w,y,m){var g=8+w.byteLength+1+2+y.byteLength,P=!1;w[3]!==66&&w[3]!==77&&w[3]!==88&&(P=!0,g+=4);var O=this.data=new Uint8Array(g);O[0]=1,O[1]=w[1],O[2]=w[2],O[3]=w[3],O[4]=255,O[5]=225;var F=w.byteLength;O[6]=F>>>8,O[7]=255&F;var te=8;O.set(w,8),O[te+=F]=1;var ee=y.byteLength;O[te+1]=ee>>>8,O[te+2]=255&ee,O.set(y,te+3),te+=3+ee,P&&(O[te]=252|m.chroma_format_idc,O[te+1]=248|m.bit_depth_luma-8,O[te+2]=248|m.bit_depth_chroma-8,O[te+3]=0,te+=4)}return x.prototype.getData=function(){return this.data},x}();(function(x){x[x.kNull=0]="kNull",x[x.kAACMain=1]="kAACMain",x[x.kAAC_LC=2]="kAAC_LC",x[x.kAAC_SSR=3]="kAAC_SSR",x[x.kAAC_LTP=4]="kAAC_LTP",x[x.kAAC_SBR=5]="kAAC_SBR",x[x.kAAC_Scalable=6]="kAAC_Scalable",x[x.kLayer1=32]="kLayer1",x[x.kLayer2=33]="kLayer2",x[x.kLayer3=34]="kLayer3"})(de||(de={})),function(x){x[x.k96000Hz=0]="k96000Hz",x[x.k88200Hz=1]="k88200Hz",x[x.k64000Hz=2]="k64000Hz",x[x.k48000Hz=3]="k48000Hz",x[x.k44100Hz=4]="k44100Hz",x[x.k32000Hz=5]="k32000Hz",x[x.k24000Hz=6]="k24000Hz",x[x.k22050Hz=7]="k22050Hz",x[x.k16000Hz=8]="k16000Hz",x[x.k12000Hz=9]="k12000Hz",x[x.k11025Hz=10]="k11025Hz",x[x.k8000Hz=11]="k8000Hz",x[x.k7350Hz=12]="k7350Hz"}(Z||(Z={}));var zt,Ct,ce=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ke=(zt=function(x,w){return(zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(y[g]=m[g])})(x,w)},function(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function y(){this.constructor=x}zt(x,w),x.prototype=w===null?Object.create(w):(y.prototype=w.prototype,new y)}),Pe=function(){},Ke=function(x){function w(){return x!==null&&x.apply(this,arguments)||this}return ke(w,x),w}(Pe),at=function(){function x(w){this.TAG="AACADTSParser",this.data_=w,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&d.a.e(this.TAG,"Could not found ADTS syncword until payload end")}return x.prototype.findNextSyncwordOffset=function(w){for(var y=w,m=this.data_;;){if(y+7>=m.byteLength)return this.eof_flag_=!0,m.byteLength;if((m[y+0]<<8|m[y+1])>>>4===4095)return y;y++}},x.prototype.readNextAACFrame=function(){for(var w=this.data_,y=null;y==null&&!this.eof_flag_;){var m=this.current_syncword_offset_,g=(8&w[m+1])>>>3,P=(6&w[m+1])>>>1,O=1&w[m+1],F=(192&w[m+2])>>>6,te=(60&w[m+2])>>>2,ee=(1&w[m+2])<<2|(192&w[m+3])>>>6,ae=(3&w[m+3])<<11|w[m+4]<<3|(224&w[m+5])>>>5;if(w[m+6],m+ae>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var he=O===1?7:9,fe=ae-he;m+=he;var se=this.findNextSyncwordOffset(m+fe);if(this.current_syncword_offset_=se,(g===0||g===1)&&P===0){var be=w.subarray(m,m+fe);(y=new Pe).audio_object_type=F+1,y.sampling_freq_index=te,y.sampling_frequency=ce[te],y.channel_config=ee,y.data=be}}return y},x.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},x.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},x}(),G=function(){function x(w){this.TAG="AACLOASParser",this.data_=w,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&d.a.e(this.TAG,"Could not found LOAS syncword until payload end")}return x.prototype.findNextSyncwordOffset=function(w){for(var y=w,m=this.data_;;){if(y+1>=m.byteLength)return this.eof_flag_=!0,m.byteLength;if((m[y+0]<<3|m[y+1]>>>5)===695)return y;y++}},x.prototype.getLATMValue=function(w){for(var y=w.readBits(2),m=0,g=0;g<=y;g++)m<<=8,m|=w.readByte();return m},x.prototype.readNextAACFrame=function(w){for(var y=this.data_,m=null;m==null&&!this.eof_flag_;){var g=this.current_syncword_offset_,P=(31&y[g+1])<<8|y[g+2];if(g+3+P>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var O=new Te(y.subarray(g+3,g+3+P)),F=null;if(O.readBool()){if(w==null){d.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(g+3+P),O.destroy();continue}F=w}else{var te=O.readBool();if(te&&O.readBool()){d.a.e(this.TAG,"audioMuxVersionA is Not Supported"),O.destroy();break}if(te&&this.getLATMValue(O),!O.readBool()){d.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),O.destroy();break}if(O.readBits(6)!==0){d.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),O.destroy();break}if(O.readBits(4)!==0){d.a.e(this.TAG,"more than 2 numProgram Not Supported"),O.destroy();break}if(O.readBits(3)!==0){d.a.e(this.TAG,"more than 2 numLayer Not Supported"),O.destroy();break}var ee=te?this.getLATMValue(O):0,ae=O.readBits(5);ee-=5;var he=O.readBits(4);ee-=4;var fe=O.readBits(4);ee-=4,O.readBits(3),(ee-=3)>0&&O.readBits(ee);var se=O.readBits(3);if(se!==0){d.a.e(this.TAG,"frameLengthType = ".concat(se,". Only frameLengthType = 0 Supported")),O.destroy();break}O.readByte();var be=O.readBool();if(be)if(te)this.getLATMValue(O);else{for(var ze=0;;){ze<<=8;var Ue=O.readBool();if(ze+=O.readByte(),!Ue)break}console.log(ze)}O.readBool()&&O.readByte(),(F=new Ke).audio_object_type=ae,F.sampling_freq_index=he,F.sampling_frequency=ce[F.sampling_freq_index],F.channel_config=fe,F.other_data_present=be}for(var nt=0;;){var Je=O.readByte();if(nt+=Je,Je!==255)break}for(var Xe=new Uint8Array(nt),wt=0;wt<nt;wt++)Xe[wt]=O.readByte();(m=new Ke).audio_object_type=F.audio_object_type,m.sampling_freq_index=F.sampling_freq_index,m.sampling_frequency=ce[F.sampling_freq_index],m.channel_config=F.channel_config,m.other_data_present=F.other_data_present,m.data=Xe,this.current_syncword_offset_=this.findNextSyncwordOffset(g+3+P)}return m},x.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},x.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},x}(),ue=function(x){var w=null,y=x.audio_object_type,m=x.audio_object_type,g=x.sampling_freq_index,P=x.channel_config,O=0,F=navigator.userAgent.toLowerCase();F.indexOf("firefox")!==-1?g>=6?(m=5,w=new Array(4),O=g-3):(m=2,w=new Array(2),O=g):F.indexOf("android")!==-1?(m=2,w=new Array(2),O=g):(m=5,O=g,w=new Array(4),g>=6?O=g-3:P===1&&(m=2,w=new Array(2),O=g)),w[0]=m<<3,w[0]|=(15&g)>>>1,w[1]=(15&g)<<7,w[1]|=(15&P)<<3,m===5&&(w[1]|=(15&O)>>>1,w[2]=(1&O)<<7,w[2]|=8,w[3]=0),this.config=w,this.sampling_rate=ce[g],this.channel_count=P,this.codec_mimetype="mp4a.40."+m,this.original_codec_mimetype="mp4a.40."+y},Ae=function(){},je=function(){};(function(x){x[x.kSpliceNull=0]="kSpliceNull",x[x.kSpliceSchedule=4]="kSpliceSchedule",x[x.kSpliceInsert=5]="kSpliceInsert",x[x.kTimeSignal=6]="kTimeSignal",x[x.kBandwidthReservation=7]="kBandwidthReservation",x[x.kPrivateCommand=255]="kPrivateCommand"})(Ct||(Ct={}));var Oe,Ve=function(x){var w=x.readBool();return w?(x.readBits(6),{time_specified_flag:w,pts_time:4*x.readBits(31)+x.readBits(2)}):(x.readBits(7),{time_specified_flag:w})},st=function(x){var w=x.readBool();return x.readBits(6),{auto_return:w,duration:4*x.readBits(31)+x.readBits(2)}},$e=function(x,w){var y=w.readBits(8);return x?{component_tag:y}:{component_tag:y,splice_time:Ve(w)}},Ne=function(x){return{component_tag:x.readBits(8),utc_splice_time:x.readBits(32)}},We=function(x){var w=x.readBits(32),y=x.readBool();x.readBits(7);var m={splice_event_id:w,splice_event_cancel_indicator:y};if(y)return m;if(m.out_of_network_indicator=x.readBool(),m.program_splice_flag=x.readBool(),m.duration_flag=x.readBool(),x.readBits(5),m.program_splice_flag)m.utc_splice_time=x.readBits(32);else{m.component_count=x.readBits(8),m.components=[];for(var g=0;g<m.component_count;g++)m.components.push(Ne(x))}return m.duration_flag&&(m.break_duration=st(x)),m.unique_program_id=x.readBits(16),m.avail_num=x.readBits(8),m.avails_expected=x.readBits(8),m},Ut=function(x,w,y,m){return{descriptor_tag:x,descriptor_length:w,identifier:y,provider_avail_id:m.readBits(32)}},dt=function(x,w,y,m){var g=m.readBits(8),P=m.readBits(3);m.readBits(5);for(var O="",F=0;F<P;F++)O+=String.fromCharCode(m.readBits(8));return{descriptor_tag:x,descriptor_length:w,identifier:y,preroll:g,dtmf_count:P,DTMF_char:O}},Pt=function(x){var w=x.readBits(8);return x.readBits(7),{component_tag:w,pts_offset:4*x.readBits(31)+x.readBits(2)}},Gt=function(x,w,y,m){var g=m.readBits(32),P=m.readBool();m.readBits(7);var O={descriptor_tag:x,descriptor_length:w,identifier:y,segmentation_event_id:g,segmentation_event_cancel_indicator:P};if(P)return O;if(O.program_segmentation_flag=m.readBool(),O.segmentation_duration_flag=m.readBool(),O.delivery_not_restricted_flag=m.readBool(),O.delivery_not_restricted_flag?m.readBits(5):(O.web_delivery_allowed_flag=m.readBool(),O.no_regional_blackout_flag=m.readBool(),O.archive_allowed_flag=m.readBool(),O.device_restrictions=m.readBits(2)),!O.program_segmentation_flag){O.component_count=m.readBits(8),O.components=[];for(var F=0;F<O.component_count;F++)O.components.push(Pt(m))}O.segmentation_duration_flag&&(O.segmentation_duration=m.readBits(40)),O.segmentation_upid_type=m.readBits(8),O.segmentation_upid_length=m.readBits(8);var te=new Uint8Array(O.segmentation_upid_length);for(F=0;F<O.segmentation_upid_length;F++)te[F]=m.readBits(8);return O.segmentation_upid=te.buffer,O.segmentation_type_id=m.readBits(8),O.segment_num=m.readBits(8),O.segments_expected=m.readBits(8),O.segmentation_type_id!==52&&O.segmentation_type_id!==54&&O.segmentation_type_id!==56&&O.segmentation_type_id!==58||(O.sub_segment_num=m.readBits(8),O.sub_segments_expected=m.readBits(8)),O},Qt=function(x,w,y,m){return{descriptor_tag:x,descriptor_length:w,identifier:y,TAI_seconds:m.readBits(48),TAI_ns:m.readBits(32),UTC_offset:m.readBits(16)}},_t=function(x){return{component_tag:x.readBits(8),ISO_code:String.fromCharCode(x.readBits(8),x.readBits(8),x.readBits(8)),Bit_Stream_Mode:x.readBits(3),Num_Channels:x.readBits(4),Full_Srvc_Audio:x.readBool()}},yn=function(x,w,y,m){for(var g=m.readBits(4),P=[],O=0;O<g;O++)P.push(_t(m));return{descriptor_tag:x,descriptor_length:w,identifier:y,audio_count:g,components:P}},_i=function(x){var w=new Te(x),y=w.readBits(8),m=w.readBool(),g=w.readBool();w.readBits(2);var P=w.readBits(12),O=w.readBits(8),F=w.readBool(),te=w.readBits(6),ee=4*w.readBits(31)+w.readBits(2),ae=w.readBits(8),he=w.readBits(12),fe=w.readBits(12),se=w.readBits(8),be=null;se===Ct.kSpliceNull?be={}:se===Ct.kSpliceSchedule?be=function(It){for(var nn=It.readBits(8),Sn=[],Bt=0;Bt<nn;Bt++)Sn.push(We(It));return{splice_count:nn,events:Sn}}(w):se===Ct.kSpliceInsert?be=function(It){var nn=It.readBits(32),Sn=It.readBool();It.readBits(7);var Bt={splice_event_id:nn,splice_event_cancel_indicator:Sn};if(Sn)return Bt;if(Bt.out_of_network_indicator=It.readBool(),Bt.program_splice_flag=It.readBool(),Bt.duration_flag=It.readBool(),Bt.splice_immediate_flag=It.readBool(),It.readBits(4),Bt.program_splice_flag&&!Bt.splice_immediate_flag&&(Bt.splice_time=Ve(It)),!Bt.program_splice_flag){Bt.component_count=It.readBits(8),Bt.components=[];for(var qt=0;qt<Bt.component_count;qt++)Bt.components.push($e(Bt.splice_immediate_flag,It))}return Bt.duration_flag&&(Bt.break_duration=st(It)),Bt.unique_program_id=It.readBits(16),Bt.avail_num=It.readBits(8),Bt.avails_expected=It.readBits(8),Bt}(w):se===Ct.kTimeSignal?be=function(It){return{splice_time:Ve(It)}}(w):se===Ct.kBandwidthReservation?be={}:se===Ct.kPrivateCommand?be=function(It,nn){for(var Sn=String.fromCharCode(nn.readBits(8),nn.readBits(8),nn.readBits(8),nn.readBits(8)),Bt=new Uint8Array(It-4),qt=0;qt<It-4;qt++)Bt[qt]=nn.readBits(8);return{identifier:Sn,private_data:Bt.buffer}}(fe,w):w.readBits(8*fe);for(var ze=[],Ue=w.readBits(16),nt=0;nt<Ue;){var Je=w.readBits(8),Xe=w.readBits(8),wt=String.fromCharCode(w.readBits(8),w.readBits(8),w.readBits(8),w.readBits(8));Je===0?ze.push(Ut(Je,Xe,wt,w)):Je===1?ze.push(dt(Je,Xe,wt,w)):Je===2?ze.push(Gt(Je,Xe,wt,w)):Je===3?ze.push(Qt(Je,Xe,wt,w)):Je===4?ze.push(yn(Je,Xe,wt,w)):w.readBits(8*(Xe-4)),nt+=2+Xe}var Kt={table_id:y,section_syntax_indicator:m,private_indicator:g,section_length:P,protocol_version:O,encrypted_packet:F,encryption_algorithm:te,pts_adjustment:ee,cw_index:ae,tier:he,splice_command_length:fe,splice_command_type:se,splice_command:be,descriptor_loop_length:Ue,splice_descriptors:ze,E_CRC32:F?w.readBits(32):void 0,CRC32:w.readBits(32)};if(se===Ct.kSpliceInsert){var Ze=be;if(Ze.splice_event_cancel_indicator)return{splice_command_type:se,detail:Kt,data:x};if(Ze.program_splice_flag&&!Ze.splice_immediate_flag){var xt=Ze.duration_flag?Ze.break_duration.auto_return:void 0,At=Ze.duration_flag?Ze.break_duration.duration/90:void 0;return Ze.splice_time.time_specified_flag?{splice_command_type:se,pts:(ee+Ze.splice_time.pts_time)%Math.pow(2,33),auto_return:xt,duraiton:At,detail:Kt,data:x}:{splice_command_type:se,auto_return:xt,duraiton:At,detail:Kt,data:x}}return{splice_command_type:se,auto_return:xt=Ze.duration_flag?Ze.break_duration.auto_return:void 0,duraiton:At=Ze.duration_flag?Ze.break_duration.duration/90:void 0,detail:Kt,data:x}}if(se===Ct.kTimeSignal){var Rt=be;return Rt.splice_time.time_specified_flag?{splice_command_type:se,pts:(ee+Rt.splice_time.pts_time)%Math.pow(2,33),detail:Kt,data:x}:{splice_command_type:se,detail:Kt,data:x}}return{splice_command_type:se,detail:Kt,data:x}};(function(x){x[x.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",x[x.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",x[x.kSliceCRA_NUT=21]="kSliceCRA_NUT",x[x.kSliceVPS=32]="kSliceVPS",x[x.kSliceSPS=33]="kSliceSPS",x[x.kSlicePPS=34]="kSlicePPS",x[x.kSliceAUD=35]="kSliceAUD"})(Oe||(Oe={}));var fi=function(){},Hi=function(x){var w=x.data.byteLength;this.type=x.type,this.data=new Uint8Array(4+w),new DataView(this.data.buffer).setUint32(0,w),this.data.set(x.data,4)},ki=function(){function x(w){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=w,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&d.a.e(this.TAG,"Could not find H265 startcode until payload end!")}return x.prototype.findNextStartCodeOffset=function(w){for(var y=w,m=this.data_;;){if(y+3>=m.byteLength)return this.eof_flag_=!0,m.byteLength;var g=m[y+0]<<24|m[y+1]<<16|m[y+2]<<8|m[y+3],P=m[y+0]<<16|m[y+1]<<8|m[y+2];if(g===1||P===1)return y;y++}},x.prototype.readNextNaluPayload=function(){for(var w=this.data_,y=null;y==null&&!this.eof_flag_;){var m=this.current_startcode_offset_,g=w[m+=(w[m]<<24|w[m+1]<<16|w[m+2]<<8|w[m+3])===1?4:3]>>1&63,P=(128&w[m])>>>7,O=this.findNextStartCodeOffset(m);if(this.current_startcode_offset_=O,P===0){var F=w.subarray(m,O);(y=new fi).type=g,y.data=F}}return y},x}(),Vt=function(){function x(w,y,m,g){var P=23+(5+w.byteLength)+(5+y.byteLength)+(5+m.byteLength),O=this.data=new Uint8Array(P);O[0]=1,O[1]=(3&g.general_profile_space)<<6|(g.general_tier_flag?1:0)<<5|31&g.general_profile_idc,O[2]=g.general_profile_compatibility_flags_1,O[3]=g.general_profile_compatibility_flags_2,O[4]=g.general_profile_compatibility_flags_3,O[5]=g.general_profile_compatibility_flags_4,O[6]=g.general_constraint_indicator_flags_1,O[7]=g.general_constraint_indicator_flags_2,O[8]=g.general_constraint_indicator_flags_3,O[9]=g.general_constraint_indicator_flags_4,O[10]=g.general_constraint_indicator_flags_5,O[11]=g.general_constraint_indicator_flags_6,O[12]=g.general_level_idc,O[13]=240|(3840&g.min_spatial_segmentation_idc)>>8,O[14]=255&g.min_spatial_segmentation_idc,O[15]=252|3&g.parallelismType,O[16]=252|3&g.chroma_format_idc,O[17]=248|7&g.bit_depth_luma_minus8,O[18]=248|7&g.bit_depth_chroma_minus8,O[19]=0,O[20]=0,O[21]=(3&g.constant_frame_rate)<<6|(7&g.num_temporal_layers)<<3|(g.temporal_id_nested?1:0)<<2|3,O[22]=3,O[23]=128|Oe.kSliceVPS,O[24]=0,O[25]=1,O[26]=(65280&w.byteLength)>>8,O[27]=(255&w.byteLength)>>0,O.set(w,28),O[23+(5+w.byteLength)+0]=128|Oe.kSliceSPS,O[23+(5+w.byteLength)+1]=0,O[23+(5+w.byteLength)+2]=1,O[23+(5+w.byteLength)+3]=(65280&y.byteLength)>>8,O[23+(5+w.byteLength)+4]=(255&y.byteLength)>>0,O.set(y,23+(5+w.byteLength)+5),O[23+(5+w.byteLength+5+y.byteLength)+0]=128|Oe.kSlicePPS,O[23+(5+w.byteLength+5+y.byteLength)+1]=0,O[23+(5+w.byteLength+5+y.byteLength)+2]=1,O[23+(5+w.byteLength+5+y.byteLength)+3]=(65280&m.byteLength)>>8,O[23+(5+w.byteLength+5+y.byteLength)+4]=(255&m.byteLength)>>0,O.set(m,23+(5+w.byteLength+5+y.byteLength)+5)}return x.prototype.getData=function(){return this.data},x}(),fa=function(){},Si=function(){},Gi=function(){},ha=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],An=function(){function x(w){this.TAG="AC3Parser",this.data_=w,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&d.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return x.prototype.findNextSyncwordOffset=function(w){for(var y=w,m=this.data_;;){if(y+7>=m.byteLength)return this.eof_flag_=!0,m.byteLength;if((m[y+0]<<8|m[y+1]<<0)===2935)return y;y++}},x.prototype.readNextAC3Frame=function(){for(var w=this.data_,y=null;y==null&&!this.eof_flag_;){var m=this.current_syncword_offset_,g=w[m+4]>>6,P=[48e3,44200,33e3][g],O=63&w[m+4],F=2*ha[g][O];if(isNaN(F)||m+F>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var te=this.findNextSyncwordOffset(m+F);this.current_syncword_offset_=te;var ee=w[m+5]>>3,ae=7&w[m+5],he=w[m+6]>>5,fe=0;(1&he)!=0&&he!==1&&(fe+=2),(4&he)!=0&&(fe+=2),he===2&&(fe+=2);var se=(w[m+6]<<8|w[m+7]<<0)>>12-fe&1,be=[2,1,2,3,3,4,4,5][he]+se;(y=new Gi).sampling_frequency=P,y.channel_count=be,y.channel_mode=he,y.bit_stream_identification=ee,y.low_frequency_effects_channel_on=se,y.bit_stream_mode=ae,y.frame_size_code=O,y.data=w.subarray(m,m+F)}return y},x.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},x.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},x}(),pa=function(x){var w;w=[x.sampling_rate_code<<6|x.bit_stream_identification<<1|x.bit_stream_mode>>2,(3&x.bit_stream_mode)<<6|x.channel_mode<<3|x.low_frequency_effects_channel_on<<2|x.frame_size_code>>4,x.frame_size_code<<4&224],this.config=w,this.sampling_rate=x.sampling_frequency,this.bit_stream_identification=x.bit_stream_identification,this.bit_stream_mode=x.bit_stream_mode,this.low_frequency_effects_channel_on=x.low_frequency_effects_channel_on,this.channel_count=x.channel_count,this.channel_mode=x.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"},ma=function(){},Cu=function(){function x(w){this.TAG="EAC3Parser",this.data_=w,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&d.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return x.prototype.findNextSyncwordOffset=function(w){for(var y=w,m=this.data_;;){if(y+7>=m.byteLength)return this.eof_flag_=!0,m.byteLength;if((m[y+0]<<8|m[y+1]<<0)===2935)return y;y++}},x.prototype.readNextEAC3Frame=function(){for(var w=this.data_,y=null;y==null&&!this.eof_flag_;){var m=this.current_syncword_offset_,g=new Te(w.subarray(m+2)),P=(g.readBits(2),g.readBits(3),g.readBits(11)+1<<1),O=g.readBits(2),F=null,te=null;O===3?(F=[24e3,22060,16e3][O=g.readBits(2)],te=3):(F=[48e3,44100,32e3][O],te=g.readBits(2));var ee=g.readBits(3),ae=g.readBits(1),he=g.readBits(5);if(m+P>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var fe=this.findNextSyncwordOffset(m+P);this.current_syncword_offset_=fe;var se=[2,1,2,3,3,4,4,5][ee]+ae;g.destroy(),(y=new ma).sampling_frequency=F,y.channel_count=se,y.channel_mode=ee,y.bit_stream_identification=he,y.low_frequency_effects_channel_on=ae,y.frame_size=P,y.num_blks=[1,2,3,6][te],y.data=w.subarray(m,m+P)}return y},x.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},x.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},x}(),ps=function(x){var w,y=Math.floor(x.frame_size*x.sampling_frequency/(16*x.num_blks));w=[255&y,248&y,x.sampling_rate_code<<6|x.bit_stream_identification<<1|0,0|x.channel_mode<<1|x.low_frequency_effects_channel_on<<0,0],this.config=w,this.sampling_rate=x.sampling_frequency,this.bit_stream_identification=x.bit_stream_identification,this.num_blks=x.num_blks,this.low_frequency_effects_channel_on=x.low_frequency_effects_channel_on,this.channel_count=x.channel_count,this.channel_mode=x.channel_mode,this.codec_mimetype="ec-3",this.original_codec_mimetype="ec-3"},Xs=function(){},Mo=function(){function x(w){this.TAG="AV1OBUInMpegTsParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=w,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&d.a.e(this.TAG,"Could not find AV1 startcode until payload end!")}return x._ebsp2rbsp=function(w){for(var y=w,m=y.byteLength,g=new Uint8Array(m),P=0,O=0;O<m;O++)O>=2&&y[O]===3&&y[O-1]===0&&y[O-2]===0||(g[P]=y[O],P++);return new Uint8Array(g.buffer,0,P)},x.prototype.findNextStartCodeOffset=function(w){for(var y=w,m=this.data_;;){if(y+2>=m.byteLength)return this.eof_flag_=!0,m.byteLength;if((m[y+0]<<16|m[y+1]<<8|m[y+2])===1)return y;y++}},x.prototype.readNextOBUPayload=function(){for(var w=this.data_,y=null;y==null&&!this.eof_flag_;){var m=this.current_startcode_offset_+3,g=this.findNextStartCodeOffset(m);this.current_startcode_offset_=g,y=x._ebsp2rbsp(w.subarray(m,g))}return y},x}(),yh=function(){var x=function(w,y){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var P in g)Object.prototype.hasOwnProperty.call(g,P)&&(m[P]=g[P])})(w,y)};return function(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function m(){this.constructor=w}x(w,y),w.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}(),es=function(){return(es=Object.assign||function(x){for(var w,y=1,m=arguments.length;y<m;y++)for(var g in w=arguments[y])Object.prototype.hasOwnProperty.call(w,g)&&(x[g]=w[g]);return x}).apply(this,arguments)},wc=function(x){function w(y,m){var g=x.call(this)||this;return g.TAG="TSDemuxer",g.first_parse_=!0,g.media_info_=new B.a,g.timescale_=90,g.duration_=0,g.current_pmt_pid_=-1,g.program_pmt_map_={},g.pes_slice_queues_={},g.section_slice_queues_={},g.video_metadata_={vps:void 0,sps:void 0,pps:void 0,av1c:void 0,details:void 0},g.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},g.last_pcr_base_=NaN,g.timestamp_offset_=0,g.audio_last_sample_pts_=void 0,g.aac_last_incomplete_data_=null,g.has_video_=!1,g.has_audio_=!1,g.video_init_segment_dispatched_=!1,g.audio_init_segment_dispatched_=!1,g.video_metadata_changed_=!1,g.audio_metadata_changed_=!1,g.loas_previous_frame=null,g.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},g.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},g.ts_packet_size_=y.ts_packet_size,g.sync_offset_=y.sync_offset,g.config_=m,g}return yh(w,x),w.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,x.prototype.destroy.call(this)},w.probe=function(y){var m=new Uint8Array(y),g=-1,P=188;if(m.byteLength<=3*P)return{needMoreData:!0};for(;g===-1;){for(var O=Math.min(1e3,m.byteLength-3*P),F=0;F<O;){if(m[F]===71&&m[F+P]===71&&m[F+2*P]===71){g=F;break}F++}if(g===-1)if(P===188)P=192;else{if(P!==192)break;P=204}}return g===-1?{match:!1}:(P===192&&g>=4?(d.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),g-=4):P===204&&d.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:P,sync_offset:g})},w.prototype.bindDataSource=function(y){return y.onDataArrival=this.parseChunks.bind(this),this},w.prototype.resetMediaInfo=function(){this.media_info_=new B.a},w.prototype.parseChunks=function(y,m){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new K.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var g=0;for(this.first_parse_&&(this.first_parse_=!1,g=this.sync_offset_);g+this.ts_packet_size_<=y.byteLength;){var P=m+g;this.ts_packet_size_===192&&(g+=4);var O=new Uint8Array(y,g,188),F=O[0];if(F!==71){d.a.e(this.TAG,"sync_byte = ".concat(F,", not 0x47"));break}var te=(64&O[1])>>>6,ee=(O[1],(31&O[1])<<8|O[2]),ae=(48&O[3])>>>4,he=15&O[3],fe=!(!this.pmt_||this.pmt_.pcr_pid!==ee),se={},be=4;if(ae==2||ae==3){var ze=O[4];if(ze>0&&(fe||ae==3)&&(se.discontinuity_indicator=(128&O[5])>>>7,se.random_access_indicator=(64&O[5])>>>6,se.elementary_stream_priority_indicator=(32&O[5])>>>5,(16&O[5])>>>4)){var Ue=300*this.getPcrBase(O)+((1&O[10])<<8|O[11]);this.last_pcr_=Ue}if(ae==2||5+ze===188){g+=188,this.ts_packet_size_===204&&(g+=16);continue}be=5+ze}if(ae==1||ae==3){if(ee===0||ee===this.current_pmt_pid_||this.pmt_!=null&&this.pmt_.pid_stream_type[ee]===T.kSCTE35){var nt=188-be;this.handleSectionSlice(y,g+be,nt,{pid:ee,file_position:P,payload_unit_start_indicator:te,continuity_conunter:he,random_access_indicator:se.random_access_indicator})}else if(this.pmt_!=null&&this.pmt_.pid_stream_type[ee]!=null){nt=188-be;var Je=this.pmt_.pid_stream_type[ee];ee!==this.pmt_.common_pids.h264&&ee!==this.pmt_.common_pids.h265&&ee!==this.pmt_.common_pids.av1&&ee!==this.pmt_.common_pids.adts_aac&&ee!==this.pmt_.common_pids.loas_aac&&ee!==this.pmt_.common_pids.ac3&&ee!==this.pmt_.common_pids.eac3&&ee!==this.pmt_.common_pids.opus&&ee!==this.pmt_.common_pids.mp3&&this.pmt_.pes_private_data_pids[ee]!==!0&&this.pmt_.timed_id3_pids[ee]!==!0&&this.pmt_.synchronous_klv_pids[ee]!==!0&&this.pmt_.asynchronous_klv_pids[ee]!==!0||this.handlePESSlice(y,g+be,nt,{pid:ee,stream_type:Je,file_position:P,payload_unit_start_indicator:te,continuity_conunter:he,random_access_indicator:se.random_access_indicator})}}g+=188,this.ts_packet_size_===204&&(g+=16)}return this.dispatchAudioVideoMediaSegment(),g},w.prototype.handleSectionSlice=function(y,m,g,P){var O=new Uint8Array(y,m,g),F=this.section_slice_queues_[P.pid];if(P.payload_unit_start_indicator){var te=O[0];if(F!=null&&F.total_length!==0){var ee=new Uint8Array(y,m+1,Math.min(g,te));F.slices.push(ee),F.total_length+=ee.byteLength,F.total_length===F.expected_length?this.emitSectionSlices(F,P):this.clearSlices(F,P)}for(var ae=1+te;ae<O.byteLength&&O[ae+0]!==255;){var he=(15&O[ae+1])<<8|O[ae+2];this.section_slice_queues_[P.pid]=new it,(F=this.section_slice_queues_[P.pid]).expected_length=he+3,F.file_position=P.file_position,F.random_access_indicator=P.random_access_indicator,ee=new Uint8Array(y,m+ae,Math.min(g-ae,F.expected_length-F.total_length)),F.slices.push(ee),F.total_length+=ee.byteLength,F.total_length===F.expected_length?this.emitSectionSlices(F,P):F.total_length>=F.expected_length&&this.clearSlices(F,P),ae+=ee.byteLength}}else F!=null&&F.total_length!==0&&(ee=new Uint8Array(y,m,Math.min(g,F.expected_length-F.total_length)),F.slices.push(ee),F.total_length+=ee.byteLength,F.total_length===F.expected_length?this.emitSectionSlices(F,P):F.total_length>=F.expected_length&&this.clearSlices(F,P))},w.prototype.handlePESSlice=function(y,m,g,P){var O=new Uint8Array(y,m,g),F=O[0]<<16|O[1]<<8|O[2],te=(O[3],O[4]<<8|O[5]);if(P.payload_unit_start_indicator){if(F!==1)return void d.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value ".concat(F));var ee=this.pes_slice_queues_[P.pid];ee&&(ee.expected_length===0||ee.expected_length===ee.total_length?this.emitPESSlices(ee,P):this.clearSlices(ee,P)),this.pes_slice_queues_[P.pid]=new it,this.pes_slice_queues_[P.pid].file_position=P.file_position,this.pes_slice_queues_[P.pid].random_access_indicator=P.random_access_indicator}if(this.pes_slice_queues_[P.pid]!=null){var ae=this.pes_slice_queues_[P.pid];ae.slices.push(O),P.payload_unit_start_indicator&&(ae.expected_length=te===0?0:te+6),ae.total_length+=O.byteLength,ae.expected_length>0&&ae.expected_length===ae.total_length?this.emitPESSlices(ae,P):ae.expected_length>0&&ae.expected_length<ae.total_length&&this.clearSlices(ae,P)}},w.prototype.emitSectionSlices=function(y,m){for(var g=new Uint8Array(y.total_length),P=0,O=0;P<y.slices.length;P++){var F=y.slices[P];g.set(F,O),O+=F.byteLength}y.slices=[],y.expected_length=-1,y.total_length=0;var te=new ct;te.pid=m.pid,te.data=g,te.file_position=y.file_position,te.random_access_indicator=y.random_access_indicator,this.parseSection(te)},w.prototype.emitPESSlices=function(y,m){for(var g=new Uint8Array(y.total_length),P=0,O=0;P<y.slices.length;P++){var F=y.slices[P];g.set(F,O),O+=F.byteLength}y.slices=[],y.expected_length=-1,y.total_length=0;var te=new tt;te.pid=m.pid,te.data=g,te.stream_type=m.stream_type,te.file_position=y.file_position,te.random_access_indicator=y.random_access_indicator,this.parsePES(te)},w.prototype.clearSlices=function(y,m){y.slices=[],y.expected_length=-1,y.total_length=0},w.prototype.parseSection=function(y){var m=y.data,g=y.pid;g===0?this.parsePAT(m):g===this.current_pmt_pid_?this.parsePMT(m):this.pmt_!=null&&this.pmt_.scte_35_pids[g]&&this.parseSCTE35(m)},w.prototype.parsePES=function(y){var m=y.data,g=m[0]<<16|m[1]<<8|m[2],P=m[3],O=m[4]<<8|m[5];if(g===1)if(P!==188&&P!==190&&P!==191&&P!==240&&P!==241&&P!==255&&P!==242&&P!==248){m[6];var F=(192&m[7])>>>6,te=m[8],ee=void 0,ae=void 0;F!==2&&F!==3||(ee=this.getTimestamp(m,9),ae=F===3?this.getTimestamp(m,14):ee);var he=9+te,fe=void 0;if(O!==0){if(O<3+te)return void d.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");fe=O-3-te}else fe=m.byteLength-he;var se=m.subarray(he,he+fe);switch(y.stream_type){case T.kMPEG1Audio:case T.kMPEG2Audio:this.parseMP3Payload(se,ee);break;case T.kPESPrivateData:this.pmt_.common_pids.av1===y.pid?this.parseAV1Payload(se,ee,ae,y.file_position,y.random_access_indicator):this.pmt_.common_pids.opus===y.pid?this.parseOpusPayload(se,ee):this.pmt_.common_pids.ac3===y.pid?this.parseAC3Payload(se,ee):this.pmt_.common_pids.eac3===y.pid?this.parseEAC3Payload(se,ee):this.pmt_.asynchronous_klv_pids[y.pid]?this.parseAsynchronousKLVMetadataPayload(se,y.pid,P):this.pmt_.smpte2038_pids[y.pid]?this.parseSMPTE2038MetadataPayload(se,ee,ae,y.pid,P):this.parsePESPrivateDataPayload(se,ee,ae,y.pid,P);break;case T.kADTSAAC:this.parseADTSAACPayload(se,ee);break;case T.kLOASAAC:this.parseLOASAACPayload(se,ee);break;case T.kAC3:this.parseAC3Payload(se,ee);break;case T.kEAC3:this.parseEAC3Payload(se,ee);break;case T.kMetadata:this.pmt_.timed_id3_pids[y.pid]?this.parseTimedID3MetadataPayload(se,ee,ae,y.pid,P):this.pmt_.synchronous_klv_pids[y.pid]&&this.parseSynchronousKLVMetadataPayload(se,ee,ae,y.pid,P);break;case T.kH264:this.parseH264Payload(se,ee,ae,y.file_position,y.random_access_indicator);break;case T.kH265:this.parseH265Payload(se,ee,ae,y.file_position,y.random_access_indicator)}}else(P===188||P===191||P===240||P===241||P===255||P===242||P===248)&&y.stream_type===T.kPESPrivateData&&(he=6,fe=void 0,fe=O!==0?O:m.byteLength-he,se=m.subarray(he,he+fe),this.parsePESPrivateDataPayload(se,void 0,void 0,y.pid,P));else d.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value ".concat(g))},w.prototype.parsePAT=function(y){var m=y[0];if(m===0){var g=(15&y[1])<<8|y[2],P=(y[3],y[4],(62&y[5])>>>1),O=1&y[5],F=y[6],te=(y[7],null);if(O===1&&F===0)(te=new Ye).version_number=P;else if((te=this.pat_)==null)return;for(var ee=g-5-4,ae=-1,he=-1,fe=8;fe<8+ee;fe+=4){var se=y[fe]<<8|y[fe+1],be=(31&y[fe+2])<<8|y[fe+3];se===0?te.network_pid=be:(te.program_pmt_pid[se]=be,ae===-1&&(ae=se),he===-1&&(he=be))}O===1&&F===0&&(this.pat_==null&&d.a.v(this.TAG,"Parsed first PAT: ".concat(JSON.stringify(te))),this.pat_=te,this.current_program_=ae,this.current_pmt_pid_=he)}else d.a.e(this.TAG,"parsePAT: table_id ".concat(m," is not corresponded to PAT!"))},w.prototype.parsePMT=function(y){var m=y[0];if(m===2){var g=(15&y[1])<<8|y[2],P=y[3]<<8|y[4],O=(62&y[5])>>>1,F=1&y[5],te=y[6],ee=(y[7],null);if(F===1&&te===0)(ee=new Ce).program_number=P,ee.version_number=O,this.program_pmt_map_[P]=ee;else if((ee=this.program_pmt_map_[P])==null)return;ee.pcr_pid=(31&y[8])<<8|y[9];for(var ae=(15&y[10])<<8|y[11],he=12+ae,fe=g-9-ae-4,se=he;se<he+fe;){var be=y[se],ze=(31&y[se+1])<<8|y[se+2],Ue=(15&y[se+3])<<8|y[se+4];ee.pid_stream_type[ze]=be;var nt=ee.common_pids.h264||ee.common_pids.h265,Je=ee.common_pids.adts_aac||ee.common_pids.loas_aac||ee.common_pids.ac3||ee.common_pids.eac3||ee.common_pids.opus||ee.common_pids.mp3;if(be!==T.kH264||nt)if(be!==T.kH265||nt)if(be!==T.kADTSAAC||Je)if(be!==T.kLOASAAC||Je)if(be!==T.kAC3||Je)if(be!==T.kEAC3||Je)if(be!==T.kMPEG1Audio&&be!==T.kMPEG2Audio||Je)if(be===T.kPESPrivateData){if(ee.pes_private_data_pids[ze]=!0,Ue>0){for(var Xe=se+5;Xe<se+5+Ue;){var wt=y[Xe+0],Kt=y[Xe+1];if(wt===5){var Ze=String.fromCharCode.apply(String,Array.from(y.subarray(Xe+2,Xe+2+Kt)));Ze==="VANC"?ee.smpte2038_pids[ze]=!0:Ze==="AV01"?ee.common_pids.av1=ze:Ze==="Opus"?ee.common_pids.opus=ze:Ze==="KLVA"&&(ee.asynchronous_klv_pids[ze]=!0)}else if(wt===127){if(ze===ee.common_pids.opus){var xt=null;if(y[Xe+2]===128&&(xt=y[Xe+3]),xt==null){d.a.e(this.TAG,"Not Supported Opus channel count.");continue}var At={codec:"opus",channel_count:(15&xt)==0?2:15&xt,channel_config_code:xt,sample_rate:48e3},Rt={codec:"opus",meta:At};this.audio_init_segment_dispatched_==0?(this.audio_metadata_=At,this.dispatchAudioInitSegment(Rt)):this.detectAudioMetadataChange(Rt)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(Rt))}}else wt===128&&ze===ee.common_pids.av1&&(this.video_metadata_.av1c=y.subarray(Xe+2,Xe+2+Kt));Xe+=2+Kt}var It=y.subarray(se+5,se+5+Ue);this.dispatchPESPrivateDataDescriptor(ze,be,It)}}else if(be===T.kMetadata){if(Ue>0)for(Xe=se+5;Xe<se+5+Ue;){wt=y[Xe+0];var nn=y[Xe+1];if(wt===38){var Sn=y[Xe+2]<<8|y[Xe+3]<<0,Bt=null;Sn===65535&&(Bt=String.fromCharCode.apply(String,Array.from(y.subarray(Xe+4,Xe+4+4))));var qt=null;if(y[Xe+4+(Sn===65535?4:0)]===255){var Tn=4+(Sn===65535?4:0)+1;qt=String.fromCharCode.apply(String,Array.from(y.subarray(Xe+Tn,Xe+Tn+4)))}Bt==="ID3 "&&qt==="ID3 "?ee.timed_id3_pids[ze]=!0:qt==="KLVA"&&(ee.synchronous_klv_pids[ze]=!0)}Xe+=2+nn}}else be===T.kSCTE35&&(ee.scte_35_pids[ze]=!0);else ee.common_pids.mp3=ze;else ee.common_pids.eac3=ze;else ee.common_pids.ac3=ze;else ee.common_pids.loas_aac=ze;else ee.common_pids.adts_aac=ze;else ee.common_pids.h265=ze;else ee.common_pids.h264=ze;se+=5+Ue}P===this.current_program_&&(this.pmt_==null&&d.a.v(this.TAG,"Parsed first PMT: ".concat(JSON.stringify(ee))),this.pmt_=ee,(ee.common_pids.h264||ee.common_pids.h265||ee.common_pids.av1)&&(this.has_video_=!0),(ee.common_pids.adts_aac||ee.common_pids.loas_aac||ee.common_pids.ac3||ee.common_pids.opus||ee.common_pids.mp3)&&(this.has_audio_=!0))}else d.a.e(this.TAG,"parsePMT: table_id ".concat(m," is not corresponded to PMT!"))},w.prototype.parseSCTE35=function(y){var m=_i(y);if(m.pts!=null){var g=Math.floor(m.pts/this.timescale_);m.pts=g}else m.nearest_pts=this.getNearestTimestampMilliseconds();this.onSCTE35Metadata&&this.onSCTE35Metadata(m)},w.prototype.parseAV1Payload=function(y,m,g,P,O){for(var F=new Mo(y),te=null,ee=[],ae=0,he=!1,fe=null;(te=F.readNextOBUPayload())!=null;){if((fe=Y.parseOBUs(te,this.video_metadata_.details))&&fe.keyframe===!0)if(this.video_init_segment_dispatched_){if(this.detectVideoMetadataChange(null,fe)===!0){var se;this.video_metadata_changed_=!0,this.dispatchVideoMediaSegment(),(se=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+fe.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),se.set(fe.sequence_header_data,this.video_metadata_.av1c.byteLength),fe.av1c=se,this.dispatchVideoInitSegment()}}else(se=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+fe.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),se.set(fe.sequence_header_data,this.video_metadata_.av1c.byteLength),fe.av1c=se,this.video_metadata_.details=fe,this.dispatchVideoInitSegment();this.video_metadata_.details=fe,he||(he=fe.keyframe),ee.push({data:te}),ae+=te.byteLength}var be=Math.floor(m/this.timescale_),ze=Math.floor(g/this.timescale_);if(ee.length){var Ue=this.video_track_,nt={units:ee,length:ae,isKeyframe:he,dts:ze,pts:be,cts:be-ze,file_position:P};Ue.samples.push(nt),Ue.length+=ae}},w.prototype.parseH264Payload=function(y,m,g,P,O){for(var F=new Et(y),te=null,ee=[],ae=0,he=!1;(te=F.readNextNaluPayload())!=null;){var fe=new Fe(te);if(fe.type===Me.kSliceSPS){var se=ye.parseSPS(te.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(fe,se)===!0&&(d.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:fe,pps:void 0,av1c:void 0,details:se}):(this.video_metadata_.sps=fe,this.video_metadata_.details=se)}else fe.type===Me.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=fe,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(fe.type===Me.kSliceIDR||fe.type===Me.kSliceNonIDR&&O===1)&&(he=!0);this.video_init_segment_dispatched_&&(ee.push(fe),ae+=fe.data.byteLength)}var be=Math.floor(m/this.timescale_),ze=Math.floor(g/this.timescale_);if(ee.length){var Ue=this.video_track_,nt={units:ee,length:ae,isKeyframe:he,dts:ze,pts:be,cts:be-ze,file_position:P};Ue.samples.push(nt),Ue.length+=ae}},w.prototype.parseH265Payload=function(y,m,g,P,O){for(var F=new ki(y),te=null,ee=[],ae=0,he=!1;(te=F.readNextNaluPayload())!=null;){var fe=new Hi(te);if(fe.type===Oe.kSliceVPS){if(!this.video_init_segment_dispatched_){var se=Le.parseVPS(te.data);this.video_metadata_.vps=fe,this.video_metadata_.details=es(es({},this.video_metadata_.details),se)}}else fe.type===Oe.kSliceSPS?(se=Le.parseSPS(te.data),this.video_init_segment_dispatched_?this.detectVideoMetadataChange(fe,se)===!0&&(d.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:fe,pps:void 0,av1c:void 0,details:se}):(this.video_metadata_.sps=fe,this.video_metadata_.details=es(es({},this.video_metadata_.details),se))):fe.type===Oe.kSlicePPS?(!this.video_init_segment_dispatched_||this.video_metadata_changed_)&&(se=Le.parsePPS(te.data),this.video_metadata_.pps=fe,this.video_metadata_.details=es(es({},this.video_metadata_.details),se),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):fe.type!==Oe.kSliceIDR_W_RADL&&fe.type!==Oe.kSliceIDR_N_LP&&fe.type!==Oe.kSliceCRA_NUT||(he=!0);this.video_init_segment_dispatched_&&(ee.push(fe),ae+=fe.data.byteLength)}var be=Math.floor(m/this.timescale_),ze=Math.floor(g/this.timescale_);if(ee.length){var Ue=this.video_track_,nt={units:ee,length:ae,isKeyframe:he,dts:ze,pts:be,cts:be-ze,file_position:P};Ue.samples.push(nt),Ue.length+=ae}},w.prototype.detectVideoMetadataChange=function(y,m){if(m.codec_mimetype!==this.video_metadata_.details.codec_mimetype)return d.a.v(this.TAG,"Video: Codec mimeType changed from "+"".concat(this.video_metadata_.details.codec_mimetype," to ").concat(m.codec_mimetype)),!0;if(m.codec_size.width!==this.video_metadata_.details.codec_size.width||m.codec_size.height!==this.video_metadata_.details.codec_size.height){var g=this.video_metadata_.details.codec_size,P=m.codec_size;return d.a.v(this.TAG,"Video: Coded Resolution changed from "+"".concat(g.width,"x").concat(g.height," to ").concat(P.width,"x").concat(P.height)),!0}return m.present_size.width!==this.video_metadata_.details.present_size.width&&(d.a.v(this.TAG,"Video: Present resolution width changed from "+"".concat(this.video_metadata_.details.present_size.width," to ").concat(m.present_size.width)),!0)},w.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},w.prototype.dispatchVideoInitSegment=function(){var y=this.video_metadata_.details,m={type:"video"};m.id=this.video_track_.id,m.timescale=1e3,m.duration=this.duration_,m.codecWidth=y.codec_size.width,m.codecHeight=y.codec_size.height,m.presentWidth=y.present_size.width,m.presentHeight=y.present_size.height,m.profile=y.profile_string,m.level=y.level_string,m.bitDepth=y.bit_depth,m.chromaFormat=y.chroma_format,m.sarRatio=y.sar_ratio,m.frameRate=y.frame_rate;var g=m.frameRate.fps_den,P=m.frameRate.fps_num;if(m.refSampleDuration=g/P*1e3,m.codec=y.codec_mimetype,this.video_metadata_.av1c)m.av1c=this.video_metadata_.av1c,this.video_init_segment_dispatched_==0&&d.a.v(this.TAG,"Generated first AV1 for mimeType: ".concat(m.codec));else if(this.video_metadata_.vps){var O=this.video_metadata_.vps.data.subarray(4),F=this.video_metadata_.sps.data.subarray(4),te=this.video_metadata_.pps.data.subarray(4),ee=new Vt(O,F,te,y);m.hvcc=ee.getData(),this.video_init_segment_dispatched_==0&&d.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: ".concat(m.codec))}else{F=this.video_metadata_.sps.data.subarray(4),te=this.video_metadata_.pps.data.subarray(4);var ae=new X(F,te,y);m.avcc=ae.getData(),this.video_init_segment_dispatched_==0&&d.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: ".concat(m.codec))}this.onTrackMetadata("video",m),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var he=this.media_info_;he.hasVideo=!0,he.width=m.codecWidth,he.height=m.codecHeight,he.fps=m.frameRate.fps,he.profile=m.profile,he.level=m.level,he.refFrames=y.ref_frames,he.chromaFormat=y.chroma_format_string,he.sarNum=m.sarRatio.width,he.sarDen=m.sarRatio.height,he.videoCodec=m.codec,he.hasAudio&&he.audioCodec?he.mimeType='video/mp2t; codecs="'.concat(he.videoCodec,",").concat(he.audioCodec,'"'):he.mimeType='video/mp2t; codecs="'.concat(he.videoCodec,'"'),he.isComplete()&&this.onMediaInfo(he)},w.prototype.dispatchVideoMediaSegment=function(){this.isInitSegmentDispatched()&&this.video_track_.length&&this.onDataAvailable(null,this.video_track_)},w.prototype.dispatchAudioMediaSegment=function(){this.isInitSegmentDispatched()&&this.audio_track_.length&&this.onDataAvailable(this.audio_track_,null)},w.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},w.prototype.parseADTSAACPayload=function(y,m){if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var g=new Uint8Array(y.byteLength+this.aac_last_incomplete_data_.byteLength);g.set(this.aac_last_incomplete_data_,0),g.set(y,this.aac_last_incomplete_data_.byteLength),y=g}var P,O;if(m!=null&&(O=m/this.timescale_),this.audio_metadata_.codec==="aac"){if(m==null&&this.audio_last_sample_pts_!=null)P=1024/this.audio_metadata_.sampling_frequency*1e3,O=this.audio_last_sample_pts_+P;else if(m==null)return void d.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){P=1024/this.audio_metadata_.sampling_frequency*1e3;var F=this.audio_last_sample_pts_+P;Math.abs(F-O)>1&&(d.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(F,"ms, PES pts: ").concat(O,"ms")),O=F)}}for(var te,ee=new at(y),ae=null,he=O;(ae=ee.readNextAACFrame())!=null;){P=1024/ae.sampling_frequency*1e3;var fe={codec:"aac",data:ae};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"aac",audio_object_type:ae.audio_object_type,sampling_freq_index:ae.sampling_freq_index,sampling_frequency:ae.sampling_frequency,channel_config:ae.channel_config},this.dispatchAudioInitSegment(fe)):this.detectAudioMetadataChange(fe)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(fe)),te=he;var se=Math.floor(he),be={unit:ae.data,length:ae.data.byteLength,pts:se,dts:se};this.audio_track_.samples.push(be),this.audio_track_.length+=ae.data.byteLength,he+=P}ee.hasIncompleteData()&&(this.aac_last_incomplete_data_=ee.getIncompleteData()),te&&(this.audio_last_sample_pts_=te)}},w.prototype.parseLOASAACPayload=function(y,m){var g;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var P=new Uint8Array(y.byteLength+this.aac_last_incomplete_data_.byteLength);P.set(this.aac_last_incomplete_data_,0),P.set(y,this.aac_last_incomplete_data_.byteLength),y=P}var O,F;if(m!=null&&(F=m/this.timescale_),this.audio_metadata_.codec==="aac"){if(m==null&&this.audio_last_sample_pts_!=null)O=1024/this.audio_metadata_.sampling_frequency*1e3,F=this.audio_last_sample_pts_+O;else if(m==null)return void d.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){O=1024/this.audio_metadata_.sampling_frequency*1e3;var te=this.audio_last_sample_pts_+O;Math.abs(te-F)>1&&(d.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(te,"ms, PES pts: ").concat(F,"ms")),F=te)}}for(var ee,ae=new G(y),he=null,fe=F;(he=ae.readNextAACFrame((g=this.loas_previous_frame)!==null&&g!==void 0?g:void 0))!=null;){this.loas_previous_frame=he,O=1024/he.sampling_frequency*1e3;var se={codec:"aac",data:he};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"aac",audio_object_type:he.audio_object_type,sampling_freq_index:he.sampling_freq_index,sampling_frequency:he.sampling_frequency,channel_config:he.channel_config},this.dispatchAudioInitSegment(se)):this.detectAudioMetadataChange(se)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(se)),ee=fe;var be=Math.floor(fe),ze={unit:he.data,length:he.data.byteLength,pts:be,dts:be};this.audio_track_.samples.push(ze),this.audio_track_.length+=he.data.byteLength,fe+=O}ae.hasIncompleteData()&&(this.aac_last_incomplete_data_=ae.getIncompleteData()),ee&&(this.audio_last_sample_pts_=ee)}},w.prototype.parseAC3Payload=function(y,m){if(!this.has_video_||this.video_init_segment_dispatched_){var g,P;if(m!=null&&(P=m/this.timescale_),this.audio_metadata_.codec==="ac-3"){if(m==null&&this.audio_last_sample_pts_!=null)g=1536/this.audio_metadata_.sampling_frequency*1e3,P=this.audio_last_sample_pts_+g;else if(m==null)return void d.a.w(this.TAG,"AC3: Unknown pts")}for(var O,F=new An(y),te=null,ee=P;(te=F.readNextAC3Frame())!=null;){g=1536/te.sampling_frequency*1e3;var ae={codec:"ac-3",data:te};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"ac-3",sampling_frequency:te.sampling_frequency,bit_stream_identification:te.bit_stream_identification,bit_stream_mode:te.bit_stream_mode,low_frequency_effects_channel_on:te.low_frequency_effects_channel_on,channel_mode:te.channel_mode},this.dispatchAudioInitSegment(ae)):this.detectAudioMetadataChange(ae)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(ae)),O=ee;var he=Math.floor(ee),fe={unit:te.data,length:te.data.byteLength,pts:he,dts:he};this.audio_track_.samples.push(fe),this.audio_track_.length+=te.data.byteLength,ee+=g}O&&(this.audio_last_sample_pts_=O)}},w.prototype.parseEAC3Payload=function(y,m){if(!this.has_video_||this.video_init_segment_dispatched_){var g,P;if(m!=null&&(P=m/this.timescale_),this.audio_metadata_.codec==="ec-3"){if(m==null&&this.audio_last_sample_pts_!=null)g=256*this.audio_metadata_.num_blks/this.audio_metadata_.sampling_frequency*1e3,P=this.audio_last_sample_pts_+g;else if(m==null)return void d.a.w(this.TAG,"EAC3: Unknown pts")}for(var O,F=new Cu(y),te=null,ee=P;(te=F.readNextEAC3Frame())!=null;){g=1536/te.sampling_frequency*1e3;var ae={codec:"ec-3",data:te};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"ec-3",sampling_frequency:te.sampling_frequency,bit_stream_identification:te.bit_stream_identification,low_frequency_effects_channel_on:te.low_frequency_effects_channel_on,num_blks:te.num_blks,channel_mode:te.channel_mode},this.dispatchAudioInitSegment(ae)):this.detectAudioMetadataChange(ae)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(ae)),O=ee;var he=Math.floor(ee),fe={unit:te.data,length:te.data.byteLength,pts:he,dts:he};this.audio_track_.samples.push(fe),this.audio_track_.length+=te.data.byteLength,ee+=g}O&&(this.audio_last_sample_pts_=O)}},w.prototype.parseOpusPayload=function(y,m){if(!this.has_video_||this.video_init_segment_dispatched_){var g,P;if(m!=null&&(P=m/this.timescale_),this.audio_metadata_.codec==="opus"){if(m==null&&this.audio_last_sample_pts_!=null)g=20,P=this.audio_last_sample_pts_+g;else if(m==null)return void d.a.w(this.TAG,"Opus: Unknown pts")}for(var O,F=P,te=0;te<y.length;){g=20;for(var ee=(16&y[te+1])!=0,ae=(8&y[te+1])!=0,he=te+2,fe=0;y[he]===255;)fe+=255,he+=1;fe+=y[he],he+=1,he+=ee?2:0,he+=ae?2:0,O=F;var se=Math.floor(F),be=y.slice(he,he+fe),ze={unit:be,length:be.byteLength,pts:se,dts:se};this.audio_track_.samples.push(ze),this.audio_track_.length+=be.byteLength,F+=g,te=he+fe}O&&(this.audio_last_sample_pts_=O)}},w.prototype.parseMP3Payload=function(y,m){if(!this.has_video_||this.video_init_segment_dispatched_){var g=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],P=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],O=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],F=y[1]>>>3&3,te=(6&y[1])>>1,ee=(240&y[2])>>>4,ae=(12&y[2])>>>2,he=(y[3]>>>6&3)!==3?2:1,fe=0,se=34;switch(F){case 0:fe=[11025,12e3,8e3,0][ae];break;case 2:fe=[22050,24e3,16e3,0][ae];break;case 3:fe=[44100,48e3,32e3,0][ae]}switch(te){case 1:se=34,ee<O.length&&O[ee];break;case 2:se=33,ee<P.length&&P[ee];break;case 3:se=32,ee<g.length&&g[ee]}var be=new Si;be.object_type=se,be.sample_rate=fe,be.channel_count=he,be.data=y;var ze={codec:"mp3",data:be};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"mp3",object_type:se,sample_rate:fe,channel_count:he},this.dispatchAudioInitSegment(ze)):this.detectAudioMetadataChange(ze)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(ze));var Ue={unit:y,length:y.byteLength,pts:m/this.timescale_,dts:m/this.timescale_};this.audio_track_.samples.push(Ue),this.audio_track_.length+=y.byteLength}},w.prototype.detectAudioMetadataChange=function(y){if(y.codec!==this.audio_metadata_.codec)return d.a.v(this.TAG,"Audio: Audio Codecs changed from "+"".concat(this.audio_metadata_.codec," to ").concat(y.codec)),!0;if(y.codec==="aac"&&this.audio_metadata_.codec==="aac"){if((m=y.data).audio_object_type!==this.audio_metadata_.audio_object_type)return d.a.v(this.TAG,"AAC: AudioObjectType changed from "+"".concat(this.audio_metadata_.audio_object_type," to ").concat(m.audio_object_type)),!0;if(m.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return d.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sampling_freq_index," to ").concat(m.sampling_freq_index)),!0;if(m.channel_config!==this.audio_metadata_.channel_config)return d.a.v(this.TAG,"AAC: Channel configuration changed from "+"".concat(this.audio_metadata_.channel_config," to ").concat(m.channel_config)),!0}else if(y.codec==="ac-3"&&this.audio_metadata_.codec==="ac-3"){var m;if((m=y.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return d.a.v(this.TAG,"AC3: Sampling Frequency changed from "+"".concat(this.audio_metadata_.sampling_frequency," to ").concat(m.sampling_frequency)),!0;if(m.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return d.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+"".concat(this.audio_metadata_.bit_stream_identification," to ").concat(m.bit_stream_identification)),!0;if(m.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return d.a.v(this.TAG,"AC3: BitStream Mode changed from "+"".concat(this.audio_metadata_.bit_stream_mode," to ").concat(m.bit_stream_mode)),!0;if(m.channel_mode!==this.audio_metadata_.channel_mode)return d.a.v(this.TAG,"AC3: Channel Mode changed from "+"".concat(this.audio_metadata_.channel_mode," to ").concat(m.channel_mode)),!0;if(m.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return d.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+"".concat(this.audio_metadata_.low_frequency_effects_channel_on," to ").concat(m.low_frequency_effects_channel_on)),!0}else if(y.codec==="opus"&&this.audio_metadata_.codec==="opus"){if((g=y.meta).sample_rate!==this.audio_metadata_.sample_rate)return d.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(g.sample_rate)),!0;if(g.channel_count!==this.audio_metadata_.channel_count)return d.a.v(this.TAG,"Opus: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(g.channel_count)),!0}else if(y.codec==="mp3"&&this.audio_metadata_.codec==="mp3"){var g;if((g=y.data).object_type!==this.audio_metadata_.object_type)return d.a.v(this.TAG,"MP3: AudioObjectType changed from "+"".concat(this.audio_metadata_.object_type," to ").concat(g.object_type)),!0;if(g.sample_rate!==this.audio_metadata_.sample_rate)return d.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(g.sample_rate)),!0;if(g.channel_count!==this.audio_metadata_.channel_count)return d.a.v(this.TAG,"MP3: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(g.channel_count)),!0}return!1},w.prototype.dispatchAudioInitSegment=function(y){var m={type:"audio"};if(m.id=this.audio_track_.id,m.timescale=1e3,m.duration=this.duration_,this.audio_metadata_.codec==="aac"){var g=y.codec==="aac"?y.data:null,P=new ue(g);m.audioSampleRate=P.sampling_rate,m.channelCount=P.channel_count,m.codec=P.codec_mimetype,m.originalCodec=P.original_codec_mimetype,m.config=P.config,m.refSampleDuration=1024/m.audioSampleRate*m.timescale}else if(this.audio_metadata_.codec==="ac-3"){var O=y.codec==="ac-3"?y.data:null,F=new pa(O);m.audioSampleRate=F.sampling_rate,m.channelCount=F.channel_count,m.codec=F.codec_mimetype,m.originalCodec=F.original_codec_mimetype,m.config=F.config,m.refSampleDuration=1536/m.audioSampleRate*m.timescale}else if(this.audio_metadata_.codec==="ec-3"){var te=y.codec==="ec-3"?y.data:null,ee=new ps(te);m.audioSampleRate=ee.sampling_rate,m.channelCount=ee.channel_count,m.codec=ee.codec_mimetype,m.originalCodec=ee.original_codec_mimetype,m.config=ee.config,m.refSampleDuration=256*ee.num_blks/m.audioSampleRate*m.timescale}else this.audio_metadata_.codec==="opus"?(m.audioSampleRate=this.audio_metadata_.sample_rate,m.channelCount=this.audio_metadata_.channel_count,m.channelConfigCode=this.audio_metadata_.channel_config_code,m.codec="opus",m.originalCodec="opus",m.config=void 0,m.refSampleDuration=20):this.audio_metadata_.codec==="mp3"&&(m.audioSampleRate=this.audio_metadata_.sample_rate,m.channelCount=this.audio_metadata_.channel_count,m.codec="mp3",m.originalCodec="mp3",m.config=void 0);this.audio_init_segment_dispatched_==0&&d.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: ".concat(m.codec)),this.onTrackMetadata("audio",m),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var ae=this.media_info_;ae.hasAudio=!0,ae.audioCodec=m.originalCodec,ae.audioSampleRate=m.audioSampleRate,ae.audioChannelCount=m.channelCount,ae.hasVideo&&ae.videoCodec?ae.mimeType='video/mp2t; codecs="'.concat(ae.videoCodec,",").concat(ae.audioCodec,'"'):ae.mimeType='video/mp2t; codecs="'.concat(ae.audioCodec,'"'),ae.isComplete()&&this.onMediaInfo(ae)},w.prototype.dispatchPESPrivateDataDescriptor=function(y,m,g){var P=new je;P.pid=y,P.stream_type=m,P.descriptor=g,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(P)},w.prototype.parsePESPrivateDataPayload=function(y,m,g,P,O){var F=new Ae;if(F.pid=P,F.stream_id=O,F.len=y.byteLength,F.data=y,m!=null){var te=Math.floor(m/this.timescale_);F.pts=te}else F.nearest_pts=this.getNearestTimestampMilliseconds();if(g!=null){var ee=Math.floor(g/this.timescale_);F.dts=ee}this.onPESPrivateData&&this.onPESPrivateData(F)},w.prototype.parseTimedID3MetadataPayload=function(y,m,g,P,O){var F=new Ae;if(F.pid=P,F.stream_id=O,F.len=y.byteLength,F.data=y,m!=null){var te=Math.floor(m/this.timescale_);F.pts=te}if(g!=null){var ee=Math.floor(g/this.timescale_);F.dts=ee}this.onTimedID3Metadata&&this.onTimedID3Metadata(F)},w.prototype.parseSynchronousKLVMetadataPayload=function(y,m,g,P,O){var F=new Xs;if(F.pid=P,F.stream_id=O,F.len=y.byteLength,F.data=y,m!=null){var te=Math.floor(m/this.timescale_);F.pts=te}if(g!=null){var ee=Math.floor(g/this.timescale_);F.dts=ee}F.access_units=function(ae){for(var he=[],fe=0;fe+5<ae.byteLength;){var se=ae[fe+0],be=ae[fe+1],ze=ae[fe+2],Ue=ae[fe+3]<<8|ae[fe+4]<<0,nt=ae.slice(fe+5,fe+5+Ue);he.push({service_id:se,sequence_number:be,flags:ze,data:nt}),fe+=5+Ue}return he}(y),this.onSynchronousKLVMetadata&&this.onSynchronousKLVMetadata(F)},w.prototype.parseAsynchronousKLVMetadataPayload=function(y,m,g){var P=new Ae;P.pid=m,P.stream_id=g,P.len=y.byteLength,P.data=y,this.onAsynchronousKLVMetadata&&this.onAsynchronousKLVMetadata(P)},w.prototype.parseSMPTE2038MetadataPayload=function(y,m,g,P,O){var F=new fa;if(F.pid=P,F.stream_id=O,F.len=y.byteLength,F.data=y,m!=null){var te=Math.floor(m/this.timescale_);F.pts=te}if(F.nearest_pts=this.getNearestTimestampMilliseconds(),g!=null){var ee=Math.floor(g/this.timescale_);F.dts=ee}F.ancillaries=function(ae){for(var he=new Te(ae),fe=0,se=[];fe+=6,he.readBits(6)===0;){var be=he.readBool();fe+=1;var ze=he.readBits(11);fe+=11;var Ue=he.readBits(12);fe+=12;var nt=255&he.readBits(10);fe+=10;var Je=255&he.readBits(10);fe+=10;var Xe=255&he.readBits(10);fe+=10;for(var wt=new Uint8Array(Xe),Kt=0;Kt<Xe;Kt++){var Ze=255&he.readBits(10);fe+=10,wt[Kt]=Ze}he.readBits(10),fe+=10;var xt="User Defined";nt===65?Je===7&&(xt="SCTE-104"):nt===95?Je===220?xt="ARIB STD-B37 (1SEG)":Je===221?xt="ARIB STD-B37 (ANALOG)":Je===222?xt="ARIB STD-B37 (SD)":Je===223&&(xt="ARIB STD-B37 (HD)"):nt===97&&(Je===1?xt="EIA-708":Je===2&&(xt="EIA-608")),se.push({yc_indicator:be,line_number:ze,horizontal_offset:Ue,did:nt,sdid:Je,user_data:wt,description:xt,information:{}}),he.readBits(8-(fe-Math.floor(fe/8))%8),fe+=(8-(fe-Math.floor(fe/8)))%8}return he.destroy(),he=null,se}(y),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(F)},w.prototype.getNearestTimestampMilliseconds=function(){return this.audio_last_sample_pts_!=null?Math.floor(this.audio_last_sample_pts_):this.last_pcr_!=null?Math.floor(this.last_pcr_/300/this.timescale_):void 0},w.prototype.getPcrBase=function(y){var m=33554432*y[6]+131072*y[7]+512*y[8]+2*y[9]+(128&y[10])/128+this.timestamp_offset_;return m+4294967296<this.last_pcr_base_&&(m+=8589934592,this.timestamp_offset_+=8589934592),this.last_pcr_base_=m,m},w.prototype.getTimestamp=function(y,m){var g=536870912*(14&y[m])+4194304*(255&y[m+1])+16384*(254&y[m+2])+128*(255&y[m+3])+(254&y[m+4])/2+this.timestamp_offset_;return g+4294967296<this.last_pcr_base_&&(g+=8589934592),g},w}(ve),Ac=function(x,w,y){for(var m,g=0,P=w.length;g<P;g++)!m&&g in w||(m||(m=Array.prototype.slice.call(w,0,g)),m[g]=w[g]);return x.concat(m||Array.prototype.slice.call(w))},xc=function(){function x(){}return x.init=function(){for(var w in x.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],av01:[],av1C:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[],"ec-3":[],dec3:[],fLaC:[],dfLa:[]},x.types)x.types.hasOwnProperty(w)&&(x.types[w]=[w.charCodeAt(0),w.charCodeAt(1),w.charCodeAt(2),w.charCodeAt(3)]);var y=x.constants={};y.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),y.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),y.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),y.STSC=y.STCO=y.STTS,y.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),y.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),y.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),y.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),y.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),y.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},x.box=function(w){for(var y=8,m=null,g=Array.prototype.slice.call(arguments,1),P=g.length,O=0;O<P;O++)y+=g[O].byteLength;(m=new Uint8Array(y))[0]=y>>>24&255,m[1]=y>>>16&255,m[2]=y>>>8&255,m[3]=255&y,m.set(w,4);var F=8;for(O=0;O<P;O++)m.set(g[O],F),F+=g[O].byteLength;return m},x.generateInitSegment=function(w){var y=x.box(x.types.ftyp,x.constants.FTYP),m=x.moov(w),g=new Uint8Array(y.byteLength+m.byteLength);return g.set(y,0),g.set(m,y.byteLength),g},x.moov=function(w){var y=x.mvhd(w.timescale,w.duration),m=x.trak(w),g=x.mvex(w);return x.box(x.types.moov,y,m,g)},x.mvhd=function(w,y){return x.box(x.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,255&w,y>>>24&255,y>>>16&255,y>>>8&255,255&y,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},x.trak=function(w){return x.box(x.types.trak,x.tkhd(w),x.mdia(w))},x.tkhd=function(w){var y=w.id,m=w.duration,g=w.presentWidth,P=w.presentHeight;return x.box(x.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,y>>>24&255,y>>>16&255,y>>>8&255,255&y,0,0,0,0,m>>>24&255,m>>>16&255,m>>>8&255,255&m,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,g>>>8&255,255&g,0,0,P>>>8&255,255&P,0,0]))},x.mdia=function(w){return x.box(x.types.mdia,x.mdhd(w),x.hdlr(w),x.minf(w))},x.mdhd=function(w){var y=w.timescale,m=w.duration;return x.box(x.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,y>>>24&255,y>>>16&255,y>>>8&255,255&y,m>>>24&255,m>>>16&255,m>>>8&255,255&m,85,196,0,0]))},x.hdlr=function(w){var y=null;return y=w.type==="audio"?x.constants.HDLR_AUDIO:x.constants.HDLR_VIDEO,x.box(x.types.hdlr,y)},x.minf=function(w){var y=null;return y=w.type==="audio"?x.box(x.types.smhd,x.constants.SMHD):x.box(x.types.vmhd,x.constants.VMHD),x.box(x.types.minf,y,x.dinf(),x.stbl(w))},x.dinf=function(){return x.box(x.types.dinf,x.box(x.types.dref,x.constants.DREF))},x.stbl=function(w){return x.box(x.types.stbl,x.stsd(w),x.box(x.types.stts,x.constants.STTS),x.box(x.types.stsc,x.constants.STSC),x.box(x.types.stsz,x.constants.STSZ),x.box(x.types.stco,x.constants.STCO))},x.stsd=function(w){return w.type==="audio"?w.codec==="mp3"?x.box(x.types.stsd,x.constants.STSD_PREFIX,x.mp3(w)):w.codec==="ac-3"?x.box(x.types.stsd,x.constants.STSD_PREFIX,x.ac3(w)):w.codec==="ec-3"?x.box(x.types.stsd,x.constants.STSD_PREFIX,x.ec3(w)):w.codec==="opus"?x.box(x.types.stsd,x.constants.STSD_PREFIX,x.Opus(w)):w.codec=="flac"?x.box(x.types.stsd,x.constants.STSD_PREFIX,x.fLaC(w)):x.box(x.types.stsd,x.constants.STSD_PREFIX,x.mp4a(w)):w.type==="video"&&w.codec.startsWith("hvc1")?x.box(x.types.stsd,x.constants.STSD_PREFIX,x.hvc1(w)):w.type==="video"&&w.codec.startsWith("av01")?x.box(x.types.stsd,x.constants.STSD_PREFIX,x.av01(w)):x.box(x.types.stsd,x.constants.STSD_PREFIX,x.avc1(w))},x.mp3=function(w){var y=w.channelCount,m=w.audioSampleRate,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,y,0,16,0,0,0,0,m>>>8&255,255&m,0,0]);return x.box(x.types[".mp3"],g)},x.mp4a=function(w){var y=w.channelCount,m=w.audioSampleRate,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,y,0,16,0,0,0,0,m>>>8&255,255&m,0,0]);return x.box(x.types.mp4a,g,x.esds(w))},x.ac3=function(w){var y=w.channelCount,m=w.audioSampleRate,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,y,0,16,0,0,0,0,m>>>8&255,255&m,0,0]);return x.box(x.types["ac-3"],g,x.box(x.types.dac3,new Uint8Array(w.config)))},x.ec3=function(w){var y=w.channelCount,m=w.audioSampleRate,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,y,0,16,0,0,0,0,m>>>8&255,255&m,0,0]);return x.box(x.types["ec-3"],g,x.box(x.types.dec3,new Uint8Array(w.config)))},x.esds=function(w){var y=w.config||[],m=y.length,g=new Uint8Array([0,0,0,0,3,23+m,0,1,0,4,15+m,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([m]).concat(y).concat([6,1,2]));return x.box(x.types.esds,g)},x.Opus=function(w){var y=w.channelCount,m=w.audioSampleRate,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,y,0,16,0,0,0,0,m>>>8&255,255&m,0,0]);return x.box(x.types.Opus,g,x.dOps(w))},x.dOps=function(w){var y=w.channelCount,m=w.channelConfigCode,g=w.audioSampleRate;if(w.config)return x.box(x.types.dOps,w.config);var P=[];switch(m){case 1:case 2:P=[0];break;case 0:P=[255,1,1,0,1];break;case 128:P=[255,2,0,0,1];break;case 3:P=[1,2,1,0,2,1];break;case 4:P=[1,2,2,0,1,2,3];break;case 5:P=[1,3,2,0,4,1,2,3];break;case 6:P=[1,4,2,0,4,1,2,3,5];break;case 7:P=[1,4,2,0,4,1,2,3,5,6];break;case 8:P=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:P=[1,1,2,0,1];break;case 131:P=[1,1,3,0,1,2];break;case 132:P=[1,1,4,0,1,2,3];break;case 133:P=[1,1,5,0,1,2,3,4];break;case 134:P=[1,1,6,0,1,2,3,4,5];break;case 135:P=[1,1,7,0,1,2,3,4,5,6];break;case 136:P=[1,1,8,0,1,2,3,4,5,6,7]}var O=new Uint8Array(Ac([0,y,0,0,g>>>24&255,g>>>17&255,g>>>8&255,g>>>0&255,0,0],P));return x.box(x.types.dOps,O)},x.fLaC=function(w){var y=w.channelCount,m=Math.min(w.audioSampleRate,65535),g=w.sampleSize,P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,y,0,g,0,0,0,0,m>>>8&255,255&m,0,0]);return x.box(x.types.fLaC,P,x.dfLa(w))},x.dfLa=function(w){var y=new Uint8Array(Ac([0,0,0,0],w.config));return x.box(x.types.dfLa,y)},x.avc1=function(w){var y=w.avcc,m=w.codecWidth,g=w.codecHeight,P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>>8&255,255&m,g>>>8&255,255&g,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return x.box(x.types.avc1,P,x.box(x.types.avcC,y))},x.hvc1=function(w){var y=w.hvcc,m=w.codecWidth,g=w.codecHeight,P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>>8&255,255&m,g>>>8&255,255&g,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return x.box(x.types.hvc1,P,x.box(x.types.hvcC,y))},x.av01=function(w){var y=w.av1c,m=w.codecWidth||192,g=w.codecHeight||108,P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>>8&255,255&m,g>>>8&255,255&g,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return x.box(x.types.av01,P,x.box(x.types.av1C,y))},x.mvex=function(w){return x.box(x.types.mvex,x.trex(w))},x.trex=function(w){var y=w.id,m=new Uint8Array([0,0,0,0,y>>>24&255,y>>>16&255,y>>>8&255,255&y,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return x.box(x.types.trex,m)},x.moof=function(w,y){return x.box(x.types.moof,x.mfhd(w.sequenceNumber),x.traf(w,y))},x.mfhd=function(w){var y=new Uint8Array([0,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,255&w]);return x.box(x.types.mfhd,y)},x.traf=function(w,y){var m=w.id,g=x.box(x.types.tfhd,new Uint8Array([0,0,0,0,m>>>24&255,m>>>16&255,m>>>8&255,255&m])),P=x.box(x.types.tfdt,new Uint8Array([0,0,0,0,y>>>24&255,y>>>16&255,y>>>8&255,255&y])),O=x.sdtp(w),F=x.trun(w,O.byteLength+16+16+8+16+8+8);return x.box(x.types.traf,g,P,F,O)},x.sdtp=function(w){for(var y=w.samples||[],m=y.length,g=new Uint8Array(4+m),P=0;P<m;P++){var O=y[P].flags;g[P+4]=O.isLeading<<6|O.dependsOn<<4|O.isDependedOn<<2|O.hasRedundancy}return x.box(x.types.sdtp,g)},x.trun=function(w,y){var m=w.samples||[],g=m.length,P=12+16*g,O=new Uint8Array(P);y+=8+P,O.set([0,0,15,1,g>>>24&255,g>>>16&255,g>>>8&255,255&g,y>>>24&255,y>>>16&255,y>>>8&255,255&y],0);for(var F=0;F<g;F++){var te=m[F].duration,ee=m[F].size,ae=m[F].flags,he=m[F].cts;O.set([te>>>24&255,te>>>16&255,te>>>8&255,255&te,ee>>>24&255,ee>>>16&255,ee>>>8&255,255&ee,ae.isLeading<<2|ae.dependsOn,ae.isDependedOn<<6|ae.hasRedundancy<<4|ae.isNonSync,0,0,he>>>24&255,he>>>16&255,he>>>8&255,255&he],12+16*F)}return x.box(x.types.trun,O)},x.mdat=function(w){return x.box(x.types.mdat,w)},x}();xc.init();var Ys=xc,ms=function(){function x(){}return x.getSilentFrame=function(w,y){if(w==="mp4a.40.2"){if(y===1)return new Uint8Array([0,200,0,128,35,128]);if(y===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(y===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(y===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(y===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(y===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(y===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(y===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(y===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},x}(),rr=_(11),Ru=function(){function x(w){this.TAG="MP4Remuxer",this._config=w,this._isLive=w.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new rr.c("audio"),this._videoSegmentInfoList=new rr.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!L.a.chrome||!(L.a.version.major<50||L.a.version.major===50&&L.a.version.build<2661)),this._fillSilentAfterSeek=L.a.msedge||L.a.msie,this._mp3UseMpegAudio=!L.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return x.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},x.prototype.bindDataSource=function(w){return w.onDataAvailable=this.remux.bind(this),w.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(x.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(w){this._onInitSegment=w},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(w){this._onMediaSegment=w},enumerable:!1,configurable:!0}),x.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},x.prototype.seek=function(w){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},x.prototype.remux=function(w,y){if(!this._onMediaSegment)throw new K.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(w,y),y&&this._remuxVideo(y),w&&this._remuxAudio(w)},x.prototype._onTrackMetadataReceived=function(w,y){var m=null,g="mp4",P=y.codec;if(w==="audio")this._audioMeta=y,y.codec==="mp3"&&this._mp3UseMpegAudio?(g="mpeg",P="",m=new Uint8Array):m=Ys.generateInitSegment(y);else{if(w!=="video")return;this._videoMeta=y,m=Ys.generateInitSegment(y)}if(!this._onInitSegment)throw new K.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(w,{type:w,data:m.buffer,codec:P,container:"".concat(w,"/").concat(g),mediaDuration:y.duration})},x.prototype._calculateDtsBase=function(w,y){this._dtsBaseInited||(w&&w.samples&&w.samples.length&&(this._audioDtsBase=w.samples[0].dts),y&&y.samples&&y.samples.length&&(this._videoDtsBase=y.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},x.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},x.prototype.flushStashedSamples=function(){var w=this._videoStashedLastSample,y=this._audioStashedLastSample,m={type:"video",id:1,sequenceNumber:0,samples:[],length:0};w!=null&&(m.samples.push(w),m.length=w.length);var g={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};y!=null&&(g.samples.push(y),g.length=y.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(m,!0),this._remuxAudio(g,!0)},x.prototype._remuxAudio=function(w,y){if(this._audioMeta!=null){var m,g=w,P=g.samples,O=void 0,F=-1,te=this._audioMeta.refSampleDuration,ee=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,ae=this._dtsBaseInited&&this._audioNextDts===void 0,he=!1;if(P&&P.length!==0&&(P.length!==1||y)){var fe=0,se=null,be=0;ee?(fe=0,be=g.length):(fe=8,be=8+g.length);var ze=null;if(P.length>1&&(be-=(ze=P.pop()).length),this._audioStashedLastSample!=null){var Ue=this._audioStashedLastSample;this._audioStashedLastSample=null,P.unshift(Ue),be+=Ue.length}ze!=null&&(this._audioStashedLastSample=ze);var nt=P[0].dts-this._dtsBase;if(this._audioNextDts)O=nt-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())O=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(he=!0);else{var Je=this._audioSegmentInfoList.getLastSampleBefore(nt);if(Je!=null){var Xe=nt-(Je.originalDts+Je.duration);Xe<=3&&(Xe=0),O=nt-(Je.dts+Je.duration+Xe)}else O=0}if(he){var wt=nt-O,Kt=this._videoSegmentInfoList.getLastSegmentBefore(nt);if(Kt!=null&&Kt.beginDts<wt){if(Gn=ms.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var Ze=Kt.beginDts,xt=wt-Kt.beginDts;d.a.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(Ze,", duration: ").concat(xt)),P.unshift({unit:Gn,dts:Ze,pts:Ze}),be+=Gn.byteLength}}else he=!1}for(var At=[],Rt=0;Rt<P.length;Rt++){var It=(Ue=P[Rt]).unit,nn=Ue.dts-this._dtsBase,Sn=(Ze=nn,!1),Bt=null,qt=0;if(!(nn<-.001)){if(this._audioMeta.codec!=="mp3"&&te!=null){var Tn=nn;if(this._audioNextDts&&(Tn=this._audioNextDts),(O=nn-Tn)<=-3*te){d.a.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(nn," ms ,curRefDts: ").concat(Tn," ms)  due to dtsCorrection: ").concat(O," ms overlap."));continue}if(O>=3*te&&this._fillAudioTimestampGap&&!L.a.safari){Sn=!0;var Gn,an=Math.floor(O/te);d.a.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+"originalDts: ".concat(nn," ms, curRefDts: ").concat(Tn," ms, ")+"dtsCorrection: ".concat(Math.round(O)," ms, generate: ").concat(an," frames")),Ze=Math.floor(Tn),qt=Math.floor(Tn+te)-Ze,(Gn=ms.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))==null&&(d.a.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),Gn=It),Bt=[];for(var zn=0;zn<an;zn++){Tn+=te;var bi=Math.floor(Tn),Ti=Math.floor(Tn+te)-bi,ii={dts:bi,pts:bi,cts:0,unit:Gn,size:Gn.byteLength,duration:Ti,originalDts:nn,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};Bt.push(ii),be+=ii.size}this._audioNextDts=Tn+te}else Ze=Math.floor(Tn),qt=Math.floor(Tn+te)-Ze,this._audioNextDts=Tn+te}else Ze=nn-O,Rt!==P.length-1?qt=P[Rt+1].dts-this._dtsBase-O-Ze:ze!=null?qt=ze.dts-this._dtsBase-O-Ze:qt=At.length>=1?At[At.length-1].duration:Math.floor(te),this._audioNextDts=Ze+qt;F===-1&&(F=Ze),At.push({dts:Ze,pts:Ze,cts:0,unit:Ue.unit,size:Ue.unit.byteLength,duration:qt,originalDts:nn,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),Sn&&At.push.apply(At,Bt)}}if(At.length===0)return g.samples=[],void(g.length=0);for(ee?se=new Uint8Array(be):((se=new Uint8Array(be))[0]=be>>>24&255,se[1]=be>>>16&255,se[2]=be>>>8&255,se[3]=255&be,se.set(Ys.types.mdat,4)),Rt=0;Rt<At.length;Rt++)It=At[Rt].unit,se.set(It,fe),fe+=It.byteLength;var hi=At[At.length-1];m=hi.dts+hi.duration;var fn=new rr.b;fn.beginDts=F,fn.endDts=m,fn.beginPts=F,fn.endPts=m,fn.originalBeginDts=At[0].originalDts,fn.originalEndDts=hi.originalDts+hi.duration,fn.firstSample=new rr.d(At[0].dts,At[0].pts,At[0].duration,At[0].originalDts,!1),fn.lastSample=new rr.d(hi.dts,hi.pts,hi.duration,hi.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(fn),g.samples=At,g.sequenceNumber++;var Di=null;Di=ee?new Uint8Array:Ys.moof(g,F),g.samples=[],g.length=0;var Ei={type:"audio",data:this._mergeBoxes(Di,se).buffer,sampleCount:At.length,info:fn};ee&&ae&&(Ei.timestampOffset=F),this._onMediaSegment("audio",Ei)}}},x.prototype._remuxVideo=function(w,y){if(this._videoMeta!=null){var m,g,P=w,O=P.samples,F=void 0,te=-1,ee=-1;if(O&&O.length!==0&&(O.length!==1||y)){var ae=8,he=null,fe=8+w.length,se=null;if(O.length>1&&(fe-=(se=O.pop()).length),this._videoStashedLastSample!=null){var be=this._videoStashedLastSample;this._videoStashedLastSample=null,O.unshift(be),fe+=be.length}se!=null&&(this._videoStashedLastSample=se);var ze=O[0].dts-this._dtsBase;if(this._videoNextDts)F=ze-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())F=0;else{var Ue=this._videoSegmentInfoList.getLastSampleBefore(ze);if(Ue!=null){var nt=ze-(Ue.originalDts+Ue.duration);nt<=3&&(nt=0),F=ze-(Ue.dts+Ue.duration+nt)}else F=0}for(var Je=new rr.b,Xe=[],wt=0;wt<O.length;wt++){var Kt=(be=O[wt]).dts-this._dtsBase,Ze=be.isKeyframe,xt=Kt-F,At=be.cts,Rt=xt+At;te===-1&&(te=xt,ee=Rt);var It=0;if(wt!==O.length-1?It=O[wt+1].dts-this._dtsBase-F-xt:se!=null?It=se.dts-this._dtsBase-F-xt:It=Xe.length>=1?Xe[Xe.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),Ze){var nn=new rr.d(xt,Rt,It,be.dts,!0);nn.fileposition=be.fileposition,Je.appendSyncPoint(nn)}Xe.push({dts:xt,pts:Rt,cts:At,units:be.units,size:be.length,isKeyframe:Ze,duration:It,originalDts:Kt,flags:{isLeading:0,dependsOn:Ze?2:1,isDependedOn:Ze?1:0,hasRedundancy:0,isNonSync:Ze?0:1}})}for((he=new Uint8Array(fe))[0]=fe>>>24&255,he[1]=fe>>>16&255,he[2]=fe>>>8&255,he[3]=255&fe,he.set(Ys.types.mdat,4),wt=0;wt<Xe.length;wt++)for(var Sn=Xe[wt].units;Sn.length;){var Bt=Sn.shift().data;he.set(Bt,ae),ae+=Bt.byteLength}var qt=Xe[Xe.length-1];if(m=qt.dts+qt.duration,g=qt.pts+qt.duration,this._videoNextDts=m,Je.beginDts=te,Je.endDts=m,Je.beginPts=ee,Je.endPts=g,Je.originalBeginDts=Xe[0].originalDts,Je.originalEndDts=qt.originalDts+qt.duration,Je.firstSample=new rr.d(Xe[0].dts,Xe[0].pts,Xe[0].duration,Xe[0].originalDts,Xe[0].isKeyframe),Je.lastSample=new rr.d(qt.dts,qt.pts,qt.duration,qt.originalDts,qt.isKeyframe),this._isLive||this._videoSegmentInfoList.append(Je),P.samples=Xe,P.sequenceNumber++,this._forceFirstIDR){var Tn=Xe[0].flags;Tn.dependsOn=2,Tn.isNonSync=0}var Gn=Ys.moof(P,te);P.samples=[],P.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(Gn,he).buffer,sampleCount:Xe.length,info:Je})}}},x.prototype._mergeBoxes=function(w,y){var m=new Uint8Array(w.byteLength+y.byteLength);return m.set(w,0),m.set(y,w.byteLength),m},x}(),$s=_(14),Dn=_(1),zi=(_(2),function(){function x(w,y){this.TAG="TransmuxingController",this._emitter=new D.a,this._config=y,w.segments||(w.segments=[{duration:w.duration,filesize:w.filesize,url:w.url}]),typeof w.cors!="boolean"&&(w.cors=!0),typeof w.withCredentials!="boolean"&&(w.withCredentials=!1),this._mediaDataSource=w,this._currentSegmentIndex=0;var m=0;this._mediaDataSource.segments.forEach(function(g){g.timestampBase=m,m+=g.duration,g.cors=w.cors,g.withCredentials=w.withCredentials,y.referrerPolicy&&(g.referrerPolicy=y.referrerPolicy)}),isNaN(m)||this._mediaDataSource.duration===m||(this._mediaDataSource.duration=m),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return x.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},x.prototype.on=function(w,y){this._emitter.addListener(w,y)},x.prototype.off=function(w,y){this._emitter.removeListener(w,y)},x.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},x.prototype._loadSegment=function(w,y){this._currentSegmentIndex=w;var m=this._mediaDataSource.segments[w],g=this._ioctl=new $s.a(m,this._config,w);g.onError=this._onIOException.bind(this),g.onSeeked=this._onIOSeeked.bind(this),g.onComplete=this._onIOComplete.bind(this),g.onRedirect=this._onIORedirect.bind(this),g.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),y?this._demuxer.bindDataSource(this._ioctl):g.onDataArrival=this._onInitChunkArrival.bind(this),g.open(y)},x.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},x.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},x.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},x.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},x.prototype.seek=function(w){if(this._mediaInfo!=null&&this._mediaInfo.isSeekable()){var y=this._searchSegmentIndexContains(w);if(y===this._currentSegmentIndex){var m=this._mediaInfo.segments[y];if(m==null)this._pendingSeekTime=w;else{var g=m.getNearestKeyframe(w);this._remuxer.seek(g.milliseconds),this._ioctl.seek(g.fileposition),this._pendingResolveSeekPoint=g.milliseconds}}else{var P=this._mediaInfo.segments[y];P==null?(this._pendingSeekTime=w,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(y)):(g=P.getNearestKeyframe(w),this._internalAbort(),this._remuxer.seek(w),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[y].timestampBase,this._loadSegment(y,g.fileposition),this._pendingResolveSeekPoint=g.milliseconds,this._reportSegmentMediaInfo(y))}this._enableStatisticsReporter()}},x.prototype._searchSegmentIndexContains=function(w){for(var y=this._mediaDataSource.segments,m=y.length-1,g=0;g<y.length;g++)if(w<y[g].timestampBase){m=g-1;break}return m},x.prototype._onInitChunkArrival=function(w,y){var m=this,g=0;if(y>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,g=this._demuxer.parseChunks(w,y);else{var P=null;(P=H.probe(w)).match&&(this._setupFLVDemuxerRemuxer(P),g=this._demuxer.parseChunks(w,y)),P.match||P.needMoreData||(P=wc.probe(w)).match&&(this._setupTSDemuxerRemuxer(P),g=this._demuxer.parseChunks(w,y)),P.match||P.needMoreData||(P=null,d.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(function(){m._internalAbort()}),this._emitter.emit(Dn.a.DEMUX_ERROR,Se.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return g},x.prototype._setupFLVDemuxerRemuxer=function(w){this._demuxer=new H(w,this._config),this._remuxer||(this._remuxer=new Ru(this._config));var y=this._mediaDataSource;y.duration==null||isNaN(y.duration)||(this._demuxer.overridedDuration=y.duration),typeof y.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=y.hasAudio),typeof y.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=y.hasVideo),this._demuxer.timestampBase=y.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},x.prototype._setupTSDemuxerRemuxer=function(w){var y=this._demuxer=new wc(w,this._config);this._remuxer||(this._remuxer=new Ru(this._config)),y.onError=this._onDemuxException.bind(this),y.onMediaInfo=this._onMediaInfo.bind(this),y.onMetaDataArrived=this._onMetaDataArrived.bind(this),y.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),y.onSynchronousKLVMetadata=this._onSynchronousKLVMetadata.bind(this),y.onAsynchronousKLVMetadata=this._onAsynchronousKLVMetadata.bind(this),y.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),y.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),y.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),y.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},x.prototype._onMediaInfo=function(w){var y=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},w),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,B.a.prototype));var m=Object.assign({},w);Object.setPrototypeOf(m,B.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=m,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var g=y._pendingSeekTime;y._pendingSeekTime=null,y.seek(g)})},x.prototype._onMetaDataArrived=function(w){this._emitter.emit(Dn.a.METADATA_ARRIVED,w)},x.prototype._onScriptDataArrived=function(w){this._emitter.emit(Dn.a.SCRIPTDATA_ARRIVED,w)},x.prototype._onTimedID3Metadata=function(w){var y=this._remuxer.getTimestampBase();y!=null&&(w.pts!=null&&(w.pts-=y),w.dts!=null&&(w.dts-=y),this._emitter.emit(Dn.a.TIMED_ID3_METADATA_ARRIVED,w))},x.prototype._onSynchronousKLVMetadata=function(w){var y=this._remuxer.getTimestampBase();y!=null&&(w.pts!=null&&(w.pts-=y),w.dts!=null&&(w.dts-=y),this._emitter.emit(Dn.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,w))},x.prototype._onAsynchronousKLVMetadata=function(w){this._emitter.emit(Dn.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,w)},x.prototype._onSMPTE2038Metadata=function(w){var y=this._remuxer.getTimestampBase();y!=null&&(w.pts!=null&&(w.pts-=y),w.dts!=null&&(w.dts-=y),w.nearest_pts!=null&&(w.nearest_pts-=y),this._emitter.emit(Dn.a.SMPTE2038_METADATA_ARRIVED,w))},x.prototype._onSCTE35Metadata=function(w){var y=this._remuxer.getTimestampBase();y!=null&&(w.pts!=null&&(w.pts-=y),w.nearest_pts!=null&&(w.nearest_pts-=y),this._emitter.emit(Dn.a.SCTE35_METADATA_ARRIVED,w))},x.prototype._onPESPrivateDataDescriptor=function(w){this._emitter.emit(Dn.a.PES_PRIVATE_DATA_DESCRIPTOR,w)},x.prototype._onPESPrivateData=function(w){var y=this._remuxer.getTimestampBase();y!=null&&(w.pts!=null&&(w.pts-=y),w.nearest_pts!=null&&(w.nearest_pts-=y),w.dts!=null&&(w.dts-=y),this._emitter.emit(Dn.a.PES_PRIVATE_DATA_ARRIVED,w))},x.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},x.prototype._onIOComplete=function(w){var y=w+1;y<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(y)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(Dn.a.LOADING_COMPLETE),this._disableStatisticsReporter())},x.prototype._onIORedirect=function(w){var y=this._ioctl.extraData;this._mediaDataSource.segments[y].redirectedURL=w},x.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(Dn.a.RECOVERED_EARLY_EOF)},x.prototype._onIOException=function(w,y){d.a.e(this.TAG,"IOException: type = ".concat(w,", code = ").concat(y.code,", msg = ").concat(y.msg)),this._emitter.emit(Dn.a.IO_ERROR,w,y),this._disableStatisticsReporter()},x.prototype._onDemuxException=function(w,y){d.a.e(this.TAG,"DemuxException: type = ".concat(w,", info = ").concat(y)),this._emitter.emit(Dn.a.DEMUX_ERROR,w,y)},x.prototype._onRemuxerInitSegmentArrival=function(w,y){this._emitter.emit(Dn.a.INIT_SEGMENT,w,y)},x.prototype._onRemuxerMediaSegmentArrival=function(w,y){if(this._pendingSeekTime==null&&(this._emitter.emit(Dn.a.MEDIA_SEGMENT,w,y),this._pendingResolveSeekPoint!=null&&w==="video")){var m=y.info.syncPoints,g=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,L.a.safari&&m.length>0&&m[0].originalDts===g&&(g=m[0].pts),this._emitter.emit(Dn.a.RECOMMEND_SEEKPOINT,g)}},x.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},x.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},x.prototype._reportSegmentMediaInfo=function(w){var y=this._mediaInfo.segments[w],m=Object.assign({},y);m.duration=this._mediaInfo.duration,m.segmentCount=this._mediaInfo.segmentCount,delete m.segments,delete m.keyframesIndex,this._emitter.emit(Dn.a.MEDIA_INFO,m)},x.prototype._reportStatisticsInfo=function(){var w={};w.url=this._ioctl.currentURL,w.hasRedirect=this._ioctl.hasRedirect,w.hasRedirect&&(w.redirectedURL=this._ioctl.currentRedirectedURL),w.speed=this._ioctl.currentSpeed,w.loaderType=this._ioctl.loaderType,w.currentSegmentIndex=this._currentSegmentIndex,w.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(Dn.a.STATISTICS_INFO,w)},x}());I.a=zi},function(S,I,_){var k,D=_(0),d=function(){function xe(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return xe.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},xe.prototype.addBytes=function(J){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=J,this._totalBytes+=J):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=J,this._totalBytes+=J):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=J,this._totalBytes+=J,this._lastCheckpoint=this._now())},Object.defineProperty(xe.prototype,"currentKBps",{get:function(){this.addBytes(0);var J=(this._now()-this._lastCheckpoint)/1e3;return J==0&&(J=1),this._intervalBytes/J/1024},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"averageKBps",{get:function(){var J=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/J/1024},enumerable:!1,configurable:!0}),xe}(),L=_(2),B=_(5),N=_(3),j=(k=function(xe,J){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,T){Y.__proto__=T}||function(Y,T){for(var H in T)Object.prototype.hasOwnProperty.call(T,H)&&(Y[H]=T[H])})(xe,J)},function(xe,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function Y(){this.constructor=xe}k(xe,J),xe.prototype=J===null?Object.create(J):(Y.prototype=J.prototype,new Y)}),V=function(xe){function J(Y,T){var H=xe.call(this,"fetch-stream-loader")||this;return H.TAG="FetchStreamLoader",H._seekHandler=Y,H._config=T,H._needStash=!0,H._requestAbort=!1,H._abortController=null,H._contentLength=null,H._receivedLength=0,H}return j(J,xe),J.isSupported=function(){try{var Y=B.a.msedge&&B.a.version.minor>=15048,T=!B.a.msedge||Y;return self.fetch&&self.ReadableStream&&T}catch{return!1}},J.prototype.destroy=function(){this.isWorking()&&this.abort(),xe.prototype.destroy.call(this)},J.prototype.open=function(Y,T){var H=this;this._dataSource=Y,this._range=T;var ve=Y.url;this._config.reuseRedirectedURL&&Y.redirectedURL!=null&&(ve=Y.redirectedURL);var Ye=this._seekHandler.getConfig(ve,T),Me=new self.Headers;if(typeof Ye.headers=="object"){var Ce=Ye.headers;for(var tt in Ce)Ce.hasOwnProperty(tt)&&Me.append(tt,Ce[tt])}var ct={method:"GET",headers:Me,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var tt in this._config.headers)Me.append(tt,this._config.headers[tt]);Y.cors===!1&&(ct.mode="same-origin"),Y.withCredentials&&(ct.credentials="include"),Y.referrerPolicy&&(ct.referrerPolicy=Y.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,ct.signal=this._abortController.signal),this._status=L.c.kConnecting,self.fetch(Ye.url,ct).then(function(it){if(H._requestAbort)return H._status=L.c.kIdle,void it.body.cancel();if(it.ok&&it.status>=200&&it.status<=299){if(it.url!==Ye.url&&H._onURLRedirect){var de=H._seekHandler.removeURLParameters(it.url);H._onURLRedirect(de)}var Z=it.headers.get("Content-Length");return Z!=null&&(H._contentLength=parseInt(Z),H._contentLength!==0&&H._onContentLengthKnown&&H._onContentLengthKnown(H._contentLength)),H._pump.call(H,it.body.getReader())}if(H._status=L.c.kError,!H._onError)throw new N.d("FetchStreamLoader: Http code invalid, "+it.status+" "+it.statusText);H._onError(L.b.HTTP_STATUS_CODE_INVALID,{code:it.status,msg:it.statusText})}).catch(function(it){if(!H._abortController||!H._abortController.signal.aborted){if(H._status=L.c.kError,!H._onError)throw it;H._onError(L.b.EXCEPTION,{code:-1,msg:it.message})}})},J.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==L.c.kBuffering||!B.a.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},J.prototype._pump=function(Y){var T=this;return Y.read().then(function(H){if(H.done)if(T._contentLength!==null&&T._receivedLength<T._contentLength){T._status=L.c.kError;var ve=L.b.EARLY_EOF,Ye={code:-1,msg:"Fetch stream meet Early-EOF"};if(!T._onError)throw new N.d(Ye.msg);T._onError(ve,Ye)}else T._status=L.c.kComplete,T._onComplete&&T._onComplete(T._range.from,T._range.from+T._receivedLength-1);else{if(T._abortController&&T._abortController.signal.aborted)return void(T._status=L.c.kComplete);if(T._requestAbort===!0)return T._status=L.c.kComplete,Y.cancel();T._status=L.c.kBuffering;var Me=H.value.buffer,Ce=T._range.from+T._receivedLength;T._receivedLength+=Me.byteLength,T._onDataArrival&&T._onDataArrival(Me,Ce,T._receivedLength),T._pump(Y)}}).catch(function(H){if(T._abortController&&T._abortController.signal.aborted)T._status=L.c.kComplete;else if(H.code!==11||!B.a.msedge){T._status=L.c.kError;var ve=0,Ye=null;if(H.code!==19&&H.message!=="network error"||!(T._contentLength===null||T._contentLength!==null&&T._receivedLength<T._contentLength)?(ve=L.b.EXCEPTION,Ye={code:H.code,msg:H.message}):(ve=L.b.EARLY_EOF,Ye={code:H.code,msg:"Fetch stream meet Early-EOF"}),!T._onError)throw new N.d(Ye.msg);T._onError(ve,Ye)}})},J}(L.a),K=function(){var xe=function(J,Y){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,H){T.__proto__=H}||function(T,H){for(var ve in H)Object.prototype.hasOwnProperty.call(H,ve)&&(T[ve]=H[ve])})(J,Y)};return function(J,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function T(){this.constructor=J}xe(J,Y),J.prototype=Y===null?Object.create(Y):(T.prototype=Y.prototype,new T)}}(),v=function(xe){function J(Y,T){var H=xe.call(this,"xhr-moz-chunked-loader")||this;return H.TAG="MozChunkedLoader",H._seekHandler=Y,H._config=T,H._needStash=!0,H._xhr=null,H._requestAbort=!1,H._contentLength=null,H._receivedLength=0,H}return K(J,xe),J.isSupported=function(){try{var Y=new XMLHttpRequest;return Y.open("GET","https://example.com",!0),Y.responseType="moz-chunked-arraybuffer",Y.responseType==="moz-chunked-arraybuffer"}catch(T){return D.a.w("MozChunkedLoader",T.message),!1}},J.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),xe.prototype.destroy.call(this)},J.prototype.open=function(Y,T){this._dataSource=Y,this._range=T;var H=Y.url;this._config.reuseRedirectedURL&&Y.redirectedURL!=null&&(H=Y.redirectedURL);var ve=this._seekHandler.getConfig(H,T);this._requestURL=ve.url;var Ye=this._xhr=new XMLHttpRequest;if(Ye.open("GET",ve.url,!0),Ye.responseType="moz-chunked-arraybuffer",Ye.onreadystatechange=this._onReadyStateChange.bind(this),Ye.onprogress=this._onProgress.bind(this),Ye.onloadend=this._onLoadEnd.bind(this),Ye.onerror=this._onXhrError.bind(this),Y.withCredentials&&(Ye.withCredentials=!0),typeof ve.headers=="object"){var Me=ve.headers;for(var Ce in Me)Me.hasOwnProperty(Ce)&&Ye.setRequestHeader(Ce,Me[Ce])}if(typeof this._config.headers=="object"){Me=this._config.headers;for(var Ce in Me)Me.hasOwnProperty(Ce)&&Ye.setRequestHeader(Ce,Me[Ce])}this._status=L.c.kConnecting,Ye.send()},J.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=L.c.kComplete},J.prototype._onReadyStateChange=function(Y){var T=Y.target;if(T.readyState===2){if(T.responseURL!=null&&T.responseURL!==this._requestURL&&this._onURLRedirect){var H=this._seekHandler.removeURLParameters(T.responseURL);this._onURLRedirect(H)}if(T.status!==0&&(T.status<200||T.status>299)){if(this._status=L.c.kError,!this._onError)throw new N.d("MozChunkedLoader: Http code invalid, "+T.status+" "+T.statusText);this._onError(L.b.HTTP_STATUS_CODE_INVALID,{code:T.status,msg:T.statusText})}else this._status=L.c.kBuffering}},J.prototype._onProgress=function(Y){if(this._status!==L.c.kError){this._contentLength===null&&Y.total!==null&&Y.total!==0&&(this._contentLength=Y.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var T=Y.target.response,H=this._range.from+this._receivedLength;this._receivedLength+=T.byteLength,this._onDataArrival&&this._onDataArrival(T,H,this._receivedLength)}},J.prototype._onLoadEnd=function(Y){this._requestAbort!==!0?this._status!==L.c.kError&&(this._status=L.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},J.prototype._onXhrError=function(Y){this._status=L.c.kError;var T=0,H=null;if(this._contentLength&&Y.loaded<this._contentLength?(T=L.b.EARLY_EOF,H={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(T=L.b.EXCEPTION,H={code:-1,msg:Y.constructor.name+" "+Y.type}),!this._onError)throw new N.d(H.msg);this._onError(T,H)},J}(L.a),z=function(){var xe=function(J,Y){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,H){T.__proto__=H}||function(T,H){for(var ve in H)Object.prototype.hasOwnProperty.call(H,ve)&&(T[ve]=H[ve])})(J,Y)};return function(J,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function T(){this.constructor=J}xe(J,Y),J.prototype=Y===null?Object.create(Y):(T.prototype=Y.prototype,new T)}}(),Te=(function(xe){function J(Y,T){var H=xe.call(this,"xhr-msstream-loader")||this;return H.TAG="MSStreamLoader",H._seekHandler=Y,H._config=T,H._needStash=!0,H._xhr=null,H._reader=null,H._totalRange=null,H._currentRange=null,H._currentRequestURL=null,H._currentRedirectedURL=null,H._contentLength=null,H._receivedLength=0,H._bufferLimit=16777216,H._lastTimeBufferSize=0,H._isReconnecting=!1,H}z(J,xe),J.isSupported=function(){try{if(self.MSStream===void 0||self.MSStreamReader===void 0)return!1;var Y=new XMLHttpRequest;return Y.open("GET","https://example.com",!0),Y.responseType="ms-stream",Y.responseType==="ms-stream"}catch(T){return D.a.w("MSStreamLoader",T.message),!1}},J.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),xe.prototype.destroy.call(this)},J.prototype.open=function(Y,T){this._internalOpen(Y,T,!1)},J.prototype._internalOpen=function(Y,T,H){this._dataSource=Y,H?this._currentRange=T:this._totalRange=T;var ve=Y.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?ve=this._currentRedirectedURL:Y.redirectedURL!=null&&(ve=Y.redirectedURL));var Ye=this._seekHandler.getConfig(ve,T);this._currentRequestURL=Ye.url;var Me=this._reader=new self.MSStreamReader;Me.onprogress=this._msrOnProgress.bind(this),Me.onload=this._msrOnLoad.bind(this),Me.onerror=this._msrOnError.bind(this);var Ce=this._xhr=new XMLHttpRequest;if(Ce.open("GET",Ye.url,!0),Ce.responseType="ms-stream",Ce.onreadystatechange=this._xhrOnReadyStateChange.bind(this),Ce.onerror=this._xhrOnError.bind(this),Y.withCredentials&&(Ce.withCredentials=!0),typeof Ye.headers=="object"){var tt=Ye.headers;for(var ct in tt)tt.hasOwnProperty(ct)&&Ce.setRequestHeader(ct,tt[ct])}if(typeof this._config.headers=="object"){tt=this._config.headers;for(var ct in tt)tt.hasOwnProperty(ct)&&Ce.setRequestHeader(ct,tt[ct])}this._isReconnecting?this._isReconnecting=!1:this._status=L.c.kConnecting,Ce.send()},J.prototype.abort=function(){this._internalAbort(),this._status=L.c.kComplete},J.prototype._internalAbort=function(){this._reader&&(this._reader.readyState===1&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},J.prototype._xhrOnReadyStateChange=function(Y){var T=Y.target;if(T.readyState===2)if(T.status>=200&&T.status<=299){if(this._status=L.c.kBuffering,T.responseURL!=null){var H=this._seekHandler.removeURLParameters(T.responseURL);T.responseURL!==this._currentRequestURL&&H!==this._currentRedirectedURL&&(this._currentRedirectedURL=H,this._onURLRedirect&&this._onURLRedirect(H))}var ve=T.getResponseHeader("Content-Length");if(ve!=null&&this._contentLength==null){var Ye=parseInt(ve);Ye>0&&(this._contentLength=Ye,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}}else{if(this._status=L.c.kError,!this._onError)throw new N.d("MSStreamLoader: Http code invalid, "+T.status+" "+T.statusText);this._onError(L.b.HTTP_STATUS_CODE_INVALID,{code:T.status,msg:T.statusText})}else if(T.readyState===3&&T.status>=200&&T.status<=299){this._status=L.c.kBuffering;var Me=T.response;this._reader.readAsArrayBuffer(Me)}},J.prototype._xhrOnError=function(Y){this._status=L.c.kError;var T=L.b.EXCEPTION,H={code:-1,msg:Y.constructor.name+" "+Y.type};if(!this._onError)throw new N.d(H.msg);this._onError(T,H)},J.prototype._msrOnProgress=function(Y){var T=Y.target.result;if(T!=null){var H=T.slice(this._lastTimeBufferSize);this._lastTimeBufferSize=T.byteLength;var ve=this._totalRange.from+this._receivedLength;this._receivedLength+=H.byteLength,this._onDataArrival&&this._onDataArrival(H,ve,this._receivedLength),T.byteLength>=this._bufferLimit&&(D.a.v(this.TAG,"MSStream buffer exceeded max size near ".concat(ve+H.byteLength,", reconnecting...")),this._doReconnectIfNeeded())}else this._doReconnectIfNeeded()},J.prototype._doReconnectIfNeeded=function(){if(this._contentLength==null||this._receivedLength<this._contentLength){this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort();var Y={from:this._totalRange.from+this._receivedLength,to:-1};this._internalOpen(this._dataSource,Y,!0)}},J.prototype._msrOnLoad=function(Y){this._status=L.c.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},J.prototype._msrOnError=function(Y){this._status=L.c.kError;var T=0,H=null;if(this._contentLength&&this._receivedLength<this._contentLength?(T=L.b.EARLY_EOF,H={code:-1,msg:"MSStream meet Early-Eof"}):(T=L.b.EARLY_EOF,H={code:-1,msg:Y.constructor.name+" "+Y.type}),!this._onError)throw new N.d(H.msg);this._onError(T,H)}}(L.a),function(){var xe=function(J,Y){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,H){T.__proto__=H}||function(T,H){for(var ve in H)Object.prototype.hasOwnProperty.call(H,ve)&&(T[ve]=H[ve])})(J,Y)};return function(J,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function T(){this.constructor=J}xe(J,Y),J.prototype=Y===null?Object.create(Y):(T.prototype=Y.prototype,new T)}}()),ye=function(xe){function J(Y,T){var H=xe.call(this,"xhr-range-loader")||this;return H.TAG="RangeLoader",H._seekHandler=Y,H._config=T,H._needStash=!1,H._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],H._currentChunkSizeKB=384,H._currentSpeedNormalized=0,H._zeroSpeedChunkCount=0,H._xhr=null,H._speedSampler=new d,H._requestAbort=!1,H._waitForTotalLength=!1,H._totalLengthReceived=!1,H._currentRequestURL=null,H._currentRedirectedURL=null,H._currentRequestRange=null,H._totalLength=null,H._contentLength=null,H._receivedLength=0,H._lastTimeLoaded=0,H}return Te(J,xe),J.isSupported=function(){try{var Y=new XMLHttpRequest;return Y.open("GET","https://example.com",!0),Y.responseType="arraybuffer",Y.responseType==="arraybuffer"}catch(T){return D.a.w("RangeLoader",T.message),!1}},J.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),xe.prototype.destroy.call(this)},Object.defineProperty(J.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),J.prototype.open=function(Y,T){this._dataSource=Y,this._range=T,this._status=L.c.kConnecting;var H=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(H=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||H?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},J.prototype._openSubRange=function(){var Y=1024*this._currentChunkSizeKB,T=this._range.from+this._receivedLength,H=T+Y;this._contentLength!=null&&H-this._range.from>=this._contentLength&&(H=this._range.from+this._contentLength-1),this._currentRequestRange={from:T,to:H},this._internalOpen(this._dataSource,this._currentRequestRange)},J.prototype._internalOpen=function(Y,T){this._lastTimeLoaded=0;var H=Y.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?H=this._currentRedirectedURL:Y.redirectedURL!=null&&(H=Y.redirectedURL));var ve=this._seekHandler.getConfig(H,T);this._currentRequestURL=ve.url;var Ye=this._xhr=new XMLHttpRequest;if(Ye.open("GET",ve.url,!0),Ye.responseType="arraybuffer",Ye.onreadystatechange=this._onReadyStateChange.bind(this),Ye.onprogress=this._onProgress.bind(this),Ye.onload=this._onLoad.bind(this),Ye.onerror=this._onXhrError.bind(this),Y.withCredentials&&(Ye.withCredentials=!0),typeof ve.headers=="object"){var Me=ve.headers;for(var Ce in Me)Me.hasOwnProperty(Ce)&&Ye.setRequestHeader(Ce,Me[Ce])}if(typeof this._config.headers=="object"){Me=this._config.headers;for(var Ce in Me)Me.hasOwnProperty(Ce)&&Ye.setRequestHeader(Ce,Me[Ce])}Ye.send()},J.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=L.c.kComplete},J.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},J.prototype._onReadyStateChange=function(Y){var T=Y.target;if(T.readyState===2){if(T.responseURL!=null){var H=this._seekHandler.removeURLParameters(T.responseURL);T.responseURL!==this._currentRequestURL&&H!==this._currentRedirectedURL&&(this._currentRedirectedURL=H,this._onURLRedirect&&this._onURLRedirect(H))}if(T.status>=200&&T.status<=299){if(this._waitForTotalLength)return;this._status=L.c.kBuffering}else{if(this._status=L.c.kError,!this._onError)throw new N.d("RangeLoader: Http code invalid, "+T.status+" "+T.statusText);this._onError(L.b.HTTP_STATUS_CODE_INVALID,{code:T.status,msg:T.statusText})}}},J.prototype._onProgress=function(Y){if(this._status!==L.c.kError){if(this._contentLength===null){var T=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,T=!0;var H=Y.total;this._internalAbort(),H!=null&H!==0&&(this._totalLength=H)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,T)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var ve=Y.loaded-this._lastTimeLoaded;this._lastTimeLoaded=Y.loaded,this._speedSampler.addBytes(ve)}},J.prototype._normalizeSpeed=function(Y){var T=this._chunkSizeKBList,H=T.length-1,ve=0,Ye=0,Me=H;if(Y<T[0])return T[0];for(;Ye<=Me;){if((ve=Ye+Math.floor((Me-Ye)/2))===H||Y>=T[ve]&&Y<T[ve+1])return T[ve];T[ve]<Y?Ye=ve+1:Me=ve-1}},J.prototype._onLoad=function(Y){if(this._status!==L.c.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var T=this._speedSampler.lastSecondKBps;if(T===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(T=this._speedSampler.currentKBps)),T!==0){var H=this._normalizeSpeed(T);this._currentSpeedNormalized!==H&&(this._currentSpeedNormalized=H,this._currentChunkSizeKB=H)}var ve=Y.target.response,Ye=this._range.from+this._receivedLength;this._receivedLength+=ve.byteLength;var Me=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():Me=!0,this._onDataArrival&&this._onDataArrival(ve,Ye,this._receivedLength),Me&&(this._status=L.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},J.prototype._onXhrError=function(Y){this._status=L.c.kError;var T=0,H=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(T=L.b.EARLY_EOF,H={code:-1,msg:"RangeLoader meet Early-Eof"}):(T=L.b.EXCEPTION,H={code:-1,msg:Y.constructor.name+" "+Y.type}),!this._onError)throw new N.d(H.msg);this._onError(T,H)},J}(L.a),Se=function(){var xe=function(J,Y){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,H){T.__proto__=H}||function(T,H){for(var ve in H)Object.prototype.hasOwnProperty.call(H,ve)&&(T[ve]=H[ve])})(J,Y)};return function(J,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function T(){this.constructor=J}xe(J,Y),J.prototype=Y===null?Object.create(Y):(T.prototype=Y.prototype,new T)}}(),Le=function(xe){function J(){var Y=xe.call(this,"websocket-loader")||this;return Y.TAG="WebSocketLoader",Y._needStash=!0,Y._ws=null,Y._requestAbort=!1,Y._receivedLength=0,Y}return Se(J,xe),J.isSupported=function(){try{return self.WebSocket!==void 0}catch{return!1}},J.prototype.destroy=function(){this._ws&&this.abort(),xe.prototype.destroy.call(this)},J.prototype.open=function(Y){try{var T=this._ws=new self.WebSocket(Y.url);T.binaryType="arraybuffer",T.onopen=this._onWebSocketOpen.bind(this),T.onclose=this._onWebSocketClose.bind(this),T.onmessage=this._onWebSocketMessage.bind(this),T.onerror=this._onWebSocketError.bind(this),this._status=L.c.kConnecting}catch(ve){this._status=L.c.kError;var H={code:ve.code,msg:ve.message};if(!this._onError)throw new N.d(H.msg);this._onError(L.b.EXCEPTION,H)}},J.prototype.abort=function(){var Y=this._ws;!Y||Y.readyState!==0&&Y.readyState!==1||(this._requestAbort=!0,Y.close()),this._ws=null,this._status=L.c.kComplete},J.prototype._onWebSocketOpen=function(Y){this._status=L.c.kBuffering},J.prototype._onWebSocketClose=function(Y){this._requestAbort!==!0?(this._status=L.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},J.prototype._onWebSocketMessage=function(Y){var T=this;if(Y.data instanceof ArrayBuffer)this._dispatchArrayBuffer(Y.data);else if(Y.data instanceof Blob){var H=new FileReader;H.onload=function(){T._dispatchArrayBuffer(H.result)},H.readAsArrayBuffer(Y.data)}else{this._status=L.c.kError;var ve={code:-1,msg:"Unsupported WebSocket message type: "+Y.data.constructor.name};if(!this._onError)throw new N.d(ve.msg);this._onError(L.b.EXCEPTION,ve)}},J.prototype._dispatchArrayBuffer=function(Y){var T=Y,H=this._receivedLength;this._receivedLength+=T.byteLength,this._onDataArrival&&this._onDataArrival(T,H,this._receivedLength)},J.prototype._onWebSocketError=function(Y){this._status=L.c.kError;var T={code:Y.code,msg:Y.message};if(!this._onError)throw new N.d(T.msg);this._onError(L.b.EXCEPTION,T)},J}(L.a),oe=function(){function xe(J){this._zeroStart=J||!1}return xe.prototype.getConfig=function(J,Y){var T={};if(Y.from!==0||Y.to!==-1){var H=void 0;H=Y.to!==-1?"bytes=".concat(Y.from.toString(),"-").concat(Y.to.toString()):"bytes=".concat(Y.from.toString(),"-"),T.Range=H}else this._zeroStart&&(T.Range="bytes=0-");return{url:J,headers:T}},xe.prototype.removeURLParameters=function(J){return J},xe}(),Be=function(){function xe(J,Y){this._startName=J,this._endName=Y}return xe.prototype.getConfig=function(J,Y){var T=J;if(Y.from!==0||Y.to!==-1){var H=!0;T.indexOf("?")===-1&&(T+="?",H=!1),H&&(T+="&"),T+="".concat(this._startName,"=").concat(Y.from.toString()),Y.to!==-1&&(T+="&".concat(this._endName,"=").concat(Y.to.toString()))}return{url:T,headers:{}}},xe.prototype.removeURLParameters=function(J){var Y=J.split("?")[0],T=void 0,H=J.indexOf("?");H!==-1&&(T=J.substring(H+1));var ve="";if(T!=null&&T.length>0)for(var Ye=T.split("&"),Me=0;Me<Ye.length;Me++){var Ce=Ye[Me].split("="),tt=Me>0;Ce[0]!==this._startName&&Ce[0]!==this._endName&&(tt&&(ve+="&"),ve+=Ye[Me])}return ve.length===0?Y:Y+"?"+ve},xe}(),He=function(){function xe(J,Y,T){this.TAG="IOController",this._config=Y,this._extraData=T,this._stashInitialSize=65536,Y.stashInitialSize!=null&&Y.stashInitialSize>0&&(this._stashInitialSize=Y.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=Math.max(this._stashSize,3145728),this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,Y.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=J,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(J.url),this._refTotalLength=J.filesize?J.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new d,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return xe.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},xe.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},xe.prototype.isPaused=function(){return this._paused},Object.defineProperty(xe.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"extraData",{get:function(){return this._extraData},set:function(J){this._extraData=J},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(J){this._onDataArrival=J},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(J){this._onSeeked=J},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"onError",{get:function(){return this._onError},set:function(J){this._onError=J},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"onComplete",{get:function(){return this._onComplete},set:function(J){this._onComplete=J},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(J){this._onRedirect=J},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(J){this._onRecoveredEarlyEof=J},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"currentSpeed",{get:function(){return this._loaderClass===ye?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),xe.prototype._selectSeekHandler=function(){var J=this._config;if(J.seekType==="range")this._seekHandler=new oe(this._config.rangeLoadZeroStart);else if(J.seekType==="param"){var Y=J.seekParamStart||"bstart",T=J.seekParamEnd||"bend";this._seekHandler=new Be(Y,T)}else{if(J.seekType!=="custom")throw new N.b("Invalid seekType in config: ".concat(J.seekType));if(typeof J.customSeekHandler!="function")throw new N.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new J.customSeekHandler}},xe.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=Le;else if(V.isSupported())this._loaderClass=V;else if(v.isSupported())this._loaderClass=v;else{if(!ye.isSupported())throw new N.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=ye}},xe.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},xe.prototype.open=function(J){this._currentRange={from:0,to:-1},J&&(this._currentRange.from=J),this._speedSampler.reset(),J||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},xe.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},xe.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},xe.prototype.resume=function(){if(this._paused){this._paused=!1;var J=this._resumeFrom;this._resumeFrom=0,this._internalSeek(J,!0)}},xe.prototype.seek=function(J){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(J,!0)},xe.prototype._internalSeek=function(J,Y){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(Y),this._loader.destroy(),this._loader=null;var T={from:J,to:-1};this._currentRange={from:T.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,T),this._onSeeked&&this._onSeeked()},xe.prototype.updateUrl=function(J){if(!J||typeof J!="string"||J.length===0)throw new N.b("Url must be a non-empty string!");this._dataSource.url=J},xe.prototype._expandBuffer=function(J){for(var Y=this._stashSize;Y+1048576<J;)Y*=2;if((Y+=1048576)!==this._bufferSize){var T=new ArrayBuffer(Y);if(this._stashUsed>0){var H=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(T,0,Y).set(H,0)}this._stashBuffer=T,this._bufferSize=Y}},xe.prototype._normalizeSpeed=function(J){var Y=this._speedNormalizeList,T=Y.length-1,H=0,ve=0,Ye=T;if(J<Y[0])return Y[0];for(;ve<=Ye;){if((H=ve+Math.floor((Ye-ve)/2))===T||J>=Y[H]&&J<Y[H+1])return Y[H];Y[H]<J?ve=H+1:Ye=H-1}},xe.prototype._adjustStashSize=function(J){var Y=0;(Y=this._config.isLive?J/8:J<512?J:J>=512&&J<=1024?Math.floor(1.5*J):2*J)>8192&&(Y=8192);var T=1024*Y+1048576;this._bufferSize<T&&this._expandBuffer(T),this._stashSize=1024*Y},xe.prototype._dispatchChunks=function(J,Y){return this._currentRange.to=Y+J.byteLength-1,this._onDataArrival(J,Y)},xe.prototype._onURLRedirect=function(J){this._redirectedURL=J,this._onRedirect&&this._onRedirect(J)},xe.prototype._onContentLengthKnown=function(J){J&&this._fullRequestFlag&&(this._totalLength=J,this._fullRequestFlag=!1)},xe.prototype._onLoaderChunkArrival=function(J,Y,T){if(!this._onDataArrival)throw new N.a("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(J.byteLength);var H=this._speedSampler.lastSecondKBps;if(H!==0){var ve=this._normalizeSpeed(H);this._speedNormalized!==ve&&(this._speedNormalized=ve,this._adjustStashSize(ve))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=Y),this._stashUsed+J.byteLength<=this._stashSize)(Ce=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(J),this._stashUsed),this._stashUsed+=J.byteLength;else if(Ce=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var Ye=this._stashBuffer.slice(0,this._stashUsed);(tt=this._dispatchChunks(Ye,this._stashByteStart))<Ye.byteLength?tt>0&&(ct=new Uint8Array(Ye,tt),Ce.set(ct,0),this._stashUsed=ct.byteLength,this._stashByteStart+=tt):(this._stashUsed=0,this._stashByteStart+=tt),this._stashUsed+J.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+J.byteLength),Ce=new Uint8Array(this._stashBuffer,0,this._bufferSize)),Ce.set(new Uint8Array(J),this._stashUsed),this._stashUsed+=J.byteLength}else(tt=this._dispatchChunks(J,Y))<J.byteLength&&((Me=J.byteLength-tt)>this._bufferSize&&(this._expandBuffer(Me),Ce=new Uint8Array(this._stashBuffer,0,this._bufferSize)),Ce.set(new Uint8Array(J,tt),0),this._stashUsed+=Me,this._stashByteStart=Y+tt);else if(this._stashUsed===0){var Me;(tt=this._dispatchChunks(J,Y))<J.byteLength&&((Me=J.byteLength-tt)>this._bufferSize&&this._expandBuffer(Me),(Ce=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(J,tt),0),this._stashUsed+=Me,this._stashByteStart=Y+tt)}else{var Ce,tt;if(this._stashUsed+J.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+J.byteLength),(Ce=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(J),this._stashUsed),this._stashUsed+=J.byteLength,(tt=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&tt>0){var ct=new Uint8Array(this._stashBuffer,tt);Ce.set(ct,0)}this._stashUsed-=tt,this._stashByteStart+=tt}}},xe.prototype._flushStashBuffer=function(J){if(this._stashUsed>0){var Y=this._stashBuffer.slice(0,this._stashUsed),T=this._dispatchChunks(Y,this._stashByteStart),H=Y.byteLength-T;if(T<Y.byteLength){if(!J){if(T>0){var ve=new Uint8Array(this._stashBuffer,0,this._bufferSize),Ye=new Uint8Array(Y,T);ve.set(Ye,0),this._stashUsed=Ye.byteLength,this._stashByteStart+=T}return 0}D.a.w(this.TAG,"".concat(H," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,H}return 0},xe.prototype._onLoaderComplete=function(J,Y){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},xe.prototype._onLoaderError=function(J,Y){switch(D.a.e(this.TAG,"Loader error, code = ".concat(Y.code,", msg = ").concat(Y.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,J=L.b.UNRECOVERABLE_EARLY_EOF),J){case L.b.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var T=this._currentRange.to+1;return void(T<this._totalLength&&(D.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(T,!1)))}J=L.b.UNRECOVERABLE_EARLY_EOF;break;case L.b.UNRECOVERABLE_EARLY_EOF:case L.b.CONNECTING_TIMEOUT:case L.b.HTTP_STATUS_CODE_INVALID:case L.b.EXCEPTION:}if(!this._onError)throw new N.d("IOException: "+Y.msg);this._onError(J,Y)},xe}();I.a=He},function(S,I,_){var k=function(){function D(){}return D.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(d,L){return d.__proto__=L,d},Object.assign=Object.assign||function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");for(var L=Object(d),B=1;B<arguments.length;B++){var N=arguments[B];if(N!=null)for(var j in N)N.hasOwnProperty(j)&&(L[j]=N[j])}return L},String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(d,L){var B=L>0?0|L:0;return this.substring(B,B+d.length)===d}}),typeof self.Promise!="function"&&_(21).polyfill()},D}();k.install(),I.a=k},function(S,I,_){var k=_(9),D=_.n(k),d=_(0),L=_(5),B=_(7),N=_(3),j=function(){function V(K){this.TAG="MSEController",this._config=K,this._emitter=new D.a,this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onStartStreaming:this._onStartStreaming.bind(this),onEndStreaming:this._onEndStreaming.bind(this),onQualityChange:this._onQualityChange.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._useManagedMediaSource="ManagedMediaSource"in self&&!("MediaSource"in self),this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElementProxy=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]}}return V.prototype.destroy=function(){this._mediaSource&&this.shutdown(),this._mediaSourceObjectURL&&this.revokeObjectURL(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},V.prototype.on=function(K,v){this._emitter.addListener(K,v)},V.prototype.off=function(K,v){this._emitter.removeListener(K,v)},V.prototype.initialize=function(K){if(this._mediaSource)throw new N.a("MediaSource has been attached to an HTMLMediaElement!");this._useManagedMediaSource&&d.a.v(this.TAG,"Using ManagedMediaSource");var v=this._mediaSource=this._useManagedMediaSource?new self.ManagedMediaSource:new self.MediaSource;v.addEventListener("sourceopen",this.e.onSourceOpen),v.addEventListener("sourceended",this.e.onSourceEnded),v.addEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(v.addEventListener("startstreaming",this.e.onStartStreaming),v.addEventListener("endstreaming",this.e.onEndStreaming),v.addEventListener("qualitychange",this.e.onQualityChange)),this._mediaElementProxy=K},V.prototype.shutdown=function(){if(this._mediaSource){var K=this._mediaSource;for(var v in this._sourceBuffers){var z=this._pendingSegments[v];z.splice(0,z.length),this._pendingSegments[v]=null,this._pendingRemoveRanges[v]=null,this._lastInitSegments[v]=null;var Te=this._sourceBuffers[v];if(Te){if(K.readyState!=="closed"){try{K.removeSourceBuffer(Te)}catch(ye){d.a.e(this.TAG,ye.message)}Te.removeEventListener("error",this.e.onSourceBufferError),Te.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[v]=null,this._sourceBuffers[v]=null}}if(K.readyState==="open")try{K.endOfStream()}catch(ye){d.a.e(this.TAG,ye.message)}this._mediaElementProxy=null,K.removeEventListener("sourceopen",this.e.onSourceOpen),K.removeEventListener("sourceended",this.e.onSourceEnded),K.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(K.removeEventListener("startstreaming",this.e.onStartStreaming),K.removeEventListener("endstreaming",this.e.onEndStreaming),K.removeEventListener("qualitychange",this.e.onQualityChange)),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._mediaSource=null}},V.prototype.isManagedMediaSource=function(){return this._useManagedMediaSource},V.prototype.getObject=function(){if(!this._mediaSource)throw new N.a("MediaSource has not been initialized yet!");return this._mediaSource},V.prototype.getHandle=function(){if(!this._mediaSource)throw new N.a("MediaSource has not been initialized yet!");return this._mediaSource.handle},V.prototype.getObjectURL=function(){if(!this._mediaSource)throw new N.a("MediaSource has not been initialized yet!");return this._mediaSourceObjectURL==null&&(this._mediaSourceObjectURL=URL.createObjectURL(this._mediaSource)),this._mediaSourceObjectURL},V.prototype.revokeObjectURL=function(){this._mediaSourceObjectURL&&(URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},V.prototype.appendInitSegment=function(K,v){if(v===void 0&&(v=void 0),!this._mediaSource||this._mediaSource.readyState!=="open"||this._mediaSource.streaming===!1)return this._pendingSourceBufferInit.push(K),void this._pendingSegments[K.type].push(K);var z=K,Te="".concat(z.container);z.codec&&z.codec.length>0&&(z.codec==="opus"&&L.a.safari&&(z.codec="Opus"),Te+=";codecs=".concat(z.codec));var ye=!1;if(d.a.v(this.TAG,"Received Initialization Segment, mimeType: "+Te),this._lastInitSegments[z.type]=z,Te!==this._mimeTypes[z.type]){if(this._mimeTypes[z.type])d.a.v(this.TAG,"Notice: ".concat(z.type," mimeType changed, origin: ").concat(this._mimeTypes[z.type],", target: ").concat(Te));else{ye=!0;try{var Se=this._sourceBuffers[z.type]=this._mediaSource.addSourceBuffer(Te);Se.addEventListener("error",this.e.onSourceBufferError),Se.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(Le){return d.a.e(this.TAG,Le.message),void this._emitter.emit(B.a.ERROR,{code:Le.code,msg:Le.message})}}this._mimeTypes[z.type]=Te}v||this._pendingSegments[z.type].push(z),ye||this._sourceBuffers[z.type]&&!this._sourceBuffers[z.type].updating&&this._doAppendSegments(),L.a.safari&&z.container==="audio/mpeg"&&z.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=z.mediaDuration/1e3,this._updateMediaSourceDuration())},V.prototype.appendMediaSegment=function(K){var v=K;this._pendingSegments[v.type].push(v),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var z=this._sourceBuffers[v.type];!z||z.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},V.prototype.flush=function(){for(var K in this._sourceBuffers)if(this._sourceBuffers[K]){var v=this._sourceBuffers[K];if(this._mediaSource.readyState==="open")try{v.abort()}catch(oe){d.a.e(this.TAG,oe.message)}var z=this._pendingSegments[K];if(z.splice(0,z.length),this._mediaSource.readyState!=="closed"){for(var Te=0;Te<v.buffered.length;Te++){var ye=v.buffered.start(Te),Se=v.buffered.end(Te);this._pendingRemoveRanges[K].push({start:ye,end:Se})}if(v.updating||this._doRemoveRanges(),L.a.safari){var Le=this._lastInitSegments[K];Le&&(this._pendingSegments[K].push(Le),v.updating||this._doAppendSegments())}}}},V.prototype.endOfStream=function(){var K=this._mediaSource,v=this._sourceBuffers;K&&K.readyState==="open"?v.video&&v.video.updating||v.audio&&v.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,K.endOfStream()):K&&K.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},V.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var K=this._mediaElementProxy.getCurrentTime();for(var v in this._sourceBuffers){var z=this._sourceBuffers[v];if(z){var Te=z.buffered;if(Te.length>=1&&K-Te.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},V.prototype._doCleanupSourceBuffer=function(){var K=this._mediaElementProxy.getCurrentTime();for(var v in this._sourceBuffers){var z=this._sourceBuffers[v];if(z){for(var Te=z.buffered,ye=!1,Se=0;Se<Te.length;Se++){var Le=Te.start(Se),oe=Te.end(Se);if(Le<=K&&K<oe+3){if(K-Le>=this._config.autoCleanupMaxBackwardDuration){ye=!0;var Be=K-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[v].push({start:Le,end:Be})}}else oe<K&&(ye=!0,this._pendingRemoveRanges[v].push({start:Le,end:oe}))}ye&&!z.updating&&this._doRemoveRanges()}}},V.prototype._updateMediaSourceDuration=function(){var K=this._sourceBuffers;if(this._mediaElementProxy.getReadyState()!==0&&this._mediaSource.readyState==="open"&&!(K.video&&K.video.updating||K.audio&&K.audio.updating)){var v=this._mediaSource.duration,z=this._pendingMediaDuration;z>0&&(isNaN(v)||z>v)&&(d.a.v(this.TAG,"Update MediaSource duration from ".concat(v," to ").concat(z)),this._mediaSource.duration=z),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},V.prototype._doRemoveRanges=function(){for(var K in this._pendingRemoveRanges)if(this._sourceBuffers[K]&&!this._sourceBuffers[K].updating)for(var v=this._sourceBuffers[K],z=this._pendingRemoveRanges[K];z.length&&!v.updating;){var Te=z.shift();v.remove(Te.start,Te.end)}},V.prototype._doAppendSegments=function(){var K=this._pendingSegments;for(var v in K)if(this._sourceBuffers[v]&&!this._sourceBuffers[v].updating&&this._mediaSource.streaming!==!1&&K[v].length>0){var z=K[v].shift();if(typeof z.timestampOffset=="number"&&isFinite(z.timestampOffset)){var Te=this._sourceBuffers[v].timestampOffset,ye=z.timestampOffset/1e3;Math.abs(Te-ye)>.1&&(d.a.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(Te," to ").concat(ye)),this._sourceBuffers[v].timestampOffset=ye),delete z.timestampOffset}if(!z.data||z.data.byteLength===0)continue;try{this._sourceBuffers[v].appendBuffer(z.data),this._isBufferFull=!1}catch(Se){this._pendingSegments[v].unshift(z),Se.code===22?(this._isBufferFull||this._emitter.emit(B.a.BUFFER_FULL),this._isBufferFull=!0):(d.a.e(this.TAG,Se.message),this._emitter.emit(B.a.ERROR,{code:Se.code,msg:Se.message}))}}},V.prototype._onSourceOpen=function(){if(d.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var K=this._pendingSourceBufferInit;K.length;){var v=K.shift();this.appendInitSegment(v,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(B.a.SOURCE_OPEN)},V.prototype._onStartStreaming=function(){d.a.v(this.TAG,"ManagedMediaSource onStartStreaming"),this._emitter.emit(B.a.START_STREAMING)},V.prototype._onEndStreaming=function(){d.a.v(this.TAG,"ManagedMediaSource onEndStreaming"),this._emitter.emit(B.a.END_STREAMING)},V.prototype._onQualityChange=function(){d.a.v(this.TAG,"ManagedMediaSource onQualityChange")},V.prototype._onSourceEnded=function(){d.a.v(this.TAG,"MediaSource onSourceEnded")},V.prototype._onSourceClose=function(){d.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(this._mediaSource.removeEventListener("startstreaming",this.e.onStartStreaming),this._mediaSource.removeEventListener("endstreaming",this.e.onEndStreaming),this._mediaSource.removeEventListener("qualitychange",this.e.onQualityChange)))},V.prototype._hasPendingSegments=function(){var K=this._pendingSegments;return K.video.length>0||K.audio.length>0},V.prototype._hasPendingRemoveRanges=function(){var K=this._pendingRemoveRanges;return K.video.length>0||K.audio.length>0},V.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(B.a.UPDATE_END)},V.prototype._onSourceBufferError=function(K){d.a.e(this.TAG,"SourceBuffer Error: ".concat(K))},V}();I.a=j},function(S,I,_){var k=_(9),D=_.n(k),d=_(18),L=_.n(d),B=_(0),N=_(8),j=_(13),V=_(1),K=(_(19),_(12)),v=function(){function z(Te,ye){if(this.TAG="Transmuxer",this._emitter=new D.a,ye.enableWorker&&typeof Worker<"u")try{this._worker=L()(19),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[Te,ye]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},N.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:N.a.getConfig()})}catch{B.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new j.a(Te,ye)}else this._controller=new j.a(Te,ye);if(this._controller){var Se=this._controller;Se.on(V.a.IO_ERROR,this._onIOError.bind(this)),Se.on(V.a.DEMUX_ERROR,this._onDemuxError.bind(this)),Se.on(V.a.INIT_SEGMENT,this._onInitSegment.bind(this)),Se.on(V.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),Se.on(V.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),Se.on(V.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),Se.on(V.a.MEDIA_INFO,this._onMediaInfo.bind(this)),Se.on(V.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),Se.on(V.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),Se.on(V.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),Se.on(V.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,this._onSynchronousKLVMetadataArrived.bind(this)),Se.on(V.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,this._onAsynchronousKLVMetadataArrived.bind(this)),Se.on(V.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),Se.on(V.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),Se.on(V.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),Se.on(V.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),Se.on(V.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),Se.on(V.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return z.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),N.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},z.prototype.on=function(Te,ye){this._emitter.addListener(Te,ye)},z.prototype.off=function(Te,ye){this._emitter.removeListener(Te,ye)},z.prototype.hasWorker=function(){return this._worker!=null},z.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},z.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},z.prototype.seek=function(Te){this._worker?this._worker.postMessage({cmd:"seek",param:Te}):this._controller.seek(Te)},z.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},z.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},z.prototype._onInitSegment=function(Te,ye){var Se=this;Promise.resolve().then(function(){Se._emitter.emit(V.a.INIT_SEGMENT,Te,ye)})},z.prototype._onMediaSegment=function(Te,ye){var Se=this;Promise.resolve().then(function(){Se._emitter.emit(V.a.MEDIA_SEGMENT,Te,ye)})},z.prototype._onLoadingComplete=function(){var Te=this;Promise.resolve().then(function(){Te._emitter.emit(V.a.LOADING_COMPLETE)})},z.prototype._onRecoveredEarlyEof=function(){var Te=this;Promise.resolve().then(function(){Te._emitter.emit(V.a.RECOVERED_EARLY_EOF)})},z.prototype._onMediaInfo=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.MEDIA_INFO,Te)})},z.prototype._onMetaDataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.METADATA_ARRIVED,Te)})},z.prototype._onScriptDataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.SCRIPTDATA_ARRIVED,Te)})},z.prototype._onTimedID3MetadataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.TIMED_ID3_METADATA_ARRIVED,Te)})},z.prototype._onSynchronousKLVMetadataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,Te)})},z.prototype._onAsynchronousKLVMetadataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,Te)})},z.prototype._onSMPTE2038MetadataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.SMPTE2038_METADATA_ARRIVED,Te)})},z.prototype._onSCTE35MetadataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.SCTE35_METADATA_ARRIVED,Te)})},z.prototype._onPESPrivateDataDescriptor=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.PES_PRIVATE_DATA_DESCRIPTOR,Te)})},z.prototype._onPESPrivateDataArrived=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.PES_PRIVATE_DATA_ARRIVED,Te)})},z.prototype._onStatisticsInfo=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.STATISTICS_INFO,Te)})},z.prototype._onIOError=function(Te,ye){var Se=this;Promise.resolve().then(function(){Se._emitter.emit(V.a.IO_ERROR,Te,ye)})},z.prototype._onDemuxError=function(Te,ye){var Se=this;Promise.resolve().then(function(){Se._emitter.emit(V.a.DEMUX_ERROR,Te,ye)})},z.prototype._onRecommendSeekpoint=function(Te){var ye=this;Promise.resolve().then(function(){ye._emitter.emit(V.a.RECOMMEND_SEEKPOINT,Te)})},z.prototype._onLoggingConfigChanged=function(Te){this._worker&&this._worker.postMessage({cmd:"logging_config",param:Te})},z.prototype._onWorkerMessage=function(Te){var ye=Te.data,Se=ye.data;if(ye.msg==="destroyed"||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(ye.msg){case V.a.INIT_SEGMENT:case V.a.MEDIA_SEGMENT:this._emitter.emit(ye.msg,Se.type,Se.data);break;case V.a.LOADING_COMPLETE:case V.a.RECOVERED_EARLY_EOF:this._emitter.emit(ye.msg);break;case V.a.MEDIA_INFO:Object.setPrototypeOf(Se,K.a.prototype),this._emitter.emit(ye.msg,Se);break;case V.a.METADATA_ARRIVED:case V.a.SCRIPTDATA_ARRIVED:case V.a.TIMED_ID3_METADATA_ARRIVED:case V.a.SYNCHRONOUS_KLV_METADATA_ARRIVED:case V.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED:case V.a.SMPTE2038_METADATA_ARRIVED:case V.a.SCTE35_METADATA_ARRIVED:case V.a.PES_PRIVATE_DATA_DESCRIPTOR:case V.a.PES_PRIVATE_DATA_ARRIVED:case V.a.STATISTICS_INFO:this._emitter.emit(ye.msg,Se);break;case V.a.IO_ERROR:case V.a.DEMUX_ERROR:this._emitter.emit(ye.msg,Se.type,Se.info);break;case V.a.RECOMMEND_SEEKPOINT:this._emitter.emit(ye.msg,Se);break;case"logcat_callback":B.a.emitter.emit("log",Se.type,Se.logcat)}},z}();I.a=v},function(S,I,_){function k(B){var N={};function j(K){if(N[K])return N[K].exports;var v=N[K]={i:K,l:!1,exports:{}};return B[K].call(v.exports,v,v.exports,j),v.l=!0,v.exports}j.m=B,j.c=N,j.i=function(K){return K},j.d=function(K,v,z){j.o(K,v)||Object.defineProperty(K,v,{configurable:!1,enumerable:!0,get:z})},j.r=function(K){Object.defineProperty(K,"__esModule",{value:!0})},j.n=function(K){var v=K&&K.__esModule?function(){return K.default}:function(){return K};return j.d(v,"a",v),v},j.o=function(K,v){return Object.prototype.hasOwnProperty.call(K,v)},j.p="/",j.oe=function(K){throw console.error(K),K};var V=j(j.s=ENTRY_MODULE);return V.default||V}function D(B){return(B+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function d(B,N,j){var V={};V[j]=[];var K=N.toString(),v=K.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!v)return V;for(var z,Te=v[1],ye=new RegExp("(\\\\n|\\W)"+D(Te)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");z=ye.exec(K);)z[3]!=="dll-reference"&&V[j].push(z[3]);for(ye=new RegExp("\\("+D(Te)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");z=ye.exec(K);)B[z[2]]||(V[j].push(z[1]),B[z[2]]=_(z[1]).m),V[z[2]]=V[z[2]]||[],V[z[2]].push(z[4]);for(var Se,Le=Object.keys(V),oe=0;oe<Le.length;oe++)for(var Be=0;Be<V[Le[oe]].length;Be++)Se=V[Le[oe]][Be],isNaN(1*Se)||(V[Le[oe]][Be]=1*V[Le[oe]][Be]);return V}function L(B){return Object.keys(B).reduce(function(N,j){return N||B[j].length>0},!1)}S.exports=function(B,N){N=N||{};var j={main:_.m},V=N.all?{main:Object.keys(j.main)}:function(ye,Se){for(var Le={main:[Se]},oe={main:[]},Be={main:{}};L(Le);)for(var He=Object.keys(Le),xe=0;xe<He.length;xe++){var J=He[xe],Y=Le[J].pop();if(Be[J]=Be[J]||{},!Be[J][Y]&&ye[J][Y]){Be[J][Y]=!0,oe[J]=oe[J]||[],oe[J].push(Y);for(var T=d(ye,ye[J][Y],J),H=Object.keys(T),ve=0;ve<H.length;ve++)Le[H[ve]]=Le[H[ve]]||[],Le[H[ve]]=Le[H[ve]].concat(T[H[ve]])}}return oe}(j,B),K="";Object.keys(V).filter(function(ye){return ye!=="main"}).forEach(function(ye){for(var Se=0;V[ye][Se];)Se++;V[ye].push(Se),j[ye][Se]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",K=K+"var "+ye+" = ("+k.toString().replace("ENTRY_MODULE",JSON.stringify(Se))+")({"+V[ye].map(function(Le){return JSON.stringify(Le)+": "+j[ye][Le].toString()}).join(",")+`});
`}),K=K+"new (("+k.toString().replace("ENTRY_MODULE",JSON.stringify(B))+")({"+V.main.map(function(ye){return JSON.stringify(ye)+": "+j.main[ye].toString()}).join(",")+"}))(self);";var v=new self.Blob([K],{type:"text/javascript"});if(N.bare)return v;var z=(self.URL||self.webkitURL||self.mozURL||self.msURL).createObjectURL(v),Te=new self.Worker(z);return Te.objectURL=z,Te}},function(S,I,_){_.r(I),_(0);var k=_(8),D=_(15),d=_(13),L=_(1);I.default=function(B){var N=null,j=(function(Me,Ce){B.postMessage({msg:"logcat_callback",data:{type:Me,logcat:Ce}})}).bind(this);function V(Me,Ce){var tt={msg:L.a.INIT_SEGMENT,data:{type:Me,data:Ce}};B.postMessage(tt,[Ce.data])}function K(Me,Ce){var tt={msg:L.a.MEDIA_SEGMENT,data:{type:Me,data:Ce}};B.postMessage(tt,[Ce.data])}function v(){var Me={msg:L.a.LOADING_COMPLETE};B.postMessage(Me)}function z(){var Me={msg:L.a.RECOVERED_EARLY_EOF};B.postMessage(Me)}function Te(Me){var Ce={msg:L.a.MEDIA_INFO,data:Me};B.postMessage(Ce)}function ye(Me){var Ce={msg:L.a.METADATA_ARRIVED,data:Me};B.postMessage(Ce)}function Se(Me){var Ce={msg:L.a.SCRIPTDATA_ARRIVED,data:Me};B.postMessage(Ce)}function Le(Me){var Ce={msg:L.a.TIMED_ID3_METADATA_ARRIVED,data:Me};B.postMessage(Ce)}function oe(Me){var Ce={msg:L.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,data:Me};B.postMessage(Ce)}function Be(Me){var Ce={msg:L.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,data:Me};B.postMessage(Ce)}function He(Me){var Ce={msg:L.a.SMPTE2038_METADATA_ARRIVED,data:Me};B.postMessage(Ce)}function xe(Me){var Ce={msg:L.a.SCTE35_METADATA_ARRIVED,data:Me};B.postMessage(Ce)}function J(Me){var Ce={msg:L.a.PES_PRIVATE_DATA_DESCRIPTOR,data:Me};B.postMessage(Ce)}function Y(Me){var Ce={msg:L.a.PES_PRIVATE_DATA_ARRIVED,data:Me};B.postMessage(Ce)}function T(Me){var Ce={msg:L.a.STATISTICS_INFO,data:Me};B.postMessage(Ce)}function H(Me,Ce){B.postMessage({msg:L.a.IO_ERROR,data:{type:Me,info:Ce}})}function ve(Me,Ce){B.postMessage({msg:L.a.DEMUX_ERROR,data:{type:Me,info:Ce}})}function Ye(Me){B.postMessage({msg:L.a.RECOMMEND_SEEKPOINT,data:Me})}D.a.install(),B.addEventListener("message",function(Me){switch(Me.data.cmd){case"init":(N=new d.a(Me.data.param[0],Me.data.param[1])).on(L.a.IO_ERROR,H.bind(this)),N.on(L.a.DEMUX_ERROR,ve.bind(this)),N.on(L.a.INIT_SEGMENT,V.bind(this)),N.on(L.a.MEDIA_SEGMENT,K.bind(this)),N.on(L.a.LOADING_COMPLETE,v.bind(this)),N.on(L.a.RECOVERED_EARLY_EOF,z.bind(this)),N.on(L.a.MEDIA_INFO,Te.bind(this)),N.on(L.a.METADATA_ARRIVED,ye.bind(this)),N.on(L.a.SCRIPTDATA_ARRIVED,Se.bind(this)),N.on(L.a.TIMED_ID3_METADATA_ARRIVED,Le.bind(this)),N.on(L.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,oe.bind(this)),N.on(L.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,Be.bind(this)),N.on(L.a.SMPTE2038_METADATA_ARRIVED,He.bind(this)),N.on(L.a.SCTE35_METADATA_ARRIVED,xe.bind(this)),N.on(L.a.PES_PRIVATE_DATA_DESCRIPTOR,J.bind(this)),N.on(L.a.PES_PRIVATE_DATA_ARRIVED,Y.bind(this)),N.on(L.a.STATISTICS_INFO,T.bind(this)),N.on(L.a.RECOMMEND_SEEKPOINT,Ye.bind(this));break;case"destroy":N&&(N.destroy(),N=null),B.postMessage({msg:"destroyed"});break;case"start":N.start();break;case"stop":N.stop();break;case"seek":N.seek(Me.data.param);break;case"pause":N.pause();break;case"resume":N.resume();break;case"logging_config":var Ce=Me.data.param;k.a.applyConfig(Ce),Ce.enableCallback===!0?k.a.addLogListener(j):k.a.removeLogListener(j)}})}},function(S,I,_){S.exports=_(25).default},function(S,I,_){(function(k,D){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var d;d=function(){function L(ce){return typeof ce=="function"}var B=Array.isArray?Array.isArray:function(ce){return Object.prototype.toString.call(ce)==="[object Array]"},N=0,j=void 0,V=void 0,K=function(ce,ke){oe[N]=ce,oe[N+1]=ke,(N+=2)===2&&(V?V(Be):T())},v=typeof window<"u"?window:void 0,z=v||{},Te=z.MutationObserver||z.WebKitMutationObserver,ye=typeof self>"u"&&k!==void 0&&{}.toString.call(k)==="[object process]",Se=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function Le(){var ce=setTimeout;return function(){return ce(Be,1)}}var oe=new Array(1e3);function Be(){for(var ce=0;ce<N;ce+=2)(0,oe[ce])(oe[ce+1]),oe[ce]=void 0,oe[ce+1]=void 0;N=0}var He,xe,J,Y,T=void 0;function H(ce,ke){var Pe=this,Ke=new this.constructor(Me);Ke[Ye]===void 0&&X(Ke);var at=Pe._state;if(at){var G=arguments[at-1];K(function(){return Fe(at,Ke,G,Pe._result)})}else Z(Pe,Ke,ce,ke);return Ke}function ve(ce){if(ce&&typeof ce=="object"&&ce.constructor===this)return ce;var ke=new this(Me);return tt(ke,ce),ke}ye?T=function(){return k.nextTick(Be)}:Te?(xe=0,J=new Te(Be),Y=document.createTextNode(""),J.observe(Y,{characterData:!0}),T=function(){Y.data=xe=++xe%2}):Se?((He=new MessageChannel).port1.onmessage=Be,T=function(){return He.port2.postMessage(0)}):T=v===void 0?function(){try{var ce=Function("return this")().require("vertx");return(j=ce.runOnLoop||ce.runOnContext)!==void 0?function(){j(Be)}:Le()}catch{return Le()}}():Le();var Ye=Math.random().toString(36).substring(2);function Me(){}function Ce(ce,ke,Pe){ke.constructor===ce.constructor&&Pe===H&&ke.constructor.resolve===ve?function(Ke,at){at._state===1?it(Ke,at._result):at._state===2?de(Ke,at._result):Z(at,void 0,function(G){return tt(Ke,G)},function(G){return de(Ke,G)})}(ce,ke):Pe===void 0?it(ce,ke):L(Pe)?function(Ke,at,G){K(function(ue){var Ae=!1,je=function(Oe,Ve,st,$e){try{Oe.call(Ve,st,$e)}catch(Ne){return Ne}}(G,at,function(Oe){Ae||(Ae=!0,at!==Oe?tt(ue,Oe):it(ue,Oe))},function(Oe){Ae||(Ae=!0,de(ue,Oe))},ue._label);!Ae&&je&&(Ae=!0,de(ue,je))},Ke)}(ce,ke,Pe):it(ce,ke)}function tt(ce,ke){if(ce===ke)de(ce,new TypeError("You cannot resolve a promise with itself"));else if(at=typeof(Ke=ke),Ke===null||at!=="object"&&at!=="function")it(ce,ke);else{var Pe=void 0;try{Pe=ke.then}catch(G){return void de(ce,G)}Ce(ce,ke,Pe)}var Ke,at}function ct(ce){ce._onerror&&ce._onerror(ce._result),we(ce)}function it(ce,ke){ce._state===void 0&&(ce._result=ke,ce._state=1,ce._subscribers.length!==0&&K(we,ce))}function de(ce,ke){ce._state===void 0&&(ce._state=2,ce._result=ke,K(ct,ce))}function Z(ce,ke,Pe,Ke){var at=ce._subscribers,G=at.length;ce._onerror=null,at[G]=ke,at[G+1]=Pe,at[G+2]=Ke,G===0&&ce._state&&K(we,ce)}function we(ce){var ke=ce._subscribers,Pe=ce._state;if(ke.length!==0){for(var Ke=void 0,at=void 0,G=ce._result,ue=0;ue<ke.length;ue+=3)Ke=ke[ue],at=ke[ue+Pe],Ke?Fe(Pe,Ke,at,G):at(G);ce._subscribers.length=0}}function Fe(ce,ke,Pe,Ke){var at=L(Pe),G=void 0,ue=void 0,Ae=!0;if(at){try{G=Pe(Ke)}catch(je){Ae=!1,ue=je}if(ke===G)return void de(ke,new TypeError("A promises callback cannot return that same promise."))}else G=Ke;ke._state!==void 0||(at&&Ae?tt(ke,G):Ae===!1?de(ke,ue):ce===1?it(ke,G):ce===2&&de(ke,G))}var Et=0;function X(ce){ce[Ye]=Et++,ce._state=void 0,ce._result=void 0,ce._subscribers=[]}var zt=function(){function ce(ke,Pe){this._instanceConstructor=ke,this.promise=new ke(Me),this.promise[Ye]||X(this.promise),B(Pe)?(this.length=Pe.length,this._remaining=Pe.length,this._result=new Array(this.length),this.length===0?it(this.promise,this._result):(this.length=this.length||0,this._enumerate(Pe),this._remaining===0&&it(this.promise,this._result))):de(this.promise,new Error("Array Methods must be provided an Array"))}return ce.prototype._enumerate=function(ke){for(var Pe=0;this._state===void 0&&Pe<ke.length;Pe++)this._eachEntry(ke[Pe],Pe)},ce.prototype._eachEntry=function(ke,Pe){var Ke=this._instanceConstructor,at=Ke.resolve;if(at===ve){var G=void 0,ue=void 0,Ae=!1;try{G=ke.then}catch(Oe){Ae=!0,ue=Oe}if(G===H&&ke._state!==void 0)this._settledAt(ke._state,Pe,ke._result);else if(typeof G!="function")this._remaining--,this._result[Pe]=ke;else if(Ke===Ct){var je=new Ke(Me);Ae?de(je,ue):Ce(je,ke,G),this._willSettleAt(je,Pe)}else this._willSettleAt(new Ke(function(Oe){return Oe(ke)}),Pe)}else this._willSettleAt(at(ke),Pe)},ce.prototype._settledAt=function(ke,Pe,Ke){var at=this.promise;at._state===void 0&&(this._remaining--,ke===2?de(at,Ke):this._result[Pe]=Ke),this._remaining===0&&it(at,this._result)},ce.prototype._willSettleAt=function(ke,Pe){var Ke=this;Z(ke,void 0,function(at){return Ke._settledAt(1,Pe,at)},function(at){return Ke._settledAt(2,Pe,at)})},ce}(),Ct=function(){function ce(ke){this[Ye]=Et++,this._result=this._state=void 0,this._subscribers=[],Me!==ke&&(typeof ke!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ce?function(Pe,Ke){try{Ke(function(at){tt(Pe,at)},function(at){de(Pe,at)})}catch(at){de(Pe,at)}}(this,ke):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return ce.prototype.catch=function(ke){return this.then(null,ke)},ce.prototype.finally=function(ke){var Pe=this.constructor;return L(ke)?this.then(function(Ke){return Pe.resolve(ke()).then(function(){return Ke})},function(Ke){return Pe.resolve(ke()).then(function(){throw Ke})}):this.then(ke,ke)},ce}();return Ct.prototype.then=H,Ct.all=function(ce){return new zt(this,ce).promise},Ct.race=function(ce){var ke=this;return B(ce)?new ke(function(Pe,Ke){for(var at=ce.length,G=0;G<at;G++)ke.resolve(ce[G]).then(Pe,Ke)}):new ke(function(Pe,Ke){return Ke(new TypeError("You must pass an array to race."))})},Ct.resolve=ve,Ct.reject=function(ce){var ke=new this(Me);return de(ke,ce),ke},Ct._setScheduler=function(ce){V=ce},Ct._setAsap=function(ce){K=ce},Ct._asap=K,Ct.polyfill=function(){var ce=void 0;if(D!==void 0)ce=D;else if(typeof self<"u")ce=self;else try{ce=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ke=ce.Promise;if(ke){var Pe=null;try{Pe=Object.prototype.toString.call(ke.resolve())}catch{}if(Pe==="[object Promise]"&&!ke.cast)return}ce.Promise=Ct},Ct.Promise=Ct,Ct},S.exports=d()}).call(this,_(22),_(23))},function(S,I){var _,k,D=S.exports={};function d(){throw new Error("setTimeout has not been defined")}function L(){throw new Error("clearTimeout has not been defined")}function B(Se){if(_===setTimeout)return setTimeout(Se,0);if((_===d||!_)&&setTimeout)return _=setTimeout,setTimeout(Se,0);try{return _(Se,0)}catch{try{return _.call(null,Se,0)}catch{return _.call(this,Se,0)}}}(function(){try{_=typeof setTimeout=="function"?setTimeout:d}catch{_=d}try{k=typeof clearTimeout=="function"?clearTimeout:L}catch{k=L}})();var N,j=[],V=!1,K=-1;function v(){V&&N&&(V=!1,N.length?j=N.concat(j):K=-1,j.length&&z())}function z(){if(!V){var Se=B(v);V=!0;for(var Le=j.length;Le;){for(N=j,j=[];++K<Le;)N&&N[K].run();K=-1,Le=j.length}N=null,V=!1,function(oe){if(k===clearTimeout)return clearTimeout(oe);if((k===L||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(oe);try{k(oe)}catch{try{return k.call(null,oe)}catch{return k.call(this,oe)}}}(Se)}}function Te(Se,Le){this.fun=Se,this.array=Le}function ye(){}D.nextTick=function(Se){var Le=new Array(arguments.length-1);if(arguments.length>1)for(var oe=1;oe<arguments.length;oe++)Le[oe-1]=arguments[oe];j.push(new Te(Se,Le)),j.length!==1||V||B(z)},Te.prototype.run=function(){this.fun.apply(null,this.array)},D.title="browser",D.browser=!0,D.env={},D.argv=[],D.version="",D.versions={},D.on=ye,D.addListener=ye,D.once=ye,D.off=ye,D.removeListener=ye,D.removeAllListeners=ye,D.emit=ye,D.prependListener=ye,D.prependOnceListener=ye,D.listeners=function(Se){return[]},D.binding=function(Se){throw new Error("process.binding is not supported")},D.cwd=function(){return"/"},D.chdir=function(Se){throw new Error("process.chdir is not supported")},D.umask=function(){return 0}},function(S,I){var _;_=function(){return this}();try{_=_||new Function("return this")()}catch{typeof window=="object"&&(_=window)}S.exports=_},function(S,I,_){_.r(I);var k=_(0),D=_(8),d=_(3),L=_(7),B=_(16),N=_(17),j=_(1),V=_(4),K=_(10);I.default=function(v){var z="PlayerEngineWorker",Te=(function(de,Z){v.postMessage({msg:"logcat_callback",type:de,logcat:Z})}).bind(void 0),ye=null,Se=null,Le=null,oe=null,Be=!1,He=!1,xe=0,J=0,Y=!1;function T(){Le&&(Le.shutdown(),Le.destroy(),Le=null)}function H(){if(ye==null||Se==null)throw new d.a("Worker not initialized");if(oe)throw new d.a("Transmuxer has been initialized");He||(!Se.deferLoadAfterSourceOpen||Be?((oe=new N.a(ye,Se)).on(j.a.INIT_SEGMENT,function(de,Z){Le.appendInitSegment(Z)}),oe.on(j.a.MEDIA_SEGMENT,function(de,Z){Le.appendMediaSegment(Z),v.postMessage({msg:"buffered_position_changed",buffered_position_milliseconds:Z.info.endDts})}),oe.on(j.a.LOADING_COMPLETE,function(){Le.endOfStream(),v.postMessage({msg:"player_event",event:V.a.LOADING_COMPLETE})}),oe.on(j.a.RECOVERED_EARLY_EOF,function(){v.postMessage({msg:"player_event",event:V.a.RECOVERED_EARLY_EOF})}),oe.on(j.a.IO_ERROR,function(de,Z){v.postMessage({msg:"player_event",event:V.a.ERROR,error_type:K.b.NETWORK_ERROR,error_detail:de,info:Z})}),oe.on(j.a.DEMUX_ERROR,function(de,Z){v.postMessage({msg:"player_event",event:V.a.ERROR,error_type:K.b.MEDIA_ERROR,error_detail:de,info:Z})}),oe.on(j.a.MEDIA_INFO,function(de){ct(j.a.MEDIA_INFO,de)}),oe.on(j.a.STATISTICS_INFO,function(de){ct(j.a.STATISTICS_INFO,de)}),oe.on(j.a.RECOMMEND_SEEKPOINT,function(de){(function(Z){v.postMessage({msg:"transmuxing_event",event:j.a.RECOMMEND_SEEKPOINT,milliseconds:Z})})(de)}),oe.on(j.a.METADATA_ARRIVED,function(de){it(V.a.METADATA_ARRIVED,de)}),oe.on(j.a.SCRIPTDATA_ARRIVED,function(de){it(V.a.SCRIPTDATA_ARRIVED,de)}),oe.on(j.a.TIMED_ID3_METADATA_ARRIVED,function(de){it(V.a.TIMED_ID3_METADATA_ARRIVED,de)}),oe.on(j.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function(de){it(V.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,de)}),oe.on(j.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function(de){it(V.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,de)}),oe.on(j.a.SMPTE2038_METADATA_ARRIVED,function(de){it(V.a.SMPTE2038_METADATA_ARRIVED,de)}),oe.on(j.a.SCTE35_METADATA_ARRIVED,function(de){it(V.a.SCTE35_METADATA_ARRIVED,de)}),oe.on(j.a.PES_PRIVATE_DATA_DESCRIPTOR,function(de){it(V.a.PES_PRIVATE_DATA_DESCRIPTOR,de)}),oe.on(j.a.PES_PRIVATE_DATA_ARRIVED,function(de){it(V.a.PES_PRIVATE_DATA_ARRIVED,de)}),oe.open()):He=!0)}function ve(){Le&&Le.flush(),oe&&(oe.close(),oe.destroy(),oe=null)}function Ye(){Be=!0,He&&(He=!1,H())}function Me(){v.postMessage({msg:"mse_event",event:L.a.UPDATE_END})}function Ce(){k.a.v(z,"MSE SourceBuffer is full, report to main thread"),v.postMessage({msg:"mse_event",event:L.a.BUFFER_FULL})}function tt(de){v.postMessage({msg:"player_event",event:V.a.ERROR,error_type:K.b.MEDIA_ERROR,error_detail:K.b.MEDIA_MSE_ERROR,info:de})}function ct(de,Z){v.postMessage({msg:"transmuxing_event",event:de,info:Z})}function it(de,Z){v.postMessage({msg:"player_event",event:de,extraData:Z})}v.addEventListener("message",function(de){if(!Y){var Z=de.data;switch(Z.cmd){case"logging_config":var we=Z;D.a.applyConfig(we.logging_config),we.logging_config.enableCallback===!0?D.a.addLogListener(Te):D.a.removeLogListener(Te);break;case"init":ye=(we=Z).media_data_source,Se=we.config;break;case"destroy":(function(){oe&&ve(),Le&&T(),Y=!0,v.postMessage({msg:"destroyed"})})();break;case"initialize_mse":(function(){k.a.v(z,"Initializing MediaSource in DedicatedWorker"),(Le=new B.a(Se)).on(L.a.SOURCE_OPEN,Ye.bind(this)),Le.on(L.a.UPDATE_END,Me.bind(this)),Le.on(L.a.BUFFER_FULL,Ce.bind(this)),Le.on(L.a.ERROR,tt.bind(this)),Le.initialize({getCurrentTime:function(){return xe},getReadyState:function(){return J}});var Fe=Le.getHandle();v.postMessage({msg:"mse_init",handle:Fe},[Fe])})();break;case"shutdown_mse":T();break;case"load":H();break;case"unload":ve();break;case"unbuffered_seek":we=Z,Le.flush(),oe.seek(we.milliseconds);break;case"timeupdate":xe=(we=Z).current_time;break;case"readystatechange":J=(we=Z).ready_state;break;case"pause_transmuxer":oe.pause();break;case"resume_transmuxer":oe.resume()}}})}},function(S,I,_){_.r(I);var k=_(15),D=_(14),d={enableWorker:!1,enableWorkerForMSE:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyChasingOnPaused:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,liveSync:!1,liveSyncMaxLatency:1.2,liveSyncTargetLatency:.8,liveSyncPlaybackRate:1.2,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function L(){return Object.assign({},d)}var B=function(){function de(){}return de.supportMSEH264Playback=function(){var Z=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),we=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');return Z||we},de.supportMSEH265Playback=function(){var Z=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"'),we=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"');return Z||we},de.supportNetworkStreamIO=function(){var Z=new D.a({},L()),we=Z.loaderType;return Z.destroy(),we=="fetch-stream-loader"||we=="xhr-moz-chunked-loader"},de.getNetworkLoaderTypeName=function(){var Z=new D.a({},L()),we=Z.loaderType;return Z.destroy(),we},de.supportNativeMediaPlayback=function(Z){de.videoElement==null&&(de.videoElement=window.document.createElement("video"));var we=de.videoElement.canPlayType(Z);return we==="probably"||we=="maybe"},de.getFeatureList=function(){var Z={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return Z.msePlayback=de.supportMSEH264Playback(),Z.networkStreamIO=de.supportNetworkStreamIO(),Z.networkLoaderName=de.getNetworkLoaderTypeName(),Z.mseLivePlayback=Z.msePlayback&&Z.networkStreamIO,Z.mseH265Playback=de.supportMSEH265Playback(),Z.nativeMP4H264Playback=de.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),Z.nativeMP4H265Playback=de.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),Z.nativeWebmVP8Playback=de.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),Z.nativeWebmVP9Playback=de.supportNativeMediaPlayback('video/webm; codecs="vp9"'),Z},de}(),N=_(2),j=_(0),V=_(9),K=_.n(V),v=_(16),z=_(4),Te=_(17),ye=_(7),Se=_(10),Le=_(3),oe=_(1),Be=_(5),He=_(11),xe=function(){function de(Z,we,Fe){this.TAG="SeekingHandler",this._config=null,this._media_element=null,this._always_seek_keyframe=!1,this._on_unbuffered_seek=null,this._request_set_current_time=!1,this._seek_request_record_clocktime=null,this._idr_sample_list=new He.a,this.e=null,this._config=Z,this._media_element=we,this._on_unbuffered_seek=Fe,this.e={onMediaSeeking:this._onMediaSeeking.bind(this)};var Et=Be.a.chrome&&(Be.a.version.major<50||Be.a.version.major===50&&Be.a.version.build<2661);this._always_seek_keyframe=!!(Et||Be.a.msedge||Be.a.msie),this._always_seek_keyframe&&(this._config.accurateSeek=!1),this._media_element.addEventListener("seeking",this.e.onMediaSeeking)}return de.prototype.destroy=function(){this._idr_sample_list.clear(),this._idr_sample_list=null,this._media_element.removeEventListener("seeking",this.e.onMediaSeeking),this._media_element=null,this._on_unbuffered_seek=null},de.prototype.seek=function(Z){var we=this._isPositionBuffered(Z),Fe=!1;if(Z<1&&this._media_element.buffered.length>0){var Et=this._media_element.buffered.start(0);(Et<1&&Z<Et||Be.a.safari)&&(Fe=!0,Z=Be.a.safari?.1:Et)}if(Fe)this.directSeek(Z);else if(we)if(this._always_seek_keyframe){var X=this._getNearestKeyframe(Math.floor(1e3*Z));X!=null&&(Z=X.dts/1e3),this.directSeek(Z)}else this.directSeek(Z);else this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*Z)),this._config.accurateSeek&&this.directSeek(Z)},de.prototype.directSeek=function(Z){this._request_set_current_time=!0,this._media_element.currentTime=Z},de.prototype.appendSyncPoints=function(Z){this._idr_sample_list.appendArray(Z)},de.prototype._onMediaSeeking=function(Z){if(this._request_set_current_time)this._request_set_current_time=!1;else{var we=this._media_element.currentTime,Fe=this._media_element.buffered;if(we<1&&Fe.length>0){var Et=Fe.start(0);if(Et<1&&we<Et||Be.a.safari){var X=Be.a.safari?.1:Et;return void this.directSeek(X)}}if(this._isPositionBuffered(we)){if(this._always_seek_keyframe){var zt=this._getNearestKeyframe(Math.floor(1e3*we));zt!=null&&(we=zt.dts/1e3,this.directSeek(we))}}else this._seek_request_record_clocktime=de._getClockTime(),window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)}},de.prototype._pollAndApplyUnbufferedSeek=function(){if(this._seek_request_record_clocktime!=null)if(this._seek_request_record_clocktime<=de._getClockTime()-100){var Z=this._media_element.currentTime;this._seek_request_record_clocktime=null,this._isPositionBuffered(Z)||(this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*Z)),this._config.accurateSeek&&this.directSeek(Z))}else window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)},de.prototype._isPositionBuffered=function(Z){for(var we=this._media_element.buffered,Fe=0;Fe<we.length;Fe++){var Et=we.start(Fe),X=we.end(Fe);if(Z>=Et&&Z<X)return!0}return!1},de.prototype._getNearestKeyframe=function(Z){return this._idr_sample_list.getLastSyncPointBeforeDts(Z)},de._getClockTime=function(){return self.performance&&self.performance.now?self.performance.now():Date.now()},de}(),J=function(){function de(Z,we,Fe,Et){this.TAG="LoadingController",this._config=null,this._media_element=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null,this._paused=!1,this.e=null,this._config=Z,this._media_element=we,this._on_pause_transmuxer=Fe,this._on_resume_transmuxer=Et,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)}}return de.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this.e=null,this._media_element=null,this._config=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null},de.prototype.notifyBufferedPositionChanged=function(Z){!this._config.isLive&&this._config.lazyLoad&&(Z==null?this._suspendTransmuxerIfNeeded():this._suspendTransmuxerIfBufferedPositionExceeded(Z))},de.prototype._onMediaTimeUpdate=function(Z){this._paused&&this._resumeTransmuxerIfNeeded()},de.prototype._suspendTransmuxerIfNeeded=function(){for(var Z=this._media_element.buffered,we=this._media_element.currentTime,Fe=0,Et=0;Et<Z.length;Et++){var X=Z.start(Et),zt=Z.end(Et);if(X<=we&&we<zt){Fe=zt;break}}Fe>0&&this._suspendTransmuxerIfBufferedPositionExceeded(Fe)},de.prototype._suspendTransmuxerIfBufferedPositionExceeded=function(Z){Z>=this._media_element.currentTime+this._config.lazyLoadMaxDuration&&!this._paused&&(j.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this.suspendTransmuxer(),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate))},de.prototype.suspendTransmuxer=function(){this._paused=!0,this._on_pause_transmuxer()},de.prototype._resumeTransmuxerIfNeeded=function(){for(var Z=this._media_element.buffered,we=this._media_element.currentTime,Fe=this._config.lazyLoadRecoverDuration,Et=!1,X=0;X<Z.length;X++){var zt=Z.start(X),Ct=Z.end(X);if(we>=zt&&we<Ct){we>=Ct-Fe&&(Et=!0);break}}Et&&(j.a.v(this.TAG,"Continue loading from paused position"),this.resumeTransmuxer(),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate))},de.prototype.resumeTransmuxer=function(){this._paused=!1,this._on_resume_transmuxer()},de}(),Y=function(){function de(Z,we){this.TAG="StartupStallJumper",this._media_element=null,this._on_direct_seek=null,this._canplay_received=!1,this.e=null,this._media_element=Z,this._on_direct_seek=we,this.e={onMediaCanPlay:this._onMediaCanPlay.bind(this),onMediaStalled:this._onMediaStalled.bind(this),onMediaProgress:this._onMediaProgress.bind(this)},this._media_element.addEventListener("canplay",this.e.onMediaCanPlay),this._media_element.addEventListener("stalled",this.e.onMediaStalled),this._media_element.addEventListener("progress",this.e.onMediaProgress)}return de.prototype.destroy=function(){this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay),this._media_element.removeEventListener("stalled",this.e.onMediaStalled),this._media_element.removeEventListener("progress",this.e.onMediaProgress),this._media_element=null,this._on_direct_seek=null},de.prototype._onMediaCanPlay=function(Z){this._canplay_received=!0,this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay)},de.prototype._onMediaStalled=function(Z){this._detectAndFixStuckPlayback(!0)},de.prototype._onMediaProgress=function(Z){this._detectAndFixStuckPlayback()},de.prototype._detectAndFixStuckPlayback=function(Z){var we=this._media_element,Fe=we.buffered;Z||!this._canplay_received||we.readyState<2?Fe.length>0&&we.currentTime<Fe.start(0)&&(j.a.w(this.TAG,"Playback seems stuck at ".concat(we.currentTime,", seek to ").concat(Fe.start(0))),this._on_direct_seek(Fe.start(0)),this._media_element.removeEventListener("progress",this.e.onMediaProgress)):this._media_element.removeEventListener("progress",this.e.onMediaProgress)},de}(),T=function(){function de(Z,we,Fe){this._config=null,this._media_element=null,this._on_direct_seek=null,this._config=Z,this._media_element=we,this._on_direct_seek=Fe}return de.prototype.destroy=function(){this._on_direct_seek=null,this._media_element=null,this._config=null},de.prototype.notifyBufferedRangeUpdate=function(){this._chaseLiveLatency()},de.prototype._chaseLiveLatency=function(){var Z=this._media_element.buffered,we=this._media_element.currentTime,Fe=this._media_element.paused;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&Z.length!=0&&(this._config.liveBufferLatencyChasingOnPaused||!Fe)){var Et=Z.end(Z.length-1);if(Et>this._config.liveBufferLatencyMaxLatency&&Et-we>this._config.liveBufferLatencyMaxLatency){var X=Et-this._config.liveBufferLatencyMinRemain;this._on_direct_seek(X)}}},de}(),H=function(){function de(Z,we){this._config=null,this._media_element=null,this.e=null,this._config=Z,this._media_element=we,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)},this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate)}return de.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element=null,this._config=null},de.prototype._onMediaTimeUpdate=function(Z){if(this._config.isLive&&this._config.liveSync){var we=this._getCurrentLatency();if(we>this._config.liveSyncMaxLatency){var Fe=Math.min(2,Math.max(1,this._config.liveSyncPlaybackRate));this._media_element.playbackRate=Fe}else we>this._config.liveSyncTargetLatency||this._media_element.playbackRate!==1&&this._media_element.playbackRate!==0&&(this._media_element.playbackRate=1)}},de.prototype._getCurrentLatency=function(){if(!this._media_element)return 0;var Z=this._media_element.buffered,we=this._media_element.currentTime;return Z.length==0?0:Z.end(Z.length-1)-we},de}(),ve=function(){function de(Z,we){this.TAG="PlayerEngineMainThread",this._emitter=new V,this._media_element=null,this._mse_controller=null,this._transmuxer=null,this._pending_seek_time=null,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._mse_source_opened=!1,this._has_pending_load=!1,this._loaded_metadata_received=!1,this._media_info=null,this._statistics_info=null,this.e=null,this._media_data_source=Z,this._config=L(),typeof we=="object"&&Object.assign(this._config,we),Z.isLive===!0&&(this._config.isLive=!0),this.e={onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this)}}return de.prototype.destroy=function(){this._emitter.emit(z.a.DESTROYING),this._transmuxer&&this.unload(),this._media_element&&this.detachMediaElement(),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},de.prototype.on=function(Z,we){var Fe=this;this._emitter.addListener(Z,we),Z===z.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return Fe._emitter.emit(z.a.MEDIA_INFO,Fe.mediaInfo)}):Z==z.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return Fe._emitter.emit(z.a.STATISTICS_INFO,Fe.statisticsInfo)})},de.prototype.off=function(Z,we){this._emitter.removeListener(Z,we)},de.prototype.attachMediaElement=function(Z){var we=this;this._media_element=Z,Z.src="",Z.removeAttribute("src"),Z.srcObject=null,Z.load(),Z.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._mse_controller=new v.a(this._config),this._mse_controller.on(ye.a.UPDATE_END,this._onMSEUpdateEnd.bind(this)),this._mse_controller.on(ye.a.BUFFER_FULL,this._onMSEBufferFull.bind(this)),this._mse_controller.on(ye.a.SOURCE_OPEN,this._onMSESourceOpen.bind(this)),this._mse_controller.on(ye.a.ERROR,this._onMSEError.bind(this)),this._mse_controller.on(ye.a.START_STREAMING,this._onMSEStartStreaming.bind(this)),this._mse_controller.on(ye.a.END_STREAMING,this._onMSEEndStreaming.bind(this)),this._mse_controller.initialize({getCurrentTime:function(){return we._media_element.currentTime},getReadyState:function(){return we._media_element.readyState}}),this._mse_controller.isManagedMediaSource()?(Z.disableRemotePlayback=!0,Z.srcObject=this._mse_controller.getObject()):Z.src=this._mse_controller.getObjectURL()},de.prototype.detachMediaElement=function(){this._media_element&&(this._mse_controller.shutdown(),this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null,this._mse_controller.revokeObjectURL()),this._mse_controller&&(this._mse_controller.destroy(),this._mse_controller=null)},de.prototype.load=function(){var Z=this;if(!this._media_element)throw new Le.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new Le.a("load() has been called, please call unload() first!");this._has_pending_load||(!this._config.deferLoadAfterSourceOpen||this._mse_source_opened?(this._transmuxer=new Te.a(this._media_data_source,this._config),this._transmuxer.on(oe.a.INIT_SEGMENT,function(we,Fe){Z._mse_controller.appendInitSegment(Fe)}),this._transmuxer.on(oe.a.MEDIA_SEGMENT,function(we,Fe){Z._mse_controller.appendMediaSegment(Fe),!Z._config.isLive&&we==="video"&&Fe.data&&Fe.data.byteLength>0&&"info"in Fe&&Z._seeking_handler.appendSyncPoints(Fe.info.syncPoints),Z._loading_controller.notifyBufferedPositionChanged(Fe.info.endDts/1e3)}),this._transmuxer.on(oe.a.LOADING_COMPLETE,function(){Z._mse_controller.endOfStream(),Z._emitter.emit(z.a.LOADING_COMPLETE)}),this._transmuxer.on(oe.a.RECOVERED_EARLY_EOF,function(){Z._emitter.emit(z.a.RECOVERED_EARLY_EOF)}),this._transmuxer.on(oe.a.IO_ERROR,function(we,Fe){Z._emitter.emit(z.a.ERROR,Se.b.NETWORK_ERROR,we,Fe)}),this._transmuxer.on(oe.a.DEMUX_ERROR,function(we,Fe){Z._emitter.emit(z.a.ERROR,Se.b.MEDIA_ERROR,we,Fe)}),this._transmuxer.on(oe.a.MEDIA_INFO,function(we){Z._media_info=we,Z._emitter.emit(z.a.MEDIA_INFO,Object.assign({},we))}),this._transmuxer.on(oe.a.STATISTICS_INFO,function(we){Z._statistics_info=Z._fillStatisticsInfo(we),Z._emitter.emit(z.a.STATISTICS_INFO,Object.assign({},we))}),this._transmuxer.on(oe.a.RECOMMEND_SEEKPOINT,function(we){Z._media_element&&!Z._config.accurateSeek&&Z._seeking_handler.directSeek(we/1e3)}),this._transmuxer.on(oe.a.METADATA_ARRIVED,function(we){Z._emitter.emit(z.a.METADATA_ARRIVED,we)}),this._transmuxer.on(oe.a.SCRIPTDATA_ARRIVED,function(we){Z._emitter.emit(z.a.SCRIPTDATA_ARRIVED,we)}),this._transmuxer.on(oe.a.TIMED_ID3_METADATA_ARRIVED,function(we){Z._emitter.emit(z.a.TIMED_ID3_METADATA_ARRIVED,we)}),this._transmuxer.on(oe.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function(we){Z._emitter.emit(z.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,we)}),this._transmuxer.on(oe.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function(we){Z._emitter.emit(z.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,we)}),this._transmuxer.on(oe.a.SMPTE2038_METADATA_ARRIVED,function(we){Z._emitter.emit(z.a.SMPTE2038_METADATA_ARRIVED,we)}),this._transmuxer.on(oe.a.SCTE35_METADATA_ARRIVED,function(we){Z._emitter.emit(z.a.SCTE35_METADATA_ARRIVED,we)}),this._transmuxer.on(oe.a.PES_PRIVATE_DATA_DESCRIPTOR,function(we){Z._emitter.emit(z.a.PES_PRIVATE_DATA_DESCRIPTOR,we)}),this._transmuxer.on(oe.a.PES_PRIVATE_DATA_ARRIVED,function(we){Z._emitter.emit(z.a.PES_PRIVATE_DATA_ARRIVED,we)}),this._seeking_handler=new xe(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new J(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new Y(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new T(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new H(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0),this._transmuxer.open()):this._has_pending_load=!0)},de.prototype.unload=function(){var Z,we,Fe,Et,X,zt,Ct,ce,ke;(Z=this._media_element)===null||Z===void 0||Z.pause(),(we=this._live_latency_synchronizer)===null||we===void 0||we.destroy(),this._live_latency_synchronizer=null,(Fe=this._live_latency_chaser)===null||Fe===void 0||Fe.destroy(),this._live_latency_chaser=null,(Et=this._startup_stall_jumper)===null||Et===void 0||Et.destroy(),this._startup_stall_jumper=null,(X=this._loading_controller)===null||X===void 0||X.destroy(),this._loading_controller=null,(zt=this._seeking_handler)===null||zt===void 0||zt.destroy(),this._seeking_handler=null,(Ct=this._mse_controller)===null||Ct===void 0||Ct.flush(),(ce=this._transmuxer)===null||ce===void 0||ce.close(),(ke=this._transmuxer)===null||ke===void 0||ke.destroy(),this._transmuxer=null},de.prototype.play=function(){return this._media_element.play()},de.prototype.pause=function(){this._media_element.pause()},de.prototype.seek=function(Z){this._media_element&&this._seeking_handler?this._seeking_handler.seek(Z):this._pending_seek_time=Z},Object.defineProperty(de.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),de.prototype._onMSESourceOpen=function(){this._mse_source_opened=!0,this._has_pending_load&&(this._has_pending_load=!1,this.load())},de.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},de.prototype._onMSEBufferFull=function(){j.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},de.prototype._onMSEError=function(Z){this._emitter.emit(z.a.ERROR,Se.b.MEDIA_ERROR,Se.a.MEDIA_MSE_ERROR,Z)},de.prototype._onMSEStartStreaming=function(){this._loaded_metadata_received&&(this._config.isLive||(j.a.v(this.TAG,"Resume transmuxing task due to ManagedMediaSource onStartStreaming"),this._loading_controller.resumeTransmuxer()))},de.prototype._onMSEEndStreaming=function(){this._config.isLive||(j.a.v(this.TAG,"Suspend transmuxing task due to ManagedMediaSource onEndStreaming"),this._loading_controller.suspendTransmuxer())},de.prototype._onMediaLoadedMetadata=function(Z){this._loaded_metadata_received=!0,this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},de.prototype._onRequestDirectSeek=function(Z){this._seeking_handler.directSeek(Z)},de.prototype._onRequiredUnbufferedSeek=function(Z){this._mse_controller.flush(),this._transmuxer.seek(Z)},de.prototype._onRequestPauseTransmuxer=function(){this._transmuxer.pause()},de.prototype._onRequestResumeTransmuxer=function(){this._transmuxer.resume()},de.prototype._fillStatisticsInfo=function(Z){if(Z.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return Z;var we=!0,Fe=0,Et=0;if(this._media_element.getVideoPlaybackQuality){var X=this._media_element.getVideoPlaybackQuality();Fe=X.totalVideoFrames,Et=X.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(Fe=this._media_element.webkitDecodedFrameCount,Et=this._media_element.webkitDroppedFrameCount):we=!1;return we&&(Z.decodedFrames=Fe,Z.droppedFrames=Et),Z},de}(),Ye=_(18),Me=_(8),Ce=function(){function de(Z,we){this.TAG="PlayerEngineDedicatedThread",this._emitter=new V,this._media_element=null,this._worker_destroying=!1,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._pending_seek_time=null,this._media_info=null,this._statistics_info=null,this.e=null,this._media_data_source=Z,this._config=L(),typeof we=="object"&&Object.assign(this._config,we),Z.isLive===!0&&(this._config.isLive=!0),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this),onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this),onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this),onMediaReadyStateChanged:this._onMediaReadyStateChange.bind(this)},Me.a.registerListener(this.e.onLoggingConfigChanged),this._worker=Ye(24,{all:!0}),this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",media_data_source:this._media_data_source,config:this._config}),this._worker.postMessage({cmd:"logging_config",logging_config:Me.a.getConfig()})}return de.isSupported=function(){return!!self.Worker&&(!(!self.MediaSource||!("canConstructInDedicatedWorker"in self.MediaSource)||self.MediaSource.canConstructInDedicatedWorker!==!0)||!(!self.ManagedMediaSource||!("canConstructInDedicatedWorker"in self.ManagedMediaSource)||self.ManagedMediaSource.canConstructInDedicatedWorker!==!0))},de.prototype.destroy=function(){this._emitter.emit(z.a.DESTROYING),this.unload(),this.detachMediaElement(),this._worker_destroying=!0,this._worker.postMessage({cmd:"destroy"}),Me.a.removeListener(this.e.onLoggingConfigChanged),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},de.prototype.on=function(Z,we){var Fe=this;this._emitter.addListener(Z,we),Z===z.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return Fe._emitter.emit(z.a.MEDIA_INFO,Fe.mediaInfo)}):Z==z.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return Fe._emitter.emit(z.a.STATISTICS_INFO,Fe.statisticsInfo)})},de.prototype.off=function(Z,we){this._emitter.removeListener(Z,we)},de.prototype.attachMediaElement=function(Z){this._media_element=Z,this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.addEventListener("readystatechange",this.e.onMediaReadyStateChanged),this._worker.postMessage({cmd:"initialize_mse"})},de.prototype.detachMediaElement=function(){this._worker.postMessage({cmd:"shutdown_mse"}),this._media_element&&(this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.removeEventListener("readystatechange",this.e.onMediaReadyStateChanged),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null)},de.prototype.load=function(){this._worker.postMessage({cmd:"load"}),this._seeking_handler=new xe(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new J(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new Y(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new T(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new H(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0)},de.prototype.unload=function(){var Z,we,Fe,Et,X,zt;(Z=this._media_element)===null||Z===void 0||Z.pause(),this._worker.postMessage({cmd:"unload"}),(we=this._live_latency_synchronizer)===null||we===void 0||we.destroy(),this._live_latency_synchronizer=null,(Fe=this._live_latency_chaser)===null||Fe===void 0||Fe.destroy(),this._live_latency_chaser=null,(Et=this._startup_stall_jumper)===null||Et===void 0||Et.destroy(),this._startup_stall_jumper=null,(X=this._loading_controller)===null||X===void 0||X.destroy(),this._loading_controller=null,(zt=this._seeking_handler)===null||zt===void 0||zt.destroy(),this._seeking_handler=null},de.prototype.play=function(){return this._media_element.play()},de.prototype.pause=function(){this._media_element.pause()},de.prototype.seek=function(Z){this._media_element&&this._seeking_handler?this._seeking_handler.seek(Z):this._pending_seek_time=Z},Object.defineProperty(de.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),de.prototype._onLoggingConfigChanged=function(Z){var we;(we=this._worker)===null||we===void 0||we.postMessage({cmd:"logging_config",logging_config:Z})},de.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},de.prototype._onMSEBufferFull=function(){j.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},de.prototype._onMediaLoadedMetadata=function(Z){this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},de.prototype._onRequestDirectSeek=function(Z){this._seeking_handler.directSeek(Z)},de.prototype._onRequiredUnbufferedSeek=function(Z){this._worker.postMessage({cmd:"unbuffered_seek",milliseconds:Z})},de.prototype._onRequestPauseTransmuxer=function(){this._worker.postMessage({cmd:"pause_transmuxer"})},de.prototype._onRequestResumeTransmuxer=function(){this._worker.postMessage({cmd:"resume_transmuxer"})},de.prototype._onMediaTimeUpdate=function(Z){this._worker.postMessage({cmd:"timeupdate",current_time:Z.target.currentTime})},de.prototype._onMediaReadyStateChange=function(Z){this._worker.postMessage({cmd:"readystatechange",ready_state:Z.target.readyState})},de.prototype._onWorkerMessage=function(Z){var we,Fe=Z.data,Et=Fe.msg;if(Et=="destroyed"||this._worker_destroying)return this._worker_destroying=!1,(we=this._worker)===null||we===void 0||we.terminate(),void(this._worker=null);switch(Et){case"mse_init":var X=Fe;"ManagedMediaSource"in self&&!("MediaSource"in self)&&(this._media_element.disableRemotePlayback=!0),this._media_element.srcObject=X.handle;break;case"mse_event":(X=Fe).event==ye.a.UPDATE_END?this._onMSEUpdateEnd():X.event==ye.a.BUFFER_FULL&&this._onMSEBufferFull();break;case"transmuxing_event":if((X=Fe).event==oe.a.MEDIA_INFO){var zt=Fe;this._media_info=zt.info,this._emitter.emit(z.a.MEDIA_INFO,Object.assign({},zt.info))}else if(X.event==oe.a.STATISTICS_INFO){var Ct=Fe;this._statistics_info=this._fillStatisticsInfo(Ct.info),this._emitter.emit(z.a.STATISTICS_INFO,Object.assign({},Ct.info))}else if(X.event==oe.a.RECOMMEND_SEEKPOINT){var ce=Fe;this._media_element&&!this._config.accurateSeek&&this._seeking_handler.directSeek(ce.milliseconds/1e3)}break;case"player_event":if((X=Fe).event==z.a.ERROR){var ke=Fe;this._emitter.emit(z.a.ERROR,ke.error_type,ke.error_detail,ke.info)}else if("extraData"in X){var Pe=Fe;this._emitter.emit(Pe.event,Pe.extraData)}break;case"logcat_callback":X=Fe,j.a.emitter.emit("log",X.type,X.logcat);break;case"buffered_position_changed":X=Fe,this._loading_controller.notifyBufferedPositionChanged(X.buffered_position_milliseconds/1e3)}},de.prototype._fillStatisticsInfo=function(Z){if(Z.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return Z;var we=!0,Fe=0,Et=0;if(this._media_element.getVideoPlaybackQuality){var X=this._media_element.getVideoPlaybackQuality();Fe=X.totalVideoFrames,Et=X.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(Fe=this._media_element.webkitDecodedFrameCount,Et=this._media_element.webkitDroppedFrameCount):we=!1;return we&&(Z.decodedFrames=Fe,Z.droppedFrames=Et),Z},de}(),tt=function(){function de(Z,we){this.TAG="MSEPlayer",this._type="MSEPlayer",this._media_element=null,this._player_engine=null;var Fe=Z.type.toLowerCase();if(Fe!=="mse"&&Fe!=="mpegts"&&Fe!=="m2ts"&&Fe!=="flv")throw new Le.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");if(we&&we.enableWorkerForMSE&&Ce.isSupported())try{this._player_engine=new Ce(Z,we)}catch{j.a.e(this.TAG,"Error while initializing PlayerEngineDedicatedThread, fallback to PlayerEngineMainThread"),this._player_engine=new ve(Z,we)}else this._player_engine=new ve(Z,we)}return de.prototype.destroy=function(){this._player_engine.destroy(),this._player_engine=null,this._media_element=null},de.prototype.on=function(Z,we){this._player_engine.on(Z,we)},de.prototype.off=function(Z,we){this._player_engine.off(Z,we)},de.prototype.attachMediaElement=function(Z){this._media_element=Z,this._player_engine.attachMediaElement(Z)},de.prototype.detachMediaElement=function(){this._media_element=null,this._player_engine.detachMediaElement()},de.prototype.load=function(){this._player_engine.load()},de.prototype.unload=function(){this._player_engine.unload()},de.prototype.play=function(){return this._player_engine.play()},de.prototype.pause=function(){this._player_engine.pause()},Object.defineProperty(de.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"buffered",{get:function(){return this._media_element.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"duration",{get:function(){return this._media_element.duration},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"volume",{get:function(){return this._media_element.volume},set:function(Z){this._media_element.volume=Z},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"muted",{get:function(){return this._media_element.muted},set:function(Z){this._media_element.muted=Z},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"currentTime",{get:function(){return this._media_element?this._media_element.currentTime:0},set:function(Z){this._player_engine.seek(Z)},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"mediaInfo",{get:function(){return this._player_engine.mediaInfo},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"statisticsInfo",{get:function(){return this._player_engine.statisticsInfo},enumerable:!1,configurable:!0}),de}(),ct=function(){function de(Z,we){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new K.a,this._config=L(),typeof we=="object"&&Object.assign(this._config,we);var Fe=Z.type.toLowerCase();if(Fe==="mse"||Fe==="mpegts"||Fe==="m2ts"||Fe==="flv")throw new Le.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(Z.hasOwnProperty("segments"))throw new Le.b("NativePlayer(".concat(Z.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=Z,this._mediaElement=null}return de.prototype.destroy=function(){this._emitter.emit(z.a.DESTROYING),this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},de.prototype.on=function(Z,we){var Fe=this;Z===z.a.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){Fe._emitter.emit(z.a.MEDIA_INFO,Fe.mediaInfo)}):Z===z.a.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){Fe._emitter.emit(z.a.STATISTICS_INFO,Fe.statisticsInfo)}),this._emitter.addListener(Z,we)},de.prototype.off=function(Z,we){this._emitter.removeListener(Z,we)},de.prototype.attachMediaElement=function(Z){if(this._mediaElement=Z,Z.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{Z.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},de.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},de.prototype.load=function(){if(!this._mediaElement)throw new Le.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},de.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},de.prototype.play=function(){return this._mediaElement.play()},de.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(de.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(Z){this._mediaElement.volume=Z},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(Z){this._mediaElement.muted=Z},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(Z){this._mediaElement?this._mediaElement.currentTime=Z:this._pendingSeekTime=Z},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"mediaInfo",{get:function(){var Z={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(Z.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(Z.width=this._mediaElement.videoWidth,Z.height=this._mediaElement.videoHeight)),Z},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"statisticsInfo",{get:function(){var Z={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return Z;var we=!0,Fe=0,Et=0;if(this._mediaElement.getVideoPlaybackQuality){var X=this._mediaElement.getVideoPlaybackQuality();Fe=X.totalVideoFrames,Et=X.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(Fe=this._mediaElement.webkitDecodedFrameCount,Et=this._mediaElement.webkitDroppedFrameCount):we=!1;return we&&(Z.decodedFrames=Fe,Z.droppedFrames=Et),Z},enumerable:!1,configurable:!0}),de.prototype._onvLoadedMetadata=function(Z){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(z.a.MEDIA_INFO,this.mediaInfo)},de.prototype._reportStatisticsInfo=function(){this._emitter.emit(z.a.STATISTICS_INFO,this.statisticsInfo)},de}();k.a.install();var it={createPlayer:function(de,Z){var we=de;if(we==null||typeof we!="object")throw new Le.b("MediaDataSource must be an javascript object!");if(!we.hasOwnProperty("type"))throw new Le.b("MediaDataSource must has type field to indicate video file type!");switch(we.type){case"mse":case"mpegts":case"m2ts":case"flv":return new tt(we,Z);default:return new ct(we,Z)}},isSupported:function(){return B.supportMSEH264Playback()},getFeatureList:function(){return B.getFeatureList()}};it.BaseLoader=N.a,it.LoaderStatus=N.c,it.LoaderErrors=N.b,it.Events=z.a,it.ErrorTypes=Se.b,it.ErrorDetails=Se.a,it.MSEPlayer=tt,it.NativePlayer=ct,it.LoggingControl=Me.a,Object.defineProperty(it,"version",{enumerable:!0,get:function(){return"1.8.0"}}),I.default=it}])})}(ay)),ay.exports}var H4=V4();const _u=Lx(H4);class mA{constructor(f,S,I,_){this.elementRef=f,this.mediaType=S,this.player=I,this.isEnabled=!0,this.currentPlaybackRate=1,this.loaded=!1,this.loadedCallback=null,this.handleLoadedDataBind=this.handleLoadedData.bind(this),this.handleStatisticsInfoBind=this.handleStatisticsInfo.bind(this),this.handleMediaInfoBind=this.handleMediaInfo.bind(this),this.statisticsInfo={},this.mediaInfo={}}async init(f,S=null){if(!f.url){this.isEnabled=!1,S&&S();return}this.loadedCallback=S,this.elementRef.value.addEventListener("loadeddata",this.handleLoadedDataBind),this.player&&this.player.destroy(),this.player=_u.createPlayer({type:f.url.endsWith(".m3u8")?"hls":"flv",url:f.url,isLive:!1}),this.player.on(_u.Events.STATISTICS_INFO,this.handleStatisticsInfoBind),this.player.on(_u.Events.MEDIA_INFO,this.handleMediaInfoBind),this.player.attachMediaElement(this.elementRef.value),this.player.load()}handleStatisticsInfo(f){this.statisticsInfo=f}handleMediaInfo(f){this.mediaInfo=f}handleLoadedData(){console.log(`The ${this.mediaType} has now been loaded!`),this.loaded=!0,this.loadedCallback&&this.loadedCallback()}dispose(){try{this.elementRef.value.removeEventListener("loadeddata",this.handleLoadedDataBind),this.player.off(_u.Events.STATISTICS_INFO,this.handleStatisticsInfoBind),this.player.off(_u.Events.MEDIA_INFO,this.handleMediaInfoBind),this.loadedCallback=null}catch(f){console.warn(f)}}setCurrentTime(f){this.elementRef.value.currentTime=f}getCurrentTime(){return this.elementRef.value.currentTime}setPlaybackRate(f){this.currentPlaybackRate=f,this.elementRef.value.playbackRate=f}getPlaybackRate(){return this.elementRef.value.playbackRate}play(){this.elementRef.value.play()}pause(){this.elementRef.value.pause()}setVolume(f){this.elementRef.value.volume=f}getVolume(){return this.elementRef.value.volume}getStats(){return{droppedFrames:this.statisticsInfo.droppedFrames,decodedFrames:this.statisticsInfo.decodedFrames,bpsAudio:this.statisticsInfo.bps_audio,bpsVideo:this.statisticsInfo.bps_video,speed:`${this.statisticsInfo.speed.toFixed(2)} KB/s`,height:this.mediaInfo.height,width:this.mediaInfo.width,audioCodec:this.mediaInfo.audioCodec,videoCodec:this.mediaInfo.videoCodec}}}class G4 extends Px{constructor(f,S,I){super(f,S,I)}}const z4="MpegtsPlayerView",K4={__name:"MpegtsPlayerView",setup(l){console.log(z4);const f=pc(null),S=pc(null),I={};let _=null;const k=()=>{const j=new URLSearchParams(window.location.search).get("playData");console.log("playDataBase64：",j);const V=atob(j),K=Uint8Array.from(V,Te=>Te.codePointAt(0)),v=new TextDecoder("utf-8").decode(K),z=JSON.parse(v);return console.log("playData:",z),z},D=N=>{$r("positionChanged",f.value.currentTime),_==null||_.checkAVSync()},d=()=>{$r("ended")},L=N=>{console.log("volumeChanged",S.value.volume),$r("volumeChanged",S.value.volume)},B=async()=>{if(!_u.isSupported()){console.error("Browser not supported!");return}const N={video:{url:"",contentType:"video/mp4"},audio:{url:"",contentType:"audio/mp3"}},j={video:{...N.video,...k().video},audio:{...N.audio,...k().audio}};I.videoPlayer!=null&&(I.videoPlayer.dispose(),I.videoPlayer=null),I.audioPlayer!=null&&(I.audioPlayer.dispose(),I.audioPlayer=null),I.videoPlayer=new mA(f,"video",null,null),I.audioPlayer=new mA(S,"audio",null,null);const V=new Ox(I.videoPlayer,I.audioPlayer);_=new G4(I.videoPlayer,I.audioPlayer,V),window.playerController=_,window.resume=()=>_.play(),window.seek=Te=>_.seek(Te),window.setVolume=Te=>_.setVolume(Te),window.getVolume=()=>_.getVolume(),window.setRate=Te=>_.setPlaybackRate(Te),window.pause=()=>_.pause(),window.setCheckAVSyncDiff=(Te,ye)=>V.setSyncThresholds(Te,ye),window.flipVertical=()=>_.flipVertical(),window.flipHorizontal=()=>_.flipHorizontal(),window.zoom=Te=>_.zoom(Te),window.move=(Te,ye)=>_.move(Te,ye),window.resetTransforms=()=>_.resetTransforms(),window.togglePictureInPicture=()=>_.togglePictureInPicture();let K=!1,v=!1;const z=()=>{if(K&&v){const Te=f.value.duration===1/0?0:f.value.duration;$r("loaded",{duration:Te})}};await Promise.all([I.videoPlayer.init(j.video,()=>{K=!0,z()}),I.audioPlayer.init(j.audio,()=>{v=!0,z()})]),!I.videoPlayer.isEnabled&&!I.audioPlayer.isEnabled&&$r("loaded",{duration:0})};return By(()=>{B()}),window.initApp=B,(N,j)=>(Fy(),px(Xr,null,[wu("video",{ref_key:"videoElement",ref:f,id:"videoElement",width:"100%",height:"100%",onTimeupdate:D,onVolumechange:L,onEnded:d},null,544),wu("video",{ref_key:"audioElement",ref:S,id:"audioElement",width:"0",height:"0",onVolumechange:L},null,544)],64))}},q4=D4({history:u4("./"),routes:[{path:"/index.html",component:{render(){const l={ShakaPlayerView:hA,MpegtsPlayerView:K4},f=this.$route.query.view||"ShakaPlayerView";return Gy(l[f]||hA)}}}]}),Nx=R3(P4);Nx.use(q4);Nx.mount("#app");</script>
    <style rel="stylesheet" crossorigin>:root{--vt-c-white: #ffffff;--vt-c-white-soft: #f8f8f8;--vt-c-white-mute: #f2f2f2;--vt-c-black: #181818;--vt-c-black-soft: #222222;--vt-c-black-mute: #282828;--vt-c-indigo: #2c3e50;--vt-c-divider-light-1: rgba(60, 60, 60, .29);--vt-c-divider-light-2: rgba(60, 60, 60, .12);--vt-c-divider-dark-1: rgba(84, 84, 84, .65);--vt-c-divider-dark-2: rgba(84, 84, 84, .48);--vt-c-text-light-1: var(--vt-c-indigo);--vt-c-text-light-2: rgba(60, 60, 60, .66);--vt-c-text-dark-1: var(--vt-c-white);--vt-c-text-dark-2: rgba(235, 235, 235, .64)}:root{--color-background: var(--vt-c-white);--color-background-soft: var(--vt-c-white-soft);--color-background-mute: var(--vt-c-white-mute);--color-border: var(--vt-c-divider-light-2);--color-border-hover: var(--vt-c-divider-light-1);--color-heading: var(--vt-c-text-light-1);--color-text: var(--vt-c-text-light-1);--section-gap: 160px}@media (prefers-color-scheme: dark){:root{--color-background: var(--vt-c-black);--color-background-soft: var(--vt-c-black-soft);--color-background-mute: var(--vt-c-black-mute);--color-border: var(--vt-c-divider-dark-2);--color-border-hover: var(--vt-c-divider-dark-1);--color-heading: var(--vt-c-text-dark-1);--color-text: var(--vt-c-text-dark-2)}}*,*:before,*:after{box-sizing:border-box;margin:0;font-weight:400}body{min-height:100vh;color:var(--color-text);background:var(--color-background);transition:color .5s,background-color .5s;line-height:1.6;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:15px;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app{width:100%;height:100dvh;overflow:hidden;background:#000}#videoElement{width:100%;height:100%;background:#000;object-fit:contain;transition:transform .2s ease}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
