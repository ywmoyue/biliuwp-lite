<UserControl
    x:Class="BiliLite.Controls.PlayerControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:IsWin10="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractNotPresent(Windows.Foundation.UniversalApiContract,14)"
    xmlns:canvas="using:Microsoft.Graphics.Canvas.UI.Xaml"
    xmlns:common="using:BiliLite.Models.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:danmaku="using:NSDanmaku.Controls"
    xmlns:fa="using:FontAwesome5"
    xmlns:local="using:BiliLite.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:modules="using:BiliLite.Modules"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:player="using:BiliLite.Modules.Player"
    xmlns:player1="using:BiliLite.Models.Common.Player"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:video="using:BiliLite.Models.Common.Video"
    xmlns:webPlayer="using:BiliLite.Player.WebPlayer"
    d:DesignHeight="800"
    d:DesignWidth="1000"
    mc:Ignorable="d">
    <UserControl.Resources>
        <SolidColorBrush x:Key="HyperlinkButtonForegroundPointerOver" Color="{ThemeResource SystemAccentColor}" />
        <SolidColorBrush x:Key="ButtonForegroundPointerOver" Color="{ThemeResource SystemAccentColor}" />
        <SolidColorBrush x:Key="ListViewItemForegroundPointerOver" Color="{ThemeResource SystemAccentColor}" />
        <SolidColorBrush x:Key="ListViewItemBackgroundSelected" Color="Transparent" />
        <SolidColorBrush x:Key="ListViewItemBackgroundSelectedPointerOver" Color="Transparent" />
        <SolidColorBrush x:Key="ListViewItemForegroundSelected" Color="{ThemeResource SystemAccentColor}" />
        <Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button">
            <Style.Setters>
                <Setter Property="BorderThickness" Value="0" />
            </Style.Setters>
        </Style>
    </UserControl.Resources>
    <Grid Background="Black">
        <SplitView
            x:Name="SplitView"
            PaneBackground="#C8000000"
            PaneOpening="SplitView_PaneOpening"
            PanePlacement="Right"
            SizeChanged="Player_SizeChanged">
            <SplitView.Pane>
                <Grid x:Name="Setting">
                    <Pivot x:Name="SettingPivot" RequestedTheme="Dark">
                        <Pivot.Resources>
                            <Style TargetType="PivotItem">
                                <Setter Property="Margin" Value="0" />
                            </Style>
                        </Pivot.Resources>
                        <PivotItem>
                            <PivotItem.Header>
                                <TextBlock FontSize="18" Foreground="White">选集</TextBlock>
                            </PivotItem.Header>
                            <Grid>
                                <ListView
                                    x:Name="EpisodeList"
                                    IsWin10:ItemContainerStyle="{StaticResource LocalListViewItemStyle}"
                                    Loaded="EpisodeList_Loaded"
                                    SelectionChanged="EpisodeList_SelectionChanged">
                                    <ListView.ItemTemplate>
                                        <DataTemplate x:DataType="video:PlayInfo">
                                            <StackPanel>
                                                <Grid Visibility="{Binding ShowTitlePart}">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" MinWidth="25" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock
                                                        MinWidth="25"
                                                        VerticalAlignment="Center"
                                                        Foreground="White"
                                                        Text="{Binding TitlePage}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        Foreground="White"
                                                        Text="{Binding TitlePart}"
                                                        TextWrapping="Wrap" />
                                                </Grid>
                                                <TextBlock
                                                    Foreground="White"
                                                    Text="{Binding title}"
                                                    TextWrapping="Wrap"
                                                    ToolTipService.ToolTip="{Binding title}"
                                                    Visibility="{Binding ShowTitlePart, Converter={StaticResource DisplayConvert}}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                                <ListView
                                    x:Name="NodeList"
                                    Margin="0,4"
                                    IsWin10:ItemContainerStyle="{StaticResource LocalListViewItemStyle}"
                                    ItemsSource="{Binding Path=List, Mode=OneWay}"
                                    SelectedItem="{Binding Path=Select, Mode=OneWay}"
                                    SelectionChanged="NodeList_SelectionChanged"
                                    Visibility="Collapsed">
                                    <ListView.ItemTemplate>
                                        <DataTemplate x:DataType="player:InteractionEdgeInfoStoryListModel">
                                            <TextBlock Text="{Binding title}" ToolTipService.ToolTip="{Binding title}" />
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Grid>
                        </PivotItem>
                        <PivotItem Foreground="White">
                            <PivotItem.Header>
                                <TextBlock FontSize="18" Foreground="White">弹幕</TextBlock>
                            </PivotItem.Header>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15,0">
                                    <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                                        <Button
                                            x:Name="DanmuSettingUpdateDanmaku"
                                            Grid.Column="1"
                                            Click="DanmuSettingUpdateDanmaku_Click"
                                            Foreground="White">
                                            更新弹幕
                                        </Button>
                                        <TextBlock Margin="8,0,0,0" VerticalAlignment="Center">
                                            弹幕数量:<Run x:Name="TxtDanmuCount" /></TextBlock>
                                    </StackPanel>
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ToggleSwitch x:Name="DanmuSettingHideTop" Foreground="White">
                                            <ToggleSwitch.Header>
                                                <TextBlock Foreground="White">隐藏顶部弹幕</TextBlock>
                                            </ToggleSwitch.Header>
                                        </ToggleSwitch>
                                        <ToggleSwitch
                                            x:Name="DanmuSettingHideBottom"
                                            Grid.Column="1"
                                            Foreground="White">
                                            <ToggleSwitch.Header>
                                                <TextBlock Foreground="White">隐藏底部弹幕</TextBlock>
                                            </ToggleSwitch.Header>
                                        </ToggleSwitch>
                                    </Grid>
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <ToggleSwitch x:Name="DanmuSettingHideRoll" Foreground="White">
                                            <ToggleSwitch.Header>
                                                <TextBlock Foreground="White">隐藏滚动弹幕</TextBlock>
                                            </ToggleSwitch.Header>
                                        </ToggleSwitch>
                                        <!--<ToggleSwitch Grid.Column="1" Foreground="White" >
                                            <ToggleSwitch.Header>
                                                <TextBlock  Foreground="White">隐藏高级弹幕</TextBlock>
                                            </ToggleSwitch.Header>
                                        </ToggleSwitch>-->
                                    </Grid>
                                    <TextBlock Margin="0,4,0,0" Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowAreaControl}">
                                        弹幕显示区域<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.Area, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    <Slider
                                        x:Name="DanmuSettingArea"
                                        Maximum="1"
                                        Minimum="0.1"
                                        StepFrequency="0.1"
                                        Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowAreaControl}"
                                        Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.Area, Mode=OneWay}" />
                                    <TextBlock Margin="0,4,0,0">
                                        弹幕缩放<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.SizeZoom, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    <Slider
                                        x:Name="DanmuSettingFontZoom"
                                        Maximum="2"
                                        Minimum="0.1"
                                        StepFrequency="0.05"
                                        Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.SizeZoom, Mode=OneWay}" />
                                    <TextBlock Margin="0,4,0,0">
                                        弹幕速度<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.Speed, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    <Slider
                                        x:Name="DanmuSettingSpeed"
                                        Maximum="25"
                                        Minimum="1"
                                        StepFrequency="1"
                                        Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.Speed, Mode=OneWay}" />
                                    <TextBlock Margin="0,4,0,0">
                                        弹幕透明度<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.Opacity, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    <Slider
                                        x:Name="DanmuSettingOpacity"
                                        Maximum="1"
                                        Minimum="0.1"
                                        StepFrequency="0.1"
                                        Value="{x:Bind Path=m_danmakuController.DanmakuViewModel.Opacity, Mode=OneWay}" />
                                    <TextBlock Margin="0,4,0,0">
                                        弹幕顶部距离<Run Text="{x:Bind Path=m_danmakuController.DanmakuViewModel.MarginTop, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    <Slider
                                        x:Name="DanmuTopMargin"
                                        Maximum="200"
                                        Minimum="0"
                                        StepFrequency="4"
                                        Value="0" />
                                    <TextBlock Margin="0,4,0,0">
                                        弹幕同屏密度(0为不限制)<Run Text="{x:Bind Path=DanmuSettingMaxNum.Value, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    <Slider
                                        x:Name="DanmuSettingMaxNum"
                                        Maximum="50"
                                        Minimum="0"
                                        StepFrequency="1"
                                        Value="0" />
                                    <TextBlock Margin="0,4,0,0">
                                        弹幕字体
                                    </TextBlock>
                                    <AutoSuggestBox x:Name="DanmuSettingFont" QueryIcon="Accept" />

                                    <Grid Margin="0,4,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="1" Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowBoldStyleControl}">
                                            <TextBlock Margin="0,4">弹幕样式</TextBlock>
                                            <ComboBox
                                                x:Name="DanmuSettingStyle"
                                                Foreground="White"
                                                SelectedIndex="{x:Bind Path=m_danmakuController.DanmakuViewModel.BolderStyle, Converter={StaticResource DanmakuStyleConvert}, Mode=TwoWay}">
                                                <ComboBox.Items>
                                                    <ComboBoxItem>重叠</ComboBoxItem>
                                                    <ComboBoxItem>无边</ComboBoxItem>
                                                    <ComboBoxItem>阴影</ComboBoxItem>
                                                    <ComboBoxItem>描边</ComboBoxItem>
                                                </ComboBox.Items>
                                            </ComboBox>
                                        </StackPanel>
                                        <ToggleSwitch
                                            x:Name="DanmuSettingBold"
                                            Margin="0,4,0,0"
                                            Foreground="White"
                                            IsOn="{x:Bind Path=m_danmakuController.DanmakuViewModel.Bold, Mode=TwoWay}"
                                            Visibility="{x:Bind m_danmakuController.DanmakuViewModel.ShowBoldControl}">
                                            <ToggleSwitch.Header>
                                                <TextBlock Foreground="White">字体加粗</TextBlock>
                                            </ToggleSwitch.Header>
                                        </ToggleSwitch>
                                    </Grid>
                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <ToggleSwitch x:Name="DanmuSettingMerge" Foreground="White">
                                            <ToggleSwitch.Header>
                                                <TextBlock Foreground="White">合并重复弹幕</TextBlock>
                                            </ToggleSwitch.Header>
                                        </ToggleSwitch>

                                    </Grid>
                                    <TextBlock Margin="0,8">
                                        屏蔽等级(0为不屏蔽)<Run Text="{x:Bind Path=DanmuSettingShieldLevel.Value, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" />
                                        级</TextBlock>
                                    <Slider
                                        x:Name="DanmuSettingShieldLevel"
                                        Maximum="10"
                                        Minimum="0"
                                        StepFrequency="1" />

                                    <Grid Margin="0,8,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <ToggleSwitch x:Name="DanmuSettingDisableColorful" Foreground="White">
                                            <ToggleSwitch.Header>
                                                <TextBlock Foreground="White">屏蔽彩色弹幕</TextBlock>
                                            </ToggleSwitch.Header>
                                        </ToggleSwitch>
                                    </Grid>

                                    <TextBlock Margin="0,8">关键词屏蔽</TextBlock>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="DanmuSettingTxtWord" PlaceholderText="输入关键词" />
                                        <Button
                                            x:Name="DanmuSettingAddWord"
                                            Grid.Column="1"
                                            Margin="8,0,0,0"
                                            Click="DanmuSettingAddWord_Click"
                                            Foreground="White">
                                            添加
                                        </Button>
                                        <Button
                                            x:Name="DanmuSettingSyncWords"
                                            Grid.Column="2"
                                            Margin="8,0,0,0"
                                            Click="DanmuSettingSyncWords_Click"
                                            Foreground="White">
                                            同步
                                        </Button>
                                    </Grid>
                                    <ItemsControl x:Name="DanmuSettingWords" Margin="0,8,0,0">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <toolkit:WrapPanel VerticalSpacing="4" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <HyperlinkButton Margin="0,0,8,0" Foreground="White">
                                                    <Border
                                                        Padding="8,4"
                                                        Background="Gray"
                                                        CornerRadius="{StaticResource ControlCornerRadius}">
                                                        <TextBlock FontSize="12" Text="{Binding}" />
                                                    </Border>
                                                </HyperlinkButton>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </ScrollViewer>
                        </PivotItem>
                        <PivotItem Foreground="White">
                            <PivotItem.Header>
                                <TextBlock FontSize="18" Foreground="White">播放</TextBlock>
                            </PivotItem.Header>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15,0">
                                    <TextBlock Margin="0,8">优先选择视频编码</TextBlock>
                                    <ComboBox
                                        x:Name="PlayerSettingMode"
                                        DisplayMemberPath="Name"
                                        ItemsSource="{x:Bind common:DefaultVideoTypeOptions.Options}"
                                        SelectedValuePath="Value" />
                                    <ToggleSwitch
                                        x:Name="PlayerSettingUseOtherSite"
                                        Margin="0,8"
                                        Foreground="White"
                                        Visibility="Collapsed">
                                        <ToggleSwitch.Header>
                                            <TextBlock Foreground="White">使用外站视频替换无法播放的视频</TextBlock>
                                        </ToggleSwitch.Header>
                                    </ToggleSwitch>
                                    <ToggleSwitch
                                        x:Name="PlayerSettingAutoToPosition"
                                        Margin="0,8"
                                        Foreground="White">
                                        <ToggleSwitch.Header>
                                            <TextBlock Foreground="White">自动跳转至上次观看进度</TextBlock>
                                        </ToggleSwitch.Header>
                                    </ToggleSwitch>
                                    <ToggleSwitch
                                        x:Name="PlayerSettingAutoNext"
                                        Margin="0,8"
                                        Foreground="White">
                                        <ToggleSwitch.Header>
                                            <TextBlock Foreground="White">自动播放下一P</TextBlock>
                                        </ToggleSwitch.Header>
                                    </ToggleSwitch>
                                    <TextBlock Margin="0,8">播放模式</TextBlock>
                                    <ComboBox x:Name="PlayerSettingPlayMode">
                                        <ComboBox.Items>
                                            <ComboBoxItem>顺序播放</ComboBoxItem>
                                            <ComboBoxItem>单集循环</ComboBoxItem>
                                            <ComboBoxItem>列表循环</ComboBoxItem>
                                            <ComboBoxItem>播完停止</ComboBoxItem>
                                        </ComboBox.Items>
                                    </ComboBox>
                                    <TextBlock Margin="0,8">画面尺寸</TextBlock>
                                    <ComboBox x:Name="PlayerSettingRatio">
                                        <ComboBox.Items>
                                            <ComboBoxItem>默认</ComboBoxItem>
                                            <ComboBoxItem>填充</ComboBoxItem>
                                            <ComboBoxItem>16:9</ComboBoxItem>
                                            <ComboBoxItem>4:3</ComboBoxItem>
                                            <ComboBoxItem>兼容</ComboBoxItem>
                                        </ComboBox.Items>
                                    </ComboBox>
                                    <ToggleSwitch
                                        x:Name="PlayerSettingABPlayMode"
                                        Margin="0,8"
                                        Foreground="White">
                                        <ToggleSwitch.Header>
                                            <TextBlock Foreground="White">A-B 循环播放</TextBlock>
                                        </ToggleSwitch.Header>
                                    </ToggleSwitch>
                                    <ToggleSwitch
                                        x:Name="SwitchVideoEnable"
                                        Margin="0,8"
                                        Foreground="White"
                                        IsOn="False">
                                        <ToggleSwitch.Header>
                                            <TextBlock Foreground="White">仅播放音频（实验性）</TextBlock>
                                        </ToggleSwitch.Header>
                                    </ToggleSwitch>
                                    <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                                        <Button
                                            x:Name="PlayerSettingABPlaySetPointA"
                                            Grid.Column="1"
                                            Margin="0,0,8,0"
                                            Click="PlayerSettingABPlaySetPointA_Click"
                                            Foreground="White"
                                            Visibility="Collapsed">
                                            设置A点
                                        </Button>
                                        <Button
                                            x:Name="PlayerSettingABPlaySetPointB"
                                            Grid.Column="1"
                                            Click="PlayerSettingABPlaySetPointB_Click"
                                            Foreground="White"
                                            Visibility="Collapsed">
                                            设置B点
                                        </Button>
                                    </StackPanel>

                                    <TextBlock x:Name="txtInfo" TextWrapping="Wrap" />
                                </StackPanel>
                            </ScrollViewer>
                        </PivotItem>
                        <PivotItem Foreground="White">
                            <PivotItem.Header>
                                <TextBlock FontSize="18" Foreground="White">字幕</TextBlock>
                            </PivotItem.Header>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15,0">
                                    <TextBlock Margin="0,8">字幕加粗</TextBlock>
                                    <ToggleSwitch
                                        x:Name="SubtitleSettingBold"
                                        OffContent="关闭"
                                        OnContent="开启" />
                                    <TextBlock Margin="0,8">字幕颜色</TextBlock>
                                    <ComboBox x:Name="SubtitleSettingColor" SelectedIndex="1">
                                        <ComboBox.Items>
                                            <ComboBoxItem Tag="#FFFFFF">白色</ComboBoxItem>
                                            <ComboBoxItem Tag="#bfbfbf">灰色</ComboBoxItem>
                                            <ComboBoxItem Tag="#40a9ff">蓝色</ComboBoxItem>
                                            <ComboBoxItem Tag="#ff7a45">橙色</ComboBoxItem>
                                            <ComboBoxItem Tag="#9254de">紫色</ComboBoxItem>
                                            <ComboBoxItem Tag="#f5222d">红色</ComboBoxItem>
                                            <ComboBoxItem Tag="#000000">黑色</ComboBoxItem>
                                        </ComboBox.Items>
                                    </ComboBox>
                                    <TextBlock Margin="0,8">描边颜色</TextBlock>
                                    <ComboBox x:Name="SubtitleSettingBorderColor" SelectedIndex="0">
                                        <ComboBox.Items>
                                            <ComboBoxItem Tag="#000000">黑色</ComboBoxItem>
                                            <ComboBoxItem Tag="#bfbfbf">灰色</ComboBoxItem>
                                            <ComboBoxItem Tag="#40a9ff">蓝色</ComboBoxItem>
                                            <ComboBoxItem Tag="#ff7a45">橙色</ComboBoxItem>
                                            <ComboBoxItem Tag="#9254de">紫色</ComboBoxItem>
                                            <ComboBoxItem Tag="#f5222d">红色</ComboBoxItem>
                                            <ComboBoxItem Tag="#FFFFFF">白色</ComboBoxItem>
                                            <ComboBoxItem Tag="#00FFFFFF">透明</ComboBoxItem>
                                        </ComboBox.Items>
                                    </ComboBox>
                                    <TextBlock Margin="0,8">边框背景</TextBlock>
                                    <AutoSuggestBox x:Name="SubtitleSettingOutsideBorderColor" QueryIcon="Accept" />

                                    <TextBlock Margin="0,8">字幕多行对齐</TextBlock>
                                    <ComboBox x:Name="SubtitleSettingAlign" SelectedIndex="0">
                                        <ComboBox.Items>
                                            <ComboBoxItem>居中</ComboBoxItem>
                                            <ComboBoxItem>左对齐</ComboBoxItem>
                                            <ComboBoxItem>右对齐</ComboBoxItem>
                                        </ComboBox.Items>
                                    </ComboBox>
                                    <TextBlock Margin="0,8">字幕大小</TextBlock>
                                    <Slider
                                        x:Name="SubtitleSettingSize"
                                        Maximum="72"
                                        Minimum="4"
                                        StepFrequency="1"
                                        Value="25" />
                                    <TextBlock Margin="0,8">透明度</TextBlock>
                                    <Slider
                                        x:Name="SubtitleSettingOpacity"
                                        Maximum="1"
                                        Minimum="0.1"
                                        StepFrequency="0.1"
                                        Value="20" />
                                    <TextBlock Margin="0,8">底部距离</TextBlock>
                                    <Slider
                                        x:Name="SubtitleSettingBottom"
                                        Maximum="200"
                                        Minimum="4"
                                        StepFrequency="4"
                                        Value="20" />
                                    <TextBlock Margin="0,8">繁体字幕转简体</TextBlock>
                                    <ToggleSwitch
                                        x:Name="SubtitleSettingToSimplified"
                                        OffContent="关闭"
                                        OnContent="开启" />
                                </StackPanel>
                            </ScrollViewer>
                        </PivotItem>
                    </Pivot>
                </Grid>
            </SplitView.Pane>
            <Grid>
                <Grid
                    DoubleTapped="Grid_DoubleTapped"
                    PointerEntered="Grid_PointerEntered"
                    PointerExited="Grid_PointerExited"
                    PointerMoved="Grid_PointerMoved"
                    PointerPressed="Grid_PointerPressed"
                    PointerReleased="Grid_PointerReleased">
                    <!--  播放器  -->
                    <local:Player
                        x:Name="Player"
                        ChangeEngine="Player_ChangeEngine"
                        PlayMediaEnded="Player_PlayMediaEnded"
                        PlayMediaError="Player_PlayMediaError"
                        PlayMediaOpened="Player_PlayMediaOpened"
                        PlayStateChanged="Player_PlayStateChanged"
                        StatsUpdated="Player_OnStatsUpdated" />

                    <!--  字幕  -->
                    <Border
                        x:Name="BorderSubtitle"
                        Margin="0,0,0,24"
                        Padding="3,4,8,4"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Bottom"
                        Opacity="{Binding ElementName=SubtitleSettingOpacity, Path=Value, Mode=OneWay}"
                        Visibility="Collapsed" />
                    <!--  弹幕  -->
                    <Grid>
                        <danmaku:Danmaku x:Name="DanmuControl" />
                    </Grid>
                    <Grid>
                        <canvas:CanvasAnimatedControl x:Name="DanmakuCanvas" />
                    </Grid>
                    <!--  亮度  -->
                    <Grid
                        x:Name="BrightnessShield"
                        Background="#99000000"
                        Opacity="0"
                        Tapped="Grid_Tapped" />

                    <Canvas x:Name="ToolTipContainer" />
                    <Grid>
                        <StackPanel
                            x:Name="GridBuffering"
                            VerticalAlignment="Center"
                            Visibility="{Binding ElementName=Player, Path=Buffering, Mode=OneWay}">
                            <muxc:ProgressRing
                                Width="36"
                                Height="36"
                                Foreground="{ThemeResource SystemAccentColor}"
                                IsActive="True" />
                            <TextBlock
                                x:Name="TxtBuffering"
                                Margin="0,8"
                                Foreground="White"
                                Text="缓冲中..."
                                TextAlignment="Center" />
                        </StackPanel>
                        <StackPanel x:Name="VideoLoading" VerticalAlignment="Center">
                            <muxc:ProgressRing
                                Width="36"
                                Height="36"
                                Foreground="{ThemeResource SystemAccentColor}"
                                IsActive="True" />
                            <TextBlock
                                Margin="0,8"
                                Foreground="White"
                                Text="视频加载中"
                                TextAlignment="Center" />
                        </StackPanel>
                    </Grid>
                    <ItemsControl
                        x:Name="InteractionChoices"
                        Margin="0,0,0,80"
                        VerticalAlignment="Bottom"
                        ItemsSource="{x:Bind m_viewModel.Questions, Mode=OneWay}"
                        Visibility="Collapsed">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate x:DataType="player:InteractionEdgeInfoQuestionModel">
                                <GridView
                                    x:Name="SelectChoice"
                                    HorizontalAlignment="Center"
                                    IsItemClickEnabled="True"
                                    ItemClick="SelectChoice_ItemClick"
                                    ItemsSource="{x:Bind Path=choices, Mode=OneWay}"
                                    SelectionMode="None">
                                    <GridView.ItemContainerStyle>
                                        <Style TargetType="GridViewItem">
                                            <Setter Property="Margin" Value="12" />
                                            <Setter Property="Padding" Value="0" />
                                            <Setter Property="VerticalContentAlignment" Value="Stretch" />
                                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                        </Style>
                                    </GridView.ItemContainerStyle>
                                    <GridView.ItemTemplate>
                                        <DataTemplate x:DataType="player:InteractionEdgeInfoChoiceModel">
                                            <Grid Width="240">
                                                <Viewbox>
                                                    <Image
                                                        Width="100"
                                                        Height="33"
                                                        Source="{x:Bind Path=cover}"
                                                        Stretch="UniformToFill" />
                                                </Viewbox>
                                                <TextBlock
                                                    Margin="12,8"
                                                    VerticalAlignment="Center"
                                                    FontSize="20"
                                                    Foreground="{x:Bind Path=color}"
                                                    Text="{x:Bind Path=option}"
                                                    TextAlignment="Center"
                                                    TextWrapping="Wrap" />
                                            </Grid>
                                        </DataTemplate>
                                    </GridView.ItemTemplate>


                                </GridView>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <Grid x:Name="VirtualProgressBar" Visibility="{x:Bind m_viewModel.ShowVideoBottomVirtualProgressBar}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <muxc:ProgressBar
                            Grid.Row="1"
                            Maximum="{Binding ElementName=Player, Path=Duration, Mode=OneWay}"
                            Value="{Binding ElementName=Player, Path=Position, Mode=OneWay}" />
                    </Grid>

                    <Grid x:Name="control">
                        <Grid x:Name="StandardControl">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>


                            <Grid
                                x:Name="TopControlBar"
                                Height="48"
                                Margin="0,0,0,0">
                                <Grid.Background>
                                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                        <GradientStop Color="#C8000000" />
                                        <GradientStop Offset="1" Color="#00000000" />
                                    </LinearGradientBrush>
                                </Grid.Background>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    x:Name="TopTitle"
                                    Margin="12,0"
                                    VerticalAlignment="Center"
                                    FontSize="18"
                                    Foreground="White"
                                    TextTrimming="CharacterEllipsis">
                                    第一集
                                </TextBlock>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <TextBlock
                                        x:Name="TopOnline"
                                        Margin="12,0"
                                        VerticalAlignment="Center"
                                        FontSize="16"
                                        Foreground="White" />

                                    <Button
                                        x:Name="BtnSponsorBlock"
                                        Width="48"
                                        Height="48"
                                        Padding="0"
                                        Background="Transparent"
                                        
                                        Visibility="{x:Bind m_viewModel.ShowSponsorBlockBtn}"
                                        ToolTipService.ToolTip="空降助手">
                                        <fa:FontAwesome
                                            Width="28"
                                            Height="28"
                                            Foreground="White"
                                            Icon="Solid_ShieldAlt" />
                                        <Button.Flyout>
                                            <Flyout x:Name="SponsorBlockFlyout">
                                                <Grid Width="300">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <Grid Grid.Row="0">
                                                        <Grid HorizontalAlignment="Center">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>
                                                            <Grid Grid.Column="0" Margin="0 0 10 0" >
                                                                <fa:FontAwesome Grid.Column="0" FontSize="64" Foreground="DeepSkyBlue" Icon="Solid_ShieldVirus"/>
                                                                <Ellipse Width="48" Height="48" Fill="DeepSkyBlue" />
                                                                <fa:FontAwesome Grid.Column="0" Margin="6 0 0 8" FontSize="22" Foreground="White" Icon="Solid_Play"/>
                                                                <!--因源项目为GPLv3而本项目许可证不明, 因此不能直接引用图标, 选择手动绘制-->
                                                            </Grid>
                                                            <TextBlock Grid.Column="1" FontSize="24" FontWeight="Bold" HorizontalAlignment="Left" VerticalAlignment="Center">空降助手</TextBlock>
                                                        </Grid>
                                                    </Grid>
                                                    <TextBlock Grid.Row="1" x:Name="SponsorBlockMsg" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0 16" FontSize="15"/>

                                                    <StackPanel Grid.Row="2" x:Name="SponsorBlockStackPanel" HorizontalAlignment="Stretch" Margin="0 8" Spacing="8"/>

                                                    <TextBlock Grid.Row="3" FontSize="12" HorizontalAlignment="Center" Margin="0 8" Foreground="Gray" TextDecorations="Underline">
                                                        本功能灵感与数据库来自
                                                        <Hyperlink NavigateUri="https://github.com/hanydd/BilibiliSponsorBlock">
                                                            <Run Text="B站空降助手" />
                                                        </Hyperlink>
                                                    </TextBlock>
                                                </Grid>
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>

                                    <Button
                                        x:Name="BtnOpenWebPlayerToolbar"
                                        Width="48"
                                        Height="48"
                                        Padding="0"
                                        Background="Transparent"
                                        Click="BtnOpenWebPlayerToolbar_OnClick"
                                        Visibility="{x:Bind Player.ShowShakaPlayer, Mode=OneWay}"
                                        ToolTipService.ToolTip="Web播放器工具箱">
                                        <fa:FontAwesome
                                            Width="28"
                                            Height="28"
                                            Foreground="White"
                                            Icon="Solid_Tools" />
                                    </Button>

                                    <Button
                                        x:Name="TopBtnViewPoints"
                                        Width="48"
                                        Height="48"
                                        Padding="0"
                                        Background="Transparent"
                                        Click="TopBtnViewPoints_OnClick"
                                        Visibility="{x:Bind m_viewModel.ShowViewPointsBtn, Mode=OneWay}"
                                        ToolTipService.ToolTip="看点">
                                        <Image
                                            Width="28"
                                            Height="28"
                                            Source="/Assets/Icon/icon_view_point.png" />
                                    </Button>

                                    <Button
                                        x:Name="TopBtnSettingDanmaku"
                                        Width="48"
                                        Height="48"
                                        Padding="0"
                                        Background="Transparent"
                                        Click="TopBtnSettingDanmaku_Click"
                                        ToolTipService.ToolTip="弹幕设置">
                                        <Image
                                            Width="28"
                                            Height="28"
                                            Source="/Assets/Icon/icon_danmaku_setting.png" />
                                    </Button>
                                    <Button
                                        x:Name="TopBtnScreenshot"
                                        Width="48"
                                        Height="48"
                                        Padding="0"
                                        Background="Transparent"
                                        Click="TopBtnScreenshot_Click"
                                        ToolTipService.ToolTip="截图">
                                        <Button.KeyboardAccelerators>
                                            <KeyboardAccelerator Key="F10" />
                                        </Button.KeyboardAccelerators>
                                        <Image
                                            Width="28"
                                            Height="28"
                                            Source="/Assets/Icon/icon_screenshot.png" />
                                    </Button>
                                    <Button
                                        x:Name="TopBtnMore"
                                        Width="48"
                                        Height="48"
                                        Padding="0"
                                        Background="Transparent"
                                        Click="TopBtnMore_Click"
                                        ToolTipService.ToolTip="更多">
                                        <Image
                                            Width="28"
                                            Height="28"
                                            Source="/Assets/Icon/icon_more.png" />
                                    </Button>
                                </StackPanel>


                            </Grid>
                            <Grid Grid.Row="2">
                                <Grid.Background>
                                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                        <GradientStop Color="#00000000" />
                                        <GradientStop Offset="1" Color="#C8000000" />
                                    </LinearGradientBrush>
                                </Grid.Background>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid Margin="8,0">
                                    <!--<Slider
                                    x:Name="BottomProgress"
                                    Foreground="{ThemeResource SystemAccentColor}"
                                    Maximum="{Binding ElementName=Player, Path=Duration, Mode=OneWay}"
                                    ThumbToolTipValueConverter="{StaticResource progress}"
                                    Value="{Binding ElementName=Player, Path=Position, Mode=OneWay}" />-->
                                    <local:PlayerProgressBar
                                        x:Name="BottomProgress"
                                        Position="{x:Bind m_viewModel.Position, Mode=OneWay}"
                                        PositionChanged="BottomProgress_OnPositionChanged"
                                        Duration="{Binding ElementName=Player, Path=Duration, Mode=OneWay}" />
                                    <Canvas x:Name="BottomProgressCanvas" />
                                </Grid>
                                <Grid Grid.Row="1" Padding="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Orientation="Horizontal">
                                        <HyperlinkButton
                                            x:Name="BottomBtnPause"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnPause_Click"
                                            Foreground="White"
                                            Visibility="Collapsed">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Pause" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnPlay"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnPlay_Click"
                                            Foreground="White">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Play" />
                                        </HyperlinkButton>
                                        <muxc:ProgressRing
                                            x:Name="BottomBtnLoading"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Foreground="White"
                                            IsActive="True"
                                            Visibility="Collapsed" />
                                        <HyperlinkButton
                                            x:Name="BottomBtnNext"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnNext_Click"
                                            Foreground="White"
                                            Visibility="Collapsed">
                                            <fa:FontAwesome FontSize="18" Icon="Solid_StepForward" />
                                        </HyperlinkButton>
                                        <TextBlock
                                            x:Name="BottomTextPostion"
                                            Margin="0,0,0,3"
                                            VerticalAlignment="Center"
                                            FontSize="18"
                                            Foreground="White">
                                            <Run Text="{Binding ElementName=Player, Path=Position, Mode=OneWay, Converter={StaticResource ProgressToTimeConverter}}" />
                                            <Run>/</Run>
                                            <Run Text="{Binding ElementName=Player, Path=Duration, Mode=OneWay, Converter={StaticResource ProgressToTimeConverter}}" /></TextBlock>
                                        <Button
                                            x:Name="BottomBtnSelctSubtitle"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Background="Transparent"
                                            Foreground="White"
                                            Visibility="Collapsed">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_ClosedCaptioning" />
                                        </Button>
                                        <Button
                                            x:Name="TopBtnOpenDanmaku"
                                            Width="48"
                                            Height="48"
                                            Padding="0"
                                            Background="Transparent"
                                            Click="TopBtnOpenDanmaku_Click"
                                            Visibility="{x:Bind Path=m_danmakuController.DanmakuViewModel.IsHide, Mode=OneWay}">
                                            <Image
                                                Width="28"
                                                Height="28"
                                                Source="/Assets/Icon/icon_danmaku_open.png" />
                                        </Button>

                                        <Button
                                            x:Name="TopBtnCloseDanmaku"
                                            Width="48"
                                            Height="48"
                                            Padding="0"
                                            Background="Transparent"
                                            Click="TopBtnCloseDanmaku_Click"
                                            Visibility="{x:Bind m_danmakuController.DanmakuViewModel.IsHide, Converter={StaticResource DisplayConvert}, Mode=OneWay}">
                                            <Image
                                                Width="28"
                                                Height="28"
                                                Source="/Assets/Icon/icon_danmaku_close.png" />
                                        </Button>

                                        <!--<HyperlinkButton x:Name="BottomBtnSendDanmaku" Foreground="White" Padding="8" Width="48" Height="48">
                                    <fa:FontAwesome Icon="Solid_Comments" FontSize="20"></fa:FontAwesome>
                                </HyperlinkButton>-->
                                    </StackPanel>
                                    <Grid
                                        x:Name="BottomBtnSendDanmakuWide"
                                        Grid.Column="1"
                                        MaxWidth="400"
                                        VerticalAlignment="Center"
                                        CornerRadius="{StaticResource ControlCornerRadius}">
                                        <TextBox
                                            x:Name="SendDanmakuTextBox"
                                            Padding="45,8,56,10"
                                            VerticalAlignment="Center"
                                            BorderThickness="0"
                                            Foreground="White"
                                            KeyDown="SendDanmakuTextBox_KeyDown"
                                            PlaceholderText="发个友善的弹幕见证当下"
                                            TabIndex="999" />
                                        <Button
                                            VerticalAlignment="Stretch"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            CornerRadius="0"
                                            Style="{StaticResource DefaultButtonStyle}">
                                            <fa:FontAwesome
                                                Margin="0,2,0,0"
                                                FontSize="18"
                                                Foreground="#FFC7C5C5"
                                                Icon="Solid_Palette" />
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel>
                                                        <TextBlock Margin="0,0,0,8">弹幕模式</TextBlock>
                                                        <ComboBox
                                                            x:Name="SendDanmakuMode"
                                                            HorizontalAlignment="Stretch"
                                                            PlaceholderText="选择弹幕模式"
                                                            SelectedIndex="0">
                                                            <ComboBoxItem>滚动</ComboBoxItem>
                                                            <ComboBoxItem>顶部</ComboBoxItem>
                                                            <ComboBoxItem>底部</ComboBoxItem>
                                                        </ComboBox>
                                                        <TextBlock Margin="0,8">弹幕颜色</TextBlock>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBox
                                                                x:Name="SendDanmakuColorText"
                                                                MaxLength="7"
                                                                PlaceholderText="#FFFFFF"
                                                                Text="#FFFFFF" />
                                                            <Border
                                                                x:Name="SendDanmakuColorBorder"
                                                                Grid.Column="1"
                                                                Width="64"
                                                                Margin="4,0,0,0"
                                                                Background="{Binding ElementName=SendDanmakuColorText, Path=Text, Converter={StaticResource ColorConvert}, Mode=OneWay}"
                                                                CornerRadius="{StaticResource ControlCornerRadius}" />
                                                        </Grid>
                                                        <GridView
                                                            MaxWidth="240"
                                                            Margin="-4,4,-4,0"
                                                            IsItemClickEnabled="True"
                                                            ItemClick="GridViewSelectColor_ItemClick"
                                                            ItemsSource="{x:Bind Path=playerHelper.DefaultDanmakuColors}"
                                                            SelectionMode="None">
                                                            <GridView.ItemTemplate>
                                                                <DataTemplate x:DataType="x:String">
                                                                    <Border
                                                                        Width="24"
                                                                        Height="24"
                                                                        Background="{x:Bind Converter={StaticResource ColorConvert}}"
                                                                        CornerRadius="{StaticResource ControlCornerRadius}" />
                                                                </DataTemplate>
                                                            </GridView.ItemTemplate>
                                                        </GridView>
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>
                                        <Button
                                            x:Name="SendDanmakuButton"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Stretch"
                                            Background="#555555"
                                            BorderThickness="0"
                                            Click="SendDanmakuButton_Click"
                                            CornerRadius="0"
                                            Foreground="White"
                                            Opacity="0.8"
                                            Style="{StaticResource DefaultButtonStyle}">
                                            发送
                                        </Button>
                                    </Grid>

                                    <!--<HyperlinkButton
                                    x:Name="BottomBtnSendDanmakuWide"
                                    Grid.Column="1"
                                    MaxWidth="400"
                                    Margin="12,0"
                                    HorizontalAlignment="Stretch"
                                    HorizontalContentAlignment="Stretch"
                                    Click="BottomBtnSendDanmakuWide_Click"
                                    Foreground="White"
                                    ToolTipService.ToolTip="发送弹幕">
                                    <Border
                                        Padding="16,8"
                                        Background="#99808080"
                                        CornerRadius="16">
                                        <TextBlock>快发条弹幕吧~</TextBlock>
                                    </Border>
                                </HyperlinkButton>-->

                                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                                        <Button
                                            x:Name="BottomBtnVolume"
                                            Width="48"
                                            Height="48"
                                            Padding="0,3,0,0"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Foreground="White"
                                            Style="{StaticResource DefaultButtonStyle}"
                                            ToolTipService.ToolTip="音量">
                                            <fa:FontAwesome FontSize="18" Icon="Solid_VolumeUp" />
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Margin="0,0,10,8" VerticalAlignment="Bottom">0</TextBlock>
                                                        <StackPanel>
                                                            <TextBlock HorizontalAlignment="Center">音量</TextBlock>
                                                            <Slider
                                                                x:Name="SliderVolume"
                                                                Width="200"
                                                                Maximum="1"
                                                                Minimum="0"
                                                                StepFrequency="0.1"
                                                                Value="{x:Bind Path=Player.Volume, Mode=TwoWay}" />
                                                        </StackPanel>
                                                        <TextBlock Margin="10,0,0,8" VerticalAlignment="Bottom">1</TextBlock>
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>

                                        <Button
                                            x:Name="BottomBtnSoundQuality"
                                            Height="48"
                                            Padding="8"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            FontSize="18"
                                            Foreground="White"
                                            Style="{StaticResource DefaultButtonStyle}"
                                            ToolTipService.ToolTip="音质">
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock
                                                            x:Name="MinSoundQuality"
                                                            Margin="0,0,10,8"
                                                            VerticalAlignment="Bottom" />
                                                        <StackPanel>
                                                            <TextBlock Margin="0,0,0,10" HorizontalAlignment="Center">音质</TextBlock>
                                                            <Slider
                                                                x:Name="SliderSoundQuality"
                                                                Width="200"
                                                                Minimum="0"
                                                                StepFrequency="1"
                                                                TickFrequency="1"
                                                                TickPlacement="Outside"
                                                                ValueChanged="SliderSoundQuality_ValueChanged" />
                                                        </StackPanel>
                                                        <TextBlock
                                                            x:Name="MaxSoundQuality"
                                                            Margin="10,0,0,8"
                                                            VerticalAlignment="Bottom" />
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>

                                        <Button
                                            x:Name="BottomBtnQuality"
                                            Height="48"
                                            Padding="8"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            FontSize="18"
                                            Foreground="White"
                                            Style="{StaticResource DefaultButtonStyle}"
                                            ToolTipService.ToolTip="画质">
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock
                                                            x:Name="MinQuality"
                                                            Margin="0,0,10,8"
                                                            VerticalAlignment="Bottom" />
                                                        <StackPanel>
                                                            <TextBlock Margin="0,0,0,10" HorizontalAlignment="Center">画质</TextBlock>
                                                            <Slider
                                                                x:Name="SliderQuality"
                                                                Width="200"
                                                                Minimum="0"
                                                                StepFrequency="1"
                                                                TickFrequency="1"
                                                                TickPlacement="Outside"
                                                                ValueChanged="SliderQuality_ValueChanged" />
                                                        </StackPanel>
                                                        <TextBlock
                                                            x:Name="MaxQuality"
                                                            Margin="10,0,0,8"
                                                            VerticalAlignment="Bottom" />
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>

                                        <Button
                                            x:Name="BottomBtnPlaySpeed"
                                            Height="48"
                                            Padding="8"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            FontSize="18"
                                            Foreground="White"
                                            Style="{StaticResource DefaultButtonStyle}"
                                            ToolTipService.ToolTip="倍速">
                                            <Button.Flyout>
                                                <Flyout>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock
                                                            x:Name="MinPlaySpeed"
                                                            Margin="0,0,10,8"
                                                            VerticalAlignment="Bottom" />
                                                        <StackPanel>
                                                            <TextBlock Margin="0,0,0,10" HorizontalAlignment="Center">倍速</TextBlock>
                                                            <Slider
                                                                x:Name="SliderPlaySpeed"
                                                                Width="300"
                                                                StepFrequency="1"
                                                                TickFrequency="1"
                                                                TickPlacement="Outside"
                                                                ValueChanged="SliderPlaySpeed_ValueChanged" />
                                                        </StackPanel>
                                                        <TextBlock
                                                            x:Name="MaxPlaySpeed"
                                                            Margin="10,0,0,8"
                                                            VerticalAlignment="Bottom" />
                                                    </StackPanel>
                                                </Flyout>
                                            </Button.Flyout>
                                        </Button>

                                        <Button
                                            x:Name="BottomBtnList"
                                            Height="48"
                                            Padding="12"
                                            Background="Transparent"
                                            Click="BottomBtnList_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="选集"
                                            Visibility="{x:Bind ShowPlaylistButton, Mode=OneWay}">
                                            <TextBlock VerticalAlignment="Center" FontSize="18">选集</TextBlock>
                                        </Button>
                                        <Button
                                            x:Name="BottomBtnNode"
                                            Height="48"
                                            Padding="12"
                                            Background="Transparent"
                                            Click="BottomBtnNode_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="选集"
                                            Visibility="{x:Bind ShowPlayNodeButton, Mode=OneWay}">
                                            <TextBlock VerticalAlignment="Center" FontSize="18">节点</TextBlock>
                                        </Button>
                                        <HyperlinkButton
                                            x:Name="BottomBtnMiniWindows"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnMiniWindows_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="小窗置顶">
                                            <fa:FontAwesome FontSize="20" Icon="Regular_WindowRestore" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnFullWindows"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnFullWindows_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="铺满窗口">
                                            <fa:FontAwesome FontSize="20" Icon="Regular_WindowMaximize" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnExitFullWindows"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnExitFullWindows_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="取消铺满窗口"
                                            Visibility="Collapsed">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Columns" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnFull"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnFull_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="全屏">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Expand" />
                                        </HyperlinkButton>
                                        <HyperlinkButton
                                            x:Name="BottomBtnExitFull"
                                            Width="48"
                                            Height="48"
                                            Padding="8"
                                            Click="BottomBtnExitFull_Click"
                                            Foreground="White"
                                            ToolTipService.ToolTip="退出全屏"
                                            Visibility="Collapsed">
                                            <fa:FontAwesome FontSize="20" Icon="Solid_Compress" />
                                        </HyperlinkButton>
                                    </StackPanel>
                                </Grid>
                            </Grid>

                        </Grid>
                        <Grid
                            x:Name="MiniControl"
                            VerticalAlignment="Bottom"
                            Visibility="Collapsed">
                            <Grid.Background>
                                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                    <GradientStop Color="#00000000" />
                                    <GradientStop Offset="1" Color="#C8000000" />
                                </LinearGradientBrush>
                            </Grid.Background>
                            <StackPanel VerticalAlignment="Bottom" Orientation="Horizontal">
                                <HyperlinkButton
                                    Width="48"
                                    Height="48"
                                    Padding="8"
                                    Click="BottomBtnPause_Click"
                                    Foreground="White"
                                    Visibility="{Binding ElementName=BottomBtnPause, Path=Visibility, Mode=OneWay}">
                                    <fa:FontAwesome FontSize="20" Icon="Solid_Pause" />
                                </HyperlinkButton>
                                <HyperlinkButton
                                    Width="48"
                                    Height="48"
                                    Padding="8"
                                    Click="BottomBtnPlay_Click"
                                    Foreground="White"
                                    Visibility="{Binding ElementName=BottomBtnPlay, Path=Visibility, Mode=OneWay}">
                                    <fa:FontAwesome FontSize="20" Icon="Solid_Play" />
                                </HyperlinkButton>
                                <Button
                                    Width="48"
                                    Height="48"
                                    Padding="0"
                                    Background="Transparent"
                                    Click="TopBtnOpenDanmaku_Click"
                                    ToolTipService.ToolTip="打开弹幕"
                                    Visibility="{x:Bind Path=DanmuControl.Visibility, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                                    <Image
                                        Width="28"
                                        Height="28"
                                        Source="/Assets/Icon/icon_danmaku_open.png" />
                                </Button>
                                <Button
                                    Width="48"
                                    Height="48"
                                    Padding="0"
                                    Background="Transparent"
                                    Click="TopBtnCloseDanmaku_Click"
                                    ToolTipService.ToolTip="关闭弹幕"
                                    Visibility="{x:Bind Path=DanmuControl.Visibility, Mode=OneWay}">
                                    <Image
                                        Width="28"
                                        Height="28"
                                        Source="/Assets/Icon/icon_danmaku_close.png" />
                                </Button>
                                <HyperlinkButton
                                    x:Name="BottomBtnExitMiniWindows"
                                    Width="48"
                                    Height="48"
                                    Padding="8"
                                    VerticalAlignment="Bottom"
                                    Click="BottomBtnExitMiniWindows_Click"
                                    Foreground="White"
                                    ToolTipService.ToolTip="退出小窗置顶">
                                    <fa:FontAwesome FontSize="20" Icon="Regular_WindowMaximize" />
                                </HyperlinkButton>
                            </StackPanel>
                            <muxc:ProgressBar
                                VerticalAlignment="Bottom"
                                Foreground="White"
                                Maximum="{Binding ElementName=BottomProgress, Path=Duration, Mode=OneWay}"
                                Value="{Binding ElementName=BottomProgress, Path=Position, Mode=OneWay}" />
                        </Grid>

                    </Grid>
                    <HyperlinkButton
                        x:Name="BottomImageBtnPlay"
                        Width="80"
                        Height="80"
                        Margin="24,100"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        Click="BottomBtnPlay_Click"
                        Visibility="Collapsed">
                        <Image Source="ms-appx:///Assets/Icon/ic_play.png" />
                    </HyperlinkButton>

                    <!--  看点列表  -->
                    <Grid
                        x:Name="ViewPointsGrid"
                        Background="Transparent"
                        Tapped="ViewPointsGrid_OnTapped"
                        Visibility="{x:Bind m_viewModel.ShowViewPointsView, Mode=OneWay}">
                        <Grid
                            Width="320"
                            HorizontalAlignment="Right"
                            Background="#C8000000">
                            <ListView
                                IsWin10:ItemContainerStyle="{StaticResource LocalListViewItemStyle}"
                                ItemsSource="{x:Bind m_viewModel.ViewPoints, Mode=OneWay}"
                                SelectionMode="Single">
                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="modules:PlayerInfoViewPoint">
                                        <ListViewItem>
                                            <StackPanel
                                                Margin="0,8,0,8"
                                                Background="Transparent"
                                                Orientation="Horizontal"
                                                Tapped="ViewPoint_OnTapped">
                                                <Image Width="120" Source="{x:Bind ImgUrl}" />
                                                <StackPanel
                                                    Width="172"
                                                    Margin="10,5"
                                                    Orientation="Vertical">
                                                    <TextBlock Text="{x:Bind Content}" TextWrapping="Wrap" />
                                                    <TextBlock>
                                                        <Run Text="{x:Bind From, Converter={StaticResource ProgressToTimeConverter}}" />
                                                        -<Run Text="{x:Bind To, Converter={StaticResource ProgressToTimeConverter}}" />
                                                    </TextBlock>
                                                </StackPanel>
                                            </StackPanel>
                                        </ListViewItem>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid>
                    </Grid>

                    <Button
                        x:Name="BtnFoucs"
                        Width="0"
                        Height="0"
                        Margin="-8,-8,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Background="Transparent"
                        BorderThickness="0" />
                </Grid>

                <webPlayer:WebPlayerToolbarControl
                    x:Name="WebPlayerToolbarControl"
                    ExitToolbar="WebPlayerToolbarControl_OnExitToolbar"
                    Visibility="{x:Bind m_viewModel.ShowWebPlayerToolbar, Mode=OneWay}" />
            </Grid>
        </SplitView>
    </Grid>


</UserControl>