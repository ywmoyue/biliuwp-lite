<local:PlayPage
    x:Class="BiliLite.Pages.SeasonDetailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:control="using:BiliLite.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="using:FontAwesome5"
    xmlns:local="using:BiliLite.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="using:BiliLite.Models.Common.Season"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:viewModel="using:BiliLite.ViewModels.Season"
    Background="Transparent"
    SizeChanged="SeasonDetailPage_OnSizeChanged"
    mc:Ignorable="d">
    <Page.Resources>
        <SolidColorBrush x:Key="RatingControlSelectedForeground" Color="Orange" />
        <Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button">
            <Style.Setters>
                <Setter Property="BorderThickness" Value="0" />
            </Style.Setters>
        </Style>
    </Page.Resources>
    <Grid>
        <Grid x:Name="detail">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition x:Name="RightInfo" Width="{x:Bind m_viewModel.RightInfoWidth, Mode=OneWay}" />
            </Grid.ColumnDefinitions>
            <Grid Grid.ColumnSpan="{x:Bind m_viewModel.PlayerGridColumnSpan, Mode=OneWay}" Background="{ThemeResource NavigationViewTopPaneBackground}">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition x:Name="BottomInfo" Height="Auto" />
                </Grid.RowDefinitions>
                <Grid Background="Black">
                    <control:PlayerControl
                        x:Name="player"
                        ChangeEpisodeEvent="PlayerControl_ChangeEpisodeEvent"
                        FullScreenEvent="PlayerControl_FullScreenEvent"
                        FullWindowEvent="PlayerControl_FullWindowEvent" />
                </Grid>
                <Grid
                    x:Name="BottomActionBar"
                    Grid.Row="1"
                    SizeChanged="BottomActionBar_OnSizeChanged">
                    <StackPanel Orientation="Horizontal">
                        <Button
                            Width="56"
                            Margin="0,0,4,0"
                            Padding="0,8"
                            Background="Transparent"
                            Command="{x:Bind Path=m_viewModel.FollowCommand}"
                            Foreground="{x:Bind Path=m_viewModel.Detail.UserStatus.Follow, Mode=OneWay, Converter={StaticResource ColorSelectedConvert}, ConverterParameter=1}">
                            <StackPanel>
                                <FontIcon
                                    FontFamily="{StaticResource BiliIconFont}"
                                    Glyph="&#xE66B;"
                                    Visibility="{x:Bind Path=m_viewModel.Detail.UserStatus.Follow, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=0}" />
                                <FontIcon
                                    FontFamily="{StaticResource BiliIconFont}"
                                    Glyph="&#xE6DB;"
                                    Visibility="{x:Bind Path=m_viewModel.Detail.UserStatus.Follow, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=1}" />
                                <TextBlock
                                    FontSize="12"
                                    Text="{x:Bind Path=m_viewModel.Detail.Stat.Favorites, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}"
                                    TextAlignment="Center" />
                            </StackPanel>
                        </Button>

                        <Button
                            x:Name="btnSendReview"
                            Width="56"
                            Padding="0,8"
                            Background="Transparent"
                            Click="btnSendReview_Click">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource BiliIconFont}" Glyph="&#xE6DF;" />
                                <TextBlock
                                    FontSize="12"
                                    Text="点评"
                                    TextAlignment="Center" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                        <Button
                            x:Name="btnShare"
                            Width="56"
                            Margin="0,0,4,0"
                            Background="Transparent"
                            Visibility="{x:Bind m_viewModel.ShowNormalShareBtn, Mode=OneWay}">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource BiliIconFont}" Glyph="&#xE671;" />
                                <TextBlock
                                    FontSize="12"
                                    Text="分享"
                                    TextAlignment="Center" />
                            </StackPanel>
                            <Button.Flyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem
                                        Click="btnShareCopyUrl_Click"
                                        Icon="Copy"
                                        Text="复制链接" />
                                    <MenuFlyoutItem
                                        Click="btnShareCopy_Click"
                                        Icon="Copy"
                                        Text="复制标题链接" />
                                    <MenuFlyoutItem
                                        Click="btnShare_Click"
                                        Icon="Share"
                                        Text="分享到..." />
                                </MenuFlyout>
                            </Button.Flyout>
                        </Button>
                        <Button
                            x:Name="btnDownload"
                            Width="56"
                            Margin="0,0,4,0"
                            Background="Transparent"
                            Click="btnDownload_Click"
                            Visibility="{x:Bind m_viewModel.ShowNormalDownloadBtn, Mode=OneWay}">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource BiliIconFont}" Glyph="&#xE672;" />
                                <TextBlock
                                    FontSize="12"
                                    Text="下载"
                                    TextAlignment="Center" />
                            </StackPanel>
                        </Button>
                        <AppBarButton
                            Label="手机看"
                            Style="{StaticResource AppBarButtonNoChevronStyle}"
                            Visibility="Collapsed">
                            <AppBarButton.Icon>
                                <fa:FontAwesome Icon="Solid_MobileAlt" />
                            </AppBarButton.Icon>
                            <AppBarButton.Flyout>
                                <Flyout x:Name="qrFlyout">
                                    <StackPanel MaxWidth="220">
                                        <TextBlock
                                            Text="{x:Bind Path=m_viewModel.Detail.Title, Mode=OneWay}"
                                            TextAlignment="Center"
                                            TextWrapping="Wrap" />
                                        <Grid Margin="0,8">
                                            <Image
                                                x:Name="imgQR"
                                                Width="200"
                                                Height="200" />
                                            <Image
                                                Width="64"
                                                Height="64"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Source="ms-appx:///Assets/SmallTile.scale-100.png" />
                                        </Grid>
                                        <TextBlock
                                            Text="请使用手机扫描上方二维码"
                                            TextAlignment="Center"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </Flyout>
                            </AppBarButton.Flyout>
                        </AppBarButton>
                        <AppBarButton
                            x:Name="btnOpenWeb"
                            Click="btnOpenWeb_Click"
                            Label="浏览器"
                            Visibility="Collapsed">
                            <AppBarButton.Icon>
                                <fa:FontAwesome Icon="Solid_GlobeAsia" />
                            </AppBarButton.Icon>
                        </AppBarButton>
                        <AppBarButton
                            x:Name="btnRefresh"
                            Click="btnRefresh_Click"
                            Label="刷新"
                            Visibility="Collapsed">
                            <AppBarButton.Icon>
                                <fa:FontAwesome Icon="Solid_Sync" />
                            </AppBarButton.Icon>
                            <AppBarButton.KeyboardAccelerators>
                                <KeyboardAccelerator Key="F5" />
                            </AppBarButton.KeyboardAccelerators>
                        </AppBarButton>
                        <Button
                            x:Name="btnMore"
                            Width="56"
                            Margin="0"
                            Background="Transparent">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource BiliIconFont}" Glyph="&#xE680;" />
                                <TextBlock
                                    FontSize="12"
                                    Text="更多"
                                    TextAlignment="Center" />
                            </StackPanel>
                            <Button.Flyout>
                                <MenuFlyout>
                                    <MenuFlyoutSubItem Text="分享" Visibility="{x:Bind m_viewModel.ShowFlyoutShareBtn, Mode=OneWay}">
                                        <MenuFlyoutItem
                                            Click="btnShareCopyUrl_Click"
                                            Icon="Copy"
                                            Text="复制链接" />
                                        <MenuFlyoutItem
                                            Click="btnShareCopy_Click"
                                            Icon="Copy"
                                            Text="复制标题链接" />
                                        <MenuFlyoutItem
                                            Click="btnShare_Click"
                                            Icon="Share"
                                            Text="分享到..." />
                                    </MenuFlyoutSubItem>
                                    <MenuFlyoutItem Click="btnDownload_Click" Visibility="{x:Bind m_viewModel.ShowFlyoutDownloadBtn, Mode=OneWay}">下载</MenuFlyoutItem>
                                    <MenuFlyoutItem Click="btnOpenQR_Click">手机观看</MenuFlyoutItem>
                                    <MenuFlyoutItem Click="btnOpenWeb_Click">浏览器打开</MenuFlyoutItem>
                                    <MenuFlyoutItem Click="btnRefresh_Click">刷新</MenuFlyoutItem>
                                </MenuFlyout>
                            </Button.Flyout>
                        </Button>
                        <Button
                            x:Name="BtnOpenRightInfo"
                            Width="56"
                            Margin="0,0,4,0"
                            Background="Transparent"
                            Command="{x:Bind m_viewModel.OpenRightInfoCommand}"
                            Visibility="{x:Bind m_viewModel.ShowOpenRightInfoBtn, Mode=OneWay}">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource BiliIconFont}" Glyph="&#xe68a;" />
                                <TextBlock
                                    FontSize="12"
                                    Text="详情"
                                    TextAlignment="Center" />
                            </StackPanel>
                        </Button>
                        <!--<AppBarButton Label="磁贴">
                            <AppBarButton.Icon>
                                <fa:FontAwesome Icon="Solid_Thumbtack"></fa:FontAwesome>
                            </AppBarButton.Icon>
                        </AppBarButton>-->
                    </StackPanel>
                </Grid>
            </Grid>
            <Grid
                Grid.Column="1"
                Height="{x:Bind m_viewModel.RightInfoHeight, Mode=OneWay}"
                VerticalAlignment="Top"
                Background="{x:Bind m_viewModel.RightInfoBackground, Mode=OneWay}">

                <Pivot x:Name="pivot" SelectionChanged="pivot_SelectionChanged">
                    <PivotItem Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="18" Text="选集" />
                        </PivotItem.Header>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Grid VerticalAlignment="Stretch" CornerRadius="{StaticResource OverlayCornerRadius}">
                                        <Image
                                            Source="{x:Bind Path=m_viewModel.Detail.Cover, Mode=OneWay, Converter={StaticResource ImageSourceConvert}, ConverterParameter='200w'}"
                                            Stretch="Fill"
                                            Tapped="Image_Tapped" />
                                        <Border
                                            Margin="4"
                                            Padding="4,2"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Background="#FFFB9E60"
                                            CornerRadius="{StaticResource ControlCornerRadius}"
                                            Opacity="1"
                                            Visibility="{x:Bind Path=m_viewModel.Detail.ShowBadge, Mode=OneWay}">
                                            <TextBlock
                                                FontSize="12"
                                                Foreground="#FFFFFFFF"
                                                Text="{x:Bind Path=m_viewModel.Detail.Badge, Mode=OneWay}"
                                                TextTrimming="CharacterEllipsis"
                                                TextWrapping="Wrap" />
                                        </Border>
                                    </Grid>
                                    <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                        <TextBlock Text="{x:Bind Path=m_viewModel.Detail.Title, Mode=OneWay}" TextWrapping="Wrap" />
                                        <TextBlock
                                            Margin="0,2"
                                            Foreground="Gray"
                                            TextWrapping="Wrap"><Run Text="{x:Bind Path=m_viewModel.Detail.Stat.Play, Mode=OneWay}" /> <Run Text="{x:Bind Path=m_viewModel.Detail.Stat.Followers, Mode=OneWay}" /></TextBlock>
                                        <TextBlock
                                            Margin="0,2"
                                            Foreground="Gray"
                                            Text="{x:Bind Path=m_viewModel.Detail.Publish.PubTimeShow, Mode=OneWay}" />
                                        <TextBlock
                                            Margin="0,2"
                                            Foreground="Gray"
                                            Text="{x:Bind Path=m_viewModel.Detail.Publish.TimeLengthShow, Mode=OneWay}" />
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock
                                                Margin="0,2,0,0"
                                                FontSize="18"
                                                FontWeight="Bold"
                                                Foreground="Orange"
                                                Text="{x:Bind Path=m_viewModel.Detail.Rating.Score, Mode=OneWay}"
                                                Visibility="{x:Bind Path=m_viewModel.Detail.ShowRating, Mode=OneWay}"><Run FontSize="12" FontWeight="Normal">分</Run></TextBlock>
                                            <TextBlock
                                                Margin="5,0,0,2"
                                                VerticalAlignment="Bottom"
                                                FontSize="12"
                                                Foreground="Gray"
                                                Visibility="{x:Bind Path=m_viewModel.Detail.ShowRating, Mode=OneWay}"><Run Text="{x:Bind Path=m_viewModel.Detail.Rating.Count, Mode=OneWay, Converter={StaticResource NumberToStringConvert}}" />
                                                人评分</TextBlock>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                                <Button
                                    Margin="0,16,0,0"
                                    HorizontalAlignment="Stretch"
                                    Background="Transparent"
                                    BorderBrush="#FFFB9E60"
                                    Foreground="#FFFB9E60"
                                    Visibility="{x:Bind Path=m_viewModel.Detail.ShowPayment, Mode=OneWay}">
                                    <TextBlock Text="{x:Bind Path=m_viewModel.Detail.Payment.Dialog.Title, Mode=OneWay}" />
                                </Button>
                                <toolkit:AdaptiveGridView
                                    x:Name="listEpisode"
                                    Margin="0,8,0,0"
                                    DesiredWidth="120"
                                    ItemHeight="36"
                                    ItemsSource="{x:Bind Path=m_viewModel.Episodes, Mode=OneWay}"
                                    PreviewKeyDown="listEpisode_PreviewKeyDown"
                                    PreviewKeyUp="listEpisode_PreviewKeyUp"
                                    SelectionChanged="listEpisode_SelectionChanged"
                                    Visibility="{x:Bind Path=m_viewModel.ShowEpisodes, Mode=OneWay}">
                                    <GridView.Header>
                                        <TextBlock
                                            Margin="0,8"
                                            FontSize="18"
                                            FontWeight="Bold">
                                            正片
                                        </TextBlock>
                                    </GridView.Header>
                                    <GridView.ItemTemplate>
                                        <DataTemplate x:DataType="model:SeasonDetailEpisodeModel">
                                            <Grid Background="{ThemeResource CardBackground}" ToolTipService.ToolTip="{x:Bind Path=LongTitle}">
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    TextAlignment="Center"
                                                    TextTrimming="CharacterEllipsis"><Run Text="{x:Bind Path=Title}" /></TextBlock>
                                                <Border
                                                    Padding="4,2"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Top"
                                                    Background="Orange"
                                                    CornerRadius="{Binding Text, ElementName=CornerRadiusValue, Converter={StaticResource SingleCornerRadiusConverter}, ConverterParameter=4}"
                                                    Visibility="{x:Bind Path=ShowBadge}">
                                                    <StackPanel>
                                                        <TextBlock
                                                            FontSize="12"
                                                            Foreground="White"
                                                            Text="{x:Bind Path=Badge}" />
                                                        <TextBlock x:Name="CornerRadiusValue" Visibility="Collapsed">24</TextBlock>
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </GridView.ItemTemplate>

                                </toolkit:AdaptiveGridView>
                                <toolkit:AdaptiveGridView
                                    x:Name="listPreview"
                                    Margin="0,8,0,0"
                                    DesiredWidth="120"
                                    ItemHeight="36"
                                    ItemsSource="{x:Bind Path=m_viewModel.Previews, Mode=OneWay}"
                                    SelectionChanged="listPreview_SelectionChanged"
                                    Visibility="{x:Bind Path=m_viewModel.ShowPreview, Mode=OneWay}">
                                    <GridView.Header>
                                        <TextBlock
                                            Margin="0,8"
                                            FontSize="18"
                                            FontWeight="Bold">
                                            预告/花絮
                                        </TextBlock>
                                    </GridView.Header>
                                    <GridView.ItemTemplate>
                                        <DataTemplate x:DataType="model:SeasonDetailEpisodeModel">
                                            <Grid Background="{ThemeResource CardBackground}" ToolTipService.ToolTip="{x:Bind Path=LongTitle}">
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    TextAlignment="Center"
                                                    TextTrimming="CharacterEllipsis"><Run Text="{x:Bind Path=Title}" /></TextBlock>
                                                <Border
                                                    Padding="4,2"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Top"
                                                    Background="Orange"
                                                    CornerRadius="{Binding Text, ElementName=CornerRadiusValue, Converter={StaticResource SingleCornerRadiusConverter}, ConverterParameter=8}"
                                                    Visibility="{x:Bind Path=ShowBadge}">
                                                    <StackPanel>
                                                        <TextBlock
                                                            FontSize="12"
                                                            Foreground="White"
                                                            Text="{x:Bind Path=Badge}" />
                                                        <TextBlock x:Name="CornerRadiusValue" Visibility="Collapsed">24</TextBlock>
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </GridView.ItemTemplate>

                                </toolkit:AdaptiveGridView>
                                <TextBlock TextAlignment="Center" Visibility="{x:Bind Path=m_viewModel.NothingPlay, Mode=OneWay}">尚未开播或不支持你所在地区</TextBlock>
                                <toolkit:AdaptiveGridView
                                    x:Name="SeasonList"
                                    Margin="0,8,0,0"
                                    DesiredWidth="200"
                                    ItemHeight="36"
                                    ItemsSource="{x:Bind Path=m_viewModel.Detail.Seasons, Mode=OneWay}"
                                    SelectedItem="{x:Bind Path=m_viewModel.Detail.CurrentSeason, Mode=OneWay}"
                                    SelectionChanged="SeasonList_SelectionChanged"
                                    Visibility="{x:Bind Path=m_viewModel.Detail.ShowSeasons, Mode=OneWay}">
                                    <GridView.Header>
                                        <TextBlock
                                            Margin="0,8"
                                            FontSize="18"
                                            FontWeight="Bold">
                                            系列
                                        </TextBlock>
                                    </GridView.Header>
                                    <GridView.ItemTemplate>
                                        <DataTemplate x:DataType="model:SeasonDetailSeasonItemModel">
                                            <Grid
                                                Padding="4,0"
                                                Background="{ThemeResource CardBackground}"
                                                ToolTipService.ToolTip="{x:Bind Path=Title}">
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    TextAlignment="Center"
                                                    TextTrimming="CharacterEllipsis">
                                                    <Run Text="{x:Bind Path=SeasonTitle}" />
                                                </TextBlock>
                                            </Grid>
                                        </DataTemplate>
                                    </GridView.ItemTemplate>

                                </toolkit:AdaptiveGridView>
                            </StackPanel>
                        </ScrollViewer>
                    </PivotItem>
                    <PivotItem Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="18" Text="评论" />
                        </PivotItem.Header>
                        <control:CommentControl x:Name="comment" />
                    </PivotItem>
                    <PivotItem Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="18" Text="详情" />
                        </PivotItem.Header>
                        <ScrollViewer Padding="12,8" VerticalScrollBarVisibility="Auto">
                            <StackPanel>

                                <TextBlock
                                    Margin="0,8"
                                    FontSize="18"
                                    FontWeight="Bold">
                                    标题
                                </TextBlock>
                                <TextBlock
                                    IsTextSelectionEnabled="True"
                                    Text="{x:Bind Path=m_viewModel.Detail.Title, Mode=OneWay}"
                                    TextWrapping="Wrap" />
                                <TextBlock
                                    IsTextSelectionEnabled="True"
                                    Text="{x:Bind Path=m_viewModel.Detail.Alias, Mode=OneWay}"
                                    TextWrapping="Wrap" />
                                <TextBlock
                                    Margin="0,4"
                                    IsTextSelectionEnabled="True"
                                    Text="{x:Bind Path=m_viewModel.Detail.OriginName, Mode=OneWay}"
                                    TextWrapping="Wrap" />
                                <TextBlock
                                    Margin="0,8"
                                    FontSize="18"
                                    FontWeight="Bold"
                                    Text="简介" />
                                <TextBlock
                                    Foreground="Gray"
                                    IsTextSelectionEnabled="True"
                                    Text="{x:Bind Path=m_viewModel.Detail.Evaluate, Mode=OneWay}"
                                    TextWrapping="Wrap" />
                                <TextBlock
                                    Margin="0,8"
                                    FontSize="18"
                                    FontWeight="Bold">
                                    地区
                                </TextBlock>
                                <ItemsControl ItemsSource="{x:Bind Path=m_viewModel.Detail.Areas, Mode=OneWay}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <toolkit:WrapPanel VerticalSpacing="4" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="model:SeasonDetailAreaItemModel">
                                            <HyperlinkButton
                                                x:Name="btnOpenIndexWithArea"
                                                Margin="0,0,8,0"
                                                Click="btnOpenIndexWithArea_Click">
                                                <Border
                                                    Padding="8,4"
                                                    Background="Transparent"
                                                    CornerRadius="{StaticResource ControlCornerRadius}">
                                                    <TextBlock FontSize="14" Text="{x:Bind Path=Name}" />
                                                </Border>
                                            </HyperlinkButton>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <TextBlock
                                    Margin="0,8"
                                    FontSize="18"
                                    FontWeight="Bold">
                                    标签
                                </TextBlock>
                                <ItemsControl ItemsSource="{x:Bind Path=m_viewModel.Detail.Styles, Mode=OneWay}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <toolkit:WrapPanel VerticalSpacing="4" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="model:SeasonDetailStyleItemModel">
                                            <HyperlinkButton
                                                x:Name="btnOpenIndexWithStyle"
                                                Margin="0,0,8,0"
                                                Click="btnOpenIndexWithStyle_Click">
                                                <Border
                                                    Padding="8,4"
                                                    Background="Transparent"
                                                    CornerRadius="{StaticResource ControlCornerRadius}">
                                                    <TextBlock FontSize="14" Text="{x:Bind Path=Name}" />
                                                </Border>
                                            </HyperlinkButton>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <TextBlock
                                    Margin="0,8"
                                    FontSize="18"
                                    FontWeight="Bold"
                                    Text="{x:Bind Path=m_viewModel.Detail.Actor.Title, Mode=OneWay}" />
                                <TextBlock
                                    Foreground="Gray"
                                    IsTextSelectionEnabled="True"
                                    Text="{x:Bind Path=m_viewModel.Detail.Actor.Info, Mode=OneWay}"
                                    TextWrapping="Wrap" />
                                <TextBlock
                                    Margin="0,8"
                                    FontSize="18"
                                    FontWeight="Bold"
                                    Text="{x:Bind Path=m_viewModel.Detail.Staff.Title, Mode=OneWay}" />
                                <TextBlock
                                    Foreground="Gray"
                                    IsTextSelectionEnabled="True"
                                    Text="{x:Bind Path=m_viewModel.Detail.Staff.Info, Mode=OneWay}"
                                    TextWrapping="Wrap" />

                            </StackPanel>
                        </ScrollViewer>
                    </PivotItem>

                    <PivotItem Margin="0">
                        <PivotItem.Header>
                            <TextBlock FontSize="18" Text="点评" />
                        </PivotItem.Header>
                        <Grid>
                            <ListView ItemsSource="{x:Bind Path=m_seasonReviewViewModel.Items, Mode=OneWay}" SelectionMode="None">
                                <ListView.Header>
                                    <StackPanel Margin="0,8">
                                        <muxc:RatingControl
                                            Caption="{x:Bind Path=m_viewModel.Detail.Rating.Score, Mode=OneWay}"
                                            FontSize="36"
                                            IsReadOnly="True"
                                            Value="{x:Bind Path=m_viewModel.Detail.Rating.Score5, Mode=OneWay}" />
                                        <TextBlock
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            Foreground="Gray">
                                            共<Run Text="{x:Bind Path=m_viewModel.Detail.Rating.Count, Mode=OneWay}" />
                                            人评分</TextBlock>
                                    </StackPanel>
                                </ListView.Header>
                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="viewModel:SeasonShortReviewItemViewModel">
                                        <StackPanel>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <Ellipse Width="36" Height="36">
                                                    <Ellipse.Fill>
                                                        <ImageBrush ImageSource="{x:Bind Path=Author.Avatar, Converter={StaticResource ImageSourceConvert}, ConverterParameter='56h'}" Stretch="UniformToFill" />
                                                    </Ellipse.Fill>
                                                </Ellipse>
                                                <StackPanel Grid.Column="1" Margin="8,0">
                                                    <!--<StackPanel Orientation="Horizontal">
                                                        <TextBlock VerticalAlignment="Center">xiaoyaocz</TextBlock>

                                                    </StackPanel>-->
                                                    <TextBlock
                                                        VerticalAlignment="Center"
                                                        Foreground="{x:Bind Path=Author.Vip.VipType, Converter={StaticResource ColorSelectedConvert}, ConverterParameter=2}"
                                                        Text="{x:Bind Path=Author.Uname}" />
                                                    <TextBlock
                                                        FontSize="12"
                                                        Foreground="Gray"
                                                        Text="{x:Bind Path=Ctime, Converter={StaticResource DatetimeConvert}, ConverterParameter='ts'}" />

                                                </StackPanel>
                                                <Viewbox Grid.Column="2" Height="20">
                                                    <muxc:RatingControl IsReadOnly="True" Value="{x:Bind Path=Score5}" />
                                                </Viewbox>
                                            </Grid>
                                            <TextBlock
                                                Margin="44,8,0,8"
                                                IsTextSelectionEnabled="True"
                                                Text="{x:Bind Content}"
                                                TextWrapping="Wrap" />
                                            <StackPanel Margin="44,0,0,0" Orientation="Horizontal">
                                                <HyperlinkButton
                                                    x:Name="btnReviewLike"
                                                    Width="64"
                                                    HorizontalContentAlignment="Left"
                                                    Click="btnReviewLike_Click"
                                                    Foreground="{ThemeResource SystemAccentColor}"
                                                    Visibility="{x:Bind Path=Stat.Liked, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=1}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <fa:FontAwesome FontSize="14" Icon="Regular_ThumbsUp" />
                                                        <TextBlock Margin="4,0" Text="{x:Bind Path=Stat.Likes, Mode=OneWay}" />
                                                    </StackPanel>
                                                </HyperlinkButton>
                                                <HyperlinkButton
                                                    HorizontalContentAlignment="Left"
                                                    Click="btnReviewLike_Click"
                                                    Foreground="Gray"
                                                    Visibility="{x:Bind Path=Stat.Liked, Mode=OneWay, Converter={StaticResource DisplayConvert}, ConverterParameter=0}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <fa:FontAwesome FontSize="14" Icon="Regular_ThumbsUp" />
                                                        <TextBlock Margin="5,0,0,0" Text="{x:Bind Path=Stat.Likes, Mode=OneWay}" />
                                                    </StackPanel>
                                                </HyperlinkButton>

                                                <HyperlinkButton
                                                    x:Name="btnReviewDislike"
                                                    HorizontalContentAlignment="Left"
                                                    Click="btnReviewDislike_Click"
                                                    Foreground="Gray">
                                                    <StackPanel Orientation="Horizontal">
                                                        <fa:FontAwesome
                                                            Margin="0,4,0,0"
                                                            FontSize="14"
                                                            Icon="Regular_ThumbsDown" />

                                                    </StackPanel>
                                                </HyperlinkButton>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListView.ItemTemplate>

                                <ListView.Footer>
                                    <Grid>
                                        <HyperlinkButton
                                            HorizontalAlignment="Center"
                                            Command="{x:Bind Path=m_seasonReviewViewModel.LoadMoreCommand}"
                                            Visibility="{x:Bind Path=m_seasonReviewViewModel.CanLoadMore, Mode=OneWay}">
                                            <TextBlock>加载更多</TextBlock>
                                        </HyperlinkButton>
                                        <ProgressRing
                                            Width="24"
                                            VerticalAlignment="Center"
                                            IsActive="True"
                                            Visibility="{x:Bind Path=m_seasonReviewViewModel.Loading, Mode=OneWay}" />
                                    </Grid>
                                </ListView.Footer>
                            </ListView>
                        </Grid>
                    </PivotItem>
                </Pivot>
            </Grid>
            <toolkit:GridSplitter
                x:Name="RightInfoGridSplitter"
                Grid.Column="1"
                Width="16"
                HorizontalAlignment="Left"
                CursorBehavior="ChangeOnSplitterHover"
                GripperCursor="Default"
                IsEnabled="False"
                ResizeBehavior="BasedOnAlignment"
                ResizeDirection="Auto">
                <toolkit:GridSplitter.Background>
                    <SolidColorBrush Opacity="0" />
                </toolkit:GridSplitter.Background>
                <toolkit:GridSplitter.GripperForeground>
                    <SolidColorBrush Opacity="0" />
                </toolkit:GridSplitter.GripperForeground>
                <toolkit:GridSplitter.RenderTransform>
                    <TranslateTransform X="-8" />
                </toolkit:GridSplitter.RenderTransform>
            </toolkit:GridSplitter>
        </Grid>
        <Border
            Padding="48,24"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Background="#33FFFFFF"
            CornerRadius="{StaticResource ControlCornerRadius}"
            Visibility="{x:Bind Path=m_viewModel.ShowError, Mode=OneWay}">
            <StackPanel VerticalAlignment="Center">
                <FontIcon
                    HorizontalAlignment="Center"
                    FontFamily="{StaticResource BiliIconFont}"
                    FontSize="36"
                    Glyph="&#xE68E;" />
                <TextBlock
                    Margin="0,8,0,0"
                    Text="{x:Bind Path=m_viewModel.ErrorMsg, Mode=OneWay}"
                    TextAlignment="Center" />
                <HyperlinkButton HorizontalAlignment="Center" Click="btnRefresh_Click">
                    <TextBlock>点击刷新</TextBlock>
                </HyperlinkButton>
            </StackPanel>
        </Border>
        <ProgressRing
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            IsActive="True"
            Visibility="{x:Bind Path=m_viewModel.Loading, Mode=OneWay}" />
    </Grid>

</local:PlayPage>
