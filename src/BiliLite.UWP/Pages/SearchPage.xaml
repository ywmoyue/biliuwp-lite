<local:BasePage
    x:Class="BiliLite.Pages.SearchPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:control="using:BiliLite.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dataTemplateSelectors="using:BiliLite.Controls.DataTemplateSelectors"
    xmlns:fa="using:FontAwesome5"
    xmlns:local="using:BiliLite.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="using:BiliLite.Models.Common.Search"
    xmlns:modules="using:BiliLite.Modules"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:viewModel="using:BiliLite.ViewModels.Search"
    Background="Transparent"
    Loaded="SearchPage_Loaded"
    SizeChanged="SearchPage_OnSizeChanged"
    mc:Ignorable="d">
    <Page.Resources>
        <SolidColorBrush x:Key="PivotHeaderBackground" Color="Transparent" />
        <SolidColorBrush x:Key="SystemControlHighlightAltAccentBrush" Color="White" />
        <DataTemplate x:Key="VideoTpl" x:DataType="viewModel:SearchVideoViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid Margin="0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <ComboBox
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=OrderFilters}"
                        SelectedItem="{x:Bind Path=SelectOrder, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="1"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=DurationFilters}"
                        SelectedItem="{x:Bind Path=SelectDuration, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="2"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=RegionFilters}"
                        SelectedItem="{x:Bind Path=SelectRegion, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                </Grid>
                <control:MyAdaptiveGridView
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    Padding="8"
                    DesiredWidth="550"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="120"
                    ItemsSource="{x:Bind Path=Videos, Mode=OneWay}"
                    PointerPressed="Search_ItemPressed"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <control:MyAdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchVideoItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid CornerRadius="{StaticResource OverlayCornerRadius}">
                                    <toolkit:ImageEx
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=pic, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='160w'}"
                                        Stretch="UniformToFill" />
                                    <Grid Padding="8" VerticalAlignment="Bottom">
                                        <Grid.Background>
                                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                                <GradientStop Offset="0.993" Color="#CC000005" />
                                                <GradientStop Offset="0" Color="#00000000" />
                                            </LinearGradientBrush>
                                        </Grid.Background>
                                        <TextBlock
                                            HorizontalAlignment="Right"
                                            FontSize="12"
                                            Foreground="White"
                                            Text="{x:Bind DurationShow}" />
                                    </Grid>
                                </Grid>
                                <Grid Grid.Column="1" Margin="10,5">
                                    <TextBlock
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <StackPanel VerticalAlignment="Bottom">
                                        <TextBlock FontSize="14" Foreground="Gray">
                                            UP:<Run Text="{x:Bind Path=author}" /></TextBlock>
                                        <TextBlock FontSize="14" Foreground="Gray">
                                            播放:<Run Text="{x:Bind Path=play, Converter={StaticResource NumberToStringConvert}}" />
                                            弹幕:<Run Text="{x:Bind Path=video_review, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </control:MyAdaptiveGridView.ItemTemplate>
                    <control:MyAdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <muxc:ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </control:MyAdaptiveGridView.Footer>
                </control:MyAdaptiveGridView>

                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <Button
                    Grid.RowSpan="2"
                    Command="{x:Bind Path=RefreshCommand}"
                    Style="{StaticResource RoundAccentButtonStyle}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                    <SymbolIcon Symbol="Refresh" />
                </Button>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="AnimeTpl" x:DataType="viewModel:SearchAnimeViewModel">
            <Grid>
                <control:MyAdaptiveGridView
                    Grid.Row="1"
                    Padding="8"
                    DesiredWidth="550"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="120"
                    ItemsSource="{x:Bind Path=Animes, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <control:MyAdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchAnimeItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid CornerRadius="{StaticResource OverlayCornerRadius}">
                                    <toolkit:ImageEx
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=cover, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='160w'}"
                                        Stretch="UniformToFill" />
                                    <Border
                                        Margin="5"
                                        Padding="8,4"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Background="Orange"
                                        CornerRadius="{StaticResource ControlCornerRadius}"
                                        Visibility="{x:Bind showBadge}">
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="#FFFFFFFF"
                                            Text="会员专享"
                                            TextAlignment="Justify"
                                            TextTrimming="CharacterEllipsis"
                                            TextWrapping="Wrap" />
                                    </Border>
                                </Grid>
                                <Grid Grid.Column="1" Margin="10,5">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <StackPanel VerticalAlignment="Bottom">
                                        <TextBlock
                                            Margin="0,0,0,4"
                                            FontSize="14"
                                            Foreground="Gray">
                                            类型：<Run Text="{x:Bind season_type_name}" /></TextBlock>
                                        <TextBlock
                                            Margin="0,0,0,4"
                                            FontSize="14"
                                            Foreground="Gray">
                                            地区：<Run Text="{x:Bind areas}" /></TextBlock>
                                        <TextBlock
                                            Margin="0,0,0,4"
                                            FontSize="14"
                                            Foreground="Gray">
                                            风格：<Run Text="{x:Bind styles}" /></TextBlock>
                                        <TextBlock
                                            Margin="0,0,0,4"
                                            FontSize="14"
                                            Foreground="Gray">
                                            开播时间：<Run Text="{x:Bind Path=pubtime, Converter={StaticResource DatetimeConvert}, ConverterParameter='yyyy-MM-dd'}" /></TextBlock>
                                        <!--<TextBlock
                                            Margin="0"
                                            FontSize="14"
                                            Foreground="Gray"
                                            MaxLines="2"
                                            Text="{x:Bind Path=desc}"
                                            TextTrimming="CharacterEllipsis"
                                            TextWrapping="Wrap" TextAlignment="Justify" />-->
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </control:MyAdaptiveGridView.ItemTemplate>
                    <control:MyAdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <muxc:ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </control:MyAdaptiveGridView.Footer>
                </control:MyAdaptiveGridView>
                <TextBlock
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <Button
                    Command="{x:Bind Path=RefreshCommand}"
                    Style="{StaticResource RoundAccentButtonStyle}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                    <SymbolIcon Symbol="Refresh" />
                </Button>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="UserTpl" x:DataType="viewModel:SearchUserViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid Margin="0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <ComboBox
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=OrderFilters}"
                        SelectedItem="{x:Bind Path=SelectOrder, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="1"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=TypeFilters}"
                        SelectedItem="{x:Bind Path=SelectType, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />

                </Grid>
                <control:MyAdaptiveGridView
                    Grid.Row="1"
                    Padding="8"
                    DesiredWidth="550"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="72"
                    ItemsSource="{x:Bind Path=Users, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <control:MyAdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchUserItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <Ellipse
                                        Width="56"
                                        Height="56"
                                        Margin="4,0,0,0">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{x:Bind Path=upic}" Stretch="UniformToFill" />
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <Image
                                        Width="20"
                                        Height="20"
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Source="{x:Bind Path=Verify}" />
                                </Grid>
                                <Grid Grid.Column="1" Margin="8,0">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        Text="{x:Bind uname}"
                                        TextTrimming="CharacterEllipsis" />
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        VerticalAlignment="Center"
                                        FontSize="14"
                                        Foreground="Gray">
                                        稿件:<Run Text="{x:Bind Path=videos, Converter={StaticResource NumberToStringConvert}}" />
                                        粉丝:<Run Text="{x:Bind Path=fans, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        VerticalAlignment="Bottom"
                                        FontSize="14"
                                        Foreground="Gray"
                                        MaxLines="1"
                                        Text="{x:Bind sign}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />

                                    <!--<TextBlock
                                        Margin="0"
                                        FontSize="14"
                                        Foreground="Gray"
                                        MaxLines="2"
                                        Text="{x:Bind Path=desc}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />-->
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </control:MyAdaptiveGridView.ItemTemplate>
                    <control:MyAdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <muxc:ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </control:MyAdaptiveGridView.Footer>
                </control:MyAdaptiveGridView>
                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <Button
                    Grid.RowSpan="2"
                    Command="{x:Bind Path=RefreshCommand}"
                    Style="{StaticResource RoundAccentButtonStyle}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                    <SymbolIcon Symbol="Refresh" />
                </Button>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="LiveRoomTpl" x:DataType="viewModel:SearchLiveRoomViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <control:MyAdaptiveGridView
                    Grid.Row="1"
                    Padding="8"
                    DesiredWidth="260"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="220"
                    ItemsSource="{x:Bind Path=Rooms, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <control:MyAdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchLiveRoomItem">
                            <Grid Background="{ThemeResource CardBackground}">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="32" />
                                </Grid.RowDefinitions>
                                <Grid>
                                    <toolkit:ImageEx
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                        Source="{x:Bind Path=user_cover, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='200h'}"
                                        Stretch="UniformToFill" />
                                </Grid>
                                <Grid Grid.Row="1" Margin="4,-24,4,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="48" />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Ellipse
                                        Width="48"
                                        Height="48"
                                        Stroke="Gray"
                                        StrokeThickness="1">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{x:Bind Path=uface, Converter={StaticResource ImageSourceConvert}, ConverterParameter='56w'}" />
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <TextBlock
                                        Grid.Column="1"
                                        Margin="4,24,4,0"
                                        Text="{x:Bind title}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                </Grid>

                                <Grid Grid.Row="2" Margin="8,4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        Foreground="Gray"
                                        Text="{x:Bind uname}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Grid.Column="1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        Foreground="Gray">
                                        人气:<Run Text="{x:Bind Path=online, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </control:MyAdaptiveGridView.ItemTemplate>
                    <control:MyAdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <muxc:ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </control:MyAdaptiveGridView.Footer>
                </control:MyAdaptiveGridView>
                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <Button
                    Grid.RowSpan="2"
                    Command="{x:Bind Path=RefreshCommand}"
                    Style="{StaticResource RoundAccentButtonStyle}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                    <SymbolIcon Symbol="Refresh" />
                </Button>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="ArticTpl" x:DataType="viewModel:SearchArticleViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid Margin="0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <ComboBox
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=OrderFilters}"
                        SelectedItem="{x:Bind Path=SelectOrder, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                    <ComboBox
                        Grid.Column="2"
                        Margin="8,0"
                        HorizontalAlignment="Stretch"
                        DisplayMemberPath="name"
                        ItemsSource="{x:Bind Path=RegionFilters}"
                        SelectedItem="{x:Bind Path=SelectRegion, Mode=TwoWay}"
                        SelectedValuePath="value"
                        SelectionChanged="ComboBox_SelectionChanged" />
                </Grid>
                <control:MyAdaptiveGridView
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    Padding="8"
                    DesiredWidth="550"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="120"
                    ItemsSource="{x:Bind Path=Articles, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <control:MyAdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchArticleItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <toolkit:ImageEx
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    CornerRadius="{StaticResource OverlayCornerRadius}"
                                    PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                    Source="{x:Bind Path=cover, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='160w'}"
                                    Stretch="UniformToFill" />
                                <Grid Grid.Column="1" Margin="10,5">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <StackPanel VerticalAlignment="Bottom">
                                        <TextBlock
                                            Margin="0,4"
                                            FontSize="14"
                                            Foreground="Gray">
                                            阅读:<Run Text="{x:Bind Path=view, Converter={StaticResource NumberToStringConvert}}" />
                                            评论:<Run Text="{x:Bind Path=reply, Converter={StaticResource NumberToStringConvert}}" />
                                            喜欢:<Run Text="{x:Bind Path=like, Converter={StaticResource NumberToStringConvert}}" /></TextBlock>
                                        <TextBlock
                                            Margin="0,4"
                                            FontSize="14"
                                            Foreground="Gray"
                                            MaxLines="2">
                                            分区:<Run Text="{x:Bind Path=category_name}" /></TextBlock>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </control:MyAdaptiveGridView.ItemTemplate>
                    <control:MyAdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <muxc:ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </control:MyAdaptiveGridView.Footer>
                </control:MyAdaptiveGridView>

                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <Button
                    Grid.RowSpan="2"
                    Command="{x:Bind Path=RefreshCommand}"
                    Style="{StaticResource RoundAccentButtonStyle}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                    <SymbolIcon Symbol="Refresh" />
                </Button>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="TopicTpl" x:DataType="viewModel:SearchTopicViewModel">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <control:MyAdaptiveGridView
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    Padding="8"
                    DesiredWidth="550"
                    IsItemClickEnabled="True"
                    ItemClick="Search_ItemClick"
                    ItemHeight="120"
                    ItemsSource="{x:Bind Path=Topics, Mode=OneWay}"
                    SelectionMode="None"
                    StretchContentForSingleRow="False">
                    <control:MyAdaptiveGridView.ItemTemplate>
                        <DataTemplate x:DataType="model:SearchTopicItem">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <toolkit:ImageEx
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    CornerRadius="{StaticResource OverlayCornerRadius}"
                                    PlaceholderSource="ms-appx:///Assets/Thumbnails/Placeholde.png"
                                    Source="{x:Bind Path=cover, Converter={StaticResource ImageCompressionConvert}, ConverterParameter='160w'}"
                                    Stretch="UniformToFill" />
                                <StackPanel Grid.Column="1" Margin="10,5">
                                    <TextBlock
                                        Margin="0,0,0,4"
                                        MaxLines="2"
                                        Text="{x:Bind title}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray"
                                        MaxLines="2"
                                        Text="{x:Bind description}"
                                        TextAlignment="Justify"
                                        TextTrimming="CharacterEllipsis"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Margin="0,4"
                                        FontSize="14"
                                        Foreground="Gray">
                                        时间:<Run Text="{x:Bind Path=pubdate, Converter={StaticResource DatetimeConvert}, ConverterParameter='yyyy-MM-dd'}" /></TextBlock>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </control:MyAdaptiveGridView.ItemTemplate>
                    <control:MyAdaptiveGridView.Footer>
                        <StackPanel>
                            <HyperlinkButton
                                x:Name="btnLoadMore"
                                HorizontalAlignment="Center"
                                Command="{x:Bind Path=LoadMoreCommand}"
                                Foreground="Gray"
                                Visibility="{x:Bind Path=ShowLoadMore, Mode=OneWay}">
                                <TextBlock>加载更多</TextBlock>
                            </HyperlinkButton>
                            <muxc:ProgressRing
                                HorizontalAlignment="Center"
                                IsActive="True"
                                Visibility="{x:Bind Path=Loading, Mode=OneWay}" />
                        </StackPanel>
                    </control:MyAdaptiveGridView.Footer>
                </control:MyAdaptiveGridView>

                <TextBlock
                    Grid.Row="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="Gray"
                    Visibility="{x:Bind Path=Nothing, Mode=OneWay}">
                    什么都没有找到呢~
                </TextBlock>
                <Button
                    Grid.RowSpan="2"
                    Command="{x:Bind Path=RefreshCommand}"
                    Style="{StaticResource RoundAccentButtonStyle}"
                    Visibility="{x:Bind Path=Loading, Mode=OneWay, Converter={StaticResource DisplayConvert}}">
                    <SymbolIcon Symbol="Refresh" />
                </Button>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="TestTpl">
            <TextBlock>还没写好</TextBlock>
        </DataTemplate>
        <dataTemplateSelectors:SearchDataTemplateSelector
            x:Key="tplSelect"
            AnimeTemplate="{StaticResource AnimeTpl}"
            ArticTemplate="{StaticResource ArticTpl}"
            LiveRoomTemplate="{StaticResource LiveRoomTpl}"
            TestTemplate="{StaticResource TestTpl}"
            TopicTemplate="{StaticResource TopicTpl}"
            UserTemplate="{StaticResource UserTpl}"
            VideoTemplate="{StaticResource VideoTpl}" />
    </Page.Resources>
    <Grid>
        <Pivot
            x:Name="pivot"
            Margin="{x:Bind m_viewModel.PivotMargin, Mode=OneWay}"
            ItemTemplateSelector="{StaticResource ResourceKey=tplSelect}"
            ItemsSource="{x:Bind Path=m_viewModel.SearchItems}"
            SelectedIndex="{x:Bind m_viewModel.PivotIndex, Mode=TwoWay}"
            SelectedItem="{x:Bind Path=m_viewModel.SelectItem, Mode=TwoWay}"
            SelectionChanged="pivot_SelectionChanged"
            UseSystemFocusVisuals="False">
            <Pivot.HeaderTemplate>
                <DataTemplate x:DataType="viewModel:ISearchPivotViewModel">
                    <TextBlock FontSize="15" Text="{x:Bind Title}" />
                </DataTemplate>
            </Pivot.HeaderTemplate>
            <Pivot.ItemContainerStyle>
                <Style TargetType="PivotItem">
                    <Setter Property="Margin" Value="0" />
                </Style>
            </Pivot.ItemContainerStyle>
        </Pivot>
        <Grid
            x:Name="SearchBox"
            Margin="{x:Bind m_viewModel.SearchBoxMargin, Mode=OneWay}"
            HorizontalAlignment="{x:Bind m_viewModel.SearchBoxHorizontalAlignment, Mode=OneWay}"
            VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <AutoSuggestBox
                x:Name="txtKeyword"
                MinWidth="220"
                ItemsSource="{x:Bind Path=m_viewModel.SuggestSearchContents, Mode=OneWay}"
                PlaceholderText="随便搜索点什么东西吧"
                QueryIcon="Find"
                QuerySubmitted="txtKeyword_QuerySubmitted"
                TextChanged="txtKeyword_TextChanged" />
            <ComboBox
                x:Name="cbArea"
                Grid.Column="1"
                Margin="8,0,0,0"
                DisplayMemberPath="name"
                ItemsSource="{x:Bind Path=m_viewModel.Areas}"
                PlaceholderText="{x:Bind Path=m_viewModel.Area.name}"
                SelectedIndex="{x:Bind m_viewModel.ComboIndex, Mode=TwoWay}"
                SelectedItem="{x:Bind Path=m_viewModel.Area, Mode=TwoWay}"
                SelectedValuePath="area"
                SelectionChanged="cbArea_SelectionChanged">
                <ComboBoxItem>默认地区</ComboBoxItem>
                <ComboBoxItem>大陆地区</ComboBoxItem>
                <ComboBoxItem>香港地区</ComboBoxItem>
                <ComboBoxItem>台湾地区</ComboBoxItem>
            </ComboBox>
        </Grid>
    </Grid>
</local:BasePage>
